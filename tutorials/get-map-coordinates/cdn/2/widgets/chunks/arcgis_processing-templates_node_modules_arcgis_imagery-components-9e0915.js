/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components-9e0915.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components-9e0915"],{73848:(e,i,t)=>{t.d(i,{D:()=>a});var n=t(41126),s=t(76589);function a(e){const{key:i,dimensionInfo:t}=e,a=i.includes("start")||i.includes("end"),{values:r}=t;let{selectedValue:l}=e;r&&(0,s.e)(r)&&"number"==typeof l&&(l=a?l=r.find((e=>i.includes("start")?e[0]===l:e[1]===l)):r.find((e=>e[0]===l))??r.find((e=>e[1]===l)));const o=l===s.h||e.selectedValue===s.h,c=o?"undefined":(0,s.f)(l,t,{intl:e.intl,useRecurringTimeLabel:!0}),u=(e.isAscending?t.values:[...t.values].reverse()).map((i=>{const n=(0,s.f)(i,t,{intl:e.intl,useRecurringTimeLabel:!0}),a=Array.isArray(i)?i.join(" - "):String(i),r=n===c;return{key:`${e.key}-${a}}`,value:a,label:n,selected:r}})),{messages:d}=e;e.showEnd&&u.push({key:`${t.name}-end-undefined}`,value:String(s.h),label:d.extent.endUndefined,selected:o});const h=Math.max(0,u.findIndex((({selected:e})=>e)));return(0,n.h)("div",{class:e.className},(0,n.h)("arcgis-imagery-lazy-loading-select",{selectedIndex:h,list:u,messages:e.selectMessages,onArcgisChange:i=>{i.stopPropagation();const t=i.detail.selectedValue.split(" - ").map((e=>Number(e)));e.onChange?.(1===t.length?t[0]:t)},containerTop:e.containerTop}),e.sortable&&function(e,i,t,a){const r=(0,s.i)(e)?i?"clock-up":"clock-down":i?"sort-ascending-arrow":"sort-descending-arrow";return(0,n.h)("calcite-action",{icon:r,scale:"s",text:t,slot:"actions-end",onClick:()=>a?.(e.name)})}(t,e.isAscending,d.display.sort,e.updateSorting))}},20563:(e,i,t)=>{t.r(i),t.d(i,{arcgis_imagery_dimension_slider:()=>o,arcgis_imagery_multidimensional_subset:()=>c});var n=t(41126),s=t(76589),a=t(14886),r=t(12839),l=t(73848);const o=class{constructor(e){(0,n.r)(this,e),this.arcgisChange=(0,n.c)(this,"arcgisChange",7),this.manager=(0,a.u)(this),this.intl=(0,a.l)(r.l),this.ValuePicker=(0,a.l)(r.r),this.ValuePickerSlider=(0,a.l)(r.s),this.handleResize=()=>{const e=!(0,s.i)(this.dimensionInfo),i=this.valuePickerConfig?.slider,{heightThresholdForCompactZ:t}=this.sliderSetting;if(!e||!i||!t)return;const{container:n,visibleElements:a}=i;if(n instanceof HTMLElement){const e=n.clientHeight>=t;a.previousButton=e,a.nextButton=e}},this.updateDefinitionDimensionValue=(e,i)=>{this.activeValue=i,this.arcgisChange.emit({dimensionName:e,value:i})},this.updateSliderValue=e=>{const{valuePickerConfig:i}=this;i&&null!=e&&e!==this.activeValue&&(i.slider.values=this.getSelectedSliderValue(e,i.dimensionValues,!!i.slider.component.reversed))},this.dimensionInfo=void 0,this.dimensionValue=void 0,this.sliderSetting={playRate:2e3,tooltipPlacement:"auto"}}watchDimensionalValue(e){this.updateSliderValue(e)}async componentWillLoad(){window.addEventListener("resize",this.handleResize)}disconnectedCallback(){window.removeEventListener("resize",this.handleResize),this.destroyValuePicker()}componentShouldUpdate(e,i,t){return"dimensionValue"!==t&&e!==i}render(){return(0,n.h)(n.H,{key:"2d90a06c81c52ac64928fe9dc206bd3701707426"},(0,n.h)("div",{key:"9d7cf1044b674a278fdfe2389fbb00cd4838be18",class:"arcgis-imagery-dimension-slider",ref:e=>{e&&this.createOrUpdateValuePicker(e)}}))}createValueTicks(e,i){return Array.from({length:i},((t,n)=>0===n?0:n===i-1?e.length-1:Math.round(n*(e.length-1)/(i-1))))}isReversedZ(e){let i=e[e.length-1];return Array.isArray(i)&&(i=i[i.length-1]),i<=0}createValuePickerSlider(e){const i=e.values.slice(),t=(0,s.i)(e,!0),n=!t&&this.isReversedZ(i),a=i.map(((e,i)=>i)),r=a.length,l=r<=4?2:t||r<=10?3:4,o=this.createValueTicks(a,l),c=Math.min(19,r>19?Math.floor(r/2):r),u=this.createValueTicks(a,c),d=[...o];return new this.ValuePickerSlider({type:"slider",min:0,max:i.length-1,steps:a,minorTicks:u,majorTicks:o,labels:d,reversed:n,visibleElements:{thumbTooltip:!this.sliderSetting.hideThumbTooltip},labelFormatFunction:(t,a)=>{const r=n?i.length-1-t:t;return"tick"===a?(0,s.f)(i[r],e,{intl:this.intl,useRecurringTimeLabel:!0,useFriendlyIsoFormat:!0,useStartOrEndForRangedValue:!0}):(0,s.f)(i[r],e,{intl:this.intl,useRecurringTimeLabel:!0,useFriendlyIsoFormat:!0,format:"short-date-long-time"})}})}createOrUpdateValuePicker(e){const{dimensionInfo:i}=this,t=(0,s.i)(i,!0),{name:n,values:a}=i,r=!a?.length||a.length<2,{valuePickerConfig:l}=this;if(l?.handle?.remove(),r)return this.destroyValuePicker(),void(this.valuePickerConfig=void 0);const o=a.slice(),c=!t&&this.isReversedZ(o),u=this.getSelectedSliderValue(this.dimensionValue,o,c),d=this.createValuePickerSlider(i),{sliderSetting:h}=this,m=l?.slider??new this.ValuePicker({container:e,layout:t?"horizontal":"vertical"});if(m.component=d,m.values=u,m.playRate=h.playRate,m.caption=n,m.label=n,!l){const i=h.tooltipPlacement??(t?"top":"auto");"auto"===i||h.hideThumbTooltip||setTimeout((()=>{const t=e.getElementsByTagName("calcite-tooltip")[0];t&&(t.placement=i)}),1e3),m.when(this.handleResize)}const f=m.watch("values",(e=>{const i=e[0],t=c?o.length-1-i:i;this.updateDefinitionDimensionValue(n,o[t])}));this.valuePickerConfig={slider:m,dimensionName:n,dimensionValues:o,handle:f}}destroyValuePicker(){const{valuePickerConfig:e}=this;e?.handle.remove(),e?.slider.destroy(),this.valuePickerConfig=void 0}getSelectedSliderValue(e,i,t){const n=null==e?0:i.findIndex((i=>Array.isArray(e)&&Array.isArray(i)?e.join("-")===i.join("-"):e===i));return[-1===n?0:t?i.length-1-n:n]}get el(){return(0,n.g)(this)}static get watchers(){return{dimensionValue:["watchDimensionalValue"]}}};o.style=".arcgis-imagery-dimension-slider {\n  width: 100%;\n  height: 100%;\n\n  &.esri-value-picker__layout--vertical {\n    &.esri-value-picker__type--slider {\n      min-height: 150px;\n\n      .esri-value-picker__action-bar {\n        min-height: 150px;\n      }\n    }\n  }\n}\n";const c=class{constructor(e){(0,n.r)(this,e),this.arcgisChange=(0,n.c)(this,"arcgisChange",7),this.manager=(0,a.u)(this),this.aoiIndex=0,this.allVariables=[],this.previousPickedListSize=-1,this.intl=(0,a.l)(r.l),this.DimensionalDefinition=(0,a.l)(r.m),this.MultidimensionalSubset=(0,a.l)(r.t),this.updateExtentDimensionSubset=(e,i,t="both")=>{const{multidimensionalSubset:n}=this,a=[...n.dimensions.find((i=>i.name===e)).extent];if("both"===t){if(Array.isArray(i)&&a[0]===i[0]&&a[1]===i[1])return;[a[0],a[1]]=i}else if("start"===t){const e=a[1]===a[0];a[0]=Array.isArray(i)?i[0]:i,e&&(a[1]=a[0])}else i===s.h?a[1]=a[0]:a[1]=Array.isArray(i)?i[i.length-1]:i;(a[1]<a[0]||null==a[1])&&(a[1]=a[0]);const r=n.clone(),{subsetDefinitions:l}=r;l.forEach((i=>{i.dimensionName===e&&(i.values=[a[0],a[1]])})),this.updateActiveMultidimensionalSubset(r)},this.updateExtentVariables=e=>{const{multidimensionalSubset:i}=this;if(e.length&&i.variables.length&&e.join(",")===i.variables.join(","))return;this.previousPickedListSize=e.length,0===e.length&&(e=this.allVariables.map((({name:e})=>e)));const t=this.getDefaultMultidimensionalSubset(e),{subsetDefinitions:n}=t.clone();n.forEach((e=>{const t=i.subsetDefinitions.find((i=>i.variableName===e.variableName&&i.dimensionName===e.dimensionName));if(t)e.values=t.values;else{const t=i.dimensions.find((i=>i.name===e.dimensionName));t&&(e.values=[...t.extent])}}));const s=i.clone();s.subsetDefinitions=n,this.updateActiveMultidimensionalSubset(s)},this.updateExtentAOI=e=>{const i=this.multidimensionalSubset.clone();i.areaOfInterest=e?.clone(),this.updateActiveMultidimensionalSubset(i)},this.showAreaOfInterest=!1,this.collapseExtentSection=!1,this.showFilterLength=5,this.view=void 0,this.messages=void 0,this.multidimensionalInfo=void 0,this.multidimensionalSubset=void 0,this.sortDirections={}}watchMultidimensionalInfo(e){this.multidimensionalInfo=e,this.initMultidimensionalInfo()}watchMultidimensionalSubset(e){e??=this.getDefaultMultidimensionalSubset(),this.multidimensionalSubset!==e&&(this.closePopover(),this.multidimensionalSubset=e)}async componentWillLoad(){const{select:e,extent:i}=this.messages;this.selectMessages={clear:e.clearFilter,label:i.searchVariables,selectLabel:i.selectVariables},this.initMultidimensionalInfo()}disconnectedCallback(){this.closePopover()}async closePopover(){this.popOver&&(document.body.removeChild(this.popOver),this.popOver=void 0)}render(){return this.popOver&&this.updatePopoverProps(),(0,n.h)(n.H,{key:"7a0d0997b4067e3cef49a955b5f06cb5ec9dceca"},(0,n.h)("calcite-block",{key:"75ee962c56ea45ec1a61bd3e062ecffc628b35cc",heading:this.messages.extent.extent,collapsible:!0,open:!this.collapseExtentSection,onCalciteBlockClose:()=>{this.closePopover()},ref:e=>this.refElement=e},this.renderVariableList(),this.allVariables.length>1&&this.renderVariableSelectButton(),this.renderExtents(),this.showAreaOfInterest&&this.renderAOI()))}renderExtents(){const e=[];return this.multidimensionalInfo.variables.forEach((({dimensions:i})=>e.push(...i))),this.multidimensionalSubset.dimensions.map((({name:i,extent:t})=>{const n=e.find((({name:e})=>e===i));return this.renderDimensionExtent(n,t)})).filter((e=>null!=e))}renderVariableSelectButton(){return(0,n.h)("div",{class:"variable-select"},(0,n.h)("calcite-button",{scale:"s",appearance:"outline-fill",kind:"neutral",round:!0,alignment:"center",iconStart:"plus",onClick:()=>this.renderPickListPopover()},this.messages.extent.variables))}renderVariableList(){const e=this.multidimensionalSubset.variables,i=this.allVariables.filter((({name:i})=>!e.length||e.includes(i))),{messages:t}=this,s=1===this.allVariables.length;return(0,n.h)("div",null,(0,n.h)("calcite-label",null,t.extent.variables,(0,n.h)("calcite-list",{label:t.extent.variables,class:"variable-section-boarder"},i.map((({name:e,label:i,description:a})=>(0,n.h)("calcite-list-item",{label:i,description:a??"",key:e},(0,n.h)("calcite-action",{icon:"x",scale:"s",text:t.general.close,slot:"actions-end",hidden:s,onClick:()=>this.removeVariable(e)})))))))}renderAOI(){const{messages:e}=this,i=[{value:"default",label:e.extent.default,selected:0===this.aoiIndex},{value:"map",label:e.extent.mapExtent,selected:1===this.aoiIndex}],t=i.findIndex((({selected:e})=>e)),{top:s}=this.el.getBoundingClientRect();return(0,n.h)("div",null,(0,n.h)("calcite-label",null,e.extent.aoi,(0,n.h)("arcgis-imagery-lazy-loading-select",{selectedIndex:t,list:i,messages:this.selectMessages,onArcgisChange:e=>{e.stopPropagation();const i=e.detail.selectedValue,t="default"===i?void 0:this.view?.extent;this.aoiIndex="default"===i?0:1,this.updateExtentAOI(t)},containerTop:s})))}removeVariable(e){const i=this.multidimensionalSubset.clone();let t=i.subsetDefinitions?.filter((i=>i.variableName!==e));null!=t&&0!==t.length||(t=this.getDefaultMultidimensionalSubset().subsetDefinitions??void 0),i.subsetDefinitions=t,this.updateActiveMultidimensionalSubset(i)}renderDimensionList(e,i,t,a){const r=(0,s.e)(e),o="end"===a,c=r?e.filter((e=>o?e[0]>=i[0]:e[1]<=i[1])):e.filter((e=>o?e>i[0]:e<i[1])),u=i[1]===i[0]||r&&e.some((e=>e[0]===i[0]&&e[1]===i[1])),d=u?t:{...t,values:c},h=o?u?s.h:i[1]:i[0],{top:m}=this.el.getBoundingClientRect();return(0,n.h)(l.D,{dimensionInfo:d,selectedValue:h,sortable:!1,isAscending:!0,className:"dimension-select-container",key:`${t.name}-${a}`,showEnd:o,onChange:e=>this.updateExtentDimensionSubset(t.name,e,a),intl:this.intl,messages:this.messages,selectMessages:this.selectMessages,containerTop:m})}renderSlider(e,i,t){const s=e.length;let r;const l=(0,a.d)((()=>{const t=r?.value;if(null==t)return;const n=Array.isArray(t),s=n?t[0]:t,a=n?t[1]??t[0]:t,l=e[s],o=e[a],c=Array.isArray(l)?l[0]:l,u=Array.isArray(o)?o[1]:o;this.updateExtentDimensionSubset(i,[c,u])}),100);let o=0,c=s-1;const u=this.multidimensionalSubset.dimensions.find((({name:e})=>e===i))?.extent;return u?.length&&(o=e.findIndex((e=>(Array.isArray(e)?e[0]:e)===u[0])),-1===o&&(o=0),c=e.findIndex((e=>(Array.isArray(e)?e[1]:e)===u[1])),-1===c&&(c=s-1)),t[0]===t[1]?(0,n.h)("calcite-slider",{disabled:!1,min:0,max:s-1,value:o,step:1,snap:!0,labelTicks:!1,ticks:s,onCalciteSliderInput:l,onCalciteSliderChange:l,ref:e=>r=e}):(0,n.h)("calcite-slider",{disabled:!1,min:0,max:s-1,"min-value":o,"max-value":c,step:1,snap:!0,labelTicks:!1,ticks:s,onCalciteSliderInput:l,onCalciteSliderChange:l,ref:e=>r=e})}renderDimensionExtent(e,i){const{name:t,values:s}=e;if(!s?.length)return null;const a=this.renderDimensionList(s,i,e,"start"),r=this.renderDimensionList(s,i,e,"end"),l=this.renderSlider(s,t,i),{extent:o}=this.messages,c="StdTime"===t?o.stdTimeExtent:"StdZ"===t?o.stdZExtent:o.generalExtent.replace("${dimensionName}",t);return(0,n.h)("div",{class:"dimension-zone"},(0,n.h)("calcite-label",null,c),l,(0,n.h)("div",{class:"multidimensional-extent"},(0,n.h)("div",null,(0,n.h)("calcite-label",null,o.start,a)),(0,n.h)("div",null,(0,n.h)("calcite-label",null,o.end,r))))}renderPickListPopover(){const{refElement:e}=this;if(this.popOver||!e)return;const i=document.createElement("arcgis-field-pick-list"),t=e.getBoundingClientRect().width;i.popoverProps={refElement:e,placement:"leading-start",offsetDistance:1,offsetSkidding:48,popoverWidth:t};const{selectVariables:n}=this.messages.extent;i.heading=n,i.filterPlaceholderText=n,i.showFieldInfo=!1,i.showFieldName=!1,i.showDescription=!0,i.showSelectionAll=!0,i.multiple=!0,this.popOver=i,this.previousPickedListSize=-1,this.updatePopoverProps(),i.addEventListener("arcgisFieldPickListChange",(e=>{const i=e.detail.selectedFields||[];this.updateExtentVariables(i)})),i.addEventListener("arcgisFieldPickListDismissed",(()=>{this.closePopover()})),document.body.appendChild(i)}initMultidimensionalInfo(){this.allVariables=(0,s.a)(this.multidimensionalInfo),this.multidimensionalSubset??=this.getDefaultMultidimensionalSubset()}updatePopoverProps(){const{variables:e}=this.multidimensionalSubset,{multidimensionalInfo:i,popOver:t}=this;if(!i||!t||0===this.previousPickedListSize&&e.length===i.variables.length)return;const{allVariables:n}=this;t.selectedFields=e,t.fields=n.map((e=>({name:e.name,alias:e.name,type:"String",description:e.description}))),t.showFilterLength=this.showFilterLength}getDefaultMultidimensionalSubset(e){const i=[];for(const t of this.multidimensionalInfo.variables){const{name:n,dimensions:s}=t;if(!e?.length||e.includes(n))if(0===s.length)i.push(new this.DimensionalDefinition({variableName:n,dimensionName:"",values:[],isSlice:!1}));else for(const e of s){const{name:t,values:s,extent:a}=e,r=a?.slice()??[];if(s?.length&&!r.length){const e=s[0],i=s[s.length-1];r[0]=Array.isArray(e)?e[0]:e,r[1]=Array.isArray(i)?i[i.length-1]:i}i.push(new this.DimensionalDefinition({variableName:n,dimensionName:t,values:r,isSlice:!1}))}}return new this.MultidimensionalSubset({subsetDefinitions:i})}updateActiveMultidimensionalSubset(e){this.multidimensionalSubset=e;const i=this.getDefaultMultidimensionalSubset(),t=JSON.stringify(e.subsetDefinitions??void 0)!==JSON.stringify(i.subsetDefinitions??void 0),n=null!=e.areaOfInterest;if(t||n)if(t)this.arcgisChange.emit({subset:e});else{const i=e.clone();i.subsetDefinitions=[],this.arcgisChange.emit({subset:i})}else this.arcgisChange.emit({subset:void 0})}get el(){return(0,n.g)(this)}static get watchers(){return{multidimensionalInfo:["watchMultidimensionalInfo"],multidimensionalSubset:["watchMultidimensionalSubset"]}}};c.style=".variable-section-boarder {\n  border: 1px solid var(--calcite-color-border-3);\n}\n\n.variable-select {\n  display: flex;\n  justify-content: center;\n}\n\n.multidimensional-extent {\n  > div {\n    margin: 10px 0;\n  }\n}\n\n.dimension-zone {\n  padding: 10px;\n  border: 1px solid var(--calcite-color-border-3);\n  margin: 10px 0;\n}\n\n.dimension-select-container {\n  display: flex;\n  width: 100%;\n  align-items: center;\n\n  .dimension-select {\n    flex-grow: 1;\n  }\n}\n"},12839:(e,i,t)=>{t.d(i,{a:()=>h,b:()=>o,c:()=>k,d:()=>a,e:()=>c,f:()=>m,g:()=>P,h:()=>u,i:()=>r,j:()=>v,k:()=>l,l:()=>A,m:()=>d,n:()=>b,o:()=>g,p:()=>I,q:()=>V,r:()=>y,s:()=>S,t:()=>f,u:()=>p,v:()=>w,w:()=>x});var n="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function s(e){return void 0!==e.default}async function a(){if(n)return await window.$arcgis.import("esri/identity/IdentityManager");const e=await Promise.resolve().then(t.bind(t,588));return s(e)?e.default:e}async function r(){if(n)return await window.$arcgis.import("esri/geometry/Extent");const e=await Promise.resolve().then(t.bind(t,13661));return s(e)?e.default:e}async function l(){if(n)return await window.$arcgis.import("esri/geometry/Point");const e=await Promise.resolve().then(t.bind(t,18423));return s(e)?e.default:e}async function o(){if(n)return await window.$arcgis.import("esri/Graphic");const e=await Promise.resolve().then(t.bind(t,63438));return s(e)?e.default:e}async function c(){if(n)return await window.$arcgis.import("esri/layers/ImageryLayer");const e=await Promise.resolve().then(t.bind(t,11840));return s(e)?e.default:e}async function u(){if(n)return await window.$arcgis.import("esri/layers/support/CodedValueDomain");const e=await Promise.resolve().then(t.bind(t,39327));return s(e)?e.default:e}async function d(){if(n)return await window.$arcgis.import("esri/layers/support/DimensionalDefinition");const e=await Promise.resolve().then(t.bind(t,49047));return s(e)?e.default:e}async function h(){if(n)return await window.$arcgis.import("esri/layers/support/Field");const e=await Promise.resolve().then(t.bind(t,28927));return s(e)?e.default:e}async function m(){if(n)return await window.$arcgis.import("esri/layers/support/MosaicRule");const e=await Promise.resolve().then(t.bind(t,52373));return s(e)?e.default:e}async function f(){if(n)return await window.$arcgis.import("esri/layers/support/MultidimensionalSubset");const e=await Promise.resolve().then(t.bind(t,44951));return s(e)?e.default:e}async function g(){if(n)return await window.$arcgis.import("esri/layers/support/RasterFunction");const e=await Promise.resolve().then(t.bind(t,66744));return s(e)?e.default:e}async function p(){if(n)return await window.$arcgis.import("esri/Map");const e=await Promise.resolve().then(t.bind(t,24824));return s(e)?e.default:e}async function b(){if(n)return await window.$arcgis.import("esri/portal/PortalItem");const e=await Promise.resolve().then(t.bind(t,33752));return s(e)?e.default:e}async function v(){if(n)return await window.$arcgis.import("esri/rest/support/ImageIdentifyParameters");const e=await Promise.resolve().then(t.bind(t,91552));return s(e)?e.default:e}async function w(){if(n)return await window.$arcgis.import("esri/views/MapView");const e=await Promise.resolve().then(t.bind(t,1508));return s(e)?e.default:e}async function y(){if(n)return await window.$arcgis.import("esri/widgets/ValuePicker");const e=await Promise.resolve().then(t.bind(t,63789));return s(e)?e.default:e}async function S(){if(n)return await window.$arcgis.import("esri/widgets/ValuePicker/ValuePickerSlider");const e=await Promise.resolve().then(t.bind(t,23722));return s(e)?e.default:e}async function x(){if(n)return await window.$arcgis.import("esri/config");const e=await Promise.resolve().then(t.bind(t,12762));return s(e)?e.default:e}async function P(){if(n)return await window.$arcgis.import("esri/core/reactiveUtils");const e=await Promise.resolve().then(t.bind(t,54312));return s(e)?e.default:e}async function k(){if(n)return await window.$arcgis.import("esri/geometry/geometryEngine");const e=await Promise.resolve().then(t.bind(t,35431));return s(e)?e.default:e}async function A(){if(n)return await window.$arcgis.import("esri/intl");const e=await Promise.resolve().then(t.bind(t,52797));return s(e)?e.default:e}async function V(){if(n)return await window.$arcgis.import("esri/request");const e=await Promise.resolve().then(t.bind(t,44345));return s(e)?e.default:e}async function I(){if(n)return await window.$arcgis.import("esri/rest/geoprocessor");const e=await Promise.resolve().then(t.bind(t,71802));return s(e)?e.default:e}},76589:(e,i,t)=>{t.d(i,{a:()=>g,b:()=>c,c:()=>o,d:()=>u,e:()=>f,f:()=>l,g:()=>d,h:()=>s,i:()=>h,m:()=>n,u:()=>m});const n=10.9,s=Number.MAX_VALUE-1;function a(e,i){const t=new Date(e),{useFriendlyIsoFormat:n,intl:s,format:a}=i;if(n&&s)return s.formatDate(t,{...s.convertDateFormatToIntlOptions(a??"short-date-long-time"),timeZone:"UTC"});let r=new Date(e).toISOString();return r=`${r.slice(0,r.indexOf("."))}Z`,r}function r(e,i,t="long"){const n=new Date(2022,9,10);return n.setMonth(e-1),i.formatDate(n,{month:t})}function l(e,i,t={}){if(null==e)return"";const{intl:n,useRecurringTimeLabel:s}=t;if(s&&n&&!Array.isArray(e)){const t=i.unit?.toLowerCase().trim(),s=function(e){return"StdTime"===e.name&&!!e.recurring}(i)&&("months"===t||"quarters"===t);if(s)return"months"===t?r(e,n):function(e,i){return`${r(3*(e-1)+1,i,"short")} - ${r(3*e,i,"short")}`}(e,n)}const l=i.values?.[i.values.length-1];if(t.useStartOrEndForRangedValue&&Array.isArray(e)&&2===e.length&&Array.isArray(l)){const i=e.join("-")===l.join("-");e=i?e[1]:e[0]}if(!h(i))return Array.isArray(e)?e.map((e=>n?.formatNumber(e)??String(e))).join(" - "):n?.formatNumber(e)??String(e);if(t.useFriendlyIsoFormat&&!t.format){const e=function(e){let i=e.intervalUnit?.toLowerCase().trim()??"";const{extent:t}=e,n=e.interval??0,s=e.values?.length;if(!["years","months","days","hours"].includes(i)&&t?.length&&s){const e=(t[1]-t[0])/s,n=864e5;i=e>=365*n?"years":e>=28*n?"months":i}switch(i){case"months":i=n>11?"years":i;break;case"days":i=n>364?"years":n>27?"months":i;break;case"hours":i="days"}return"years"===i?"year":"months"===i?"short-month-year":"short-date"}(i);t={format:e,...t}}return Array.isArray(e)?e.map((e=>a(e,t))).join(" - "):a(e,t)}function o(e,i){const t=i?.dimensions?.find((({name:i})=>i===e.name));if(!t?.extent)return e;const n=[...t.extent],{values:s}=e;if(s?.length){const i=s.filter((e=>Array.isArray(e)?null==n[1]||n[0]===n[1]?e[0]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]));if(0===i.length){const e=s[s.length-1];Array.isArray(e)&&e[1]===n[0]&&i.push(e)}return{...e,extent:n,values:i}}return{...e,extent:n}}function c(e){const{values:i,extent:t,name:n}=e;let s=i?.[0]??t?.[0];return"stdz"===n.toLowerCase()&&!e.hasRanges&&t&&Math.abs(t[1])<=Math.abs(t[0])&&(s=i?.length?i[i.length-1]:t[1]),s}function u(e){return"imagery-tile"===e.type||"wcs"===e.type?e.multidimensionalDefinition:(e.mosaicRule??e.defaultMosaicRule)?.multidimensionalDefinition}async function d(e,i=!1){if("imagery-tile"===e.type||"wcs"===e.type)return e.serviceRasterInfo?.multidimensionalInfo;const{rasterFunction:t,version:s}=e;if(i||s<=n||!t||"none"===t.functionName?.toLowerCase())return e.serviceRasterInfo.multidimensionalInfo;return(await e.generateRasterInfo(e.rasterFunction).catch((()=>e.serviceRasterInfo))).multidimensionalInfo}function h(e,i=!1){return"StdTime"===e.name&&(i||!e.recurring)}function m(e,i,t){i=o(i,t);const n=l(e.values[0],i),s=i.values?.some((e=>n===l(e,i)));if(!s){const t=c(i);e.values=null!=t?[t]:[]}}function f(e){return Array.isArray(e[0])}function g(e){return e.variables.map((({name:e,unit:i,description:t})=>({name:e,label:i?`${e} (${i})`:e,description:t})))}}}]);