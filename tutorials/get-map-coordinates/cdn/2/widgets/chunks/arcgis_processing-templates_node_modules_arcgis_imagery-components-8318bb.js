/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components-8318bb.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components-8318bb"],{73848:(e,i,t)=>{t.d(i,{D:()=>a});var n=t(41126),s=t(76589);function a(e){const{key:i,dimensionInfo:t}=e,a=i.includes("start")||i.includes("end"),{values:r}=t;let{selectedValue:o}=e;r&&(0,s.e)(r)&&"number"==typeof o&&(o=a?o=r.find((e=>i.includes("start")?e[0]===o:e[1]===o)):r.find((e=>e[0]===o))??r.find((e=>e[1]===o)));const l=o===s.h||e.selectedValue===s.h,d=l?"undefined":(0,s.f)(o,t,{intl:e.intl,useRecurringTimeLabel:!0}),m=(e.isAscending?t.values:[...t.values].reverse()).map((i=>{const n=(0,s.f)(i,t,{intl:e.intl,useRecurringTimeLabel:!0}),a=Array.isArray(i)?i.join(" - "):String(i),r=n===d;return{key:`${e.key}-${a}}`,value:a,label:n,selected:r}})),{messages:c}=e;e.showEnd&&m.push({key:`${t.name}-end-undefined}`,value:String(s.h),label:c.extent.endUndefined,selected:l});const u=Math.max(0,m.findIndex((({selected:e})=>e)));return(0,n.h)("div",{class:e.className},(0,n.h)("arcgis-imagery-lazy-loading-select",{selectedIndex:u,list:m,messages:e.selectMessages,onArcgisChange:i=>{i.stopPropagation();const t=i.detail.selectedValue.split(" - ").map((e=>Number(e)));e.onChange?.(1===t.length?t[0]:t)},containerTop:e.containerTop}),e.sortable&&function(e,i,t,a){const r=(0,s.i)(e)?i?"clock-up":"clock-down":i?"sort-ascending-arrow":"sort-descending-arrow";return(0,n.h)("calcite-action",{icon:r,scale:"s",text:t,slot:"actions-end",onClick:()=>a?.(e.name)})}(t,e.isAscending,c.display.sort,e.updateSorting))}},61045:(e,i,t)=>{t.r(i),t.d(i,{arcgis_imagery_multidimensional_filter:()=>d});var n=t(41126),s=t(76589),a=t(73848),r=t(14886),o=t(20353),l=t(12839);const d=class{constructor(e){(0,n.r)(this,e),this.arcgisChange=(0,n.c)(this,"arcgisChange",7),this.arcgisSave=(0,n.c)(this,"arcgisSave",7),this.arcgisCancel=(0,n.c)(this,"arcgisCancel",7),this.manager=(0,r.u)(this),this.mdimSliders={},this.allVariables=[],this.displayVariables=[],this.pauseLayerUpdate=!1,this.intl=(0,r.l)(l.l),this.DimensionalDefinition=(0,r.l)(l.m),this.apply=()=>{const{multidimensionalInfo:e,originalLayerSetting:i}=this;if(!e||!i)return;i.definition=this.activeMultidimensionalDefinition.map((e=>e.clone())),i.subset=this.activeMultidimensionalSubset?.clone();const{layer:t}=this;this.isImageryLayer(t)&&(i.mosaicRule=t.mosaicRule?.clone()),this.arcgisSave.emit()},this.cancel=()=>{const{multidimensionalInfo:e,originalLayerSetting:i,layer:t}=this;if(!e||!i)return;const n=i.definition?.map((e=>e.clone())),s=i.subset?.clone();this.pauseLayerUpdate=!0,this.activeMultidimensionalSubset=s,this.updateDisplayVariables();const a=n??this.getNewMultidimensionalDefinition(this.allVariables[0].name);this.updateCurrentVariableInfo(a),this.activeMultidimensionalDefinition=a,this.pauseLayerUpdate=!1,this.isImageryLayer(t)?t.mosaicRule=i.mosaicRule:t.multidimensionalDefinition=n,t.renderer=i.renderer,t.multidimensionalSubset=s,this.arcgisCancel.emit()},this.updateDefinitionDimensionValue=(e,i,t=!1)=>{const n=this.activeMultidimensionalDefinition.map((e=>e.clone()));if(n.find((({dimensionName:i})=>i===e)).values=[i],this.activeMultidimensionalDefinition=n,!t)return;const{mdimSliders:s}=this,a=s.time?.dimensionInfo.name===e?s.time:s.z?.dimensionInfo.name===e?s.z:null;a&&(a.dimensionValue=this.getDimensionValue(a.dimensionInfo,n))},this.getDimensionValue=(e,i)=>i.find((({dimensionName:i})=>i===e.name))?.values?.[0],this.updateDefinitionVariableName=e=>{this.isDefaultUnspecifiedVariable(e)&&(e="");const i=this.getNewMultidimensionalDefinition(e);this.updateCurrentVariableInfo(i),this.activeMultidimensionalDefinition=i},this.updateSorting=e=>{const i={...this.sortDirections};i[e]="descending"===i[e]?"ascending":"descending",this.sortDirections=i},this.updateLayerMultidimensionalDefinition=(0,r.d)((()=>{const{activeMultidimensionalDefinition:e,layer:i}=this,t=this.isImageryLayer(i);if(!(t?this.hasPropertyValueChanged(e,i.mosaicRule?.multidimensionalDefinition):this.hasPropertyValueChanged(e,i.multidimensionalDefinition)))return;const n=this.getMultidimensionalDefinition(i),s=!n||0===n.length||n[0].variableName!==e[0].variableName;if(t){const t=(i.mosaicRule??i.defaultMosaicRule).clone();if(this.isDefaultUnspecifiedVariable(e[0].variableName)){const i=e.map((e=>{const i=e.clone();return i.variableName="",i}));t.multidimensionalDefinition=i}else t.multidimensionalDefinition=e;i.mosaicRule=t}else i.multidimensionalDefinition=e;if(s){const t=e[0].variableName,n="imagery"===i.type||"imagery-tile"===i.type?i.presetRenderers?.find((e=>"variable"===e.method&&e.value===t)):null;if(n&&"wcs"!==i.type)i.activePresetRendererName=n.name;else{const e=this.getVariableInfo(t),{renderer:n}=i;if("raster-stretch"===n?.type&&e.statistics?.length){const t=n.clone();t.customStatistics=e.statistics.map((e=>({min:e.min,max:e.max,avg:e.avg??0,stddev:e.stddev??1}))),i.renderer=t}}}}),100),this.updateLayerMultidimensionalSubset=(0,r.d)((e=>{this.layer.multidimensionalSubset=e}),100),this.panelHeading=void 0,this.closable=!1,this.hideButtons=!1,this.showExtentSection=!1,this.showAreaOfInterest=!1,this.isDimensionListSortable=!1,this.showDimensionSliderControls=!1,this.dimensionSliderSetting=void 0,this.layer=void 0,this.view=void 0,this.multidimensionalInfo=void 0,this.activeMultidimensionalSubset=void 0,this.sortDirections={},this.animatedDimensions={time:"",z:""},this.messages=(0,o.u)({blocking:!0}),this.activeMultidimensionalDefinition=[]}watchShowDimensionSliderControls(e){e?this.createDimensionalSliders():this.destroyMdimSlider("both")}watchDimensionSliderSetting(){this.updateSliderSetting()}watchLayer(e){this.multidimensionalInfo=void 0,this.watchHandleLayer?.remove(),this.watchHandleLayer=void 0,this.initLayer(e)}watchActiveMultidimensionalDefinition(e,i){if(null==e||null==i)return;this.sortDirections={},this.pauseLayerUpdate||this.updateLayerMultidimensionalDefinition(),this.arcgisChange.emit({type:"dimension-filter",multidimensionalDefinition:e,multidimensionalSubset:this.activeMultidimensionalSubset});const{time:t,z:n}=this.animatedDimensions;if(this.showDimensionSliderControls&&(t||n)&&e[0].variableName!==i[0].variableName){const i=this.getVariableInfo(e[0].variableName);i.dimensions.some((({name:e})=>e===t))||this.destroyMdimSlider("time"),i.dimensions.some((({name:e})=>e===n))||this.destroyMdimSlider("z")}}async componentWillLoad(){const{select:e,extent:i}=this.messages;this.selectMessages={clear:e.clearFilter,label:i.searchVariables,selectLabel:i.selectVariables};const{layer:t}=this;t.loaded?await this.initLayer(t):this.initLayer(t)}disconnectedCallback(){this.watchHandleLayer?.remove(),this.destroyMdimSlider("both")}async setFocus(e){"dismiss-button"===e||!e&&this.closable?this.refCloseButtonNode?.setFocus():this.refPanelNode?.setFocus()}async done(){this.apply()}render(){const{closable:e,hideButtons:i,panelHeading:t,showExtentSection:s,messages:a}=this,r=!this.layer?.loaded,o=t??a.title,l=!r&&null!=this.multidimensionalInfo;return(0,n.h)(n.H,{key:"fc268902eec47a4cb7e2aec4a4471fd4fe98a5b6"},(0,n.h)("calcite-panel",{key:"dce47ef70d0dec7ebee61d9b46e0dbcca8d6bb40",loading:r,heading:o,class:"panel",ref:e=>this.refPanelNode=e},e&&this.renderClose(),!r&&!l&&(0,n.h)("div",{key:"47935a7f8942511c74bfd33bbe57d37bcf8b23cd",class:"multidimensional-unsupported"},a.general.unsupported),l&&s&&this.renderExtent(),l&&this.renderCurrentDisplay(),!i&&this.renderDoneButton(),!i&&this.renderCancelButton()))}renderCurrentDisplay(){const e=this.displayVariables,{layer:i}=this,t=this.isImageryLayer(i);let s=this.activeMultidimensionalDefinition[0].variableName;const{display:a}=this.messages;if(t&&""===s){const{rasterFunction:t}=i;if(t&&"none"!==t.functionName?.toLowerCase()){const i=e.some((({value:e})=>"*"===e))||this.hasNewVariable(this.multidimensionalInfo);s=i?e[0].value:a.defaultVariable}}const r=e.findIndex((({value:e})=>e===s)),o="wcs"===i.type?"none":i.rasterFunction?.functionName??"none",l=`${i.url}-${o}`;s===a.defaultVariable&&(s="");const{currentVariableInfo:d}=this,m=this.el.getBoundingClientRect().top;return(0,n.h)("calcite-block",{heading:a.current,collapsible:!0,open:!0},(0,n.h)("div",null,(0,n.h)("calcite-label",null,a.variable,(0,n.h)("arcgis-imagery-lazy-loading-select",{selectedIndex:-1===r?0:r,list:e,messages:this.selectMessages,key:l,onArcgisChange:e=>{e.stopPropagation();const i=e.detail.selectedValue;this.updateDefinitionVariableName(i)},containerTop:m}))),d.dimensions.map((e=>this.renderDimension(e))))}renderExtent(){return(0,n.h)("arcgis-imagery-multidimensional-subset",{multidimensionalInfo:this.multidimensionalInfo,multidimensionalSubset:this.activeMultidimensionalSubset,view:this.view,showAreaOfInterest:this.showAreaOfInterest,collapseExtentSection:!0,showFilterLength:this.allVariables[0].description?5:10,messages:this.messages,onArcgisChange:e=>this.updateMultidimensionalSubset(e.detail.subset)})}renderDimensionList(e){const{name:i}=e,t=this.activeMultidimensionalDefinition.find((e=>e.dimensionName===i)),{isDimensionListSortable:s}=this,r=!s||"descending"!==this.sortDirections[i],o=this.el.getBoundingClientRect().top;return(0,n.h)(a.D,{dimensionInfo:e,selectedValue:t.values[0],sortable:s,updateSorting:this.updateSorting,isAscending:r,className:"dimension-select-container",key:i,onChange:e=>this.updateDefinitionDimensionValue(i,e,!0),intl:this.intl,messages:this.messages,selectMessages:this.selectMessages,containerTop:o})}renderDimension(e){const i=this.renderDimensionList(e),t=(0,s.i)(e,!0),a=t?"time":"z",r=!e.values||e.values.length<2,{display:o}=this.messages,l="StdTime"===e.name?o.stdTimeDimension:"StdZ"===e.name?o.stdZDimension:o.generalDimension.replace("${dimensionName}",e.name);return this.showDimensionSliderControls?(0,n.h)("div",{class:"dimension-zone"},(0,n.h)("calcite-label",null,l),(0,n.h)("calcite-label",null,o.defaultPosition,i),!r&&(0,n.h)("calcite-label",{layout:"inline"},(0,n.h)("calcite-switch",{scale:"s",checked:this.animatedDimensions[a]===e.name,label:o.showDimensionSlider,onCalciteSwitchChange:i=>{i.target.checked?this.createOrUpdateMdimSlider(e):this.destroyMdimSlider(t?"time":"z")}}),o.showDimensionSlider)):(0,n.h)("div",null,(0,n.h)("calcite-label",null,l,i))}renderClose(){return(0,n.h)("calcite-action",{text:this.messages.general.close,icon:"x",slot:"header-actions-end",onClick:this.cancel,ref:e=>this.refCloseButtonNode=e})}renderDoneButton(){const{done:e}=this.messages.general;return(0,n.h)("calcite-button",{slot:"footer",onClick:this.apply,appearance:"solid",width:"half",label:e},e)}renderCancelButton(){const{cancel:e}=this.messages.general;return(0,n.h)("calcite-button",{slot:"footer",onClick:this.cancel,appearance:"outline-fill",width:"half",label:e},e)}async initLayer(e){if(!e)return;e.loaded||await e.load();const i=await(0,s.g)(e,!0);if(!i)return;this.rawMultidimensionalInfo=i;const t=this.isImageryLayer(e);if(t){const t=await(0,s.g)(e)??i,n=t.variables?.length>1&&this.hasNewVariable(t);this.multidimensionalInfo=n?i:t}else this.multidimensionalInfo=i;this.allVariables=(0,s.a)(this.multidimensionalInfo);const n=this.getMultidimensionalDefinition(e),a=t?e.mosaicRule?.clone():void 0,o=e.renderer?.clone(),l=e.multidimensionalSubset?.clone();let d;this.originalLayerSetting={subset:l,mosaicRule:a,definition:n,renderer:o},this.activeMultidimensionalDefinition=n.map((e=>e.clone())),e.multidimensionalSubset?.subsetDefinitions?.length&&(d=e.multidimensionalSubset,d.variables.some((e=>!this.multidimensionalInfo.variables.some((i=>i.name===e))))&&(e.multidimensionalSubset=null,this.originalLayerSetting.subset=void 0,d=void 0)),this.activeMultidimensionalSubset=d,this.updateCurrentVariableInfo(this.activeMultidimensionalDefinition),this.updateSliderSetting(),this.updateDisplayVariables(),this.dimensionSliderSetting?.showOnStartUp&&this.createDimensionalSliders(),!this.watchHandleLayer&&t&&(this.watchHandleLayer=e.watch("rasterFunction",(0,r.d)(((i,t)=>{i?.functionName!==t?.functionName&&(0,s.g)(e).then((i=>{this.hasPropertyValueChanged(i,this.multidimensionalInfo)&&this.initLayer(e)}))}),100)))}createDimensionalSliders(){this.destroyMdimSlider("both");const{dimensions:e}=this.currentVariableInfo,i=e.find((e=>(0,s.i)(e,!0)));this.createOrUpdateMdimSlider(i);const t=e.find((e=>!(0,s.i)(e,!0)));this.createOrUpdateMdimSlider(t)}createOrUpdateMdimSlider(e){if(!e||!this.showDimensionSliderControls)return;const i=(0,s.i)(e,!0),{values:t}=e,n=!t?.length||t.length<2,{mdimSliders:a}=this,r=i?a.time:a.z;if(n)return void this.destroyMdimSlider(i?"time":"z");if(r)return r.dimensionInfo=e,void(r.dimensionValue=this.getDimensionValue(e,this.activeMultidimensionalDefinition));const{dimensionSliderSetting:o,view:l}=this,d=i?o?.timeContainer:o?.zContainer;if(!(d??l))return;const m=document.createElement("arcgis-imagery-dimension-slider");m.dimensionInfo=e,m.dimensionValue=this.getDimensionValue(e,this.activeMultidimensionalDefinition);const c=i?o?.timeClassName:o?.zClassName;c&&m.classList.add(c);const u=i?this.timeSliderSetting:this.zSliderSetting;u&&(m.sliderSetting=u),m.addEventListener("arcgisChange",(e=>this.updateDefinitionDimensionValue(e.detail.dimensionName,e.detail.value))),d?d.appendChild(m):this.view&&this.view.ui?.add(m,{position:"manual"});const{name:h}=e,{animatedDimensions:f}=this;i?(a.time=m,f.time=h):(a.z=m,f.z=h),this.arcgisChange.emit({type:"slider-add",dimensionType:i?"time":"z",dimensionName:h})}destroyMdimSlider(e){const{animatedDimensions:i,mdimSliders:t}=this;"time"!==e&&"both"!==e||(t.time&&(t.time.remove(),t.time=void 0,this.arcgisChange.emit({type:"slider-remove",dimensionType:"time",dimensionName:i.time})),i.time=""),"z"!==e&&"both"!==e||(t.z&&(t.z.remove(),t.z=void 0,this.arcgisChange.emit({type:"slider-remove",dimensionType:"z",dimensionName:i.z})),i.z="")}getMultidimensionalDefinition(e){const i=(0,s.d)(e);return i?.length?i:this.getNewMultidimensionalDefinition(this.allVariables[0].name)}getNewMultidimensionalDefinition(e){const i=this.getVariableInfo(e).dimensions??[],t=i.map((e=>e.name)),n=this.activeMultidimensionalDefinition,a=n.map((e=>e.clone())),r=n.map((e=>e.dimensionName));if(0===t.length)return a.forEach((i=>{i.variableName=e,i.dimensionName="",i.values=[],i.isSlice=!0})),a;return r.length===t.length&&t.every((e=>r.includes(e)))?(a.forEach((t=>{t.variableName=e;const n=i.find((({name:e})=>e===t.dimensionName));(0,s.u)(t,n,this.activeMultidimensionalSubset)})),a):(a.length=0,i.forEach((i=>{let t=n.find((e=>e.dimensionName===i.name))?.clone();if(t)t.variableName=e;else{const n=(0,s.b)(i);t=new this.DimensionalDefinition({variableName:e,dimensionName:i.name,values:null==n?[]:[n],isSlice:!0})}(0,s.u)(t,i,this.activeMultidimensionalSubset),a.push(t)})),a)}getVariableInfo(e){const{variables:i}=this.multidimensionalInfo;return this.isDefaultUnspecifiedVariable(e)?i[0]:i.find((i=>i.name===e))??i[0]}hasNewVariable(e){return e.variables.some((e=>!this.rawMultidimensionalInfo.variables.some((i=>i.name===e.name))))}hasPropertyValueChanged(e,i){return JSON.stringify(e??void 0)!==JSON.stringify(i??void 0)}isDefaultUnspecifiedVariable(e){return["","*",this.messages.display.defaultVariable].includes(e)}isImageryLayer(e){return"imagery"===e.type}updateMultidimensionalSubset(e){this.pauseLayerUpdate||this.updateLayerMultidimensionalSubset(e),this.activeMultidimensionalSubset=e,this.updateDisplayVariables();const{activeMultidimensionalDefinition:i}=this;let t=!1,n=i;if(e?.variables?.length&&i.length){const s=this.allVariables.filter((({name:i})=>e.variables.includes(i))).map((({name:e})=>e)),a=i[0].variableName,r=""===a||e.variables.includes(a)?a:s[0];n=this.getNewMultidimensionalDefinition(r),t=this.hasPropertyValueChanged(n,i)}if(this.updateCurrentVariableInfo(n),t&&(this.activeMultidimensionalDefinition=n),this.showDimensionSliderControls){const{dimensions:e}=this.currentVariableInfo,{time:i,z:t}=this.mdimSliders;if(i){const t=e.find((({name:e})=>e===i.dimensionInfo.name));this.createOrUpdateMdimSlider(t)}if(t){const i=e.find((({name:e})=>e===t.dimensionInfo.name));this.createOrUpdateMdimSlider(i)}}const s=t?n:i;this.arcgisChange.emit({type:"dimension-filter",multidimensionalSubset:e,multidimensionalDefinition:s})}updateCurrentVariableInfo(e){const i=e[0].variableName,t=this.getVariableInfo(i),n=t.dimensions.map((e=>(0,s.c)(e,this.activeMultidimensionalSubset)));this.currentVariableInfo={...t,dimensions:n}}updateSliderSetting(){const{dimensionSliderSetting:e}=this;if(!e)return;const{playRate:i=-1}=e,t=i<=0?this.isImageryLayer(this.layer)?3e3:2e3:i;this.timeSliderSetting={playRate:t,tooltipPlacement:e.timeTooltipPlacement??"top",hideThumbTooltip:e.hideThumbTooltip},this.zSliderSetting={playRate:t,tooltipPlacement:e.zTooltipPlacement??"left",heightThresholdForCompactZ:e.heightThresholdForCompactZ,hideThumbTooltip:e.hideThumbTooltip};const{mdimSliders:n}=this;n.time&&(n.time.sliderSetting=this.timeSliderSetting),n.z&&(n.z.sliderSetting=this.zSliderSetting)}updateDisplayVariables(){const e=this.activeMultidimensionalSubset?.variables,i=e?.length?this.allVariables.filter((({name:i})=>e.includes(i))):[...this.allVariables],{layer:t,messages:n}=this;if(this.isImageryLayer(t)){const{rasterFunction:e,version:a}=t;e&&"none"!==e.functionName?.toLowerCase()&&a<=s.m&&i.unshift({...i[0],name:n.display.defaultVariable,label:n.display.defaultVariable})}this.displayVariables=i.map((({name:e,label:i})=>({value:e,label:i})))}static get assetsDirs(){return["assets"]}get el(){return(0,n.g)(this)}static get watchers(){return{showDimensionSliderControls:["watchShowDimensionSliderControls"],dimensionSliderSetting:["watchDimensionSliderSetting"],layer:["watchLayer"],activeMultidimensionalDefinition:["watchActiveMultidimensionalDefinition"]}}};d.style=":host {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden;\n}\n\n.multidimensional-unsupported {\n  margin: 20px;\n}\n\n.dimension-zone {\n  padding: 10px;\n  border: 1px solid var(--calcite-color-border-3);\n  margin: 10px 0;\n}\n\n.dimension-select-container {\n  display: flex;\n  width: 100%;\n  align-items: center;\n\n  .dimension-select {\n    flex-grow: 1;\n  }\n}\n"},12839:(e,i,t)=>{t.d(i,{a:()=>u,b:()=>l,c:()=>V,d:()=>a,e:()=>d,f:()=>h,g:()=>M,h:()=>m,i:()=>r,j:()=>b,k:()=>o,l:()=>I,m:()=>c,n:()=>y,o:()=>g,p:()=>N,q:()=>C,r:()=>v,s:()=>S,t:()=>f,u:()=>p,v:()=>w,w:()=>D});var n="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function s(e){return void 0!==e.default}async function a(){if(n)return await window.$arcgis.import("esri/identity/IdentityManager");const e=await Promise.resolve().then(t.bind(t,588));return s(e)?e.default:e}async function r(){if(n)return await window.$arcgis.import("esri/geometry/Extent");const e=await Promise.resolve().then(t.bind(t,13661));return s(e)?e.default:e}async function o(){if(n)return await window.$arcgis.import("esri/geometry/Point");const e=await Promise.resolve().then(t.bind(t,18423));return s(e)?e.default:e}async function l(){if(n)return await window.$arcgis.import("esri/Graphic");const e=await Promise.resolve().then(t.bind(t,63438));return s(e)?e.default:e}async function d(){if(n)return await window.$arcgis.import("esri/layers/ImageryLayer");const e=await Promise.resolve().then(t.bind(t,11840));return s(e)?e.default:e}async function m(){if(n)return await window.$arcgis.import("esri/layers/support/CodedValueDomain");const e=await Promise.resolve().then(t.bind(t,39327));return s(e)?e.default:e}async function c(){if(n)return await window.$arcgis.import("esri/layers/support/DimensionalDefinition");const e=await Promise.resolve().then(t.bind(t,49047));return s(e)?e.default:e}async function u(){if(n)return await window.$arcgis.import("esri/layers/support/Field");const e=await Promise.resolve().then(t.bind(t,28927));return s(e)?e.default:e}async function h(){if(n)return await window.$arcgis.import("esri/layers/support/MosaicRule");const e=await Promise.resolve().then(t.bind(t,52373));return s(e)?e.default:e}async function f(){if(n)return await window.$arcgis.import("esri/layers/support/MultidimensionalSubset");const e=await Promise.resolve().then(t.bind(t,44951));return s(e)?e.default:e}async function g(){if(n)return await window.$arcgis.import("esri/layers/support/RasterFunction");const e=await Promise.resolve().then(t.bind(t,66744));return s(e)?e.default:e}async function p(){if(n)return await window.$arcgis.import("esri/Map");const e=await Promise.resolve().then(t.bind(t,24824));return s(e)?e.default:e}async function y(){if(n)return await window.$arcgis.import("esri/portal/PortalItem");const e=await Promise.resolve().then(t.bind(t,33752));return s(e)?e.default:e}async function b(){if(n)return await window.$arcgis.import("esri/rest/support/ImageIdentifyParameters");const e=await Promise.resolve().then(t.bind(t,91552));return s(e)?e.default:e}async function w(){if(n)return await window.$arcgis.import("esri/views/MapView");const e=await Promise.resolve().then(t.bind(t,1508));return s(e)?e.default:e}async function v(){if(n)return await window.$arcgis.import("esri/widgets/ValuePicker");const e=await Promise.resolve().then(t.bind(t,63789));return s(e)?e.default:e}async function S(){if(n)return await window.$arcgis.import("esri/widgets/ValuePicker/ValuePickerSlider");const e=await Promise.resolve().then(t.bind(t,23722));return s(e)?e.default:e}async function D(){if(n)return await window.$arcgis.import("esri/config");const e=await Promise.resolve().then(t.bind(t,12762));return s(e)?e.default:e}async function M(){if(n)return await window.$arcgis.import("esri/core/reactiveUtils");const e=await Promise.resolve().then(t.bind(t,54312));return s(e)?e.default:e}async function V(){if(n)return await window.$arcgis.import("esri/geometry/geometryEngine");const e=await Promise.resolve().then(t.bind(t,35431));return s(e)?e.default:e}async function I(){if(n)return await window.$arcgis.import("esri/intl");const e=await Promise.resolve().then(t.bind(t,52797));return s(e)?e.default:e}async function C(){if(n)return await window.$arcgis.import("esri/request");const e=await Promise.resolve().then(t.bind(t,44345));return s(e)?e.default:e}async function N(){if(n)return await window.$arcgis.import("esri/rest/geoprocessor");const e=await Promise.resolve().then(t.bind(t,71802));return s(e)?e.default:e}},76589:(e,i,t)=>{t.d(i,{a:()=>g,b:()=>d,c:()=>l,d:()=>m,e:()=>f,f:()=>o,g:()=>c,h:()=>s,i:()=>u,m:()=>n,u:()=>h});const n=10.9,s=Number.MAX_VALUE-1;function a(e,i){const t=new Date(e),{useFriendlyIsoFormat:n,intl:s,format:a}=i;if(n&&s)return s.formatDate(t,{...s.convertDateFormatToIntlOptions(a??"short-date-long-time"),timeZone:"UTC"});let r=new Date(e).toISOString();return r=`${r.slice(0,r.indexOf("."))}Z`,r}function r(e,i,t="long"){const n=new Date(2022,9,10);return n.setMonth(e-1),i.formatDate(n,{month:t})}function o(e,i,t={}){if(null==e)return"";const{intl:n,useRecurringTimeLabel:s}=t;if(s&&n&&!Array.isArray(e)){const t=i.unit?.toLowerCase().trim(),s=function(e){return"StdTime"===e.name&&!!e.recurring}(i)&&("months"===t||"quarters"===t);if(s)return"months"===t?r(e,n):function(e,i){return`${r(3*(e-1)+1,i,"short")} - ${r(3*e,i,"short")}`}(e,n)}const o=i.values?.[i.values.length-1];if(t.useStartOrEndForRangedValue&&Array.isArray(e)&&2===e.length&&Array.isArray(o)){const i=e.join("-")===o.join("-");e=i?e[1]:e[0]}if(!u(i))return Array.isArray(e)?e.map((e=>n?.formatNumber(e)??String(e))).join(" - "):n?.formatNumber(e)??String(e);if(t.useFriendlyIsoFormat&&!t.format){const e=function(e){let i=e.intervalUnit?.toLowerCase().trim()??"";const{extent:t}=e,n=e.interval??0,s=e.values?.length;if(!["years","months","days","hours"].includes(i)&&t?.length&&s){const e=(t[1]-t[0])/s,n=864e5;i=e>=365*n?"years":e>=28*n?"months":i}switch(i){case"months":i=n>11?"years":i;break;case"days":i=n>364?"years":n>27?"months":i;break;case"hours":i="days"}return"years"===i?"year":"months"===i?"short-month-year":"short-date"}(i);t={format:e,...t}}return Array.isArray(e)?e.map((e=>a(e,t))).join(" - "):a(e,t)}function l(e,i){const t=i?.dimensions?.find((({name:i})=>i===e.name));if(!t?.extent)return e;const n=[...t.extent],{values:s}=e;if(s?.length){const i=s.filter((e=>Array.isArray(e)?null==n[1]||n[0]===n[1]?e[0]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]));if(0===i.length){const e=s[s.length-1];Array.isArray(e)&&e[1]===n[0]&&i.push(e)}return{...e,extent:n,values:i}}return{...e,extent:n}}function d(e){const{values:i,extent:t,name:n}=e;let s=i?.[0]??t?.[0];return"stdz"===n.toLowerCase()&&!e.hasRanges&&t&&Math.abs(t[1])<=Math.abs(t[0])&&(s=i?.length?i[i.length-1]:t[1]),s}function m(e){return"imagery-tile"===e.type||"wcs"===e.type?e.multidimensionalDefinition:(e.mosaicRule??e.defaultMosaicRule)?.multidimensionalDefinition}async function c(e,i=!1){if("imagery-tile"===e.type||"wcs"===e.type)return e.serviceRasterInfo?.multidimensionalInfo;const{rasterFunction:t,version:s}=e;if(i||s<=n||!t||"none"===t.functionName?.toLowerCase())return e.serviceRasterInfo.multidimensionalInfo;return(await e.generateRasterInfo(e.rasterFunction).catch((()=>e.serviceRasterInfo))).multidimensionalInfo}function u(e,i=!1){return"StdTime"===e.name&&(i||!e.recurring)}function h(e,i,t){i=l(i,t);const n=o(e.values[0],i),s=i.values?.some((e=>n===o(e,i)));if(!s){const t=d(i);e.values=null!=t?[t]:[]}}function f(e){return Array.isArray(e[0])}function g(e){return e.variables.map((({name:e,unit:i,description:t})=>({name:e,label:i?`${e} (${i})`:e,description:t})))}},20353:(e,i,t)=>{t.d(i,{u:()=>a});var n=t(14886),s=t(41126);const a=(0,n.m)(s.a)}}]);