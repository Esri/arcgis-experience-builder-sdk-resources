/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components-807ae6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components-807ae6"],{89284:(e,n,t)=>{t.r(n),t.d(n,{arcgis_imagery_multidimensional_variable_info:()=>s});var i=t(41126),r=t(76589),o=t(14886),a=t(12839);const s=class{constructor(e){(0,i.r)(this,e),this.arcgisClose=(0,i.c)(this,"arcgisClose",7),this.manager=(0,o.u)(this),this.intl=(0,o.l)(a.l),this.variableInfo=void 0,this.popoverProps=void 0,this.showStatistics=!1,this.showDimensionSummary=!1,this.messages=void 0,this.activeDimensionName=void 0,this.isOpen=!0}watchVariableInfo(e,n){if(this.dimensionNode&&n){const e=this.dimensionNode.querySelector("calcite-accordion-item[expanded]");if(e){const t=e.dataset.dimensionIndex,i=n.dimensions[Number(t)];this.activeDimensionName=i.name}else this.activeDimensionName=void 0}else this.activeDimensionName=void 0}async componentWillLoad(){this.unitMessages=await this.intl.fetchMessageBundle("esri/core/t9n/Units")}async setFocus(e){"dismiss-button"!==e?this.el.focus():await(this.panelElement?.setFocus())}async reposition(){this.popoverNode?.reposition()}render(){const{popoverProps:e,variableInfo:n}=this,t=`${e.refElement.getBoundingClientRect().width}px`,r=n.unit?`${n.name} (${n.unit})`:n.name,o=this.showDimensionSummary?n.dimensions.map((e=>`${e.name}: ${e.values?.length??""}`)).join(", "):void 0;return(0,i.h)(i.H,{key:"63cb16240303f6256de804ecfd8ca187a630eee2",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"cefcab5f2689f76029d7d3df191275f0c30f20ed",placement:e.placement??"leading-start",open:this.isOpen,pointerDisabled:!0,referenceElement:e.refElement,offsetDistance:e.offsetDistance??0,offsetSkidding:e.offsetSkidding??0,triggerDisabled:!0,label:r,class:"popover",style:{width:t},ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{key:"6532ad1dd86a1bda55e59ae2981784f5be0cba41",ref:e=>this.panelElement=e,heading:r,style:{width:`${e.popoverWidth}px`},description:o,class:"panel",closable:!0,onCalcitePanelClose:()=>this.arcgisClose.emit()},this.renderGeneralInfo(),this.renderVariableInfoBlock())))}renderVariableInfoBlock(){return(0,i.h)("calcite-accordion",{class:"info-section-container",selectionMode:"single",ref:e=>this.dimensionNode=e},this.showStatistics&&this.renderStatistics(),this.renderDimensions())}renderGeneralInfo(){const{multidimensionalInfo:e}=this.messages,{unit:n,description:t}=this.variableInfo,i="colormap"in this.variableInfo&&!!this.variableInfo.colormap;return this.renderInfoSection([{name:e.description,description:t||e.none},{name:e.unit,description:n||e.none},{name:e.colormap,description:i?e.present:e.none}],void 0,"info-general")}renderInfoSection(e,n,t){return(0,i.h)("div",{class:t},(0,i.h)("table",{class:"table table-bordered"},n&&(0,i.h)("caption",null,n),e.map((({name:e,description:n})=>(0,i.h)("tr",null,(0,i.h)("td",null,e),(0,i.h)("td",null,n))))))}renderStatistics(){const{statistics:e}=this.variableInfo;if(!e?.length)return null;const{multidimensionalInfo:n}=this.messages,t=this._formatStats(e.map((({min:e})=>e))),r=this._formatStats(e.map((({max:e})=>e))),o=e.map((({avg:e})=>e)),a=e.map((({stddev:e})=>e)),s=o.some((e=>null==e))?"":this._formatStats(o),c=a.some((e=>null==e))?"":this._formatStats(a);return(0,i.h)("calcite-accordion-item",{"icon-position":"start",heading:n.statistics,class:"info-section"},this.renderInfoSection([{name:n.minimum,description:t},{name:n.maximum,description:r},{name:n.mean,description:s},{name:n.stddev,description:c}]))}renderDimensions(){const{multidimensionalInfo:e}=this.messages,{name:n,dimensions:t}=this.variableInfo;return t.map(((t,o)=>{const{name:a,values:s,interval:c,intervalUnit:l,hasRegularIntervals:d,extent:u}=t;let m="StdTime"===a?e.stdTimeDimension:"StdZ"===a?e.stdZDimension:e.generalDimension.replace("${dimensionName}",a);m+=s?` (${s.length})`:"";const f=l?this._formatUnit(l):"",h=c?`${c} (${d?e.regular:e.irregular})`:"",p=`${u?(0,r.f)(u[0],t,{intl:this.intl}):""} - ${u?(0,r.f)(u[1],t,{intl:this.intl}):""}`;return(0,i.h)("calcite-accordion-item",{"icon-position":"start",expanded:a===this.activeDimensionName,heading:m,"data-dimension-index":o,key:`${n}-${a}`,class:"info-section"},this.renderInfoSection([{name:e.interval,description:h},{name:e.intervalUnit,description:f},{name:e.extent,description:p}]))}))}_formatStats(e){return e.map((e=>this.intl.formatNumber(e))).join("; ")}_formatUnit(e){if(e){const n=e.replace("esri","");e=n.toLowerCase(),e=this.messages.time[e]??this.unitMessages.units[e]?.plural??n}return e??""}get el(){return(0,i.g)(this)}static get watchers(){return{variableInfo:["watchVariableInfo"]}}};s.style=":host {\n  display: flex;\n  flex: 1 1 auto;\n\n  .accordion-item-content,\n  .accordion-item-header {\n    --calcite-accordion-item-border: var(--calcite-color-transparent);\n  }\n}\n\n.info-section-container {\n  border: none;\n  --calcite-color-border-2: var(--calcite-color-transparent);\n}\n\n.info-section {\n  padding-bottom: 0.5rem;\n  overflow-y: auto;\n  --calcite-accordion-item-border: var(--calcite-color-transparent);\n  background-color: var(--calcite-color-foreground-1);\n}\n\n.info-general {\n  padding: 10px 15px;\n  background-color: var(--calcite-color-foreground-1);\n}\n\n.popover {\n  --calcite-popover-z-index: 100;\n}\n\n.table {\n  width: 100%;\n  background-color: var(--calcite-color-foreground-1);\n  border-collapse: collapse;\n  border-spacing: 0;\n  border: 1px solid var(--calcite-color-border-1);\n  text-align: left;\n  overflow: auto;\n  font-size: var(--calcite-font-size--2);\n  color: var(--calcite-color-text-1);\n  line-height: 1.5rem;\n\n  caption {\n    text-align: left;\n    margin-top: 5px;\n  }\n\n  td {\n    display: table-cell;\n    vertical-align: inherit;\n\n    &:first-child {\n      width: 30%;\n    }\n  }\n\n  th,\n  td {\n    font-weight: 300;\n    padding: 2px 5px;\n    text-align: left;\n  }\n\n  tr:nth-child(odd) {\n    background-color: var(--calcite-color-background);\n  }\n\n  &.table-bordered {\n    tr {\n      border-bottom: 1px solid var(--calcite-color-border-1);\n\n      &:last-child {\n        border-bottom: none;\n      }\n\n      td {\n        &:first-child {\n          border-right: 1px solid var(--calcite-color-border-1);\n        }\n      }\n    }\n  }\n\n  &.table-borderless {\n    border: none;\n  }\n}\n\n:dir(rtl) {\n  .table {\n    &.table-bordered {\n      tr {\n        td:first-child {\n          border-left: 1px solid var(--calcite-color-border-1);\n          border-right: none;\n        }\n      }\n    }\n  }\n}\n"},12839:(e,n,t)=>{t.d(n,{a:()=>m,b:()=>c,c:()=>P,d:()=>o,e:()=>l,f:()=>f,g:()=>x,h:()=>d,i:()=>a,j:()=>v,k:()=>s,l:()=>S,m:()=>u,n:()=>g,o:()=>p,p:()=>k,q:()=>D,r:()=>y,s:()=>$,t:()=>h,u:()=>w,v:()=>b,w:()=>I});var i="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function r(e){return void 0!==e.default}async function o(){if(i)return await window.$arcgis.import("esri/identity/IdentityManager");const e=await Promise.resolve().then(t.bind(t,588));return r(e)?e.default:e}async function a(){if(i)return await window.$arcgis.import("esri/geometry/Extent");const e=await Promise.resolve().then(t.bind(t,13661));return r(e)?e.default:e}async function s(){if(i)return await window.$arcgis.import("esri/geometry/Point");const e=await Promise.resolve().then(t.bind(t,18423));return r(e)?e.default:e}async function c(){if(i)return await window.$arcgis.import("esri/Graphic");const e=await Promise.resolve().then(t.bind(t,63438));return r(e)?e.default:e}async function l(){if(i)return await window.$arcgis.import("esri/layers/ImageryLayer");const e=await Promise.resolve().then(t.bind(t,11840));return r(e)?e.default:e}async function d(){if(i)return await window.$arcgis.import("esri/layers/support/CodedValueDomain");const e=await Promise.resolve().then(t.bind(t,39327));return r(e)?e.default:e}async function u(){if(i)return await window.$arcgis.import("esri/layers/support/DimensionalDefinition");const e=await Promise.resolve().then(t.bind(t,49047));return r(e)?e.default:e}async function m(){if(i)return await window.$arcgis.import("esri/layers/support/Field");const e=await Promise.resolve().then(t.bind(t,28927));return r(e)?e.default:e}async function f(){if(i)return await window.$arcgis.import("esri/layers/support/MosaicRule");const e=await Promise.resolve().then(t.bind(t,52373));return r(e)?e.default:e}async function h(){if(i)return await window.$arcgis.import("esri/layers/support/MultidimensionalSubset");const e=await Promise.resolve().then(t.bind(t,44951));return r(e)?e.default:e}async function p(){if(i)return await window.$arcgis.import("esri/layers/support/RasterFunction");const e=await Promise.resolve().then(t.bind(t,66744));return r(e)?e.default:e}async function w(){if(i)return await window.$arcgis.import("esri/Map");const e=await Promise.resolve().then(t.bind(t,24824));return r(e)?e.default:e}async function g(){if(i)return await window.$arcgis.import("esri/portal/PortalItem");const e=await Promise.resolve().then(t.bind(t,33752));return r(e)?e.default:e}async function v(){if(i)return await window.$arcgis.import("esri/rest/support/ImageIdentifyParameters");const e=await Promise.resolve().then(t.bind(t,91552));return r(e)?e.default:e}async function b(){if(i)return await window.$arcgis.import("esri/views/MapView");const e=await Promise.resolve().then(t.bind(t,1508));return r(e)?e.default:e}async function y(){if(i)return await window.$arcgis.import("esri/widgets/ValuePicker");const e=await Promise.resolve().then(t.bind(t,63789));return r(e)?e.default:e}async function $(){if(i)return await window.$arcgis.import("esri/widgets/ValuePicker/ValuePickerSlider");const e=await Promise.resolve().then(t.bind(t,23722));return r(e)?e.default:e}async function I(){if(i)return await window.$arcgis.import("esri/config");const e=await Promise.resolve().then(t.bind(t,12762));return r(e)?e.default:e}async function x(){if(i)return await window.$arcgis.import("esri/core/reactiveUtils");const e=await Promise.resolve().then(t.bind(t,54312));return r(e)?e.default:e}async function P(){if(i)return await window.$arcgis.import("esri/geometry/geometryEngine");const e=await Promise.resolve().then(t.bind(t,35431));return r(e)?e.default:e}async function S(){if(i)return await window.$arcgis.import("esri/intl");const e=await Promise.resolve().then(t.bind(t,52797));return r(e)?e.default:e}async function D(){if(i)return await window.$arcgis.import("esri/request");const e=await Promise.resolve().then(t.bind(t,44345));return r(e)?e.default:e}async function k(){if(i)return await window.$arcgis.import("esri/rest/geoprocessor");const e=await Promise.resolve().then(t.bind(t,71802));return r(e)?e.default:e}},76589:(e,n,t)=>{t.d(n,{a:()=>p,b:()=>l,c:()=>c,d:()=>d,e:()=>h,f:()=>s,g:()=>u,h:()=>r,i:()=>m,m:()=>i,u:()=>f});const i=10.9,r=Number.MAX_VALUE-1;function o(e,n){const t=new Date(e),{useFriendlyIsoFormat:i,intl:r,format:o}=n;if(i&&r)return r.formatDate(t,{...r.convertDateFormatToIntlOptions(o??"short-date-long-time"),timeZone:"UTC"});let a=new Date(e).toISOString();return a=`${a.slice(0,a.indexOf("."))}Z`,a}function a(e,n,t="long"){const i=new Date(2022,9,10);return i.setMonth(e-1),n.formatDate(i,{month:t})}function s(e,n,t={}){if(null==e)return"";const{intl:i,useRecurringTimeLabel:r}=t;if(r&&i&&!Array.isArray(e)){const t=n.unit?.toLowerCase().trim(),r=function(e){return"StdTime"===e.name&&!!e.recurring}(n)&&("months"===t||"quarters"===t);if(r)return"months"===t?a(e,i):function(e,n){return`${a(3*(e-1)+1,n,"short")} - ${a(3*e,n,"short")}`}(e,i)}const s=n.values?.[n.values.length-1];if(t.useStartOrEndForRangedValue&&Array.isArray(e)&&2===e.length&&Array.isArray(s)){const n=e.join("-")===s.join("-");e=n?e[1]:e[0]}if(!m(n))return Array.isArray(e)?e.map((e=>i?.formatNumber(e)??String(e))).join(" - "):i?.formatNumber(e)??String(e);if(t.useFriendlyIsoFormat&&!t.format){const e=function(e){let n=e.intervalUnit?.toLowerCase().trim()??"";const{extent:t}=e,i=e.interval??0,r=e.values?.length;if(!["years","months","days","hours"].includes(n)&&t?.length&&r){const e=(t[1]-t[0])/r,i=864e5;n=e>=365*i?"years":e>=28*i?"months":n}switch(n){case"months":n=i>11?"years":n;break;case"days":n=i>364?"years":i>27?"months":n;break;case"hours":n="days"}return"years"===n?"year":"months"===n?"short-month-year":"short-date"}(n);t={format:e,...t}}return Array.isArray(e)?e.map((e=>o(e,t))).join(" - "):o(e,t)}function c(e,n){const t=n?.dimensions?.find((({name:n})=>n===e.name));if(!t?.extent)return e;const i=[...t.extent],{values:r}=e;if(r?.length){const n=r.filter((e=>Array.isArray(e)?null==i[1]||i[0]===i[1]?e[0]===i[0]:e[0]>=i[0]&&e[0]<=i[1]&&e[1]>=i[0]&&e[1]<=i[1]:e>=i[0]&&e<=i[1]));if(0===n.length){const e=r[r.length-1];Array.isArray(e)&&e[1]===i[0]&&n.push(e)}return{...e,extent:i,values:n}}return{...e,extent:i}}function l(e){const{values:n,extent:t,name:i}=e;let r=n?.[0]??t?.[0];return"stdz"===i.toLowerCase()&&!e.hasRanges&&t&&Math.abs(t[1])<=Math.abs(t[0])&&(r=n?.length?n[n.length-1]:t[1]),r}function d(e){return"imagery-tile"===e.type||"wcs"===e.type?e.multidimensionalDefinition:(e.mosaicRule??e.defaultMosaicRule)?.multidimensionalDefinition}async function u(e,n=!1){if("imagery-tile"===e.type||"wcs"===e.type)return e.serviceRasterInfo?.multidimensionalInfo;const{rasterFunction:t,version:r}=e;if(n||r<=i||!t||"none"===t.functionName?.toLowerCase())return e.serviceRasterInfo.multidimensionalInfo;return(await e.generateRasterInfo(e.rasterFunction).catch((()=>e.serviceRasterInfo))).multidimensionalInfo}function m(e,n=!1){return"StdTime"===e.name&&(n||!e.recurring)}function f(e,n,t){n=c(n,t);const i=s(e.values[0],n),r=n.values?.some((e=>i===s(e,n)));if(!r){const t=l(n);e.values=null!=t?[t]:[]}}function h(e){return Array.isArray(e[0])}function p(e){return e.variables.map((({name:e,unit:n,description:t})=>({name:e,label:n?`${e} (${n})`:e,description:t})))}}}]);