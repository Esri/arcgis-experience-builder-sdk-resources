/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components-6abfac.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components-6abfac"],{5482:(e,t,n)=>{var i,r,a,s;function o(e){return"object"==typeof e&&null!==e&&"name"in e&&"AbortError"===e.name}n.d(t,{A:()=>i,I:()=>r,S:()=>a,a:()=>s,b:()=>o,c:()=>g,d:()=>m,e:()=>l,f:()=>y,g:()=>d,i:()=>f,s:()=>c}),function(e){e.VISIBLE="visible",e.DISPLAY_EXTENT="displayExtent",e.ALL="all"}(i||(i={})),function(e){e.ALL="all",e.SELECT="select"}(r||(r={})),function(e){e.ASC="asc",e.DESC="desc"}(a||(a={})),function(e){e.BRAND="brand",e.DANGER="danger",e.INFO="info",e.SUCCESS="success",e.WARNING="warning"}(s||(s={}));const u=new Set(["small-integer","big-integer","integer","single","double","oid"]),c=new Set([...u,"date","string"]);function l(e){return u.has(e)}function f(e){return!!e?.domain?.codedValues}function d(e,t=!1){if(!e)return null;const n=new Date(e),i=t?n.getUTCFullYear():n.getFullYear(),r=t?n.getUTCMonth():n.getMonth(),a=t?n.getUTCDate():n.getDate(),s=t?n.getUTCHours():n.getHours(),o=t?n.getUTCMinutes():n.getMinutes(),u=t?n.getUTCSeconds():n.getSeconds();return`${i}-${w((r+1).toString(),2,"0")}-${w(a.toString(),2,"0")} ${w(s.toString(),2,"0")}:${w(o.toString(),2,"0")}:${w(u.toString(),2,"0")}`}function w(e,t,n){for(n=n||" ";e.length<t;)e=n+e;return e}function m(e,t,n){return e+t-1>n?n:e+t-1}function g(e,t,n="en"){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t,n):e<t?-1:e>t?1:0}function y(e,t){if(!e||!t)return;let n=t.assetsPath;n.endsWith("/")||(n+="/"),e?.firstElementChild?.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${n}esri/themes/light/main.css" />`)}},12839:(e,t,n)=>{n.d(t,{a:()=>d,b:()=>u,c:()=>E,d:()=>a,e:()=>c,f:()=>w,g:()=>S,h:()=>l,i:()=>s,j:()=>h,k:()=>o,l:()=>x,m:()=>f,n:()=>p,o:()=>g,p:()=>I,q:()=>C,r:()=>$,s:()=>v,t:()=>m,u:()=>y,v:()=>b,w:()=>P});var i="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function r(e){return void 0!==e.default}async function a(){if(i)return await window.$arcgis.import("esri/identity/IdentityManager");const e=await Promise.resolve().then(n.bind(n,588));return r(e)?e.default:e}async function s(){if(i)return await window.$arcgis.import("esri/geometry/Extent");const e=await Promise.resolve().then(n.bind(n,13661));return r(e)?e.default:e}async function o(){if(i)return await window.$arcgis.import("esri/geometry/Point");const e=await Promise.resolve().then(n.bind(n,18423));return r(e)?e.default:e}async function u(){if(i)return await window.$arcgis.import("esri/Graphic");const e=await Promise.resolve().then(n.bind(n,63438));return r(e)?e.default:e}async function c(){if(i)return await window.$arcgis.import("esri/layers/ImageryLayer");const e=await Promise.resolve().then(n.bind(n,11840));return r(e)?e.default:e}async function l(){if(i)return await window.$arcgis.import("esri/layers/support/CodedValueDomain");const e=await Promise.resolve().then(n.bind(n,39327));return r(e)?e.default:e}async function f(){if(i)return await window.$arcgis.import("esri/layers/support/DimensionalDefinition");const e=await Promise.resolve().then(n.bind(n,49047));return r(e)?e.default:e}async function d(){if(i)return await window.$arcgis.import("esri/layers/support/Field");const e=await Promise.resolve().then(n.bind(n,28927));return r(e)?e.default:e}async function w(){if(i)return await window.$arcgis.import("esri/layers/support/MosaicRule");const e=await Promise.resolve().then(n.bind(n,52373));return r(e)?e.default:e}async function m(){if(i)return await window.$arcgis.import("esri/layers/support/MultidimensionalSubset");const e=await Promise.resolve().then(n.bind(n,44951));return r(e)?e.default:e}async function g(){if(i)return await window.$arcgis.import("esri/layers/support/RasterFunction");const e=await Promise.resolve().then(n.bind(n,66744));return r(e)?e.default:e}async function y(){if(i)return await window.$arcgis.import("esri/Map");const e=await Promise.resolve().then(n.bind(n,24824));return r(e)?e.default:e}async function p(){if(i)return await window.$arcgis.import("esri/portal/PortalItem");const e=await Promise.resolve().then(n.bind(n,33752));return r(e)?e.default:e}async function h(){if(i)return await window.$arcgis.import("esri/rest/support/ImageIdentifyParameters");const e=await Promise.resolve().then(n.bind(n,91552));return r(e)?e.default:e}async function b(){if(i)return await window.$arcgis.import("esri/views/MapView");const e=await Promise.resolve().then(n.bind(n,1508));return r(e)?e.default:e}async function $(){if(i)return await window.$arcgis.import("esri/widgets/ValuePicker");const e=await Promise.resolve().then(n.bind(n,63789));return r(e)?e.default:e}async function v(){if(i)return await window.$arcgis.import("esri/widgets/ValuePicker/ValuePickerSlider");const e=await Promise.resolve().then(n.bind(n,23722));return r(e)?e.default:e}async function P(){if(i)return await window.$arcgis.import("esri/config");const e=await Promise.resolve().then(n.bind(n,12762));return r(e)?e.default:e}async function S(){if(i)return await window.$arcgis.import("esri/core/reactiveUtils");const e=await Promise.resolve().then(n.bind(n,54312));return r(e)?e.default:e}async function E(){if(i)return await window.$arcgis.import("esri/geometry/geometryEngine");const e=await Promise.resolve().then(n.bind(n,35431));return r(e)?e.default:e}async function x(){if(i)return await window.$arcgis.import("esri/intl");const e=await Promise.resolve().then(n.bind(n,52797));return r(e)?e.default:e}async function C(){if(i)return await window.$arcgis.import("esri/request");const e=await Promise.resolve().then(n.bind(n,44345));return r(e)?e.default:e}async function I(){if(i)return await window.$arcgis.import("esri/rest/geoprocessor");const e=await Promise.resolve().then(n.bind(n,71802));return r(e)?e.default:e}},18936:(e,t,n)=>{n.d(t,{a:()=>m,b:()=>l,c:()=>s,d:()=>o,e:()=>u,f:()=>p,g:()=>f,h:()=>c,i:()=>a,j:()=>h,k:()=>w,l:()=>g,m:()=>d,r:()=>y});var i=n(12839),r=n(5482);function a(e){const t=e.find((e=>"best"===e.name.toLowerCase()));if(t)return t;const n=e.find((e=>"acquisitiondate"===e.name.toLowerCase()));if(n)return n;const i=e.find((e=>"date"===e.name.toLowerCase()));if(i)return i;return e.find((e=>"double"===e.type||"integer"===e.type))}async function s(e,t,n){return await e.queryRasterCount(t,{signal:n})}async function o(e,t,n){t.outFields=["*"],t.returnGeometry=!0;const i=await e.queryRasters(t,{signal:n,timeout:12e4});return i?.features?.length?i:null}function u(e,t){const n=e.fields,i=e.objectIdField;let r=n.find((e=>"name"===e.name.toLowerCase()));return r||(r=n.find((e=>e.name===i))),r&&r.name!==t.name?[r,t]:[t]}function c(e){return Array.isArray(e)?e.filter((e=>r.s.has(e.type))):[]}function l(e,t,n,i,a,s){const o=e.createQuery();if(n&&n.length>0){let e="";if("date"===t?.type&&n[0]){const i=new Date(n[0]);let a;1===n.length||2===n.length&&n[0]===n[1]?a=i.setDate(i.getDate()+1):2===n.length&&(a=n[1]),e=`${t.name} BETWEEN timestamp '${(0,r.g)(n[0],!0)}' AND timestamp '${(0,r.g)(a,!0)}'`}else 1===n.length&&(e="string"==typeof n[0]?`${t?.name}='${n[0]}'`:`${t?.name}=${n[0]}`),2===n.length&&(e="string"==typeof n[0]?`${t?.name} BETWEEN '${n[0]}' AND '${n[1]}'`:`${t?.name} BETWEEN ${n[0]} AND ${n[1]}`);o.where=e}const u="(Category = 1)";if(i)o.where=o.where?.replace(u,"");else{const e=u+(o.where?` AND (${o.where})`:"");o.where=e}return o.objectIds=null!=s&&s.length>0?s:[],a&&(o.geometry=a),o}function f(e){return e.extent?.clone().expand(.75)}async function d(e,t,n,i){if(!t)return[];const a=e.createQuery();n&&(a.geometry=n),a.returnGeometry=!1,a.outStatistics=[{onStatisticField:t.name,outStatisticFieldName:"cnt",statisticType:"count"}],a.groupByFieldsForStatistics=[t.name];const s=await e.queryRasters(a,{signal:i});if(s?.features?.length>0){const e=(0,r.e)(t.type);return s.features.map((n=>{const i=n.attributes[t.name];return e?Number(i):i})).filter((e=>0===e||Boolean(e)))}return[]}async function w(e,t,n,i){if(!t)return[];const r=e.createQuery();r.returnGeometry=!1,n&&(r.geometry=n),r.outStatistics=[{statisticType:"min",onStatisticField:t,outStatisticFieldName:"min_field_value"},{statisticType:"max",onStatisticField:t,outStatisticFieldName:"max_field_value"}];const a=await e.queryRasters(r,{signal:i});if(a?.features?.length>0){const[e]=a.features;return[e.attributes.min_field_value,e.attributes.max_field_value]}return[]}async function m(e,t,n){const r=[],a=await async function(e,t){const n=await(0,i.j)(),r=await(0,i.k)(),{extent:a,width:s,height:o}=t,u=new r({x:a.width/s,y:a.height/o});u.spatialReference=a.spatialReference;const c=new n;c.geometry=f(t),c.returnGeometry=!0,c.pixelSize=u,c.maxItemCount=e.sourceJSON?.maxMosaicImageCount,c.returnPixelValues=!1;const l=e.mosaicRule.clone();return e.definitionExpression&&(l.where=e.definitionExpression),c.mosaicRule=l,c}(e,t);if(!e.visible)return null;const s=await e.identify(a,{timeout:12e4});if(!s?.catalogItems?.features||!s?.catalogItemVisibilities)return null;const o=e.objectIdField;for(let e=0;e<s.catalogItems.features.length;e++)s.catalogItemVisibilities[e]>0&&r.push(s.catalogItems.features[e].attributes[o]);if(0===r.length)return null;n.objectIds=r,n.outFields=["*"],n.returnGeometry=!0;const u=await e.queryRasters(n);return u?.features?.length?u:null}async function g(e,t){const n=await(0,i.f)();if(t.length){const i=new n;i.method="lock-raster",i.lockRasterIds=t,e.definitionExpression&&(i.where=e.definitionExpression),e.mosaicRule=i}}function y(e,t){t&&(e.mosaicRule=t.clone())}function p(e,t,n){const{title:i}=e,a=t.name;let s="";const o=n.map((e=>e.attributes[a]));o.sort();const u=o.map((e=>"date"===t.type?(0,r.g)(e):e));return 1===u.length&&(s=`(${u[0]})`),u.length>1&&(s=`(${u[0]} - ${u[u.length-1]})`),`${i} - ${a} ${s}`}function h(e,t){return Math.abs(t.extent.center.x-e.center.x)<t.resolution&&Math.abs(t.extent.center.y-e.center.y)<t.resolution}}}]);