System.register(["jimu-core"],(function(e,t){var o={};return{setters:[function(e){o.dataSourceUtils=e.dataSourceUtils}],execute:function(){e((()=>{var e={79244:e=>{"use strict";e.exports=o}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var r={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(r),a.d(r,{default:()=>t});var e=a(79244);class t{constructor(){this.id="map-app-config-operation"}afterWidgetCopied(e,t,a,r,s){var i;if(!s)return r;let n=r;const u=t.widgets[e],c=null==u?void 0:u.config,l=n.widgets[a],d=null==l?void 0:l.config;if(c&&d&&(null===(i=c.clientQueryDataSourceIds)||void 0===i?void 0:i.length)>0&&(n=n.setIn(["widgets",a,"config","clientQueryDataSourceIds"],[])),n.messageConfigs){const e=n.messageConfigs.asMutable({deep:!0});Object.keys(e).forEach((t=>{var r;const i=e[t];(null===(r=null==i?void 0:i.actions)||void 0===r?void 0:r.length)>0&&i.actions.forEach((e=>{var t;if(e&&(null==e?void 0:e.widgetId)===a&&(null==e?void 0:e.config)){const a=e.config,r=null==e?void 0:e.actionName;if("zoomToFeature"===r||"panTo"===r){const e=a;if(e.useDataSource){const t=o(s,e.useDataSource);t&&(e.useDataSource=t)}(null===(t=null==e?void 0:e.useDataSources)||void 0===t?void 0:t.length)>0&&(e.useDataSources=e.useDataSources.map((e=>o(s,e)||e)))}else if("filter"===r||"flash"===r){const e=a;if(e.messageUseDataSource){const t=o(s,e.messageUseDataSource);t&&(e.messageUseDataSource=t)}if(e.actionUseDataSource){const t=o(s,e.actionUseDataSource);t&&(e.actionUseDataSource=t)}}}}))})),n=n.set("messageConfigs",e)}return n}widgetWillRemove(e){return e}}function o(t,o){let a=o;if(o){const r=e.dataSourceUtils.mapUseDataSource(t,o);a=null==r?void 0:r.useDataSource}return a||(a=o),a}})(),r})())}}}));