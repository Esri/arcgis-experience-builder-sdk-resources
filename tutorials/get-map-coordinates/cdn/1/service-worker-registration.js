"use strict";const CACHE_KEY="exb-build-number";function clearCache(){if(!window.caches)return;const e=getCacheId();if(!e)return;const r=readCacheId();r?e!==r&&(caches.delete("exb-assets-cache"),caches.delete("arcgis-jsapi-cache"),setCacheId(e)):setCacheId(e)}function readCacheId(){try{return localStorage.getItem(CACHE_KEY)}catch(e){return console.error("Read Local storage error.",e),null}}function setCacheId(e){try{return localStorage.setItem(CACHE_KEY,e)}catch(e){return console.error("Set Local storage error.",e),null}}function getCacheId(){return window.jimuConfig.buildNumber?`${window.jimuConfig.exbVersion}-${window.jimuConfig.buildNumber}`:window.jimuConfig.exbVersion}"serviceWorker"in navigator&&(window.addEventListener("load",(function(){navigator.serviceWorker.register(window.jimuConfig.mountPath+"service-worker.js").then((function(e){console.log("Register a service worker.")})).catch((function(e){console.error("Error during service worker registration:",e)}))})),clearCache());