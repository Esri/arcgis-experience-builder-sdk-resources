"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-un-ntc--12b959"],{69612:(t,i,e)=>{e.r(i),e.d(i,{arcgis_un_ntc_pick_list:()=>l,arcgis_un_ntc_pick_list_info:()=>h});var s,n=e(35110),r=e(21104),o=e(1984);e(73838),e(63280),e(86587),function(t){t.default="default",t.title="title",t.type="type",t.description="description"}(s||(s={}));const l=class{constructor(t){(0,n.r)(this,t),this.arcgisNtcPickListChange=(0,n.c)(this,"arcgisNtcPickListChange",7),this.arcgisNtcPickListDismissed=(0,n.c)(this,"arcgisNtcPickListDismissed",7),this.arcgisNtcPickListSortByChange=(0,n.c)(this,"arcgisNtcPickListSortByChange",7),this.errorMessage="",this.namedTraceConfigurationsInfo=[],this.calciteValueList=t=>(0,n.h)("calcite-pick-list-item",{key:t.id,label:t.title,description:t.description,value:t.id,selected:this.selectedNTCs.indexOf(t.id)>-1,metadata:{id:t.id,title:t.title}},(0,n.h)("calcite-action",{slot:"actions-end",text:this.strings.info,title:this.strings.info,scale:"s",icon:"information",onClick:i=>{i.stopPropagation();const e=document.createElement("calcite-flow-item");e.heading=t.title,e.description=t.description;const s=document.createElement("arcgis-un-ntc-pick-list-info");s.utilityNetwork=this.utilityNetwork,s.ntcId=t.id,s.strings=this.strings,s.classList.add("content"),e.appendChild(s),this.flowElement.appendChild(e),e.setFocus()}})),this.filterPlaceholderText=void 0,this.multiple=!0,this.popoverProps=void 0,this.selectedNTCs=[],this.showFilterLength=10,this.showSort=!0,this.sortBy=s.default,this.utilityNetwork=void 0,this.lastSortyBy=s.default,this.filterNTCs=null,this.isOpen=!1}async componentWillLoad(){await this.loadAllModules();const t=await(0,o.g)(this.hostElement);this.strings=t[0],this.currentLanguage=t[1],this.lastSortyBy=this.sortBy||this.lastSortyBy;try{this.namedTraceConfigurations=await this.utilityNetwork.queryNamedTraceConfigurations({}),this.namedTraceConfigurations.forEach((t=>{this.namedTraceConfigurationsInfo.push({id:t.globalId,creationDate:t.creationDate,creator:t.creator,description:t.description,minStartingPoints:t.minStartingPoints,resultTypes:t.resultTypes,tags:t.tags,title:t.title,type:t.traceType})})),this.utilityNetwork.sharedNamedTraceConfigurations.forEach((t=>{this.selectedNTCs.push(t.globalId)}))}catch(t){this.errorMessage=t.message}}componentDidLoad(){this.isOpen=!0}calciteFilterChangeHandler(t){var i,e;t.stopPropagation();const s=null===(i=null==t?void 0:t.path)||void 0===i?void 0:i.find((t=>"CALCITE-FILTER"===t.nodeName));this.filterNTCs=null===(e=null==s?void 0:s.filteredItems)||void 0===e?void 0:e.map((t=>t.value))}async reposition(){var t;null===(t=this.popoverNode)||void 0===t||t.reposition()}getSortedList(){const t=[...this.namedTraceConfigurationsInfo];return this.lastSortyBy===s.title?t.sort(((t,i)=>t.title.localeCompare(i.title))):this.lastSortyBy===s.description&&t.sort(((t,i)=>t.description.localeCompare(i.description))),this.lastSortyBy===s.type&&t.sort(((t,i)=>t.type.localeCompare(i.type))),t}selectDeselect(){var t;return(null===(t=this.filterNTCs)||void 0===t?void 0:t.length)?this.filterContainsAll():this.selectedNTCs.length===this.namedTraceConfigurationsInfo.length}filterContainsAll(){return this.filterNTCs.every((t=>this.selectedNTCs.some((i=>i===t))))}async loadAllModules(){const[t]=await(0,r.l)(["esri/networks/support/NamedTraceConfiguration"]);this.NamedTraceConfiguration=t}render(){var t;const{NamedTraceConfiguration:i}=this,e=(0,n.h)("calcite-dropdown",{slot:"menu-actions",placement:"bottom-end"},(0,n.h)("calcite-action",{slot:"trigger",text:this.strings.sort,title:this.strings.sort},(0,n.h)("calcite-icon",{scale:"s",icon:"sortDescending"})),(0,n.h)("calcite-dropdown-group",null,(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.default,onClick:()=>{this.lastSortyBy=s.default,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.default),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.title,onClick:()=>{this.lastSortyBy=s.title,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.name),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.type,onClick:()=>{this.lastSortyBy=s.type,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.type),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.description,onClick:()=>{this.lastSortyBy=s.description,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.description))),r=(0,n.h)("div",{class:"selection-button-div"},(0,n.h)("calcite-button",{appearance:"transparent",scale:"s",width:"full",onClick:()=>{var t,i;this.selectDeselect()?this.selectedNTCs=(null===(t=this.filterNTCs)||void 0===t?void 0:t.length)?this.selectedNTCs.filter((t=>!this.filterNTCs.includes(t))):[]:this.selectedNTCs=(null===(i=this.filterNTCs)||void 0===i?void 0:i.length)?[...new Set([...this.selectedNTCs,...this.filterNTCs])]:this.namedTraceConfigurationsInfo.map((t=>t.id))}},this.selectDeselect()?this.strings.deselectAll:this.strings.selectAll)),o=(0,n.h)("calcite-label",{class:"label"},this.errorMessage),l=(0,n.h)("calcite-pick-list",{multiple:this.multiple,ref:t=>{this.pickListNode=t},filterEnabled:this.namedTraceConfigurationsInfo.length>=this.showFilterLength,filterPlaceholder:null!==(t=this.filterPlaceholderText)&&void 0!==t?t:this.strings.filter,onCalciteListChange:async()=>{const t=await this.pickListNode.getSelectedItems();this.selectedNTCs=[...new Set([...this.selectedNTCs.filter((i=>t.has(i))),...t.keys()])],this.utilityNetwork.sharedNamedTraceConfigurations=[],this.selectedNTCs.forEach((t=>{let e=this.namedTraceConfigurations.find((i=>i.globalId===t));this.utilityNetwork.sharedNamedTraceConfigurations.push(new i({globalId:e.globalId,title:e.title}))})),this.arcgisNtcPickListChange.emit(this.utilityNetwork.sharedNamedTraceConfigurations)}},this.namedTraceConfigurationsInfo.length>=this.showFilterLength&&this.showSort&&e,r,[...this.getSortedList()].map((t=>this.calciteValueList(t))));return(0,n.h)(n.H,{class:"js-app-flyout"},(0,n.h)("calcite-popover",{class:"popover",placement:this.popoverProps.placement||"leading-start",open:this.isOpen,pointerDisabled:!0,referenceElement:this.popoverProps.refElement,offsetDistance:this.popoverProps.offsetDistance||-Math.round(this.popoverProps.refElement.getBoundingClientRect().width),offsetSkidding:this.popoverProps.offsetSkidding||0,label:this.strings.headerSelect,ref:t=>this.popoverNode=t},(0,n.h)("calcite-flow",{ref:t=>{this.flowElement=t},style:{width:`${this.popoverProps.popoverWidth||this.popoverProps.refElement.getBoundingClientRect().width}px`}},(0,n.h)("calcite-flow-item",{ref:t=>this.flowItemElement=t,class:"panel",heading:this.strings.headerSelect,closable:!0,onCalciteFlowItemClose:()=>this.arcgisNtcPickListDismissed.emit()},""!==this.errorMessage?o:l))))}get hostElement(){return(0,n.d)(this)}};l.style=".popover{z-index:100}.panel{min-height:300px}.label{height:-webkit-fill-available;width:-webkit-fill-available;padding:10px}.selection-button-div{padding:4px 10px}.content{max-height:60vh}";const a="section",c="title",h=class{constructor(t){(0,n.r)(this,t),this._getResultTypes=t=>{if(0===t.length)return this.strings.ntcNoResultTypes;{let i=[];return t.forEach((t=>{i.push(t.type)})),i.join(", ")}},this._getTags=t=>0===t.length?this.strings.ntcNoTags:t.join(", "),this.utilityNetwork=void 0,this.ntcId=void 0,this.strings=void 0}async componentWillLoad(){const{utilityNetwork:t,ntcId:i}=this;this.props={utilityNetwork:t,ntcId:i};const[e]=await(0,r.l)(["esri/intl"]);this.intl=e,this.props.ntcInfo=await async function(t){const{utilityNetwork:i,ntcId:e}=t;let s;return(await i.queryNamedTraceConfigurations()).filter((t=>t.globalId===e)).forEach((t=>{const i={title:t.title,description:t.description,creator:t.creator,creationDate:t.creationDate,traceType:t.traceType,minimumPoints:t.minStartingPoints,resultTypes:t.resultTypes,tags:t.tags};s=i})),s}(this.props)}render(){const{props:t}=this,{ntcInfo:i}=t;return i?(0,n.h)(n.H,null,(0,n.h)("div",{class:"container"},this.renderNtcCreator(),this.renderNtcCreationDate(),this.renderNtcTraceType(),this.renderNtcMinimumPoints(),this.renderNtcResultTypes(),this.renderNtcTags())):null}renderNtcCreator(){const{props:t}=this,{ntcInfo:i}=t;return(0,n.h)("div",{class:a},(0,n.h)("div",{class:c},this.strings.ntcCreator),(0,n.h)("div",null,i.creator))}renderNtcCreationDate(){const{intl:t,props:i}=this,{ntcInfo:e}=i;return(0,n.h)("div",{class:a},(0,n.h)("div",{class:c},this.strings.ntcCreationDate),(0,n.h)("div",null,t.formatDate(e.creationDate,{dateStyle:"full"})))}renderNtcTraceType(){const{props:t}=this,{ntcInfo:i}=t;return(0,n.h)("div",{class:a},(0,n.h)("div",{class:c},this.strings.ntcTraceType),(0,n.h)("div",null,i.traceType))}renderNtcMinimumPoints(){const{props:t}=this,{ntcInfo:i}=t;return(0,n.h)("div",{class:a},(0,n.h)("div",{class:c},this.strings.ntcMinPoints),(0,n.h)("div",null,i.minimumPoints))}renderNtcResultTypes(){const{props:t}=this,{ntcInfo:i}=t;return(0,n.h)("div",{class:a},(0,n.h)("div",{class:c},this.strings.ntcResultTypes),(0,n.h)("div",null,this._getResultTypes(i.resultTypes)))}renderNtcTags(){const{props:t}=this,{ntcInfo:i}=t;return(0,n.h)("div",{class:a},(0,n.h)("div",{class:c},this.strings.ntcTags),(0,n.h)("div",null,this._getTags(i.tags)))}get hostElement(){return(0,n.d)(this)}};h.style=":host{height:100%}.container{padding:6px;background-color:white}.title{font-weight:bold;padding:5px 0}.section{padding:6px 0}"}}]);