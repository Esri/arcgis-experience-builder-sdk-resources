/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-72ce2d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-72ce2d"],{8824:(t,e,i)=>{i.r(e),i.d(e,{arcgis_color_contrast:()=>d,arcgis_color_edit:()=>u,arcgis_color_swatch:()=>g,arcgis_color_text_input:()=>p,arcgis_configure_colors_table:()=>k,arcgis_contrast_preview:()=>C,arcgis_preset_colors:()=>v,arcgis_shared_theme_colors:()=>b});var o=i(35110),s=i(1984),l=i(88703);function r(t,e){const i=[t=n(t),e=n(e)].map(c).map(a),o=function(t,e){return(Math.max(t,e)+.05)/(Math.min(t,e)+.05)}(i[0],i[1]);return{contrast:o,passesDoubleA:o>=4.5}}function n(t){if(4!==t.length)return t;const e=t.split("");return`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`}function c(t){t=t.replace(/^#/,"");const e=parseInt(t,16);return[e>>16,e>>8&255,255&e,255]}function a(t){const e=1/12.92,i=t[0]/255,o=t[1]/255,s=t[2]/255;return.2126*(i<=.03928?i*e:h(i))+.7152*(o<=.03928?o*e:h(o))+.0722*(s<=.03928?s*e:h(s))}function h(t){return Math.pow((t+.055)/1.055,2.4)}i(63280),i(86587),i(21104),i(73838);const d=class{constructor(t){(0,o.r)(this,t),this.save=(0,o.c)(this,"save",7),this.cancel=(0,o.c)(this,"cancel",7),this.handleProceedAnayway=()=>{this.showWarning=!1,this.proceedToSave()},this.handleAcceptWarning=()=>{this.showWarning=!1},this.handleSaveClick=()=>{Object.keys(this.colorValues).some((t=>!this.colorValues[t].isBackground&&!this.colorValues[t].isValidContrast))?this.showWarning=!0:this.proceedToSave()},this.proceedToSave=()=>{const t={};Object.keys(this.colorValues).forEach((e=>{t[e]=Object.assign({},this.colorValues[e]),delete t[e].isBackground,delete t[e].isLink})),this.save.emit({textResults:Object.assign({},this.textValues),colorResults:t})},this.handleCancelClick=()=>{this.cancel.emit(),this.isActive=!1},this.handleEditColorClick=async t=>{this.editingKey=t.detail,this.showColorPicker=!0,await(0,l.t)(100),this.colorPickerEl.setFocus()},this.handleColorPickerChange=t=>{this.colorValues[this.editingKey].color!==t.target.value&&this.setColorValue(t.target.value)},this.handlePresetColorSelect=t=>{this.setColorValue(t.detail)},this.handleTextInputChange=t=>{const{key:e,value:i}=t.detail;this.textValues=Object.assign(Object.assign({},this.textValues),{[e]:i})},this.handleModalClose=()=>{this.isActive=!1},this.modalTitle="",this.colorConfigs=void 0,this.textInputConfigs=void 0,this.sharedTheme=void 0,this.isActive=!0,this.showColorPicker=!1,this.colorValues={},this.textValues={},this.editingKey="",this.showWarning=!1}async open(){this.isActive=!0}async close(){this.isActive=!1}handleBodyClick(t){this.showColorPicker&&(this.colorPickerContainer&&-1!==t.path.indexOf(this.colorPickerContainer)||(this.showColorPicker=!1))}setColorValue(t){var e;const i=(t,e)=>{const i=this.colorValues[t];this.colorValues=Object.assign(Object.assign({},this.colorValues),{[t]:Object.assign(Object.assign({},i),e)})},o=this.colorValues[this.editingKey];if(o.isBackground)return this.colorValues=Object.assign(Object.assign({},this.colorValues),{[this.editingKey]:Object.assign(Object.assign({},o),{color:t})}),void Object.keys(this.colorValues).forEach((e=>{const o=this.colorValues[e];if(o.isBackground)return;const{contrast:s,passesDoubleA:l}=r(t,o.color);i(e,{contrastRatio:+s.toFixed(1),isValidContrast:l})}));const s=this.getBackgroundConfig(),l=null===(e=this.colorValues[s.key])||void 0===e?void 0:e.color,{contrast:n,passesDoubleA:c}=r(l,t);i(this.editingKey,{color:t,contrastRatio:+n.toFixed(1),isValidContrast:c})}getBackgroundConfig(){return this.colorConfigs.find((t=>t.isBackground))}async componentWillLoad(){var t;const e=await(0,s.g)(this.el);this.i18n=e[0],this.colorValues=this.colorConfigs.reduce(((t,{key:e,defaultColor:i,isBackground:o,isLink:s})=>(t[e]={color:i,isBackground:o,isLink:s},t)),{});const i=this.getBackgroundConfig();if(!i)return;const o=null===(t=this.colorValues[i.key])||void 0===t?void 0:t.color;Object.keys(this.colorValues).forEach((t=>{const e=this.colorValues[t];if(e.isBackground)return;const{contrast:i,passesDoubleA:s}=r(e.color,o);e.contrastRatio=+i.toFixed(1),e.isValidContrast=s})),this.textInputConfigs.forEach((t=>{this.textValues[t.key]=t.defaultValue||""}))}render(){var t;const e=this.getBackgroundConfig(),i=this.colorConfigs.filter((t=>t.isLink))[0],s=this.colorConfigs.filter((t=>!t.isBackground&&!t.isLink)),l=e?this.colorValues[e.key].color:"";if(e)return(0,o.h)(o.H,null,(0,o.h)("calcite-modal",{open:this.isActive,class:"color-contrast",onCalciteModalClose:this.handleModalClose},(0,o.h)("h3",{slot:"header"},this.modalTitle),(0,o.h)("div",{slot:"content",class:"color-contrast__modal-content"},(0,o.h)("div",{class:"color-contrast__container"},(0,o.h)("div",{class:"config-color-panel"},this.textInputConfigs.map((t=>(0,o.h)("arcgis-color-text-input",{key:t.key,keyValue:t.key,label:t.label,defaultValue:t.defaultValue,onInputChange:this.handleTextInputChange}))),(0,o.h)("arcgis-configure-colors-table",{i18n:this.i18n,backgroundConfig:e,otherConfigs:s,linkConfig:i,colorValues:this.colorValues,onEditClick:this.handleEditColorClick})),(0,o.h)("div",{class:"color-contrast__preview-panel"},(0,o.h)("div",null,this.i18n.preview),(0,o.h)("arcgis-contrast-preview",{backgroundColor:l,textColorConfigs:s,linkConfig:i,colorValues:this.colorValues})),(0,o.h)("div",{class:{"color-contrast__color-picker-container":!0,hide:!this.showColorPicker},ref:t=>this.colorPickerContainer=t},(0,o.h)("calcite-color-picker",{scale:"s",value:null===(t=this.colorValues[this.editingKey])||void 0===t?void 0:t.color,hideSaved:!0,ref:t=>this.colorPickerEl=t,onCalciteColorPickerInput:this.handleColorPickerChange}),this.sharedTheme&&(0,o.h)("div",null,(0,o.h)("arcgis-shared-theme-colors",{sharedTheme:this.sharedTheme,i18n:this.i18n,onSelectColor:this.handlePresetColorSelect})),(0,o.h)("div",null,(0,o.h)("arcgis-preset-colors",{i18n:this.i18n,onSelectColor:this.handlePresetColorSelect}))))),(0,o.h)("calcite-button",{slot:"secondary",appearance:"outline-fill",onClick:this.handleCancelClick},this.i18n.cancel),(0,o.h)("calcite-button",{slot:"primary",onClick:this.handleSaveClick},this.i18n.save)),(0,o.h)("calcite-modal",{open:this.showWarning,kind:"danger",class:"contrast-warning-modal"},(0,o.h)("h3",{slot:"header",class:"trailer-0 font-size-1"},this.i18n.contrastWarning.title),(0,o.h)("div",{slot:"content"},this.i18n.contrastWarning.description),(0,o.h)("calcite-button",{slot:"primary",onClick:this.handleAcceptWarning},this.i18n.contrastWarning.editColors),(0,o.h)("calcite-button",{slot:"secondary",kind:"danger",appearance:"transparent",onClick:this.handleProceedAnayway},this.i18n.contrastWarning.proceedAnyway)))}get el(){return(0,o.d)(this)}};d.style=".color-contrast{--calcite-modal-width:830px}.contrast-warning-modal{--calcite-modal-width:415px}.color-contrast__modal-content{padding:var(--arcgis-app-cap-spacing-half);position:relative;min-height:500px}.color-contrast__container{display:flex}@media screen and (max-width: 640px){.color-contrast__container{flex-direction:column}}.config-color-panel{flex:1 1 auto;min-width:0;margin-right:var(--arcgis-app-side-spacing-double);width:50%}@media screen and (max-width: 640px){.config-color-panel{width:100%}}.color-contrast__preview-panel{width:45%;flex:1 1 auto;min-width:0;display:flex;flex-direction:column}@media screen and (max-width: 640px){.color-contrast__preview-panel{width:100%}}.color-contrast__color-picker-container{position:absolute;left:50%}.hide{display:none}html[dir=rtl] .config-color-panel{margin-right:0;margin-left:var(--arcgis-app-side-spacing-double)}";const u=class{constructor(t){(0,o.r)(this,t),this.colorEditClick=(0,o.c)(this,"colorEditClick",7),this.handleClick=t=>{null==t||t.stopPropagation(),this.colorEditClick.emit(this.editKey)},this.handleKeyup=t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),this.handleClick(t))},this.editKey="",this.labelText="",this.colorValue=""}render(){return(0,o.h)("div",{class:"color-edit-container",tabIndex:0,onClick:this.handleClick,onKeyUp:this.handleKeyup},(0,o.h)("div",null,(0,o.h)("div",{class:"color-tile",style:{backgroundColor:this.colorValue}})),(0,o.h)("div",{class:"color-edit__label-value"},(0,o.h)("div",{class:"color-edit-label"},this.labelText),(0,o.h)("div",{class:"color-edit-value "},this.colorValue)),(0,o.h)("div",{class:"color-edit-icon"},(0,o.h)("calcite-icon",{scale:"s",icon:"pencil"})))}};u.style=".color-edit-container{padding:var(--arcgis-app-side-spacing-quarter);display:flex;align-items:center;cursor:pointer}.color-tile{border:1px solid #a9a9a9;width:30px;height:30px;margin-right:var(--arcgis-app-side-spacing-three-quarters)}.color-edit__label-value{flex:1 1 auto;min-width:0;text-align:start}.color-edit-label{font-size:var(--arcgis-app-font-size--2);font-weight:normal}.color-edit-value{font-size:var(--arcgis-app-font-size--1);font-weight:var(--arcgis-app-font-weight-demi)}.color-edit-icon{margin-right:var(--arcgis-app-side-spacing-three-quarters)}html[dir=rtl] .color-tile{margin-right:0;margin-left:var(--arcgis-app-side-spacing-three-quarters)}html[dir=rtl] .color-edit-icon{margin-right:0;margin-left:var(--arcgis-app-side-spacing-three-quarters)}";const g=class{constructor(t){(0,o.r)(this,t),this.swatchClick=(0,o.c)(this,"swatchClick",7),this.handleClick=()=>{this.swatchClick.emit(this.color)},this.handleKeyUp=t=>{" "!==t.key&&"Enter"!==t.key||this.handleClick()},this.color=""}render(){return(0,o.h)("div",{class:"color-swatch",onClick:this.handleClick,onKeyUp:this.handleKeyUp,tabIndex:0},(0,o.h)("svg",{width:"16",height:"16"},(0,o.h)("rect",{width:"16",height:"16",fill:this.color})))}};g.style=".color-swatch{display:inline-block;height:16px;width:16px;box-sizing:border-box;margin-right:2px;overflow:hidden}";const p=class{constructor(t){(0,o.r)(this,t),this.inputChange=(0,o.c)(this,"inputChange",7),this.handleInputChange=t=>{const e=t.target;this.value=e.value,this.inputChange.emit({key:this.keyValue,value:e.value})},this.keyValue=void 0,this.label=void 0,this.defaultValue=void 0,this.value=""}componentWillLoad(){this.defaultValue&&(this.value=this.defaultValue)}render(){return(0,o.h)("calcite-label",null,this.label,(0,o.h)("calcite-input",{value:this.value,onCalciteInputInput:this.handleInputChange,scale:"s"}))}},f=({key:t,colorConfig:e,color:i,contrastRatio:s,isValidContrast:l,i18n:r,onColorEditClick:n})=>(0,o.h)("tr",{"data-key":t},(0,o.h)("td",{class:"color-contrast__color-col"},(0,o.h)("arcgis-color-edit",{editKey:e.key,labelText:e.label,colorValue:i,onColorEditClick:n})),(0,o.h)("td",{class:"color-contrast__ratio-col"},s),(0,o.h)("td",{class:"color-contrast__legibility-col"},(0,o.h)("div",{class:"color-row__legibility"},l?(0,o.h)(o.F,null,(0,o.h)("calcite-icon",{scale:"s",icon:"check-circle-f",class:"color-contrast--valid"}),(0,o.h)("div",{class:"color-contrast__legible-label"},r.legible)):(0,o.h)(o.F,null,(0,o.h)("calcite-icon",{scale:"s",icon:"x-circle-f",class:"color-contrast--invalid"}),(0,o.h)("div",{class:"color-contrast__legible-label"},r.notLegible))))),k=class{constructor(t){(0,o.r)(this,t),this.editClick=(0,o.c)(this,"editClick",7),this.handleEditClick=t=>{this.editClick.emit(t.detail)},this.i18n=void 0,this.backgroundConfig=void 0,this.otherConfigs=void 0,this.linkConfig=void 0,this.colorValues={}}render(){var t;const e=this.colorValues[this.backgroundConfig.key].color,i=this.colorValues[null===(t=this.linkConfig)||void 0===t?void 0:t.key],s=(null==i?void 0:i.color)||"";return(0,o.h)("div",null,this.i18n.configure,(0,o.h)("table",{class:"config-color-table"},(0,o.h)("thead",null,(0,o.h)("tr",null,(0,o.h)("th",null,(0,o.h)("arcgis-color-edit",{editKey:this.backgroundConfig.key,labelText:this.backgroundConfig.label||this.i18n.background,colorValue:e,onColorEditClick:this.handleEditClick})),(0,o.h)("th",{class:"color-edit-label"},this.i18n.contrastRatio),(0,o.h)("th",{class:"color-edit-label"},this.i18n.legibility))),(0,o.h)("tbody",null,this.otherConfigs.map((t=>{const{color:e,contrastRatio:i,isValidContrast:s}=this.colorValues[t.key];return(0,o.h)(f,{key:t.key,colorConfig:t,color:e,contrastRatio:i,isValidContrast:s,i18n:this.i18n,onColorEditClick:this.handleEditClick})})),this.linkConfig&&(0,o.h)(f,{key:this.linkConfig.key,colorConfig:this.linkConfig,color:s,contrastRatio:null==i?void 0:i.contrastRatio,isValidContrast:null==i?void 0:i.isValidContrast,i18n:this.i18n,onColorEditClick:this.handleEditClick}))),(0,o.h)("p",{class:"contrast-info"},this.i18n.contrastInfo))}};k.style=".config-color-table{width:100%;border-collapse:collapse}th,td{border:1px solid rgba(221, 221, 221, 0.8666666667);text-align:center;font-size:var(--arcgis-app-font-size--1)}.color-contrast__legibility-col{padding:0.5rem;text-align:start;width:6rem}.color-contrast--valid{color:green}.color-contrast--invalid{color:red}.color-row__legibility{display:flex;align-items:center}.color-contrast__legible-label{margin:0 0.5rem}.contrast-info{font-size:0.8rem}";const C=class{constructor(t){(0,o.r)(this,t),this.backgroundColor="",this.textColorConfigs=void 0,this.linkConfig=void 0,this.colorValues=void 0}renderLinkConfig(){var t;if(!(null===(t=this.linkConfig)||void 0===t?void 0:t.preview))return;const{preview:e}=this.linkConfig;return e.isButton?(0,o.h)("button",null,e.text):(0,o.h)("a",null,e.text)}render(){var t;const e=this.colorValues[null===(t=this.linkConfig)||void 0===t?void 0:t.key].color||"#00a0ff";return(0,o.h)(o.F,null,(0,o.h)("style",{innerHTML:`.contrast-preview a {\n          color: ${e||"inherit"};\n        } .contrast-preview button {\n          color: ${e||"inherit"};\n          border: ${e?`1px solid ${e}`:"inherit"};\n          background: ${e?"none":"inherit"};\n          padding: 0.375rem 1rem;\n        }`}),(0,o.h)("div",{class:"contrast-preview",style:{backgroundColor:this.backgroundColor}},this.textColorConfigs.map((({preview:t,key:e})=>{const{color:i}=this.colorValues[e];if(t)return t.isHeading?(0,o.h)("h2",{style:{color:i},innerHTML:t.text}):(0,o.h)("p",{style:{color:i},innerHTML:t.text})})),this.renderLinkConfig()))}};C.style=".contrast-preview{padding:1rem;flex:1 1 auto;min-width:0}.contrast-preview h2,.contrast-preview p,.contrast-preview button{margin-bottom:1rem;margin-top:0}";const v=class{constructor(t){(0,o.r)(this,t),this.selectColor=(0,o.c)(this,"selectColor",7),this.presetColors={brown:["f2ece6","7c410a","3e2105"],blue:["e5f1f9","0079c1","003d61"],green:["e9f3ea","288835","14441b"],yellow:["fefced","f9e54e","7d7327"],orange:["fef5e9","f89927","7c4d14"],red:["fbeae8","d83020","6c1810"],violet:["efebf5","633b9b","321e4e"]},this.handleSwatchClick=t=>{this.selectColor.emit(t.detail)},this.i18n=void 0}render(){const t=[];for(let e=2;e>=0;e--){const i=[];Object.keys(this.presetColors).forEach((t=>{const o=this.presetColors[t];i.push(`#${o[e]}`)})),t.push(i)}return(0,o.h)("div",{class:"preset-colors"},(0,o.h)("div",{class:"preset-colors__title"},this.i18n.presetColors),t.map((t=>(0,o.h)("div",{class:"preset-row"},t.map((t=>(0,o.h)("arcgis-color-swatch",{key:t,color:t,onSwatchClick:this.handleSwatchClick})))))))}};v.style=".preset-colors{max-width:160px;padding:8px 16px;background-color:#fff;border:1px solid #ccc;border-top:none;box-sizing:border-box}.preset-colors .preset-colors__title{font-size:0.825rem}.preset-colors .preset-row{max-height:16px;margin-bottom:2px}";const b=class{constructor(t){(0,o.r)(this,t),this.selectColor=(0,o.c)(this,"selectColor",7),this.handleSwatchClick=t=>{this.selectColor.emit(t.detail)},this.i18n=void 0,this.sharedTheme=void 0}render(){if(!this.sharedTheme)return;const t={};return Object.keys(this.sharedTheme).forEach((e=>{if(!this.sharedTheme[e])return;const{background:i,text:o,link:s}=this.sharedTheme[e];i&&(t[i]=!0),o&&(t[o]=!0),s&&(t[s]=!0)})),Object.keys(t).length?(0,o.h)("div",{class:"shared-theme"},(0,o.h)("div",{class:"shared-theme-colors__title"},this.i18n.sharedTheme),(0,o.h)("div",{class:"shared-theme__row"},Object.keys(t).sort().map((t=>(0,o.h)("arcgis-color-swatch",{key:t,color:t,onSwatchClick:this.handleSwatchClick}))))):void 0}};b.style=".shared-theme{max-width:160px;padding:8px 16px;background-color:#fff;border:1px solid #ccc;border-top:none;box-sizing:border-box}.shared-theme-colors__title{font-size:0.825rem}.shared-theme__row{max-height:16px;margin-bottom:2px}"},88703:(t,e,i)=>{i.d(e,{a:()=>a,b:()=>u,c:()=>s,d:()=>o,e:()=>l,f:()=>h,g:()=>g,i:()=>r,m:()=>n,t:()=>c,u:()=>d});const o=(t,e)=>{let i,o="idle";const s=(...s)=>new Promise((l=>{switch(o){case"flushed":o="idle",i?(clearTimeout(i),l(t(...s))):l(null);break;case"invoked":clearTimeout(i),o="idle",l(t(...s));break;case"cancelled":clearTimeout(i),o="idle",l(null);break;default:i&&clearTimeout(i),o="pending",i=setTimeout((()=>(o="idle",l(t(...s)))),e)}}));return s.flush=function(...t){return o="flushed",s(...t)},s.invoke=function(...t){return o="invoked",s(...t)},s.cancel=function(...t){return o="cancelled",s(...t)},s.getStatus=function(){return o},s},s=(t,e)=>{let i;return(...o)=>new Promise((s=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,s(t(...o))}),e))}))};function l(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(t){return null!=t}async function n(t,e){return await Promise.all([t,c(e)]),t}function c(t){return new Promise((e=>setTimeout(e,t)))}const a=(t,e)=>Object.fromEntries((t||[]).map((t=>{const{key:i,data:o}=e(t);return[i,o]}))),h=(t,e)=>t.length===e.length&&t.reduce(((t,i)=>t&&e.indexOf(i)>-1),!0);function d(t,e){const i=[],o={};return t.forEach((t=>{const s=e(t);null==o[s]&&(o[s]=t,i.push(t))})),i}function u(t){const e={boolean:{},number:{},string:{}},i=[];return t.filter((t=>{let o=typeof t;return o in e?!e[o].hasOwnProperty(t)&&(e[o][t]=!0):!(i.indexOf(t)>=0)&&i.push(t)}))}const g=(t,e)=>[...Array(Math.ceil(t.length/e))].map(((i,o)=>t.slice(e*o,e+e*o)))}}]);