/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a66920.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a66920"],{73838:(e,i,a)=>{a.d(i,{a:()=>t,c:()=>r,g:()=>n});var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==a.g?a.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,i,a){return e(a={path:i,exports:{},require:function(e,i){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},a.exports),a.exports}},56631:(e,i,a)=>{a.d(i,{a:()=>l});var t=a(66913),n=a(9316),r=a(52299);async function l(e){var i;const a=(0,n.g)(e),l=`${null===(i=e.existingItem)||void 0===i?void 0:i.url}/${e.sourceDataLayer.id}/append`;try{const i=await(0,t.r)(l,a,{},"post"),{status:n,recordCount:o}=await(0,r.v)(e.id,{},null==i?void 0:i.statusUrl);return{result:{status:n,recordCount:o}}}catch(e){let i="unhandledError";const a={error:e}.error.description.toLowerCase();switch(!0){case a.includes("the create unique index statement terminated because a duplicate key was found for the object name"):i="invalidUniqueIdentifier";break;case a.includes("does not allow nulls"):i="cannotAddNullData";break;case a.includes("the value violates the maxlength limit of this column"):i="exceededMaxFieldLength";break;case a.includes("input string was not in a correct format"):i="invalidFieldType"}return console.error(e),{error:{code:i,message:JSON.stringify(e)}}}}},24147:(e,i,a)=>{a.d(i,{A:()=>o,N:()=>n,a:()=>l,b:()=>r,c:()=>d,d:()=>s,u:()=>t});const t=["esriFieldTypeOID","esriFieldTypeGlobalID"],n="<None>",r={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage"},l={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},o={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},s=["zip","csv","xls","xlsx","geojson","gpkg","json"],d=["zip","csv","xls","xlsx"]},9316:(e,i,a)=>{a.d(i,{c:()=>d,g:()=>c,h:()=>u});var t=a(82669),n=a(24147),r=a(30007),l=a(17752),o=a(84873),s=function(e,i){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)i.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a};function d(e,i){var a;const t=(null==e?void 0:e.type)||null,n=(null==i?void 0:i.type)||null;return n&&(n===t||(null===(a={esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger"],esriFieldTypeInteger:["esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeSingle:["esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeDouble","esriFieldTypeSingle","esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeDate","esriFieldTypeGUID"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeOID:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger"],esriFieldTypeGlobalID:["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeDateOnly:["esriFieldTypeDateOnly"],esriFieldTypeTimeOnly:["esriFieldTypeTimeOnly"],esriFieldTypeTimestampOffset:["esriFieldTypeTimestampOffset"],esriFieldTypeBigInteger:["esriFieldTypeBigInteger"]}[t])||void 0===a?void 0:a.indexOf(n))>-1)}function c(e){var i;const{timezone:a,analyzeResults:o,type:d,fieldMappings:c,dataLayer:u,id:p,uidPair:h,addAppendSelectOption:g,sourceDataLayer:m}=e;let y,f;const{publishParameters:v}=o,F=s(o,["publishParameters"]),T="upsert"===g||"update"===g,b=function(e){return e.filter((e=>e.source!==n.N)).map((({source:e,name:i})=>({source:e,name:i})))}(c),S=function(e){return e.map((e=>e.name))}(b),I={dateFieldsTimeReference:{timeZone:a||"UTC",respectsDaylightSaving:!0}},M={sourceTableName:u.name,fieldMappings:(null==b?void 0:b.length)?JSON.stringify(b):null,upsert:T,skipInserts:"update"===g,skipUpdates:!1,useGlobalIds:T&&"esriFieldTypeGlobalID"===(null==h?void 0:h.type),updateGeometry:!T||"attributeAndGeometry"===t.a.addAppendSelectUpdateTypeOption,appendFields:S.length?JSON.stringify(S):null,appendItemId:p,appendUploadFormat:l.a[t.a.type].appendUploadFormat,rollbackOnFailure:!0},w=s(v,["layers"]);if("CSV"===d)v.layerInfo.dateFieldsTimeReference=I.dateFieldsTimeReference,f=Object.assign(Object.assign(Object.assign({},I),v),F);else if("Microsoft Excel"===d){const e=function(e,i){const a=Object.assign({},e);return a.locationType=i.locationType,"address"===a.locationType?(a.addressFields=i.addressFields,a.sourceCountry=i.sourceCountry):"coordinates"===a.locationType&&(a.coordinateFieldType=i.coordinateFieldType,"LatitudeAndLongitude"===a.coordinateFieldType?(a.latitudeFieldName=i.latitudeFieldName,a.longitudeFieldName=i.longitudeFieldName):a.coordinateFieldName=i.coordinateFieldName),a}((0,r.a)({},!0),w);e.dateFieldsTimeReference=I.dateFieldsTimeReference,w.name=u.name,f=Object.assign(Object.assign(Object.assign(Object.assign({},I),{layers:[e]}),w),F)}else f=Object.assign(Object.assign(Object.assign({},I),v),F);return y=Object.assign(Object.assign({},M),{appendSourceInfo:JSON.stringify(f)}),"add"===g?y.upsertMatchingField=m.objectIdField||(null===(i=m.uniqueField)||void 0===i?void 0:i.name):T&&(null==h?void 0:h.isUniqueIndex)&&(y.upsertMatchingField=null==h?void 0:h.name),y}function u(e,i){const a=i.appendErrorMessages;let t=o.u.i18n.error,n=a.appendError;switch(e.code){case"invalidUniqueIdentifier":t=a.invalidUniqueIdentifier.title,n=a.invalidUniqueIdentifier.description;break;case"cannotAddNullData":t=a.cannotAddNullData.title,n=a.cannotAddNullData.description;break;case"exceededMaxFieldLength":t=a.exceededMaxFieldLength.title,n=a.exceededMaxFieldLength.description;break;case"invalidFieldType":t=a.invalidFieldType.title,n=a.invalidFieldType.description}return{title:t,description:n}}},52420:(e,i,a)=>{a.r(i),a.d(i,{arcgis_new_item_pages_append_match_fields:()=>c});var t=a(35110),n=a(82669),r=a(24147),l=a(84873),o=a(9316),s=a(12856),d=a(56631);a(23505),a(30007),a(91659),a(56086),a(66913),a(46710),a(21104),a(73838),a(70392),a(17752),a(91306),a(52299),a(73208),a(35105),a(16082),a(67148),a(79233),a(64307),a(76743),a(63280),a(9657),a(53040),a(51287),a(20982),a(37526),a(7803);const c=class{constructor(e){(0,t.r)(this,e),this.newItemUpdatePage=(0,t.c)(this,"newItemUpdatePage",7),this.newItemPrevPage=(0,t.c)(this,"newItemPrevPage",7),this.workflowComplete=(0,t.c)(this,"workflowComplete",7),this.newItemToggleNavigationEnabled=(0,t.c)(this,"newItemToggleNavigationEnabled",7),this.newItemDisableCloseButtons=(0,t.c)(this,"newItemDisableCloseButtons",7),this.validatedFields=[],this.ITEMS_PER_PAGE=15,this.fields=void 0,this.i18n=void 0,this.fieldMatches=[],this.error=void 0,this.loading=!1,this.loaderType="indeterminate",this.loaderMessage=void 0,this.currentStart=1,this.filteredFields=[],this.searchTerm=""}handleNext(){const e=this.validateMatchings();e?this.error=e:(n.a.fieldMappings=this.fieldMatches,"add"!==this.appendSelection?this.newItemUpdatePage.emit("appendSelectUpdate"):this.handleAppend())}validateMatchings(){const e=this.fieldMatches.every((e=>e.source===r.N)),i=this.fieldMatches.some((e=>e.defaultValue&&!e.isUniqueIndex&&!e.nullable));return e?{title:this.errorLabel,description:this.i18n.errors.noMatchedFields}:this.fieldMatches.filter((e=>!e.disabled&&!e.nullable&&e.source===r.N)).length<=0||"update"===this.appendSelection||i&&"add"===this.appendSelection?null:{title:this.i18n.errors.nonNullableErrorTitle,description:this.i18n.errors.nonNullableErrorDescription}}disableModalButtons(e){this.newItemToggleNavigationEnabled.emit(!e),this.newItemDisableCloseButtons.emit(e)}async handleAppend(){var e,i,a;const{sourceDataLayer:t,existingItem:r,timezone:c,analyzeResults:u,type:p,fieldMappings:h,dataLayer:g,id:m,uidPair:y,addAppendSelectOption:f}=n.a;this.disableModalButtons(!0),this.loading=!0,this.loaderMessage=l.u.i18n.append.appendLoadingMessages.appendCloseNotice;const v=await(0,d.a)({sourceDataLayer:t,existingItem:r,timezone:c,analyzeResults:u,type:p,fieldMappings:h,dataLayer:g,id:m,uidPair:y,addAppendSelectOption:f});if("completed"!==(null===(i=null===(e=null==v?void 0:v.result)||void 0===e?void 0:e.status)||void 0===i?void 0:i.toLowerCase()))this.disableModalButtons(!1),this.loading=!1,this.newItemToggleNavigationEnabled.emit(!0),this.error=(0,o.h)(null!==(a=null==v?void 0:v.error)&&void 0!==a?a:{code:"unhandledError"},{appendErrorMessages:l.u.i18n.append.appendErrorMessages});else{await(0,s.d)(n.a.id,{permanentDelete:!0});const e=Object.assign({appendType:n.a.addAppendSelectOption},v);this.workflowComplete.emit(e)}}async handlePrev(e){var i;this.loading||"add"!==this.appendSelection||(null===(i=n.a.analyzeResults.publishParameters.layers)||void 0===i?void 0:i.length)>1||(e.preventDefault(),this.newItemPrevPage.emit())}handleFieldChange(e){const i=Object.assign({},e.detail);this.validateFieldMappings(this.validatedFields,i)}sortFields(){this.fieldMatches=this.fieldMatches.sort((function(e,i){const a=e.name.toLowerCase(),t=i.name.toLowerCase();return a<t?-1:a>t?1:0}))}validateFieldMappings(e,i){if(i.initialMatch=i.source,i.source!==this.noneString){const a=e.filter((e=>e.source===i.source));if((null==a?void 0:a.length)>0){const i=a[0].idx;e[i].initialMatch=this.noneString,e[i].source=this.noneString}}if(e[i.idx]=i,this.validatedFields=e,this.fieldMatches=[...this.validatedFields],this.sortFields(),this.searchTerm.length>0){const{currentStart:e}=this;this.fetchFields(this.searchTerm),this.currentStart=e}}setNextText(){l.u.nextText="add"===this.appendSelection?"addAndComplete":"next"}componentWillLoad(){const{addAppendSelectOption:e,uidPair:i,sourceDataLayer:a,backupLayerFields:t}=n.a;this.i18n=l.u.i18n.appendMatchFields,this.errorLabel=l.u.i18n.error,this.noneString=l.u.i18n.appendKeyValuePair.noneField,this.appendSelection=e;const r=t,o="csv"===a.type?[a.layerInfo]:a.fields,s="upsert"===this.appendSelection||"update"===this.appendSelection;this.setNextText(),this.selectedKeyPair=i;let d="add"===this.appendSelection?0:1;o.forEach((e=>{"esriFieldTypeOID"===(null==e?void 0:e.type)||"esriFieldTypeGlobalID"===(null==e?void 0:e.type)||!e.editable||s&&e.name===this.selectedKeyPair.name||(this.fieldMatches.push(this.createFieldMapping(e,r,d)),this.validatedFields.push(this.createFieldMapping(e,r,d)),d++)})),"add"!==this.appendSelection&&(this.fieldMatches.unshift(this.selectedKeyPair),this.validatedFields.unshift(this.selectedKeyPair)),this.sortFields()}createFieldMapping(e,i,a){const t=n.a.dataLayer.addressFields?Object.values(n.a.dataLayer.addressFields):null;let r=this.noneString;const l=[{source:this.noneString,name:e.name,type:"None",idx:a}];return i.forEach((i=>{!(0,o.c)(e,i)||"add"!==this.appendSelection&&i.name===this.selectedKeyPair.source||(l.push({source:i.name,name:e.name,type:e.type,idx:a}),e.name.toLowerCase()!==i.name.toLowerCase()||e.type!==i.type&&!(null==t?void 0:t.find((e=>e===i.displayName||e===i.name)))||"add"!==this.appendSelection&&i.name===this.selectedKeyPair.source||(r=i.name))})),{source:r,name:e.name,nullable:e.nullable,type:e.type,idx:a,isUniqueIndex:e.isUniqueIndex,defaultValue:e.defaultValue,initialMatch:r,possibleMatches:l}}fetchFields(e){this.searchTerm=e.toLowerCase();const i=this.fieldMatches.filter((e=>e.name.toLowerCase().includes(this.searchTerm,0)));this.currentStart=1,this.filteredFields=i}render(){const{i18n:e,error:i,ITEMS_PER_PAGE:a,fieldMatches:r,currentStart:o,filteredFields:s,searchTerm:d}=this,{originalFileName:c,existingItem:u}=n.a;if(!u)return;const p={originalField:{header:e.originalField.header,moreInfo:e.originalField.moreInfo.replace("${featureLayerName}",u.title)},uploadedField:{header:e.uploadedField.header,moreInfo:e.uploadedField.moreInfo.replace("${uploadedFileName}",c)}},h=e.description.replace("${uploadedFileName}",c).replace("${featureLayerName}",u.title),g=d.length>0?s:r,m=g.length>0,y=g.length>a,f=null==g?void 0:g.slice(o-1,o+a-1);return(0,t.h)(t.H,{class:{"overflow-hidden":this.loading}},(0,t.h)("arcgis-new-item-loader",{type:this.loaderType,active:this.loading,text:this.loaderMessage}),(0,t.h)("div",{class:"header"}," ",e.header," "),(0,t.h)("div",{class:"description"},h),(0,t.h)("div",{class:"search-bar"},(0,t.h)("calcite-input",{icon:"search",class:"search-match-fields",placeholder:l.u.i18n.layerSearch.search,onCalciteInputInput:e=>{const i=e.target.value;this.fetchFields(i)}})),(0,t.h)("div",{class:"row",role:"row"},Object.keys(p).map((e=>{const{header:i,moreInfo:a}=p[e];return(0,t.h)("span",{class:"header-cell",role:"columnheader","aria-sort":"none"},i,(0,t.h)("arcgis-information",{class:"header-popover",label:a,placement:"top-start",paddedContent:!0},(0,t.h)("p",{class:"popover-content"},a)))}))),m?(0,t.h)("div",{class:"fields-scroll-container",role:"table"},f.map((e=>(0,t.h)("arcgis-new-item-append-match-field",{key:e.source,onFieldChange:this.handleFieldChange.bind(this),field:e,role:"row"})))):(0,t.h)("calcite-input-message",{class:"no-fields",icon:!0,status:"valid"},this.i18n.errors.noFields),y&&(0,t.h)("div",{class:"pagination"},(0,t.h)("calcite-pagination",{scale:"m",class:"pagination-component",totalItems:g.length,pageSize:a,startItem:this.currentStart,onCalcitePaginationChange:e=>{this.currentStart=e.target.startItem}})),(0,t.h)("arcgis-new-item-alert",{heading:null==i?void 0:i.title,description:null==i?void 0:i.description,link:{href:null==i?void 0:i.link,title:null==i?void 0:i.linkText},active:!!i,onAlertDismiss:()=>this.error=null}))}get el(){return(0,t.d)(this)}};c.style=".fields-container{display:flex;height:100%;flex-direction:column;overflow-y:auto;overflow-x:hidden}.field-table{margin-bottom:1.5rem;display:flex;flex-direction:column;overflow:auto}.search-container{display:flex;width:100%}.field-search{margin-right:0.5rem;width:50%}.field-select{width:50%}.field-name-column{margin-right:0.5rem;width:50%}.match-field-name-column{width:50%}.fields-scroll-container{margin-bottom:0.75rem;display:flex;flex-direction:column;padding-bottom:0.75rem;border-bottom:0.125rem solid var(--calcite-color-foreground-3)}.header-row{display:flex;align-content:flex-start;justify-content:center;gap:0.25rem;padding:0.25rem;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1)}.header-cell{display:flex;width:100%;font-size:1rem}.hide{display:none}.not-visible{visibility:hidden;height:0px}.cell{box-sizing:border-box;width:100%}.cell label{margin-top:0.75rem}.row{margin-bottom:0.75rem;display:flex;align-items:center;justify-content:space-between;gap:0.25rem;padding:0.25rem;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1);border-bottom:0.125rem solid var(--calcite-color-foreground-3)}.deselected{opacity:var(--calcite-ui-opacity-disabled)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.label{--calcite-label-margin-bottom:0}.append-timezone{border-top:0.063rem solid var(--calcite-color-foreground-3)}.from-to-fields{display:flex;flex-direction:row}.description{margin-bottom:1rem;font-size:0.875rem;font-weight:300}.header{margin-bottom:0.5rem;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.no-fields{margin-bottom:1.5rem}.popover-icon{cursor:pointer;color:var(--calcite-color-text-3);margin-inline-start:0.75rem;margin-top:0.125rem}.popover-content{margin:0px;font-size:0.75rem;font-weight:400}.header-popover{margin-top:-0.313rem}.search-match-fields{margin-bottom:1rem}.pagination-component{display:flex;justify-content:center}"},30007:(e,i,a)=>{a.d(i,{a:()=>d,b:()=>y,c:()=>l,d:()=>m,e:()=>o,f:()=>u,g:()=>c,i:()=>g});var t=a(88703),n=a(91659),r=a(82669);const l={WORLD:"World",EU:"Europe",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CD:"Congo, the Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Curaçao",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, the former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands, British",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Republic of Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function o(e,i){const{sourceCountry:a,locationType:t,analyzeResults:n,candidateFieldsType:l,coordinateFieldType:o,type:c,standardizedFieldNames:u,selectedFields:p}=r.a,h=d(),g=i?r.a.backupLayerFields:Object.values(p),m=Object.assign(Object.assign({locationType:t||"address",sourceCountry:a,candidateFieldsType:l},"coordinates"===t&&function(e,i){return e.reduce(((e,a)=>{switch(a.locationType){case"latitude":e.latitudeFieldName=a.name,i||(e.coordinateFieldType="LatitudeAndLongitude");break;case"longitude":e.longitudeFieldName=a.name,i||(e.coordinateFieldType="LatitudeAndLongitude");break;case"mgrs":"MGRS"===i&&(e.coordinateFieldName=a.name,i||(e.coordinateFieldType="MGRS"));break;case"usng":"USNG"===i&&(e.coordinateFieldName=a.name,i||(e.coordinateFieldType="USNG"))}return e}),{coordinateFieldType:i})}(g,o)),"address"===t&&{addressFields:s(g,e,u)});let y;return y=i||"Microsoft Excel"!==c?Object.assign(Object.assign({},n.publishParameters),m):Object.assign(Object.assign({},n.publishParameters),{layers:[Object.assign(Object.assign({},h),m)],hasStaticData:!0,maxRecordCount:2e3,layerInfo:{capabilities:"Query"}}),y}function s(e,i,a){if("Single"===i){const i=Object.keys(a)[0]||"Address",t=e.find((({locationType:e})=>e===i||"address"===(null==e?void 0:e.toLowerCase())));return{[i]:(null==t?void 0:t.name)||""}}return e.reduce(((e,i)=>("unknown"!==i.locationType&&(e[i.locationType]=i.name),e)),{})}function d(e,i){var a,t,n,l,o,s,d;const{type:c,analyzeResults:u=e,selectedSheet:p}=r.a,h=null==u?void 0:u.publishParameters;if(i)return"CSV"===c?null==h?void 0:h.layerInfo:null!==(t=null===(a=null==h?void 0:h.layers)||void 0===a?void 0:a[p])&&void 0!==t?t:null===(n=null==h?void 0:h.layers)||void 0===n?void 0:n[0];switch(c){case"Microsoft Excel":return null!==(o=null===(l=null==h?void 0:h.layers)||void 0===l?void 0:l[p])&&void 0!==o?o:null===(s=null==h?void 0:h.layers)||void 0===s?void 0:s[0];case"GeoJson":return null===(d=null==h?void 0:h.layers)||void 0===d?void 0:d[0];default:return null==h?void 0:h.layerInfo}}function c(e){switch(e){case"esriFieldTypeBigInteger":return["esriFieldTypeBigInteger","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSmallInteger":return["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeInteger":return["esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSingle":return["esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDouble":return["esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDate":return["esriFieldTypeDate","esriFieldTypeString"];case"esriFieldTypeDateOnly":return["esriFieldTypeDateOnly","esriFieldTypeString"];case"esriFieldTypeTimeOnly":return["esriFieldTypeTimeOnly","esriFieldTypeString"];case"esriFieldTypeTimestampOffset":return["esriFieldTypeTimestampOffset","esriFieldTypeString"];case"esriFieldTypeOID":return["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeString"];default:return["esriFieldTypeString"]}}function u(e,i){const a=null==i?void 0:i.filter((i=>i.url===e));return(null==a?void 0:a.length)?a.shift():null}function p(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com.*\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi))}function h(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi))}function g(e){return!!e&&(h(e)||p(e))}function m(e,i,a){let t=a||e||i||"";return t="wo"===(null==t?void 0:t.toLowerCase())?"world":t,l[t.toUpperCase()]||(t="world"),t}function y(e,i,a){var r;let l=(0,n.s)(i)&&(0,n.t)(i);const o=function(e,i,a){return e.filter((e=>{const n=Object.assign({},e),r=h(null==n?void 0:n.url),l=p(null==n?void 0:n.url);return(r||l)&&((0,t.i)(n.name)?"Esri World Geocoder"===n.name&&(n.name="ArcGIS World Geocoding Service"):n.name="ArcGIS World Geocoding Service"),(!r||!a&&!i)&&((0,t.i)(n.batch)?!!n.batch:r||l)}))}(e,!l,a),s=null===(r=o[0])||void 0===r?void 0:r.url;if(null==o?void 0:o.length){l=!0;const e=u(o[0].url,o),t=h(null==e?void 0:e.url),r=p(null==e?void 0:e.url),d=t||r;let c=d||!!e.batch;return{allowGeocode:(!(0,n.u)(i)||l)&&(!a&&c||a&&(!t||r)&&c),isAgoWorldGeocodeServer:t,isServiceProxyAgoWorldGeocodeServer:r,isWorldGeocodeServer:d,geocodeServers:o,geocodeServiceUrl:s}}return null}},21104:(e,i,a)=>{a.d(i,{l:()=>r});var t=a(73838),n=(0,t.c)((function(e,i){t.a,function(e){var i={Promise:"undefined"!=typeof window?window.Promise:void 0},a="4.24",t="next";function n(e){if(e.toLowerCase()===t)return t;var i=e&&e.match(/^(\d)\.(\d+)/);return i&&{major:parseInt(i[1],10),minor:parseInt(i[2],10)}}function r(e){return void 0===e&&(e=a),"https://js.arcgis.com/".concat(e,"/")}function l(e){return!e||n(e)?function(e){void 0===e&&(e=a);var i=r(e),l=n(e);if(l!==t&&3===l.major){var o=l.minor<=10?"js/":"";return"".concat(i).concat(o,"esri/css/esri.css")}return"".concat(i,"esri/themes/light/main.css")}(e):e}function o(e,i){var a=l(e),t=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(a);return t||function(e,i){if(i){var a=document.querySelector(i);a.parentNode.insertBefore(e,a)}else document.head.appendChild(e)}(t=function(e){var i=document.createElement("link");return i.rel="stylesheet",i.href=e,i}(a),i),t}var s={};function d(e,i,a){var t;a&&(t=function(e,i){var a=function(t){i(t.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",a,!1)};return e.addEventListener("error",a,!1),a}(e,a));var n=function(){i(e),e.removeEventListener("load",n,!1),t&&e.removeEventListener("error",t,!1)};e.addEventListener("load",n,!1)}function c(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var a={};[s,e].forEach((function(e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=e[i])}));var t=a.version,n=a.url||r(t);return new i.Promise((function(e,i){var r=c();if(r){var l=r.getAttribute("src");l!==n?i(new Error("The ArcGIS API for JavaScript is already loaded (".concat(l,")."))):u()?e(r):d(r,e,i)}else if(u())i(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=a.css;s&&o(!0===s?t:s,a.insertCssBefore),d(r=function(e){var i=document.createElement("script");return i.type="text/javascript",i.src=e,i.setAttribute("data-esri-loader","loading"),i}(n),(function(){r.setAttribute("data-esri-loader","loaded"),e(r)}),i),document.body.appendChild(r)}}))}function h(e){return new i.Promise((function(i,a){var t=window.require.on("error",a);window.require(e,(function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];t.remove(),i(e)}))}))}e.utils=i,e.loadModules=function(e,i){if(void 0===i&&(i={}),u())return h(e);var a=c(),t=a&&a.getAttribute("src");return!i.url&&t&&(i.url=t),p(i).then((function(){return h(e)}))},e.getScript=c,e.isLoaded=u,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),s=e},e.loadCss=o,Object.defineProperty(e,"__esModule",{value:!0})}(i)}));const r=async(e,i)=>(await n.loadModules(e,i)).map((e=>e.__esModule&&e.default?e.default:e))}}]);