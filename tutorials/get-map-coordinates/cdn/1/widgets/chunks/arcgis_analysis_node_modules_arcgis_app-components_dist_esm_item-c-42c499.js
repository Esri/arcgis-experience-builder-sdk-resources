/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_item-c-42c499.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_item-c-42c499"],{82669:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>a,c:()=>o,d:()=>n});const n=(0,r(23505).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=n.state,o=n.state,a=n.state},64209:(e,t,r)=>{r.d(t,{a:()=>s,f:()=>o,s:()=>l});var n=r(88703);const s=e=>(null==e?void 0:e.replace(/(\s+|:)/g,"_"))||"",o=e=>{const t=e=>e.split(",").map((e=>e.trim())).filter((e=>e));return e?"string"==typeof e?(0,n.b)(t(e)):(0,n.b)(e.flatMap((e=>[...t(e)]))):[]},a=async e=>new Promise(((t,r)=>{for(let n=0;n<e.length;n++)e[n].then((r=>{const s=[...e];s.splice(n,1),t({remainingPromises:s,result:r})})).catch(r)}));async function l(e,t){var r,n;const s=[],{getBatchSize:o,onPromiseCompleted:l,onPromiseThrow:i,shouldContinue:c}=null!=t?t:{};let u=[];for(let t=0;t<(null!==(r=null==o?void 0:o())&&void 0!==r?r:1);t++)try{const t=e();t&&u.push(t)}catch(e){null==i||i(e)}let d=null;for(;u.length>0&&(!c||c(d));)try{const{remainingPromises:t,result:r}=await a(u);u=t,d=r,r&&s.push(r),null==l||l(r);const i=null!==(n=null==o?void 0:o())&&void 0!==n?n:1;for(;u.length<i;){const t=e();if(t&&u.push(t),null==t)break}}catch(e){null==i||i(e)}return s}},9657:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>l,c:()=>u,d:()=>d,g:()=>i,i:()=>p});var n=r(70392),s=r(67148),o=r(78635);const a=async(e,t)=>{try{return{result:await(0,s.r)(c(e,t),t)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},l=(e,t)=>`${c(e,t)}/data`,i=async(e,t)=>(0,s.r)(l(e,t),t),c=(e,t)=>`${(0,n.g)(t)}content/items/${e}`,u=async(e,t,r)=>{try{const n=c(e,t);return await(0,s.r)(n,t,r)}catch(e){console.warn(e)}},d=async(e,t)=>{try{const r=`${c(e,t)}/groups`;return{result:await(0,s.r)(r,t)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},p=async(e,t)=>{let r=!1;return(0,o.i)(e.typeKeywords,e.type)&&(r=await f(e.url,t)),r},f=async(e,t,r=!1)=>{var o,a,l;if(e)try{const l=await(0,s.r)(`${null===(o=(0,n.p)(e))||void 0===o?void 0:o.baseServerUrl}/layers`,t,{addTokenManually:!r});return null===(a=null==l?void 0:l.layers)||void 0===a?void 0:a.reduce(((e,t)=>e||(null==t?void 0:t.capabilities.includes("Editing"))),!1)}catch(r){if(null===(l=null==r?void 0:r.message)||void 0===l?void 0:l.toLowerCase().includes("token required"))return f(e,t,!0)}return!1}},67148:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>c,g:()=>i,r:()=>a});var n=r(66913),s=r(70392),o=r(46710);const a=async(e,t,r={})=>{const{body:s,usePost:a,addTokenManually:l,api:i=(null===o.c||void 0===o.c?void 0:o.c.api),customToken:c}=r,u=new URLSearchParams;s&&Object.entries(s).forEach((([e,t])=>{void 0!==t&&u.append(e,t)}));const d=new URL(e);if(d.searchParams.append("f","json"),c)d.searchParams.append("token",c);else{const e=!1===l?null:await(0,n.b)(t,i);e&&d.searchParams.append("token",e)}const p=await fetch(d.toString(),{body:a?u:void 0,method:a?"POST":"GET"}),f=await p.json(),y=f.error;if(y)throw"string"==typeof y?new Error(y):y;return f},l=async(e,t)=>{var r;try{return{result:await a(e,t,{addTokenManually:!1})}}catch(e){const t="token required";return(null===(r=null==e?void 0:e.message)||void 0===r?void 0:r.toLowerCase().includes(t))?{error:{code:"tokenRequired"}}:(console.error(e),{error:{code:"unhandledError"}})}};async function i(e,t,{relationshipType:r,direction:o}){const a=`${(0,s.g)(t)}content/items/${e}/relatedItems`;return await(0,n.r)(a,{relationshipType:r,direction:o})}const c=async(e,t)=>{try{return{result:(await(0,n.r)(`${(0,s.g)(t)}/search`,{filter:`id:(${e.join(" OR ")})`,num:100})).results}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}},91306:(e,t,r)=>{r.d(t,{a:()=>n,i:()=>s});const n=(0,r(23505).c)({title:"",snippet:"",tags:[],categories:[]}),s=n.state},12856:(e,t,r)=>{r.d(t,{a:()=>w,b:()=>C,c:()=>S,d:()=>$,e:()=>g,f:()=>p,g:()=>v,h:()=>f,i:()=>y,j:()=>j,k:()=>m,l:()=>U,m:()=>h,n:()=>k,s:()=>O,u:()=>b});var n=r(70392),s=r(46710),o=r(91659),a=r(66913),l=r(91306),i=r(82669),c=r(84873),u=r(64209),d=r(17752);function p({title:e,snippet:t,tags:r}){return{title:e,snippet:t,tags:(0,u.f)(r).join(",")}}const f=(e,t,r)=>{var n,s;const{file:o,type:a,extension:l,dataUrl:i,properties:c,typeKeywords:u,existingItem:f}=t,y=p(e);if(r){const e=f;y.title=(null===(n=null==e?void 0:e.sourceData)||void 0===n?void 0:n.title)||e.title||y.title||""}const m=[...null===(s=d.a[a])||void 0===s?void 0:s.typeKeywords,...u?[u]:[],l].join(", "),v=Object.assign({type:a,extension:l},c?{properties:JSON.stringify(c)}:{}),w=o?{file:o}:{dataUrl:i.includes('httpHeaders={"Authorization"')?i:encodeURI(i)};return Object.assign(Object.assign(Object.assign(Object.assign({},v),w),y),{typeKeywords:m})},y=(e,t,r)=>{const n=!!r,s=!!t.addAsUniqueFile,o=f(e,t,n),a=new FormData;return a.append("f","json"),a.append("async","true"),Object.keys(o).forEach((e=>{if(s&&"file"===e){const r=t.fileName;a.append(e,o[e],r)}else a.append(e,o[e])})),a},m=(e,t)=>{const r=(null==t?void 0:t.id)&&!function(e){return["all","recycle"].includes(e.id)||e.id===e.username}(t)?`/${t.id}`:"";return`${e.userContentUrl}${r}/addItem`},v=(e,t)=>`${(0,n.g)(t)}content/items/${e}`,w=async(e,t)=>{try{const r=v(e,t);return{result:await(0,a.r)(r)}}catch(e){return console.warn("error getting item",e),{error:{code:"unhandledError"}}}},g=async(e,t)=>{const r=new FormData;switch(t.type){case"base64":r.append("data",t.data);break;case"url":r.append("url",t.url);break;case"file":r.append("file",t.file)}return r.append("f","json"),r.append("token",(0,a.g)(s.c.portal)),await(0,a.a)(`${(0,n.g)()}content/users/${s.c.user.username}/items/${e}/updateThumbnail`,r,{},"post")};async function h(e,t){const r=`${s.c.user.userContentUrl}/moveItems`;return await(0,a.r)(r,{items:e,folder:t},{},"post")}async function $(e,{permanentDelete:t=!1}={}){const r=`${s.c.user.userContentUrl}/items/${e}/delete`;return await(0,a.r)(r,{permanentDelete:t},{},"post")}async function b(e,t,r){var n;const o=null!==(n=null!=r?r:s.c.user)&&void 0!==n?n:s.c.portal.user,l=`${"append"===c.u.workflow?i.a.existingItem.itemOwner.userContentUrl:o.userContentUrl}/items/${e}/update`;return(0,a.r)(l,t,{},"post")}const k=(e,t)=>{const r=`${(0,n.g)(t)}content/items/${e}/data`;return(0,a.r)(r)},j=async(e,t,r)=>{const n=`${s.c.user.userContentUrl}/items/${e}/commit`,o=y(l.i,t,!!r);return o.delete("file"),await(0,a.a)(n,o,{},"post")},U=async e=>{const t=`${s.c.user.userContentUrl}/items/${e}/cancel`;return await(0,a.r)(t,{},{},"post")},C=async e=>{const t=m(s.c.user,l.i.folder),r=p(l.i),n=Object.assign({},e);return delete n.initialFolders,delete n.initialTitle,delete n.newItemMode,delete n.serviceInfo,delete n.allowStoredAuth,delete n.isSecured,delete n.checkAuth,delete n.agsType,delete n.developerCredentialsType,delete n.applicationEnvironment,delete n.apiKeyReferrerUrls,delete n.developerCredentialsRedirectUrls,delete n.developerPrivileges,await(0,a.r)(t,Object.assign(Object.assign(Object.assign(Object.assign({},n),(e=>e.url&&!!e.serviceInfo)(e)?{serviceInfo:JSON.stringify(e.serviceInfo)}:{}),{typeKeywords:JSON.stringify(e.typeKeywords)}),r),{},"post")};async function O(e,t,r,l,i,c){null!=i||(i=s.c.user),null!=c||(c=s.c.portal);const u=r&&r.id!==i.username?r.id:"root",d=e.replace(`.${l}`,"");if("featurecollection"===l||"Microsoft Excel"===t)return null;const p=[`title: "${d}"`,`type: "${t}"`,`owner: "${i.username}"`,`ownerfolder: "${u}"`],f=await(0,a.r)(`${(0,n.g)(c)}search`,{filter:p.join(" AND "),num:1});return(null==f?void 0:f.total)>0?{num:f.num,itemURLList:f.results.map((e=>(0,o.g)(e.id,s.c.config.baseUrl)))}:null}async function S(e,t){const r=(0,u.a)(e),{user:i,config:c,portal:d}=s.c,{folder:p}=l.i,f=p&&p.id!==i.username?p.id:"root",y=[`owner: "${i.username}"`,`ownerfolder: "${f}"`];t&&y.push(`type: "${t}"`);let m,v=1;for(let e=0;e<10&&!m&&v>-1;e++){const{nextStart:e,results:t}=await(0,a.r)(`${(0,n.g)()}search`,{[d.isPortal?"q":"filter"]:y.join(" AND "),num:100,start:v});m=t.find((e=>e.name===r)),v=e}return m?(0,o.g)(m.id,c.baseUrl):null}},78635:(e,t,r)=>{r.d(t,{i:()=>n});const n=(e,t)=>"Feature Service"===t&&e.includes("Hosted Service")},84873:(e,t,r)=>{r.d(t,{a:()=>n,u:()=>s});const n=(0,r(23505).c)({nextText:"next",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),s=n.state},79233:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>c,c:()=>y,d:()=>p,e:()=>f,f:()=>a,g:()=>d,u:()=>m});var n=r(66913),s=r(46710),o=r(70392);async function a(e,t){return(0,n.r)(`${(0,o.g)(t)}/community/users/${e}`)}async function l(){return(0,n.r)(`${(0,o.g)()}/community/self`)}async function i(e,t){var r;if(null!=e||(e=null===s.c||void 0===s.c?void 0:s.c.user),!e)return[];const o=await(0,n.f)((()=>l()),"communitySelf",e.username);return(null!==(r=null==o?void 0:o.groups)&&void 0!==r?r:[]).sort(((e,r)=>{var n;return null===(n=e.title)||void 0===n?void 0:n.localeCompare(r.title,t||"en",{sensitivity:"base"})}))}async function c(){const e=null===s.c||void 0===s.c?void 0:s.c.user;return e?(await(0,n.f)((()=>l()),"communitySelf",e.username)).favGroupId:null}function u(e,t){var r;return null!==(r=null==e?void 0:e.userContentUrl)&&void 0!==r?r:`${null==t?void 0:t.restUrl}/content/users/${e.username}`}async function d(e){var t;const r=null!==(t=null!=e?e:s.c.user)&&void 0!==t?t:s.c.portal.user,{folders:o}=await async function(e){var t;const r=u(null!==(t=null!=e?e:s.c.user)&&void 0!==t?t:s.c.portal.user,s.c.portal),o=await(0,n.r)(r,{num:1});return Promise.resolve(o)}(r),{username:a}=r;return[{username:a,id:a,title:a,created:"now"},...o.sort(((e,t)=>e.title.localeCompare(t.title)))]}async function p(e,t){var r;const n=null!==(r=null!=t?t:s.c.user)&&void 0!==r?r:s.c.portal.user;return(await d(n)).find((t=>t.id===e))}function f(e){return{username:e,id:e,title:e,created:"now"}}async function y(e,t){var r,o;try{const o=`${u(null!==(r=null!=t?t:s.c.user)&&void 0!==r?r:s.c.portal.user,s.c.portal)}/createFolder`;return{result:await(0,n.r)(o,{title:e},{},"post")}}catch(e){return console.error(e),(null===(o=e.details)||void 0===o?void 0:o.messages).some((e=>e.includes("not available")))?{error:{code:"folderNameExists"}}:{error:{code:"unhandledError"}}}}async function m(e,t,r){var o;const a=`${u(null!==(o=null!=r?r:s.c.user)&&void 0!==o?o:s.c.portal.user,s.c.portal)}/${e}/updateFolder`;try{return{result:await(0,n.r)(a,{newTitle:t},{},"post")}}catch(e){return{error:{code:"unhandledError"}}}}}}]);