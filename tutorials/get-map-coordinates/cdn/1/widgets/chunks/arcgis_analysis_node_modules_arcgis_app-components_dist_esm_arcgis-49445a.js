/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-49445a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-49445a"],{49531:(e,t,i)=>{i.r(t),i.d(t,{arcgis_layers_and_tables_summary:()=>c});var a=i(35110),r=i(46710),n=i(1984),l=i(71121),o=i(92848),s=i(29208);i(23505),i(63280),i(86587),i(21104),i(73838);const c=class{constructor(e){(0,a.r)(this,e),this.layersAndTablesFocusEnd=(0,a.c)(this,"layersAndTablesFocusEnd",7),this.expanded={},this.handleTabChage=({detail:e})=>{var t;this.activeTab=e.tab,null===(t=this.telemetry)||void 0===t||t.logEvent({category:"preview popup",action:"switch tab",label:e.tab?"matched":"all",pageName:(0,l.g)(),pageUrl:window.location.href})},this.renderLayer=(e,t)=>{const{i18n:i,telemetry:r}=this,{icon:n,type:o}=(0,s.g)({geometry:e.geometryType,type:e.type});return(0,a.h)("calcite-accordion-item",{heading:e.title,description:i.layerTypes[o],iconStart:n,class:"layer",onClick:i=>{i.currentTarget.expanded&&!this.expanded[e.id]&&(null==r||r.logEvent({category:"preview popup",action:"expand layer",label:t?"matched":"all",pageName:(0,l.g)(),pageUrl:window.location.href}),this.expanded[e.id]=!0)}},this.renderAliases(e,t))},this.user=void 0,this.item=void 0,this.portal=void 0,this.layers=[],this.showMatched=void 0,this.error=void 0,this.loading=void 0,this.telemetry=void 0,this.currentStart=1,this.activeTab=1}async componentWillLoad(){const e=await(0,n.g)(this.el);this.i18n=e[0]}closeAccordion(){this.el.shadowRoot.querySelectorAll(".layer").forEach((e=>{e.expanded=!1}))}checkAlias(e){return![/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i].find((t=>t.test(e)))}renderAliases(e,t){var i;const{config:n,user:s}=r.c,c=n.newMapViewerUrl,d=`${n.baseUrl}webmap/viewer.html`,p=`${n.baseUrl}webscene/viewer.html`,h="classic"===(null==s?void 0:s.defaultMapViewer),{i18n:g,loading:m,checkAlias:y,telemetry:u}=this,{id:f}=this.item,b=null===(i=e.fields)||void 0===i?void 0:i.filter((e=>y(e.alias||e.name)));return m?(0,a.h)("calcite-loader",{scale:"s",label:g.loading}):(0,a.h)("div",{class:"field-aliases"},(0,a.h)("div",{class:"field-aliases-header"},(0,a.h)("h5",{class:"field-aliases-title"},g.fields),"Feature Service"===this.item.type&&(0,a.h)("calcite-dropdown",{placement:"bottom-end",widthScale:"m",type:"click",class:"field-aliases-dropdown",onCalciteDropdownOpen:()=>{null==u||u.logEvent({category:"preview popup",action:"open actions",label:t?"matched":"all",pageName:(0,l.g)(),pageUrl:window.location.href})}},(0,a.h)("calcite-action",{slot:"trigger",scale:"s",label:"layer actions",appearance:"transparent",icon:"ellipsis",text:""}),(0,a.h)("calcite-dropdown-group",{selectionMode:"single"},(0,a.h)("calcite-dropdown-item",{href:`${n.baseUrl}item.html?id=${f}&sublayer=${e.id}`,target:"_blank"},g.viewDetails),(0,a.h)("calcite-dropdown-item",{href:`${c}?layers=${f}&layerId=${e.id}`,target:"_blank"},g.openInMapViewer),h&&(0,a.h)(a.F,null,(0,a.h)("calcite-dropdown-item",{href:`${d}?useExisting=1&layers=${f}&layerId=${e.id}`,target:"_blank"},g.openInMapViewerClassic),(0,a.h)("calcite-dropdown-item",{href:`${d}?layers=${f}&layerId=${e.id}`,target:"_blank"},g.addToNewMap)),(0,a.h)("calcite-dropdown-item",{href:`${p}?layers=${f}&layerId=${e.id}`,target:"_blank"},g.addToSceneViewer)))),(null==b?void 0:b.length)>0?(0,a.h)("ul",{class:"field-aliases-list"},b.map((e=>(0,a.h)("li",{class:"field-alias"},(0,a.h)("calcite-icon",{icon:o.f[e.type]||"string",scale:"s",class:"icon"}),e.alias||e.name)))):(0,a.h)("p",{class:"field-alias"},g.noAliasFound))}renderPageNumberText(){const e=this.currentStart,t=this.layers.length,i=Math.min(e+5,t);return(0,a.h)("span",{class:"page-number"},this.i18n.paginationRange.replace("${start}",`${e}`).replace("${end}",`${i}`).replace("${total}",`${t}`))}render(){var e;const{i18n:t,renderLayer:i,error:r,handleTabChage:n,item:o,activeTab:s}=this,c=this.layers||[],d=(this.layers||[]).filter((e=>e.matched)),p=c.slice(this.currentStart-1,this.currentStart+5),h=this.showMatched&&(null==d?void 0:d.length)>0,g=(null===(e=s&&h?d:c)||void 0===e?void 0:e.length)>6;return r?(0,a.h)(a.H,null,(0,a.h)("div",{class:"layers"},(0,a.h)("calcite-notice",{icon:!0,open:!0,scale:"s",width:"full",kind:"warning",class:"notice"},(0,a.h)("div",{slot:"title"},r.title),(0,a.h)("div",{slot:"message"},r.message)))):(0,a.h)(a.H,null,(0,a.h)("div",{class:"bg"},!c||0===c.length&&(0,a.h)("p",{class:"no-layers"},this.i18n.noLayers),h?(0,a.h)("calcite-tabs",{layout:"center"},(0,a.h)("calcite-tab-nav",{slot:"title-group",onCalciteTabChange:n},(0,a.h)("calcite-tab-title",{selected:0===s},t.all.replace("${number}",`${c.length}`)),(0,a.h)("calcite-tab-title",{selected:1===s},t.matched.replace("${number}",`${d.length}`))),(0,a.h)("calcite-tab",{class:"layers",selected:0===s},(0,a.h)("calcite-accordion",{selectionMode:"single",scale:"m",iconPosition:"end",iconType:"chevron"},p.map((e=>i(e))))),(0,a.h)("calcite-tab",{class:"layers",selected:1===s},(0,a.h)("calcite-accordion",{selectionMode:"single",scale:"m",iconPosition:"end",iconType:"chevron"},d.map((e=>i(e,!0)))))):(0,a.h)("div",{class:"layers"},(0,a.h)("calcite-accordion",{selectionMode:"single",scale:"m",iconPosition:"end",iconType:"chevron"},p.map((e=>i(e))))),(0,a.h)("div",{class:"post"},g&&this.renderPageNumberText(),(0,a.h)("calcite-link",{href:`item.html?id=${o.id}`,class:"details-link",target:"_blank",rel:"noopener noreferrer",onClick:()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"view item details",pageName:(0,l.g)(),pageUrl:window.location.href})}},t.viewItemDetails)),g&&(0,a.h)("div",{class:"pagination"},(0,a.h)("calcite-pagination",{scale:"m",totalItems:c.length,pageSize:6,startItem:this.currentStart,onCalcitePaginationChange:e=>{this.currentStart=e.target.startItem,this.closeAccordion()}}))))}get el(){return(0,a.d)(this)}};c.style=":host{max-width:100%;width:380px}.bg{background-color:var(--calcite-color-background)}.layers{white-space:normal;background-color:var(--calcite-color-background);padding-top:0.75rem;padding-bottom:0.75rem;padding-left:0.5rem;padding-right:0.5rem}.field-aliases{padding-top:0.5rem;padding-bottom:0.5rem;padding-inline-start:1.75rem}.field-aliases-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:-8px}.field-aliases-title{margin:0px;flex:1 1 0%;padding-left:0px;padding-right:0px;padding-top:0.5rem;padding-bottom:0.5rem;font-size:0.75rem;font-weight:400;color:var(--calcite-color-text-2);text-decoration-line:underline}.field-aliases-list{margin:0px;list-style-type:none;overflow:auto;padding:0px;max-height:200px}.field-alias{margin:0px;display:flex;padding-left:0px;padding-right:0px;padding-top:0.5rem;font-size:0.75rem;font-weight:400;color:var(--calcite-color-text-2)}.icon{padding-inline-end:0.5rem}.post{display:flex;justify-content:flex-end;padding-left:0.5rem;padding-right:0.5rem;padding-bottom:0.75rem;font-size:0.875rem}.page-number{display:inline-block;flex:1 1 0%;color:var(--calcite-color-text-2)}.pagination{display:flex;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);padding-top:0.75rem;padding-bottom:1rem;border-top:1px solid var(--calcite-color-border-1)}.notice{padding-top:1rem;padding-bottom:1rem}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.no-layers{padding:0.75rem 1rem 0 1rem;color:var(--calcite-color-text-2)}"},46710:(e,t,i)=>{i.d(t,{c:()=>r,o:()=>n});const a=(0,i(23505).c)({portal:null,user:null,api:4,scale:"m"}),r=a.state,n=a.onChange},23505:(e,t,i)=>{i.d(t,{c:()=>o});var a=i(35110);const r=e=>!("isConnected"in e)||e.isConnected,n=((e,t)=>{let i;return(...e)=>{i&&clearTimeout(i),i=setTimeout((()=>{i=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(r))})(...e)}),2e3)}})(),l=e=>"function"==typeof e?e():e,o=(e,t)=>{const i=((e,t=((e,t)=>e!==t))=>{const i=l(e);let a=new Map(Object.entries(null!=i?i:{}));const r={dispose:[],get:[],set:[],reset:[]},n=()=>{var t;a=new Map(Object.entries(null!==(t=l(e))&&void 0!==t?t:{})),r.reset.forEach((e=>e()))},o=e=>(r.get.forEach((t=>t(e))),a.get(e)),s=(e,i)=>{const n=a.get(e);t(i,n,e)&&(a.set(e,i),r.set.forEach((t=>t(e,i,n))))},c="undefined"==typeof Proxy?{}:new Proxy(i,{get:(e,t)=>o(t),ownKeys:e=>Array.from(a.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>a.has(t),set:(e,t,i)=>(s(t,i),!0)}),d=(e,t)=>(r[e].push(t),()=>{((e,t)=>{const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.length--)})(r[e],t)});return{state:c,get:o,set:s,on:d,onChange:(t,i)=>{const a=d("set",((e,a)=>{e===t&&i(a)})),r=d("reset",(()=>i(l(e)[t])));return()=>{a(),r()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(d("set",t.set)),t.get&&e.push(d("get",t.get)),t.reset&&e.push(d("reset",t.reset)),t.dispose&&e.push(d("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{r.dispose.forEach((e=>e())),n()},reset:n,forceUpdate:e=>{const t=a.get(e);r.set.forEach((i=>i(e,t,t)))}}})(e,t);return i.use((()=>{if("function"!=typeof a.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const i=(0,a.g)();i&&((e,t,i)=>{const a=e.get(t);a?a.includes(i)||a.push(i):e.set(t,[i])})(e,t,i)},set:t=>{const i=e.get(t);i&&e.set(t,i.filter(a.f)),n(e)},reset:()=>{e.forEach((e=>e.forEach(a.f))),n(e)}}})()),i}},71121:(e,t,i)=>{function a(){const{hash:e,pathname:t}=window.location;if(t.includes("group.html"))return"group page";if(t.includes("search.html"))return"search result page";switch(e){case"#favorites":return"favorites";case"#groups":return"my groups content";case"#organization":return"my org content";case"#livingAtlas":return"living atlas";default:return"my content"}}i.d(t,{g:()=>a})},92848:(e,t,i)=>{i.d(t,{a:()=>a,e:()=>r,f:()=>n});const a={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},r={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},n={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone"}},29208:(e,t,i)=>{function a({geometry:e,type:t}){switch(t){case"Catalog Layer":return{icon:"catalog-dataset",type:"catalog",isGeometry:!1};case"Parcel Layer":return{icon:"parcel-layer",type:"parcel",isGeometry:!1};case"Oriented Imagery Layer":return{icon:"oriented-imagery-layer",type:"oriented imagery",isGeometry:!1};case"Table":return{icon:"table",type:"table",isGeometry:!0}}switch(e){case"point":case"esriGeometryPoint":return{type:"point",icon:"point",isGeometry:!0};case"esriGeometryMultipoint":case"multipoint":return{type:"multipoint",icon:"layer-points",isGeometry:!0};case"line":case"polyline":case"esriGeometryPolyline":return{type:"line",icon:"line",isGeometry:!0};case"polygon":case"esriGeometryPolygon":return{type:"polygon",icon:"polygon",isGeometry:!0};case"multipatch":case"esriGeometryMultiPatch":return{type:"multipatch",icon:"cube",isGeometry:!0};default:return{type:"table",icon:"table",isGeometry:!0}}}i.d(t,{g:()=>a})}}]);