"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-7c3cce"],{70049:(e,t,r)=>{r.d(t,{a:()=>S,b:()=>J,c:()=>I,d:()=>$,e:()=>A,f:()=>L,g:()=>E,h:()=>P,i:()=>T,j:()=>q,k:()=>G,l:()=>M,m:()=>W,o:()=>z,q:()=>D,t:()=>F});var n=r(46574),i=r(34319),o=r(46717),u=r(55139),a=r(57098),c=r(74656),l=r(91123),s=(r(78979),r(46869)),f=r(27703),m=r(92123),d=r(826),y=r(25829),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function h(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(h.Cache||f.M),r}h.Cache=f.M;var w,v,x,R=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,b=(w=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(R,(function(e,r,n,i){t.push(n?i.replace(k,"$1"):r||e)})),t},v=h(w,(function(e){return 500===x.size&&x.clear(),e})),x=v.cache,v);var O=1/0;function _(e){if("string"==typeof e||(0,f.d)(e))return e;var t=e+"";return"0"==t&&1/e==-O?"-0":t}function C(e,t,r){return null==e?e:function(e,t,r,n){if(!(0,y.j)(e))return e;for(var i=-1,o=(t=function(e,t){return(0,y.a)(e)?e:function(e,t){if((0,y.a)(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!(0,f.d)(e))||g.test(e)||!p.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:b((0,f.e)(e))}(t,e)).length,u=o-1,a=e;null!=a&&++i<o;){var c=_(t[i]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=u){var s=a[c];void 0===(l=void 0)&&(l=(0,y.j)(s)?s:(0,f.h)(t[i+1])?[]:{})}(0,f.j)(a,c,l),a=a[c]}return e}(e,t,r)}function I(e){return i.clone(e)}function S(){return i.clone(d.d)}function j(e){return o.urlToObject(e).path}function E(e){return e?.indexOf("?token=")>0&&(e=e.slice(0,e.indexOf("?token="))),e}function J(e){let t=E(e?.url);"feature"===e.type&&(t=`${t}/${e.layerId??0}`);const r=n.default.findCredential(e.url);return void 0!==r&&(t=`${t}?token=${r.token}`),t}async function N(e,t){let r;try{r=await u.default.fromArcGISServerUrl({url:j(e),properties:t})}catch(e){console.log("error getting layer from url")}return r}function $(e){const t={url:J(e),name:e.title};if((0,m.m)(e.renderingRule)||(t.renderingRule=e.renderingRule.toJSON()),(0,m.m)(e.definitionExpression))(0,m.m)(e.mosaicRule)||(t.mosaicRule=e.mosaicRule.toJSON?.());else{let r=e.mosaicRule;(0,m.m)(r)||(r=r.clone(),r.where=e.definitionExpression,t.mosaicRule=r.toJSON())}return t}function A(e,t){if((0,m.m)(e?.url)||(0,m.m)(t))return;const r=j(e.url),n=t.find((t=>t.url===r&&t.title===e.name))?.id;return n}async function L(e){if((0,m.m)(e?.url))return;const t=i.clone(e);let r;if(t.name||(t.name=function(e){const t=e.split("/");return t[t.length-2]}(t.url)),r=await N(t.url,{title:t.name}),!(0,m.m)(e.mosaicRule)){const t=l.default.fromJSON(e.mosaicRule);r.mosaicRule=t}if(!(0,m.m)(e.renderingRule)){const t=s.default.fromJSON(e.renderingRule);r.renderingRule=t}return r}async function P(e){const t=e?.url,r=e?.name;if((0,m.m)(t))return;let n;return n=await N(t),n.name=r,n}function T(e){return e?.toLocaleLowerCase().indexOf("f")>=0}function q(e){const t=e&&(e.extent||e.fullExtent);if((0,m.m)(t))return;const{xmin:r,ymin:n,xmax:i,ymax:o,spatialReference:u}=t,{wkid:a,latestWkid:c,wkt:l}=u,s={xmin:r,ymin:n,xmax:i,ymax:o};return(0,m.m)(a)||C(s,"spatialReference.wkid",a),(0,m.m)(c)||C(s,"spatialReference.latestWkid",c),(0,m.m)(l)||C(s,"spatialReference.wkt",l),s}async function G(e){if((0,m.m)(e))return Promise.resolve(void 0);const t=await e.queryFeatures({returnGeometry:!0,where:"1 = 1"});if((0,m.m)(t))return Promise.resolve(void 0);const r=t.features?.map((e=>e?.geometry));return r}function M(e){const t=e?.rasterInfo?.keyProperties?.ChangeAnalysisParameters,r=t?.AnalysisType;return"CCDC"===r}function W(e,t){let r=!0;return((0,m.k)(e)||(0,m.l)(e))&&!1===e.sourceJSON?.allowAnalysis&&(r=!1),e.portalItem?.typeKeywords?.includes("Hosted Service")?r=!!e.portalItem.isOrgItem||r:r||void 0===t||(r=e.url?.indexOf(t)>0),r}function z(e,t){const r=JSON.stringify(t);return new a.default({url:e,raster:btoa((0,f.t)(r)),persistenceEnabled:!1})}function D(e){const t=[],r=[];return e?.forEach((e=>{"imagery"!==e.type&&"imagery-tile"!==e.type||function(e){return!(!e.raster||!e.url?.toLowerCase().includes("/rasterrendering/imageserver"))}(e)?"feature"===e.type&&r.push(e):t.push(e)})),{imageryLayers:t.filter((e=>W(e))),featureLayers:r}}async function F(e){let t;return"object"==typeof e&&"itemId"in e&&!1===(0,m.m)(e.itemId)?t=await async function(e){let t;try{t=await u.default.fromPortalItem({portalItem:new c.default({id:e})})}catch(e){console.log("error getting layer from itemId")}return t}(e.itemId):"object"==typeof e&&"url"in e&&!1===(0,m.m)(e.url)&&(t=await N(e.url)),void 0!==t&&(t=await async function(e){let t;try{t=await e.load()}catch(e){console.log("error loading layer")}return t}(t)),t}}}]);