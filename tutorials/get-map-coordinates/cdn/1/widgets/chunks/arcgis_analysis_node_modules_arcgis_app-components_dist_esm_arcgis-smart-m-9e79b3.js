/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-9e79b3.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-9e79b3"],{38700:(e,t,a)=>{a.r(t),a.d(t,{arcgis_smart_mapping_heatmap_slider:()=>r});var i=a(35110),s=a(59503);a(21104),a(2137),a(86587),a(63280),a(1984),a(23505),a(89393),a(73838);const r=class{constructor(e){(0,i.r)(this,e),this.styleSheetStatus="not-loaded"}render(){const{config:e}=s.s;return(0,i.h)(i.H,null,(0,i.h)("link",{rel:"stylesheet",href:`${e.jsapiUrl}/themes/light/main.css`,onLoad:()=>{this.styleSheetStatus="loaded",(0,i.f)(this.hostElement)},onError:()=>{this.styleSheetStatus="failed",(0,i.f)(this.hostElement)}}),"loaded"===this.styleSheetStatus?this.renderHeatmapSlider():"not-loaded"===this.styleSheetStatus?this.renderHeatmapSliderLoading():null)}renderHeatmapSlider(){return this.prepareHeatmapSlider()||this.heatmapSlider?(0,i.h)("div",{class:"slider-box"},(0,i.h)("div",{ref:e=>{e&&this.afterHeatmapSliderCreate(e)}})):this.renderHeatmapSliderLoading()}renderHeatmapSliderLoading(){const{strings:e}=s.s;return(0,i.h)("div",{class:"slider-box"},(0,i.h)("calcite-loader",{label:e.loading}))}prepareHeatmapSlider(){var e;const{layer:t,modules:a}=s.s,i=(0,s.j)(t);if(this.heatmapSlider){if("dragging"===(null===(e=this.heatmapSlider.slider)||void 0===e?void 0:e.state))return!0;const t=i.colorStops.map((e=>new a.HeatmapColorStop({color:new a.esriColor(e.color.toRgba()),ratio:e.ratio}))),s={stops:t.splice(3,t.length-3)};this.heatmapSlider.set(s)}else{const e=i.colorStops.map((e=>new a.HeatmapColorStop({color:new a.esriColor(e.color.toRgba()),ratio:e.ratio}))),t={stops:e.splice(3,e.length-3)};this.heatmapSlider=new a.HeatmapSlider(t),this.createHeatmapSliderChangeEvents()}return(0,s.ac)(this.heatmapSlider)}afterHeatmapSliderCreate(e){if(this.heatmapSlider.container)e.append(this.heatmapSlider.container);else{const t=document.createElement("div");e.append(t),this.heatmapSlider.container=t}}createHeatmapSliderChangeEvents(){this.heatmapSlider&&(this.heatmapSlider.on("thumb-change",(()=>{this.handleHeatmapSliderEvent()})),this.heatmapSlider.on("thumb-drag",(()=>{this.handleHeatmapSliderEvent()})))}handleHeatmapSliderEvent(){const{layer:e,modules:t}=s.s,a=(0,s.j)(e),i=this.heatmapSlider.values[0],r=this.heatmapSlider.values[1];i===r&&(i+.001<=1?this.heatmapSlider.viewModel.setValue(1,i+.001):this.heatmapSlider.viewModel.setValue(0,r-.001));const l=a.colorStops.filter(((e,t)=>t<3)).map((e=>new t.HeatmapColorStop({color:new t.esriColor(e.color.toRgba()),ratio:e.ratio}))),o=l[l.length-1].ratio;i<o&&this.heatmapSlider.viewModel.setValue(0,o);const h=l.concat(this.heatmapSlider.stops.slice());a.colorStops=h,(0,s.ab)()}get hostElement(){return(0,i.d)(this)}};r.style=".slider-box{height:255px}.slider-box .esri-heatmap-slider__ramp{width:30px}.slider-box .esri-heatmap-slider .esri-slider .esri-slider__content{height:175px}.slider-box .esri-heatmap-slider{min-width:200px}"}}]);