"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-9f464d"],{826:(e,t,i)=>{i.d(t,{A:()=>l,G:()=>h,J:()=>s,M:()=>r,P:()=>T,U:()=>a,a:()=>o,d:()=>n});const a={IDLE:"idle",VALID:"valid",INVALID:"invalid"},s={RASTER_FUNCTION_TEMPLATE:"RasterFunctionTemplate",RASTER_FUNCTION_VARIABLE:"RasterFunctionVariable",ARGUMENT_ARRAY:"ArgumentArray",RECORD_SET:"RecordSet",ECD_FILE:"ECDFile"},r={MATCH_VARIABLE:"MatchVariable",UNION_DIMENSION:"UnionDimension"},n={name:"Raster",isDataset:!0,isPublic:!1,type:s.RASTER_FUNCTION_VARIABLE},l={RFX_DTEX_COMMON_SELECT:"RFX-DTEX-COMMON-SELECT",RFX_DTE_COMMON_CHECKBOX:"CALCITE-CHECKBOX",RFX_DTE_COMMON_TEXTINPUT:"CALCITE-INPUT-TEXT",RFX_DTE_COMMON_NUMBERINPUT:"CALCITE-INPUT-NUMBER",RFX_DTE_RASTER_INPUT:"RFX-DTE-RASTER-INPUT",RFX_DTE_FEATURE_SELECT:"RFX-DTE-FEATURE-SELECT",RFX_DTEX_RASTER_VARIABLES_LIST:"RFX-DTEX-RASTER-VARIABLES-LIST",RFX_CTE_RANGED_VALUE_EDITOR:"RFX-CTE-RANGED-VALUE-EDITOR",RFX_CTE_GAMMA_EDITOR:"RFX-CTE-GAMMA-EDITOR",RFX_DTE_COLOR_RAMP_SELECTOR:"RFX-DTE-COLOR-RAMP-SELECTOR",RFX_DTE_EXTENT:"RFX-DTE-EXTENT",RFX_DTE_JSON_FILE_UPLOADER:"RFX-DTE-JSON-FILE-UPLOADER",RFX_CTE_FACTOR_FUNCTION_EDITOR:"RFX-CTE-FACTOR-FUNCTION-EDITOR",RFX_CTE_NEIGHBORHOOD_VALUES:"RFX-CTE-NEIGHBORHOOD-VALUES",RFX_CTE_SYNCHRONIZE_OUTPUT_UNIT_PICKER:"RFX-CTE-SYNCHRONIZE-OUTPUT-UNIT-PICKER"},o={ANALYSIS:"analysis",EDITOR:"editor"},h={textInput:"text-input",text:"text",raster:"raster-input",number:"number-input",boolean:"check-box",switch:"switch",field:"field-select",color:"color-input",select:"select",icon:"icon"},T={loading:"loading",success:"success",error:"error"}},44275:(e,t,i)=>{i.r(t),i.d(t,{rfx_analysis_wrapper:()=>l});var a=i(14947),s=i(59498),r=i(86578),n=(i(34319),i(70049));i(99248),i(16888),i(95323),i(43278),i(46574),i(86944),i(83345),i(74656);const l=class{constructor(e){(0,a.r)(this,e),this.analysisToolDataChange=(0,a.c)(this,"analysisToolDataChange",7),this.analysisToolClose=(0,a.c)(this,"analysisToolclose",7),this.analysisUnsupportedFunction=(0,a.c)(this,"analysisUnsupportedFunction",7),this.analysisRFxHelpPopoverChange=(0,a.c)(this,"analysisRFxHelpPopoverChange",7),this.analysisRFxBrowseLayerClick=(0,a.c)(this,"analysisRFxBrowseLayerClick",7),this.resetPreview=!0,this.handlePreviewSelectionChange=e=>{this.editorComponent.rfxTemplate=e.detail},this.handlePreviewHelpClick=e=>{const{referenceElement:t,helpSrcdoc:i,heading:a}=e.detail,n=this.portal?.sourceJSON?.helpBase||r.i.learnMoreDocBaseURL,l=`${r.i.learnMoreDocDefaultHelpID}${r.i.learnMoreDocPreviewHelpID}`,o=(0,s.f)(l,n,this.locale);this.analysisRFxHelpPopoverChange.emit({referenceElement:t,helpSrcdoc:i,heading:a,learnMoreUrl:o})},this.rfxTemplate=void 0,this.functionName=void 0,this.usePanel=!0,this.mapLayers=void 0,this.mapView=void 0,this.user=void 0,this.portal=void 0,this.hasGlobalFunctionInRFT=!1}async onRfxTemplateChange(){!0===this.resetPreview&&(this.hasGlobalFunctionInRFT=await(0,r.h)(this.rfxTemplate,this.locale),this.previewComponent?.clearPreviewLayers())}async onMapLayersChange(){this.resetPreview=!1,this.rfxTemplate=await this.getUpdatedRFTWithValues()??this.rfxTemplate,setTimeout((()=>{this.resetPreview=!0}),1)}async getUpdatedRFTWithValues(){return this.editorComponent?.getUpdatedRFTWithValues()}async validateRFx(){return this.editorComponent?.checkTemplateValidity()}async componentWillLoad(){const{locale:e,rtl:t}=(0,s.g)(this.hostElement);this.locale=e,this.dir=(0,s.a)(t),void 0===this.rfxTemplate&&void 0!==this.functionName&&(this.rfxTemplate=await(0,r.b)(this.functionName)),this.hasGlobalFunctionInRFT=await(0,r.h)(this.rfxTemplate,this.locale)}renderArgsEditor(){const{imageryLayers:e,featureLayers:t}=(0,n.q)(this.mapLayers);return(0,a.h)("rfx-args-editor",{ref:e=>this.editorComponent=e,rfxTemplate:this.rfxTemplate,imageryLayers:e,featureLayers:t,mapView:this.mapView,portal:this.portal,onRfxArgHelpClick:e=>{const{referenceElement:t,helpSrcdoc:i,heading:a}=e.detail;this.analysisRFxHelpPopoverChange.emit({referenceElement:t,helpSrcdoc:i,heading:a})},onRfxBrowseClick:e=>{this.analysisRFxBrowseLayerClick.emit(e.detail)},onRfxUnsupportedFunctionFound:e=>this.analysisUnsupportedFunction.emit(e.detail)})}renderPreviewElement(){return(0,a.h)("rfx-preview",{mapView:this.mapView,portal:this.portal,getTemplate:()=>this.getUpdatedRFTWithValues(),onRfxPreviewSelection:this.handlePreviewSelectionChange,onPreviewHelpClick:this.handlePreviewHelpClick,ref:e=>this.previewComponent=e})}render(){return(0,a.h)(a.H,null,!0===this.usePanel?(0,a.h)("calcite-panel",{dir:this.dir,heading:this.rfxTemplate.name,closable:!0,onCalcitePanelClose:()=>this.analysisToolClose.emit()},this.renderArgsEditor()):(0,a.h)("div",null,this.renderArgsEditor(),!1===this.hasGlobalFunctionInRFT?this.renderPreviewElement():void 0))}get hostElement(){return(0,a.a)(this)}static get watchers(){return{rfxTemplate:["onRfxTemplateChange"],mapLayers:["onMapLayersChange"]}}};i(22760),i(92123),i(25829),i(46717),i(55139),i(57098),i(91123),i(78979),i(46869),i(27703),i(826)}}]);