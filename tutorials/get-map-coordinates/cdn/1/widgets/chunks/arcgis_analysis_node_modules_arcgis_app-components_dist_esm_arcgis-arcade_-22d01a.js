/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-arcade_-22d01a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-arcade_-22d01a"],{87724:(e,a,r)=>{r.r(a),r.d(a,{arcgis_arcade:()=>i});var t=r(35110);const i=class{constructor(e){(0,t.r)(this,e),this.arcadeClosed=(0,t.c)(this,"arcadeClosed",7),this.sendPostMessage=e=>{var a,r;null===(r=null===(a=this.arcadeEditorInfo.arcadeEditor)||void 0===a?void 0:a.contentWindow)||void 0===r||r.postMessage(JSON.stringify(e),this.arcadeEditorInfo.editorUrl)},this.receiveMessage=e=>{if(e.stopPropagation(),-1===this.arcadeEditorInfo.editorUrl.indexOf(e.origin))return;const a="string"==typeof e.data?JSON.parse(e.data):e.data;switch(a.type){case"loaded":this.arcadeEditorInfo.editorFrameLoaded=a.value,this.arcadeEditorInfo.editorFrameLoaded&&this.sendPostMessage(this.objectForArcadeIFrame);break;case"initFinished":this.arcadeEditorInfo.editorFrameLoaded||console.log("editor app not loaded yet");break;case"scriptSaveAndClose":if(!a.script){this.doneArcade();break}this.doneArcade(a);break;case"scriptClose":this.doneArcade()}},this.arcadeEditorUrl=void 0,this.currentLanguage=void 0,this.objectForArcadeIFrame=void 0,this.currentArcadeFieldName=void 0}componentWillLoad(){console.warn("arcgis-arcade component is deprecated. Instead use arcgis-modal-arcade")}componentDidLoad(){this.arcadeEditorInfo={arcadeEditor:this.hostElement.shadowRoot.getElementById("arcadeFrame_Id"),editorFrameLoaded:!1,editorUrl:`${this.arcadeEditorUrl}?locale=${this.currentLanguage.toLowerCase()}`},this.arcadeEditorInfo.arcadeEditor.onload=()=>{this.arcadeEditorInfo.arcadeEditor.style.visibility="visible"},this.arcadeEditorInfo.arcadeEditor.src=this.arcadeEditorInfo.editorUrl,window.addEventListener("message",this.receiveMessage,!1);let e=0;this.arcadeEditorInfo.editorFrameListener=window.setInterval((()=>{this.arcadeEditorInfo.editorFrameLoaded?(window.clearInterval(this.arcadeEditorInfo.editorFrameListener),this.arcadeEditorInfo.editorFrameListener=null):this.sendPostMessage({type:"isLoaded"}),e++,e>60&&console.log("reject")}),500)}doneArcade(e){var a;window.clearInterval(this.arcadeEditorInfo.editorFrameListener),window.removeEventListener("message",this.receiveMessage),(null===(a=this.hostElement)||void 0===a?void 0:a.parentNode)&&(e?this.arcadeClosed.emit({arcadeExp:e,currentArcadeFieldName:this.currentArcadeFieldName}):this.arcadeClosed.emit())}render(){return(0,t.h)(t.H,null,(0,t.h)("div",{class:"arcade-div"},(0,t.h)("iframe",{id:"arcadeFrame_Id",class:"arcade-iframe"})))}get hostElement(){return(0,t.d)(this)}};i.style=".arcade-div{position:fixed;top:0px;right:0px;bottom:0px;left:0px;display:flex;justify-content:center;align-items:center;overflow-y:hidden;z-index:1001;transition:visibility 0ms linear 0.3s, opacity 0.3s cubic-bezier(0.215, 0.44, 0.42, 0.88) 0s}.arcade-iframe{border:none;width:100%;height:100%}"}}]);