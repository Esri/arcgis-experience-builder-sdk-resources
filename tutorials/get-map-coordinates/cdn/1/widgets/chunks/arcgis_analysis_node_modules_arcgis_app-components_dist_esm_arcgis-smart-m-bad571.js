/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-bad571.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-bad571"],{92052:(e,t,o)=>{o.r(t),o.d(t,{arcgis_smart_mapping_symbol_button:()=>c});var s=o(35110),i=o(59503),r=(o(21104),o(89393)),l=o(41657),n=o(79340),a=o(34448);o(86587),o(63280),o(1984),o(2137),o(23505),o(73838),o(50478);const c=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingSymbolButtonSymbolChange=(0,s.c)(this,"arcgisSmartMappingSymbolButtonSymbolChange",7),this.resizeObserver=new ResizeObserver((e=>{const t=e.pop();this.symbolNodeWidth=t.contentRect.width})),this.afterCreateSymbolDiv=(e,t)=>{var o;if(!t)return;const{modules:s}=i.s,{colors:r,symbol:l}=e,n=this.buttonNode,a=n?n.getBoundingClientRect().width:0;if(!n||a){for(;null===(o=null==t?void 0:t.childNodes)||void 0===o?void 0:o.length;)t.removeChild(t.childNodes[0]);if(r){const e=s.symbolUtils.renderColorRampPreviewHTML(r,{align:"horizontal",width:a?a-40:150,height:16});t.appendChild(e)}else if(l){const e=a?Math.round(s.screenUtils.px2pt(a-40)):110,o="simple-line"===l.type||"cim"===l.type&&"CIMLineSymbol"===l.data.symbol.type,i="simple-fill"===l.type||"cim"===l.type&&"CIMPolygonSymbol"===l.data.symbol.type,r="cim"===l.type&&!o&&!i,n=o?{width:e,height:"simple-line"===l.type?3:6}:i?{width:e,height:12}:r?16:14;s.symbolUtils.renderPreviewHTML(l,{size:n,symbolConfig:i?{isSquareFill:!0}:void 0}).then((e=>{t.style.height=i?"16px":r?"21px":"auto",t.appendChild(e)}))}}},this.handleClick=async()=>{const{internalPopoverReferenceElement:e,label:t,popoverNode:o,buttonNode:s}=this,{strings:r}=i.s;if(o)this.onPopoverClose();else{(0,i.l)(),this.selected=!0,document.createElement("div").className="symbol-styler-div",this.popoverNode=(0,a.c)({referenceElement:"string"==typeof e?document.getElementById(e):e,heading:t||r.styler.symbolStyle}),this.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverClose",(()=>{this.onPopoverClose(),setTimeout((()=>s.focus()),300)})),this.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverDisconnected",(()=>{this.onPopoverClose()}));const o=this.getOnClickCall();this.symbolStylerWatchScaleHandle=await o({popoverNode:this.popoverNode,onChange:()=>{(0,i.ab)(),this.arcgisSmartMappingSymbolButtonSymbolChange.emit()}})}},this.type=void 0,this.rampType=void 0,this.label=void 0,this.hideLabel=void 0,this.symbol=void 0,this.colors=void 0,this.width=void 0,this.popoverReferenceElement=void 0,this.selected=!1,this.symbolNodeWidth=void 0}async setFocus(){var e;null===(e=this.buttonNode)||void 0===e||e.focus()}disconnectedCallback(){this.onPopoverClose(),this.resizeObserver.unobserve(this.buttonNode)}componentDidLoad(){if(this.internalPopoverReferenceElement=this.popoverReferenceElement,!this.internalPopoverReferenceElement){const e=(0,r.q)(this.hostElement,"calcite-panel"),t=(0,r.q)(this.hostElement,"calcite-flow-item");this.internalPopoverReferenceElement=t||e}(0,s.f)(this.hostElement),this.resizeObserver.observe(this.buttonNode)}render(){const{label:e,width:t,hideLabel:o}=this,{strings:r}=i.s;return(0,s.h)(s.H,null,(0,s.h)("div",{class:"block-content-padding "+("half"===t?"half":"")},!o&&(0,s.h)("calcite-label",{id:"symbol-button-label"},e||r.styler.symbolStyle,this.renderSymbolButton()),o&&this.renderSymbolButton()))}renderSymbolButton(){const{rampType:e,symbol:t,colors:o,selected:r}=this,{layer:n,modules:a}=i.s;"raster-class-breaks"===((0,i.i)(n)?(0,l.g)():(0,i.g)())&&(null==o||o.forEach(((e,t)=>{0===e.r&&0===e.g&&0===e.b&&0===e.a&&(o[t]=new a.esriColor([255,255,255,0]))})));let c="discrete"===e&&(null==o?void 0:o.length)?o.map(((e,t)=>{var i;return(0,s.h)("div",{key:`symbol-button-icon-${t}`,class:"classed-color-icon-section",style:{width:95/Math.min(10,o.length)+"%",backgroundColor:`${null!==(i=null==e?void 0:e.toHex())&&void 0!==i?i:"#ffffff"}`}})})):null;const d=!e&&(0,i.aF)(t),h=(0,i.G)(n)||"point",p={"symbol-selector":!0,"symbol-is-white":(0,i.aq)(t),selected:r};return(0,s.h)("div",{class:p,onClick:this.handleClick,role:"button",tabIndex:0,"aria-labelledby":"symbol-button-label","aria-haspopup":"true","aria-expanded":!!r,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.handleClick())},ref:e=>this.buttonNode=e},d?this.renderTransparentSymbol(t):"discrete"===e?(0,s.h)("div",{class:"classed-color-icon","aria-hidden":"true"},c):(0,s.h)("div",{key:`${t||o}`,class:`symbol-icon ${h}`,style:{width:.95*this.symbolNodeWidth+"px"},ref:e=>{this.afterCreateSymbolDiv({colors:o,symbol:t},e),this.symbolNode=e},"aria-hidden":"true"}),(0,s.h)("div",{class:"symbol-edit-button"},(0,s.h)("calcite-icon",{scale:"s",icon:"pencil"})))}renderTransparentSymbol(e){return(0,s.h)("div",{key:e,class:"symbol-icon transparent","aria-hidden":"true",style:{width:.95*this.symbolNodeWidth+"px"},ref:e=>this.symbolNode=e},(0,s.h)("svg",{xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("defs",null,(0,s.h)("pattern",{id:"16cf9653474-widget-3-bg-fill",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"15",height:"15"},(0,s.h)("image",{x:"0",y:"0",width:"15",height:"15",href:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}))),(0,s.h)("rect",{x:"0",y:"0",fill:"url(#16cf9653474-widget-3-bg-fill)",height:"100%",width:"100%"}),(0,s.h)("rect",{x:"0",y:"0",fill:"url(#16cf9653474-widget-3-ramp-fill)",height:"100%",width:"100%"})))}getOnClickCall(){const{type:e}=this;switch(e){case"background":case"background":return a.o;case"simple":return a.y;case"size":return a.x;case"color-ramp":return a.w;case"relationship-ramp":return a.v;case"geo-rss-point":return a.u.bind(this,"point");case"geo-rss-line":return a.u.bind(this,"line");case"geo-rss-polygon":return a.u.bind(this,"polygon");case"dot-density-ramp":return a.t;case"dot-density-background":return a.q;case"dot-density-value":return a.b;case"heatmap-ramp":return a.p;case"predominance-ramp":return a.n;case"above":return a.m;case"below":return a.l;case"chart-ramp":return a.k;case"type-ramp":return a.j;case"raster-flow":return n.h;case"raster-stretch":return n.g;case"raster-shaded-relief":return n.f;case"raster-class-breaks":return n.e;case"raster-unique-value":return n.d;case"default":return a.i}}onPopoverClose(){var e;null===(e=this.symbolStylerWatchScaleHandle)||void 0===e||e.remove(),this.selected=!1,(0,a.r)(this.popoverNode),this.popoverNode=void 0}get hostElement(){return(0,s.d)(this)}};c.style=".half{width:49%}.symbol-selector{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.symbol-selector:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.symbol-selector:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.symbol-selector:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.symbol-selector.selected{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.symbol-icon{max-height:30px;overflow:hidden}.symbol-icon.transparent{height:15px;width:100%}.symbol-icon.transparent svg{height:15px;width:95%;stroke:#e0e0e0;stroke-width:1px}.symbol-is-white{background-color:#f3f3f3}.symbol-edit-button{padding:1px;height:18px;width:18px;border:none;cursor:pointer;color:var(--calcite-ui-icon-color)}.symbol-edit-button:focus{outline:none}.classed-color-icon{width:100%;height:16px;overflow:hidden;border-radius:0}.classed-color-icon-section{height:16px;display:inline-block}"}}]);