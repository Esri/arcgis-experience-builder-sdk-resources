/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-cab476.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-cab476"],{50478:(e,o,s)=>{s.d(o,{a:()=>i,b:()=>a,c:()=>r});var l=s(59503),t=(s(21104),s(89393));function r(e){var o;const{layer:s,useFeatureReduction:r,mapImageSublayer:i,mapView:a,modules:n}=l.s,c=s;e=e||{};const u=(0,l.p)((0,l.j)(c));return n.LocationCreator.createRenderer({layer:c,view:a,outlineOptimizationEnabled:!i&&(!(0,t.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!i&&(!(0,t.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),forBinning:"binning"===(null===(o=c.featureReduction)||void 0===o?void 0:o.type)&&r}).then((e=>((0,l.o)(u,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function i(){var e;const{layer:o,useFeatureReduction:s,mapView:t,modules:r}=l.s,i=o;return r.LocationCreator.createRenderer({layer:i,view:t,outlineOptimizationEnabled:!0,forBinning:"binning"===(null===(e=i.featureReduction)||void 0===e?void 0:e.type)&&s}).then((e=>{const o=(0,l.a)(e.renderer,"size","outline");return Promise.resolve(o)}))}function a(){var e;const{layer:o,useFeatureReduction:s,mapView:t,modules:r}=l.s,i=o;return r.LocationCreator.createRenderer({layer:i,view:t,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:"binning"===(null===(e=i.featureReduction)||void 0===e?void 0:e.type)&&s}).then((e=>{const o=(0,l.a)(e.renderer,"size","auto");return Promise.resolve(o)}))}},34448:(e,o,s)=>{s.d(o,{a:()=>P,b:()=>R,c:()=>y,d:()=>G,e:()=>I,f:()=>T,g:()=>z,h:()=>i,i:()=>k,j:()=>x,k:()=>B,l:()=>S,m:()=>C,n:()=>q,o:()=>v,p:()=>U,q:()=>w,r:()=>g,s:()=>a,t:()=>F,u:()=>E,v:()=>L,w:()=>A,x:()=>V,y:()=>O});var l=s(59503),t=(s(21104),s(2137),s(89393)),r=s(50478);function i(){const{mapView:e,layer:o}=l.s,s=(0,l.j)(o),r=s.authoringInfo,i="class-breaks"===s.type?s.classBreakInfos:s.uniqueValueInfos,a=(0,l.a)(s,"size"),n=!!a&&!(0,t.i)(a.minSize),c=!!a&&"number"==typeof a.minSize,u="above-and-below"===(null==r?void 0:r.univariateTheme);let p=2,m=20;if(a)if(u){const e=a.stops;[p,m]=[e[2].size,Math.max(e[0].size,e[4].size)]}else if(n){const e=a.stops;[p,m]=[e[0].size,e[e.length-1].size]}else if(c)[p,m]=[a.minSize,a.maxSize];else{const o=e.scale,s=a.minSize.stops,l=a.maxSize.stops;[p,m]=[s[s.length-1].size,l[l.length-1].size];for(let e=0;e<s.length;e++){const t=s[e],r=l[e];if(o<=t.value){if(e>0){let i=s[e-1],a=l[e-1];const n=(o-i.value)/(t.value-i.value);[p,m]=[i.size+(t.size-i.size)*n,a.size+(r.size-a.size)*n]}else[p,m]=[s[0].size,l[0].size];break}}}else if(i){const e=i[0].symbol,o=i[i.length-1].symbol;[p,m]=[(0,l.U)(e),(0,l.U)(o)],p>m&&([p,m]=[m,p])}return[p,m]}function a(e){const{mapView:o,layer:s,modules:r}=l.s,a=(0,l.j)(s),n=(0,l.a)(a,"size");let c=e[0],u=(0,t.i)(e[1])?e[1]:c;if(n){const s=a.authoringInfo,l="above-and-below"===(null==s?void 0:s.univariateTheme),p=!!n&&!(0,t.i)(n.minSize),m=!!n&&"number"==typeof n.minSize;let[d,y]=i();const g=d>y;if(!g&&c>=y?c=y-.75:g&&c>=d&&(c=d-.75),!g&&d>=u?u=d+.75:g&&y>=u&&(u=y+.75),l){const o=n.stops,s=g?e[1]:e[0],l=g?e[0]:e[1],t=Math.max(...o.map((e=>e.value))),r=o[2].value,i=Math.min(...o.map((e=>e.value))),a=Math.abs(t-r),c=Math.abs(i-r),u=a>c?a:c,p=l-s;o.forEach((e=>{const{value:o}=e;e.size=Math.abs(o-r)/u*p+s}))}else if(p){const e=n.stops;n.stops=null,n.minSize=c,n.maxSize=u,n.minDataValue=e[0].value,n.maxDataValue=e[e.length-1].value}else if(m)g?(n.maxSize=c,n.minSize=u):(n.minSize=c,n.maxSize=u);else{const e=o.scale;let s=r.esriLang.clone(n.minSize.stops),l=r.esriLang.clone(n.maxSize.stops);g&&([s,l]=[l,s]);let t=c/s[s.length-1].size,i=u/l[l.length-1].size;for(let o=0;o<s.length;o++){const r=s[o],a=l[o];if(e<=r.value){if(o>0){let n=s[o-1],p=l[o-1];const m=(e-n.value)/(r.value-n.value),[d,y]=[n.size+(r.size-n.size)*m,p.size+(a.size-p.size)*m];t=c/d,i=u/y}else t=c/s[0].size,i=u/l[0].size;break}}s.forEach((e=>e.size=Math.round(t*e.size*10)/10)),l.forEach((e=>e.size=Math.round(i*e.size*10)/10)),g&&([s,l]=[l,s]),n.minSize.stops=s,n.maxSize.stops=l}}else{const e=a.classBreakInfos[0].symbol,o=a.classBreakInfos[a.classBreakInfos.length-1].symbol;let s=(0,l.U)(e),t=(0,l.U)(o),r=!1;s>t&&([s,t]=[t,s],r=!0),s!==t&&c>t&&(c=t-.75),s=c,s!==t&&s>u&&(u=s+.75),t=u;const i=1===a.classBreakInfos.length?1:Math.max(t-s,10)/(a.classBreakInfos.length-1);a.classBreakInfos.forEach(((e,o)=>{const a=e.symbol;r?(0,l.V)(a,t-i*o):(0,l.V)(a,s+i*o)}))}}function n(e,o){const s=e.stops,l=s.length-1,t=s[0].value,r=s[l].value;if(o<=t)return s[0].size;if(o>=r)return s[l].size;for(let e=0;e<=l;e++){const l=s[e],t=s[e+1];if(o>=l.value&&o<t.value){const e=t.value-l.value,s=l.size-t.size,r=(o-l.value)/e,i=l.size-s*r;return Math.round(100*i)/100}}return 1}let c;const u="polygon";function p(){const{modules:e}=l.s;return[new e.esriColor([255,255,255]),new e.esriColor([178,178,178]),new e.esriColor([128,128,128]),new e.esriColor([92,92,92]),new e.esriColor([77,77,77]),new e.esriColor([51,51,51]),new e.esriColor([26,26,26])]}function m(){const{modules:e}=l.s;return[new e.esriColor("#ff4040"),new e.esriColor("#ff8200"),new e.esriColor("#faa83f"),new e.esriColor("#ffd159"),new e.esriColor("#74b566"),new e.esriColor("#008977"),new e.esriColor("#33e3c8"),new e.esriColor("#43abeb"),new e.esriColor("#4c64c9"),new e.esriColor("#9868ed"),new e.esriColor("#b155e6"),new e.esriColor("#db5181"),new e.esriColor("#e03b99"),new e.esriColor("#2b2b2b"),new e.esriColor("#bdbdbd"),new e.esriColor("#ffffff")]}function d(){return m().reverse()}function y(e){const{referenceElement:o,heading:s}=e,l=document.createElement("arcgis-smart-mapping-styler-popover");return l.referenceElement=o,l.heading=s,document.body.appendChild(l),l.open=!0,l.reposition(),l}function g(e){var o;(null==e?void 0:e.parentNode)&&(e.open=!1,null===(o=e.parentNode)||void 0===o||o.removeChild(e))}async function b(e){const o=document.createElement("arcgis-symbol-styler");return o.initialSourceId=c,o.style="max-height: max(calc(100vh - 200px), 300px)",o.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:l.s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await e.getPopoverRefElement()},o.addEventListener("arcgisSymbolStylerSourceIdChange",(({detail:e})=>c=e)),o}function f(e,o,s){return document.URL.indexOf("debug=true")>-1&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify(Object.assign(Object.assign({},s),{portal:"..."})))),e.edit(o,s)}function h(e,o){const{symbol:s,info:{marker:l,stroke:t,fill:r}}=o.detail;document.URL.indexOf("debug=true")>-1&&(console.log("onStylerEdit - symbol:",JSON.stringify(null==s?void 0:s.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(t)),console.log("onStylerEdit - info.fill:",JSON.stringify(r))),e(o)}async function v(e){const{layer:o,mapImageSublayer:s,portal:t,modules:r}=l.s,{onChange:i,popoverNode:a}=e,n=(0,l.j)(o),c=(0,l.u)(o),u="pie-chart"===(0,l.j)(o).type,m=(0,l.a)(n,"size"),d=(0,l.a)(n,"size","outline");let y=n.backgroundFillSymbol;y||(y=new r.SimpleFillSymbol,y.color=null,(0,l.j)(o).backgroundFillSymbol=y,i());const g=!!y.color,v=(0,l.a6)(y),w=p(),k=p();let z;z=y.outline?{color:y.outline.color?y.outline.color:new r.esriColor([0,0,0,.5]),size:y.outline.width,style:y.outline.style,autoAdjusted:!!d}:{color:new r.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!d},y.outline||(y.outline=new r.SimpleLineSymbol,(0,l.v)(y,new r.esriColor([0,0,0,0])));const C=await b(a),S=f(C,r.esriLang.clone(y),{portal:t,symbolFilter:"simple",sections:{fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:w},stroke:{type:"color",optional:!0,suggestedColors:k,extraParts:{width:!0,autoStrokeAdjust:!(s||c&&u&&!m)&&"editable"}}},fill:{color:y.color?y.color:new r.esriColor([0,0,0,.5])},stroke:z,fillEnabled:g,strokeEnabled:v});return C.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{(0,l.j)(o).backgroundFillSymbol=s,M(s,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,C,e)}))),a.addStyler(C),await S,_(y,C)}async function w(e){var o;const{layer:s,mapImageSublayer:t,portal:r,modules:i}=l.s,{popoverNode:a}=e,n=(0,l.j)(s),c=(0,l.a)(n,"size","outline"),u=!!n.backgroundColor,m=!!(null===(o=n.outline)||void 0===o?void 0:o.color),d=p(),y=p();let g;g=n.outline?{color:n.outline.color?n.outline.color:new i.esriColor([0,0,0,.5]),size:n.outline.width,style:n.outline.style,autoAdjusted:!!c}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!c};const v=new i.SimpleFillSymbol;v.color=(0,l.j)(s).backgroundColor,v.outline=(0,l.j)(s).outline;const w=await b(a),k=f(w,i.esriLang.clone(v),{portal:r,symbolFilter:"simple",sections:{fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:d},stroke:{type:"color",optional:!0,suggestedColors:y,extraParts:{width:!0,autoStrokeAdjust:!t&&"editable"}}},fill:{color:n.backgroundColor?n.backgroundColor:new i.esriColor([0,0,0,.5])},stroke:g,fillEnabled:u,strokeEnabled:m});w.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:t,stroke:r}}})=>{(0,l.j)(s).backgroundColor=(0,l.w)(o),(0,l.j)(s).outline=o.outline,M(o,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,w,e)}))),a.addStyler(w),await k;const z=new i.SimpleFillSymbol;return z.color=n.backgroundColor,z.outline=n.outline,_(z,w)}async function k(e){const{onChange:o,popoverNode:s}=e,{layer:t,mapView:r,portal:i,modules:a}=l.s,n=(0,l.D)(t),c=(0,l.E)(t),u=(0,l.u)(t),m=(0,l.j)(t),d=(0,l.g)(),y=(0,l.a)(m,"size","auto"),g=(0,l.a)(m,"size","outline");let v=m.defaultSymbol;K(v)||(v=(0,l.T)(t,r,d));const w="picture-marker"!==v.type&&!!v.color,k=(0,l.a6)(v),z="cim"===v.type&&"CIMPointSymbol"===v.data.symbol.type,C=p(),S=p();let j;if(v||(v=u?new a.SimpleFillSymbol:c?new a.SimpleLineSymbol:new a.SimpleMarkerSymbol),"simple-fill"===v.type){const e=v;if(e.outline){const o=e.outline;j={color:o.color?o.color:new a.esriColor([0,0,0,.5]),size:o.width,style:o.style,autoAdjusted:!!g}}else j={color:new a.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!g}}else if("simple-line"===v.type){const e=v;j={color:e.color?e.color:new a.esriColor([0,0,0,.5]),size:e.width,style:e.style,marker:e.marker}}else if("simple-marker"===v.type&&v.outline){const e=v.outline;j={color:e.color?e.color:new a.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else j="cim"===v.type?H(v):{color:new a.esriColor([255,255,255,.5]),size:1};const O=await b(s);let E;E=f(O,a.esriLang.clone(v),c?{portal:i,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:S,extraParts:{width:!y,autoStrokeAdjust:!1}}},stroke:j}:{portal:i,symbolFilter:u&&!(0,l.a9)()?"simple":void 0,sections:{marker:z||["simple-marker","picture-marker"].indexOf(v.type)>-1?{open:!0,parts:{size:!y},symbolsOpen:!0,sizeOpen:!0,markerType:(0,l.a9)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:C},stroke:{type:"color",optional:!0,suggestedColors:S,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(v.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.w)(v)||new a.esriColor([128,128,128])},marker:n?{size:(0,l.U)(v)}:void 0,stroke:j,fillEnabled:w,strokeEnabled:k}),O.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{(0,l.j)(t).defaultSymbol=e,o()}))),s.addStyler(O),await E}async function z(e){var o,s;const{layer:t,mapImageSublayer:r,mapView:i,classedSymbolSelectedIdx:a,portal:c,modules:u}=l.s,{onChange:p,popoverNode:y}=e,g=(0,l.D)(t),v=(0,l.E)(t),w=(0,l.u)(t),k=(0,l.j)(t),z=(0,l.g)(),C=(0,l.a)(k,"size","auto"),S=(0,l.a)(k,"size","outline");let j=(null===(o=k.classBreakInfos)||void 0===o?void 0:o.length)?u.esriLang.clone(k.classBreakInfos[a].symbol):(0,l.T)(t,i,z);K(j)||(j=(0,l.T)(t,i,z)),C&&(0,l.V)(j,n(C,i.scale));const O="picture-marker"!==j.type&&!!j.color,E=(0,l.a6)(j),V="cim"===j.type&&"CIMPointSymbol"===j.data.symbol.type,A=m(),x=d();let I;if("simple-fill"===j.type){const e=j;I=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===j.type){const e=j;I=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===j.type)I=H(j);else if("simple-line"===j.type){const e=j;I={size:e.width,style:e.style,marker:e.marker,color:e.color?e.color:new u.esriColor([0,0,0,.5])}}else I={color:new u.esriColor([255,255,255,.5]),size:1};const T=await b(y);let L;if(L=f(T,u.esriLang.clone(j),v?{portal:c,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:A,extraParts:{style:"cim"!==j.type,arrow:"cim"!==j.type,width:"size"!==z,autoStrokeAdjust:!r&&"size"!==z&&"editable"},parts:{extra:"size"!==z&&!C||"cim"!==j.type}}},stroke:I}:{portal:c,symbolFilter:w&&!(0,l.a9)()?"simple":void 0,sections:{marker:V||["simple-marker","picture-marker"].indexOf(j.type)>-1?{open:!0,parts:{size:"size"!==z&&(!!r||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:"size"!==z,markerType:(0,l.a9)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(j),suggestedColors:A},stroke:{type:"color",optional:!0,suggestedColors:x,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(j.type),width:!0,autoStrokeAdjust:!(r||!w||"cim"===j.type||"size"===z)&&"editable"}}},fill:{color:(0,l.w)(j)||W(A[1],.85)},marker:g?{size:(0,l.U)(j),autoAdjusted:!!C}:void 0,stroke:I,fillEnabled:O,strokeEnabled:E}),T.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:r}}})=>{const i=(0,l.j)(t),n=i.classBreakInfos.slice(),c=n[a],u=(0,l.U)(c.symbol);c.symbol=o,i.classBreakInfos=n,"size"===z?((0,l.V)(c.symbol,u),p()):M(o,null==s?void 0:s.autoAdjusted,null==r?void 0:r.autoAdjusted,T,e)}))),y.addStyler(T),await L,"size"!==z)return _((null===(s=k.classBreakInfos)||void 0===s?void 0:s.length)?k.classBreakInfos[0].symbol:void 0,T)}async function C(e){await j(Object.assign(Object.assign({},e),{type:"above"}))}async function S(e){await j(Object.assign(Object.assign({},e),{type:"below"}))}async function j(e){var o,s;const{layer:t,mapView:r,portal:i,modules:a}=l.s,{onChange:n,popoverNode:c}=e,u=(0,l.j)(t),p=(0,l.a)(u,"color"),y="above"===e.type;let g=(null===(s=null===(o=u.classBreakInfos)||void 0===o?void 0:o[y?1:0])||void 0===s?void 0:s.symbol)||(0,l.T)(t,r,"color-size");K(g)||(g=(0,l.T)(t,r,"color-size"));const v="picture-marker"!==g.type&&!!g.color,w=(0,l.a6)(g),k=m(),z="simple-line"===g.type?m():d();let C;if("simple-marker"===g.type){const e=g;C=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===g.type){const e=g;C={color:e.color,size:e.width,style:e.style,marker:e.marker}}else C="cim"===g.type?H(g):{color:new a.esriColor([255,255,255,.5]),size:1};const S=await b(c),j=f(S,a.esriLang.clone(g),{portal:i,sections:{marker:p&&["simple-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.a9)()?["simple","cim:vector"]:["simple"]}:!p&&["simple-marker","picture-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1}:void 0,fill:p?void 0:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(g),suggestedColors:k},stroke:p?void 0:{type:"color",optional:!0,suggestedColors:z,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(g.type),width:!0,autoStrokeAdjust:!1}}},fill:p?void 0:{color:(0,l.w)(g)||W(k[1],.85)},marker:{size:(0,l.U)(g)},stroke:C,fillEnabled:v,strokeEnabled:w});S.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.j)(t);o.authoringInfo.univariateSymbolStyle="custom";const s=o.classBreakInfos.slice();s[y?1:0].symbol=e,o.classBreakInfos=s,n()}))),c.addStyler(S),await j}async function O(e){const{layer:o,mapImageSublayer:s,mapView:t,portal:r,modules:i}=l.s,{popoverNode:a}=e,c="ogc-feature"===o.type,u=(0,l.D)(o),p=(0,l.E)(o),y=(0,l.u)(o),g=(0,l.j)(o),v=(0,l.a)(g,"size","auto"),w=(0,l.a)(g,"size","outline");let k=g.symbol;K(k)||(k=(0,l.T)(o,t));const z="picture-marker"!==k.type&&!!k.color,C=(0,l.a6)(k),S="cim"===k.type&&"CIMPointSymbol"===k.data.symbol.type,j=m(),O="simple-line"===k.type?m():d();let E;if("simple-fill"===k.type){const e=k;E=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!w}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===k.type){const e=k;E=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===k.type){const e=k;E={color:e.color,size:v?n(v,t.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!v}}else"cim"===k.type?(E=H(k),p&&(E.size=v?n(v,t.scale):E.size,E.autoAdjusted=!!v,v&&(0,l.V)(k,E.size))):E={color:new i.esriColor([255,255,255,.5]),size:1};const V=await b(a);let A;return A=f(V,i.esriLang.clone(k),p?{portal:r,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color",optional:"cim"===k.type,open:!0,suggestedColorsOpen:!0,suggestedColors:O,extraParts:{style:"cim"!==k.type,arrow:"cim"!==k.type,width:!0,autoStrokeAdjust:!c&&!s&&"editable"}}},stroke:E}:{portal:r,symbolFilter:y&&!(0,l.a9)()?"simple":void 0,sections:{marker:S||["simple-marker","picture-marker"].indexOf(k.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,parts:{size:{autoSizeAdjust:!c&&!s&&"editable"}},markerType:(0,l.a9)()?"all":["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(k),suggestedColors:j},stroke:{type:"color",optional:!0,suggestedColors:O,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(k.type),width:!0,autoStrokeAdjust:!(c||s||!y||"cim"===k.type)&&"editable"}}},fill:{color:(0,l.w)(k)||W(j[1],.85)},marker:u?{size:v?n(v,t.scale):(0,l.U)(k),autoAdjusted:!s&&!!v}:void 0,stroke:E,fillEnabled:z,strokeEnabled:C}),V.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{(0,l.j)(o).symbol=s,M(s,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,V,e)}))),a.addStyler(V),await A,_(g.symbol,V)}async function E(e,o){const{layer:s,mapView:t,portal:r,modules:i}=l.s,{onChange:a,popoverNode:n}=o,c=s,u="point"===e,p="line"===e;let y=u?c.pointSymbol:p?c.lineSymbol:c.polygonSymbol;K(y)||(y=(0,l.ah)(t,e));const g="picture-marker"!==y.type&&!!y.color,v=(0,l.a6)(y),w=m(),k="simple-line"===y.type?m():d();let z;if("simple-fill"===y.type){const e=y;z=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!1}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===y.type){const e=y;z=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===y.type){const e=y;z={color:e.color,size:e.width,style:e.style,marker:e.marker,autoAdjusted:!1}}else z={color:new i.esriColor([255,255,255,.5]),size:1};const C=await b(n);let S;S=f(C,i.esriLang.clone(y),p?{portal:r,sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:k,extraParts:{width:!0,autoStrokeAdjust:!1}}},stroke:z}:{portal:r,sections:{marker:["simple-marker","picture-marker"].indexOf(y.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,markerType:["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(y),suggestedColors:w},stroke:{type:"color",optional:!0,suggestedColors:k,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(y.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.w)(y)||W(w[1],.85)},marker:u?{size:(0,l.U)(y),autoAdjusted:!1}:void 0,stroke:z,fillEnabled:g,strokeEnabled:v}),C.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{u?c.pointSymbol=e:p?c.lineSymbol=e:c.polygonSymbol=e,a()}))),n.addStyler(C),await S}async function V(e){var o,s;const{layer:t,mapView:r,portal:i,modules:a}=l.s,{onChange:n,popoverNode:c}=e,u=(0,l.E)(t),p=(0,l.j)(t),y=(0,l.g)(),g=(0,l.a)(p,"color");let v;if(["type-size","type-size-age","predominance-size","relationship-size"].indexOf(y)>-1){const e=(0,l.j)(t);v=(null===(o=e.uniqueValueInfos)||void 0===o?void 0:o.length)?e.uniqueValueInfos[0].symbol:(0,l.T)(t,r,y)}else v=(null===(s=p.classBreakInfos)||void 0===s?void 0:s.length)?p.classBreakInfos[0].symbol:(0,l.T)(t,r,y);K(v)||(v=(0,l.T)(t,r,y));const w="picture-marker"!==v.type&&!!v.color,k=(0,l.a6)(v),z="cim"===v.type&&"CIMPointSymbol"===v.data.symbol.type,C=m(),S="simple-line"===v.type?m():d();let j;if("simple-fill"===v.type){const e=v;j=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style}:{color:new a.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===v.type){const e=v;j=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===v.type){const e=v;j={color:e.color,size:e.width,style:e.style,marker:e.marker}}else j="cim"===v.type?H(v):{color:new a.esriColor([255,255,255,.5]),size:1};const O=await b(c);let E;E=["color-size","color-age-size","color-size-age","type-size","type-size-age","predominance-size","relationship-size"].indexOf((0,l.g)())>-1?f(O,a.esriLang.clone(v),u?{portal:i,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraOpen:!0,extraParts:{style:"cim"!==v.type,arrow:"cim"!==v.type,width:!1,autoStrokeAdjust:!1},suggestedColors:S,parts:{suggestedColors:!1,customColor:!1,transparency:!0,extra:"cim"!==v.type}}},stroke:j}:{portal:i,sections:{marker:z||["simple-marker","picture-marker"].indexOf(v.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.a9)()?["simple","cim:vector"]:["simple"]}:void 0,stroke:{type:"color",open:!0,optional:!0,suggestedColors:S,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(v.type),width:!0,autoStrokeAdjust:!1}}},marker:{size:(0,l.U)(v)},stroke:j,strokeEnabled:k}):f(O,a.esriLang.clone(v),u?{portal:i,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraParts:{style:"cim"!==v.type,arrow:"cim"!==v.type,width:!1,autoStrokeAdjust:!1},suggestedColorsOpen:!0,suggestedColors:S,parts:{extra:"cim"!==v.type}}},stroke:j}:{portal:i,sections:{marker:z||["simple-marker","picture-marker"].indexOf(v.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.a9)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(v),suggestedColors:C},stroke:{type:"color",optional:!0,suggestedColors:S,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(v.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.w)(v)||W(C[1],.85)},marker:{size:(0,l.U)(v)},stroke:j,fillEnabled:w,strokeEnabled:k}),O.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.j)(t);if(o.classBreakInfos){let s=o.classBreakInfos;if(!s||!s.length)return;s=s.slice(),s.forEach((s=>{const t=(0,l.U)(s.symbol),r=(0,l.w)(s.symbol);s.symbol=e.clone(),g?(0,l.v)(s.symbol,new a.esriColor([0,0,0,.5])):o.uniqueValueInfos&&(0,l.v)(s.symbol,r),(0,l.V)(s.symbol,t)})),o.classBreakInfos=s}else{let s=o.uniqueValueGroups;if(!(s&&s.length&&s[0].classes&&s[0].classes.length))return;s=s.slice(),s.forEach((o=>{o.classes.forEach((o=>{const s=(0,l.U)(o.symbol),t=(0,l.w)(o.symbol);o.symbol=e.clone(),g?(0,l.v)(o.symbol,new a.esriColor([0,0,0,.5])):(0,l.v)(o.symbol,t),(0,l.V)(o.symbol,s)}))})),o.uniqueValueGroups=s}n()}))),c.addStyler(O),await E}async function A(e){var o,s,t,r;const{layer:i,mapImageSublayer:a,mapView:c,portal:p,modules:m}=l.s,{onChange:y,popoverNode:g}=e,v=(0,l.D)(i),w=(0,l.E)(i),k=(0,l.u)(i),z=(0,l.j)(i),C=z.authoringInfo,S=(0,l.g)(),j="univariate-color-size"===(null==C?void 0:C.type),O="above-and-below"===(null==C?void 0:C.univariateTheme),E=O&&!C.univariateSymbolStyle,V=(0,l.a)((0,l.j)(i),"color"),A=(0,l.a)(z,"size","auto"),x=(0,l.a)(z,"size","outline"),I=["color-size","color-age-size","color-size-age"].indexOf(S)>-1,T=(0,l.t)((0,l.j)(i),"color");let L,q=V?V.stops.map((e=>e.color)):z.classBreakInfos.map((e=>{var o;return(null===(o=(0,l.w)(e.symbol))||void 0===o?void 0:o.clone())||new m.esriColor([0,0,0,0])}));q.length>10&&(q=q.slice(0,10)),q.reverse();let G=(null===(o=z.classBreakInfos)||void 0===o?void 0:o.length)?z.classBreakInfos[0].symbol:(0,l.T)(i,c);if(!K(G)||(!O||E)&&!Q(G)){const e=null!==(s=(0,l.U)(G))&&void 0!==s?s:G.width;G=(0,l.T)(i,c,S),(0,l.V)(G,e)}const B=!(O&&!V&&"picture-marker"===G.type&&"picture-marker"===(null===(t=z.classBreakInfos[1].symbol)||void 0===t?void 0:t.type)),P=(0,l.a6)(G),F="cim"===G.type&&"CIMPointSymbol"===G.data.symbol.type,R=await m.colorUtils.getBackgroundColorTheme(c),U=m.colorSchemes.getSchemes({basemapTheme:R,geometryType:(0,l.G)(i)||u,theme:(null==C?void 0:C.univariateTheme)||(null==T?void 0:T.theme)||"high-to-low"});if(!V){const e=m.colorSchemes.getSchemes({basemap:c.map.basemap||"topo",geometryType:(0,l.G)(i)||u,theme:"above-and-below"});U.secondarySchemes.push(e.primaryScheme),U.secondarySchemes=U.secondarySchemes.concat(e.secondarySchemes)}const N=V?0:z.classBreakInfos.length;let D=(0,l.aa)(U,N);D=D.filter((e=>{var o;return null===(o=e.colors)||void 0===o?void 0:o.length}));const J=D.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),W=d();let X;if("simple-fill"===G.type){const e=G;X=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!x}:{color:new m.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!x}}else if("simple-marker"===G.type){const e=G;X=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new m.esriColor([0,0,0,.5]),size:1}}else if("cim"===G.type)X=H(G),w&&(X.size=A?n(A,c.scale):X.size,X.autoAdjusted=!!A,A&&(0,l.V)(G,X.size));else if("simple-line"===G.type){const e=G;X={color:new m.esriColor([255,255,255,.5]),size:A?n(A,c.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!A}}else X={color:new m.esriColor([255,255,255,.5]),size:1};const Y=await b(g);let Z;return(0,l.v)(G,q[q.length-1]),(I||v||w)&&A?(0,l.V)(G,n(A,c.scale)):k&&A&&G.outline&&(G.outline.width=n(A,c.scale)),L=G.clone(),Z=w?f(Y,m.esriLang.clone(G),{portal:p,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:V?"continuous":"discrete",colorRamps:J,open:!0,colorRampsOpen:!0,extraParts:{style:"cim"!==G.type,arrow:"cim"!==G.type,autoStrokeAdjust:!a&&!I&&"editable",width:!I},parts:{extra:!I||"cim"!==G.type}}},stroke:Object.assign(Object.assign({},X),{color:q})}):f(Y,!O||E?m.esriLang.clone(G):(0,l.T)(i,c),{portal:p,symbolFilter:k&&!(0,l.a9)()?"simple":void 0,sections:{marker:O&&!E||!(F||["simple-marker","picture-marker"].indexOf(G.type)>-1)?O&&!E?{parts:{preview:!1,rotation:!1,size:!1}}:void 0:{open:!0,parts:{size:!I&&(!!a||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!I,markerType:(0,l.a9)()?["simple","cim:vector"]:["simple"]},fill:{type:"color-ramp",style:V?"continuous":"discrete",open:!(0,l.ai)(G),colorRampsOpen:!(0,l.ai)(G),colorRamps:J},stroke:!O||E?{type:"color",optional:!0,open:!1,suggestedColors:W,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(G.type),width:!0,autoStrokeAdjust:!(a||!k||"cim"===G.type||I)&&"editable"}}:void 0},fill:{color:q},marker:O&&!E||!I&&!v?void 0:{size:A?n(A,c.scale):(0,l.U)(G),autoAdjusted:!!A},stroke:X,strokeEnabled:P,fillEnabled:B}),Y.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:r}}})=>{const a=(0,l.j)(i),n=(0,l.a)(a,"color");let c=m.esriLang.clone((r||t).color);const u=q[0],p=q.length!==c.length||q.some(((e,o)=>e.r!==c[o].r||e.g!==c[o].g||e.b!==c[o].b))||u.r!==c[0].r||u.g!==c[0].g||u.b!==c[0].b,d=u.a!==c[0].a,g=c[0].a,b=(0,l.am)(o,L);if(p&&!b.any&&(b.any=!0,b.color=!0),j&&O||c.reverse(),!O||E){if(b.any){const e=a.classBreakInfos.slice();e.forEach(((e,s)=>{e.symbol=(0,l.an)(e.symbol,o,p&&!n?c[s%c.length]:d&&!n?(0,l.ao)((0,l.w)(e.symbol),g):(0,l.w)(e.symbol)||new m.esriColor([0,0,0,0]),b)})),a.classBreakInfos=e}}else if(!n){c.reverse();const e=a.classBreakInfos.slice();e.forEach(((e,o)=>{(0,l.v)(e.symbol,c[o])})),a.classBreakInfos=e}if(n){if(q.length!==c.length&&5===c.length){const e=n.stops.length,o=[];o[0]=n.stops[0],o[1]=n.stops[Math.floor(e/4)],o[2]=n.stops[Math.floor(e/2)],o[3]=n.stops[e-Math.ceil(e/4)],o[4]=n.stops[e-1],n.stops=o}n.stops.forEach(((e,o)=>{e.color=c[o]}));const e=a.classBreakInfos.slice();(0,l.v)(e[0].symbol,new m.esriColor([170,170,170,1])),a.classBreakInfos=e}I?y():M(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,Y,e),L=o.clone(),q=n?n.stops.map((e=>e.color)):a.classBreakInfos.map((e=>(0,l.w)(e.symbol)||new m.esriColor([0,0,0,0]))).reverse()}))),g.addStyler(Y),await Z,_((null===(r=z.classBreakInfos)||void 0===r?void 0:r.length)?z.classBreakInfos[0].symbol:void 0,Y,(e=>{k&&G.outline?G.outline.width=e:!k&&(0,l.V)(G,e),L=G.clone()}))}async function x(e){var o,s,t,r,i;const{layer:a,mapImageSublayer:c,mapView:p,portal:m,modules:y}=l.s,{onChange:g,popoverNode:v}=e,w=(0,l.D)(a),k=(0,l.E)(a),z=(0,l.u)(a),C=(0,l.j)(a),S=(0,l.g)(),j=["type-size","type-size-age"].indexOf(S)>-1,O=(0,l.a)(C,"size","auto"),E=(0,l.a)(C,"size","outline"),V=C.uniqueValueGroups;let A,x=[];const I=V.length?V[V.length-1]:void 0;let T=(null===(o=null==I?void 0:I.classes)||void 0===o?void 0:o.length)&&(null===(s=(0,l.w)(I.classes[I.classes.length-1].symbol))||void 0===s?void 0:s.a)||1;V.forEach((e=>x=x.concat(e.classes.map((e=>(0,l.w)(e.symbol)||new y.esriColor([0,0,0,T])))))),x.reverse(),x.length>10&&(x=x.slice(0,10));const L=y.typeSchemes.getSchemes({basemap:p.map.basemap,geometryType:(0,l.G)(a)||u});let q=(null===(t=C.uniqueValueGroups)||void 0===t?void 0:t.length)&&C.uniqueValueGroups[0].classes.length?y.esriLang.clone(C.uniqueValueGroups[0].classes[0].symbol):(0,l.T)(a,p,S);if(!Q(q)){const e=null!==(r=(0,l.U)(q))&&void 0!==r?r:q.width;q=(0,l.T)(a,p,S),(0,l.V)(q,e)}const G=(0,l.a6)(q),B="cim"===q.type&&"CIMPointSymbol"===q.data.symbol.type;let P=0;V.forEach((e=>P+=e.classes.length));const F=(0,l.aa)(L,Math.min(P,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),R=d();let U;if("simple-fill"===q.type){const e=q;U=e.outline?{color:e.outline.color?e.outline.color:new y.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!E}:{color:new y.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!E}}else if("simple-marker"===q.type){const e=q;U=e.outline?{color:e.outline.color?e.outline.color:new y.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new y.esriColor([0,0,0,.5]),size:1}}else if("cim"===q.type)U=H(q),k&&(U.size=O?n(O,p.scale):U.size,U.autoAdjusted=!!O,O&&(0,l.V)(q,U.size));else if("simple-line"===q.type){const e=q;U={color:x[x.length-1],size:O?n(O,p.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!O}}else U={color:new y.esriColor([255,255,255,.5]),size:1};const N=await b(v);let D;return(0,l.v)(q,x[x.length-1]),(j||w||k)&&O?(0,l.V)(q,n(O,p.scale)):z&&O&&q.outline&&(q.outline.width=n(O,p.scale)),A=q.clone(),D=f(N,y.esriLang.clone(q),k?{portal:m,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:F,extraParts:{style:"cim"!==q.type,arrow:"cim"!==q.type,autoStrokeAdjust:!c&&!j&&"editable",width:!j},parts:{extra:!j||"cim"!==q.type}}},stroke:Object.assign(Object.assign({},U),{color:x})}:{portal:m,symbolFilter:z&&!(0,l.a9)()?"simple":void 0,sections:{marker:B||["simple-marker","picture-marker"].indexOf(q.type)>-1?{open:!!(0,l.ai)(q),parts:{size:!j&&(!!c||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!j,markerType:(0,l.a9)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.ai)(q),colorRampsOpen:!(0,l.ai)(q),colorRamps:F},stroke:{type:"color",optional:!0,open:!1,suggestedColors:R,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(q.type),width:!0,autoStrokeAdjust:!(c||!z||"cim"===q.type||j)&&"editable"}}},fill:{color:x},marker:j||w?{size:O?n(O,p.scale):(0,l.U)(q),autoAdjusted:!!O}:void 0,stroke:U,strokeEnabled:G}),N.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:r}}})=>{const i=y.esriLang.clone((r||t).color),n=x[0],c=x.length!==i.length||x.some(((e,o)=>e.r!==i[o].r||e.g!==i[o].g||e.b!==i[o].b))||n.r!==i[0].r||n.g!==i[0].g||n.b!==i[0].b,u=n.a!==i[0].a,p=i[0].a;i.reverse();const m=(0,l.j)(a),d=(0,l.am)(o,A);if(c&&!d.any&&(d.any=!0,d.color=!0),d.any){const e=m.uniqueValueGroups.slice();let s=0;e.forEach((e=>{e.classes.forEach(((e,t)=>{"picture-marker"===e.symbol.type&&(c||u)&&(e.symbol=y.esriLang.clone(o),(0,l.v)(e.symbol,i[(s+t)%i.length])),e.symbol=(0,l.an)(e.symbol,o,c?i[(s+t)%i.length]:u?(0,l.ao)((0,l.w)(e.symbol),p):(0,l.w)(e.symbol)||new y.esriColor([0,0,0,0]),d)})),s+=e.classes.length})),m.uniqueValueGroups=e}j?g():M(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,N,e),A=o.clone(),c&&(x=[],m.uniqueValueGroups.forEach((e=>x=x.concat(e.classes.map((e=>(0,l.w)(e.symbol)||new y.esriColor([0,0,0,0])))))),x.reverse(),x.length>10&&(x=x.slice(0,10)))}))),v.addStyler(N),await D,_((null===(i=C.uniqueValueGroups)||void 0===i?void 0:i.length)&&C.uniqueValueGroups[0].classes.length?C.uniqueValueGroups[0].classes[0].symbol:void 0,N,(e=>{z&&q.outline?q.outline.width=e:!z&&(0,l.V)(q,e),A=q.clone()}))}async function I(e){var o;const{layer:s,mapView:t,portal:r,modules:i}=l.s,{groupIdx:a,onChange:n,popoverNode:c}=e,p=(0,l.j)(s).uniqueValueGroups[a];let m=(null===(o=(0,l.w)(p.classes[p.classes.length-1].symbol))||void 0===o?void 0:o.a)||1,d=p.classes.map((e=>(0,l.w)(e.symbol)||new i.esriColor([0,0,0,m])));d.reverse(),d.length>10&&(d=d.slice(0,10));const y=await i.colorUtils.getBackgroundColorTheme(t),g=i.typeSchemes.getSchemes({basemapTheme:y,geometryType:(0,l.G)(s)||u}),v=i.colorSchemes.getSchemes({basemapTheme:y,geometryType:(0,l.G)(s)||u,theme:"high-to-low"});v.primaryScheme.colors=v.primaryScheme.colorsForClassBreaks[9].colors,v.primaryScheme.colorsForClassBreaks=void 0,v.secondarySchemes=v.secondarySchemes.filter((e=>{var o;return(null===(o=e.colorsForClassBreaks)||void 0===o?void 0:o.length)>=10})),v.secondarySchemes.forEach((e=>{e.colors=e.colorsForClassBreaks[9].colors,e.colorsForClassBreaks=void 0})),g.secondarySchemes.push(v.primaryScheme),g.secondarySchemes=g.secondarySchemes.concat(v.secondarySchemes);let w=p.classes.length;const k=(0,l.aa)(g,Math.min(w,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),z=await b(c),C=f(z,new i.SimpleFillSymbol,{portal:r,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:k,parts:{transparency:!1}}},fill:{color:d}});z.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{info:{fill:e}}})=>{const o=i.esriLang.clone(e.color).reverse(),r=(0,l.j)(s),c=(0,l.g)(),u=r.uniqueValueGroups.slice();u[a].classes.forEach(((e,r)=>{"picture-marker"===e.symbol.type&&(e.symbol=(0,l.T)(s,t,c)),(0,l.v)(e.symbol,o[r%o.length])})),r.uniqueValueGroups=u,n(),d=r.uniqueValueGroups[a].classes.map((e=>(0,l.w)(e.symbol))),d.reverse(),d.length>10&&(d=d.slice(0,10))}))),c.addStyler(z),await C}async function T(e){var o,s;const{layer:t,mapImageSublayer:r,mapView:i,lastDefault:a,portal:c,modules:m}=l.s,{onChange:y,popoverNode:g,selectedValue:v}=e,[w,k]=!(0,l.i)(t)&&v.split("/").map((e=>parseInt(e))),z=(0,l.D)(t),C=(0,l.E)(t),S=(0,l.u)(t),j=(0,l.j)(t),O=(0,l.g)(),E=["type-size","type-size-age"].indexOf(O)>-1,V=(0,l.a)(j,"size","auto"),A=(0,l.a)(j,"size","outline");let x;x=!(0,l.i)(t)&&-1===w||(0,l.i)(t)&&-1===v?j.defaultSymbol||a.defaultSymbol:(0,l.i)(t)?j.uniqueValueInfos[v].symbol:j.uniqueValueGroups[w].classes[k].symbol,K(x)||(x=(0,l.i)(t)?(0,l.aj)():(0,l.T)(t,i,O),(!(0,l.i)(t)&&-1===w||(0,l.i)(t)&&-1===v)&&!j.defaultSymbol&&(a.defaultSymbol=x));const I="picture-marker"!==x.type&&!!x.color,T=(0,l.a6)(x),L="cim"===x.type&&"CIMPointSymbol"===x.data.symbol.type;let q;if(!(0,l.i)(t)&&-1===w||(0,l.i)(t)&&-1===v)q=p();else{const e=m.typeSchemes.getSchemes({basemap:i.map.basemap,geometryType:(0,l.G)(t)||u});q=(0,l.a8)(e).slice(0,16)}const G=d();let B;if("simple-fill"===x.type){const e=x;B=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!A}:{color:new m.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!A}}else if("simple-marker"===x.type){const e=x;B=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new m.esriColor([0,0,0,.5]),size:1}}else if("cim"===x.type)B=H(x),C&&(B.size=V?n(V,i.scale):B.size,B.autoAdjusted=!!V,V&&(0,l.V)(x,B.size));else if("simple-line"===x.type){const e=x;B={size:V?n(V,i.scale):e.width,style:e.style,marker:e.marker,color:e.color,autoAdjusted:!!V}}else B={color:new m.esriColor([255,255,255,.5]),size:1};const P=await b(g);let F;return F=C?f(P,m.esriLang.clone(x),{portal:c,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:q,extraParts:{style:"cim"!==x.type,arrow:"cim"!==x.type,autoStrokeAdjust:!r&&!E&&"editable",width:!E},parts:{extra:!E||"cim"!==x.type}}},stroke:B}):(0,l.i)(t)?f(P,m.esriLang.clone(x),{portal:c,symbolFilter:"simple",sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:q,parts:{transparency:!1}}},fill:{color:(0,l.w)(x)||(-1===v?(0,l.aj)().color:W(q[v%q.length],.85))},stroke:B,fillEnabled:I}):f(P,m.esriLang.clone(x),{portal:c,symbolFilter:S&&!(0,l.a9)()?"simple":void 0,sections:{marker:L||["simple-marker","picture-marker"].indexOf(x.type)>-1?{open:!0,parts:{size:!E&&(!!r||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!E,markerType:(0,l.a9)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(x),suggestedColors:q},stroke:{type:"color",optional:!0,suggestedColors:G,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(x.type),width:!0,autoStrokeAdjust:!(r||!S||"cim"===x.type||E)&&"editable"}}},fill:{color:(0,l.w)(x)||W(q[k%q.length],.85)},marker:E||z?{size:V?n(V,i.scale):(0,l.U)(x),autoAdjusted:!!V}:void 0,stroke:B,fillEnabled:I,strokeEnabled:T}),P.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:r}}})=>{const i=(0,l.j)(t);if(!(0,l.i)(t)&&-1===w||(0,l.i)(t)&&-1===v)i.defaultSymbol=o;else if((0,l.i)(t)){const e=i.uniqueValueInfos.slice();e[v].symbol=o,i.uniqueValueInfos=e}else{const e=i.uniqueValueGroups.slice();e[w].classes[k].symbol=o,i.uniqueValueGroups=e}E?y():M(o,null==s?void 0:s.autoAdjusted,null==r?void 0:r.autoAdjusted,P,e)}))),g.addStyler(P),await F,_((0,l.i)(t)?(null===(o=j.uniqueValueInfos)||void 0===o?void 0:o.length)?j.uniqueValueInfos[0].symbol:void 0:(null===(s=j.uniqueValueGroups)||void 0===s?void 0:s.length)&&j.uniqueValueGroups[0].classes.length?j.uniqueValueGroups[0].classes[0].symbol:void 0,P)}async function L(e){var o,s,t;const{layer:r,mapImageSublayer:i,mapView:a,portal:c,modules:u}=l.s,{onChange:p,popoverNode:m}=e,y=(0,l.D)(r),g=(0,l.E)(r),v=(0,l.u)(r),w=(0,l.j)(r),k=(0,l.g)(),z="relationship-size"===k,C=(0,l.a)(w,"size","auto"),S=(0,l.a)(w,"size","outline"),j=w.uniqueValueGroups[0].classes,O=j.map((e=>(0,l.w)(e.symbol)||new u.esriColor([0,0,0,0]))),E=u.relationshipSchemes.getSchemes({basemap:a.map.basemap||"topo",geometryType:(0,l.G)(r)});let V=(null===(o=w.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?u.esriLang.clone(w.uniqueValueGroups[0].classes[0].symbol):(0,l.T)(r,a,k);if(!Q(V)){const e=null!==(s=(0,l.U)(V))&&void 0!==s?s:V.width;V=(0,l.T)(r,a,k),(0,l.V)(V,e)}const A=(0,l.a6)(V),x="cim"===V.type&&"CIMPointSymbol"===V.data.symbol.type,I=(0,l.aa)(E,Math.sqrt(j.length)).map((({colors:e,scheme:{tags:o,name:s}})=>({stops:u.relationshipSchemes.flatten2DArray(e),tags:o,name:s}))),T=d();let L;if("simple-fill"===V.type){const e=V;L=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===V.type){const e=V;L=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===V.type)L=H(V),g&&(L.size=C?n(C,a.scale):L.size,L.autoAdjusted=!!C,C&&(0,l.V)(V,L.size));else if("simple-line"===V.type){const e=V;L={color:new u.esriColor([255,255,255,.5]),size:C?n(C,a.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!C}}else L={color:new u.esriColor([255,255,255,.5]),size:1};const q=await b(m);let G;return G=f(q,u.esriLang.clone(V),g?{portal:c,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"2d",open:!0,colorRampsOpen:!0,colorRamps:I,extraParts:{style:"cim"!==V.type,arrow:"cim"!==V.type,autoStrokeAdjust:!i&&!z&&"editable",width:!z},parts:{extra:!z||"cim"!==V.type}}},stroke:Object.assign(Object.assign({},L),{color:O})}:{portal:c,symbolFilter:v&&!(0,l.a9)()?"simple":void 0,sections:{marker:x||["simple-marker","picture-marker"].indexOf(V.type)>-1?{open:!!(0,l.ai)(V),parts:{size:!z&&(!!i||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!z,markerType:(0,l.a9)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"2d",open:!(0,l.ai)(V),colorRampsOpen:!(0,l.ai)(V),colorRamps:I},stroke:{type:"color",optional:!0,open:!1,suggestedColors:T,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(V.type),width:!0,autoStrokeAdjust:!(i||!v||"cim"===V.type||z)&&"editable"}}},fill:{color:O},marker:z||y?{size:C?n(C,a.scale):(0,l.U)(V),autoAdjusted:!!C}:void 0,stroke:L,strokeEnabled:A}),q.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const a=u.esriLang.clone((i||t).color),n=(0,l.j)(r),c=n.uniqueValueGroups[0].classes.slice();c.forEach(((e,s)=>{e.symbol=o.clone(),(0,l.v)(e.symbol,a[s%a.length])})),n.uniqueValueGroups[0].classes=c,z?p():M(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,q,e)}))),m.addStyler(q),await G,_((null===(t=w.uniqueValueGroups[0].classes)||void 0===t?void 0:t.length)?w.uniqueValueGroups[0].classes[0].symbol:void 0,q)}async function q(e){var o,s,t,r;const{layer:i,mapImageSublayer:a,mapView:c,portal:u,modules:p}=l.s,{onChange:m,popoverNode:y}=e,g=(0,l.D)(i),v=(0,l.E)(i),w=(0,l.u)(i),k=(0,l.j)(i),z=(0,l.g)(),C="predominance-size"===z,S=(0,l.a)(k,"size","auto"),j=(0,l.a)(k,"size","outline"),O=k.uniqueValueGroups[0].classes;let E,V=O.length&&(null===(o=(0,l.w)(O[O.length-1].symbol))||void 0===o?void 0:o.a)||1,A=O.map((e=>(0,l.w)(e.symbol)||new p.esriColor([0,0,0,V])));A.reverse();const x=p.predominanceSchemes.getSchemes({basemap:c.map.basemap,geometryType:(0,l.G)(i),numColors:O.length});let I=(null===(s=k.uniqueValueGroups[0].classes)||void 0===s?void 0:s.length)?p.esriLang.clone(k.uniqueValueGroups[0].classes[0].symbol):(0,l.T)(i,c,z);if(!Q(I)){const e=null!==(t=(0,l.U)(I))&&void 0!==t?t:I.width;I=(0,l.T)(i,c,z),(0,l.V)(I,e)}const T=(0,l.a6)(I),L="cim"===I.type&&"CIMPointSymbol"===I.data.symbol.type,q=(0,l.aa)(x,O.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),G=d();let B;if("simple-fill"===I.type){const e=I;B=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!j}:{color:new p.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!j}}else if("simple-marker"===I.type){const e=I;B=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new p.esriColor([0,0,0,.5]),size:1}}else if("cim"===I.type)B=H(I),v&&(B.size=S?n(S,c.scale):B.size,B.autoAdjusted=!!S,S&&(0,l.V)(I,B.size));else if("simple-line"===I.type){const e=I;B={color:new p.esriColor([255,255,255,.5]),size:S?n(S,c.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!S}}else B={color:new p.esriColor([255,255,255,.5]),size:1};const P=await b(y);let F;return(0,l.v)(I,A[A.length-1]),(C||g||v)&&S?(0,l.V)(I,n(S,c.scale)):w&&S&&I.outline&&(I.outline.width=n(S,c.scale)),E=I.clone(),F=f(P,p.esriLang.clone(I),v?{portal:u,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:q,parts:{transparency:!0,extra:!C||"cim"!==I.type},extraParts:{style:"cim"!==I.type,arrow:"cim"!==I.type,autoStrokeAdjust:!a&&!C&&"editable",width:!C}}},stroke:Object.assign(Object.assign({},B),{color:A})}:{portal:u,symbolFilter:w&&!(0,l.a9)()?"simple":void 0,sections:{marker:L||["simple-marker","picture-marker"].indexOf(I.type)>-1?{open:!!(0,l.ai)(I),parts:{size:!C&&(!!a||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!C,markerType:(0,l.a9)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.ai)(I),colorRampsOpen:!(0,l.ai)(I),colorRamps:q},stroke:{type:"color",optional:!0,open:!1,suggestedColors:G,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(I.type),width:!0,autoStrokeAdjust:!(a||!w||"cim"===I.type||C)&&"editable"}}},fill:{color:A},marker:C||g?{size:S?n(S,c.scale):(0,l.U)(I),autoAdjusted:!!S}:void 0,stroke:B,strokeEnabled:T}),P.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:r}}})=>{const a=p.esriLang.clone((r||t).color),n=A[0],c=A.length!==a.length||A.some(((e,o)=>e.r!==a[o].r||e.g!==a[o].g||e.b!==a[o].b))||n.r!==a[0].r||n.g!==a[0].g||n.b!==a[0].b,u=n.a!==a[0].a,d=a[0].a;a.reverse();const y=(0,l.j)(i),g=(0,l.am)(o,E);if(c&&!g.any&&(g.any=!0,g.color=!0),g.any){const e=y.uniqueValueGroups[0].classes.slice();e.forEach(((e,s)=>{"picture-marker"===e.symbol.type&&(c||u)&&(e.symbol=p.esriLang.clone(o),(0,l.v)(e.symbol,a[s%a.length])),e.symbol=(0,l.an)(e.symbol,o,c?a[s%a.length]:u?(0,l.ao)((0,l.w)(e.symbol),d):(0,l.w)(e.symbol)||new p.esriColor([0,0,0,0]),g)})),y.uniqueValueGroups[0].classes=e}C?m():M(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,P,e),E=o.clone(),c&&(A=y.uniqueValueGroups[0].classes.map((e=>(0,l.w)(e.symbol)||new p.esriColor([0,0,0,.5]))),A.reverse())}))),y.addStyler(P),await F,_((null===(r=k.uniqueValueGroups[0].classes)||void 0===r?void 0:r.length)?k.uniqueValueGroups[0].classes[0].symbol:void 0,P,(e=>{w&&I.outline?I.outline.width=e:!w&&(0,l.V)(I,e),E=I.clone()}))}async function G(e){var o;const{layer:s,mapImageSublayer:t,mapView:r,selectedValue:i,lastDefault:a,portal:c,modules:u}=l.s,{onChange:m,popoverNode:y}=e,g=(0,l.D)(s),v=(0,l.E)(s),w=(0,l.u)(s),k=(0,l.j)(s),z=(0,l.g)(),C="predominance-size"===z,S=(0,l.a)(k,"size","auto"),j=(0,l.a)(k,"size","outline");let O;O=-1===i?k.defaultSymbol||a.defaultSymbol:k.uniqueValueGroups[0].classes[i].symbol,K(O)||(O=(0,l.T)(s,r,z),-1!==i||k.defaultSymbol||(a.defaultSymbol=O));const E="picture-marker"!==O.type&&!!O.color,V=(0,l.a6)(O),A="cim"===O.type&&"CIMPointSymbol"===O.data.symbol.type;let x;if(-1===i)x=p();else{const e=u.predominanceSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.G)(s),numColors:10});x=(0,l.a8)(e).slice(0,16)}const I=d();let T;if("simple-fill"===O.type){const e=O;T=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!j}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!j}}else if("simple-marker"===O.type){const e=O;T=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===O.type)T=H(O);else if("simple-line"===O.type){const e=O;T={size:e.width,style:e.style,marker:e.marker,color:e.color}}else T={color:new u.esriColor([255,255,255,.5]),size:1};const L=await b(y);let q;return q=f(L,u.esriLang.clone(O),v?{portal:c,symbolFilter:(0,l.a9)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:x,extraParts:{style:"cim"!==O.type,arrow:"cim"!==O.type,autoStrokeAdjust:!t&&!C&&"editable",width:!C},parts:{extra:!C||"cim"!==O.type}}},stroke:T}:{portal:c,symbolFilter:w&&!(0,l.a9)()?"simple":void 0,sections:{marker:A||["simple-marker","picture-marker"].indexOf(O.type)>-1?{open:!0,parts:{size:!C&&(!!t||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!C,markerType:(0,l.a9)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(O),suggestedColors:x},stroke:{type:"color",optional:!0,suggestedColors:I,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(O.type),width:!0,autoStrokeAdjust:!(t||!w||"cim"===O.type||C)&&"editable"}}},fill:{color:(0,l.w)(O)||W(x[i],.85)},marker:C||g?{size:S?n(S,r.scale):(0,l.U)(O),autoAdjusted:!!S}:void 0,stroke:T,fillEnabled:E,strokeEnabled:V}),L.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:t,stroke:r}}})=>{const a=(0,l.j)(s);if(-1===i)a.defaultSymbol=o;else{const e=a.uniqueValueGroups[0].classes.slice();e[i].symbol=o,a.uniqueValueGroups[0].classes=e}C?m():M(o,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,L,e)}))),y.addStyler(L),await q,_((null===(o=k.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?k.uniqueValueGroups[0].classes[0].symbol:void 0,L)}async function B(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n}=e,c=(0,l.j)(o),m=c.attributes,d=m.map((e=>e.color)),y=i.pieChartSchemes.getSchemes({basemap:s.map.basemap,geometryType:(0,l.G)(o)||u,numColors:m.length}),g=p(),v=(0,l.aa)(y,m.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),w=(0,l.T)(o,s);let k;if(w.outline=c.outline,"simple-fill"===w.type)if(w.outline){const e=w.outline;k={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else k={color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"};else if("simple-marker"===w.type&&w.outline){const e=w.outline;k={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}const z=await b(n),C=f(z,w,{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:v},stroke:{type:"color",optional:!0,suggestedColors:g,extraParts:{style:!1,width:!0,autoStrokeAdjust:!1}}},fill:{color:d.reverse()},stroke:k});z.stringOverrides={fillColor:r.styler.color,fillTransparency:r.styler.transparency},z.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e,info:{fill:s}}})=>{const t=i.esriLang.clone(s.color);t.reverse(),(0,l.j)(o).attributes.forEach(((e,o)=>e.color=t[o])),(0,l.j)(o).outline=e.outline.clone(),a()}))),n.addStyler(z),await C}async function P(e){var o;const{layer:s,mapView:t,selectedAttribute:r,lastDefault:i,portal:a,strings:n,modules:c}=l.s,{onChange:p,popoverNode:m}=e,d=(0,l.j)(s),y=d.attributes;let g;g=-1===r?(null===(o=d.othersCategory)||void 0===o?void 0:o.color)||(null==i?void 0:i.otherColor)||new c.esriColor([170,170,170,1]):-2===r?d.defaultColor||(null==i?void 0:i.defaultColor)||new c.esriColor([170,170,170,1]):y[r].color;const v=c.pieChartSchemes.getSchemes({basemap:t.map.basemap,geometryType:(0,l.G)(s)||u,numColors:y.length}),w=(0,l.a8)(v).slice(0,16),k=(0,l.T)(s,t);k.outline=void 0,(0,l.v)(k,g);const z=await b(m),C=f(z,k,{portal:a,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:w}},fill:{color:g}});z.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency},z.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{var o;-1===r?(0,l.j)(s).othersCategory?(0,l.j)(s).othersCategory.color=(0,l.w)(e):(0,l.j)(s).othersCategory={color:(0,l.w)(e),label:(null==i?void 0:i.otherLabel)||n.styler.other,threshold:null!==(o=null==i?void 0:i.threshold)&&void 0!==o?o:0}:-2===r?(0,l.j)(s).defaultColor=(0,l.w)(e):(0,l.j)(s).attributes[r].color=(0,l.w)(e),p()}))),m.addStyler(z),await C}async function F(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n}=e,c=(0,l.j)(o).attributes,u=c.map((e=>e.color)),p=i.dotDensitySchemes.getSchemes({basemap:s.map.basemap,numColors:c.length}),m=(0,l.aa)(p,c.length).map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name}))),d=await b(n),y=f(d,(0,l.T)(o,s),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:m}},fill:{color:u}});d.stringOverrides={fillColor:r.styler.dotColor,fillTransparency:r.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{info:{fill:e}}})=>{(0,l.j)(o).attributes.forEach(((o,s)=>o.color=e.color[s])),a()}))),n.addStyler(d),await y}async function R(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n,selectedAttribute:c}=e,u=(0,l.j)(o).attributes,p=i.dotDensitySchemes.getSchemes({basemap:s.map.basemap,numColors:u.length}),m=(0,l.a8)(p).slice(0,16),d=await b(n),y=f(d,(0,l.T)(o,s),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:m}},fill:{color:u[c].color}});d.stringOverrides={fillColor:r.styler.dotColor,fillTransparency:r.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{(0,l.j)(o).attributes[c].color=(0,l.w)(e),a()}))),n.addStyler(d),await y}async function U(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n}=e,c=(0,l.j)(o).colorStops,u=c.filter(((e,o)=>o>=3)).map((e=>e.color)),p=await i.colorUtils.getBackgroundColorTheme(s),m=i.heatmapSchemes.getSchemes({basemapTheme:p}),d=(0,l.aa)(m,c.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),y=await b(n),g=f(y,(0,l.T)(o,s),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRampsOpen:!0,colorRamps:d,parts:{transparency:!1}}},fill:{color:u.reverse()}});y.stringOverrides={fillTransparency:r.styler.transparency},y.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{info:{fill:e}}})=>{const s=i.esriLang.clone(e.color);s.reverse();const t=Math.max(c.length-s.length,0);(0,l.j)(o).colorStops.forEach(((e,o)=>{const l=e.color.a;e.color=o<=t-2||o<=t?i.esriLang.clone(s[0]):i.esriLang.clone(s[o-t]),e.color.a=l})),a()}))),n.addStyler(y),await g}function M(e,o,s,t,i){const{layer:a,modules:c}=l.s,u=(0,l.D)(a),p=(0,l.E)(a);u?N(o,(0,l.U)(e),e,t,i):p?N(s,(0,l.U)(e),e,t,i):function(e,o,s,t,i){const{layer:a,mapView:c}=l.s,{onChange:u}=i,p=(0,l.j)(a),m=(0,l.a)(p,"size","outline");e&&!m?(0,r.a)().then((e=>{if(e){const o=(0,l.j)(a);o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),J(e,c.scale,s,t)}u()})):!e&&m?(p.visualVariables=p.visualVariables.filter((e=>!("size"===e.type&&"outline"===e.target))),p.visualVariables&&!p.visualVariables.length&&(p.visualVariables=void 0),u()):(e&&function(e,o){const{layer:s,mapView:t}=l.s,{onChange:i}=o,a=t.scale;let c=(0,l.j)(s);const u=(0,l.a)(c,"size","outline"),p=u.stops;if(0!==e&&0===p[p.length-2].size)(0,r.a)().then((o=>{if(o){const t=n(o,a);D(o,(0===e?Math.max(.5,e):e)/(0===t?Math.max(.5,t):t));const r=(0,l.q)((0,l.j)(s),"size","outline")||[];r.push(o),(0,l.j)(s).visualVariables=r,i(),setTimeout((()=>{}),2e3)}}));else{const o=n(u,a),s=(0===e?Math.max(.5,e):e)/(0===o?Math.max(.5,o):o);D(u,s),0!==e&&0!==o||(function(e,o,s){const l=e.stops,t=l.length-1,r=l[0].value,i=l[t].value;if(o<=r)for(let e=0;e<=t;e++)l[e].size=s;else if(o>=i)l[t].size=s;else for(let e=0;e<t;e++){const r=l[e],i=l[e+1];if(o>=r.value&&o<i.value){for(let o=e+1;o<=t;o++)l[o].size=s;break}}}(u,a,e),u.stops.forEach(((e,o)=>{o>0&&e.size===u.stops[o-1].size&&(o===u.stops.length-1?o>1&&(u.stops[o-1].size=(u.stops[o-2].size+e.size)/2):e.size=(u.stops[o+1].size+u.stops[o-1].size)/2)})))}}(o,i),u())}(s,"cim"===e.type?(0,l.ap)(e):(0,l.U)(e.outline||new c.SimpleLineSymbol),e,t,i)}function N(e,o,s,t,i){const{layer:a,mapView:c}=l.s,{onChange:u}=i,p=(0,l.j)(a);o=Math.max(o,.1);const m=(0,l.a)(p,"size","auto");if(e&&!m)(0,r.b)().then((e=>{if(e){const o=(0,l.j)(a);o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),(0,l.ak)(s)&&D(e,(0,l.U)(s)/n(e,c.scale)),J(e,c.scale,s,t)}u()}));else if(!e&&m){const e=(0,l.q)(p,"size","auto");(null==e?void 0:e.length)?p.visualVariables=e:p.visualVariables=void 0,u()}else e&&function(e){const{layer:o,mapView:s}=l.s,t=s.scale,r=(0,l.j)(o),i=(0,l.a)(r,"size","auto");D(i,e/n(i,t))}(o),u()}function D(e,o){e.stops.forEach((e=>{e.size*=o}))}function _(e,o,s){const{layer:t,mapView:r,modules:i}=l.s;let a;return i.reactiveUtils.when((()=>r.stationary),(()=>{const i=r.scale;if(a!==i){const r=(0,l.j)(t),n=(0,l.a)(r,"size","simple-fill"===e.type?"outline":"auto");n&&J(n,i,e,o,s),a=i}}))}function J(e,o,s,t,r){const i=n(e,o),a=["simple-line","simple-fill"].indexOf(s.type)>-1||(0,l.ak)(s)?"stroke":"marker";t.setSize(a,i),null==r||r(i)}function W(e,o){return e&&(e.a=o),e}function H(e){var o,s,t;const{modules:r}=l.s;if((0,l.ak)(e))return{color:(null===(o=(0,l.w)(e))||void 0===o?void 0:o.clone())||new r.esriColor([255,255,255,.5]),size:null!==(s=(0,l.U)(e))&&void 0!==s?s:1};{const o=(0,l.al)(e);return{color:new r.esriColor(null==o?void 0:o.color)||new r.esriColor([255,255,255,.5]),size:null!==(t=null==o?void 0:o.width)&&void 0!==t?t:1}}}function K(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].indexOf(null==e?void 0:e.type)>-1}function Q(e){return["simple-fill","simple-marker","simple-line","cim"].indexOf(e.type)>-1}}}]);