System.register(["jimu-core","jimu-arcgis"],(function(t,e){var o={},a={};return{setters:[function(t){o.AbstractDataAction=t.AbstractDataAction,o.DataLevel=t.DataLevel,o.DataSourceStatus=t.DataSourceStatus,o.MutableStoreManager=t.MutableStoreManager},function(t){a.loadArcGISJSAPIModules=t.loadArcGISJSAPIModules}],execute:function(){t((()=>{"use strict";var t={26826:t=>{t.exports=a},48891:t=>{t.exports=o}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{r.r(n),r.d(n,{default:()=>a});var t=r(48891),e=r(26826),o=function(t,e,o,a){return new(o||(o=Promise))((function(r,n){function u(t){try{i(a.next(t))}catch(t){n(t)}}function s(t){try{i(a.throw(t))}catch(t){n(t)}}function i(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(u,s)}i((a=a.apply(t,e||[])).next())}))};class a extends t.AbstractDataAction{isSupported(e,a){return o(this,void 0,void 0,(function*(){const o=this.getSupportedDataSets(e,a);return 1===o.length||o.length>=2&&a===t.DataLevel.Records}))}getSupportedDataSets(e,o){return e.filter((e=>{const a=e.dataSource;return!(!a||a.getStatus()===t.DataSourceStatus.NotReady)&&(!(!(null==a?void 0:a.supportSpatialInfo)||!(null==a?void 0:a.supportSpatialInfo()))&&(o===t.DataLevel.Records?this.getRecords(e,o).length>0:o===t.DataLevel.DataSource&&!!(null==a?void 0:a.createJSAPILayerByDataSource)))}))}getRecords(e,o){var a;let r=[];return o===t.DataLevel.DataSource?r=[]:o===t.DataLevel.Records&&(null===(a=e.records)||void 0===a?void 0:a.length)>0&&(r=e.records),r}getClonedFeatures(t,e,o){const a=this.getRecords(t,e).map((t=>function(t,e){let o=null;return t.clone?o=t.clone():(o=e.fromJSON(Object.assign({},t)),o.attributes=Object.assign({},t.attributes)),o}(t.feature,o)));return a}onExecute(a,r){var n;return o(this,void 0,void 0,(function*(){const o=yield(0,e.loadArcGISJSAPIModules)(["esri/Graphic"]),[u]=o,s=this.getSupportedDataSets(a,r),i={padding:{left:50,right:50,top:50,bottom:50}};if(1===s.length){const e=s[0],o={type:"zoom-to-graphics",features:this.getClonedFeatures(e,r,u),dataSourceId:(null===(n=e.dataSource)||void 0===n?void 0:n.id)||null,zoomToOption:i};t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"zoomToFeatureActionValue.value",o)}else if(s.length>=2){const e=[];s.forEach((t=>{const o=this.getClonedFeatures(t,r,u);e.push(o)}));const o={type:"zoom-to-array-graphics",arrayFeatures:e,zoomToOption:i};t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"zoomToFeatureActionValue.value",o)}return!0}))}}})(),n})())}}}));