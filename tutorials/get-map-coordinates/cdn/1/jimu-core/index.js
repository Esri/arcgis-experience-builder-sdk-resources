/*! For license information please see index.js.LICENSE.txt */
System.register(["jimu-core/react","jimu-core/react-dom","jimu-core"],(function(e,t){var r={},n={},o={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){r[t]=e[t]}))},function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){o.DataSourceSelectionMode=e.DataSourceSelectionMode,o.Immutable=e.Immutable,o.React=e.React,o.appActions=e.appActions,o.classNames=e.classNames,o.dataSourceUtils=e.dataSourceUtils,o.geometryUtils=e.geometryUtils,o.lodash=e.lodash,o.portalUrlUtils=e.portalUrlUtils}],execute:function(){e((()=>{var e,t,i={4015:()=>{},3135:(e,t,r)=>{"use strict";r.d(t,{i:()=>s});var n=r(8134),o=r(743),i=r(2431),a=r(901);function s(e){var t=e.id,r=(0,i.a)(e)+"/community/groups/"+t+"/addUsers",a=Object.assign({},e,{admins:void 0,users:void 0}),s=(0,n.pr)(l("users",e.users,a),l("admins",e.admins,a)).map((function(e){return function(e,t){return(0,o.WY)(e,t).catch((function(e){return{errors:[e]}}))}(r,e)}));return Promise.all(s).then(u)}function l(e,t,r){return!t||t.length<1?[]:(0,a.y)(t,25).map((function(t){return function(e,t,r){var o,i;return Object.assign({},r,((o={})[e]=t,o.params=(0,n.pi)((0,n.pi)({},r.params),((i={})[e]=t,i)),o))}(e,t,r)}))}function u(e){var t=e.filter((function(e){return e.notAdded})).reduce((function(e,t){return e.concat(t.notAdded)}),[]),r=e.filter((function(e){return e.errors})).reduce((function(e,t){return e.concat(t.errors)}),[]),n={notAdded:t};return r.length>0&&(n.errors=r),n}},7255:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/createGroup";return e.params=(0,n.pi)((0,n.pi)({},e.params),e.group),(0,o.WY)(t,e)}},6765:(e,t,r)=>{"use strict";r.d(t,{Ye:()=>u,ex:()=>s,qn:()=>l,rm:()=>c,zv:()=>d});var n=r(8134),o=r(743),i=r(4037),a=r(2431);function s(e,t){var r=(0,a.a)(t)+"/community/groups/"+e,i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}function l(e,t){var r=(0,a.a)(t)+"/community/groups/"+e+"/categorySchema",i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}function u(e,t){var r=(0,a.a)(t)+"/content/groups/"+e,i=(0,n.pi)((0,n.pi)({httpMethod:"GET"},{params:{start:1,num:100}}),t);return t&&t.paging&&(i.params=(0,n.pi)({},t.paging)),(0,o.WY)(r,i)}function c(e,t){var r=(0,a.a)(t)+"/community/groups/"+e+"/users",i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}function d(e,t){var r=(0,a.a)(t)+"/community/groups/"+e+"/userlist",n=(0,i.t)(t||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return(0,o.WY)(r,n)}},4502:()=>{},5323:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var n=r(8134),o=r(743),i=r(2431),a=r(901);function s(e){var t=e.id,r=(0,i.a)(e)+"/community/groups/"+t+"/invite",s=function(e){return(0,a.y)(e.users,25).map((function(t){return function(e,t){var r=Object.assign({},t);return r.params=(0,n.pi)((0,n.pi)({},r.params),{users:e,role:r.role,expiration:r.expiration}),r}(t,e)}))}(e),u=s.map((function(e){return function(e,t){return(0,o.WY)(e,t).catch((function(e){return{errors:[e]}}))}(r,e)}));return Promise.all(u).then(l)}function l(e){var t=e.every((function(e){return e.success})),r=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),n={success:t};return r.length>0&&(n.errors=r),n}},7887:(e,t,r)=>{"use strict";r.d(t,{L:()=>a,b:()=>i});var n=r(743),o=r(2431);function i(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/join";return(0,n.WY)(t,e)}function a(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/leave";return(0,n.WY)(t,e)}},8064:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/groups/"+e.id+"/createNotification",r=(0,n.pi)({params:(0,n.pi)({subject:e.subject,message:e.message,users:e.users,notificationChannelType:e.notificationChannelType||"email",clientId:e.clientId,silentNotification:e.silentNotification,notifyAll:!e.users||0===e.users.length},e.params)},e);return(0,o.WY)(t,r)}},6825:(e,t,r)=>{"use strict";r.d(t,{E:()=>i,R:()=>a});var n=r(743),o=r(2431);function i(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/protect";return(0,n.WY)(t,e)}function a(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/unprotect";return(0,n.WY)(t,e)}},4269:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(8134),o=r(743),i=r(2431),a=r(901);function s(e){var t=e.id,r=e.users,s=(0,i.a)(e)+"/community/groups/"+t+"/removeUsers",l=(0,a.y)(r,25).map((function(t){return r=t,i=(0,n.pi)((0,n.pi)({},e),{users:r,params:{users:r}}),(0,o.WY)(s,i).catch((function(e){return{errors:[e]}}));var r,i}));return Promise.all(l).then((function(e){var t=function(t){return e.filter((function(e){return e[t]})).reduce((function(e,r){return e.concat(r[t])}),[])},r=t("errors"),o={notRemoved:t("notRemoved")};return r.length?(0,n.pi)((0,n.pi)({},o),{errors:r}):o}))}},727:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/groups/"+e.id+"/delete",r=(0,n.pi)({},e);return(0,o.WY)(t,r)}},8549:(e,t,r)=>{"use strict";r.d(t,{N:()=>i,t:()=>o});var n=r(8547);function o(e){return(0,n.f)(e,"group")}function i(e){return(0,n.f)(e,"groupContent")}},1250:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var n=r(2431),o=r(743);function i(e){var t=(0,n.a)(e)+"/community/groups/"+e.id+"/updateUsers",r={authentication:e.authentication,params:{}};return"admin"===e.newMemberType?r.params.admins=e.users:r.params.users=e.users,(0,o.WY)(t,r)}},4372:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/groups/"+e.group.id+"/update";return e.params=(0,n.pi)((0,n.pi)({},e.params),e.group),(0,o.WY)(t,e)}},5501:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SearchQueryBuilder:()=>Q.q,acceptInvitation:()=>k.Tg,addGroupUsers:()=>g.i,addItemData:()=>n.JV,addItemPart:()=>h.cN,addItemRelationship:()=>n.bV,addItemResource:()=>n.zJ,bboxToString:()=>f.CF,cancelItemUpload:()=>h.it,commitItemUpload:()=>h.wd,createFolder:()=>i.L6,createGroup:()=>y.s,createGroupNotification:()=>I.$,createItem:()=>i.fC,createItemInFolder:()=>i.Ae,createOrgNotification:()=>P.D,declineInvitation:()=>k.Ak,determineOwner:()=>f.ND,ensureMembership:()=>B.W,exportItem:()=>a.V,getGroup:()=>S.ex,getGroupCategorySchema:()=>S.qn,getGroupContent:()=>S.Ye,getGroupUsers:()=>S.rm,getItem:()=>s.rV,getItemBaseUrl:()=>s.OF,getItemData:()=>s.m_,getItemGroups:()=>s.tX,getItemInfo:()=>s.Tn,getItemMetadata:()=>s.ff,getItemParts:()=>s.Cs,getItemResource:()=>s.AA,getItemResources:()=>s.C,getItemStatus:()=>s.sy,getPortal:()=>z._,getPortalSettings:()=>q.H,getPortalUrl:()=>Y.a,getRelatedItems:()=>s.oO,getSelf:()=>z.A,getSharingUrl:()=>W.Zl,getSubscriptionInfo:()=>J.J,getUniqueServiceName:()=>V.h,getUser:()=>D.P,getUserContent:()=>o.l,getUserInvitation:()=>k.rm,getUserInvitations:()=>k.OR,getUserMembership:()=>W.Xj,getUserNotifications:()=>L.g,getUserProperties:()=>j.s,getUserTags:()=>R.d,getUserUrl:()=>_.X,inviteGroupUsers:()=>v.e,isBBox:()=>f.pi,isItemOwner:()=>W.$Z,isItemSharedWithGroup:()=>G.w,isOrgAdmin:()=>W.RN,isServiceNameAvailable:()=>H.N,joinGroup:()=>A.b,leaveGroup:()=>A.L,moveItem:()=>p.uo,protectGroup:()=>E.E,protectItem:()=>l.Q,reassignItem:()=>u.g,removeFolder:()=>c.Ih,removeGroup:()=>C.B,removeGroupUsers:()=>m.B,removeItem:()=>c.cl,removeItemRelationship:()=>c.Fr,removeItemResource:()=>c.ug,removeNotification:()=>L.F,scrubControlChars:()=>K._,searchCommunityUsers:()=>N.p,searchGroupContent:()=>O.N,searchGroupUsers:()=>S.zv,searchGroups:()=>O.t,searchItems:()=>d.K,searchUsers:()=>N.a,serializeItem:()=>f.lY,setItemAccess:()=>F.z,setUserProperties:()=>U.x,shareItemWithGroup:()=>B.J,unprotectGroup:()=>E.R,unprotectItem:()=>l.l,unshareItemWithGroup:()=>$.l,updateGroup:()=>x.m,updateItem:()=>p.$G,updateItemInfo:()=>p.P2,updateItemResource:()=>p.zy,updateUser:()=>M.N,updateUserMemberships:()=>T.S});var n=r(7845),o=r(4657),i=r(1512),a=r(5953),s=r(6598),l=r(5382),u=r(194),c=r(3634),d=r(5128),p=r(8739),f=r(9538),h=r(9100),g=r(3135),m=r(4269),v=r(5323),y=r(7255),S=r(6765),b=r(4502),w={};for(const e in b)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItem","createItemInFolder","exportItem","getItem","getItemBaseUrl","getItemData","getItemGroups","getItemInfo","getItemMetadata","getItemParts","getItemResource","getItemResources","getItemStatus","getRelatedItems","protectItem","unprotectItem","reassignItem","removeFolder","removeItem","removeItemRelationship","removeItemResource","searchItems","moveItem","updateItem","updateItemInfo","updateItemResource","bboxToString","determineOwner","isBBox","serializeItem","addItemPart","cancelItemUpload","commitItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers"].indexOf(e)<0&&(w[e]=()=>b[e]);r.d(t,w);var I=r(8064),E=r(6825),C=r(727),O=r(8549),x=r(4372),T=r(1250),A=r(7887),P=r(5621),D=r(8818),R=r(8649),_=r(4203),k=r(7357),L=r(3264),N=r(8),M=r(1437),j=r(4659),U=r(614),F=r(5582),B=r(3809),$=r(107),G=r(2049),W=r(9207),V=r(3826),H=r(2827),z=r(1046),q=r(4570),Y=r(2431),J=r(3379),K=r(5126),X=r(5522);w={};for(const e in X)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItem","createItemInFolder","exportItem","getItem","getItemBaseUrl","getItemData","getItemGroups","getItemInfo","getItemMetadata","getItemParts","getItemResource","getItemResources","getItemStatus","getRelatedItems","protectItem","unprotectItem","reassignItem","removeFolder","removeItem","removeItemRelationship","removeItemResource","searchItems","moveItem","updateItem","updateItemInfo","updateItemResource","bboxToString","determineOwner","isBBox","serializeItem","addItemPart","cancelItemUpload","commitItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers","createGroupNotification","protectGroup","unprotectGroup","removeGroup","searchGroupContent","searchGroups","updateGroup","updateUserMemberships","joinGroup","leaveGroup","createOrgNotification","getUser","getUserTags","getUserUrl","acceptInvitation","declineInvitation","getUserInvitation","getUserInvitations","getUserNotifications","removeNotification","searchCommunityUsers","searchUsers","updateUser","getUserProperties","setUserProperties","setItemAccess","ensureMembership","shareItemWithGroup","unshareItemWithGroup","isItemSharedWithGroup","getSharingUrl","getUserMembership","isItemOwner","isOrgAdmin","getUniqueServiceName","isServiceNameAvailable","getPortal","getSelf","getPortalSettings","getPortalUrl","getSubscriptionInfo","scrubControlChars"].indexOf(e)<0&&(w[e]=()=>X[e]);r.d(t,w);var Q=r(6761)},7845:(e,t,r)=>{"use strict";r.d(t,{JV:()=>u,bV:()=>c,zJ:()=>d});var n=r(8134),o=r(4037),i=r(743),a=r(2431),s=r(9538),l=r(8739);function u(e){var t=(0,n.pi)({item:{id:e.id,data:e.data}},e);return delete t.id,delete t.data,(0,l.$G)(t)}function c(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/addRelationship",s=(0,o.t)(e,["originItemId","destinationItemId","relationshipType"],{params:(0,n.pi)({},e.params)});return(0,i.WY)(r,s)}))}function d(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/addResources";return e.params=(0,n.pi)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content,access:e.private?"private":"inherit"},e.params),(0,i.WY)(r,e)}))}},4657:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});var n=r(743),o=r(2431),i=r(9538),a=function(e){var t=e.folderId,r=e.start,a=void 0===r?1:r,s=e.num,l=void 0===s?10:s,u=e.authentication,c=t?"/"+t:"";return(0,i.ND)(e).then((function(t){return(0,o.a)(e)+"/content/users/"+t+c})).then((function(e){return(0,n.WY)(e,{httpMethod:"GET",authentication:u,params:{start:a,num:l}})}))}},1512:(e,t,r)=>{"use strict";r.d(t,{Ae:()=>u,L6:()=>l,fC:()=>c});var n=r(8134),o=r(743),i=r(4037),a=r(2431),s=r(9538);function l(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/createFolder";return e.params=(0,n.pi)({title:e.title},e.params),(0,o.WY)(r,e)}))}function u(e){return e.multipart&&!e.filename?Promise.reject(new Error("The filename is required for a multipart request.")):(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t,l=r+"/addItem";e.folderId&&(l=r+"/"+e.folderId+"/addItem"),e.params=(0,n.pi)((0,n.pi)({},e.params),(0,s.lY)(e.item)),e.params.extent&&(0,s.pi)(e.params.extent)&&(e.params.extent=(0,s.CF)(e.params.extent));var u=(0,i.t)(e,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:(0,n.pi)({},e.params)});return(0,o.WY)(l,u)}))}function c(e){return u((0,n.pi)({folderId:null},e))}},5953:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});var n=r(743),o=r(9538),i=r(2431),a=function(e){var t=e.authentication,r=e.id,a=e.title,s=e.exportFormat,l=e.exportParameters;return(0,o.ND)(e).then((function(t){return(0,i.a)(e)+"/content/users/"+t+"/export"})).then((function(e){return(0,n.WY)(e,{httpMethod:"POST",authentication:t,params:{itemId:r,title:a,exportFormat:s,exportParameters:l}})}))}},6598:(e,t,r)=>{"use strict";r.d(t,{AA:()=>h,C:()=>f,Cs:()=>v,OF:()=>c,Tn:()=>y,ff:()=>S,m_:()=>d,oO:()=>p,rV:()=>u,sy:()=>m,tX:()=>g});var n=r(8134),o=r(743),i=r(4037),a=r(2431),s=r(5126),l=r(9538);function u(e,t){var r=c(e,t),i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}var c=function(e,t){return("string"==typeof t?t:(0,a.a)(t))+"/content/items/"+e};function d(e,t){var r=c(e,t)+"/data",i=(0,n.pi)({httpMethod:"GET",params:{}},t);return i.file&&(i.params.f=null),(0,o.WY)(r,i).catch((function(e){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(e.message))throw e}))}function p(e){var t=c(e.id,e)+"/relatedItems",r=(0,n.pi)({httpMethod:"GET",params:{direction:e.direction}},e);return"string"==typeof e.relationshipType?r.params.relationshipType=e.relationshipType:r.params.relationshipTypes=e.relationshipType,delete r.direction,delete r.relationshipType,(0,o.WY)(t,r)}function f(e,t){var r=c(e,t)+"/resources",i=(0,n.pi)({},t);return i.params=(0,n.pi)({num:1e3},i.params),(0,o.WY)(r,i)}function h(e,t){var r=t.readAs||"blob";return b(e,"/resources/"+t.fileName,r,t)}function g(e,t){var r=c(e,t)+"/groups";return(0,o.WY)(r,t)}function m(e){return(0,l.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/status",s=(0,i.t)(e,["jobId","jobType"],{params:(0,n.pi)({},e.params)});return(0,o.WY)(r,s)}))}function v(e){return(0,l.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/parts";return(0,o.WY)(r,e)}))}function y(e,t){var r=t||{},o=r.fileName,i=void 0===o?"iteminfo.xml":o,a=r.readAs;return b(e,"/info/"+i,void 0===a?"text":a,(0,n.pi)({httpMethod:"GET"},t))}function S(e,t){return y(e,(0,n.pi)((0,n.pi)({},t),{fileName:"metadata/metadata.xml"}))}function b(e,t,r,i){var a=""+c(e,i)+t,l=(0,n.pi)({params:{}},i),u=l.rawResponse;return l.rawResponse=!0,l.params.f=null,(0,o.WY)(a,l).then((function(e){return u?e:"json"!==r?e[r]():e.text().then((function(e){return JSON.parse((0,s._)(e))}))}))}},9538:(e,t,r)=>{"use strict";function n(e){var t=JSON.parse(JSON.stringify(e));return t.data&&("undefined"!=typeof Blob&&e.data instanceof Blob||"ReadStream"===e.data.constructor.name?t.file=e.data:t.text=e.data,delete t.data),t}function o(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function i(e){return Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[1])}function a(e){return e.join(",")}r.d(t,{CF:()=>a,ND:()=>o,lY:()=>n,pi:()=>i})},5382:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a,l:()=>s});var n=r(743),o=r(2431),i=r(9538);function a(e){return(0,i.ND)(e).then((function(t){var r=(0,o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/protect";return(0,n.WY)(r,e)}))}function s(e){return(0,i.ND)(e).then((function(t){var r=(0,o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/unprotect";return(0,n.WY)(r,e)}))}},194:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var n=r(743),o=r(2431),i=r(9207);function a(e){return(0,i.RN)(e).then((function(t){if(!t)throw Error("Item "+e.id+" can not be reassigned because current user is not an organization administrator.");var r=(0,o.a)(e)+"/content/users/"+e.currentOwner+"/items/"+e.id+"/reassign",i={params:{targetUsername:e.targetUsername,targetFolderName:e.targetFolderName},authentication:e.authentication};return(0,n.WY)(r,i)}))}},3634:(e,t,r)=>{"use strict";r.d(t,{Fr:()=>u,Ih:()=>d,cl:()=>l,ug:()=>c});var n=r(8134),o=r(743),i=r(4037),a=r(2431),s=r(9538);function l(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/delete";return(0,o.WY)(r,e)}))}function u(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/deleteRelationship",s=(0,i.t)(e,["originItemId","destinationItemId","relationshipType"],{params:(0,n.pi)({},e.params)});return(0,o.WY)(r,s)}))}function c(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/removeResources";return e.params=(0,n.pi)((0,n.pi)({},e.params),{resource:e.resource}),void 0!==e.deleteAll&&(e.params.deleteAll=e.deleteAll),(0,o.WY)(r,e)}))}function d(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+encodeURIComponent(t)+"/"+e.folderId+"/delete";return(0,o.WY)(r,e)}))}},5128:(e,t,r)=>{"use strict";r.d(t,{K:()=>o});var n=r(8547);function o(e){return(0,n.f)(e,"item")}},8739:(e,t,r)=>{"use strict";r.d(t,{$G:()=>s,P2:()=>l,uo:()=>c,zy:()=>u});var n=r(8134),o=r(743),i=r(2431),a=r(9538);function s(e){return(0,a.ND)(e).then((function(t){var r=e.folderId?(0,i.a)(e)+"/content/users/"+t+"/"+e.folderId+"/items/"+e.item.id+"/update":(0,i.a)(e)+"/content/users/"+t+"/items/"+e.item.id+"/update";return e.params=(0,n.pi)((0,n.pi)({},e.params),(0,a.lY)(e.item)),e.params.extent&&(0,a.pi)(e.params.extent)&&(e.params.extent=(0,a.CF)(e.params.extent)),e.params.file&&e.params.file.constructor&&"ReadStream"===e.params.file.constructor.name&&(e.params.dataSize=e.dataSize),(0,o.WY)(r,e)}))}function l(e){return(0,a.ND)(e).then((function(t){var r=(0,i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateinfo";return e.params=(0,n.pi)({folderName:e.folderName,file:e.file},e.params),(0,o.WY)(r,e)}))}function u(e){return(0,a.ND)(e).then((function(t){var r=(0,i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateResources";return e.params=(0,n.pi)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content},e.params),void 0!==e.private&&(e.params.access=e.private?"private":"inherit"),(0,o.WY)(r,e)}))}function c(e){return(0,a.ND)(e).then((function(t){var r=(0,i.a)(e)+"/content/users/"+t+"/items/"+e.itemId+"/move",a=e.folderId;return a||(a="/"),e.params=(0,n.pi)({folder:a},e.params),(0,o.WY)(r,e)}))}},9100:(e,t,r)=>{"use strict";r.d(t,{cN:()=>l,it:()=>c,wd:()=>u});var n=r(8134),o=r(4037),i=r(743),a=r(2431),s=r(9538);function l(e){var t=e.partNum;return!Number.isInteger(t)||t<1||t>1e4?Promise.reject(new Error("The part number must be an integer between 1 to 10000, inclusive.")):(0,s.ND)(e).then((function(r){var s=(0,a.a)(e)+"/content/users/"+r+"/items/"+e.id+"/addPart?partNum="+t,l=(0,o.t)(e,["file"],{params:(0,n.pi)({},e.params)});return(0,i.WY)(s,l)}))}function u(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/commit",l=(0,o.t)(e,[],{params:(0,n.pi)((0,n.pi)({},e.params),(0,s.lY)(e.item))});return(0,i.WY)(r,l)}))}function c(e){return(0,s.ND)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/cancel";return(0,i.WY)(r,e)}))}},5621:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(8134),o=r(743),i=r(2431),a=r(901);function s(e){var t=(0,i.a)(e)+"/portals/self/createNotification",r=function(e){return(0,a.y)(e.users,e.batchSize||25).map((function(t){return function(e,t){var r=Object.assign({},t);return r.params=(0,n.pi)((0,n.pi)({},r.params),{users:e,subject:t.subject,message:t.message,notificationChannelType:r.notificationChannelType}),r}(t,e)}))}(e),s=r.map((function(e){return function(e,t){return(0,o.WY)(e,t).catch((function(e){return{errors:[e]}}))}(t,e)}));return Promise.all(s).then(l)}function l(e){var t=e.every((function(e){return e.success})),r=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),n={success:t};return r.length>0&&(n.errors=r),n}},3826:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var n=r(2827);function o(e,t,r,i){var a=e;return i&&(a=e+"_"+i),(0,n.N)(a,t,r).then((function(n){return n.available?a:o(e,t,r,i+=1)}))}},2827:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var n=r(743);function o(e,t,r){var o=r.portal+"/portals/self/isServiceNameAvailable";return(0,n.WY)(o,{params:{name:e,type:t},httpMethod:"GET",authentication:r})}},5582:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var n=r(8134),o=r(743),i=r(9207);function a(e){var t=(0,i.Zl)(e);return(0,i.$Z)(e)?s(t,e):(0,i.RN)(e).then((function(r){if(r)return s(t,e);throw Error("This item can not be shared by "+e.authentication.username+". They are neither the item owner nor an organization admin.")}))}function s(e,t){return t.params=(0,n.pi)({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.account=!0,t.params.everyone=!0),(0,o.WY)(e,t)}},9207:(e,t,r)=>{"use strict";r.d(t,{$Z:()=>a,RN:()=>s,Xj:()=>l,Zl:()=>i});var n=r(2431),o=r(6765);function i(e){var t=e.authentication.username,r=e.owner||t;return(0,n.a)(e)+"/content/users/"+encodeURIComponent(r)+"/items/"+e.id+"/share"}function a(e){var t=e.authentication.username;return(e.owner||t)===t}function s(e){return e.authentication.getUser(e).then((function(e){return e&&"org_admin"===e.role&&!e.roleId}))}function l(e){return(0,o.ex)(e.groupId,e).then((function(e){return e.userMembership.memberType})).catch((function(){return"none"}))}},2049:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});var n=r(5128);function o(e){var t={q:"id: "+e.id+" AND group: "+e.groupId,start:1,num:10,sortField:"title",authentication:e.authentication,httpMethod:"POST"};return(0,n.K)(t).then((function(t){if(t.total>0)return t.results.some((function(t){return t.id===e.id}))}))}},3809:(e,t,r)=>{"use strict";r.d(t,{J:()=>d,W:()=>f});var n=r(743),o=r(2431),i=r(9207),a=r(8818),s=r(3135),l=r(4269),u=r(1250),c=r(2049);function d(e){return(0,c.w)(e).then((function(t){if(t)return{itemId:e.id,shortcut:!0,notSharedWith:[]};var r=e.authentication.username,n=e.owner,o=e.confirmItemControl,s=n||r;if(s!==r){var l=!1,u=!1;return Promise.all([(0,a.P)({username:r,authentication:e.authentication}),(0,a.P)({username:s,authentication:e.authentication}),(0,i.Xj)(e)]).then((function(t){var r=t[0],n=t[1],i=t[2],a=!!o;return l="org_admin"===r.role&&!r.roleId,u=r.orgId!==n.orgId,function(e,t,r,n,o,i){var a=[];if(i.groupId!==e.favGroupId)if(t){if(!n)throw Error("This item can not be shared to shared editing group "+i.groupId+" by "+e.username+" as they not the item owner or org admin.");a.push(f(e,e,!1,"Error adding "+e.username+" as member to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i),f(e,o,!0,"none"===r?"Error adding user "+o.username+" to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.":"Error promoting user "+o.username+" to admin in edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i))}else if(n)a.push(f(e,e,!1,"Error adding "+e.username+" as member to view group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i));else if("none"===r)throw new Error("This item can not be shared by "+e.username+" as they are not a member of the specified group "+i.groupId+".");return a}(r,a,i,l,n,e)})).then((function(t){var r=t[0],n=(void 0===r?{promise:Promise.resolve({notAdded:[]}),revert:function(e){return Promise.resolve(e)}}:r).revert;return Promise.all(t.map((function(e){return e.promise}))).then((function(){return p(e,l,u)})).then((function(e){return n(e)}))}))}return p(e)})).then((function(t){if(t.notSharedWith.length)throw Error("Item "+e.id+" could not be shared to group "+e.groupId+".");return t}))}function p(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=e.authentication.username,a=e.owner||i,s=(0,o.a)(e)+"/content/items/"+e.id+"/share";return(a===i||t&&!r)&&(s=(0,o.a)(e)+"/content/users/"+a+"/items/"+e.id+"/share"),e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},(0,n.WY)(s,e)}function f(e,t,r,n,o){var i,a,c,d=t.groups||[],p=d.find((function(e){return e.id===o.groupId}));if(e.orgId!==t.orgId)throw Error("User "+t.username+" is not a member of the same org as "+e.username+". Consequently they can not be added added to group "+o.groupId+" nor can item "+o.id+" be shared to the group.");if(!p&&d.length>511)throw Error("User "+t.username+" already has 512 groups, and can not be added to group "+o.groupId+". Consequently item "+o.id+" can not be shared to the group.");if(p)r&&"member"===p.userMembership.memberType?(a=(0,u.S)({id:o.groupId,users:[t.username],newMemberType:"admin",authentication:o.authentication}).then((function(e){var t=e.results.reduce((function(e,t){return t.success||e.push(t.username),e}),[]);return Promise.resolve({notAdded:t})})).catch((function(){return{notAdded:[t.username]}})),c=function(e){return(0,u.S)({id:o.groupId,users:[t.username],newMemberType:"member",authentication:o.authentication}).then((function(){return e})).catch((function(){return e}))}):(a=Promise.resolve({notAdded:[]}),c=function(e){return Promise.resolve(e)});else{var f=r?"admins":"users";a=(0,s.i)((i={id:o.groupId},i[f]=[t.username],i.authentication=o.authentication,i)).then((function(e){if(e.errors&&e.errors.length)throw e.errors[0];return e})).catch((function(){return{notAdded:[t.username]}})),c=function(e){return(0,l.B)({id:o.groupId,users:[t.username],authentication:o.authentication}).then((function(){return e}))}}return{promise:a.then((function(e){if(e.notAdded.length)throw new Error(n);return e})),revert:c}}},107:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var n=r(743),o=r(2431),i=r(9207),a=r(2049),s=r(8818);function l(e){return(0,a.w)(e).then((function(t){if(!t)return Promise.resolve({itemId:e.id,shortcut:!0,notUnsharedFrom:[]});var r=e.authentication.username,a=e.owner;return Promise.all([(0,i.Xj)(e),(0,s.P)({username:r,authentication:e.authentication})]).then((function(t){var i=t[0],s=t[1],l=(a||r)===r,u="org_admin"===s.role&&!s.roleId;if(!l&&!u&&["admin","owner"].indexOf(i)<0)throw Error("This item can not be unshared from group "+e.groupId+" by "+r+" as they not the item owner, an org admin, group admin or group owner.");return function(e){var t=e.authentication.username,r=e.owner||t,i=(0,o.a)(e)+"/content/items/"+e.id+"/unshare";return r===t&&(i=(0,o.a)(e)+"/content/users/"+r+"/items/"+e.id+"/unshare"),e.params={groups:e.groupId},(0,n.WY)(i,e)}(e)})).then((function(t){if(t.notUnsharedFrom.length)throw Error("Item "+e.id+" could not be unshared to group "+e.groupId);return t}))}))}},4659:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e,t){return(0,n.mG)(this,void 0,void 0,(function(){var r,a;return(0,n.Jh)(this,(function(s){switch(s.label){case 0:return r=(0,i.a)(t)+"/community/users/"+encodeURIComponent(e)+"/properties",[4,(0,o.WY)(r,(0,n.pi)({httpMethod:"GET"},t))];case 1:return(a=s.sent()).properties.mapViewer||(a.properties.mapViewer="modern"),[2,a.properties]}}))}))}},8649:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(743),o=r(2431);function i(e){var t=e.username||e.authentication.username,r=(0,o.a)(e)+"/community/users/"+encodeURIComponent(t)+"/tags";return(0,n.WY)(r,e)}},4203:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var n=r(2431);function o(e){return(0,n.a)(e)+"/community/users/"+encodeURIComponent(e.username)}},8818:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e){var t,r={httpMethod:"GET"};if("string"==typeof e)t="https://www.arcgis.com/sharing/rest/community/users/"+e;else{var a=e.username||e.authentication.username;t=(0,i.a)(e)+"/community/users/"+encodeURIComponent(a),r=(0,n.pi)((0,n.pi)({},e),r)}return(0,o.WY)(t,r)}},7357:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>u,OR:()=>a,Tg:()=>l,rm:()=>s});var n=r(8134),o=r(743),i=r(2431);function a(e){var t={httpMethod:"GET"},r=encodeURIComponent(e.authentication.username),a=(0,i.a)(e)+"/community/users/"+r+"/invitations";return t=(0,n.pi)((0,n.pi)({},e),t),(0,o.WY)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId,a={httpMethod:"GET"};return a=(0,n.pi)((0,n.pi)({},e),a),(0,o.WY)(r,a)}function l(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/accept",a=(0,n.pi)({},e);return(0,o.WY)(r,a)}function u(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/decline",a=(0,n.pi)({},e);return(0,o.WY)(r,a)}},3264:(e,t,r)=>{"use strict";r.d(t,{F:()=>s,g:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e){var t={httpMethod:"GET"},r=encodeURIComponent(e.authentication.username),a=(0,i.a)(e)+"/community/users/"+r+"/notifications";return t=(0,n.pi)((0,n.pi)({},e),t),(0,o.WY)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/notifications/"+e.id+"/delete";return(0,o.WY)(r,e)}},8:(e,t,r)=>{"use strict";r.d(t,{a:()=>o,p:()=>i});var n=r(8547);function o(e){return(0,n.f)(e,"user")}function i(e){return(0,n.f)(e,"communityUser")}},614:(e,t,r)=>{"use strict";r.d(t,{x:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e,t,r){return(0,n.mG)(this,void 0,void 0,(function(){var a,s,l,u;return(0,n.Jh)(this,(function(c){switch(c.label){case 0:a=(0,i.a)(r)+"/community/users/"+encodeURIComponent(e)+"/setProperties",s=(0,n.pi)({httpMethod:"POST",params:{properties:t}},r),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(0,o.WY)(a,s)];case 2:if(!(l=c.sent()).success)throw new Error("Success was false");return[2,l];case 3:throw u=c.sent(),new Error("Failed to set user properties: "+u.message);case 4:return[2]}}))}))}},1437:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e){var t=e.user.username||e.authentication.username,r=(0,i.a)(e)+"/community/users/"+encodeURIComponent(t)+"/update";return e.params=(0,n.pi)((0,n.pi)({},e.user),e.params),delete e.user,(0,o.WY)(r,e)}},6761:(e,t,r)=>{"use strict";r.d(t,{q:()=>o});var n=r(5297),o=function(){function e(e){void 0===e&&(e=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}return e.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.termStack=this.termStack.concat(e),this},e.prototype.in=function(e){var t="`in("+(e?'"'+e+'"':"")+")`";return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=e+":"),this.commit()):((0,n.Z)(t+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},e.prototype.startGroup=function(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this},e.prototype.endGroup=function(){return this.openGroups<=0?((0,n.Z)("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)},e.prototype.and=function(){return this.addModifier("and")},e.prototype.or=function(){return this.addModifier("or")},e.prototype.not=function(){return this.addModifier("not")},e.prototype.from=function(e){return this.hasTerms?((0,n.Z)('`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01").  Your query was not modified.'),this):(this.rangeStack[0]=e,this)},e.prototype.to=function(e){return this.hasTerms?((0,n.Z)('`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01"). Your query was not modified.'),this):(this.rangeStack[1]=e,this)},e.prototype.boost=function(e){return this.commit(),this.q+="^"+e,this},e.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},e.prototype.clone=function(){return this.commit(),this.cleanup(),new e(this.q+"")},e.prototype.addModifier=function(e){return this.currentModifer?((0,n.Z)("You have called `"+this.currentModifer+"()` after `"+e+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==e?((0,n.Z)("You have called `"+e+"()` without calling another method to modify your query first. Try calling `match()` first."),this):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=e.toUpperCase()+" ",this))},e.prototype.needsQuotes=function(e){return/\s|:/g.test(e)},e.prototype.formatTerm=function(e){return e instanceof Date?e.getTime():"string"==typeof e&&this.needsQuotes(e)?'"'+e+'"':e},e.prototype.commit=function(){var e=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map((function(t){return e.formatTerm(t)})).join(" "),this.termStack=[]),this},Object.defineProperty(e.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){if(this.openGroups>0)for((0,n.Z)("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");this.openGroups>0;)this.q+=")",this.openGroups--;var e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&(0,n.Z)("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")},e}()},901:(e,t,r)=>{"use strict";function n(e,t){if(0===e.length)return[];for(var r=[],n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}r.d(t,{y:()=>n})},8547:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var n=r(4037),o=r(743),i=r(6761),a=r(2431);function s(e,t){var r,l;switch(r="string"==typeof e||e instanceof i.q?{httpMethod:"GET",params:{q:e}}:(0,n.t)(e,["q","num","start","sortField","sortOrder","searchUserAccess","searchUserName","filter","countFields","countSize","categories","categoryFilters"],{httpMethod:"GET"}),t){case"item":l="/search";break;case"group":l="/community/groups";break;case"groupContent":if("string"==typeof e||e instanceof i.q||!e.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));l="/content/groups/"+e.groupId+"/search";break;case"communityUser":l="/community/users";break;default:l="/portals/self/users/search"}var u=(0,a.a)(r)+l;return(0,o.WY)(u,r).then((function(r){return r.nextStart&&-1!==r.nextStart&&(r.nextPage=function(){var n;return"string"==typeof e||e instanceof i.q?n={q:e,start:r.nextStart}:(n=e).start=r.nextStart,s(n,t)}),r}))}},4570:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e,t){var r=e||"self",a=(0,i.a)(t)+"/portals/"+r+"/settings",s=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(a,s)}},2431:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var n=r(4734);function o(e){return void 0===e&&(e={}),e.portal?(0,n.b)(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}},1046:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,_:()=>s});var n=r(8134),o=r(743),i=r(2431);function a(e){return s(null,e)}function s(e,t){var r=e||"self",a=(0,i.a)(t)+"/portals/"+r,s=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(a,s)}},3379:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var n=r(8134),o=r(743),i=r(2431);function a(e,t){var r=e||"self",a=(0,i.a)(t)+"/portals/"+r+"/subscriptionInfo",s=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(a,s)}},5126:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=/[\x00-\x1F\x7F-\x9F\xA0]/g;function o(e){return e.replace(n,"")}},5522:()=>{},8134:(e,t,r)=>{"use strict";r.d(t,{Jh:()=>i,mG:()=>o,pi:()=>n,pr:()=>a});var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function o(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))}function i(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function a(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}},7825:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArcGISAuthError:()=>n.ah,ArcGISRequestError:()=>i.y,ErrorTypes:()=>c.Z,NODEJS_DEFAULT_REFERER_HEADER:()=>n.cv,appendCustomParams:()=>o.t,checkForErrors:()=>n.Pl,cleanUrl:()=>a.b,decodeParam:()=>u.Z,decodeQueryString:()=>u.N,encodeFormData:()=>s.h,encodeParam:()=>l.i,encodeQueryString:()=>l.t,processParams:()=>I.T,request:()=>n.WY,requiresFormData:()=>I.N,setDefaultRequestOptions:()=>n.Tb,warn:()=>O.Z});var n=r(743),o=r(4037),i=r(7705),a=r(4734),s=r(5091),l=r(9836),u=r(2508),c=r(1086),d=r(6025),p={};for(const e in d)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>d[e]);r.d(t,p);var f=r(4990);p={};for(const e in f)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>f[e]);r.d(t,p);var h=r(8546);p={};for(const e in h)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>h[e]);r.d(t,p);var g=r(8372);p={};for(const e in g)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>g[e]);r.d(t,p);var m=r(1346);p={};for(const e in m)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>m[e]);r.d(t,p);var v=r(1795);p={};for(const e in v)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>v[e]);r.d(t,p);var y=r(8462);p={};for(const e in y)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>y[e]);r.d(t,p);var S=r(7274);p={};for(const e in S)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>S[e]);r.d(t,p);var b=r(5431);p={};for(const e in b)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>b[e]);r.d(t,p);var w=r(961);p={};for(const e in w)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>w[e]);r.d(t,p);var I=r(8060),E=r(3739);p={};for(const e in E)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","processParams","requiresFormData"].indexOf(e)<0&&(p[e]=()=>E[e]);r.d(t,p);var C=r(125);p={};for(const e in C)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","processParams","requiresFormData"].indexOf(e)<0&&(p[e]=()=>C[e]);r.d(t,p);var O=r(5297)},743:(e,t,r)=>{"use strict";r.d(t,{Pl:()=>f,Tb:()=>d,WY:()=>h,ah:()=>p,cv:()=>u});var n=r(4765),o=r(5091),i=r(9836),a=r(8060),s=r(7705),l=r(5297),u="@esri/arcgis-rest-js",c={httpMethod:"POST",params:{f:"json"}};function d(e,t){e.authentication&&!t&&(0,l.Z)("You should not set `authentication` as a default in a shared environment such as a web server which will process multiple users requests. You can call `setDefaultRequestOptions` with `true` as a second argument to disable this warning."),c=e}var p=function(e){function t(t,r,n,o,i){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===r&&(r="AUTHENTICATION_ERROR_CODE");var a=e.call(this,t,r,n,o,i)||this;return a.name="ArcGISAuthError",a.message="AUTHENTICATION_ERROR_CODE"===r?t:r+": "+t,a}return(0,n.ZT)(t,e),t.prototype.retry=function(e,t){var r=this;void 0===t&&(t=3);var o=0,i=function(a,s){e(r.url,r.options).then((function(e){var t=(0,n.pi)((0,n.pi)({},r.options),{authentication:e});return o+=1,h(r.url,t)})).then((function(e){a(e)})).catch((function(e){"ArcGISAuthError"===e.name&&o<t?i(a,s):"ArcGISAuthError"===e.name&&o>=t?s(r):s(e)}))};return new Promise((function(e,t){i(e,t)}))},t}(s.y);function f(e,t,r,n,o){if(e.code>=400){var i=e.message,a=e.code;throw new s.y(i,a,e,t,n)}if(e.error){var l=e.error,u=(i=l.message,a=l.code,l.messageCode),c=u||a||"UNKNOWN_ERROR_CODE";if(498===a||499===a||"GWM_0003"===u||400===a&&"Unable to generate token."===i)throw o||new p(i,c,e,t,n);throw new s.y(i,c,e,t,n)}if("failed"===e.status||"failure"===e.status){i=void 0,a="UNKNOWN_ERROR_CODE";try{i=JSON.parse(e.statusMessage).message,a=JSON.parse(e.statusMessage).code}catch(t){i=e.statusMessage||e.message}throw new s.y(i,a,e,t,n)}return e}function h(e,t){void 0===t&&(t={params:{f:"json"}});var r=(0,n.pi)((0,n.pi)((0,n.pi)({httpMethod:"POST"},c),t),{params:(0,n.pi)((0,n.pi)({},c.params),t.params),headers:(0,n.pi)((0,n.pi)({},c.headers),t.headers)}),l=[],d=[];if(r.fetch||"undefined"==typeof fetch?(l.push("`fetch`"),d.push("`node-fetch`")):r.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(l.push("`Promise`"),d.push("`es6-promise`")),"undefined"==typeof FormData&&(l.push("`FormData`"),d.push("`isomorphic-form-data`")),!r.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+l.join(", ")+". We recommend installing the "+d.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var p=r.httpMethod,h=r.authentication,g=r.rawResponse,m=(0,n.pi)({f:"json"},r.params),v=null,y={method:p,credentials:r.credentials||"same-origin"};return r.headers&&r.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(y.credentials="include"),(h?h.getToken(e,{fetch:r.fetch}).catch((function(t){return t.url=e,t.options=r,v=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(m.token=t),h&&h.getDomainCredentials&&(y.credentials=h.getDomainCredentials(e));var s={};if("GET"===y.method){m.token&&r.hideToken&&"undefined"==typeof window&&(s["X-Esri-Authorization"]="Bearer "+m.token,delete m.token);var l=""===(0,i.t)(m)?e:e+"?"+(0,i.t)(m);r.maxUrlLength&&l.length>r.maxUrlLength||m.token&&r.hideToken?(y.method="POST",t.length&&r.hideToken&&(m.token=t,delete s["X-Esri-Authorization"])):e=l}var c=new RegExp("/items/.+/updateResources").test(e);return"POST"===y.method&&(y.body=(0,o.h)(m,c)),y.headers=(0,n.pi)((0,n.pi)({},s),r.headers),"undefined"!=typeof window||y.headers.referer||(y.headers.referer=u),(0,a.N)(m)||c||(y.headers["Content-Type"]="application/x-www-form-urlencoded"),r.fetch(e,y)})).then((function(t){if(!t.ok){var n=t.status,o=t.statusText;throw new s.y(o,"HTTP "+n,t,e,r)}if(g)return t;switch(m.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==m.f&&"geojson"!==m.f||g)return t;var n=f(t,e,0,r,v);if(v){var o=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];r.authentication.federatedServers[o]={token:[],expires:new Date(Date.now()+864e5)},v=null}return n}))}},7705:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var n=function(e,t,r,n,o){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=r,this.url=n,this.options=o};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n},1086:(e,t,r)=>{"use strict";var n;r.d(t,{Z:()=>n}),function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError"}(n||(n={}))},6025:()=>{},4990:()=>{},8546:()=>{},8372:()=>{},1346:()=>{},8462:()=>{},1795:()=>{},7274:()=>{},5431:()=>{},961:()=>{},3739:()=>{},4037:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(4765);function o(e,t,r){var o=(0,n.pi)((0,n.pi)({params:{}},r),e);return o.params=t.reduce((function(t,r){return(e[r]||"boolean"==typeof e[r])&&(t[r]=e[r]),t}),o.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return o[t]&&(e[t]=o[t]),e}),{})}},4734:(e,t,r)=>{"use strict";function n(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}r.d(t,{b:()=>n})},2508:(e,t,r)=>{"use strict";function n(e){var t=e.split("="),r=t[0],n=t[1];return{key:decodeURIComponent(r),value:decodeURIComponent(n)}}function o(e){return e.replace(/^#/,"").split("&").reduce((function(e,t){var r=n(t),o=r.key,i=r.value;return e[o]=i,e}),{})}r.d(t,{N:()=>o,Z:()=>n})},5091:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});var n=r(8060),o=r(9836);function i(e,t){var r=(0,n.N)(e)||t,i=(0,n.T)(e);if(r){var a=new FormData;return Object.keys(i).forEach((function(e){if("undefined"!=typeof Blob&&i[e]instanceof Blob){var t=i.fileName||i[e].name||e;a.append(e,i[e],t)}else i[e].constructor&&"ReadStream"===i[e].constructor.name&&Number.isInteger(i.dataSize)?a.append(e,i[e],{knownLength:i.dataSize}):a.append(e,i[e])})),a}return(0,o.t)(e)}},9836:(e,t,r)=>{"use strict";r.d(t,{i:()=>o,t:()=>i});var n=r(8060);function o(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return o(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function i(e){var t=(0,n.T)(e);return Object.keys(t).map((function(e){return o(e,t[e])})).join("&")}},8060:(e,t,r)=>{"use strict";function n(e){return Object.keys(e).some((function(t){var r=e[t];if(!r)return!1;switch(r&&r.toParam&&(r=r.toParam()),r.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function o(e){var t={};return Object.keys(e).forEach((function(r){var n,o,i=e[r];if(i&&i.toParam&&(i=i.toParam()),i||0===i||"boolean"==typeof i||"string"==typeof i){var a;switch(i.constructor.name){case"Array":var s=null===(o=null===(n=i[0])||void 0===n?void 0:n.constructor)||void 0===o?void 0:o.name;a="Array"===s?i:"Object"===s?JSON.stringify(i):i.join(",");break;case"Object":a=JSON.stringify(i);break;case"Date":a=i.valueOf();break;case"Function":a=null;break;case"Boolean":a=i+"";break;default:a=i}(a||0===a||"string"==typeof a||Array.isArray(a))&&(t[r]=a)}})),t}r.d(t,{N:()=>n,T:()=>o})},125:()=>{},5297:(e,t,r)=>{"use strict";function n(e){console&&console.warn&&console.warn.apply(console,[e])}r.d(t,{Z:()=>n})},4765:(e,t,r)=>{"use strict";r.d(t,{ZT:()=>o,pi:()=>i});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)}},4184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},2667:(e,t,r)=>{var n=r(9950),o=r(5419);function i(e){return null==e}function a(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||n.whiteList,e.onAttr=e.onAttr||n.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||n.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||n.safeAttrValue,this.options=e}r(7381),a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return o(e,(function(e,t,o,l,u){var c=r[o],d=!1;if(!0===c?d=c:"function"==typeof c?d=c(l):c instanceof RegExp&&(d=c.test(l)),!0!==d&&(d=!1),l=s(o,l)){var p,f={position:t,sourcePosition:e,source:u,isWhite:d};return d?i(p=n(o,l,f))?o+":"+l:p:i(p=a(o,l,f))?void 0:p}}))},e.exports=a},9950:(e,t)=>{function r(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var n=/javascript\s*\:/gim;t.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},t.getDefaultWhiteList=r,t.onAttr=function(e,t,r){},t.onIgnoreAttr=function(e,t,r){},t.safeAttrValue=function(e,t){return n.test(t)?"":t}},9970:(e,t,r)=>{var n=r(9950),o=r(2667);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,n)t[i]=n[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},5419:(e,t,r)=>{var n=r(7381);e.exports=function(e,t){";"!==(e=n.trimRight(e))[e.length-1]&&(e+=";");var r=e.length,o=!1,i=0,a=0,s="";function l(){if(!o){var r=n.trim(e.slice(i,a)),l=r.indexOf(":");if(-1!==l){var u=n.trim(r.slice(0,l)),c=n.trim(r.slice(l+1));if(u){var d=t(i,s.length,u,c,r);d&&(s+=d+"; ")}}}i=a+1}for(;a<r;a++){var u=e[a];if("/"===u&&"*"===e[a+1]){var c=e.indexOf("*/",a+2);if(-1===c)break;i=(a=c+1)+1,o=!1}else"("===u?o=!0:")"===u?o=!1:";"===u?o||l():"\n"===u&&l()}return n.trim(s)}},7381:e=>{e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},3162:function(e,t,r){var n,o;void 0===(o="function"==typeof(n=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r.g&&r.g.global===r.g?r.g:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,r,a){var s=i.URL||i.webkitURL,l=document.createElement("a");r=r||e.name||"download",l.download=r,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):n(l.href)?t(e,r,a):o(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,i){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),r);else if(n(e))t(e,r,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){o(a)}))}}:function(e,r,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,p=d.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s})?n.apply(t,[]):n)||(e.exports=o)},8679:(e,t,r)=>{"use strict";var n=r(9864),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||o}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(h){var o=f(r);o&&o!==h&&e(t,o,n)}var a=c(r);d&&(a=a.concat(d(r)));for(var s=l(t),g=l(r),m=0;m<a.length;++m){var v=a[m];if(!(i[v]||n&&n[v]||g&&g[v]||s&&s[v])){var y=p(r,v);try{u(t,v,y)}catch(e){}}}}return t}},6128:e=>{"use strict";e.exports=function(e,t,r,n,o,i,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},2705:(e,t,r)=>{var n=r(5639).Symbol;e.exports=n},4239:(e,t,r)=>{var n=r(2705),o=r(9607),i=r(2333),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},7561:(e,t,r)=>{var n=r(7990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},1957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},9607:(e,t,r)=>{var n=r(2705),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5639:(e,t,r)=>{var n=r(1957),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},7990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},3279:(e,t,r)=>{var n=r(3218),o=r(7771),i=r(4841),a=Math.max,s=Math.min;e.exports=function(e,t,r){var l,u,c,d,p,f,h=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=l,n=u;return l=u=void 0,h=t,d=e.apply(n,r)}function S(e){var r=e-f;return void 0===f||r>=t||r<0||m&&e-h>=c}function b(){var e=o();if(S(e))return w(e);p=setTimeout(b,function(e){var r=t-(e-f);return m?s(r,c-(e-h)):r}(e))}function w(e){return p=void 0,v&&l?y(e):(l=u=void 0,d)}function I(){var e=o(),r=S(e);if(l=arguments,u=this,f=e,r){if(void 0===p)return function(e){return h=e,p=setTimeout(b,t),g?y(e):d}(f);if(m)return clearTimeout(p),p=setTimeout(b,t),y(f)}return void 0===p&&(p=setTimeout(b,t)),d}return t=i(t)||0,n(r)&&(g=!!r.leading,c=(m="maxWait"in r)?a(i(r.maxWait)||0,t):c,v="trailing"in r?!!r.trailing:v),I.cancel=function(){void 0!==p&&clearTimeout(p),h=0,l=f=u=p=void 0},I.flush=function(){return void 0===p?d:w(o())},I}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,r)=>{var n=r(4239),o=r(7005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},7771:(e,t,r)=>{var n=r(5639);e.exports=function(){return n.Date.now()}},2614:(e,t,r)=>{var n=r(3279),o=r(3218);e.exports=function(e,t,r){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),n(e,t,{leading:i,maxWait:t,trailing:a})}},4841:(e,t,r)=>{var n=r(7561),o=r(3218),i=r(3448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||l.test(e)?u(e.slice(2),r?2:8):a.test(e)?NaN:+e}},745:(e,t,r)=>{"use strict";var n=r(800);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},9921:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case d:case i:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case u:case p:case m:case g:case l:return e;default:return t}}case o:return t}}}function I(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=n,t.ForwardRef=p,t.Fragment=i,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return I(e)||w(e)===c},t.isConcurrentMode=I,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===s||e===a||e===f||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===S||e.$$typeof===b||e.$$typeof===v)},t.typeOf=w},9864:(e,t,r)=>{"use strict";e.exports=r(9921)},8359:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case i:case d:case p:return e;default:switch(e=e&&e.$$typeof){case u:case l:case c:case h:case f:case s:return e;default:return t}}case n:return t}}}(e)===l}},2973:(e,t,r)=>{"use strict";e.exports=r(8359)},759:(e,t,r)=>{var n;!function(){"use strict";var o=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o=60103,i={use_static:!1};function a(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(i.use_static=Boolean(t.use_static));var l="__immutable_invariants_hold";function u(e){return"object"!=typeof e||null===e||Boolean(Object.getOwnPropertyDescriptor(e,l))}function c(e,t){return e===t||e!=e&&t!=t}function d(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],f=(p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function h(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function g(e,t){return s(e,l,!0),e}function m(e,t){var r=e[t];s(e,t,(function(){return W(r.apply(e,arguments))}))}function v(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&d(t)&&d(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var o=C.call(this);return o[e]=W(t),b(o)}p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),h.prototype=new Error,h.prototype.constructor=Error;var y=W([]);function S(e,t,r){var n=e[0];if(1===e.length)return v.call(this,n,t,r);var o,i=e.slice(1),a=this[n];if("object"==typeof a&&null!==a)o=W.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?S.call(y,i,t):L.call(k,i,t)}if(n in this&&a===o)return this;var l=C.call(this);return l[n]=o,b(l)}function b(e){for(var t in f)f.hasOwnProperty(t)&&m(e,f[t]);i.use_static||(s(e,"flatMap",I),s(e,"asObject",O),s(e,"asMutable",C),s(e,"set",v),s(e,"setIn",S),s(e,"update",M),s(e,"updateIn",U),s(e,"getIn",F));for(var r=0,n=e.length;r<n;r++)e[r]=W(e[r]);return g(e)}function w(){return new Date(this.getTime())}function I(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return b(r)}function E(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=a(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return G(r)}function C(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(x(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function O(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this),i=o[0],a=o[1];r[i]=a}return G(r)}function x(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,l)||e instanceof Date?e:W.asMutable(e,{deep:!0})}function T(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function A(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,o=Array.isArray(e),i=t&&t.deep,s=t&&t.mode||"merge",l=t&&t.merger;function u(e,n,o){var s,u=W(n[o]),p=l&&l(e[o],u,t),f=e[o];void 0===r&&void 0===p&&e.hasOwnProperty(o)&&c(u,f)||c(f,s=void 0!==p?p:i&&d(f)&&d(u)?W.merge(f,u,t):u)&&e.hasOwnProperty(o)||(void 0===r&&(r=T(e,a(e))),r[o]=s)}if(o)for(var p=0,f=e.length;p<f;p++){var h=e[p];for(n in h)h.hasOwnProperty(n)&&u(void 0!==r?r:this,h,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&u(this,e,n);"replace"===s&&function(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=T(e,a(e))),delete r[n])}(this,e)}return void 0===r?this:G(r)}function P(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return W.merge(this,e,{deep:r,mode:"replace"})}var D,R,_,k=W({});function L(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return N.call(this,n,t,r);var o,i=e.slice(1),s=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof s&&null!==s?W.setIn(s,i,t):L.call(k,i,t),this.hasOwnProperty(n)&&s===o)return this;var l=T(this,a(this));return l[n]=o,G(l)}function N(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&d(t)&&d(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var o=T(this,a(this));return o[e]=W(t),G(o)}function M(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return W.set(this,e,t.apply(n,[n].concat(r)))}function j(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function U(e,t){var r=Array.prototype.slice.call(arguments,2),n=j(this,e);return W.setIn(this,e,t.apply(n,[n].concat(r)))}function F(e,t){var r=j(this,e);return void 0===r?t:r}function B(e){var t,r=a(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=x(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function $(){return{}}function G(e){return i.use_static||(s(e,"merge",A),s(e,"replace",P),s(e,"without",E),s(e,"asMutable",B),s(e,"set",N),s(e,"setIn",L),s(e,"update",M),s(e,"updateIn",U),s(e,"getIn",F)),g(e)}function W(e,t,r){if(u(e)||function(e){return"object"==typeof e&&null!==e&&(e.$$typeof===o||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(W);if(Array.isArray(e))return b(e.slice());if(e instanceof Date)return a=new Date(e.getTime()),i.use_static||s(a,"asMutable",w),g(a);var a,l=t&&t.prototype,c=(l&&l!==Object.prototype?function(){return Object.create(l)}:$)();for(var d in e)Object.getOwnPropertyDescriptor(e,d)&&(c[d]=W(e[d],void 0,r));return G(c)}function V(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function H(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return W.from=W,W.isImmutable=u,W.ImmutableError=h,W.merge=V(A),W.replace=V(P),W.without=V(E),W.asMutable=(D=B,R=C,_=w,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?R.apply(t,e):t instanceof Date?_.apply(t,e):D.apply(t,e)}),W.set=H(N,v),W.setIn=H(L,S),W.update=V(M),W.updateIn=V(U),W.getIn=V(F),W.flatMap=V(I),W.asObject=V(O),i.use_static||(W.static=e({use_static:!0})),Object.freeze(W),W}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},2257:(e,t,r)=>{const n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=i(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=o;const i=r(2893),{safeRe:a,t:s}=r(5765),l=r(7539),u=r(4225),c=r(6376),d=r(6902)},6902:(e,t,r)=>{class n{constructor(e,t){if(t=i(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!m(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+e,r=o.get(t);if(r)return r;const n=this.options.loose,i=n?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE];e=e.replace(i,P(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(u[c.COMPARATORTRIM],d),s("comparator trim",e),e=e.replace(u[c.TILDETRIM],p),s("tilde trim",e),e=e.replace(u[c.CARETTRIM],f),s("caret trim",e);let l=e.split(" ").map((e=>S(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));n&&(l=l.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(u[c.COMPARATORLOOSE]))))),s("range list",l);const v=new Map,y=l.map((e=>new a(e,this.options)));for(const e of y){if(m(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const b=[...v.values()];return o.set(t,b),b}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(D(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const o=new(r(6062))({max:1e3}),i=r(2893),a=r(2257),s=r(4225),l=r(6376),{safeRe:u,t:c,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=r(5765),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=r(3295),m=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},S=(e,t)=>(s("comp",e,t),e=E(e,t),s("caret",e),e=w(e,t),s("tildes",e),e=O(e,t),s("xrange",e),e=T(e,t),s("stars",e),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>I(e,t))).join(" "),I=(e,t)=>{const r=t.loose?u[c.TILDELOOSE]:u[c.TILDE];return e.replace(r,((t,r,n,o,i)=>{let a;return s("tilde",e,t,r,n,o,i),b(r)?a="":b(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:b(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(s("replaceTilde pr",i),a=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,s("tilde return",a),a}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>C(e,t))).join(" "),C=(e,t)=>{s("caret",e,t);const r=t.loose?u[c.CARETLOOSE]:u[c.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,i,a)=>{let l;return s("caret",e,t,r,o,i,a),b(r)?l="":b(o)?l=`>=${r}.0.0${n} <${+r+1}.0.0-0`:b(i)?l="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(s("replaceCaret pr",a),l="0"===r?"0"===o?`>=${r}.${o}.${i}-${a} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${a} <${+r+1}.0.0-0`):(s("no pr"),l="0"===r?"0"===o?`>=${r}.${o}.${i}${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),s("caret return",l),l}))},O=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>x(e,t))).join(" ")),x=(e,t)=>{e=e.trim();const r=t.loose?u[c.XRANGELOOSE]:u[c.XRANGE];return e.replace(r,((r,n,o,i,a,l)=>{s("xRange",e,r,n,o,i,a,l);const u=b(o),c=u||b(i),d=c||b(a),p=d;return"="===n&&p&&(n=""),l=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(i=0),a=0,">"===n?(n=">=",c?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",c?o=+o+1:i=+i+1),"<"===n&&(l="-0"),r=`${n+o}.${i}.${a}${l}`):c?r=`>=${o}.0.0${l} <${+o+1}.0.0-0`:d&&(r=`>=${o}.${i}.0${l} <${o}.${+i+1}.0-0`),s("xRange return",r),r}))},T=(e,t)=>(s("replaceStars",e,t),e.trim().replace(u[c.STAR],"")),A=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),P=e=>(t,r,n,o,i,a,s,l,u,c,d,p,f)=>`${r=b(n)?"":b(o)?`>=${n}.0.0${e?"-0":""}`:b(i)?`>=${n}.${o}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=b(u)?"":b(c)?`<${+u+1}.0.0-0`:b(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),D=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6376:(e,t,r)=>{const n=r(4225),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(3295),{safeRe:a,t:s}=r(5765),l=r(2893),{compareIdentifiers:u}=r(6742);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return u(r,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],o=e.build[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return u(r,o)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},3507:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7539:(e,t,r)=>{const n=r(8718),o=r(1194),i=r(1312),a=r(5903),s=r(1544),l=r(2056);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return o(e,r,u);case">":return i(e,r,u);case">=":return a(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},9038:(e,t,r)=>{const n=r(6376),o=r(3959),{safeRe:i,t:a}=r(5765);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=i[a.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),i[a.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;i[a.COERCERTL].lastIndex=-1}else r=e.match(i[a.COERCE]);return null===r?null:o(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},8880:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>{const o=new n(e,r),i=new n(t,r);return o.compare(i)||o.compareBuild(i)}},7880:(e,t,r)=>{const n=r(6269);e.exports=(e,t)=>n(e,t,!0)},6269:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},2378:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,null,!0),o=n(t,null,!0),i=r.compare(o);if(0===i)return null;const a=i>0,s=a?r:o,l=a?o:r,u=!!s.prerelease.length;if(l.prerelease.length&&!u)return l.patch||l.minor?s.patch?"patch":s.minor?"minor":"major":"major";const c=u?"pre":"";return r.major!==o.major?c+"major":r.minor!==o.minor?c+"minor":r.patch!==o.patch?c+"patch":"prerelease"}},8718:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0===n(e,t,r)},1312:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>0},5903:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>=0},253:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r,o,i)=>{"string"==typeof r&&(i=o,o=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,o,i).version}catch(e){return null}}},1544:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<0},2056:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<=0},6378:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).major},7789:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).minor},1194:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0!==n(e,t,r)},3959:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},2358:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).patch},7559:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9795:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(t,e,r)},3657:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},5712:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},1100:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6397:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},1249:(e,t,r)=>{const n=r(5765),o=r(3295),i=r(6376),a=r(6742),s=r(3959),l=r(6397),u=r(3507),c=r(253),d=r(2378),p=r(6378),f=r(7789),h=r(2358),g=r(7559),m=r(6269),v=r(9795),y=r(7880),S=r(8880),b=r(1100),w=r(3657),I=r(1312),E=r(1544),C=r(8718),O=r(1194),x=r(5903),T=r(2056),A=r(7539),P=r(9038),D=r(2257),R=r(6902),_=r(5712),k=r(1042),L=r(5775),N=r(1657),M=r(5316),j=r(9042),U=r(6826),F=r(7606),B=r(32),$=r(2937),G=r(7908),W=r(799);e.exports={parse:s,valid:l,clean:u,inc:c,diff:d,major:p,minor:f,patch:h,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:S,sort:b,rsort:w,gt:I,lt:E,eq:C,neq:O,gte:x,lte:T,cmp:A,coerce:P,Comparator:D,Range:R,satisfies:_,toComparators:k,maxSatisfying:L,minSatisfying:N,minVersion:M,validRange:j,outside:U,gtr:F,ltr:B,intersects:$,simplifyRange:G,subset:W,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},6742:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),o=t.test(r);return n&&o&&(e=+e,r=+r),e===r?0:n&&!o?-1:o&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2893:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},5765:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=r(3295),a=r(4225),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.t={};let d=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[p,o]],h=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),o=d++;a(e,o,t),c[e]=o,u[o]=t,s[o]=new RegExp(t,r?"g":void 0),l[o]=new RegExp(n,r?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),h("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[c.NUMERICIDENTIFIER]}|${u[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NUMERICIDENTIFIERLOOSE]}|${u[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${p}+`),h("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),h("FULL",`^${u[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),h("LOOSE",`^${u[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),h("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",u[c.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},6062:(e,t,r)=>{"use strict";const n=r(2221),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1,g=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(m(e,t)){if(y(e,n),!e[s])return}else r&&(e[f]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},v=e=>{if(e[i]>e[o])for(let t=e[d].tail;e[i]>e[o]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[u]&&e[u](r.key,r.value),e[i]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class S{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const b=(e,t,r,n)=>{let o=r.value;m(e,o)&&(y(e,r),e[s]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||h;if(this[a]="function"!=typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,v(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,v(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[i]=0,this[d].forEach((e=>{e.length=this[a](e.value,e.key),this[i]+=e.length}))),v(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;b(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;b(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach((e=>this[u](e.key,e.value))),this[p]=new Map,this[d]=new n,this[i]=0}dump(){return this[d].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[a](t,e);if(this[p].has(e)){if(s>this[o])return y(this,this[p].get(e)),!1;const a=this[p].get(e).value;return this[u]&&(this[c]||this[u](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[i]+=s-a.length,a.length=s,this.get(e),v(this),!0}const f=new S(e,t,s,n,r);return f.length>this[o]?(this[u]&&this[u](e,t),!1):(this[i]+=f.length,this[d].unshift(f),this[p].set(e,this[d].head),v(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>g(this,t,!1)))}}},9307:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},2221:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function i(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var a=[];for(n=0;i&&n<t;n++)a.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<r.length;n++)i=o(this,i,r[n]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(9307)(n)}catch(e){}},7606:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,">",r)},2937:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},32:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,"<",r)},5775:(e,t,r)=>{const n=r(6376),o=r(6902);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&-1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},1657:(e,t,r)=>{const n=r(6376),o=r(6902);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},5316:(e,t,r)=>{const n=r(6376),o=r(6902),i=r(1312);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let a=null;o.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!i(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!a||r&&!i(r,a)||(r=a)}return r&&e.test(r)?r:null}},6826:(e,t,r)=>{const n=r(6376),o=r(2257),{ANY:i}=o,a=r(6902),s=r(5712),l=r(1312),u=r(1544),c=r(2056),d=r(5903);e.exports=(e,t,r,p)=>{let f,h,g,m,v;switch(e=new n(e,p),t=new a(t,p),r){case">":f=l,h=c,g=u,m=">",v=">=";break;case"<":f=u,h=d,g=l,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let a=null,s=null;if(n.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),a=a||e,s=s||e,f(e.semver,a.semver,p)?a=e:g(e.semver,s.semver,p)&&(s=e)})),a.operator===m||a.operator===v)return!1;if((!s.operator||s.operator===m)&&h(e,s.semver))return!1;if(s.operator===v&&g(e,s.semver))return!1}return!0}},7908:(e,t,r)=>{const n=r(5712),o=r(6269);e.exports=(e,t,r)=>{const i=[];let a=null,s=null;const l=e.sort(((e,t)=>o(e,t,r)));for(const e of l)n(e,t,r)?(s=e,a||(a=e)):(s&&i.push([a,s]),s=null,a=null);a&&i.push([a,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},799:(e,t,r)=>{const n=r(6902),o=r(2257),{ANY:i}=o,a=r(5712),s=r(6269),l=[new o(">=0.0.0-0")],u=[new o(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let o,c,f,h,g,m,v;for(const t of e)">"===t.operator||">="===t.operator?o=d(o,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):n.add(t.semver);if(n.size>1)return null;if(o&&c){if(f=s(o.semver,c.semver,r),f>0)return null;if(0===f&&(">="!==o.operator||"<="!==c.operator))return null}for(const e of n){if(o&&!a(e,String(o),r))return null;if(c&&!a(e,String(c),r))return null;for(const n of t)if(!a(e,String(n),r))return!1;return!0}let y=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,S=!(!o||r.includePrerelease||!o.semver.prerelease.length)&&o.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,o)if(S&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===S.major&&e.semver.minor===S.minor&&e.semver.patch===S.patch&&(S=!1),">"===e.operator||">="===e.operator){if(h=d(o,e,r),h===e&&h!==o)return!1}else if(">="===o.operator&&!a(o.semver,String(e),r))return!1;if(c)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=p(c,e,r),g===e&&g!==c)return!1}else if("<="===c.operator&&!a(c.semver,String(e),r))return!1;if(!e.operator&&(c||o)&&0!==f)return!1}return!(o&&m&&!c&&0!==f||c&&v&&!o&&0!==f||S||y)},d=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let o=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},1042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},119:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m14 4-6 8-6-8z"></path></svg>'},8940:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m4 2 8 6-8 6z"></path></svg>'},2534:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 3.5v9c0 1.933-3.134 3.5-7 3.5s-7-1.567-7-3.5v-9C1 1.567 4.134 0 8 0s7 1.567 7 3.5M2 5.304V6.5C2 7.692 4.615 9 8 9s6-1.308 6-2.5V5.304C12.775 6.32 10.546 7 8 7s-4.775-.68-6-1.696M8 10c2.546 0 4.775-.68 6-1.696V9.5c0 1.192-2.615 2.5-6 2.5s-6-1.308-6-2.5V8.304C3.225 9.32 5.454 10 8 10m6 1.304C12.775 12.32 10.546 13 8 13s-4.775-.68-6-1.696V12.5C2 13.692 4.615 15 8 15s6-1.308 6-2.5zM14 3.5C14 4.692 11.385 6 8 6S2 4.692 2 3.5 4.615 1 8 1s6 1.308 6 2.5" clip-rule="evenodd"></path></svg>'},129:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 2h14v12H1zm13 1H2v4h12zm0 5h-3v2h3zm0 3h-3v2h3zm-4 2v-2H6v2zm-5 0v-2H2v2zm-3-3h3V8H2zm8-2v2H6V8z" clip-rule="evenodd"></path></svg>'},9395:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6.973 11.484c0 .285.236.516.527.516a.522.522 0 0 0 .527-.516V1.976L10.6 4.473c.206.202.54.202.746 0a.508.508 0 0 0 0-.73L7.5 0 3.654 3.743a.508.508 0 0 0 0 .73c.206.202.54.202.746 0l2.573-2.497zM1 8v7h13V8h1v8H0V8z" clip-rule="evenodd"></path></svg>'},5749:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 1.53V0H1v1.53h.07l5.374 5.288v6.121l2.26 2.224a.5.5 0 0 0 .852-.356V6.825l5.382-5.295zM2 1h12v.049L8.556 6.406l-.001 7.207-1.111-1.093V6.399L2 1.042z" clip-rule="evenodd"></path></svg>'},7360:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.547 1.788A.5.5 0 0 1 3 1.5h9.167c.358 0 .699.147.947.403.249.255.386.599.386.954v1.714a.5.5 0 0 1-1 0V2.857a.37.37 0 0 0-.103-.257.322.322 0 0 0-.23-.1h-8.1l4.317 5.18a.5.5 0 0 1 0 .64L4.068 13.5h8.099a.322.322 0 0 0 .23-.1.37.37 0 0 0 .103-.257v-1.714a.5.5 0 1 1 1 0v1.714c0 .355-.137.699-.386.954-.248.257-.59.403-.947.403H3a.5.5 0 0 1-.384-.82L7.349 8 2.616 2.32a.5.5 0 0 1-.069-.532" clip-rule="evenodd"></path></svg>'},9431:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M2 0v9h1V1h7v4h4v4h1V3.6L11.4 0zm12 4h-3V1h.31L14 3.69zM1.5 13.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2M14.57 10h1.05l-1.615 5.059h-.994L11.421 10h1.047l1.044 3.317zM4 11v3h2v1H3v-5h3v1zm4 0v1h2v3H7v-1h2v-1H7v-3h3v1z" clip-rule="evenodd"></path></svg>'},5124:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m8 0 8 6-8 6-8-6zM1.887 6 8 10.82 14.113 6 8 1.18zM0 9.81.563 9 8 14.775 15.437 9l.563.81L8 16z" clip-rule="evenodd"></path></svg>'},8103:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 1.5a1.5 1.5 0 0 1-2.147 1.354l-11 11a1.5 1.5 0 1 1-.707-.707l11-11A1.5 1.5 0 1 1 16 1.5" clip-rule="evenodd"></path></svg>'},3185:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M0 3.307V15l5.722-2.117 4.528 1.937L16 12.693V1l-5.722 2.117L5.75 1.18zm1 10.286V3.974l4-1.48v9.619zm5-1.65 4 1.711V4.057L6 2.346zm5 1.563V3.887l4-1.48v9.619z" clip-rule="evenodd"></path></svg>'},9487:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-2 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M15 10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" clip-rule="evenodd"></path></svg>'},6992:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.915 1A1.5 1.5 0 1 0 1 2.915v10.17A1.5 1.5 0 1 0 2.915 15h10.17a1.5 1.5 0 1 0 1.276-1.994l-2.272-3.975c.255-.269.411-.632.411-1.031 0-.4-.156-.762-.41-1.031l2.27-3.975A1.5 1.5 0 1 0 13.086 1zm0 13h10.17c.05-.14.12-.271.207-.389l-2.204-4.114a1.5 1.5 0 1 1 0-2.995l2.204-4.113A1.496 1.496 0 0 1 13.085 2H2.915c-.151.426-.489.764-.915.915v10.17c.426.151.764.489.915.915" clip-rule="evenodd"></path></svg>'},9013:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.027 0A8 8 0 1 1 0 8a8 8 0 0 1 8.027-8m-2.07 1.303A7.014 7.014 0 0 0 2.256 4h1.6a8.278 8.278 0 0 1 2.103-2.697M3.453 5H1.674a6.958 6.958 0 0 0-.656 2.5H3.01c.04-.89.187-1.725.441-2.5m.56 2.5a8.13 8.13 0 0 1 .5-2.5H7.5v2.5zm-1.001 1H1.018c.062.89.291 1.733.656 2.5h1.778a9.329 9.329 0 0 1-.441-2.5M4.512 11a8.131 8.131 0 0 1-.5-2.5H7.5V11zm-.657 1h-1.6a7.014 7.014 0 0 0 3.702 2.697A8.279 8.279 0 0 1 3.855 12M7.5 14.61V12H4.985c.58 1.011 1.417 1.88 2.515 2.61M7.5 4V1.39C6.402 2.12 5.565 2.99 4.985 4zm2.543 10.697A7.014 7.014 0 0 0 13.745 12h-1.6a8.28 8.28 0 0 1-2.102 2.697M12.548 11h1.778c.365-.767.594-1.61.656-2.5H12.99a9.33 9.33 0 0 1-.441 2.5m-.56-2.5a8.132 8.132 0 0 1-.5 2.5H8.5V8.5zm1.001-1h1.993a6.958 6.958 0 0 0-.656-2.5h-1.778c.254.775.401 1.61.441 2.5M11.488 5c.29.764.456 1.597.5 2.5H8.5V5zm.657-1h1.6a7.014 7.014 0 0 0-3.703-2.697c.91.78 1.612 1.68 2.103 2.697M8.5 1.39c1.098.73 1.935 1.6 2.515 2.61H8.5zM8.5 12h2.515c-.58 1.011-1.417 1.88-2.515 2.61z" clip-rule="evenodd"></path></svg>'},8309:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><g fill="#000" clip-path="url(#a)"><path d="M8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path><path fill-rule="evenodd" d="m11.002 7.002-3 3-3-3v-4a2.893 2.893 0 0 1 3-3 2.893 2.893 0 0 1 3 3zm-3-6h-.038a1.893 1.893 0 0 0-1.963 1.962l.001.018v3.606l2 2 2-2V2.964A1.894 1.894 0 0 0 8.04 1z" clip-rule="evenodd"></path><path d="M4.072 1.908a10.39 10.39 0 0 1-1.939-.433L0 13.077c1.2.504 2.493.746 3.793.711A10.666 10.666 0 0 0 7 13.31v1.678H2v1h11v-1H8v-2a11.89 11.89 0 0 1 4.207-.8A6.624 6.624 0 0 1 16 13.277L13.867 1.674a8.204 8.204 0 0 0-2.236-.61 3.459 3.459 0 0 1 .336 1.066c.342.065.68.155 1.009.27l1.72 9.163a8.316 8.316 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852l-.604.204-.363.108a9.677 9.677 0 0 1-2.921.436 9.543 9.543 0 0 1-2.668-.363l1.81-9.697c.353.077.71.137 1.068.18v-.173a3.367 3.367 0 0 1 .069-.826"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},7597:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M15 3.6 11.4 0H2v16h13zM14 15H3V1h7v4h4zM11 4h3v-.31L11.31 1H11zM7 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0M5 7.5h7v-1H5z" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M9 10H6v2h3zM5 9v4h5V9z" clip-rule="evenodd"></path></svg>'},4422:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.999 1.507c.68-.247 1.362-.493 2.707-.493v-.001a8.204 8.204 0 0 1 3.161.674L16 14.29a6.624 6.624 0 0 0-3.793-1.09c-1.833 0-3.02.4-4.207.8-1.187.4-2.375.8-4.207.8A9.158 9.158 0 0 1 0 14.09L2.133 1.488A10.39 10.39 0 0 0 5.294 2c1.344 0 2.024-.247 2.705-.493M7.68 13.052a12.79 12.79 0 0 1 4.526-.852 8.316 8.316 0 0 1 2.489.376l-1.72-10.163a7.212 7.212 0 0 0-2.27-.4 5.895 5.895 0 0 0-2.367.435A7.833 7.833 0 0 1 5.294 3a11.377 11.377 0 0 1-2.359-.26l-1.81 10.697a9.543 9.543 0 0 0 2.668.363 10.964 10.964 0 0 0 3.888-.748M3.896 4l-.779 8h9.766l-.779-8zm7.301 1H10v1h1.295zM10 7h1.392l.097 1H10zm-5.781 4H6V9H4.413zM6 8H4.51l.098-1H6zM4.705 6H6V5H4.803zM9 11H7V9h2zM7 8h2V7H7zm2-2H7V5h2zm1 3v2h1.781l-.194-2z" clip-rule="evenodd"></path></svg>'},945:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M3.793 14.8A9.158 9.158 0 0 1 0 14.089l1.01-5.97v1.866a.99.99 0 0 0 .55.88l-.435 2.572a9.543 9.543 0 0 0 2.668.363 10.964 10.964 0 0 0 3.888-.748 12.788 12.788 0 0 1 4.526-.852 8.316 8.316 0 0 1 2.489.376l-.284-1.674c.393-.14.664-.501.688-.917v-.63a1.09 1.09 0 0 0-1.1-1h-.018l-.197-1.162V6a.99.99 0 0 0-.326-.73l-.483-2.857a7.212 7.212 0 0 0-2.27-.4 5.895 5.895 0 0 0-2.367.435A7.833 7.833 0 0 1 5.294 3a11.376 11.376 0 0 1-2.359-.26L2.553 5H2.01a.972.972 0 0 0-.497.152l.62-3.664A10.39 10.39 0 0 0 5.294 2c2.688 0 2.721-.986 5.412-.986a8.204 8.204 0 0 1 3.161.674L16 14.29a6.623 6.623 0 0 0-3.793-1.09c-3.665 0-4.749 1.6-8.414 1.6zM2.01 9.985h.785v-1.85h.011l1.407 1.85H5v-.3L3.563 7.877 5 6.2v-.18c0-.007.004-.014.004-.021h-.796L2.795 7.713V6H2.01zm11.99 0v-.628h-1.215V6H12v3.985zM6 6.02V10h.865V6.73l.013-.012L8.09 10h.865l1.188-3.282h.013V10H11V6.02H9.601l-1.07 3.02h-.014L7.446 6.02z" clip-rule="evenodd"></path></svg>'},2491:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 2v12H2V2zm-1 1H3v10h10zm-5 7.5L6 9l-2 1.5L6 12zm2-3.833 2 1.5-2 1.5-2-1.5zM8 5.5 6 4 4 5.5 6 7z" clip-rule="evenodd"></path></svg>'},8302:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#040303" fill-rule="evenodd" d="M7 13v2H2v1h11v-1H8v-2h8L14 1H2L0 13zM2.847 2 1.18 12h3.697a1.579 1.579 0 0 1 .107-1.323A1.372 1.372 0 0 1 4 9.387c0-.165.03-.303.07-.424.032-.094.07-.178.105-.257a1.14 1.14 0 0 0 .115-.34c.029-.282-.084-.321-.084-.575a1.621 1.621 0 0 1 1.591-1.643 1.44 1.44 0 0 1 1.086.47A1.448 1.448 0 0 1 8.266 5.53a1.482 1.482 0 0 1 .453.073c.076.025.15.056.221.093a1.96 1.96 0 0 1 .555-.606l.094-.064a3.183 3.183 0 0 0-.066-.414 1.317 1.317 0 0 1 .32-1.09l.068-.078a1.67 1.67 0 0 1 .468-.353 1.424 1.424 0 0 1 .074-.442c.086-.246.231-.466.422-.643L10.872 2zm3.46 10h3.479l.062-.035c.223-.125.447-.251.447-.541 0-.174-.184-.24-.184-.41 0-.213.127-.341.253-.468.064-.064.127-.127.174-.201a.478.478 0 0 0 .079-.265v-.502a.2.2 0 0 1 .035-.115c.075-.116.26-.178.41-.178a.71.71 0 0 1 .3.088c.095.044.19.089.299.089.242 0 .372-.17.502-.339s.26-.338.501-.338c.11 0 .185.052.245.13.056.073.099.172.142.273.06.141.123.287.23.38a1.475 1.475 0 0 0 .906.432h.3l-1.334-8h-1.175a.496.496 0 0 1 .018.133.434.434 0 0 1-.057.219.636.636 0 0 1-.065.091.965.965 0 0 1-.082.086 3.347 3.347 0 0 1-.104.092c-.07.06-.14.12-.195.188a.507.507 0 0 0-.092.16l-.008.028-.008.038a.444.444 0 0 0-.006.076c0 .03.003.062.008.097l.017.093.005.026c.016.086.033.176.035.26a.489.489 0 0 1-.011.129c-.035.141-.154.24-.466.218a.296.296 0 0 0-.16.052c-.16.099-.328.31-.304.435l.011.054c.082.397.22 1.069-.371 1.386-.22.12-.34.333-.454.535-.145.257-.28.495-.599.495-.174 0-.293-.09-.413-.18-.119-.09-.238-.18-.411-.18a.45.45 0 0 0-.184.052.47.47 0 0 0-.253.436c0 .367-.308.977-.798.977a.64.64 0 0 1-.617-.308l-.007-.011a1.693 1.693 0 0 0-.252-.375.484.484 0 0 0-.359-.154.617.617 0 0 0-.59.643c0 .075.01.14.022.202l.029.12c.026.098.051.196.051.32 0 .194-.077.336-.154.477-.077.142-.154.283-.154.476a.405.405 0 0 0 .437.36c.088 0 .16-.012.223-.028.058-.016.108-.035.158-.055a.798.798 0 0 1 .416-.071c.108.01.185.077.237.162a.662.662 0 0 1 .094.289l.003.063c0 .274-.196.47-.392.665-.141.141-.282.283-.35.454-.06.153-.062.33.049.553.06.118.234.173.432.222m8.513 0h-3.645a1.49 1.49 0 0 0 .12-.576c0-.121-.018-.242-.053-.358.152-.176.263-.383.326-.607l.093.003c.3.002.593-.09.836-.266.04.044.082.085.126.124.42.411.977.654 1.564.68h.43v-.215z" clip-rule="evenodd"></path></svg>'},1402:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 3H3v10h5zM3 2H2v12h7V2H8zm1.833 2.834h2.75v.916h-2.75zm2.75 1.833h-2.75v.916h2.75zm2.75 2.75h1.833v.916h-1.833zm1.833 1.833h-1.833v.917h1.833zM4.833 8.5h2.75v.917h-2.75zM14 7.583H9.416V8.5h3.667v4.583H9.416V14H14V8.5z" clip-rule="evenodd"></path></svg>'},8310:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m9.5.332-.641.189-7.5 2.5L1 3.126V12H0v1h7v2H2v1h11v-1H8v-2h8v-1H9.5V6H14v6h1V5H9.5zM8.5 12V1.67L2 3.874V12z" clip-rule="evenodd"></path></svg>'},3493:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M0 14.09 1.2 7h1.014l-1.09 6.437a9.542 9.542 0 0 0 2.669.363 10.961 10.961 0 0 0 3.888-.748 12.79 12.79 0 0 1 4.526-.852 8.316 8.316 0 0 1 2.489.376l-1.72-10.163a7.212 7.212 0 0 0-2.27-.399 5.895 5.895 0 0 0-2.367.434c-.11.04-.223.08-.339.12V1.506a6.86 6.86 0 0 1 2.706-.493 8.204 8.204 0 0 1 3.161.674L16 14.29a6.624 6.624 0 0 0-3.793-1.089c-3.665 0-4.749 1.6-8.414 1.6A9.157 9.157 0 0 1 0 14.089zM4 11V7h4V4h4v7zm4-2.5a.954.954 0 0 1-.995 1.062h-.002L7 10h1zm3 1.5v-.487A2.955 2.955 0 0 1 9.5 10zM9 7h2V5H9zm0 1v1h.5a2.713 2.713 0 0 0 1.5-.721V8zm-4 2h1v-.5c0-.574.312-.889.93-.936l.068-.005L7 8.5c.002-.173.043-.344.119-.5H5zM2 6V1h5v5zm1.564-2.19c.075-.288.228-.55.442-.756a.903.903 0 0 1 .74-.179c.077-.32.226-.62.436-.875H3v2.34a.562.562 0 0 0 .336-.09.988.988 0 0 0 .228-.44M6 2.56a1.258 1.258 0 0 0-.297.609 1 1 0 0 1-.279.544.871.871 0 0 1-.756.161l-.05-.009c-.043.09-.08.182-.11.276-.09.328-.268.625-.516.859H6z" clip-rule="evenodd"></path></svg>'},3323:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M5 1H2v1h3zM0 14.09zm0 0L1.2 7h1.014l-1.09 6.437a9.538 9.538 0 0 0 2.669.363 10.961 10.961 0 0 0 3.888-.748 12.79 12.79 0 0 1 4.526-.852 8.32 8.32 0 0 1 2.489.376l-1.72-10.163a7.212 7.212 0 0 0-2.27-.399 5.895 5.895 0 0 0-2.367.434c-.11.04-.223.08-.339.12V1.506a6.86 6.86 0 0 1 2.706-.493 8.204 8.204 0 0 1 3.161.674L16 14.29a6.624 6.624 0 0 0-3.793-1.089c-1.833 0-3.02.4-4.207.8-1.187.4-2.375.8-4.207.8A9.158 9.158 0 0 1 0 14.09M2 3h5v1H2zm6 3V5H2v1z" clip-rule="evenodd"></path></svg>'},1547:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0M0 14.09zm0 0L1.2 7h1.014l-1.09 6.437a9.538 9.538 0 0 0 2.669.363 10.961 10.961 0 0 0 3.888-.748 12.79 12.79 0 0 1 4.526-.852 8.32 8.32 0 0 1 2.489.376l-1.72-10.163a7.212 7.212 0 0 0-2.27-.399 5.895 5.895 0 0 0-2.367.434c-.11.04-.223.08-.339.12V1.506a6.86 6.86 0 0 1 2.706-.493 8.204 8.204 0 0 1 3.161.674L16 14.29a6.624 6.624 0 0 0-3.793-1.089c-1.833 0-3.02.4-4.207.8-1.187.4-2.375.8-4.207.8A9.158 9.158 0 0 1 0 14.09M10 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4m-3.223.916 1.5-1-.554-.832-1.5 1zm.444-5.798 1.092.898-.635.773-1.093-.899zM5 11.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m1 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" clip-rule="evenodd"></path></svg>'},3814:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 2H3v3h3zM2 1v5h5V1zM0 14.09zc1.2.503 2.493.746 3.793.711 1.832 0 3.02-.4 4.207-.8 1.187-.4 2.374-.8 4.207-.8A6.624 6.624 0 0 1 16 14.291L13.867 1.686a8.204 8.204 0 0 0-3.161-.674A6.86 6.86 0 0 0 8 1.506v1.062c.116-.04.229-.08.339-.12a5.895 5.895 0 0 1 2.367-.434c.773.01 1.54.146 2.27.4l1.72 10.162a8.32 8.32 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852c-1.24.484-2.557.737-3.888.748a9.538 9.538 0 0 1-2.669-.363L2.214 7H1.2zM11 5H9v2h2zM8 4v3H5v4h7V4zm-2 6V8h2v2zm3-2h2v2H9z" clip-rule="evenodd"></path></svg>'},9964:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},4539:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M4 4.796 4.796 4 8.02 7.224l3.184-3.184.796.796L8.816 8.02l3.144 3.144-.796.796L8.02 8.816 4.836 12l-.796-.796L7.224 8.02z"></path><path fill="#000" fill-rule="evenodd" d="m0 4 4-4h8l4 4v8l-4 4H4l-4-4zm1 .414L4.414 1h7.172L15 4.414v7.172L11.586 15H4.414L1 11.586z" clip-rule="evenodd"></path></svg>'},3250:(e,t,r)=>{"use strict";var n=r(1315),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,a=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),o=n[0].inst,c=n[1];return s((function(){o.value=r,o.getSnapshot=t,u(o)&&c({inst:o})}),[e,r,t]),a((function(){return u(o)&&c({inst:o}),e((function(){u(o)&&c({inst:o})}))}),[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},139:(e,t,r)=>{"use strict";var n=r(1315),o=r(1688),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useSyncExternalStore,s=n.useRef,l=n.useEffect,u=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=u((function(){function e(e){if(!l){if(l=!0,a=e,e=n(e),void 0!==o&&p.hasValue){var t=p.value;if(o(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var r=n(e);return void 0!==o&&o(t,r)?t:(a=e,s=r)}var a,s,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,r,n,o]);var f=a(e,d[0],d[1]);return l((function(){p.hasValue=!0,p.value=f}),[f]),c(f),f}},1688:(e,t,r)=>{"use strict";e.exports=r(3250)},2798:(e,t,r)=>{"use strict";e.exports=r(139)},2302:(e,t,r)=>{var n=r(9970).FilterCSS,o=r(9970).getDefaultWhiteList,i=r(5938);var a=new n;function s(e){return e.replace(l,"&lt;").replace(u,"&gt;")}var l=/</g,u=/>/g,c=/"/g,d=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,f=/&colon;?/gim,h=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,m=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v=/u\s*r\s*l\s*\(.*/gi;function y(e){return e.replace(c,"&quot;")}function S(e){return e.replace(d,'"')}function b(e){return e.replace(p,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function w(e){return e.replace(f,":").replace(h," ")}function I(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return i.trim(t)}function E(e){return I(e=w(e=b(e=S(e))))}function C(e){return s(e=y(e))}t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},t.onTag=function(e,t,r){},t.onIgnoreTag=function(e,t,r){},t.onTagAttr=function(e,t,r){},t.onIgnoreTagAttr=function(e,t,r){},t.safeAttrValue=function(e,t,r,n){if(r=E(r),"href"===t||"src"===t){if("#"===(r=i.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(g.lastIndex=0,g.test(r))return""}else if("style"===t){if(m.lastIndex=0,m.test(r))return"";if(v.lastIndex=0,v.test(r)&&(g.lastIndex=0,g.test(r)))return"";!1!==n&&(r=(n=n||a).process(r))}return C(r)},t.escapeHtml=s,t.escapeQuote=y,t.unescapeQuote=S,t.escapeHtmlEntities=b,t.escapeDangerHtml5Entities=w,t.clearNonPrintableCharacter=I,t.friendlyAttrValue=E,t.escapeAttrValue=C,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],o=!1;return{onIgnoreTag:function(a,s,l){if(function(t){return!!r||-1!==i.indexOf(e,t)}(a)){if(l.isClosing){var u=l.position+10;return n.push([!1!==o?o:l.position,u]),o=!1,"[/removed]"}return o||(o=l.position),"[removed]"}return t(a,s,l)},remove:function(e){var t="",r=0;return i.forEach(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},t.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var o=e.indexOf("--\x3e",n);if(-1===o)break;r=o+3}return t},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},t.cssFilter=a,t.getDefaultCSSWhiteList=o},8924:(e,t,r)=>{var n=r(2302),o=r(3268),i=r(8521);function a(e,t){return new i(t).process(e)}(t=e.exports=a).filterXSS=a,t.FilterXSS=i,function(){for(var e in n)t[e]=n[e];for(var r in o)t[r]=o[r]}(),"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},3268:(e,t,r)=>{var n=r(5938);function o(e){var t,r=n.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=n.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function i(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9\\_:.-]/gim;function s(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function l(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}function u(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function c(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,r){"use strict";var n="",a=0,s=!1,l=!1,u=0,c=e.length,d="",p="";e:for(u=0;u<c;u++){var f=e.charAt(u);if(!1===s){if("<"===f){s=u;continue}}else if(!1===l){if("<"===f){n+=r(e.slice(a,u)),s=u,a=u;continue}if(">"===f){n+=r(e.slice(a,s)),d=o(p=e.slice(s,u+1)),n+=t(s,n.length,d,p,i(p)),a=u+1,s=!1;continue}if('"'===f||"'"===f)for(var h=1,g=e.charAt(u-h);""===g.trim()||"="===g;){if("="===g){l=f;continue e}g=e.charAt(u-++h)}}else if(f===l){l=!1;continue}}return a<e.length&&(n+=r(e.substr(a))),n},t.parseAttr=function(e,t){"use strict";var r=0,o=0,i=[],d=!1,p=e.length;function f(e,r){if(!((e=(e=n.trim(e)).replace(a,"").toLowerCase()).length<1)){var o=t(e,r||"");o&&i.push(o)}}for(var h=0;h<p;h++){var g,m=e.charAt(h);if(!1!==d||"="!==m)if(!1===d||h!==o){if(/\s|\n|\t/.test(m)){if(e=e.replace(/\s|\n|\t/g," "),!1===d){if(-1===(g=s(e,h))){f(n.trim(e.slice(r,h))),d=!1,r=h+1;continue}h=g-1;continue}if(-1===(g=u(e,h-1))){f(d,c(n.trim(e.slice(r,h)))),d=!1,r=h+1;continue}}}else{if(-1===(g=e.indexOf(m,h+1)))break;f(d,n.trim(e.slice(o+1,g))),d=!1,r=(h=g)+1}else d=e.slice(r,h),r=h+1,o='"'===e.charAt(r)||"'"===e.charAt(r)?r:l(e,h+1)}return r<e.length&&(!1===d?f(e.slice(r)):f(d,c(n.trim(e.slice(r))))),n.trim(i.join(" "))}},5938:e=>{e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},8521:(e,t,r)=>{var n=r(9970).FilterCSS,o=r(2302),i=r(3268),a=i.parseTag,s=i.parseAttr,l=r(5938);function u(e){return null==e}function c(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map((function(e){return e.toLowerCase()})):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=o.whiteList,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new n(e.css))}c.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,i=t.onIgnoreTag,c=t.onTagAttr,d=t.onIgnoreTagAttr,p=t.safeAttrValue,f=t.escapeHtml,h=this.cssFilter;t.stripBlankChar&&(e=o.stripBlankChar(e)),t.allowCommentTag||(e=o.stripCommentTag(e));var g=!1;t.stripIgnoreTagBody&&(g=o.StripTagBody(t.stripIgnoreTagBody,i),i=g.onIgnoreTag);var m=a(e,(function(e,t,o,a,g){var m={sourcePosition:e,position:t,isClosing:g,isWhite:Object.prototype.hasOwnProperty.call(r,o)},v=n(o,a,m);if(!u(v))return v;if(m.isWhite){if(m.isClosing)return"</"+o+">";var y=function(e){var t=l.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=l.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=l.trim(e.slice(0,-1))),{html:e,closing:r}}(a),S=r[o],b=s(y.html,(function(e,t){var r=-1!==l.indexOf(S,e),n=c(o,e,t,r);return u(n)?r?(t=p(o,e,t,h))?e+'="'+t+'"':e:u(n=d(o,e,t,r))?void 0:n:n}));return a="<"+o,b&&(a+=" "+b),y.closing&&(a+=" /"),a+">"}return u(v=i(o,a,m))?f(a):v}),f);return g&&(m=g.remove(m)),m},e.exports=c},8891:e=>{"use strict";e.exports=o},1315:e=>{"use strict";e.exports=r},800:e=>{"use strict";e.exports=n},6792:e=>{"use strict";e.exports=JSON.parse('{"Dateline Standard Time":-12,"UTC-11":-11,"Hawaiian Standard Time":-10,"Alaskan Standard Time":-9,"Pacific Standard Time":-8,"Pacific Standard Time (Mexico)":-8,"Mountain Standard Time":-7,"Mountain Standard Time (Mexico)":-7,"US Mountain Standard Time":-7,"Canada Central Standard Time":-6,"Central America Standard Time":-6,"Central Standard Time":-6,"Central Standard Time (Mexico)":-6,"Eastern Standard Time":-5,"SA Pacific Standard Time":-5,"US Eastern Standard Time":-5,"Venezuela Standard Time":-3.5,"Atlantic Standard Time":-4,"Central Brazilian Standard Time":-4,"Pacific SA Standard Time":-4,"SA Western Standard Time":-4,"Paraguay Standard Time":-4,"Newfoundland Standard Time":-2.5,"E. South America Standard Time":-3,"Greenland Standard Time":-3,"Montevideo Standard Time":-3,"SA Eastern Standard Time":-3,"Argentina Standard Time":-3,"Mid-Atlantic Standard Time":-2,"UTC-2":-2,"Azores Standard Time":-1,"Cabo Verde Standard Time":-1,"GMT Standard Time":0,"Greenwich Standard Time":0,"Morocco Standard Time":0,"UTC":0,"Central Europe Standard Time":1,"Central European Standard Time":1,"Romance Standard Time":1,"W. Central Africa Standard Time":1,"W. Europe Standard Time":1,"Namibia Standard Time":1,"E. Europe Standard Time":2,"Egypt Standard Time":2,"FLE Standard Time":2,"GTB Standard Time":2,"Israel Standard Time":2,"Jordan Standard Time":2,"Middle East Standard Time":2,"South Africa Standard Time":2,"Syria Standard Time":2,"Turkey Standard Time":2,"Arab Standard Time":3,"Arabic Standard Time":3,"E. Africa Standard Time":3,"Kaliningrad Standard Time":3,"Iran Standard Time":3.5,"Russian Standard Time":4,"Arabian Standard Time":4,"Azerbaijan Standard Time":4,"Caucasus Standard Time":4,"Georgian Standard Time":4,"Mauritius Standard Time":4,"Afghanistan Standard Time":4.5,"West Asia Standard Time":5,"Pakistan Standard Time":5,"India Standard Time":5.5,"Sri Lanka Standard Time":5.5,"Nepal Standard Time":5,"Ekaterinburg Standard Time":6,"Central Asia Standard Time":6,"Bangladesh Standard Time":6,"Myanmar Standard Time":6.5,"N. Central Asia Standard Time":7,"SE Asia Standard Time":7,"North Asia Standard Time":8,"China Standard Time":8,"Singapore Standard Time":8,"Taipei Standard Time":8,"W. Australia Standard Time":8,"Ulaanbaatar Standard Time":8,"North Asia East Standard Time":9,"Korea Standard Time":9,"Tokyo Standard Time":9,"AUS Central Standard Time":9.5,"Cen. Australia Standard Time":9.5,"Yakutsk Standard Time":10,"AUS Eastern Standard Time":10,"E. Australia Standard Time":10,"Tasmania Standard Time":10,"West Pacific Standard Time":10,"Vladivostok Standard Time":11,"Central Pacific Standard Time":11,"Magadan Standard Time":12,"Fiji Standard Time":12,"New Zealand Standard Time":12,"UTC+12":12,"Tonga Standard Time":13,"Samoa Standard Time":-11}')},1981:e=>{"use strict";e.exports=JSON.parse('{"exbVersion":"1.14.0","exbBuildNum":"326","exbBuildCommit":"818c76d974a94715b1bc630e96da440c1a99aab4","exbBuildBranch":"origin/release/dev1.14","exbExtensionsBuildCommit":"01789d483eed131c6f29ae0dca2232a5ef5462c6","exbExtensionsBuildBranch":"origin/release/dev1.14","exbBuildDate":"20240312.115322.CST","productVersion":"ArcGIS Experience Builder"}')}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return i[e].call(r.exports,r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var o=Object.create(null);s.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,s.d(o,i),o},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{"use strict";s.r(l),s.d(l,{APP_FRAME_NAME_IN_BUILDER:()=>Gl,AbstractDataAction:()=>dA,AbstractMessageAction:()=>xD,AjaxState:()=>kl,AllDataSourceTypes:()=>Yl,AnimationComponent:()=>mN,AnimationContext:()=>FL,AnimationDirection:()=>kL,AnimationEffectType:()=>_L,AnimationPlayMode:()=>LL,AnimationStartMode:()=>NL,AnimationTriggerType:()=>DL,AnimationType:()=>RL,AppDialog:()=>YN,AppKeyboardComponent:()=>DR,AppMode:()=>Ll,AppRoot:()=>u_,AppVersionManager:()=>jT,ArcGISDataSourceTypes:()=>ql,BaseVersionManager:()=>MT,BaseWidget:()=>$T,BrowserSizeMode:()=>Dl,ButtonClickMessage:()=>OD,CONSTANTS:()=>i,CacheProvider:()=>Lk,ClauseCascade:()=>iE,ClauseDisplayType:()=>TE,ClauseLabelDisplay:()=>xE,ClauseLogic:()=>oE,ClauseOperator:()=>aE,ClauseSourceType:()=>sE,ClauseType:()=>OE,ConfigManager:()=>aA,ContainerType:()=>Jg,ControllerPosition:()=>im,DEFAULT_ANIMATION_PROPS:()=>$L,DEFAULT_HOVER_PROPS:()=>ZL,DataActionManager:()=>eA,DataLevel:()=>uA,DataRecordSetChangeMessage:()=>wD,DataRecordsSelectionChangeMessage:()=>yD,DataSourceComponent:()=>f_,DataSourceError:()=>iu,DataSourceFilterChangeMessage:()=>bD,DataSourceManager:()=>Sb,DataSourceSelectionMode:()=>tu,DataSourceSelectionTypes:()=>ou,DataSourceStatus:()=>Hl,DataSourceTypes:()=>zl,DataSourcesChangeMessage:()=>ID,DataSourcesChangeType:()=>QP,DialogInteractionType:()=>om,DialogMode:()=>rm,DialogPosition:()=>nm,DummnyDataAction:()=>pA,DummyMessageAction:()=>TD,EMPTY_OPTION_VALUE:()=>CE,ESRIOBJECTIDTYPE:()=>Px,ESRI_DATE_FORMAT_ARRAY:()=>Fl,EXPRESSION_LOAD_PREFIX:()=>Dx,ErrorBoundary:()=>e_,EsriFieldType:()=>_l,ExportCSV:()=>CA,ExportGeoJSON:()=>kA,ExportJson:()=>yA,ExpressionFunctions:()=>Tx,ExpressionPartType:()=>xx,ExpressionResolverComponent:()=>S_,ExpressionResolverErrorCode:()=>m_,ExtensionManager:()=>fy,ExtentChangeMessage:()=>SD,ExternalResolvablePromise:()=>mS,FocusVisibility:()=>s_,FormattedDate:()=>hT,FormattedMessage:()=>ST,FormattedNumber:()=>mT,FormattedPlural:()=>wT,FormattedRelativeTime:()=>PT,FormattedTime:()=>gT,Global:()=>Nk,GridItemType:()=>Xg,GuideManager:()=>CR,HashParamsType:()=>nu,HoverType:()=>QL,INTERACTIVE_CLASS:()=>n_,ImageDisplayQualityMode:()=>zk,ImageDisplayQualityValue:()=>qk,Immutable:()=>Ae,IntersectionContext:()=>BL,IntlProvider:()=>Wh,JimuCoreDataSourceFactoryUriExtension:()=>yL,JimuFieldType:()=>Rl,JimuMapViewStatus:()=>jk,Keyboard:()=>PR,LayoutItemType:()=>kT,LayoutParentType:()=>Kg,LayoutType:()=>LT,LinkType:()=>Ml,LoadingHandler:()=>PL,LoadingType:()=>Vl,LocationChangeMessage:()=>ED,MessageCarryData:()=>KP,MessageManager:()=>XT,MessageType:()=>JP,MultipleDataSourceComponent:()=>g_,MutableStoreManager:()=>YT,OneByOneAnimation:()=>yN,OrderRule:()=>AE,PageMode:()=>tm,PagePart:()=>Bl,PageType:()=>em,ParentAnimationMode:()=>ML,QueryScope:()=>eu,React:()=>k,ReactDOM:()=>L,ReactDOMClient:()=>M,ReactRedux:()=>e,ReactResizeDetector:()=>Tr,RecordSetChangeType:()=>XP,RepeatedDataSourceProvider:()=>RT,ResolveExpressionErrorCode:()=>Rx,ResourceType:()=>Wl,ScreenTransitionType:()=>Qg,ScreenTriggerType:()=>Zg,SelectDataRecordMessage:()=>CD,ServiceManager:()=>mb,SessionChangedReasonType:()=>eb,SessionManager:()=>nb,SetFilter:()=>yR,SignInErrorCode:()=>ZS,SqlExpressionMode:()=>nE,StatisticType:()=>Ax,StringSelectionChangeMessage:()=>vD,SupportedItemTypes:()=>Xl,SupportedJSAPILayerTypes:()=>Ql,SupportedLayerServiceTypes:()=>Jl,SupportedLayerTypesInWebMapSpec:()=>Zl,SupportedServerTypes:()=>Kl,SupportedUtilityType:()=>am,ThemeCommonColorKeys:()=>Bk,ThemeContext:()=>Pk,ThemeFontVariantKeys:()=>Fk,ThemeProvider:()=>Dk,ThemeThemeAlertColorKeys:()=>$k,ThemeThemeColorKeys:()=>Wk,ThemeThemeMainColorKeys:()=>Gk,TimezoneConfig:()=>sm,TrackingManager:()=>AL,TransitionContainer:()=>uM,TransitionDirection:()=>JN,TransitionType:()=>KN,USER_SETTING_FILE_KEY:()=>Vk,UrlGeneralConfig:()=>ru,UrlInfoPartType:()=>Hk,UrlManager:()=>lA,UrlProtocol:()=>$l,UserTypeExtension:()=>Uk,UtilityManager:()=>jI,WidgetManager:()=>nA,WidgetState:()=>Nl,WidgetType:()=>jl,WidgetVersionManager:()=>FT,_ExpressionResolverComponent:()=>y_,appActions:()=>b,appConfigUtils:()=>p,cancelablePromise:()=>R,clamp:()=>sM,classNames:()=>Re(),createAppStore:()=>My,createEmotionCache:()=>Mk,createIntl:()=>$h,createIntlCache:()=>eh,createSelector:()=>zT,css:()=>gD,dataSourceUtils:()=>O,dateUtils:()=>a,defaultMessages:()=>gS,esri:()=>fM,expressionUtils:()=>P,extensionSpec:()=>m,geometryUtils:()=>T,getAnimationEffect:()=>XL,getAppStore:()=>jy,getHoverEffect:()=>dN,getHoverStyle:()=>pN,getIndexFromProgress:()=>aM,getMessageTypeLabel:()=>mD,getNextAnimationId:()=>KL,getTransition:()=>lM,groupExpressionPartsByFunction:()=>Wx,hooks:()=>_,i18n:()=>u,indexedDBUtils:()=>D,init:()=>IL,injectIntl:()=>jh,invariant:()=>yr,isDirectionalTransition:()=>cM,isIntegerProgress:()=>iM,isKeyboardMode:()=>a_,jimuHistory:()=>A,jsx:()=>fD,keyMap:()=>pI,keyboardUtils:()=>I,loadArcGISJSAPIModule:()=>pS,loadArcGISJSAPIModules:()=>dS,loadDependencies:()=>lS,loadDependency:()=>sS,lodash:()=>pM,moduleLoader:()=>g,observeStore:()=>Uy,polished:()=>hM,portalUrlUtils:()=>d,portalUtils:()=>w,privilegeUtils:()=>E,proxyUtils:()=>C,queryString:()=>pt,requestUtils:()=>S,resolveExpression:()=>qx,saveAs:()=>Ha.saveAs,semver:()=>$e,serviceUrlUtils:()=>y,sharedThemeUtils:()=>v,spring:()=>r,styled:()=>kk,translatedLocales:()=>bL,urlManagerUtils:()=>f,urlUtils:()=>h,useIntersection:()=>hN,useIntl:()=>lT,useTheme:()=>Rk,utilityUtils:()=>x,utils:()=>c,uuidv1:()=>Be,version:()=>dM,withRepeatedDataSource:()=>_T,withTheme:()=>_k,xss:()=>Ge});var e={};s.r(e),s.d(e,{Provider:()=>we,ReactReduxContext:()=>V,batch:()=>L.unstable_batchedUpdates,connect:()=>be,createDispatchHook:()=>Ce,createSelectorHook:()=>K,createStoreHook:()=>Ie,shallowEqual:()=>he,useDispatch:()=>Oe,useSelector:()=>X,useStore:()=>Ee});var t={};s.r(t),s.d(t,{exclude:()=>dt,extract:()=>it,parse:()=>at,parseUrl:()=>lt,pick:()=>ct,stringify:()=>st,stringifyUrl:()=>ut});var r={};s.r(r),s.d(r,{Any:()=>ei,BailSignal:()=>Pi,Controller:()=>Xi,FrameValue:()=>ki,Globals:()=>Pr,Interpolation:()=>Ca,Spring:()=>wa,SpringContext:()=>aa,SpringRef:()=>la,SpringValue:()=>Bi,Trail:()=>Ia,Transition:()=>Ea,a:()=>Va,animated:()=>Va,config:()=>mi,createInterpolator:()=>jn,easings:()=>Vn,inferTo:()=>ui,interpolate:()=>Pa,to:()=>Aa,update:()=>Da,useChain:()=>gi,useInView:()=>ba,useIsomorphicLayoutEffect:()=>Ro,useReducedMotion:()=>jo,useResize:()=>ya,useScroll:()=>va,useSpring:()=>ca,useSpringRef:()=>pa,useSpringValue:()=>fa,useSprings:()=>ua,useTrail:()=>ha,useTransition:()=>ga});var n={};s.r(n),s.d(n,{ApiKey:()=>Ka,ApplicationSession:()=>Ja,UserSession:()=>is,exchangeToken:()=>as,fetchToken:()=>Ya,generateToken:()=>es,platformSelf:()=>ss,validateAppAccess:()=>os});var o={};s.r(o),s.d(o,{addAttachment:()=>bs,addFeatures:()=>ps,applyEdits:()=>gs,decodeValues:()=>xs,deleteAttachments:()=>Is,deleteFeatures:()=>hs,getAllLayersAndTables:()=>ys,getAttachments:()=>Ss,getFeature:()=>cs,getLayer:()=>Cs,getService:()=>Os,parseServiceUrl:()=>vs,queryFeatures:()=>ds,queryRelated:()=>Es,updateAttachment:()=>ws,updateFeatures:()=>fs});var i={};s.r(i),s.d(i,{BREAK_POINTS:()=>Pd,CURRENT_PAGE:()=>Fd,DATA_VIEW_ID_FOR_NO_SELECTION:()=>Md,DEFAULT_PAGE_WIDTH:()=>Rd,DEFAULT_QUERY_PAGE_SIZE:()=>Bd,DEFAULT_VIEWPORT_SIZE:()=>Dd,OUTPUT_DATA_VIEW_ID:()=>jd,REPEAT_CONTEXT_DATA_VIEW_ID:()=>Ud,SCREEN_RESOLUTIONS:()=>kd,SELECTION_DATA_VIEW_ID:()=>Nd,SHARED_THEME:()=>Ld,USER_LOCALE_KEY:()=>$d});var a={};s.r(a),s.d(a,{DATE_TIME_CONNECTOR:()=>ip,DATE_TIME_DEFAULT_FORMAT:()=>ap,ESRI_DATE_FORMAT_MAP:()=>op,TimeUnit:()=>qd,VirtualDateType:()=>zd,formatDate:()=>hp,formatDateField:()=>up,formatDateLocally:()=>cp,formatTime:()=>gp,getDateOptions:()=>pp,getDateTimeFormat:()=>lp,getEsriDateFormat:()=>sp,getIntlOptions:()=>dp,getRealDateByVirtualDate:()=>mp,getTimeOption:()=>fp});var u={};s.r(u),s.d(u,{findLocale:()=>tg,getBrowserLanguage:()=>zh,getDecimalSeparator:()=>eg,getIntl:()=>Qh,getLocaleToLoad:()=>Hh,getTranslatedLocale:()=>qh,isRTLLocale:()=>Kh,isSameLanguage:()=>Yh,loadLocaleMessages:()=>Jh,resetIntls:()=>Zh});var c={};s.r(c),s.d(c,{AppHigherVersionStateType:()=>og,applyMixins:()=>mg,calculateDigits:()=>xg,checkAppHigherVersionState:()=>Ng,diffArrays:()=>Yg,findViewportSize:()=>pg,formatNumber:()=>$g,formatPercentageNumber:()=>Gg,formatPixelNumber:()=>Wg,getBrowserSizeMode:()=>dg,getGeometryService:()=>ag,getGeometryType:()=>ig,getIntlOption:()=>Dg,getJimuThemeModule:()=>Vg,getLocalStorageAppKey:()=>Eg,getOverlayUniqueId:()=>Tg,getPanelCallbackNamesFromPanelState:()=>lg,getSizeModeWidth:()=>fg,getUID:()=>Cg,getUUID:()=>Og,getValue:()=>uc,getWidgetCallbackNamesFromWidgetState:()=>sg,hyphenateStyleName:()=>bg,isArrayContainSameItems:()=>vg,isDeepEqual:()=>Ad,isInIFrame:()=>cg,isTouchDevice:()=>ug,isWidgetSelected:()=>zg,loadstyle:()=>gg,memoize:()=>Rg,readLocalStorage:()=>kg,readLocalStorageKeys:()=>_g,readSessionStorage:()=>jg,readSessionStorageKeys:()=>Mg,removeFromLocalStorage:()=>Fg,removeFromSessionStorage:()=>Bg,replaceI18nPlaceholdersInObject:()=>Ag,replaceStringInObject:()=>Hg,setLocalStorage:()=>Lg,setRef:()=>qg,setSessionStorage:()=>Ug,showApp:()=>Pg,styleObjectToString:()=>wg,tryGet:()=>Ig});var d={};s.r(d),s.d(d,{fixPortalUrlProtocol:()=>xm,getBaseGroupUrl:()=>um,getBaseItemUrl:()=>mm,getBaseUserUrl:()=>ym,getContentUrl:()=>bm,getHomeIndexUrl:()=>Cm,getHomeMapViewerUrl:()=>Om,getItemUrl:()=>vm,getPlatformUrlByOrgUrl:()=>Am,getPortalProxyUrl:()=>Tm,getPortalRestUrl:()=>dm,getPortalSelfInfoUrl:()=>lm,getPortalUrlFromLocation:()=>cm,getPortalUrlFromRestUrl:()=>pm,getStandardPortalUrl:()=>gm,getUserContentUrl:()=>wm,getUserItemsUrl:()=>Im,getUserUrl:()=>Sm,isAGOLDomain:()=>hm,isPlatformUrl:()=>Pm,isSamePortalUrl:()=>fm,shareItemUrl:()=>Em});var p={};s.r(p),s.d(p,{addLayoutLabel:()=>Mm,addWebmapOrWebsceneToAppConfig:()=>Xm,addWidgetDefaultLabelAndIcon:()=>Nm,addWidgetManifestProperties:()=>Lm,appendPortalInfoToResource:()=>Rm,cleanPortalInfoFromResource:()=>_m,fixLayoutIds:()=>Vm,getAllWidgets:()=>$m,getConnectionInfoFromAppConfig:()=>Km,getDataSourceJsonById:()=>Qm,getLayoutIdInSizeMode:()=>zm,getRealAppResourceUrl:()=>Dm,getSizeModeOfALayout:()=>qm,getUniqueId:()=>Um,getUniqueLabel:()=>Fm,getWidgetContext:()=>km,getWidgetIdByOutputDataSource:()=>Ym,getWidgetMessageActionJsons:()=>Gm,isTwoViewsInSaveSection:()=>Wm,parseUniqueLabel:()=>Bm,updateStateWhenAppConfigChange:()=>Hm,validateConnectionsOfAppConfig:()=>Jm});var f={};s.r(f),s.d(f,{encodeForCompatibleMode:()=>gv,filterWidgetsEnable:()=>iv,filterWidgetsEnabledParams:()=>av,getAppConfig:()=>ev,getFullEncodedUrlHashObject:()=>pv,getFullEncodedUrlHashWidgetParams:()=>fv,isDataSelectionEnable:()=>hv,isWidgetEnable:()=>rv,isWidgetParmasEnable:()=>nv,isWidgetsHashParamsType:()=>ov,parseDsQueryObject:()=>uv,parseHashObjToStr:()=>lv,parseHashObject:()=>cv,parseHashStrToObj:()=>sv,stringifyHashObject:()=>dv,updateUrl:()=>tv});var h={};s.r(h),s.d(h,{appendQueryParam:()=>Av,checkAbsoluteUrl:()=>yv,createHref:()=>wv,createLocation:()=>bv,fixDialogLabel:()=>$v,fixPageLabel:()=>Bv,fixViewLabel:()=>Gv,getAbsoluteRootUrl:()=>qv,getAppIdPageIdFromUrl:()=>Lv,getAppUrl:()=>Jv,getArcgisOnlineOrgId:()=>Qv,getArcgisOnlineUrl:()=>Xv,getDataSourceInfosFromUrlParmas:()=>Dv,getDialogIdFromIdOrLabel:()=>Uv,getExperienceBuilderOnlineUrl:()=>Kv,getFixedRootPath:()=>zv,getFolder:()=>Sv,getHrefFromLinkTo:()=>Yv,getPageIdFromIdOrLabel:()=>Mv,getPageLinkInfo:()=>Wv,getPageLinkUrl:()=>Hv,getProtocol:()=>Ev,getSectionNavInfoFromQueryObject:()=>kv,getUrlHost:()=>xv,getViewIdFromIdOrLabel:()=>jv,isAbsoluteUrl:()=>vv,normalize:()=>Pv,parseAppPath:()=>Nv,parseUrl:()=>mv,removeProtocol:()=>Ov,removeSearchFromUrl:()=>Tv,setProtocol:()=>Cv,splitDataSToParts:()=>_v,updateQueryStringParameter:()=>Iv});var g={};s.r(g),s.d(g,{deleteModule:()=>sy,getJimuForBuilderModules:()=>ay,getModuleSync:()=>ty,loadModule:()=>ry,loadModules:()=>ny,resolveModuleFullPath:()=>iy,resolveModuleFullUrl:()=>oy});var m={};s.r(m),s.d(m,{DummyExtension:()=>dy,EP_BUILDER_ONLY_EXTENSIONS:()=>uy,EP_SAVE_INFO_IN_STATE:()=>cy,EP_SUPPORT_MULTIPLE_EXTENSIONS:()=>ly,ExtensionPoints:()=>Zv});var v={};s.r(v),s.d(v,{createCustomSharedThemeVariables:()=>yy,createSharedThemeVariables:()=>vy,isSharedTheme:()=>my});var y={};s.r(y),s.d(y,{getServerRootUrl:()=>nS,getServiceRootUrl:()=>rS,isServerUrl:()=>tS,isServiceUrl:()=>eS});var S={};s.r(S),s.d(S,{deleteRequestCache:()=>pb,getRequestCache:()=>cb,isURLCacheable:()=>hb,registerCacheableUrl:()=>ub,requestWrapper:()=>ib,setRequestCache:()=>db});var b={};s.r(b),s.d(b,{ActionKeys:()=>bb,MapWidgetInfoAdded:()=>aw,MapWidgetInfoRemoved:()=>lw,MapWidgetInfoUpdated:()=>sw,activateWidget:()=>Mb,activeOverlay:()=>Nw,activePagePartChanged:()=>_w,activePrintPreview:()=>Xw,addToRegisterClientIdList:()=>qw,appConfigChanged:()=>Eb,appConfigLoaded:()=>wb,appIdChanged:()=>xb,appInfoChanged:()=>Ob,appModeChanged:()=>Gb,appPathChanged:()=>Cb,appRuntimeInfoInit:()=>Pw,browserSizeModeChanged:()=>yw,changeDataSourceGDBVersion:()=>Kb,clearAnimationPreview:()=>Ww,clearDataSourceInfo:()=>Xb,clipboardChanged:()=>Tw,closeOverlay:()=>Lw,closeWidget:()=>_b,closeWidgets:()=>kb,currentDialogChanged:()=>Cw,currentPageChanged:()=>Ew,dataSourceCountStatusChanged:()=>Hb,dataSourceInstanceStatusChanged:()=>zb,dataSourceSaveStatusChanged:()=>qb,dataSourceSelectedIndexesChanged:()=>fw,dataSourceSelectionChanged:()=>hw,dataSourceSourceVersionAdded:()=>Jb,dataSourceStatusChanged:()=>Vb,dataSourceVersionAdded:()=>Yb,dialogInfosChanged:()=>Ow,extensionRegistered:()=>eI,hasPrivilegeChanged:()=>zw,i18nMessagesLoaded:()=>Ub,initAppContext:()=>jb,initStoreExtensionState:()=>uw,jimuMapViewAdded:()=>tw,jimuMapViewRemoved:()=>nw,jimuMapViewUpdated:()=>rw,layoutChanged:()=>Uw,layoutClassLoaded:()=>Wb,loadAppConfigFailed:()=>Ib,networkStatusChanged:()=>Iw,openOverlay:()=>kw,openWidget:()=>Db,openWidgets:()=>Rb,queryObjectChanged:()=>Fb,quitPrintPreview:()=>Qw,releaseAutoControlMapWidget:()=>iw,removeFromRegisterClientIdList:()=>Yw,requestAutoControlMapWidget:()=>ow,resetWidgetState:()=>Lb,resetWidgetsState:()=>Nb,saveThumbnailUrl:()=>tI,screenGroupNavInfoChanged:()=>Bw,screenPanelVisibleChanged:()=>$w,sectionNavInfoChanged:()=>Fw,selectionChanged:()=>xw,sessionStart:()=>gw,setAppInBuilder:()=>$b,setDataNeedRefresh:()=>Zb,setDataSourcePreloadData:()=>ww,setIsBusy:()=>jw,setPortalInfo:()=>pw,setPortalSelf:()=>Rw,setWidgetIsInlineEditingState:()=>Sw,setWidgetPreloadProps:()=>bw,setupAnimationPreview:()=>Gw,setupHoverPreview:()=>Vw,themeVariablesChanged:()=>Dw,updateDataSourceInfo:()=>Qb,updateNoPermissionResourceChangedFlag:()=>Jw,updateResourceSessions:()=>Kw,updateStoreState:()=>Aw,updateWidgetQuery:()=>ew,urlHashObjectChanged:()=>Bb,userLocaleChanged:()=>Hw,userSignIn:()=>mw,userSignOut:()=>vw,utilityStateChange:()=>Zw,widgetClassLoaded:()=>Tb,widgetConfigLoaded:()=>Pb,widgetMutableStatePropChange:()=>dw,widgetStatePropChange:()=>cw,widgetUpgraded:()=>Ab,zoomScaleChange:()=>Mw});var w={};s.r(w),s.d(w,{clearPortalSelf:()=>aI,getAppInfo:()=>lI,initPortalSelf:()=>iI,removeAppInfo:()=>uI});var I={};s.r(I),s.d(I,{triggerEvent:()=>fI});var E={};s.r(E),s.d(E,{CheckTarget:()=>hI,InvalidInfo:()=>gI,canCreateItem:()=>TI,canPublishFeatures:()=>AI,checkAccess:()=>yI,checkExbAccess:()=>bI,getAccessCapabilities:()=>SI,getPortalVersion:()=>wI,isItemInTheUpdatedGroup:()=>kI,isPortal1061OrBefore:()=>II,isPortal1080OrBefore:()=>EI,shouldCheckAppAccess:()=>DI});var C={};s.r(C),s.d(C,{getProxyReferrers:()=>VI,getProxyUrl:()=>BI,getWhetherUseProxy:()=>FI,isDataSourcePremium:()=>YI,isDataSourceSubscriber:()=>qI,isDataSourceSubscriberOrPremium:()=>JI,isPremium:()=>zI,isSubscriber:()=>HI,isUtilityPremium:()=>XI,isUtilitySubscriber:()=>KI,registerProxyReferrer:()=>GI,unregisterProxyReferrer:()=>WI});var O={};s.r(O),s.d(O,{EXB_DATA_SOURCE_ID_SET_TO_CREATED_JS_API_LAYER:()=>qO,_getFixedLayerIdByLayerDefinition:()=>iO,areDatesInUnknownTimezone:()=>FO,changeJSAPIGeometryTypeToRestAPIGeometryType:()=>pE,changeJimuFeatureLayerQueryToJSAPILayerQuery:()=>bE,changeJimuFieldsToJSAPIFields:()=>hE,changeJimuTimeToJSAPITimeExtent:()=>gE,changeRestAPIGeometryTypeToJSAPIGeometryType:()=>dE,changeToJSAPIGraphic:()=>yE,changeToRestAPIFeature:()=>vE,checkIsSuggestionRepeat:()=>xC,containsNonLatinCharacter:()=>HE,convertFieldToJimuField:()=>BC,createFeatureLayerByRecords:()=>uE,createJSAPIFeatureLayerByDataSourceFromFeatureCollectionItem:()=>jO,createJSAPILayerByDataSource:()=>NO,createRestAPILayerByDataSource:()=>MO,createRestFeatureLayerByRecords:()=>cE,createSQLClause:()=>pC,createSQLClauseSet:()=>fC,createSQLExpression:()=>hC,fetchAssociatedFeatureLayerDefinition:()=>QE,fetchAssociatedFeatureLayerUrl:()=>ZE,fetchAssociatedFeatureServicePortalItem:()=>tC,fetchSuggestionByFullText:()=>IC,fetchSuggestionByWhere:()=>wC,filterAttachments:()=>FC,findAssociatedFeatureLayerUrl:()=>rC,findMapServiceDataSource:()=>TO,fixLayerId:()=>tO,formatDateField:()=>UO,getArcGISSQL:()=>UE,getAssumedAssociatedLayerUrl:()=>eC,getChildDataSourceId:()=>lO,getChildDsJsonFromRootDs:()=>GO,getCodedValueListForCodedValueOrSubtypeField:()=>HC,getDataSourceIdByJSAPILayer:()=>vO,getDataSourceProxyUrl:()=>lC,getDataSourceSourceUrl:()=>uC,getDateFieldValue:()=>WO,getDateFieldValueWithoutTzOffset:()=>VO,getDisplayValueForCodedValueOrSubtype:()=>WC,getDisplayValueForCodedValueOrSubtypeBatch:()=>VC,getDisplayedSQLExpressionFromGroupSQLExpression:()=>mC,getDsIcon:()=>dC,getDsTypeString:()=>cC,getFieldInfoByFieldName:()=>GC,getFixedLayerIdByLayer:()=>rO,getFixedLayerIdByLayerDefinition:()=>oO,getFormattedDateFieldValue:()=>HO,getFullArcGISServiceUrl:()=>sC,getJSAPILayer:()=>AO,getJimuLayerIdByJSAPILayer:()=>mO,getLabelFromArcGISServiceUrl:()=>nC,getLayerDefinition:()=>DO,getLayerDefinitionIntersection:()=>kO,getLocalTimeOffset:()=>qE,getMergedSQLExpressions:()=>gC,getOriginDataLabel:()=>gO,getPopupInfo:()=>RO,getPopupInfoIntersection:()=>_O,getQueryParamsAndOptions:()=>uO,getRealDataSourceId:()=>fO,getRelatedMainDataSourceWithOriginInfo:()=>LO,getRestAPILayer:()=>PO,getSQL:()=>PC,getSQLExpressionFromGroupSQLExpression:()=>vC,getSortedArrayByLabel:()=>sO,getSuggestionItem:()=>AC,getSuggestions:()=>EC,getTimeZoneOffsetByName:()=>BO,getTimezoneAPIFromRuntime:()=>$O,getUrlByLayer:()=>pO,getUseDataSourceByDataSource:()=>hO,getUsedFieldsFromFeatureLayerQueryParams:()=>zO,getWhetherDataSourceHasSameSourceWithJSAPILayer:()=>yO,getWhetherUseProxy:()=>FI,handleGlobalIdField:()=>jE,isAGOLHostedService:()=>eO,isDerivedFrom:()=>SO,isFeatureLayerDsOrSceneLayerDs:()=>IE,isItemMixin:()=>EE,isJSAPILayerTypeSupported:()=>aO,isNumericalField:()=>$C,isSelectionView:()=>bO,isSupportedArcGISService:()=>iC,isSupportedSingleArcGISLayerService:()=>aC,isSupportedWholeArcGISService:()=>oC,mergeTimeExtent:()=>CO,parserSQL:()=>FE,queryAllAttachments:()=>UC,queryFeatureCountByField:()=>cO,queryRecordsByFullText:()=>OC,querySuggestions:()=>bC,queryValueLabelsByFieldAndPageSize:()=>dO,selectBySelectionMode:()=>kC,supportAttachment:()=>IO,supportSymbol:()=>wO,supportTime:()=>EO});var x={};s.r(x),s.d(x,{addNewUtilityByUrl:()=>YO,checkIsUrlExist:()=>JO,getUtilityIdbyServiceUrl:()=>KO});var T={};s.r(T),s.d(T,{convertGeometryJsonToGeometryInstance:()=>ix,createBuffer:()=>nx,projectDataRecordsToSpatialReference:()=>tx,projectToSpatialReference:()=>rx});var A={};s.r(A),s.d(A,{HistoryContext:()=>gx,HistoryProvider:()=>mx,browserHistory:()=>hx,changeDialog:()=>Ex,changeHashObjectByDataSourceSelection:()=>Cx,changePage:()=>bx,changeQueryObject:()=>yx,changeQueryObjectByDataSourceGDBVersion:()=>Ox,changeUrlHashObject:()=>Sx,changeView:()=>wx,changeViewBySectionNavInfo:()=>Ix,withHistory:()=>vx});var P={};s.r(P),s.d(P,{getDataSourceIdsFromExpression:()=>nT,getSingleStringExpressionText:()=>eT,getUseDataSourceFromExpParts:()=>Yx,getUseDataSourcesWithoutFields:()=>tT,getWhetherExpressionValid:()=>Kx,getWhetherFieldInDs:()=>Qx,isSingleStringExpression:()=>Zx,mergeUseDataSources:()=>Jx,whetherHasFieldsInUseDataSources:()=>rT});var D={};s.r(D),s.d(D,{IndexedDBCache:()=>oT,getDBName:()=>sT,whenRequest:()=>iT,whenTransaction:()=>aT});var R={};s.r(R),s.d(R,{CancelablePromise:()=>jD,cancelable:()=>FD,default:()=>UD,isCancelablePromise:()=>BD});var _={};s.r(_),s.d(_,{useCancelablePromiseMaker:()=>pR,useCheckSmallBrowserSizeMode:()=>dR,useControlled:()=>lR,useEffectOnce:()=>iR,useEffectWithPreviousValues:()=>hR,useEventCallback:()=>sR,useFirstMountState:()=>nR,useForkRef:()=>tR,useForwardRef:()=>rR,useLatest:()=>eR,usePrevious:()=>fR,useTranslation:()=>ZD,useUnmount:()=>aR,useUpdateEffect:()=>oR,useWidgetActived:()=>cR,useWidgetSelected:()=>uR});var k=s(1315),L=s(800),N=s(745),M=s.t(N,2),j=s(1688),U=s(2798);let F=function(e){e()};const B=()=>F,$=Symbol.for("react-redux-context"),G="undefined"!=typeof globalThis?globalThis:{};function W(){var e;if(!k.createContext)return{};const t=null!=(e=G[$])?e:G[$]=new Map;let r=t.get(k.createContext);return r||(r=k.createContext(null),t.set(k.createContext,r)),r}const V=W();function H(e=V){return function(){return(0,k.useContext)(e)}}const z=H(),q=()=>{throw new Error("uSES not initialized!")};let Y=q;const J=(e,t)=>e===t;function K(e=V){const t=e===V?z:H(e);return function(e,r={}){const{equalityFn:n=J,stabilityCheck:o,noopCheck:i}="function"==typeof r?{equalityFn:r}:r,{store:a,subscription:s,getServerState:l,stabilityCheck:u,noopCheck:c}=t(),d=((0,k.useRef)(!0),(0,k.useCallback)({[e.name]:t=>e(t)}[e.name],[e,u,o])),p=Y(s.addNestedSub,a.getState,l||a.getState,d,n);return(0,k.useDebugValue)(p),p}}const X=K();function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}function Z(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var ee=s(8679),te=s.n(ee),re=s(2973);const ne=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function oe(e,t,r,n,{areStatesEqual:o,areOwnPropsEqual:i,areStatePropsEqual:a}){let s,l,u,c,d,p=!1;return function(f,h){return p?function(p,f){const h=!i(f,l),g=!o(p,s,f,l);return s=p,l=f,h&&g?(u=e(s,l),t.dependsOnOwnProps&&(c=t(n,l)),d=r(u,c,l),d):h?(e.dependsOnOwnProps&&(u=e(s,l)),t.dependsOnOwnProps&&(c=t(n,l)),d=r(u,c,l),d):g?function(){const t=e(s,l),n=!a(t,u);return u=t,n&&(d=r(u,c,l)),d}():d}(f,h):(s=f,l=h,u=e(s,l),c=t(n,l),d=r(u,c,l),p=!0,d)}}function ie(e){return function(t){const r=e(t);function n(){return r}return n.dependsOnOwnProps=!1,n}}function ae(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function se(e,t){return function(t,{displayName:r}){const n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=ae(e);let o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=ae(o),o=n(t,r)),o},n}}function le(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function ue(e,t,r){return Q({},r,e,t)}const ce={notify(){},get:()=>[]};function de(e,t){let r,n=ce,o=0,i=!1;function a(){u.onStateChange&&u.onStateChange()}function s(){o++,r||(r=t?t.addNestedSub(a):e.subscribe(a),n=function(){const e=B();let t=null,r=null;return{clear(){t=null,r=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],r=t;for(;r;)e.push(r),r=r.next;return e},subscribe(e){let n=!0,o=r={callback:e,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){n&&null!==t&&(n=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}function l(){o--,r&&0===o&&(r(),r=void 0,n.clear(),n=ce)}const u={addNestedSub:function(e){s();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,s())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>n};return u}const pe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?k.useLayoutEffect:k.useEffect;function fe(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function he(e,t){if(fe(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!fe(e[r[n]],t[r[n]]))return!1;return!0}const ge=["reactReduxForwardedRef"];let me=q;const ve=[null,null];function ye(e,t,r,n,o,i){e.current=n,r.current=!1,o.current&&(o.current=null,i())}function Se(e,t){return e===t}const be=function(e,t,r,{pure:n,areStatesEqual:o=Se,areOwnPropsEqual:i=he,areStatePropsEqual:a=he,areMergedPropsEqual:s=he,forwardRef:l=!1,context:u=V}={}){const c=u,d=function(e){return e?"function"==typeof e?se(e):le(e,"mapStateToProps"):ie((()=>({})))}(e),p=function(e){return e&&"object"==typeof e?ie((t=>function(e,t){const r={};for(const n in e){const o=e[n];"function"==typeof o&&(r[n]=(...e)=>t(o(...e)))}return r}(e,t))):e?"function"==typeof e?se(e):le(e,"mapDispatchToProps"):ie((e=>({dispatch:e})))}(t),f=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:r,areMergedPropsEqual:n}){let o,i=!1;return function(t,r,a){const s=e(t,r,a);return i?n(s,o)||(o=s):(i=!0,o=s),o}}}(e):le(e,"mergeProps"):()=>ue}(r),h=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",r=`Connect(${t})`,n={shouldHandleStateChanges:h,displayName:r,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:d,initMapDispatchToProps:p,initMergeProps:f,areStatesEqual:o,areStatePropsEqual:a,areOwnPropsEqual:i,areMergedPropsEqual:s};function u(t){const[r,o,i]=k.useMemo((()=>{const{reactReduxForwardedRef:e}=t,r=Z(t,ge);return[t.context,e,r]}),[t]),a=k.useMemo((()=>r&&r.Consumer&&(0,re.isContextConsumer)(k.createElement(r.Consumer,null))?r:c),[r,c]),s=k.useContext(a),l=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),u=Boolean(s)&&Boolean(s.store),d=l?t.store:s.store,p=u?s.getServerState:d.getState,f=k.useMemo((()=>function(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:o}=t,i=Z(t,ne);return oe(r(e,i),n(e,i),o(e,i),e,i)}(d.dispatch,n)),[d]),[g,m]=k.useMemo((()=>{if(!h)return ve;const e=de(d,l?void 0:s.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[d,l,s]),v=k.useMemo((()=>l?s:Q({},s,{subscription:g})),[l,s,g]),y=k.useRef(),S=k.useRef(i),b=k.useRef(),w=k.useRef(!1),I=(k.useRef(!1),k.useRef(!1)),E=k.useRef();pe((()=>(I.current=!0,()=>{I.current=!1})),[]);const C=k.useMemo((()=>()=>b.current&&i===S.current?b.current:f(d.getState(),i)),[d,i]),O=k.useMemo((()=>e=>g?function(e,t,r,n,o,i,a,s,l,u,c){if(!e)return()=>{};let d=!1,p=null;const f=()=>{if(d||!s.current)return;const e=t.getState();let r,f;try{r=n(e,o.current)}catch(e){f=e,p=e}f||(p=null),r===i.current?a.current||u():(i.current=r,l.current=r,a.current=!0,c())};return r.onStateChange=f,r.trySubscribe(),f(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p}}(h,d,g,f,S,y,w,I,b,m,e):()=>{}),[g]);var x,T;let A;x=ye,T=[S,y,w,i,b,m],pe((()=>x(...T)),undefined);try{A=me(O,C,p?()=>f(p(),i):C)}catch(e){throw E.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${E.current.stack}\n\n`),e}pe((()=>{E.current=void 0,b.current=void 0,y.current=A}));const P=k.useMemo((()=>k.createElement(e,Q({},A,{ref:o}))),[o,e,A]);return k.useMemo((()=>h?k.createElement(a.Provider,{value:v},P):P),[a,P,v])}const g=k.memo(u);if(g.WrappedComponent=e,g.displayName=u.displayName=r,l){const t=k.forwardRef((function(e,t){return k.createElement(g,Q({},e,{reactReduxForwardedRef:t}))}));return t.displayName=r,t.WrappedComponent=e,te()(t,e)}return te()(g,e)}},we=function({store:e,context:t,children:r,serverState:n,stabilityCheck:o="once",noopCheck:i="once"}){const a=k.useMemo((()=>{const t=de(e);return{store:e,subscription:t,getServerState:n?()=>n:void 0,stabilityCheck:o,noopCheck:i}}),[e,n,o,i]),s=k.useMemo((()=>e.getState()),[e]);pe((()=>{const{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),s!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[a,s]);const l=t||V;return k.createElement(l.Provider,{value:a},r)};function Ie(e=V){const t=e===V?z:H(e);return function(){const{store:e}=t();return e}}const Ee=Ie();function Ce(e=V){const t=e===V?Ee:Ie(e);return function(){return t().dispatch}}const Oe=Ce();var xe,Te;xe=U.useSyncExternalStoreWithSelector,Y=xe,(e=>{me=e})(j.useSyncExternalStore),Te=L.unstable_batchedUpdates,F=Te;var Ae=s(759),Pe=s.n(Ae),De=s(4184),Re=s.n(De);let _e;const ke=new Uint8Array(16);function Le(){if(!_e&&(_e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _e(ke)}const Ne=[];for(let e=0;e<256;++e)Ne.push((e+256).toString(16).slice(1));let Me,je,Ue=0,Fe=0;const Be=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let i=(e=e||{}).node||Me,a=void 0!==e.clockseq?e.clockseq:je;if(null==i||null==a){const t=e.random||(e.rng||Le)();null==i&&(i=Me=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==a&&(a=je=16383&(t[6]<<8|t[7]))}let s=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:Fe+1;const u=s-Ue+(l-Fe)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||s>Ue)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ue=s,Fe=l,je=a,s+=122192928e5;const c=(1e4*(268435455&s)+l)%4294967296;o[n++]=c>>>24&255,o[n++]=c>>>16&255,o[n++]=c>>>8&255,o[n++]=255&c;const d=s/4294967296*1e4&268435455;o[n++]=d>>>8&255,o[n++]=255&d,o[n++]=d>>>24&15|16,o[n++]=d>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(let e=0;e<6;++e)o[n+e]=i[e];return t||function(e,t=0){return Ne[e[t+0]]+Ne[e[t+1]]+Ne[e[t+2]]+Ne[e[t+3]]+"-"+Ne[e[t+4]]+Ne[e[t+5]]+"-"+Ne[e[t+6]]+Ne[e[t+7]]+"-"+Ne[e[t+8]]+Ne[e[t+9]]+"-"+Ne[e[t+10]]+Ne[e[t+11]]+Ne[e[t+12]]+Ne[e[t+13]]+Ne[e[t+14]]+Ne[e[t+15]]}(o)};var $e=s(1249),Ge=s(8924);const We="%[a-f0-9]{2}",Ve=new RegExp("("+We+")|([^%]+?)","gi"),He=new RegExp("("+We+")+","gi");function ze(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(1===e.length)return e;t=t||1;const r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],ze(r),ze(n))}function qe(e){try{return decodeURIComponent(e)}catch{let t=e.match(Ve)||[];for(let r=1;r<t.length;r++)t=(e=ze(t,r).join("")).match(Ve)||[];return e}}function Ye(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];const r=e.indexOf(t);return-1===r?[]:[e.slice(0,r),e.slice(r+t.length)]}function Je(e,t){const r={};if(Array.isArray(t))for(const n of t){const t=Object.getOwnPropertyDescriptor(e,n);t?.enumerable&&Object.defineProperty(r,n,t)}else for(const n of Reflect.ownKeys(e)){const o=Object.getOwnPropertyDescriptor(e,n);o.enumerable&&t(n,e[n],e)&&Object.defineProperty(r,n,o)}return r}const Ke=e=>null==e,Xe=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),Qe=Symbol("encodeFragmentIdentifier");function Ze(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function et(e,t){return t.encode?t.strict?Xe(e):encodeURIComponent(e):e}function tt(e,t){return t.decode?function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function(e){const t={"%FE%FF":"��","%FF%FE":"��"};let r=He.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const e=qe(r[0]);e!==r[0]&&(t[r[0]]=e)}r=He.exec(e)}t["%C2"]="�";const n=Object.keys(t);for(const r of n)e=e.replace(new RegExp(r,"g"),t[r]);return e}(e)}}(e):e}function rt(e){return Array.isArray(e)?e.sort():"object"==typeof e?rt(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function nt(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function ot(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function it(e){const t=(e=nt(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function at(e,t){Ze((t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t}).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),t?void 0!==n[e]?n[e]=[...n[e],r]:n[e]=[r]:n[e]=r};case"colon-list-separator":return(e,r,n)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==n[e]?n[e]=[...n[e],r]:n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const o="string"==typeof r&&r.includes(e.arrayFormatSeparator),i="string"==typeof r&&!o&&tt(r,e).includes(e.arrayFormatSeparator);r=i?tt(r,e):r;const a=o||i?r.split(e.arrayFormatSeparator).map((t=>tt(t,e))):null===r?r:tt(r,e);n[t]=a};case"bracket-separator":return(t,r,n)=>{const o=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!o)return void(n[t]=r?tt(r,e):r);const i=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>tt(t,e)));void 0!==n[t]?n[t]=[...n[t],...i]:n[t]=i};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[...[r[e]].flat(),t]:r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const o of e.split("&")){if(""===o)continue;const e=t.decode?o.replace(/\+/g," "):o;let[i,a]=Ye(e,"=");void 0===i&&(i=e),a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:tt(a,t),r(tt(i,t),a,n)}for(const[e,r]of Object.entries(n))if("object"==typeof r&&null!==r)for(const[e,n]of Object.entries(r))r[e]=ot(n,t);else n[e]=ot(r,t);return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=rt(r):e[t]=r,e}),Object.create(null))}function st(e,t){if(!e)return"";Ze((t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t}).arrayFormatSeparator);const r=r=>t.skipNull&&Ke(e[r])||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const o=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[et(t,e),"[",o,"]"].join("")]:[...r,[et(t,e),"[",et(o,e),"]=",et(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[et(t,e),"[]"].join("")]:[...r,[et(t,e),"[]=",et(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[et(t,e),":list="].join("")]:[...r,[et(t,e),":list=",et(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:(o=null===o?"":o,0===n.length?[[et(r,e),t,et(o,e)].join("")]:[[n,et(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,et(t,e)]:[...r,[et(t,e),"=",et(n,e)].join("")]}}(t),o={};for(const[t,n]of Object.entries(e))r(t)||(o[t]=n);const i=Object.keys(o);return!1!==t.sort&&i.sort(t.sort),i.map((r=>{const o=e[r];return void 0===o?"":null===o?et(r,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?et(r,t)+"[]":o.reduce(n(r),[]).join("&"):et(r,t)+"="+et(o,t)})).filter((e=>e.length>0)).join("&")}function lt(e,t){t={decode:!0,...t};let[r,n]=Ye(e,"#");return void 0===r&&(r=e),{url:r?.split("?")?.[0]??"",query:at(it(e),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:tt(n,t)}:{}}}function ut(e,t){t={encode:!0,strict:!0,[Qe]:!0,...t};const r=nt(e.url).split("?")[0]||"";let n=st({...at(it(e.url),{sort:!1}),...e.query},t);n&&(n=`?${n}`);let o=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);if(e.fragmentIdentifier){const n=new URL(r);n.hash=e.fragmentIdentifier,o=t[Qe]?n.hash:`#${e.fragmentIdentifier}`}return`${r}${n}${o}`}function ct(e,t,r){r={parseFragmentIdentifier:!0,[Qe]:!1,...r};const{url:n,query:o,fragmentIdentifier:i}=lt(e,r);return ut({url:n,query:Je(o,t),fragmentIdentifier:i},r)}function dt(e,t,r){return ct(e,Array.isArray(t)?e=>!t.includes(e):(e,r)=>!t(e,r),r)}const pt=t;function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}function gt(e,t,r){return gt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&ft(o,r.prototype),o},gt.apply(null,arguments)}function mt(e){var t="function"==typeof Map?new Map:void 0;return mt=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return gt(e,arguments,ht(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ft(r,e)},mt(e)}function vt(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var yt={symbols:{"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:vt,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:vt,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"}}},St=yt,bt=function(e){var t,r;function n(t){return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,ft(t,r),n}(mt(Error)),wt=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function It(e,t){var r,n=e.pop();return t.push(n.f.apply(n,(r=[]).concat.apply(r,t.splice(-n.argCount)))),n.precedence}function Et(e){return e.split("").reverse().join("")}function Ct(e,t){return e.substr(-t.length)===t}var Ot=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function xt(e){return"string"!=typeof e?e:e.match(Ot)?parseFloat(e):e}var Tt=function(e){return function(t,r){void 0===r&&(r="16px");var n=t,o=r;if("string"==typeof t){if(!Ct(t,"px"))throw new bt(69,e,t);n=xt(t)}if("string"==typeof r){if(!Ct(r,"px"))throw new bt(70,e,r);o=xt(r)}if("string"==typeof n)throw new bt(71,t,e);if("string"==typeof o)throw new bt(72,r,e);return""+n/o+e}},At=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;var Pt=Tt("rem");function Dt(e){return Math.round(255*e)}function Rt(e,t,r){return Dt(e)+","+Dt(t)+","+Dt(r)}function _t(e,t,r,n){if(void 0===n&&(n=Rt),0===t)return n(r,r,r);var o=(e%360+360)%360/60,i=(1-Math.abs(2*r-1))*t,a=i*(1-Math.abs(o%2-1)),s=0,l=0,u=0;o>=0&&o<1?(s=i,l=a):o>=1&&o<2?(s=a,l=i):o>=2&&o<3?(l=i,u=a):o>=3&&o<4?(l=a,u=i):o>=4&&o<5?(s=a,u=i):o>=5&&o<6&&(s=i,u=a);var c=r-i/2;return n(s+c,l+c,u+c)}var kt={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Lt=/^#[a-fA-F0-9]{6}$/,Nt=/^#[a-fA-F0-9]{8}$/,Mt=/^#[a-fA-F0-9]{3}$/,jt=/^#[a-fA-F0-9]{4}$/,Ut=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,Ft=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Bt=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,$t=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Gt(e){if("string"!=typeof e)throw new bt(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return kt[t]?"#"+kt[t]:e}(e);if(t.match(Lt))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(Nt)){var r=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:r}}if(t.match(Mt))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(jt)){var n=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:n}}var o=Ut.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var i=Ft.exec(t.substring(0,50));if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])>1?parseFloat(""+i[4])/100:parseFloat(""+i[4])};var a=Bt.exec(t);if(a){var s="rgb("+_t(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",l=Ut.exec(s);if(!l)throw new bt(4,t,s);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var u=$t.exec(t.substring(0,50));if(u){var c="rgb("+_t(parseInt(""+u[1],10),parseInt(""+u[2],10)/100,parseInt(""+u[3],10)/100)+")",d=Ut.exec(c);if(!d)throw new bt(4,t,c);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+u[4])>1?parseFloat(""+u[4])/100:parseFloat(""+u[4])}}throw new bt(5)}function Wt(e){return function(e){var t,r=e.red/255,n=e.green/255,o=e.blue/255,i=Math.max(r,n,o),a=Math.min(r,n,o),s=(i+a)/2;if(i===a)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var l=i-a,u=s>.5?l/(2-i-a):l/(i+a);switch(i){case r:t=(n-o)/l+(n<o?6:0);break;case n:t=(o-r)/l+2;break;default:t=(r-n)/l+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:u,lightness:s,alpha:e.alpha}:{hue:t,saturation:u,lightness:s}}(Gt(e))}var Vt=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function Ht(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function zt(e){return Ht(Math.round(255*e))}function qt(e,t,r){return Vt("#"+zt(e)+zt(t)+zt(r))}function Yt(e,t,r){return _t(e,t,r,qt)}function Jt(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return Vt("#"+Ht(e)+Ht(t)+Ht(r));if("object"==typeof e&&void 0===t&&void 0===r)return Vt("#"+Ht(e.red)+Ht(e.green)+Ht(e.blue));throw new bt(6)}function Kt(e,t,r,n){if("string"==typeof e&&"number"==typeof t){var o=Gt(e);return"rgba("+o.red+","+o.green+","+o.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return n>=1?Jt(e,t,r):"rgba("+e+","+t+","+r+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?Jt(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new bt(7)}var Xt=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)},Qt=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha},Zt=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)},er=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha};function tr(e){if("object"!=typeof e)throw new bt(8);if(Qt(e))return Kt(e);if(Xt(e))return Jt(e);if(er(e))return function(e,t,r,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return n>=1?Yt(e,t,r):"rgba("+_t(e,t,r)+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?Yt(e.hue,e.saturation,e.lightness):"rgba("+_t(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new bt(2)}(e);if(Zt(e))return function(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return Yt(e,t,r);if("object"==typeof e&&void 0===t&&void 0===r)return Yt(e.hue,e.saturation,e.lightness);throw new bt(1)}(e);throw new bt(8)}function rr(e,t,r){return function(){var n=r.concat(Array.prototype.slice.call(arguments));return n.length>=t?e.apply(this,n):rr(e,t,n)}}function nr(e){return rr(e,e.length,[])}function or(e,t,r){return Math.max(e,Math.min(t,r))}function ir(e,t){if("transparent"===t)return t;var r=Wt(t);return tr(Q({},r,{lightness:or(0,1,r.lightness-parseFloat(e))}))}var ar=nr(ir);function sr(e){if("transparent"===e)return 0;var t=Gt(e),r=Object.keys(t).map((function(e){var r=t[e]/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)})),n=r[0],o=r[1],i=r[2];return parseFloat((.2126*n+.7152*o+.0722*i).toFixed(3))}function lr(e,t){if("transparent"===t)return t;var r=Wt(t);return tr(Q({},r,{lightness:or(0,1,r.lightness+parseFloat(e))}))}var ur=nr(lr);function cr(e,t,r){if("transparent"===t)return r;if("transparent"===r)return t;if(0===e)return r;var n=Gt(t),o=Q({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),i=Gt(r),a=Q({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),s=o.alpha-a.alpha,l=2*parseFloat(e)-1,u=((l*s==-1?l:l+s)/(1+l*s)+1)/2,c=1-u;return Kt({red:Math.floor(o.red*u+a.red*c),green:Math.floor(o.green*u+a.green*c),blue:Math.floor(o.blue*u+a.blue*c),alpha:o.alpha*parseFloat(e)+a.alpha*(1-parseFloat(e))})}var dr=nr(cr),pr="#000",fr="#fff";function hr(e,t){return"transparent"===t?t:dr(parseFloat(e),"rgb(0, 0, 0)",t)}var gr=nr(hr);function mr(e,t){return"transparent"===t?t:dr(parseFloat(e),"rgb(255, 255, 255)",t)}var vr=nr(mr),yr=s(6128),Sr=s(3279),br=s.n(Sr),wr=s(2614),Ir=s.n(wr),Er=function(e,t){return Er=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Er(e,t)};var Cr=function(e){return"function"==typeof e},Or=function(){return"undefined"==typeof window},xr=function(e){return e instanceof Element||e instanceof HTMLDocument},Tr=function(e){function t(t){var r=e.call(this,t)||this;r.cancelHandler=function(){r.resizeHandler&&r.resizeHandler.cancel&&(r.resizeHandler.cancel(),r.resizeHandler=null)},r.attachObserver=function(){var e=r.props,t=e.targetRef,n=e.observerOptions;if(!Or()){t&&t.current&&(r.targetRef.current=t.current);var o=r.getElement();o&&(r.observableElement&&r.observableElement===o||(r.observableElement=o,r.resizeObserver.observe(o,n)))}},r.getElement=function(){var e=r.props,t=e.querySelector,n=e.targetDomEl;if(Or())return null;if(t)return document.querySelector(t);if(n&&xr(n))return n;if(r.targetRef&&xr(r.targetRef.current))return r.targetRef.current;var o=(0,L.findDOMNode)(r);if(!o)return null;switch(r.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}},r.createResizeHandler=function(e){var t=r.props,n=t.handleWidth,o=void 0===n||n,i=t.handleHeight,a=void 0===i||i,s=t.onResize;(o||a)&&e.forEach((function(e){var t=e&&e.contentRect||{},n=t.width,i=t.height;!r.skipOnMount&&!Or()&&function(e){var t=e.width,n=e.height;r.state.width===t&&r.state.height===n||r.state.width===t&&!a||r.state.height===n&&!o||(null==s||s(t,n),r.setState({width:t,height:n}))}({width:n,height:i}),r.skipOnMount=!1}))},r.getRenderType=function(){var e=r.props,t=e.render,n=e.children;return Cr(t)?"renderProp":Cr(n)?"childFunction":(0,k.isValidElement)(n)?"child":Array.isArray(n)?"childArray":"parent"};var n=t.skipOnMount,o=t.refreshMode,i=t.refreshRate,a=void 0===i?1e3:i,s=t.refreshOptions;return r.state={width:void 0,height:void 0},r.sizeRef={current:r.state},r.skipOnMount=n,r.targetRef=(0,k.createRef)(),r.observableElement=null,Or()||(r.resizeHandler=function(e,t,r,n){switch(t){case"debounce":return br()(e,r,n);case"throttle":return Ir()(e,r,n);default:return e}}(r.createResizeHandler,o,a,s),r.resizeObserver=new window.ResizeObserver(r.resizeHandler)),r}return function(e,t){function r(){this.constructor=e}Er(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver(),this.sizeRef.current=this.state},t.prototype.componentWillUnmount=function(){Or()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e=this.props,t=e.render,r=e.children,n=e.nodeType,o=void 0===n?"div":n,i=this.state,a={width:i.width,height:i.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return null==t?void 0:t(a);case"childFunction":return null==r?void 0:r(a);case"child":var s=r;if(s.type&&"string"==typeof s.type){var l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(a,["targetRef"]);return(0,k.cloneElement)(s,l)}return(0,k.cloneElement)(s,a);case"childArray":return r.map((function(e){return!!e&&(0,k.cloneElement)(e,a)}));default:return k.default.createElement(o,null)}},t}(k.PureComponent),Ar=Object.defineProperty,Pr={};((e,t)=>{for(var r in t)Ar(e,r,{get:t[r],enumerable:!0})})(Pr,{assign:()=>un,colors:()=>an,createStringInterpolator:()=>tn,skipAnimation:()=>sn,to:()=>rn,willAdvance:()=>ln});var Dr=zr(),Rr=e=>Gr(e,Dr),_r=zr();Rr.write=e=>Gr(e,_r);var kr=zr();Rr.onStart=e=>Gr(e,kr);var Lr=zr();Rr.onFrame=e=>Gr(e,Lr);var Nr=zr();Rr.onFinish=e=>Gr(e,Nr);var Mr=[];Rr.setTimeout=(e,t)=>{const r=Rr.now()+t,n=()=>{const e=Mr.findIndex((e=>e.cancel==n));~e&&Mr.splice(e,1),Br-=~e?1:0},o={time:r,handler:e,cancel:n};return Mr.splice(jr(r),0,o),Br+=1,Wr(),o};var jr=e=>~(~Mr.findIndex((t=>t.time>e))||~Mr.length);Rr.cancel=e=>{kr.delete(e),Lr.delete(e),Nr.delete(e),Dr.delete(e),_r.delete(e)},Rr.sync=e=>{$r=!0,Rr.batchedUpdates(e),$r=!1},Rr.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function n(...e){t=e,Rr.onStart(r)}return n.handler=e,n.cancel=()=>{kr.delete(r),t=null},n};var Ur="undefined"!=typeof window?window.requestAnimationFrame:()=>{};Rr.use=e=>Ur=e,Rr.now="undefined"!=typeof performance?()=>performance.now():Date.now,Rr.batchedUpdates=e=>e(),Rr.catch=console.error,Rr.frameLoop="always",Rr.advance=()=>{"demand"!==Rr.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Hr()};var Fr=-1,Br=0,$r=!1;function Gr(e,t){$r?(t.delete(e),e(0)):(t.add(e),Wr())}function Wr(){Fr<0&&(Fr=0,"demand"!==Rr.frameLoop&&Ur(Vr))}function Vr(){~Fr&&(Ur(Vr),Rr.batchedUpdates(Hr))}function Hr(){const e=Fr;Fr=Rr.now();const t=jr(Fr);t&&(qr(Mr.splice(0,t),(e=>e.handler())),Br-=t),Br?(kr.flush(),Dr.flush(e?Math.min(64,Fr-e):16.667),Lr.flush(),_r.flush(),Nr.flush()):Fr=-1}function zr(){let e=new Set,t=e;return{add(r){Br+=t!=e||e.has(r)?0:1,e.add(r)},delete:r=>(Br-=t==e&&e.has(r)?1:0,e.delete(r)),flush(r){t.size&&(e=new Set,Br-=t.size,qr(t,(t=>t(r)&&e.add(t))),Br+=e.size,t=e)}}}function qr(e,t){e.forEach((e=>{try{t(e)}catch(e){Rr.catch(e)}}))}function Yr(){}var Jr={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function Kr(e,t){if(Jr.arr(e)){if(!Jr.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var Xr=(e,t)=>e.forEach(t);function Qr(e,t,r){if(Jr.arr(e))for(let n=0;n<e.length;n++)t.call(r,e[n],`${n}`);else for(const n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n)}var Zr=e=>Jr.und(e)?[]:Jr.arr(e)?e:[e];function en(e,t){if(e.size){const r=Array.from(e);e.clear(),Xr(r,t)}}var tn,rn,nn=(e,...t)=>en(e,(e=>e(...t))),on=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),an=null,sn=!1,ln=Yr,un=e=>{e.to&&(rn=e.to),e.now&&(Rr.now=e.now),void 0!==e.colors&&(an=e.colors),null!=e.skipAnimation&&(sn=e.skipAnimation),e.createStringInterpolator&&(tn=e.createStringInterpolator),e.requestAnimationFrame&&Rr.use(e.requestAnimationFrame),e.batchedUpdates&&(Rr.batchedUpdates=e.batchedUpdates),e.willAdvance&&(ln=e.willAdvance),e.frameLoop&&(Rr.frameLoop=e.frameLoop)},cn=new Set,dn=[],pn=[],fn=0,hn={get idle(){return!cn.size&&!dn.length},start(e){fn>e.priority?(cn.add(e),Rr.onStart(gn)):(mn(e),Rr(yn))},advance:yn,sort(e){if(fn)Rr.onFrame((()=>hn.sort(e)));else{const t=dn.indexOf(e);~t&&(dn.splice(t,1),vn(e))}},clear(){dn=[],cn.clear()}};function gn(){cn.forEach(mn),cn.clear(),Rr(yn)}function mn(e){dn.includes(e)||vn(e)}function vn(e){dn.splice(function(t,r){const n=t.findIndex((t=>t.priority>e.priority));return n<0?t.length:n}(dn),0,e)}function yn(e){const t=pn;for(let r=0;r<dn.length;r++){const n=dn[r];fn=n.priority,n.idle||(ln(n),n.advance(e),n.idle||t.push(n))}return fn=0,(pn=dn).length=0,(dn=t).length>0}var Sn="[-+]?\\d*\\.?\\d+",bn=Sn+"%";function wn(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var In=new RegExp("rgb"+wn(Sn,Sn,Sn)),En=new RegExp("rgba"+wn(Sn,Sn,Sn,Sn)),Cn=new RegExp("hsl"+wn(Sn,bn,bn)),On=new RegExp("hsla"+wn(Sn,bn,bn,Sn)),xn=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Tn=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,An=/^#([0-9a-fA-F]{6})$/,Pn=/^#([0-9a-fA-F]{8})$/;function Dn(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Rn(e,t,r){const n=r<.5?r*(1+t):r+t-r*t,o=2*r-n,i=Dn(o,n,e+1/3),a=Dn(o,n,e),s=Dn(o,n,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function _n(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function kn(e){return(parseFloat(e)%360+360)%360/360}function Ln(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Nn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Mn(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=An.exec(e))?parseInt(t[1]+"ff",16)>>>0:an&&void 0!==an[e]?an[e]:(t=In.exec(e))?(_n(t[1])<<24|_n(t[2])<<16|_n(t[3])<<8|255)>>>0:(t=En.exec(e))?(_n(t[1])<<24|_n(t[2])<<16|_n(t[3])<<8|Ln(t[4]))>>>0:(t=xn.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Pn.exec(e))?parseInt(t[1],16)>>>0:(t=Tn.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Cn.exec(e))?(255|Rn(kn(t[1]),Nn(t[2]),Nn(t[3])))>>>0:(t=On.exec(e))?(Rn(kn(t[1]),Nn(t[2]),Nn(t[3]))|Ln(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}var jn=(e,t,r)=>{if(Jr.fun(e))return e;if(Jr.arr(e))return jn({range:e,output:t,extrapolate:r});if(Jr.str(e.output[0]))return tn(e);const n=e,o=n.output,i=n.range||[0,1],a=n.extrapolateLeft||n.extrapolate||"extend",s=n.extrapolateRight||n.extrapolate||"extend",l=n.easing||(e=>e);return e=>{const t=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(e,i);return function(e,t,r,n,o,i,a,s,l){let u=l?l(e):e;if(u<t){if("identity"===a)return u;"clamp"===a&&(u=t)}if(u>r){if("identity"===s)return u;"clamp"===s&&(u=r)}return n===o?n:t===r?e<=t?n:o:(t===-1/0?u=-u:r===1/0?u-=t:u=(u-t)/(r-t),u=i(u),n===-1/0?u=-u:o===1/0?u+=n:u=u*(o-n)+n,u)}(e,i[t],i[t+1],o[t],o[t+1],l,a,s,n.map)}},Un=1.70158,Fn=1.525*Un,Bn=Un+1,$n=2*Math.PI/3,Gn=2*Math.PI/4.5,Wn=e=>{const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},Vn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Bn*e*e*e-Un*e*e,easeOutBack:e=>1+Bn*Math.pow(e-1,3)+Un*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-Fn)/2:(Math.pow(2*e-2,2)*((Fn+1)*(2*e-2)+Fn)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*$n),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*$n)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Gn)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Gn)/2+1,easeInBounce:e=>1-Wn(1-e),easeOutBounce:Wn,easeInOutBounce:e=>e<.5?(1-Wn(1-2*e))/2:(1+Wn(2*e-1))/2,steps:(e,t="end")=>r=>{const n=(r="end"===t?Math.min(r,.999):Math.max(r,.001))*e;return o=("end"===t?Math.floor(n):Math.ceil(n))/e,Math.min(Math.max(o,0),1);var o}},Hn=Symbol.for("FluidValue.get"),zn=Symbol.for("FluidValue.observers"),qn=e=>Boolean(e&&e[Hn]),Yn=e=>e&&e[Hn]?e[Hn]():e,Jn=e=>e[zn]||null;function Kn(e,t){const r=e[zn];r&&r.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var Xn=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Qn(this,e)}},Qn=(e,t)=>ro(e,Hn,t);function Zn(e,t){if(e[Hn]){let r=e[zn];r||ro(e,zn,r=new Set),r.has(t)||(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function eo(e,t){const r=e[zn];if(r&&r.has(t)){const n=r.size-1;n?r.delete(t):e[zn]=null,e.observerRemoved&&e.observerRemoved(n,t)}}var to,ro=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),no=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,oo=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,io=new RegExp(`(${no.source})(%|[a-z]+)`,"i"),ao=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,so=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,lo=e=>{const[t,r]=uo(e);if(!t||on())return e;const n=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(n)return n.trim();if(r&&r.startsWith("--")){return window.getComputedStyle(document.documentElement).getPropertyValue(r)||e}return r&&so.test(r)?lo(r):r||e},uo=e=>{const t=so.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]},co=(e,t,r,n,o)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(n)}, ${o})`,po=e=>{to||(to=an?new RegExp(`(${Object.keys(an).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>Yn(e).replace(so,lo).replace(oo,Mn).replace(to,Mn))),r=t.map((e=>e.match(no).map(Number))),n=r[0].map(((e,t)=>r.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>jn({...e,output:t})));return e=>{const r=!io.test(t[0])&&t.find((e=>io.test(e)))?.replace(no,"");let o=0;return t[0].replace(no,(()=>`${n[o++](e)}${r||""}`)).replace(ao,co)}},fo="react-spring: ",ho=e=>{const t=e;let r=!1;if("function"!=typeof t)throw new TypeError(`${fo}once requires a function parameter`);return(...e)=>{r||(t(...e),r=!0)}},go=ho(console.warn);function mo(){go(`${fo}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var vo,yo=ho(console.warn);function So(e){return Jr.str(e)&&("#"==e[0]||/\d/.test(e)||!on()&&so.test(e)||e in(an||{}))}var bo,wo=new WeakMap,Io=e=>e.forEach((({target:e,contentRect:t})=>wo.get(e)?.forEach((e=>e(t))))),Eo=new Set,Co=(e,{container:t=document.documentElement}={})=>t===document.documentElement?(e=>(Eo.add(e),bo||(bo=(()=>{const e=()=>{Eo.forEach((e=>e({width:window.innerWidth,height:window.innerHeight})))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})()),()=>{Eo.delete(e),!Eo.size&&bo&&(bo(),bo=void 0)}))(e):function(e,t){vo||"undefined"!=typeof ResizeObserver&&(vo=new ResizeObserver(Io));let r=wo.get(t);return r||(r=new Set,wo.set(t,r)),r.add(e),vo&&vo.observe(t),()=>{const r=wo.get(t);r&&(r.delete(e),!r.size&&vo&&vo.unobserve(t))}}(e,t),Oo={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},xo=class{constructor(e,t){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=e=>{const t=this.info[e],{length:r,position:n}=Oo[e];var o,i;t.current=this.container[`scroll${n}`],t.scrollLength=this.container["scroll"+r]-this.container["client"+r],t.progress=(o=t.scrollLength,i=t.current,o-0==0?1:(i-0)/(o-0))},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=e,this.container=t,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},To=new WeakMap,Ao=new WeakMap,Po=new WeakMap,Do=e=>e===document.documentElement?window:e,Ro=on()?k.useEffect:k.useLayoutEffect,_o=()=>{const e=(0,k.useRef)(!1);return Ro((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function ko(){const e=(0,k.useState)()[1],t=_o();return()=>{t.current&&e(Math.random())}}var Lo=e=>(0,k.useEffect)(e,No),No=[];function Mo(e){const t=(0,k.useRef)();return(0,k.useEffect)((()=>{t.current=e})),t.current}var jo=()=>{const[e,t]=(0,k.useState)(null);return Ro((()=>{const e=window.matchMedia("(prefers-reduced-motion)"),r=e=>{t(e.matches),un({skipAnimation:e.matches})};return r(e),e.addEventListener("change",r),()=>{e.removeEventListener("change",r)}}),[]),e},Uo=Symbol.for("Animated:node"),Fo=e=>e&&e[Uo],Bo=(e,t)=>{return r=e,n=Uo,o=t,Object.defineProperty(r,n,{value:o,writable:!0,configurable:!0});var r,n,o},$o=e=>e&&e[Uo]&&e[Uo].getPayload(),Go=class{constructor(){Bo(this,this)}getPayload(){return this.payload||[]}},Wo=class extends Go{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Jr.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Wo(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Jr.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Jr.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Vo=class extends Wo{constructor(e){super(0),this._string=null,this._toString=jn({output:[e,e]})}static create(e){return new Vo(e)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(Jr.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=jn({output:[this.getValue(),e]})),this._value=0,super.reset()}},Ho={dependencies:null},zo=class extends Go{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Qr(this.source,((r,n)=>{var o;(o=r)&&o[Uo]===o?t[n]=r.getValue(e):qn(r)?t[n]=Yn(r):e||(t[n]=r)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Xr(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return Qr(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Ho.dependencies&&qn(e)&&Ho.dependencies.add(e);const t=$o(e);t&&Xr(t,(e=>this.add(e)))}},qo=class extends zo{constructor(e){super(e)}static create(e){return new qo(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,r)=>t.setValue(e[r]))).some(Boolean):(super.setValue(e.map(Yo)),!0)}};function Yo(e){return(So(e)?Vo:Wo).create(e)}function Jo(e){const t=Fo(e);return t?t.constructor:Jr.arr(e)?qo:So(e)?Vo:Wo}var Ko=(e,t)=>{const r=!Jr.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,k.forwardRef)(((n,o)=>{const i=(0,k.useRef)(null),a=r&&(0,k.useCallback)((e=>{i.current=function(e,t){return e&&(Jr.fun(e)?e(t):e.current=t),t}(o,e)}),[o]),[s,l]=function(e,t){const r=new Set;return Ho.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new zo(e),Ho.dependencies=null,[e,r]}(n,t),u=ko(),c=()=>{const e=i.current;r&&!e||!1===(!!e&&t.applyAnimatedValues(e,s.getValue(!0)))&&u()},d=new Xo(c,l),p=(0,k.useRef)();Ro((()=>(p.current=d,Xr(l,(e=>Zn(e,d))),()=>{p.current&&(Xr(p.current.deps,(e=>eo(e,p.current))),Rr.cancel(p.current.update))}))),(0,k.useEffect)(c,[]),Lo((()=>()=>{const e=p.current;Xr(e.deps,(t=>eo(t,e)))}));const f=t.getComponentProps(s.getValue());return k.createElement(e,{...f,ref:a})}))},Xo=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&Rr.write(this.update)}},Qo=Symbol.for("AnimatedComponent"),Zo=e=>Jr.str(e)?e:e&&Jr.str(e.displayName)?e.displayName:Jr.fun(e)&&e.name||null,ei=class{};function ti(e,...t){return Jr.fun(e)?e(...t):e}var ri=(e,t)=>!0===e||!!(t&&e&&(Jr.fun(e)?e(t):Zr(e).includes(t))),ni=(e,t)=>Jr.obj(e)?t&&e[t]:e,oi=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,ii=e=>e,ai=(e,t=ii)=>{let r=si;e.default&&!0!==e.default&&(e=e.default,r=Object.keys(e));const n={};for(const o of r){const r=t(e[o],o);Jr.und(r)||(n[o]=r)}return n},si=["config","onProps","onStart","onChange","onPause","onResume","onRest"],li={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function ui(e){const t=function(e){const t={};let r=0;if(Qr(e,((e,n)=>{li[n]||(t[n]=e,r++)})),r)return t}(e);if(t){const r={to:t};return Qr(e,((e,n)=>n in t||(r[n]=e))),r}return{...e}}function ci(e){return e=Yn(e),Jr.arr(e)?e.map(ci):So(e)?Pr.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function di(e){for(const t in e)return!0;return!1}function pi(e){return Jr.fun(e)||Jr.arr(e)&&Jr.obj(e[0])}function fi(e,t){e.ref?.delete(e),t?.delete(e)}function hi(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}function gi(e,t,r=1e3){Ro((()=>{if(t){let n=0;Xr(e,((e,o)=>{const i=e.current;if(i.length){let a=r*t[o];isNaN(a)?a=n:n=a,Xr(i,(e=>{Xr(e.queue,(e=>{const t=e.delay;e.delay=e=>a+ti(t||0,e)}))})),e.start()}}))}else{let t=Promise.resolve();Xr(e,(e=>{const r=e.current;if(r.length){const n=r.map((e=>{const t=e.queue;return e.queue=[],t}));t=t.then((()=>(Xr(r,((e,t)=>Xr(n[t]||[],(t=>e.queue.push(t))))),Promise.all(e.start()))))}}))}}))}var mi={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},vi={...mi.default,mass:1,damping:1,easing:Vn.linear,clamp:!1},yi=class{constructor(){this.velocity=0,Object.assign(this,vi)}};function Si(e,t){if(Jr.und(t.decay)){const r=!Jr.und(t.tension)||!Jr.und(t.friction);!r&&Jr.und(t.frequency)&&Jr.und(t.damping)&&Jr.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}var bi=[],wi=class{constructor(){this.changed=!1,this.values=bi,this.toValues=null,this.fromValues=bi,this.config=new yi,this.immediate=!1}};function Ii(e,{key:t,props:r,defaultProps:n,state:o,actions:i}){return new Promise(((a,s)=>{let l,u,c=ri(r.cancel??n?.cancel,t);if(c)f();else{Jr.und(r.pause)||(o.paused=ri(r.pause,t));let e=n?.pause;!0!==e&&(e=o.paused||ri(e,t)),l=ti(r.delay||0,t),e?(o.resumeQueue.add(p),i.pause()):(i.resume(),p())}function d(){o.resumeQueue.add(p),o.timeouts.delete(u),u.cancel(),l=u.time-Rr.now()}function p(){l>0&&!Pr.skipAnimation?(o.delayed=!0,u=Rr.setTimeout(f,l),o.pauseQueue.add(d),o.timeouts.add(u)):f()}function f(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(d),o.timeouts.delete(u),e<=(o.cancelId||0)&&(c=!0);try{i.start({...r,callId:e,cancel:c},a)}catch(e){s(e)}}}))}var Ei=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?xi(e.get()):t.every((e=>e.noop))?Ci(e.get()):Oi(e.get(),t.every((e=>e.finished))),Ci=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Oi=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),xi=e=>({value:e,cancelled:!0,finished:!1});function Ti(e,t,r,n){const{callId:o,parentId:i,onRest:a}=t,{asyncTo:s,promise:l}=r;return i||e!==s||t.reset?r.promise=(async()=>{r.asyncId=o,r.asyncTo=e;const u=ai(t,((e,t)=>"onRest"===t?void 0:e));let c,d;const p=new Promise(((e,t)=>(c=e,d=t))),f=e=>{const t=o<=(r.cancelId||0)&&xi(n)||o!==r.asyncId&&Oi(n,!1);if(t)throw e.result=t,d(e),e},h=(e,t)=>{const i=new Pi,a=new Di;return(async()=>{if(Pr.skipAnimation)throw Ai(r),a.result=Oi(n,!1),d(a),a;f(i);const s=Jr.obj(e)?{...e}:{...t,to:e};s.parentId=o,Qr(u,((e,t)=>{Jr.und(s[t])&&(s[t]=e)}));const l=await n.start(s);return f(i),r.paused&&await new Promise((e=>{r.resumeQueue.add(e)})),l})()};let g;if(Pr.skipAnimation)return Ai(r),Oi(n,!1);try{let t;t=Jr.arr(e)?(async e=>{for(const t of e)await h(t)})(e):Promise.resolve(e(h,n.stop.bind(n))),await Promise.all([t.then(c),p]),g=Oi(n.get(),!0,!1)}catch(e){if(e instanceof Pi)g=e.result;else{if(!(e instanceof Di))throw e;g=e.result}}finally{o==r.asyncId&&(r.asyncId=i,r.asyncTo=i?s:void 0,r.promise=i?l:void 0)}return Jr.fun(a)&&Rr.batchedUpdates((()=>{a(g,n,n.item)})),g})():l}function Ai(e,t){en(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Pi=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Di=class extends Error{constructor(){super("SkipAnimationSignal")}},Ri=e=>e instanceof ki,_i=1,ki=class extends Xn{constructor(){super(...arguments),this.id=_i++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Fo(this);return e&&e.getValue()}to(...e){return Pr.to(this,e)}interpolate(...e){return mo(),Pr.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Kn(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||hn.sort(this),Kn(this,{type:"priority",parent:this,priority:e})}},Li=Symbol.for("SpringPhase"),Ni=e=>(1&e[Li])>0,Mi=e=>(2&e[Li])>0,ji=e=>(4&e[Li])>0,Ui=(e,t)=>t?e[Li]|=3:e[Li]&=-3,Fi=(e,t)=>t?e[Li]|=4:e[Li]&=-5,Bi=class extends ki{constructor(e,t){if(super(),this.animation=new wi,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Jr.und(e)||!Jr.und(t)){const r=Jr.obj(e)?{...e}:{...t,from:e};Jr.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Mi(this)||this._state.asyncTo)||ji(this)}get goal(){return Yn(this.animation.to)}get velocity(){const e=Fo(this);return e instanceof Wo?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return Ni(this)}get isAnimating(){return Mi(this)}get isPaused(){return ji(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const n=this.animation;let{toValues:o}=n;const{config:i}=n,a=$o(n.to);!a&&qn(n.to)&&(o=Zr(Yn(n.to))),n.values.forEach(((s,l)=>{if(s.done)return;const u=s.constructor==Vo?1:a?a[l].lastPosition:o[l];let c=n.immediate,d=u;if(!c){if(d=s.lastPosition,i.tension<=0)return void(s.done=!0);let t=s.elapsedTime+=e;const r=n.fromValues[l],o=null!=s.v0?s.v0:s.v0=Jr.arr(i.velocity)?i.velocity[l]:i.velocity;let a;const p=i.precision||(r==u?.005:Math.min(1,.001*Math.abs(u-r)));if(Jr.und(i.duration))if(i.decay){const e=!0===i.decay?.998:i.decay,n=Math.exp(-(1-e)*t);d=r+o/(1-e)*(1-n),c=Math.abs(s.lastPosition-d)<=p,a=o*n}else{a=null==s.lastVelocity?o:s.lastVelocity;const t=i.restVelocity||p/10,n=i.clamp?0:i.bounce,l=!Jr.und(n),f=r==u?s.v0>0:r<u;let h,g=!1;const m=1,v=Math.ceil(e/m);for(let e=0;e<v&&(h=Math.abs(a)>t,h||(c=Math.abs(u-d)<=p,!c));++e)l&&(g=d==u||d>u==f,g&&(a=-a*n,d=u)),a+=(1e-6*-i.tension*(d-u)+.001*-i.friction*a)/i.mass*m,d+=a*m}else{let n=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,s.durationProgress>0&&(s.elapsedTime=i.duration*s.durationProgress,t=s.elapsedTime+=e)),n=(i.progress||0)+t/this._memoizedDuration,n=n>1?1:n<0?0:n,s.durationProgress=n),d=r+i.easing(n)*(u-r),a=(d-s.lastPosition)/e,c=1==n}s.lastVelocity=a,Number.isNaN(d)&&(console.warn("Got NaN while animating:",this),c=!0)}a&&!a[l].done&&(c=!1),c?s.done=!0:t=!1,s.setValue(d,i.round)&&(r=!0)}));const s=Fo(this),l=s.getValue();if(t){const e=Yn(n.to);l===e&&!r||i.decay?r&&i.decay&&this._onChange(l):(s.setValue(e),this._onChange(e)),this._stop()}else r&&this._onChange(l)}set(e){return Rr.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Mi(this)){const{to:e,config:t}=this.animation;Rr.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return Jr.und(e)?(r=this.queue||[],this.queue=[]):r=[Jr.obj(e)?e:{...t,to:e}],Promise.all(r.map((e=>this._update(e)))).then((e=>Ei(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Ai(this._state,e&&this._lastCallId),Rr.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:n}=e;r=Jr.obj(r)?r[t]:r,(null==r||pi(r))&&(r=void 0),n=Jr.obj(n)?n[t]:n,null==n&&(n=void 0);const o={to:r,from:n};return Ni(this)||(e.reverse&&([r,n]=[n,r]),n=Yn(n),Jr.und(n)?Fo(this)||this._set(r):this._set(n)),o}_update({...e},t){const{key:r,defaultProps:n}=this;e.default&&Object.assign(n,ai(e,((e,t)=>/^on/.test(t)?ni(e,r):e))),qi(this,e,"onProps"),Yi(this,"onProps",e,this);const o=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return Ii(++this._lastCallId,{key:r,props:e,defaultProps:n,state:i,actions:{pause:()=>{ji(this)||(Fi(this,!0),nn(i.pauseQueue),Yi(this,"onPause",Oi(this,$i(this,this.animation.to)),this))},resume:()=>{ji(this)&&(Fi(this,!1),Mi(this)&&this._resume(),nn(i.resumeQueue),Yi(this,"onResume",Oi(this,$i(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((r=>{if(e.loop&&r.finished&&(!t||!r.noop)){const t=Gi(e);if(t)return this._update(t,!0)}return r}))}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(xi(this));const n=!Jr.und(e.to),o=!Jr.und(e.from);if(n||o){if(!(t.callId>this._lastToId))return r(xi(this));this._lastToId=t.callId}const{key:i,defaultProps:a,animation:s}=this,{to:l,from:u}=s;let{to:c=l,from:d=u}=e;!o||n||t.default&&!Jr.und(c)||(c=d),t.reverse&&([c,d]=[d,c]);const p=!Kr(d,u);p&&(s.from=d),d=Yn(d);const f=!Kr(c,l);f&&this._focus(c);const h=pi(t.to),{config:g}=s,{decay:m,velocity:v}=g;(n||o)&&(g.velocity=0),t.config&&!h&&function(e,t,r){r&&(Si(r={...r},t),t={...r,...t}),Si(e,t),Object.assign(e,t);for(const t in vi)null==e[t]&&(e[t]=vi[t]);let{frequency:n,damping:o}=e;const{mass:i}=e;Jr.und(n)||(n<.01&&(n=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/n,2)*i,e.friction=4*Math.PI*o*i/n)}(g,ti(t.config,i),t.config!==a.config?ti(a.config,i):void 0);let y=Fo(this);if(!y||Jr.und(c))return r(Oi(this,!0));const S=Jr.und(t.reset)?o&&!t.default:!Jr.und(d)&&ri(t.reset,i),b=S?d:this.get(),w=ci(c),I=Jr.num(w)||Jr.arr(w)||So(w),E=!h&&(!I||ri(a.immediate||t.immediate,i));if(f){const e=Jo(c);if(e!==y.constructor){if(!E)throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`);y=this._set(w)}}const C=y.constructor;let O=qn(c),x=!1;if(!O){const e=S||!Ni(this)&&p;(f||e)&&(x=Kr(ci(b),w),O=!x),(Kr(s.immediate,E)||E)&&Kr(g.decay,m)&&Kr(g.velocity,v)||(O=!0)}if(x&&Mi(this)&&(s.changed&&!S?O=!0:O||this._stop(l)),!h&&((O||qn(l))&&(s.values=y.getPayload(),s.toValues=qn(c)?null:C==Vo?[1]:Zr(w)),s.immediate!=E&&(s.immediate=E,E||S||this._set(l)),O)){const{onRest:e}=s;Xr(zi,(e=>qi(this,t,e)));const n=Oi(this,$i(this,l));nn(this._pendingCalls,n),this._pendingCalls.add(r),s.changed&&Rr.batchedUpdates((()=>{s.changed=!S,e?.(n,this),S?ti(a.onRest,n):s.onStart?.(n,this)}))}S&&this._set(b),h?r(Ti(t.to,t,this._state,this)):O?this._start():Mi(this)&&!f?this._pendingCalls.add(r):r(Ci(b))}_focus(e){const t=this.animation;e!==t.to&&(Jn(this)&&this._detach(),t.to=e,Jn(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;qn(t)&&(Zn(t,this),Ri(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;qn(e)&&eo(e,this)}_set(e,t=!0){const r=Yn(e);if(!Jr.und(r)){const e=Fo(this);if(!e||!Kr(r,e.getValue())){const n=Jo(r);e&&e.constructor==n?e.setValue(r):Bo(this,n.create(r)),e&&Rr.batchedUpdates((()=>{this._onChange(r,t)}))}}return Fo(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Yi(this,"onStart",Oi(this,$i(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ti(this.animation.onChange,e,this)),ti(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Fo(this).reset(Yn(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),Mi(this)||(Ui(this,!0),ji(this)||this._resume())}_resume(){Pr.skipAnimation?this.finish():hn.start(this)}_stop(e,t){if(Mi(this)){Ui(this,!1);const r=this.animation;Xr(r.values,(e=>{e.done=!0})),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),Kn(this,{type:"idle",parent:this});const n=t?xi(this.get()):Oi(this.get(),$i(this,e??r.to));nn(this._pendingCalls,n),r.changed&&(r.changed=!1,Yi(this,"onRest",n,this))}}};function $i(e,t){const r=ci(t);return Kr(ci(e.get()),r)}function Gi(e,t=e.loop,r=e.to){const n=ti(t);if(n){const o=!0!==n&&ui(n),i=(o||e).reverse,a=!o||o.reset;return Wi({...e,loop:t,default:!1,pause:void 0,to:!i||pi(r)?r:void 0,from:a?e.from:void 0,reset:a,...o})}}function Wi(e){const{to:t,from:r}=e=ui(e),n=new Set;return Jr.obj(t)&&Hi(t,n),Jr.obj(r)&&Hi(r,n),e.keys=n.size?Array.from(n):null,e}function Vi(e){const t=Wi(e);return Jr.und(t.default)&&(t.default=ai(t)),t}function Hi(e,t){Qr(e,((e,r)=>null!=e&&t.add(r)))}var zi=["onStart","onRest","onChange","onPause","onResume"];function qi(e,t,r){e.animation[r]=t[r]!==oi(t,r)?ni(t[r],e.key):void 0}function Yi(e,t,...r){e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var Ji=["onStart","onChange","onRest"],Ki=1,Xi=class{constructor(e,t){this.id=Ki++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,r)=>e[r]=t.get())),e}set(e){for(const t in e){const r=e[t];Jr.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(Wi(e)),this}start(e){let{queue:t}=this;return e?t=Zr(e).map(Wi):this.queue=[],this._flush?this._flush(this,t):(oa(this,t),Qi(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;Xr(Zr(t),(t=>r[t].stop(!!e)))}else Ai(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(Jr.und(e))this.start({pause:!0});else{const t=this.springs;Xr(Zr(e),(e=>t[e].pause()))}return this}resume(e){if(Jr.und(e))this.start({pause:!1});else{const t=this.springs;Xr(Zr(e),(e=>t[e].resume()))}return this}each(e){Qr(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,n=this._active.size>0,o=this._changed.size>0;(n&&!this._started||o&&!this._started)&&(this._started=!0,en(e,(([e,t])=>{t.value=this.get(),e(t,this,this._item)})));const i=!n&&this._started,a=o||i&&r.size?this.get():null;o&&t.size&&en(t,(([e,t])=>{t.value=a,e(t,this,this._item)})),i&&(this._started=!1,en(r,(([e,t])=>{t.value=a,e(t,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}Rr.onFrame(this._onFrame)}};function Qi(e,t){return Promise.all(t.map((t=>Zi(e,t)))).then((t=>Ei(e,t)))}async function Zi(e,t,r){const{keys:n,to:o,from:i,loop:a,onRest:s,onResolve:l}=t,u=Jr.obj(t.default)&&t.default;a&&(t.loop=!1),!1===o&&(t.to=null),!1===i&&(t.from=null);const c=Jr.arr(o)||Jr.fun(o)?o:void 0;c?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Xr(Ji,(r=>{const n=t[r];if(Jr.fun(n)){const o=e._events[r];t[r]=({finished:e,cancelled:t})=>{const r=o.get(n);r?(e||(r.finished=!1),t&&(r.cancelled=!0)):o.set(n,{value:null,finished:e||!1,cancelled:t||!1})},u&&(u[r]=t[r])}}));const d=e._state;t.pause===!d.paused?(d.paused=t.pause,nn(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const p=(n||Object.keys(e.springs)).map((r=>e.springs[r].start(t))),f=!0===t.cancel||!0===oi(t,"cancel");(c||f&&d.asyncId)&&p.push(Ii(++e._lastAsyncId,{props:t,state:d,actions:{pause:Yr,resume:Yr,start(t,r){f?(Ai(d,e._lastAsyncId),r(xi(e))):(t.onRest=s,r(Ti(c,t,d,e)))}}})),d.paused&&await new Promise((e=>{d.resumeQueue.add(e)}));const h=Ei(e,await Promise.all(p));if(a&&h.finished&&(!r||!h.noop)){const r=Gi(t,a,o);if(r)return oa(e,[r]),Zi(e,r,!0)}return l&&Rr.batchedUpdates((()=>l(h,e,e.item))),h}function ea(e,t){const r={...e.springs};return t&&Xr(Zr(t),(e=>{Jr.und(e.keys)&&(e=Wi(e)),Jr.obj(e.to)||(e={...e,to:void 0}),na(r,e,(e=>ra(e)))})),ta(e,r),r}function ta(e,t){Qr(t,((t,r)=>{e.springs[r]||(e.springs[r]=t,Zn(t,e))}))}function ra(e,t){const r=new Bi;return r.key=e,t&&Zn(r,t),r}function na(e,t,r){t.keys&&Xr(t.keys,(n=>{(e[n]||(e[n]=r(n)))._prepareNode(t)}))}function oa(e,t){Xr(t,(t=>{na(e.springs,t,(t=>ra(t,e)))}))}var ia,aa=({children:e,...t})=>{const r=(0,k.useContext)(sa),n=t.pause||!!r.pause,o=t.immediate||!!r.immediate;t=function(e,t){const[r]=(0,k.useState)((()=>({inputs:t,result:e()}))),n=(0,k.useRef)(),o=n.current;let i=o;if(i){const r=Boolean(t&&i.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,i.inputs));r||(i={inputs:t,result:e()})}else i=r;return(0,k.useEffect)((()=>{n.current=i,o==r&&(r.inputs=r.result=void 0)}),[i]),i.result}((()=>({pause:n,immediate:o})),[n,o]);const{Provider:i}=sa;return k.createElement(i,{value:t},e)},sa=(ia=aa,Object.assign(ia,k.createContext({})),ia.Provider._context=ia,ia.Consumer._context=ia,ia);aa.Provider=sa.Provider,aa.Consumer=sa.Consumer;var la=()=>{const e=[],t=function(t){yo(`${fo}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const n=[];return Xr(e,((e,o)=>{if(Jr.und(t))n.push(e.start());else{const i=r(t,e,o);i&&n.push(e.start(i))}})),n};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const r=e.indexOf(t);~r&&e.splice(r,1)},t.pause=function(){return Xr(e,(e=>e.pause(...arguments))),this},t.resume=function(){return Xr(e,(e=>e.resume(...arguments))),this},t.set=function(t){Xr(e,((e,r)=>{const n=Jr.fun(t)?t(r,e):t;n&&e.set(n)}))},t.start=function(t){const r=[];return Xr(e,((e,n)=>{if(Jr.und(t))r.push(e.start());else{const o=this._getProps(t,e,n);o&&r.push(e.start(o))}})),r},t.stop=function(){return Xr(e,(e=>e.stop(...arguments))),this},t.update=function(t){return Xr(e,((e,r)=>e.update(this._getProps(t,e,r)))),this};const r=function(e,t,r){return Jr.fun(e)?e(r,t):e};return t._getProps=r,t};function ua(e,t,r){const n=Jr.fun(t)&&t;n&&!r&&(r=[]);const o=(0,k.useMemo)((()=>n||3==arguments.length?la():void 0),[]),i=(0,k.useRef)(0),a=ko(),s=(0,k.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const r=ea(e,t);return i.current>0&&!s.queue.length&&!Object.keys(r).some((t=>!e.springs[t]))?Qi(e,t):new Promise((n=>{ta(e,r),s.queue.push((()=>{n(Qi(e,t))})),a()}))}})),[]),l=(0,k.useRef)([...s.ctrls]),u=[],c=Mo(e)||0;function d(e,r){for(let o=e;o<r;o++){const e=l.current[o]||(l.current[o]=new Xi(null,s.flush)),r=n?n(o,e):t[o];r&&(u[o]=Vi(r))}}(0,k.useMemo)((()=>{Xr(l.current.slice(e,c),(e=>{fi(e,o),e.stop(!0)})),l.current.length=e,d(c,e)}),[e]),(0,k.useMemo)((()=>{d(0,Math.min(c,e))}),r);const p=l.current.map(((e,t)=>ea(e,u[t]))),f=(0,k.useContext)(aa),h=Mo(f),g=f!==h&&di(f);Ro((()=>{i.current++,s.ctrls=l.current;const{queue:e}=s;e.length&&(s.queue=[],Xr(e,(e=>e()))),Xr(l.current,((e,t)=>{o?.add(e),g&&e.start({default:f});const r=u[t];r&&(hi(e,r.ref),e.ref?e.queue.push(r):e.start(r))}))})),Lo((()=>()=>{Xr(s.ctrls,(e=>e.stop(!0)))}));const m=p.map((e=>({...e})));return o?[m,o]:m}function ca(e,t){const r=Jr.fun(e),[[n],o]=ua(1,r?e:[e],r?t||[]:t);return r||2==arguments.length?[n,o]:n}var da=()=>la(),pa=()=>(0,k.useState)(da)[0],fa=(e,t)=>{const r=function(r){const n=(0,k.useRef)(null);return null===n.current&&(n.current=new Bi(e,t)),n.current}();return Lo((()=>()=>{r.stop()})),r};function ha(e,t,r){const n=Jr.fun(t)&&t;n&&!r&&(r=[]);let o,i=!0;const a=ua(e,((e,r)=>{const a=n?n(e,r):t;return o=a.ref,i=i&&a.reverse,a}),r||[{}]);if(Ro((()=>{Xr(a[1].current,((e,t)=>{const r=a[1].current[t+(i?1:-1)];hi(e,o),e.ref?r&&e.update({to:r.springs}):r?e.start({to:r.springs}):e.start()}))}),r),n||3==arguments.length){const e=o??a[1];return e._getProps=(t,r,n)=>{const o=Jr.fun(t)?t(n,r):t;if(o){const t=e.current[n+(o.reverse?1:-1)];return t&&(o.to=t.springs),o}},a}return a[0]}function ga(e,t,r){const n=Jr.fun(t)&&t,{reset:o,sort:i,trail:a=0,expires:s=!0,exitBeforeEnter:l=!1,onDestroyed:u,ref:c,config:d}=n?n():t,p=(0,k.useMemo)((()=>n||3==arguments.length?la():void 0),[]),f=Zr(e),h=[],g=(0,k.useRef)(null),m=o?null:g.current;Ro((()=>{g.current=h})),Lo((()=>(Xr(h,(e=>{p?.add(e.ctrl),e.ctrl.ref=p})),()=>{Xr(g.current,(e=>{e.expired&&clearTimeout(e.expirationId),fi(e.ctrl,p),e.ctrl.stop(!0)}))})));const v=function(e,{key:t,keys:r=t},n){if(null===r){const t=new Set;return e.map((e=>{const r=n&&n.find((r=>r.item===e&&"leave"!==r.phase&&!t.has(r)));return r?(t.add(r),r.key):ma++}))}return Jr.und(r)?e:Jr.fun(r)?e.map(r):Zr(r)}(f,n?n():t,m),y=o&&g.current||[];Ro((()=>Xr(y,(({ctrl:e,item:t,key:r})=>{fi(e,p),ti(u,t,r)}))));const S=[];if(m&&Xr(m,((e,t)=>{e.expired?(clearTimeout(e.expirationId),y.push(e)):~(t=S[t]=v.indexOf(e.key))&&(h[t]=e)})),Xr(f,((e,t)=>{h[t]||(h[t]={key:v[t],item:e,phase:"mount",ctrl:new Xi},h[t].ctrl.item=e)})),S.length){let e=-1;const{leave:r}=n?n():t;Xr(S,((t,n)=>{const o=m[n];~t?(e=h.indexOf(o),h[e]={...o,item:f[t]}):r&&h.splice(++e,0,o)}))}Jr.fun(i)&&h.sort(((e,t)=>i(e.item,t.item)));let b=-a;const w=ko(),I=ai(t),E=new Map,C=(0,k.useRef)(new Map),O=(0,k.useRef)(!1);Xr(h,((e,r)=>{const o=e.key,i=e.phase,u=n?n():t;let p,f;const h=ti(u.delay||0,o);if("mount"==i)p=u.enter,f="enter";else{const e=v.indexOf(o)<0;if("leave"!=i)if(e)p=u.leave,f="leave";else{if(!(p=u.update))return;f="update"}else{if(e)return;p=u.enter,f="enter"}}if(p=ti(p,e.item,r),p=Jr.obj(p)?ui(p):{to:p},!p.config){const t=d||I.config;p.config=ti(t,e.item,r,f)}b+=a;const y={...I,delay:h+b,ref:c,immediate:u.immediate,reset:!1,...p};if("enter"==f&&Jr.und(y.from)){const o=n?n():t,i=Jr.und(o.initial)||m?o.from:o.initial;y.from=ti(i,e.item,r)}const{onResolve:S}=y;y.onResolve=e=>{ti(S,e);const t=g.current,r=t.find((e=>e.key===o));if(r&&(!e.cancelled||"update"==r.phase)&&r.ctrl.idle){const e=t.every((e=>e.ctrl.idle));if("leave"==r.phase){const t=ti(s,r.item);if(!1!==t){const n=!0===t?0:t;if(r.expired=!0,!e&&n>0)return void(n<=2147483647&&(r.expirationId=setTimeout(w,n)))}}e&&t.some((e=>e.expired))&&(C.current.delete(r),l&&(O.current=!0),w())}};const x=ea(e.ctrl,y);"leave"===f&&l?C.current.set(e,{phase:f,springs:x,payload:y}):E.set(e,{phase:f,springs:x,payload:y})}));const x=(0,k.useContext)(aa),T=Mo(x),A=x!==T&&di(x);Ro((()=>{A&&Xr(h,(e=>{e.ctrl.start({default:x})}))}),[x]),Xr(E,((e,t)=>{if(C.current.size){const e=h.findIndex((e=>e.key===t.key));h.splice(e,1)}})),Ro((()=>{Xr(C.current.size?C.current:E,(({phase:e,payload:t},r)=>{const{ctrl:n}=r;r.phase=e,p?.add(n),A&&"enter"==e&&n.start({default:x}),t&&(hi(n,t.ref),!n.ref&&!p||O.current?(n.start(t),O.current&&(O.current=!1)):n.update(t))}))}),o?void 0:r);const P=e=>k.createElement(k.Fragment,null,h.map(((t,r)=>{const{springs:n}=E.get(t)||t.ctrl,o=e({...n},t.item,t,r);return o&&o.type?k.createElement(o.type,{...o.props,key:Jr.str(t.key)||Jr.num(t.key)?t.key:t.ctrl.id,ref:o.ref}):o})));return p?[P,p]:P}var ma=1,va=({container:e,...t}={})=>{const[r,n]=ca((()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...t})),[]);return Ro((()=>{const t=((e,{container:t=document.documentElement}={})=>{let r=Po.get(t);r||(r=new Set,Po.set(t,r));const n=new xo(e,t);if(r.add(n),!To.has(t)){const e=()=>(r?.forEach((e=>e.advance())),!0);To.set(t,e);const n=Do(t);window.addEventListener("resize",e,{passive:!0}),t!==document.documentElement&&Ao.set(t,Co(e,{container:t})),n.addEventListener("scroll",e,{passive:!0})}const o=To.get(t);return Rr(o),()=>{Rr.cancel(o);const e=Po.get(t);if(!e)return;if(e.delete(n),e.size)return;const r=To.get(t);To.delete(t),r&&(Do(t).removeEventListener("scroll",r),window.removeEventListener("resize",r),Ao.get(t)?.())}})((({x:e,y:t})=>{n.start({scrollX:e.current,scrollXProgress:e.progress,scrollY:t.current,scrollYProgress:t.progress})}),{container:e?.current||void 0});return()=>{Xr(Object.values(r),(e=>e.stop())),t()}}),[]),r},ya=({container:e,...t})=>{const[r,n]=ca((()=>({width:0,height:0,...t})),[]);return Ro((()=>{const t=Co((({width:e,height:t})=>{n.start({width:e,height:t,immediate:0===r.width.get()||0===r.height.get()})}),{container:e?.current||void 0});return()=>{Xr(Object.values(r),(e=>e.stop())),t()}}),[]),r},Sa={any:0,all:1};function ba(e,t){const[r,n]=(0,k.useState)(!1),o=(0,k.useRef)(),i=Jr.fun(e)&&e,a=i?i():{},{to:s={},from:l={},...u}=a,c=i?t:e,[d,p]=ca((()=>({from:l,...u})),[]);return Ro((()=>{const e=o.current,{root:t,once:i,amount:a="any",...u}=c??{};if(!e||i&&r||"undefined"==typeof IntersectionObserver)return;const d=new WeakMap,f=new IntersectionObserver((e=>{e.forEach((e=>{const t=d.get(e.target);if(e.isIntersecting!==Boolean(t))if(e.isIntersecting){const t=(s&&p.start(s),n(!0),i?void 0:()=>{l&&p.start(l),n(!1)});Jr.fun(t)?d.set(e.target,t):f.unobserve(e.target)}else t&&(t(),d.delete(e.target))}))}),{root:t&&t.current||void 0,threshold:"number"==typeof a||Array.isArray(a)?a:Sa[a],...u});return f.observe(e),()=>f.unobserve(e)}),[c]),i?[o,d]:[o,r]}function wa({children:e,...t}){return e(ca(t))}function Ia({items:e,children:t,...r}){const n=ha(e.length,r);return e.map(((e,r)=>{const o=t(e,r);return Jr.fun(o)?o(n[r]):o}))}function Ea({items:e,children:t,...r}){return ga(e,r)(t)}var Ca=class extends ki{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=jn(...t);const r=this._get(),n=Jo(r);Bo(this,n.create(r))}advance(e){const t=this._get();Kr(t,this.get())||(Fo(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&xa(this._active)&&Ta(this)}_get(){const e=Jr.arr(this.source)?this.source.map(Yn):Zr(Yn(this.source));return this.calc(...e)}_start(){this.idle&&!xa(this._active)&&(this.idle=!1,Xr($o(this),(e=>{e.done=!1})),Pr.skipAnimation?(Rr.batchedUpdates((()=>this.advance())),Ta(this)):hn.start(this))}_attach(){let e=1;Xr(Zr(this.source),(t=>{qn(t)&&Zn(t,this),Ri(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){Xr(Zr(this.source),(e=>{qn(e)&&eo(e,this)})),this._active.clear(),Ta(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Zr(this.source).reduce(((e,t)=>Math.max(e,(Ri(t)?t.priority:0)+1)),0))}};function Oa(e){return!1!==e.idle}function xa(e){return!e.size||Array.from(e).every(Oa)}function Ta(e){e.idle||(e.idle=!0,Xr($o(e),(e=>{e.done=!0})),Kn(e,{type:"idle",parent:e}))}var Aa=(e,...t)=>new Ca(e,t),Pa=(e,...t)=>(mo(),new Ca(e,t));Pr.assign({createStringInterpolator:po,to:(e,t)=>new Ca(e,t)});var Da=hn.advance,Ra=/^--/;function _a(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||Ra.test(e)||La.hasOwnProperty(e)&&La[e]?(""+t).trim():t+"px"}var ka={},La={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Na=["Webkit","Ms","Moz","O"];La=Object.keys(La).reduce(((e,t)=>(Na.forEach((r=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(r,t)]=e[t])),e)),La);var Ma=/^(matrix|translate|scale|rotate|skew)/,ja=/^(translate)/,Ua=/^(rotate|skew)/,Fa=(e,t)=>Jr.num(e)&&0!==e?e+t:e,Ba=(e,t)=>Jr.arr(e)?e.every((e=>Ba(e,t))):Jr.num(e)?e===t:parseFloat(e)===t,$a=class extends zo{constructor({x:e,y:t,z:r,...n}){const o=[],i=[];(e||t||r)&&(o.push([e||0,t||0,r||0]),i.push((e=>[`translate3d(${e.map((e=>Fa(e,"px"))).join(",")})`,Ba(e,0)]))),Qr(n,((e,t)=>{if("transform"===t)o.push([e||""]),i.push((e=>[e,""===e]));else if(Ma.test(t)){if(delete n[t],Jr.und(e))return;const r=ja.test(t)?"px":Ua.test(t)?"deg":"";o.push(Zr(e)),i.push("rotate3d"===t?([e,t,n,o])=>[`rotate3d(${e},${t},${n},${Fa(o,r)})`,Ba(o,0)]:e=>[`${t}(${e.map((e=>Fa(e,r))).join(",")})`,Ba(e,t.startsWith("scale")?1:0)])}})),o.length&&(n.transform=new Ga(o,i)),super(n)}},Ga=class extends Xn{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Xr(this.inputs,((r,n)=>{const o=Yn(r[0]),[i,a]=this.transforms[n](Jr.arr(o)?o:r.map(Yn));e+=" "+i,t=t&&a})),t?"none":e}observerAdded(e){1==e&&Xr(this.inputs,(e=>Xr(e,(e=>qn(e)&&Zn(e,this)))))}observerRemoved(e){0==e&&Xr(this.inputs,(e=>Xr(e,(e=>qn(e)&&eo(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),Kn(this,e)}};Pr.assign({batchedUpdates:L.unstable_batchedUpdates,createStringInterpolator:po,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var Wa=((e,{applyAnimatedValues:t=(()=>!1),createAnimatedStyle:r=(e=>new zo(e)),getComponentProps:n=(e=>e)}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:n},i=e=>{const t=Zo(e)||"Anonymous";return(e=Jr.str(e)?i[e]||(i[e]=Ko(e,o)):e[Qo]||(e[Qo]=Ko(e,o))).displayName=`Animated(${t})`,e};return Qr(e,((t,r)=>{Jr.arr(e)&&(r=Zo(t)),i[r]=i(t)})),{animated:i}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const r="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{style:n,children:o,scrollTop:i,scrollLeft:a,viewBox:s,...l}=t,u=Object.values(l),c=Object.keys(l).map((t=>r||e.hasAttribute(t)?t:ka[t]||(ka[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==o&&(e.textContent=o);for(const t in n)if(n.hasOwnProperty(t)){const r=_a(t,n[t]);Ra.test(t)?e.style.setProperty(t,r):e.style[t]=r}c.forEach(((t,r)=>{e.setAttribute(t,u[r])})),void 0!==i&&(e.scrollTop=i),void 0!==a&&(e.scrollLeft=a),void 0!==s&&e.setAttribute("viewBox",s)},createAnimatedStyle:e=>new $a(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}),Va=Wa.animated,Ha=s(3162),za=function(){return za=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},za.apply(this,arguments)},qa=s(743);function Ya(e,t){var r=t;return r.rawResponse=!1,(0,qa.WY)(e,r).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}var Ja=function(){function e(e){this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.token=e.token,this.expires=e.expires,this.portal=e.portal||"https://www.arcgis.com/sharing/rest",this.duration=e.duration||7200}return e.prototype.getToken=function(e,t){return this.token&&this.expires&&this.expires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequest||(this._pendingTokenRequest=this.refreshToken(t)),this._pendingTokenRequest)},e.prototype.refreshToken=function(e){var t=this,r=za({params:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials",expiration:this.duration}},e);return Ya(this.portal+"/oauth2/token/",r).then((function(e){return t._pendingTokenRequest=null,t.token=e.token,t.expires=e.expires,e.token}))},e.prototype.refreshSession=function(){var e=this;return this.refreshToken().then((function(){return e}))},e}(),Ka=function(){function e(e){this.key=e.key}return e.prototype.getToken=function(e){return Promise.resolve(this.key)},e}(),Xa=s(4734),Qa=s(9836),Za=s(2508);function es(e,t){var r=t;return"undefined"!=typeof window&&window.location&&window.location.host?r.params.referer=window.location.host:r.params.referer=qa.cv,(0,qa.WY)(e,r)}var ts=/^https?:\/\/(\S+)\.arcgis\.com.+/;function rs(e){return ts.test(e)}function ns(e){if(!ts.test(e))return null;var t=e.match(ts)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function os(e,t,r){void 0===r&&(r="https://www.arcgis.com/sharing/rest");var n=r+"/oauth2/validateAppAccess",o={method:"POST",params:{f:"json",client_id:t,token:e}};return(0,qa.WY)(n,o)}var is=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?(0,Xa.b)(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||20160,this.server=e.server,this.federatedServers={},this.trustedDomains=[],e.server){var t=this.getServerRootUrl(e.server);this.federatedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trustedServers",{get:function(){return console.log("DEPRECATED: use federatedServers instead"),this.federatedServers},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,r){void 0===r&&(r=window),t.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var n,o=za({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),i=o.portal,a=o.provider,s=o.clientId,l=o.expiration,u=o.redirectUri,c=o.popup,d=o.popupWindowFeatures,p=o.state,f=o.locale,h=o.params;if(n="arcgis"===a?i+"/oauth2/authorize?client_id="+s+"&response_type=token&expiration="+(t.duration||l)+"&redirect_uri="+encodeURIComponent(u)+"&state="+p+"&locale="+f:i+"/oauth2/social/authorize?client_id="+s+"&socialLoginProviderName="+a+"&autoAccountCreateForSocial=true&response_type=token&expiration="+(t.duration||l)+"&redirect_uri="+encodeURIComponent(u)+"&state="+p+"&locale="+f,h&&(n=n+"&"+(0,Qa.t)(h)),c){var g,m=((g={promise:null,resolve:null,reject:null}).promise=new Promise((function(e,t){g.resolve=e,g.reject=t})),g);return r["__ESRI_REST_AUTH_HANDLER_"+s]=function(t,r){if(t){var n=JSON.parse(t);m.reject(new qa.ah(n.errorMessage,n.error))}else if(r){var o=JSON.parse(r);m.resolve(new e({clientId:s,portal:i,ssl:o.ssl,token:o.token,tokenExpires:new Date(o.expires),username:o.username}))}},r.open(n,"oauth-window",d),m.promise}r.location.href=n},e.completeOAuth2=function(t,r){void 0===r&&(r=window);var n=za({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),o=n.portal,i=n.clientId,a=n.popup;function s(t,n){try{var s=void 0,l="__ESRI_REST_AUTH_HANDLER_"+i;if(a&&(r.opener?r.opener.parent&&r.opener.parent[l]?s=r.opener.parent[l]:r.opener&&r.opener[l]&&(s=r.opener[l]):r!==r.parent&&r.parent&&r.parent[l]&&(s=r.parent[l]),s))return s(t?JSON.stringify(t):void 0,JSON.stringify(n)),void r.close()}catch(e){throw new qa.ah('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new qa.ah(t.errorMessage,t.error);return new e({clientId:i,portal:o,ssl:n.ssl,token:n.token,tokenExpires:n.expires,username:n.username})}var l=(0,Za.N)(r.location.hash);if(!l.access_token){var u=void 0,c="Unknown error";return l.error&&(u=l.error,c=l.error_description),s({error:u,errorMessage:c})}var d=l.access_token,p=new Date(Date.now()+1e3*parseInt(l.expires_in,10)-6e4),f=l.username;return s(void 0,{token:d,expires:p,ssl:"true"===l.ssl,username:f})},e.fromParent=function(t,r){var n;return!r&&window&&(r=window),new Promise((function(o,i){n=function(t){if(t.source===r.parent&&t.data)try{return o(e.parentMessageHandler(t))}catch(e){return i(e)}},r.addEventListener("message",n,!1),r.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return r.removeEventListener("message",n,!1),e}))},e.authorize=function(e,t){e.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var r=za({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),n=r.portal,o=r.clientId,i=r.expiration,a=r.redirectUri;t.writeHead(301,{Location:n+"/oauth2/authorize?client_id="+o+"&expiration="+(e.duration||i)+"&response_type=code&redirect_uri="+encodeURIComponent(a)}),t.end()},e.exchangeAuthorizationCode=function(t,r){var n=za({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:20160},t),o=n.portal,i=n.clientId,a=n.redirectUri,s=n.refreshTokenTTL;return Ya(o+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:i,redirect_uri:a,code:r}}).then((function(t){return new e({clientId:i,portal:o,ssl:t.ssl,redirectUri:a,refreshToken:t.refreshToken,refreshTokenTTL:s,refreshTokenExpires:new Date(Date.now()+60*(s-1)*1e3),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var r=JSON.parse(t);return new e({clientId:r.clientId,refreshToken:r.refreshToken,refreshTokenExpires:new Date(r.refreshTokenExpires),username:r.username,password:r.password,token:r.token,tokenExpires:new Date(r.tokenExpires),portal:r.portal,ssl:r.ssl,tokenDuration:r.tokenDuration,redirectUri:r.redirectUri,refreshTokenTTL:r.refreshTokenTTL})},e.fromCredential=function(t){var r=void 0===t.ssl||t.ssl,n=t.expires||Date.now()+72e5;return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:r,token:t.token,username:t.userId,tokenExpires:new Date(n)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);if("arcgis:auth:error"===t.data.type){var r=new Error(t.data.error.message);throw r.name=t.data.error.name,r}throw new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var r=this.portal+"/community/self",n=za(za({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=(0,qa.WY)(r,n).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getPortal=function(e){var t=this;if(this._pendingPortalRequest)return this._pendingPortalRequest;if(this._portalInfo)return Promise.resolve(this._portalInfo);var r=this.portal+"/portals/self",n=za(za({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingPortalRequest=(0,qa.WY)(r,n).then((function(e){return t._portalInfo=e,t._pendingPortalRequest=null,e})),this._pendingPortalRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return n=e,o=rs(r=this.portal),i=rs(n),a=ns(r),s=ns(n),o&&i&&a===s||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t);var r,n,o,i,a,s},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return os(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new qa.ah("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=(0,Xa.b)(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),r=(t[0],t[1]),n=t[2].split("/"),o=n[0],i=n.slice(1);return""+r+o.toLowerCase()+"/"+i.join("/")},e.prototype.getDomainCredentials=function(e){return this.trustedDomains&&this.trustedDomains.length&&this.trustedDomains.some((function(t){return e.startsWith(t)}))?"include":"same-origin"},e.prototype.createPostMessageHandler=function(e){var t=this;return function(r){var n=e.indexOf(r.origin)>-1,o="arcgis:auth:requestCredential"===r.data.type,i=t.tokenExpires.getTime()>Date.now();if(n&&o){var a={};if(i){var s=t.toCredential();s.server=s.server.replace("/sharing/rest",""),a={type:"arcgis:auth:credential",credential:s}}else a={type:"arcgis:auth:error",error:{name:"tokenExpiredError",message:"Session token was expired, and not returned to the child application"}};r.source.postMessage(a,r.origin)}}},e.prototype.getTokenForServer=function(e,t){var r=this,n=this.getServerRootUrl(e),o=this.federatedServers[n];return o&&o.expires&&o.expires.getTime()>Date.now()?Promise.resolve(o.token):(this._pendingTokenRequests[n]||(this._pendingTokenRequests[n]=this.fetchAuthorizedDomains().then((function(){return(0,qa.WY)(n+"/rest/info",{credentials:r.getDomainCredentials(e)}).then((function(o){if(o.owningSystemUrl){if(i=o.owningSystemUrl,a=r.portal,s=(0,Xa.b)(function(e){if(!ts.test(e))return e;switch(ns(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(a)).replace(/https?:\/\//,""),l=(0,Xa.b)(i).replace(/https?:\/\//,""),new RegExp(l,"i").test(s))return(0,qa.WY)(o.owningSystemUrl+"/sharing/rest/info",t);throw new qa.ah(e+" is not federated with "+r.portal+".","NOT_FEDERATED")}var i,a,s,l;if(o.authInfo&&void 0!==r.federatedServers[n])return Promise.resolve({authInfo:o.authInfo});throw new qa.ah(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return r.token&&r.tokenExpires.getTime()>Date.now()?es(t,{params:{token:r.token,serverUrl:e,expiration:r.tokenDuration,client:"referer"}}):es(t,{params:{username:r.username,password:r.password,expiration:r.tokenDuration,client:"referer"}}).then((function(e){return r._token=e.token,r._tokenExpires=new Date(e.expires),e}))})).then((function(e){return r.federatedServers[n]={expires:new Date(e.expires),token:e.token},delete r._pendingTokenRequests[n],e.token}))}))),this._pendingTokenRequests[n])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,r=za({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return es(this.portal+"/generateToken",r).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var r=za({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return Ya(this.portal+"/oauth2/token",r).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,r=za({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return Ya(this.portal+"/oauth2/token",r).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e.prototype.fetchAuthorizedDomains=function(){var e=this;return this.server||!this.portal?Promise.resolve(this):this.getPortal().then((function(t){return t.authorizedCrossOriginDomains&&t.authorizedCrossOriginDomains.length&&(e.trustedDomains=t.authorizedCrossOriginDomains.filter((function(e){return!e.startsWith("http://")})).map((function(e){return e.startsWith("https://")?e:"https://"+e}))),e}))},e}();function as(e,t,r){void 0===r&&(r="https://www.arcgis.com/sharing/rest");var n=r+"/oauth2/exchangeToken",o={method:"POST",params:{f:"json",client_id:t,token:e}};return(0,qa.WY)(n,o).then((function(e){return e.token}))}function ss(e,t,r){void 0===r&&(r="https://www.arcgis.com/sharing/rest");var n=r+"/oauth2/platformSelf?f=json",o={method:"POST",headers:{"X-Esri-Auth-Client-Id":e,"X-Esri-Auth-Redirect-Uri":t},params:{f:"json"}};return(0,qa.WY)(n,o)}s(4015);var ls=function(){return ls=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ls.apply(this,arguments)},us=s(4037);function cs(e){var t=(0,Xa.b)(e.url)+"/"+e.id,r=ls({httpMethod:"GET"},e);return(0,qa.WY)(t,r).then((function(e){return r.rawResponse?e:e.feature}))}function ds(e){var t=(0,us.t)(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:ls({where:"1=1",outFields:"*"},e.params)});return(0,qa.WY)((0,Xa.b)(e.url)+"/query",t)}function ps(e){var t=(0,Xa.b)(e.url)+"/addFeatures",r=(0,us.t)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:ls({},e.params)});return(0,qa.WY)(t,r)}function fs(e){var t=(0,Xa.b)(e.url)+"/updateFeatures",r=(0,us.t)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:ls({},e.params)});return(0,qa.WY)(t,r)}function hs(e){var t=(0,Xa.b)(e.url)+"/deleteFeatures",r=(0,us.t)(e,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:ls({},e.params)});return(0,qa.WY)(t,r)}function gs(e){var t=(0,Xa.b)(e.url)+"/applyEdits",r=(0,us.t)(e,["adds","updates","deletes","useGlobalIds","attachments","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:ls({},e.params)});return(0,qa.WY)(t,r)}var ms=new RegExp(/.+(?:map|feature|image)server/i);function vs(e){var t=e.match(ms);return t?t[0]:function(e){var t=e.split("?")[0];return(0,Xa.b)(t)}(e)}function ys(e){var t=e.url,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["url"]),n=vs(t)+"/layers";return(0,qa.WY)(n,r)}function Ss(e){var t=ls({httpMethod:"GET"},e);return(0,qa.WY)((0,Xa.b)(t.url)+"/"+t.featureId+"/attachments",t)}function bs(e){var t=ls({params:{}},e);return t.params.attachment=e.attachment,(0,qa.WY)((0,Xa.b)(t.url)+"/"+t.featureId+"/addAttachment",t)}function ws(e){var t=ls({params:{}},e);return t.params.attachment=e.attachment,t.params.attachmentId=e.attachmentId,(0,qa.WY)((0,Xa.b)(t.url)+"/"+t.featureId+"/updateAttachment",t)}function Is(e){var t=ls({params:{}},e);return t.params.attachmentIds=e.attachmentIds,(0,qa.WY)((0,Xa.b)(t.url)+"/"+t.featureId+"/deleteAttachments",t)}function Es(e){var t=(0,us.t)(e,["objectIds","relationshipId","definitionExpression","outFields"],{httpMethod:"GET",params:ls({definitionExpression:"1=1",outFields:"*",relationshipId:0},e.params)});return(0,qa.WY)((0,Xa.b)(e.url)+"/queryRelatedRecords",t)}function Cs(e){return(0,qa.WY)((0,Xa.b)(e.url),e)}function Os(e){return(0,qa.WY)((0,Xa.b)(e.url),e)}function xs(e){return(e.fields?Promise.resolve(e.fields):Cs({url:e.url}).then((function(e){return e.fields}))).then((function(t){var r=function(e){return e.reduce((function(e,t){var r=t.domain;return r&&"codedValue"===r.type&&(e[t.name]=r),e}),{})}(t);if(Object.keys(r).length<1)return e.queryResponse;var n=e.queryResponse.features.map((function(e){var t={};for(var n in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,n)){var o=e.attributes[n],i=r[n];t[n]=null!==o&&i?Ts(o,i):o}return ls(ls({},e),{attributes:t})}));return ls(ls({},e.queryResponse),{features:n})}))}function Ts(e,t){var r=t.codedValues.find((function(t){return e===t.code}));return r?r.name:e}var As=s(7825),Ps=s(5501),Ds={exports:{}},Rs={},_s={exports:{}},ks={};function Ls(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var Ns=/javascript\s*\:/gim;ks.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},ks.getDefaultWhiteList=Ls,ks.onAttr=function(e,t,r){},ks.onIgnoreAttr=function(e,t,r){},ks.safeAttrValue=function(e,t){return Ns.test(t)?"":t};var Ms={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},js=Ms,Us=ks,Fs=function(e,t){";"!==(e=js.trimRight(e))[e.length-1]&&(e+=";");var r=e.length,n=!1,o=0,i=0,a="";function s(){if(!n){var r=js.trim(e.slice(o,i)),s=r.indexOf(":");if(-1!==s){var l=js.trim(r.slice(0,s)),u=js.trim(r.slice(s+1));if(l){var c=t(o,a.length,l,u,r);c&&(a+=c+"; ")}}}o=i+1}for(;i<r;i++){var l=e[i];if("/"===l&&"*"===e[i+1]){var u=e.indexOf("*/",i+2);if(-1===u)break;o=(i=u+1)+1,n=!1}else"("===l?n=!0:")"===l?n=!1:";"===l?n||s():"\n"===l&&s()}return js.trim(a)};function Bs(e){return null==e}function $s(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||Us.whiteList,e.onAttr=e.onAttr||Us.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Us.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Us.safeAttrValue,this.options=e}$s.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,o=t.onIgnoreAttr,i=t.safeAttrValue;return Fs(e,(function(e,t,a,s,l){var u=r[a],c=!1;if(!0===u?c=u:"function"==typeof u?c=u(s):u instanceof RegExp&&(c=u.test(s)),!0!==c&&(c=!1),s=i(a,s)){var d,p={position:t,sourcePosition:e,source:l,isWhite:c};return c?Bs(d=n(a,s,p))?a+":"+s:d:Bs(d=o(a,s,p))?void 0:d}}))};var Gs=$s;!function(e,t){var r=ks,n=Gs;for(var o in(t=e.exports=function(e,t){return new n(t).process(e)}).FilterCSS=n,r)t[o]=r[o]}(_s,_s.exports);var Ws={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Vs=_s.exports.FilterCSS,Hs=_s.exports.getDefaultWhiteList,zs=Ws;var qs=new Vs;function Ys(e){return e.replace(Js,"&lt;").replace(Ks,"&gt;")}var Js=/</g,Ks=/>/g,Xs=/"/g,Qs=/&quot;/g,Zs=/&#([a-zA-Z0-9]*);?/gim,el=/&colon;?/gim,tl=/&newline;?/gim,rl=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,nl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ol=/u\s*r\s*l\s*\(.*/gi;function il(e){return e.replace(Xs,"&quot;")}function al(e){return e.replace(Qs,'"')}function sl(e){return e.replace(Zs,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function ll(e){return e.replace(el,":").replace(tl," ")}function ul(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return zs.trim(t)}function cl(e){return ul(e=ll(e=sl(e=al(e))))}function dl(e){return Ys(e=il(e))}Rs.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},Rs.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},Rs.onTag=function(e,t,r){},Rs.onIgnoreTag=function(e,t,r){},Rs.onTagAttr=function(e,t,r){},Rs.onIgnoreTagAttr=function(e,t,r){},Rs.safeAttrValue=function(e,t,r,n){if(r=cl(r),"href"===t||"src"===t){if("#"===(r=zs.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(rl.lastIndex=0,rl.test(r))return""}else if("style"===t){if(nl.lastIndex=0,nl.test(r))return"";if(ol.lastIndex=0,ol.test(r)&&(rl.lastIndex=0,rl.test(r)))return"";!1!==n&&(r=(n=n||qs).process(r))}return dl(r)},Rs.escapeHtml=Ys,Rs.escapeQuote=il,Rs.unescapeQuote=al,Rs.escapeHtmlEntities=sl,Rs.escapeDangerHtml5Entities=ll,Rs.clearNonPrintableCharacter=ul,Rs.friendlyAttrValue=cl,Rs.escapeAttrValue=dl,Rs.onIgnoreTagStripAll=function(){return""},Rs.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],o=!1;return{onIgnoreTag:function(i,a,s){if(function(t){return!!r||-1!==zs.indexOf(e,t)}(i)){if(s.isClosing){var l=s.position+10;return n.push([!1!==o?o:s.position,l]),o=!1,"[/removed]"}return o||(o=s.position),"[removed]"}return t(i,a,s)},remove:function(e){var t="",r=0;return zs.forEach(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},Rs.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var o=e.indexOf("--\x3e",n);if(-1===o)break;r=o+3}return t},Rs.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},Rs.cssFilter=qs,Rs.getDefaultCSSWhiteList=Hs;var pl={},fl=Ws;function hl(e){var t,r=fl.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=fl.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function gl(e){return"</"===e.slice(0,2)}var ml=/[^a-zA-Z0-9\\_:.-]/gim;function vl(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function yl(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}function Sl(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function bl(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}pl.parseTag=function(e,t,r){var n="",o=0,i=!1,a=!1,s=0,l=e.length,u="",c="";e:for(s=0;s<l;s++){var d=e.charAt(s);if(!1===i){if("<"===d){i=s;continue}}else if(!1===a){if("<"===d){n+=r(e.slice(o,s)),i=s,o=s;continue}if(">"===d){n+=r(e.slice(o,i)),u=hl(c=e.slice(i,s+1)),n+=t(i,n.length,u,c,gl(c)),o=s+1,i=!1;continue}if('"'===d||"'"===d)for(var p=1,f=e.charAt(s-p);""===f.trim()||"="===f;){if("="===f){a=d;continue e}f=e.charAt(s-++p)}}else if(d===a){a=!1;continue}}return o<e.length&&(n+=r(e.substr(o))),n},pl.parseAttr=function(e,t){var r=0,n=0,o=[],i=!1,a=e.length;function s(e,r){if(!((e=(e=fl.trim(e)).replace(ml,"").toLowerCase()).length<1)){var n=t(e,r||"");n&&o.push(n)}}for(var l=0;l<a;l++){var u,c=e.charAt(l);if(!1!==i||"="!==c)if(!1===i||l!==n){if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(u=vl(e,l))){s(fl.trim(e.slice(r,l))),i=!1,r=l+1;continue}l=u-1;continue}if(-1===(u=Sl(e,l-1))){s(i,bl(fl.trim(e.slice(r,l)))),i=!1,r=l+1;continue}}}else{if(-1===(u=e.indexOf(c,l+1)))break;s(i,fl.trim(e.slice(n+1,u))),i=!1,r=(l=u)+1}else i=e.slice(r,l),r=l+1,n='"'===e.charAt(r)||"'"===e.charAt(r)?r:yl(e,l+1)}return r<e.length&&(!1===i?s(e.slice(r)):s(i,bl(fl.trim(e.slice(r))))),fl.trim(o.join(" "))};var wl=_s.exports.FilterCSS,Il=Rs,El=pl,Cl=El.parseTag,Ol=El.parseAttr,xl=Ws;function Tl(e){return null==e}function Al(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Il.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map((function(e){return e.toLowerCase()})):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=Il.whiteList,e.onTag=e.onTag||Il.onTag,e.onTagAttr=e.onTagAttr||Il.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Il.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Il.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Il.safeAttrValue,e.escapeHtml=e.escapeHtml||Il.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new wl(e.css))}Al.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,o=t.onIgnoreTag,i=t.onTagAttr,a=t.onIgnoreTagAttr,s=t.safeAttrValue,l=t.escapeHtml,u=this.cssFilter;t.stripBlankChar&&(e=Il.stripBlankChar(e)),t.allowCommentTag||(e=Il.stripCommentTag(e));var c=!1;t.stripIgnoreTagBody&&(c=Il.StripTagBody(t.stripIgnoreTagBody,o),o=c.onIgnoreTag);var d=Cl(e,(function(e,t,c,d,p){var f={sourcePosition:e,position:t,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(r,c)},h=n(c,d,f);if(!Tl(h))return h;if(f.isWhite){if(f.isClosing)return"</"+c+">";var g=function(e){var t=xl.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=xl.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=xl.trim(e.slice(0,-1))),{html:e,closing:r}}(d),m=r[c],v=Ol(g.html,(function(e,t){var r=-1!==xl.indexOf(m,e),n=i(c,e,t,r);return Tl(n)?r?(t=s(c,e,t,u))?e+'="'+t+'"':e:Tl(n=a(c,e,t,r))?void 0:n:n}));return d="<"+c,v&&(d+=" "+v),g.closing&&(d+=" /"),d+">"}return Tl(h=o(c,d,f))?l(d):h}),l);return c&&(d=c.remove(d)),d};var Pl=Al;!function(e,t){var r=Rs,n=pl,o=Pl;function i(e,t){return new o(t).process(e)}(t=e.exports=i).filterXSS=i,t.FilterXSS=o,function(){for(var e in r)t[e]=r[e];for(var o in n)t[o]=n[o]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(Ds,Ds.exports);var Dl,Rl,_l,kl,Ll,Nl,Ml,jl,Ul=function(){function e(e,t){var r,n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,o){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?n.sanitizeUrl(r):Ds.exports.safeAttrValue(e,t,r,o)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},e&&!t?r=e:e&&t?(r=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):r[t]=e[t]}))):(r=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=r,this._xssFilter=new Ds.exports.FilterXSS(r)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e,t){var r=(null!=t?t:{}).isProtocolRequired,n=void 0===r||r,o=this._trim(e.substring(0,e.indexOf(":"))),i="/"===e,a=/^#/.test(e),s=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return i||a||s?Ds.exports.escapeAttrValue(e):o||n?"":Ds.exports.escapeAttrValue("https://".concat(e))},e.prototype.sanitizeHTMLAttribute=function(e,t,r,n){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,r,n):Ds.exports.safeAttrValue(e,t,r,n)},e.prototype.validate=function(e,t){void 0===t&&(t={});var r=this.sanitize(e,t);return{isValid:e===r,sanitized:r}},e.prototype.encodeHTML=function(e){var t=this;return String(e).replace(/[&<>"'\/]/g,(function(e){return t._entityMap[e]}))},e.prototype.encodeAttrValue=function(e){var t=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,(function(r,n){return t.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")}))},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(r){Array.isArray(e[r])&&Array.isArray(t[r])?t[r]=t[r].concat(e[r]):t[r]=e[r]}))})),t},e.prototype._iterateOverObject=function(e,t){var r=this;void 0===t&&(t={});try{var n=!1,o=void 0;if(Array.isArray(e))o=e.reduce((function(e,o){var i=r.validate(o,t);return i.isValid?e.concat([o]):(n=!0,e.concat([i.sanitized]))}),[]);else{if(!function(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e)){if(t.allowUndefined&&void 0===e)return;return null}o=Object.keys(e).reduce((function(o,i){var a=e[i],s=r.validate(a,t);return s.isValid?o[i]=a:(n=!0,o[i]=s.sanitized),o}),{})}return n?o:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}();!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(Dl||(Dl={})),function(e){e.String="STRING",e.Number="NUMBER",e.Date="DATE"}(Rl||(Rl={})),function(e){e.Blob="esriFieldTypeBlob",e.Date="esriFieldTypeDate",e.Double="esriFieldTypeDouble",e.Geometry="esriFieldTypeGeometry",e.GlobalID="esriFieldTypeGlobalID",e.GUID="esriFieldTypeGUID",e.Integer="esriFieldTypeInteger",e.OID="esriFieldTypeOID",e.Raster="esriFieldTypeRaster",e.Single="esriFieldTypeSingle",e.SmallInteger="esriFieldTypeSmallInteger",e.String="esriFieldTypeString",e.XML="esriFieldTypeXML"}(_l||(_l={})),function(e){e.Fetching="FETCHING",e.Success="SUCCESS",e.Error="ERROR"}(kl||(kl={})),function(e){e.Design="DESIGN",e.Run="RUN"}(Ll||(Ll={})),function(e){e.Opened="OPENED",e.Active="ACTIVE",e.Closed="CLOSED"}(Nl||(Nl={})),function(e){e.None="NONE",e.Page="PAGE",e.Dialog="DIALOG",e.View="VIEW",e.WebAddress="WEB_ADDRESS",e.Block="BLOCK",e.Screen="SCREEN",e.PageTop="PAGE_TOP",e.PrintPreview="PRINT_PREVIEW"}(Ml||(Ml={})),function(e){e.Normal="NORMAL",e.Layout="LAYOUT"}(jl||(jl={}));const Fl=["shortDate","shortDateLE","longMonthDayYear","dayShortMonthYear","longDate","longDateShortTime","longMonthDayYearShortTime","shortDateShortTime","shortDateLEShortTime","shortDateShortTime24","shortDateLEShortTime24","shortDateLongTime","shortDateLELongTime","shortDateLongTime24","shortDateLELongTime24","longMonthYear","shortMonthYear","year"];var Bl,$l;!function(e){e.Header="HEADER",e.Footer="FOOTER",e.Body="BODY"}(Bl||(Bl={})),function(e){e.Http="http:",e.Https="https:"}($l||($l={}));const Gl="_appWindow";var Wl,Vl,Hl,zl,ql;!function(e){e.Image="IMAGE",e.Config="CONFIG"}(Wl||(Wl={})),function(e){e.Primary="PRIMARY",e.Secondary="SECONDARY",e.Donut="DONUT",e.Bar="BAR",e.DotsPrimary="DOTS_PRIMARY",e.DotsSecondary="DOTS_SECONDARY"}(Vl||(Vl={})),function(e){e.NotCreated="NOT_CREATED",e.Created="CREATED",e.CreateError="CREATE_ERROR",e.NotReady="NOT_READY",e.Unloaded="UNLOADED",e.Loading="LOADING",e.Loaded="LOADED",e.LoadError="LOAD_ERROR",e.Saving="SAVING",e.Saved="SAVED",e.SaveError="SAVE_ERROR",e.Closed="CLOSED",e.Connecting="CONNECTING",e.Connected="CONNECTED",e.Closing="CLOSING"}(Hl||(Hl={})),function(e){e.Error="ERROR",e.SimpleLocal="SIMPLE_LOCAL",e.CSV="CSV",e.FeatureLayer="FEATURE_LAYER",e.SceneLayer="SCENE_LAYER",e.GroupLayer="GROUP_LAYER",e.FeatureService="FEATURE_SERVICE",e.MapService="MAP_SERVICE",e.SceneService="SCENE_SERVICE",e.ImageService="IMAGE_SERVICE",e.VectorTileService="VECTOR_TILE_SERVICE",e.GeoJSON="GEO_JSON",e.KML="KML",e.WFS="WFS",e.WMS="WMS",e.WMTS="WMTS"}(zl||(zl={})),function(e){e.Map="MAP",e.WebMap="WEB_MAP",e.WebScene="WEB_SCENE"}(ql||(ql={}));const Yl=Object.assign(Object.assign({},zl),ql);var Jl,Kl,Xl,Ql,Zl,eu,tu,ru,nu,ou;!function(e){e.FeatureLayer="Feature Layer",e.Table="Table",e.GroupLayer="Group Layer",e.SceneLayerPoint="Point",e.SceneLayer3DObject="3DObject"}(Jl||(Jl={})),function(e){e.FeatureService="FeatureServer",e.MapService="MapServer",e.SceneService="SceneServer",e.ImageService="ImageServer",e.VectorTileService="VectorTileServer"}(Kl||(Kl={})),function(e){e.WebMap="Web Map",e.WebScene="Web Scene",e.FeatureService="Feature Service",e.MapService="Map Service",e.SceneService="Scene Service",e.ImageService="Image Service",e.VectorTileService="Vector Tile Service",e.FeatureCollection="Feature Collection",e.GroupLayer="Group Layer",e.CSV="CSV",e.GeoJSON="GeoJson",e.KML="KML",e.WFS="WFS",e.WMS="WMS",e.WMTS="WMTS",e.GeometryService="Geometry Service",e.GeocodingService="Geocoding Service",e.GeoprocessingService="Geoprocessing Service",e.NetworkAnalysisService="Network Analysis Service",e.GeoenrichmentService="Geoenrichment service"}(Xl||(Xl={})),function(e){e.FeatureLayer="feature",e.MapImageLayer="map-image",e.TileLayer="tile",e.GroupLayer="group",e.SceneLayer="scene",e.ImageryLayer="imagery",e.ImageryTileLayer="imagery-tile",e.VectorTileLayer="vector-tile",e.KMLLayer="kml",e.CSVLayer="csv",e.GeoJSONLayer="geojson",e.WFSLayer="wfs",e.WMSLayer="wms",e.WMTSLayer="wmts"}(Ql||(Ql={})),function(e){e.FeatureLayer="ArcGISFeatureLayer",e.SceneLayer="ArcGISSceneServiceLayer",e.GroupLayer="GroupLayer",e.MapService="ArcGISMapServiceLayer",e.TiledMapService="ArcGISTiledMapServiceLayer",e.VectorTileService="VectorTileLayer",e.ImageService="ArcGISImageServiceLayer",e.TiledImageService="ArcGISTiledImageServiceLayer",e.CSV="CSV",e.GeoJSON="GeoJSON",e.KML="KML",e.WFS="WFS",e.WMS="WMS"}(Zl||(Zl={}));class iu extends Error{constructor(e,t){super(`data source id: ${e}, ${t}`),this.dataSourceId=e}}!function(e){e.InAllData="IN_ALL_DATA",e.InRemoteConfigView="IN_REMOTE_CONFIG_VIEW",e.InConfigView="IN_CONFIG_VIEW",e.InRuntimeView="IN_RUNTIME_VIEW"}(eu||(eu={})),function(e){e.New="New",e.AddToCurrent="AddToCurrent",e.RemoveFromCurrent="RemoveFromCurrent",e.SelectFromCurrent="SelectFromCurrent"}(tu||(tu={})),function(e){e.DataSelection="dataSelection"}(ru||(ru={})),function(e){e.Widgets="widgets",e.Data_s="data_s"}(nu||(nu={})),function(e){e.Id="id",e.Where="where",e.Geometry="geometry"}(ou||(ou={}));const au=Array.isArray,su="object"==typeof global&&global&&global.Object===Object&&global;var lu="object"==typeof self&&self&&self.Object===Object&&self;const uu=su||lu||Function("return this")(),cu=uu.Symbol;var du=Object.prototype,pu=du.hasOwnProperty,fu=du.toString,hu=cu?cu.toStringTag:void 0;var gu=Object.prototype.toString;var mu=cu?cu.toStringTag:void 0;const vu=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":mu&&mu in Object(e)?function(e){var t=pu.call(e,hu),r=e[hu];try{e[hu]=void 0;var n=!0}catch(e){}var o=fu.call(e);return n&&(t?e[hu]=r:delete e[hu]),o}(e):function(e){return gu.call(e)}(e)},yu=function(e){return null!=e&&"object"==typeof e},Su=function(e){return"symbol"==typeof e||yu(e)&&"[object Symbol]"==vu(e)};var bu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wu=/^\w*$/;const Iu=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Eu=function(e){if(!Iu(e))return!1;var t=vu(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Cu=uu["__core-js_shared__"];var Ou,xu=(Ou=/[^.]+$/.exec(Cu&&Cu.keys&&Cu.keys.IE_PROTO||""))?"Symbol(src)_1."+Ou:"";var Tu=Function.prototype.toString;const Au=function(e){if(null!=e){try{return Tu.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var Pu=/^\[object .+?Constructor\]$/,Du=Function.prototype,Ru=Object.prototype,_u=Du.toString,ku=Ru.hasOwnProperty,Lu=RegExp("^"+_u.call(ku).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Nu=function(e){return!(!Iu(e)||(t=e,xu&&xu in t))&&(Eu(e)?Lu:Pu).test(Au(e));var t},Mu=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Nu(r)?r:void 0},ju=Mu(Object,"create");var Uu=Object.prototype.hasOwnProperty;var Fu=Object.prototype.hasOwnProperty;function Bu(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Bu.prototype.clear=function(){this.__data__=ju?ju(null):{},this.size=0},Bu.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bu.prototype.get=function(e){var t=this.__data__;if(ju){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Uu.call(t,e)?t[e]:void 0},Bu.prototype.has=function(e){var t=this.__data__;return ju?void 0!==t[e]:Fu.call(t,e)},Bu.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ju&&void 0===t?"__lodash_hash_undefined__":t,this};const $u=Bu,Gu=function(e,t){return e===t||e!=e&&t!=t},Wu=function(e,t){for(var r=e.length;r--;)if(Gu(e[r][0],t))return r;return-1};var Vu=Array.prototype.splice;function Hu(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hu.prototype.clear=function(){this.__data__=[],this.size=0},Hu.prototype.delete=function(e){var t=this.__data__,r=Wu(t,e);return!(r<0||(r==t.length-1?t.pop():Vu.call(t,r,1),--this.size,0))},Hu.prototype.get=function(e){var t=this.__data__,r=Wu(t,e);return r<0?void 0:t[r][1]},Hu.prototype.has=function(e){return Wu(this.__data__,e)>-1},Hu.prototype.set=function(e,t){var r=this.__data__,n=Wu(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};const zu=Hu,qu=Mu(uu,"Map"),Yu=function(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map};function Ju(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ju.prototype.clear=function(){this.size=0,this.__data__={hash:new $u,map:new(qu||zu),string:new $u}},Ju.prototype.delete=function(e){var t=Yu(this,e).delete(e);return this.size-=t?1:0,t},Ju.prototype.get=function(e){return Yu(this,e).get(e)},Ju.prototype.has=function(e){return Yu(this,e).has(e)},Ju.prototype.set=function(e,t){var r=Yu(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};const Ku=Ju;function Xu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Xu.Cache||Ku),r}Xu.Cache=Ku;var Qu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zu=/\\(\\)?/g;const ec=(tc=Xu((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Qu,(function(e,r,n,o){t.push(n?o.replace(Zu,"$1"):r||e)})),t}),(function(e){return 500===rc.size&&rc.clear(),e})),rc=tc.cache,tc);var tc,rc;var nc=cu?cu.prototype:void 0,oc=nc?nc.toString:void 0;const ic=function e(t){if("string"==typeof t)return t;if(au(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,e)+"";if(Su(t))return oc?oc.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},ac=function(e){return null==e?"":ic(e)},sc=function(e,t){return au(e)?e:function(e,t){if(au(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Su(e))||wu.test(e)||!bu.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:ec(ac(e))},lc=function(e){if("string"==typeof e||Su(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},uc=function(e,t,r){var n=null==e?void 0:function(e,t){for(var r=0,n=(t=sc(t,e)).length;null!=e&&r<n;)e=e[lc(t[r++])];return r&&r==n?e:void 0}(e,t);return void 0===n?r:n};function cc(e){var t=this.__data__=new zu(e);this.size=t.size}cc.prototype.clear=function(){this.__data__=new zu,this.size=0},cc.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},cc.prototype.get=function(e){return this.__data__.get(e)},cc.prototype.has=function(e){return this.__data__.has(e)},cc.prototype.set=function(e,t){var r=this.__data__;if(r instanceof zu){var n=r.__data__;if(!qu||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ku(n)}return r.set(e,t),this.size=r.size,this};const dc=cc;function pc(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ku;++t<r;)this.add(e[t])}pc.prototype.add=pc.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},pc.prototype.has=function(e){return this.__data__.has(e)};const fc=pc,hc=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},gc=function(e,t){return e.has(t)},mc=function(e,t,r,n,o,i){var a=1&r,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=i.get(e),c=i.get(t);if(u&&c)return u==t&&c==e;var d=-1,p=!0,f=2&r?new fc:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var h=e[d],g=t[d];if(n)var m=a?n(g,h,d,t,e,i):n(h,g,d,e,t,i);if(void 0!==m){if(m)continue;p=!1;break}if(f){if(!hc(t,(function(e,t){if(!gc(f,t)&&(h===e||o(h,e,r,n,i)))return f.push(t)}))){p=!1;break}}else if(h!==g&&!o(h,g,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p},vc=uu.Uint8Array,yc=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r},Sc=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r};var bc=cu?cu.prototype:void 0,wc=bc?bc.valueOf:void 0;const Ic=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Ec=function(e,t,r){var n=t(e);return au(e)?n:Ic(n,r(e))},Cc=function(){return[]};var Oc=Object.prototype.propertyIsEnumerable,xc=Object.getOwnPropertySymbols;const Tc=xc?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}(xc(e),(function(t){return Oc.call(e,t)})))}:Cc,Ac=function(e){return yu(e)&&"[object Arguments]"==vu(e)};var Pc=Object.prototype,Dc=Pc.hasOwnProperty,Rc=Pc.propertyIsEnumerable,_c=Ac(function(){return arguments}())?Ac:function(e){return yu(e)&&Dc.call(e,"callee")&&!Rc.call(e,"callee")};const kc=_c;var Lc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nc=Lc&&"object"==typeof module&&module&&!module.nodeType&&module,Mc=Nc&&Nc.exports===Lc?uu.Buffer:void 0;const jc=(Mc?Mc.isBuffer:void 0)||function(){return!1};var Uc=/^(?:0|[1-9]\d*)$/;const Fc=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Uc.test(e))&&e>-1&&e%1==0&&e<t},Bc=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var $c={};$c["[object Float32Array]"]=$c["[object Float64Array]"]=$c["[object Int8Array]"]=$c["[object Int16Array]"]=$c["[object Int32Array]"]=$c["[object Uint8Array]"]=$c["[object Uint8ClampedArray]"]=$c["[object Uint16Array]"]=$c["[object Uint32Array]"]=!0,$c["[object Arguments]"]=$c["[object Array]"]=$c["[object ArrayBuffer]"]=$c["[object Boolean]"]=$c["[object DataView]"]=$c["[object Date]"]=$c["[object Error]"]=$c["[object Function]"]=$c["[object Map]"]=$c["[object Number]"]=$c["[object Object]"]=$c["[object RegExp]"]=$c["[object Set]"]=$c["[object String]"]=$c["[object WeakMap]"]=!1;const Gc=function(e){return function(t){return e(t)}};var Wc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Vc=Wc&&"object"==typeof module&&module&&!module.nodeType&&module,Hc=Vc&&Vc.exports===Wc&&su.process;const zc=function(){try{return Vc&&Vc.require&&Vc.require("util").types||Hc&&Hc.binding&&Hc.binding("util")}catch(e){}}();var qc=zc&&zc.isTypedArray;const Yc=qc?Gc(qc):function(e){return yu(e)&&Bc(e.length)&&!!$c[vu(e)]};var Jc=Object.prototype.hasOwnProperty;const Kc=function(e,t){var r=au(e),n=!r&&kc(e),o=!r&&!n&&jc(e),i=!r&&!n&&!o&&Yc(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var u in e)!t&&!Jc.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Fc(u,l))||s.push(u);return s};var Xc=Object.prototype;const Qc=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Xc)},Zc=function(e,t){return function(r){return e(t(r))}},ed=Zc(Object.keys,Object);var td=Object.prototype.hasOwnProperty;const rd=function(e){return null!=e&&Bc(e.length)&&!Eu(e)},nd=function(e){return rd(e)?Kc(e):function(e){if(!Qc(e))return ed(e);var t=[];for(var r in Object(e))td.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)},od=function(e){return Ec(e,nd,Tc)};var id=Object.prototype.hasOwnProperty;const ad=Mu(uu,"DataView"),sd=Mu(uu,"Promise"),ld=Mu(uu,"Set"),ud=Mu(uu,"WeakMap");var cd="[object Map]",dd="[object Promise]",pd="[object Set]",fd="[object WeakMap]",hd="[object DataView]",gd=Au(ad),md=Au(qu),vd=Au(sd),yd=Au(ld),Sd=Au(ud),bd=vu;(ad&&bd(new ad(new ArrayBuffer(1)))!=hd||qu&&bd(new qu)!=cd||sd&&bd(sd.resolve())!=dd||ld&&bd(new ld)!=pd||ud&&bd(new ud)!=fd)&&(bd=function(e){var t=vu(e),r="[object Object]"==t?e.constructor:void 0,n=r?Au(r):"";if(n)switch(n){case gd:return hd;case md:return cd;case vd:return dd;case yd:return pd;case Sd:return fd}return t});const wd=bd;var Id="[object Arguments]",Ed="[object Array]",Cd="[object Object]",Od=Object.prototype.hasOwnProperty;const xd=function(e,t,r,n,o,i){var a=au(e),s=au(t),l=a?Ed:wd(e),u=s?Ed:wd(t),c=(l=l==Id?Cd:l)==Cd,d=(u=u==Id?Cd:u)==Cd,p=l==u;if(p&&jc(e)){if(!jc(t))return!1;a=!0,c=!1}if(p&&!c)return i||(i=new dc),a||Yc(e)?mc(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new vc(e),new vc(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Gu(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=yc;case"[object Set]":var l=1&n;if(s||(s=Sc),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=2,a.set(e,t);var c=mc(s(e),s(t),n,o,i,a);return a.delete(e),c;case"[object Symbol]":if(wc)return wc.call(e)==wc.call(t)}return!1}(e,t,l,r,n,o,i);if(!(1&r)){var f=c&&Od.call(e,"__wrapped__"),h=d&&Od.call(t,"__wrapped__");if(f||h){var g=f?e.value():e,m=h?t.value():t;return i||(i=new dc),o(g,m,r,n,i)}}return!!p&&(i||(i=new dc),function(e,t,r,n,o,i){var a=1&r,s=od(e),l=s.length;if(l!=od(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:id.call(t,c)))return!1}var d=i.get(e),p=i.get(t);if(d&&p)return d==t&&p==e;var f=!0;i.set(e,t),i.set(t,e);for(var h=a;++u<l;){var g=e[c=s[u]],m=t[c];if(n)var v=a?n(m,g,c,t,e,i):n(g,m,c,e,t,i);if(!(void 0===v?g===m||o(g,m,r,n,i):v)){f=!1;break}h||(h="constructor"==c)}if(f&&!h){var y=e.constructor,S=t.constructor;y==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof S&&S instanceof S||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,r,n,o,i))},Td=function e(t,r,n,o,i){return t===r||(null==t||null==r||!yu(t)&&!yu(r)?t!=t&&r!=r:xd(t,r,n,o,e,i))},Ad=function(e,t){return Td(e,t)},Pd=[576,992],Dd={DESKTOP:{width:1280,height:800},PAD:{width:768,height:1024},PHONE:{width:414,height:896}},Rd=960,_d={};_d[Dl.Large]=[{width:1024,height:768},{width:1280,height:800},{width:1280,height:1024},{width:1366,height:768},{width:1440,height:900},{width:1536,height:864},{width:1600,height:900},{width:1920,height:1080}],_d[Dl.Medium]=[{width:601,height:962},{width:600,height:1024},{width:768,height:1024},{width:800,height:1280},{width:834,height:1112}],_d[Dl.Small]=[{width:360,height:640},{width:360,height:720},{width:360,height:740},{width:375,height:667},{width:414,height:736}];const kd=_d,Ld="themes/shared-theme/",Nd="selection",Md="no_selection",jd="output",Ud="repeat_context",Fd="current_page",Bd=100,$d="exb_user_locale";function Gd(e){return Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(e)}function Wd(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Vd(e){Wd(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Gd(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Hd(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var zd,qd,Yd={};function Jd(){return Yd}function Kd(e,t){var r,n,o,i,a,s,l,u;Wd(1,arguments);var c=Jd(),d=Hd(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:c.weekStartsOn)&&void 0!==n?n:null===(l=c.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Vd(e),f=p.getDay(),h=(f<d?7:0)+f-d;return p.setDate(p.getDate()-h),p.setHours(0,0,0,0),p}function Xd(e,t){var r,n,o,i,a,s,l,u;Wd(1,arguments);var c=Jd(),d=Hd(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:c.weekStartsOn)&&void 0!==n?n:null===(l=c.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Vd(e),f=p.getDay(),h=6+(f<d?-7:0)-(f-d);return p.setDate(p.getDate()+h),p.setHours(23,59,59,999),p}function Qd(e){Wd(1,arguments);var t=Vd(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Zd(e){Wd(1,arguments);var t=Vd(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ep(e){Wd(1,arguments);var t=Vd(e),r=t.getMonth(),n=r-r%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function tp(e){Wd(1,arguments);var t=Vd(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(23,59,59,999),t}function rp(e){Wd(1,arguments);var t=Vd(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function np(e){Wd(1,arguments);var t=Vd(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}!function(e){e.Now="NOW",e.Min="MIN",e.Max="MAX",e.Today="TODAY",e.Tomorrow="TOMORROW",e.Yesterday="YESTERDAY",e.ThisWeek="THIS_WEEK",e.ThisMonth="THIS_MONTH",e.ThisQuarter="THIS_QUARTER",e.ThisYear="THIS_YEAR"}(zd||(zd={})),function(e){e.Minute="MINUTE",e.Hour="HOUR",e.Day="DAY",e.Week="WEEK",e.Month="MONTH",e.Year="YEAR"}(qd||(qd={}));const op={shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},ip={common:" ",de:" , ",el:" , ",fi:" klo ",fr:" à ",he:" , ",hi:" , ",it:" , ",nb:" , ",pl:" , ",ro:" , ",ru:" , ",vi:" , "},ap={date:"yyyy/MM/dd",time:"H:mm",dateTime:"yyyy/MM/dd H:mm"};function sp(e){return op[e]||(console.warn(`Invalid data format ${e}`),null)}function lp(e,t,r){if(!t&&!r)return ap.date;let n="";if(t){if(Fl.includes(t)){const e=sp(t);t=e.datePattern,r=r||e.timePattern}n=t}if(r){const o=e.locale||"en";n=n+(t?ip[o]||ip.common:"")+r}return n}function up(e,t,r){if(!e)return"";"number"==typeof e&&(e=new Date(e));const n=sp(t);return cp(e,r,n.datePattern,n.timePattern)}function cp(e,t,r,n){if(!e)return"";if("number"==typeof e&&(e=new Date(e)),!r&&!n)return t.formatDate(e);let o=hp(e,r,t);if(n){const r=gp(e,n,t),i=t.locale||"en";o=o+(ip[i]||ip.common)+r}return o}const dp=e=>{const t=sp(e);if(!t)return;const r=pp(t.datePattern),n=pp(t.timePattern);return Object.assign(Object.assign({},r),n)},pp=e=>{const t={};if(e.includes("y")&&(t.year="numeric"),e.includes("MMMM")?t.month="long":e.includes("MMM")?t.month="short":e.includes("MM")?t.month="2-digit":e.includes("M")&&(t.month="numeric"),e.includes("d")&&(t.day="numeric"),e.includes("EEEE")&&(t.weekday="long"),0!==Object.keys(t).length)return t;console.warn(`Invalid date pattern ${e}`)},fp=(e,t)=>{const r={};if(e.toLowerCase().includes("h")&&(r.hour="numeric"),e.includes("mm")&&(r.minute="2-digit"),e.includes("ss")&&(r.second="2-digit"),t&&e.includes("a")&&(r.hour12=!0),0!==Object.keys(r).length)return r;console.warn(`Not support time pattern ${e}`)};function hp(e,t,r){if(!e)return null;const n=pp(t);return r.formatDate(e,n)}function gp(e,t,r){if(!e)return null;const n=fp(t,!1);return r.formatDate(e,n)}function mp(e,t){let r=null;const n=new Date;n.setHours(0,0,0,0);const o=n.getTime(),i=864e5;switch(e){case zd.Today:r=n;break;case zd.Yesterday:r=new Date(o-i);break;case zd.Tomorrow:r=new Date(o+i);break;case zd.ThisWeek:r=[Kd(n,{locale:t.locale}),Xd(n,{locale:t.locale})];break;case zd.ThisMonth:r=[Qd(n),Zd(n)];break;case zd.ThisQuarter:r=[ep(n),tp(n)];break;case zd.ThisYear:r=[rp(n),np(n)]}return r}var vp=function(e,t){return vp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},vp(e,t)};function yp(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}vp(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Sp,bp,wp,Ip=function(){return Ip=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ip.apply(this,arguments)};function Ep(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function Cp(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function Op(e){return e.type===bp.literal}function xp(e){return e.type===bp.argument}function Tp(e){return e.type===bp.number}function Ap(e){return e.type===bp.date}function Pp(e){return e.type===bp.time}function Dp(e){return e.type===bp.select}function Rp(e){return e.type===bp.plural}function _p(e){return e.type===bp.pound}function kp(e){return e.type===bp.tag}function Lp(e){return!(!e||"object"!=typeof e||e.type!==wp.number)}function Np(e){return!(!e||"object"!=typeof e||e.type!==wp.dateTime)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(Sp||(Sp={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(bp||(bp={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(wp||(wp={}));var Mp=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,jp=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Up(e){var t={};return e.replace(jp,(function(e){var r=e.length;switch(e[0]){case"G":t.era=4===r?"long":5===r?"narrow":"short";break;case"y":t.year=2===r?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===r?"long":5===r?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var Fp=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i,Bp=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,$p=/^(@+)?(\+|#+)?[rs]?$/g,Gp=/(\*)(0+)|(#+)(0+)|(0+)/g,Wp=/^(0+)$/;function Vp(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace($p,(function(e,r,n){return"string"!=typeof n?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):"+"===n?t.minimumSignificantDigits=r.length:"#"===r[0]?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+("string"==typeof n?n.length:0)),""})),t}function Hp(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function zp(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var r=e.slice(0,2);if("+!"===r?(t.signDisplay="always",e=e.slice(2)):"+?"===r&&(t.signDisplay="exceptZero",e=e.slice(2)),!Wp.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function qp(e){return Hp(e)||{}}function Yp(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=o.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=Ip(Ip(Ip({},t),{notation:"scientific"}),o.options.reduce((function(e,t){return Ip(Ip({},e),qp(t))}),{}));continue;case"engineering":t=Ip(Ip(Ip({},t),{notation:"engineering"}),o.options.reduce((function(e,t){return Ip(Ip({},e),qp(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(Gp,(function(e,r,n,o,i,a){if(r)t.minimumIntegerDigits=n.length;else{if(o&&i)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(Wp.test(o.stem))t.minimumIntegerDigits=o.stem.length;else if(Bp.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(Bp,(function(e,r,n,o,i,a){return"*"===n?t.minimumFractionDigits=r.length:o&&"#"===o[0]?t.maximumFractionDigits=o.length:i&&a?(t.minimumFractionDigits=i.length,t.maximumFractionDigits=i.length+a.length):(t.minimumFractionDigits=r.length,t.maximumFractionDigits=r.length),""}));var i=o.options[0];"w"===i?t=Ip(Ip({},t),{trailingZeroDisplay:"stripIfInteger"}):i&&(t=Ip(Ip({},t),Vp(i)))}else if($p.test(o.stem))t=Ip(Ip({},t),Vp(o.stem));else{var a=Hp(o.stem);a&&(t=Ip(Ip({},t),a));var s=zp(o.stem);s&&(t=Ip(Ip({},t),s))}}return t}var Jp,Kp={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Xp(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r,n=e.language;return"root"!==n&&(r=e.maximize().region),(Kp[r||""]||Kp[n||""]||Kp["".concat(n,"-001")]||Kp["001"])[0]}var Qp=new RegExp("^".concat(Mp.source,"*")),Zp=new RegExp("".concat(Mp.source,"*$"));function ef(e,t){return{start:e,end:t}}var tf=!!String.prototype.startsWith&&"_a".startsWith("a",1),rf=!!String.fromCodePoint,nf=!!Object.fromEntries,of=!!String.prototype.codePointAt,af=!!String.prototype.trimStart,sf=!!String.prototype.trimEnd,lf=Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},uf=!0;try{uf="a"===(null===(Jp=vf("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===Jp?void 0:Jp[0])}catch(xl){uf=!1}var cf,df=tf?function(e,t,r){return e.startsWith(t,r)}:function(e,t,r){return e.slice(r,r+t.length)===t},pf=rf?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,n="",o=e.length,i=0;o>i;){if((r=e[i++])>1114111)throw RangeError(r+" is not a valid code point");n+=r<65536?String.fromCharCode(r):String.fromCharCode(55296+((r-=65536)>>10),r%1024+56320)}return n},ff=nf?Object.fromEntries:function(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r],i=o[0],a=o[1];t[i]=a}return t},hf=of?function(e,t){return e.codePointAt(t)}:function(e,t){var r=e.length;if(!(t<0||t>=r)){var n,o=e.charCodeAt(t);return o<55296||o>56319||t+1===r||(n=e.charCodeAt(t+1))<56320||n>57343?o:n-56320+(o-55296<<10)+65536}},gf=af?function(e){return e.trimStart()}:function(e){return e.replace(Qp,"")},mf=sf?function(e){return e.trimEnd()}:function(e){return e.replace(Zp,"")};function vf(e,t){return new RegExp(e,t)}if(uf){var yf=vf("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");cf=function(e,t){var r;return yf.lastIndex=t,null!==(r=yf.exec(e)[1])&&void 0!==r?r:""}}else cf=function(e,t){for(var r=[];;){var n=hf(e,t);if(void 0===n||wf(n)||If(n))break;r.push(n),t+=n>=65536?2:1}return pf.apply(void 0,r)};var Sf=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,r){for(var n=[];!this.isEOF();){var o=this.char();if(123===o){if((i=this.parseArgument(e,r)).err)return i;n.push(i.val)}else{if(125===o&&e>0)break;if(35!==o||"plural"!==t&&"selectordinal"!==t){if(60===o&&!this.ignoreTag&&47===this.peek()){if(r)break;return this.error(Sp.UNMATCHED_CLOSING_TAG,ef(this.clonePosition(),this.clonePosition()))}if(60===o&&!this.ignoreTag&&bf(this.peek()||0)){if((i=this.parseTag(e,t)).err)return i;n.push(i.val)}else{var i;if((i=this.parseLiteral(e,t)).err)return i;n.push(i.val)}}else{var a=this.clonePosition();this.bump(),n.push({type:bp.pound,location:ef(a,this.clonePosition())})}}}return{val:n,err:null}},e.prototype.parseTag=function(e,t){var r=this.clonePosition();this.bump();var n=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:bp.literal,value:"<".concat(n,"/>"),location:ef(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(e+1,t,!0);if(o.err)return o;var i=o.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!bf(this.char()))return this.error(Sp.INVALID_TAG,ef(a,this.clonePosition()));var s=this.clonePosition();return n!==this.parseTagName()?this.error(Sp.UNMATCHED_CLOSING_TAG,ef(s,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:bp.tag,value:n,children:i,location:ef(r,this.clonePosition())},err:null}:this.error(Sp.INVALID_TAG,ef(a,this.clonePosition())))}return this.error(Sp.UNCLOSED_TAG,ef(r,this.clonePosition()))}return this.error(Sp.INVALID_TAG,ef(r,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var r=this.clonePosition(),n="";;){var o=this.tryParseQuote(t);if(o)n+=o;else{var i=this.tryParseUnquoted(e,t);if(i)n+=i;else{var a=this.tryParseLeftAngleBracket();if(!a)break;n+=a}}}var s=ef(r,this.clonePosition());return{val:{type:bp.literal,value:n,location:s},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(bf(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(39===r){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(r);this.bump()}return pf.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var r=this.char();return 60===r||123===r||35===r&&("plural"===t||"selectordinal"===t)||125===r&&e>0?null:(this.bump(),pf(r))},e.prototype.parseArgument=function(e,t){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Sp.EXPECT_ARGUMENT_CLOSING_BRACE,ef(r,this.clonePosition()));if(125===this.char())return this.bump(),this.error(Sp.EMPTY_ARGUMENT,ef(r,this.clonePosition()));var n=this.parseIdentifierIfPossible().value;if(!n)return this.error(Sp.MALFORMED_ARGUMENT,ef(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Sp.EXPECT_ARGUMENT_CLOSING_BRACE,ef(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:bp.argument,value:n,location:ef(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Sp.EXPECT_ARGUMENT_CLOSING_BRACE,ef(r,this.clonePosition())):this.parseArgumentOptions(e,t,n,r);default:return this.error(Sp.MALFORMED_ARGUMENT,ef(r,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),r=cf(this.message,t),n=t+r.length;return this.bumpTo(n),{value:r,location:ef(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,r,n){var o,i=this.clonePosition(),a=this.parseIdentifierIfPossible().value,s=this.clonePosition();switch(a){case"":return this.error(Sp.EXPECT_ARGUMENT_TYPE,ef(i,s));case"number":case"date":case"time":this.bumpSpace();var l=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition();if((v=this.parseSimpleArgStyleIfPossible()).err)return v;if(0===(f=mf(v.val)).length)return this.error(Sp.EXPECT_ARGUMENT_STYLE,ef(this.clonePosition(),this.clonePosition()));l={style:f,styleLocation:ef(u,this.clonePosition())}}if((y=this.tryParseArgumentClose(n)).err)return y;var c=ef(n,this.clonePosition());if(l&&df(null==l?void 0:l.style,"::",0)){var d=gf(l.style.slice(2));if("number"===a)return(v=this.parseNumberSkeletonFromString(d,l.styleLocation)).err?v:{val:{type:bp.number,value:r,location:c,style:v.val},err:null};if(0===d.length)return this.error(Sp.EXPECT_DATE_TIME_SKELETON,c);var p=d;this.locale&&(p=function(e,t){for(var r="",n=0;n<e.length;n++){var o=e.charAt(n);if("j"===o){for(var i=0;n+1<e.length&&e.charAt(n+1)===o;)i++,n++;var a=1+(1&i),s=i<2?1:3+(i>>1),l=Xp(t);for("H"!=l&&"k"!=l||(s=0);s-- >0;)r+="a";for(;a-- >0;)r=l+r}else r+="J"===o?"H":o}return r}(d,this.locale));var f={type:wp.dateTime,pattern:p,location:l.styleLocation,parsedOptions:this.shouldParseSkeletons?Up(p):{}};return{val:{type:"date"===a?bp.date:bp.time,value:r,location:c,style:f},err:null}}return{val:{type:"number"===a?bp.number:"date"===a?bp.date:bp.time,value:r,location:c,style:null!==(o=null==l?void 0:l.style)&&void 0!==o?o:null},err:null};case"plural":case"selectordinal":case"select":var h=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Sp.EXPECT_SELECT_ARGUMENT_OPTIONS,ef(h,Ip({},h)));this.bumpSpace();var g=this.parseIdentifierIfPossible(),m=0;if("select"!==a&&"offset"===g.value){if(!this.bumpIf(":"))return this.error(Sp.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ef(this.clonePosition(),this.clonePosition()));var v;if(this.bumpSpace(),(v=this.tryParseDecimalInteger(Sp.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Sp.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return v;this.bumpSpace(),g=this.parseIdentifierIfPossible(),m=v.val}var y,S=this.tryParsePluralOrSelectOptions(e,a,t,g);if(S.err)return S;if((y=this.tryParseArgumentClose(n)).err)return y;var b=ef(n,this.clonePosition());return"select"===a?{val:{type:bp.select,value:r,options:ff(S.val),location:b},err:null}:{val:{type:bp.plural,value:r,options:ff(S.val),offset:m,pluralType:"plural"===a?"cardinal":"ordinal",location:b},err:null};default:return this.error(Sp.INVALID_ARGUMENT_TYPE,ef(i,s))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(Sp.EXPECT_ARGUMENT_CLOSING_BRACE,ef(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();)switch(this.char()){case 39:this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Sp.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ef(r,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var r=[];try{r=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],r=0,n=e.split(Fp).filter((function(e){return e.length>0}));r<n.length;r++){var o=n[r].split("/");if(0===o.length)throw new Error("Invalid number skeleton");for(var i=o[0],a=o.slice(1),s=0,l=a;s<l.length;s++)if(0===l[s].length)throw new Error("Invalid number skeleton");t.push({stem:i,options:a})}return t}(e)}catch(e){return this.error(Sp.INVALID_NUMBER_SKELETON,t)}return{val:{type:wp.number,tokens:r,location:t,parsedOptions:this.shouldParseSkeletons?Yp(r):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,r,n){for(var o,i=!1,a=[],s=new Set,l=n.value,u=n.location;;){if(0===l.length){var c=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(Sp.EXPECT_PLURAL_ARGUMENT_SELECTOR,Sp.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;u=ef(c,this.clonePosition()),l=this.message.slice(c.offset,this.offset())}if(s.has(l))return this.error("select"===t?Sp.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Sp.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);"other"===l&&(i=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?Sp.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Sp.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ef(this.clonePosition(),this.clonePosition()));var f=this.parseMessage(e+1,t,r);if(f.err)return f;var h=this.tryParseArgumentClose(p);if(h.err)return h;a.push([l,{value:f.val,location:ef(p,this.clonePosition())}]),s.add(l),this.bumpSpace(),l=(o=this.parseIdentifierIfPossible()).value,u=o.location}return 0===a.length?this.error("select"===t?Sp.EXPECT_SELECT_ARGUMENT_SELECTOR:Sp.EXPECT_PLURAL_ARGUMENT_SELECTOR,ef(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!i?this.error(Sp.MISSING_OTHER_CLAUSE,ef(this.clonePosition(),this.clonePosition())):{val:a,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var r=1,n=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var o=!1,i=0;!this.isEOF();){var a=this.char();if(!(a>=48&&a<=57))break;o=!0,i=10*i+(a-48),this.bump()}var s=ef(n,this.clonePosition());return o?lf(i*=r)?{val:i,err:null}:this.error(t,s):this.error(e,s)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=hf(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(df(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),r=this.message.indexOf(e,t);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&wf(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),r=this.message.charCodeAt(t+(e>=65536?2:1));return null!=r?r:null},e}();function bf(e){return e>=97&&e<=122||e>=65&&e<=90}function wf(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function If(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function Ef(e){e.forEach((function(e){if(delete e.location,Dp(e)||Rp(e))for(var t in e.options)delete e.options[t].location,Ef(e.options[t].value);else Tp(e)&&Lp(e.style)||(Ap(e)||Pp(e))&&Np(e.style)?delete e.style.location:kp(e)&&Ef(e.children)}))}function Cf(e,t){void 0===t&&(t={}),t=Ip({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var r=new Sf(e,t).parse();if(r.err){var n=SyntaxError(Sp[r.err.kind]);throw n.location=r.err.location,n.originalMessage=r.err.message,n}return(null==t?void 0:t.captureLocation)||Ef(r.val),r.val}function Of(e,t){var r=t&&t.cache?t.cache:kf,n=t&&t.serializer?t.serializer:Df;return(t&&t.strategy?t.strategy:Pf)(e,{cache:r,serializer:n})}function xf(e,t,r,n){var o,i=null==(o=n)||"number"==typeof o||"boolean"==typeof o?n:r(n),a=t.get(i);return void 0===a&&(a=e.call(this,n),t.set(i,a)),a}function Tf(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function Af(e,t,r,n,o){return r.bind(t,e,n,o)}function Pf(e,t){return Af(e,this,1===e.length?xf:Tf,t.cache.create(),t.serializer)}var Df=function(){return JSON.stringify(arguments)};function Rf(){this.cache=Object.create(null)}Rf.prototype.get=function(e){return this.cache[e]},Rf.prototype.set=function(e,t){this.cache[e]=t};var _f,kf={create:function(){return new Rf}},Lf={variadic:function(e,t){return Af(e,this,Tf,t.cache.create(),t.serializer)},monadic:function(e,t){return Af(e,this,xf,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(_f||(_f={}));var Nf,Mf=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.code=r,o.originalMessage=n,o}return yp(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),jf=function(e){function t(t,r,n,o){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(r,'". Options are "').concat(Object.keys(n).join('", "'),'"'),_f.INVALID_VALUE,o)||this}return yp(t,e),t}(Mf),Uf=function(e){function t(t,r,n){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(r),_f.INVALID_VALUE,n)||this}return yp(t,e),t}(Mf),Ff=function(e){function t(t,r){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(r,'"'),_f.MISSING_VALUE,r)||this}return yp(t,e),t}(Mf);function Bf(e){return"function"==typeof e}function $f(e,t,r,n,o,i,a){if(1===e.length&&Op(e[0]))return[{type:Nf.literal,value:e[0].value}];for(var s=[],l=0,u=e;l<u.length;l++){var c=u[l];if(Op(c))s.push({type:Nf.literal,value:c.value});else if(_p(c))"number"==typeof i&&s.push({type:Nf.literal,value:r.getNumberFormat(t).format(i)});else{var d=c.value;if(!o||!(d in o))throw new Ff(d,a);var p=o[d];if(xp(c))p&&"string"!=typeof p&&"number"!=typeof p||(p="string"==typeof p||"number"==typeof p?String(p):""),s.push({type:"string"==typeof p?Nf.literal:Nf.object,value:p});else if(Ap(c)){var f="string"==typeof c.style?n.date[c.style]:Np(c.style)?c.style.parsedOptions:void 0;s.push({type:Nf.literal,value:r.getDateTimeFormat(t,f).format(p)})}else if(Pp(c))f="string"==typeof c.style?n.time[c.style]:Np(c.style)?c.style.parsedOptions:n.time.medium,s.push({type:Nf.literal,value:r.getDateTimeFormat(t,f).format(p)});else if(Tp(c))(f="string"==typeof c.style?n.number[c.style]:Lp(c.style)?c.style.parsedOptions:void 0)&&f.scale&&(p*=f.scale||1),s.push({type:Nf.literal,value:r.getNumberFormat(t,f).format(p)});else{if(kp(c)){var h=c.children,g=c.value,m=o[g];if(!Bf(m))throw new Uf(g,"function",a);var v=m($f(h,t,r,n,o,i).map((function(e){return e.value})));Array.isArray(v)||(v=[v]),s.push.apply(s,v.map((function(e){return{type:"string"==typeof e?Nf.literal:Nf.object,value:e}})))}if(Dp(c)){if(!(y=c.options[p]||c.options.other))throw new jf(c.value,p,Object.keys(c.options),a);s.push.apply(s,$f(y.value,t,r,n,o))}else if(Rp(c)){var y;if(!(y=c.options["=".concat(p)])){if(!Intl.PluralRules)throw new Mf('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',_f.MISSING_INTL_API,a);var S=r.getPluralRules(t,{type:c.pluralType}).select(p-(c.offset||0));y=c.options[S]||c.options.other}if(!y)throw new jf(c.value,p,Object.keys(c.options),a);s.push.apply(s,$f(y.value,t,r,n,o,p-(c.offset||0)))}}}}return(b=s).length<2?b:b.reduce((function(e,t){var r=e[e.length-1];return r&&r.type===Nf.literal&&t.type===Nf.literal?r.value+=t.value:e.push(t),e}),[]);var b}function Gf(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(Nf||(Nf={}));var Wf,Vf=function(){function e(t,r,n,o){var i,a,s,l=this;if(void 0===r&&(r=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=l.formatToParts(e);if(1===t.length)return t[0].value;var r=t.reduce((function(e,t){return e.length&&t.type===Nf.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return r.length<=1?r[0]||"":r},this.formatToParts=function(e){return $f(l.ast,l.locales,l.formatters,l.formats,e,void 0,l.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=l.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(l.locales)[0]}},this.getAst=function(){return l.ast},this.locales=r,this.resolvedLocale=e.resolveLocale(r),"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var u=o||{},c=(u.formatters,Ep(u,["formatters"]));this.ast=e.__parse(t,Ip(Ip({},c),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=(a=e.formats,(s=n)?Object.keys(a).reduce((function(e,t){return e[t]=function(e,t){return t?Ip(Ip(Ip({},e||{}),t||{}),Object.keys(e).reduce((function(r,n){return r[n]=Ip(Ip({},e[n]),t[n]||{}),r}),{})):e}(a[t],s[t]),e}),Ip({},a)):a),this.formatters=o&&o.formatters||(void 0===(i=this.formatterCache)&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Of((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Cp([void 0],t,!1)))}),{cache:Gf(i.number),strategy:Lf.variadic}),getDateTimeFormat:Of((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Cp([void 0],t,!1)))}),{cache:Gf(i.dateTime),strategy:Lf.variadic}),getPluralRules:Of((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Cp([void 0],t,!1)))}),{cache:Gf(i.pluralRules),strategy:Lf.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(void 0!==Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"==typeof e?e:e[0])}},e.__parse=Cf,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(Wf||(Wf={}));var Hf=function(e){function t(r,n,o){var i=this,a=o?o instanceof Error?o:new Error(String(o)):void 0;return(i=e.call(this,"[@formatjs/intl Error ".concat(r,"] ").concat(n,"\n").concat(a?"\n".concat(a.message,"\n").concat(a.stack):""))||this).code=r,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return yp(t,e),t}(Error),zf=function(e){function t(t,r){return e.call(this,Wf.UNSUPPORTED_FORMATTER,t,r)||this}return yp(t,e),t}(Hf),qf=function(e){function t(t,r){return e.call(this,Wf.INVALID_CONFIG,t,r)||this}return yp(t,e),t}(Hf),Yf=function(e){function t(t,r){return e.call(this,Wf.MISSING_DATA,t,r)||this}return yp(t,e),t}(Hf),Jf=function(e){function t(t,r,n){var o=e.call(this,Wf.FORMAT_ERROR,"".concat(t,"\nLocale: ").concat(r,"\n"),n)||this;return o.locale=r,o}return yp(t,e),t}(Hf),Kf=function(e){function t(t,r,n,o){var i=e.call(this,"".concat(t,"\nMessageID: ").concat(null==n?void 0:n.id,"\nDefault Message: ").concat(null==n?void 0:n.defaultMessage,"\nDescription: ").concat(null==n?void 0:n.description,"\n"),r,o)||this;return i.descriptor=n,i.locale=r,i}return yp(t,e),t}(Jf),Xf=function(e){function t(t,r){var n=e.call(this,Wf.MISSING_TRANSLATION,'Missing message: "'.concat(t.id,'" for locale "').concat(r,'", using ').concat(t.defaultMessage?"default message (".concat("string"==typeof t.defaultMessage?t.defaultMessage:t.defaultMessage.map((function(e){var t;return null!==(t=e.value)&&void 0!==t?t:JSON.stringify(e)})).join(),")"):"id"," as fallback."))||this;return n.descriptor=t,n}return yp(t,e),t}(Hf);function Qf(e,t,r){return void 0===r&&(r={}),t.reduce((function(t,n){return n in e?t[n]=e[n]:n in r&&(t[n]=r[n]),t}),{})}var Zf={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){},onWarn:function(e){}};function eh(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function th(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}function rh(e,t,r,n){var o,i=e&&e[t];if(i&&(o=i[r]),o)return o;n(new zf("No ".concat(t," format named: ").concat(r)))}function nh(e,t,r){if(void 0===r&&(r=Error),!e)throw new r(t)}function oh(e,t){return Object.keys(e).reduce((function(r,n){return r[n]=Ip({timeZone:t},e[n]),r}),{})}function ih(e,t){return Object.keys(Ip(Ip({},e),t)).reduce((function(r,n){return r[n]=Ip(Ip({},e[n]||{}),t[n]||{}),r}),{})}function ah(e,t){if(!t)return e;var r=Vf.formats;return Ip(Ip(Ip({},r),e),{date:ih(oh(r.date,t),oh(e.date||{},t)),time:ih(oh(r.time,t),oh(e.time||{},t))})}var sh=function(e,t,r,n,o){var i=e.locale,a=e.formats,s=e.messages,l=e.defaultLocale,u=e.defaultFormats,c=e.fallbackOnEmptyString,d=e.onError,p=e.timeZone,f=e.defaultRichTextElements;void 0===r&&(r={id:""});var h=r.id,g=r.defaultMessage;nh(!!h,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var m=String(h),v=s&&Object.prototype.hasOwnProperty.call(s,m)&&s[m];if(Array.isArray(v)&&1===v.length&&v[0].type===bp.literal)return v[0].value;if(!n&&v&&"string"==typeof v&&!f)return v.replace(/'\{(.*?)\}'/gi,"{$1}");if(n=Ip(Ip({},f),n||{}),a=ah(a,p),u=ah(u,p),!v){if(!1===c&&""===v)return v;if((!g||i&&i.toLowerCase()!==l.toLowerCase())&&d(new Xf(r,i)),g)try{return t.getMessageFormat(g,l,u,o).format(n)}catch(e){return d(new Kf('Error formatting default message for: "'.concat(m,'", rendering default message verbatim'),i,r,e)),"string"==typeof g?g:m}return m}try{return t.getMessageFormat(v,i,a,Ip({formatters:t},o||{})).format(n)}catch(e){d(new Kf('Error formatting message: "'.concat(m,'", using ').concat(g?"default message":"id"," as fallback."),i,r,e))}if(g)try{return t.getMessageFormat(g,l,u,o).format(n)}catch(e){d(new Kf('Error formatting the default message for: "'.concat(m,'", rendering message verbatim'),i,r,e))}return"string"==typeof v?v:"string"==typeof g?g:m},lh=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function uh(e,t,r){var n=e.locale,o=e.formats,i=e.onError;void 0===r&&(r={});var a=r.format,s=a&&rh(o,"number",a,i)||{};return t(n,Qf(r,lh,s))}function ch(e,t,r,n){void 0===n&&(n={});try{return uh(e,t,n).format(r)}catch(t){e.onError(new Jf("Error formatting number.",e.locale,t))}return String(r)}function dh(e,t,r,n){void 0===n&&(n={});try{return uh(e,t,n).formatToParts(r)}catch(t){e.onError(new Jf("Error formatting number.",e.locale,t))}return[]}var ph=["numeric","style"];function fh(e,t,r,n,o){void 0===o&&(o={}),n||(n="second"),Intl.RelativeTimeFormat||e.onError(new Mf('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',_f.MISSING_INTL_API));try{return function(e,t,r){var n=e.locale,o=e.formats,i=e.onError;void 0===r&&(r={});var a=r.format,s=!!a&&rh(o,"relative",a,i)||{};return t(n,Qf(r,ph,s))}(e,t,o).format(r,n)}catch(t){e.onError(new Jf("Error formatting relative time.",e.locale,t))}return String(r)}var hh=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function gh(e,t,r,n){var o=e.locale,i=e.formats,a=e.onError,s=e.timeZone;void 0===n&&(n={});var l=n.format,u=Ip(Ip({},s&&{timeZone:s}),l&&rh(i,t,l,a)),c=Qf(n,hh,u);return"time"!==t||c.hour||c.minute||c.second||c.timeStyle||c.dateStyle||(c=Ip(Ip({},c),{hour:"numeric",minute:"numeric"})),r(o,c)}function mh(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return gh(e,"date",t,a).format(s)}catch(t){e.onError(new Jf("Error formatting date.",e.locale,t))}return String(s)}function vh(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return gh(e,"time",t,a).format(s)}catch(t){e.onError(new Jf("Error formatting time.",e.locale,t))}return String(s)}function yh(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=r[2],s=void 0===a?{}:a,l=e.timeZone,u=e.locale,c=e.onError,d=Qf(s,hh,l?{timeZone:l}:{});try{return t(u,d).formatRange(o,i)}catch(t){c(new Jf("Error formatting date time range.",e.locale,t))}return String(o)}function Sh(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return gh(e,"date",t,a).formatToParts(s)}catch(t){e.onError(new Jf("Error formatting date.",e.locale,t))}return[]}function bh(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return gh(e,"time",t,a).formatToParts(s)}catch(t){e.onError(new Jf("Error formatting time.",e.locale,t))}return[]}var wh=["type"];function Ih(e,t,r,n){var o=e.locale,i=e.onError;void 0===n&&(n={}),Intl.PluralRules||i(new Mf('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',_f.MISSING_INTL_API));var a=Qf(n,wh);try{return t(o,a).select(r)}catch(e){i(new Jf("Error formatting plural.",o,e))}return"other"}var Eh=["type","style"],Ch=Date.now();function Oh(e,t,r,n){void 0===n&&(n={});var o=xh(e,t,r,n).reduce((function(e,t){var r=t.value;return"string"!=typeof r?e.push(r):"string"==typeof e[e.length-1]?e[e.length-1]+=r:e.push(r),e}),[]);return 1===o.length?o[0]:0===o.length?"":o}function xh(e,t,r,n){var o=e.locale,i=e.onError;void 0===n&&(n={}),Intl.ListFormat||i(new Mf('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',_f.MISSING_INTL_API));var a=Qf(n,Eh);try{var s={},l=r.map((function(e,t){if("object"==typeof e){var r=function(e){return"".concat(Ch,"_").concat(e,"_").concat(Ch)}(t);return s[r]=e,r}return String(e)}));return t(o,a).formatToParts(l).map((function(e){return"literal"===e.type?e:Ip(Ip({},e),{value:s[e.value]||e.value})}))}catch(e){i(new Jf("Error formatting list.",o,e))}return r}var Th=["style","type","fallback","languageDisplay"];function Ah(e,t,r,n){var o=e.locale,i=e.onError;Intl.DisplayNames||i(new Mf('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',_f.MISSING_INTL_API));var a=Qf(n,Th);try{return t(o,a).of(r)}catch(e){i(new Jf("Error formatting display name.",o,e))}}function Ph(e,t){var r=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,r=Intl.ListFormat,n=Intl.DisplayNames,o=Of((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Cp([void 0],t,!1)))}),{cache:th(e.dateTime),strategy:Lf.variadic}),i=Of((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Cp([void 0],t,!1)))}),{cache:th(e.number),strategy:Lf.variadic}),a=Of((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Cp([void 0],t,!1)))}),{cache:th(e.pluralRules),strategy:Lf.variadic});return{getDateTimeFormat:o,getNumberFormat:i,getMessageFormat:Of((function(e,t,r,n){return new Vf(e,t,r,Ip({formatters:{getNumberFormat:i,getDateTimeFormat:o,getPluralRules:a}},n||{}))}),{cache:th(e.message),strategy:Lf.variadic}),getRelativeTimeFormat:Of((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,Cp([void 0],e,!1)))}),{cache:th(e.relativeTime),strategy:Lf.variadic}),getPluralRules:a,getListFormat:Of((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,Cp([void 0],e,!1)))}),{cache:th(e.list),strategy:Lf.variadic}),getDisplayNames:Of((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,Cp([void 0],e,!1)))}),{cache:th(e.displayNames),strategy:Lf.variadic})}}(t),n=Ip(Ip({},Zf),e),o=n.locale,i=n.defaultLocale,a=n.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&a?a(new Yf('Missing locale data for locale: "'.concat(o,'" in Intl.NumberFormat. Using default locale: "').concat(i,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&a&&a(new Yf('Missing locale data for locale: "'.concat(o,'" in Intl.DateTimeFormat. Using default locale: "').concat(i,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(a&&a(new qf('"locale" was not configured, using "'.concat(i,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),n.locale=n.defaultLocale||"en"),function(e){var t;e.onWarn&&e.defaultRichTextElements&&"string"==typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&e.onWarn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}(n),Ip(Ip({},n),{formatters:r,formatNumber:ch.bind(null,n,r.getNumberFormat),formatNumberToParts:dh.bind(null,n,r.getNumberFormat),formatRelativeTime:fh.bind(null,n,r.getRelativeTimeFormat),formatDate:mh.bind(null,n,r.getDateTimeFormat),formatDateToParts:Sh.bind(null,n,r.getDateTimeFormat),formatTime:vh.bind(null,n,r.getDateTimeFormat),formatDateTimeRange:yh.bind(null,n,r.getDateTimeFormat),formatTimeToParts:bh.bind(null,n,r.getDateTimeFormat),formatPlural:Ih.bind(null,n,r.getPluralRules),formatMessage:sh.bind(null,n,r),$t:sh.bind(null,n,r),formatList:Oh.bind(null,n,r.getListFormat),formatListToParts:xh.bind(null,n,r.getListFormat),formatDisplayName:Ah.bind(null,n,r.getDisplayNames)})}function Dh(e){nh(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var Rh=Ip(Ip({},Zf),{textComponent:k.Fragment});function _h(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(var i=0;i<o;i++){var a=r[i];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var kh="undefined"==typeof window||window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?k.createContext(null):window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=k.createContext(null)),Lh=kh.Consumer,Nh=kh.Provider,Mh=kh;function jh(e,t){var r,n=t||{},o=n.intlPropName,i=void 0===o?"intl":o,a=n.forwardRef,s=void 0!==a&&a,l=n.enforceContext,u=void 0===l||l,c=function(t){return k.createElement(Lh,null,(function(r){var n;u&&Dh(r);var o=((n={})[i]=r,n);return k.createElement(e,Ip({},t,o,{ref:s?t.forwardedRef:null}))}))};return c.displayName="injectIntl(".concat((r=e).displayName||r.name||"Component",")"),c.WrappedComponent=e,s?te()(k.forwardRef((function(e,t){return k.createElement(c,Ip({},e,{forwardedRef:t}))})),e):te()(c,e)}function Uh(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function Fh(e){return e?Object.keys(e).reduce((function(t,r){var n,o=e[r];return t[r]=Bf(o)?(n=o,function(e){return n(k.Children.toArray(e))}):o,t}),{}):e}var Bh=function(e,t,r,n){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var a=Fh(n),s=sh.apply(void 0,Cp([e,t,r,a],o,!1));return Array.isArray(s)?k.Children.toArray(s):s},$h=function(e,t){var r=e.defaultRichTextElements,n=Ep(e,["defaultRichTextElements"]),o=Fh(r),i=Ph(Ip(Ip(Ip({},Rh),n),{defaultRichTextElements:o}),t),a={locale:i.locale,timeZone:i.timeZone,fallbackOnEmptyString:i.fallbackOnEmptyString,formats:i.formats,defaultLocale:i.defaultLocale,defaultFormats:i.defaultFormats,messages:i.messages,onError:i.onError,defaultRichTextElements:o};return Ip(Ip({},i),{formatMessage:Bh.bind(null,a,i.formatters),$t:Bh.bind(null,a,i.formatters)})},Gh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},t.state={cache:t.cache,intl:$h(Uh(t.props),t.cache),prevConfig:Uh(t.props)},t}return yp(t,e),t.getDerivedStateFromProps=function(e,t){var r=t.prevConfig,n=t.cache,o=Uh(e);return _h(r,o)?null:{intl:$h(o,n),prevConfig:o}},t.prototype.render=function(){return Dh(this.state.intl),k.createElement(Nh,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=Rh,t}(k.PureComponent);const Wh=Gh;var Vh=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function Hh(e,t){const r=qh(e=e.toLowerCase(),t);if(r&&r!==(t&&t[0]))return r}function zh(e){if(!e)return;const t=["language","browserLanguage","systemLanguage","userLanguage"];let r,n;if(Array.isArray(e.languages)&&e.languages.length>0&&(n=e.languages[0],n&&n.length))return n;for(r=0;r<t.length;r++)if(n=e[t[r]],n&&n.length)return n}function qh(e,t=[]){if(e)return tg(e,t)}function Yh(e,t){return e.split("-")[0]===t.split("-")[0]}function Jh(e,t){return Vh(this,void 0,void 0,(function*(){return yield ry(`${e}/${t}`)}))}function Kh(e){let t=!1;const r=["ar","he"];for(let n=0;n<r.length;n++)Yh(r[n],e)&&(t=!0);return t}let Xh={};function Qh(e="_jimu",t="runtime"){var r,n,o,i,a,s,l,u;const c=`${e}-${t}`;if(Xh[c])return Xh[c];const d={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},p=jy().getState();if(!p)return null;let f;if("_jimu"===e)f=$h({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:p.appI18nMessages},d);else if("runtime"===t){const t=window.jimuConfig.isBuilder?null===(r=p.appStateInBuilder)||void 0===r?void 0:r.appConfig:p.appConfig,i=null===(o=null===(n=null==t?void 0:t.widgets)||void 0===n?void 0:n[e])||void 0===o?void 0:o.manifest.i18nMessages,a=Object.assign({},i,p.appI18nMessages);f=$h({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:a},d)}else{let t;if(window.jimuConfig.isBuilder){const r=null===(l=null===(s=null===(a=null===(i=p.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===a?void 0:a.widgets)||void 0===s?void 0:s[e])||void 0===l?void 0:l.manifest.name;t=null===(u=p.builder.widgetSettingI18nMessages)||void 0===u?void 0:u[r]}else t={};const r=Object.assign({},t,p.appI18nMessages);f=$h({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:r},d)}return Xh[c]=f,f}function Zh(){Xh={}}function eg(e){return tg(e,["ar","en","he","ja","ko","es-mx","th","zh","it-ch","de-ch"])?".":","}function tg(e,t=[]){let r;if(e=e.toLowerCase(),t.includes(e))r=e;else{const n=e.split("-")[0];if(t.includes(n))r=n;else{const n=t.find((t=>t.split("-")[0]===e));n&&(r=n)}}return r}var rg=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const ng=s(1981).exbVersion;var og;function ig(e){return"x"in e&&"y"in e?"esriGeometryPoint":"points"in e?"esriGeometryMultipoint":"paths"in e||"curvePaths"in e?"esriGeometryPolyline":"rings"in e||"curveRings"in e?"esriGeometryPolygon":"esriGeometryEnvelope"}function ag(){var e,t,r,n,o,i,a,s,l,u,c;let d,p,f;window.jimuConfig.isBuilder?(d=null===(t=null===(e=jy().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig,f=null===(i=null===(o=null===(n=null===(r=jy().getState())||void 0===r?void 0:r.appStateInBuilder)||void 0===n?void 0:n.portalSelf)||void 0===o?void 0:o.helperServices)||void 0===i?void 0:i.geometry):(d=null===(a=jy().getState())||void 0===a?void 0:a.appConfig,f=null===(u=null===(l=null===(s=jy().getState())||void 0===s?void 0:s.portalSelf)||void 0===l?void 0:l.helperServices)||void 0===u?void 0:u.geometry),(null==d?void 0:d.utilities)&&Object.keys(d.utilities).some((e=>{const t=d.utilities[e];return!!/\/rest\/services\/.*\/GeometryServer\/?/.test(t.url)&&(p=t.url,!0)}));const h="prod"===window.jimuConfig.hostEnv?"":window.jimuConfig.hostEnv;return null!==(c=null!=p?p:null==f?void 0:f.url)&&void 0!==c?c:`https://utility${h}.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer`}function sg(e,t){return hg(e,t)}function lg(e,t){return hg(e,t)}function ug(){var e;return"undefined"!=typeof window&&Boolean("ontouchstart"in window||(null===(e=window.navigator)||void 0===e?void 0:e.maxTouchPoints)>0||window.DocumentTouch&&document instanceof window.DocumentTouch)}function cg(){return window.self!==window.top&&!window.jimuConfig.isInBuilder}function dg(e){return e.width<=Pd[0]?Dl.Small:e.width<=Pd[1]?Dl.Medium:Dl.Large}function pg(e,t){let r=uc(e,`forBuilderAttributes.viewPortSize.${t}`);return r||(r=uc(kd[t],"[1]")),r||{width:0,height:0}}function fg(e){return e===Dl.Small?Pd[0]:e===Dl.Medium?Pd[1]:1e5}function hg(e,t){switch(e){case"opened":switch(t){case"opened":return null;case"closed":return"onOpen";case"active":return"onDeActive"}case"closed":switch(t){case"opened":return"onClose";case"closed":return null;case"active":return["onDeActive","onClose"]}case"active":switch(t){case"opened":return"onDeActive";case"closed":return["onOpen","onActive"];case"active":return null}}}function gg(e,t){return rg(this,void 0,void 0,(function*(){return yield new Promise((r=>{let n;n=t?document.getElementById(t):document.getElementsByTagName("head")[0];const o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),o.onload=()=>{r(null)},n.appendChild(o)}))}))}function mg(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((r=>{e.prototype[r]=t.prototype[r]}))}))}function vg(e,t){return e.length===t.length&&(e=e.sort(((e,t)=>e>t?-1:1)),t=t.sort(((e,t)=>e>t?-1:1)),Ad(e,t))}!function(e){e.None="None Version Heigher",e.Draft="Draft Version Heigher",e.Published="Published Version Heigher",e.Both="Both Version Heigher"}(og||(og={}));const yg=/([A-Z])/g,Sg=/^ms-/;function bg(e){return e.replace(yg,"-$1").toLowerCase().replace(Sg,"-ms-")}function wg(e){let t="";for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r];null!=n&&(t?t+=";"+bg(r)+":"+n:t=bg(r)+":"+n)}return t||""}function Ig(e,t=1e3,r=100){return rg(this,void 0,void 0,(function*(){const n=(new Date).getTime();function o(i){const a=(new Date).getTime(),s=e();if(s)i(null,s);else{if(n+t<a)return void i("Timeout",null);setTimeout((()=>{o(i)}),r)}}return new Promise(((e,t)=>{o(((r,n)=>{r?t(r):e(n)}))}))}))}function Eg(){return window.jimuConfig.isBuilder?`exb-${jy().getState().appStateInBuilder.appId||jy().getState().appStateInBuilder.appPath}`:`exb-${jy().getState().appId||jy().getState().appPath}`}const Cg=()=>(65536*(1+Math.random())|0).toString(16).substring(1),Og=()=>Cg()+Cg()+"_"+Cg()+"_"+Cg()+"_"+Cg()+"_"+Cg()+Cg()+Cg(),xg=e=>e.toString().includes(".")?e.toString().split(".")[1].length:0,Tg=(e,t=Ae([]))=>{const r=new RegExp(`^${e}\\_(\\d+)$`);let n=-1;return t.forEach((e=>{const t=e.match(r);t&&(n=Math.max(n,parseInt(t[1],10)))})),`${e}_${n+1}`};function Ag(e,t,r){const n=/\$\{\w*\}/g;for(const o in e)if("string"==typeof e[o]){const i=e[o].match(n);if(i&&i.length>0){let n=e[o];i.forEach((e=>{const o=e.substring(2,e.length-1);if("appResourceUrl"!==o){const i=t.formatMessage({id:o,defaultMessage:r&&r[o]});n=n.replace(e,i)}})),e[o]=n}}else"object"==typeof e[o]&&Ag(e[o],t,r);return e}function Pg(){document.getElementById("loading").style.display="none",document.getElementById("app").style.display="block"}const Dg=e=>{if(null==e?void 0:e.format){if(e.type===Rl.Date)return dp(e.format.dateFormat);if(e.type===Rl.Number){const t=e.format.places,r=e.format.digitSeparator,n={style:"decimal",notation:"standard"};return"number"==typeof t&&(n.minimumFractionDigits=t,n.maximumFractionDigits=t),"boolean"==typeof r&&(n.useGrouping=r),n}}};function Rg(e){const t={props:null,result:null};return function(r){if("object"!=typeof r)return console.error("Memorize object param only."),r;if(Object.keys(r).find((e=>{var n;return r[e]!==(null===(n=t.props)||void 0===n?void 0:n[e])}))){const n=e.call(this,r);return t.props=r,t.result=n,n}return t.result}}function _g(){try{return Object.keys(localStorage)}catch(e){return console.error("Read Local storage keys error.",e),[]}}function kg(e){try{return localStorage.getItem(e)}catch(e){return console.error("Read Local storage error.",e),null}}function Lg(e,t){try{localStorage.setItem(e,t)}catch(e){console.error("Set Local storage error.",e)}}function Ng(e){if(!e)return og.None;const t=(null==e?void 0:e.typeKeywords)||[];let r,n,o=!1,i=!1;return null==t||t.forEach((e=>{var t,o;(null==e?void 0:e.includes("version:"))&&(r=null===(t=null==e?void 0:e.split("version:"))||void 0===t?void 0:t[1]),(null==e?void 0:e.includes("publishVersion:"))&&(n=null===(o=null==e?void 0:e.split("publishVersion:"))||void 0===o?void 0:o[1])})),r&&(o=$e.lt(ng,r)),n&&(i=$e.lt(ng,n)),o||i?!o&&i?og.Published:o&&!i?og.Draft:o&&i?og.Both:void 0:og.None}function Mg(){try{return Object.keys(sessionStorage)}catch(e){return console.error("Read Session storage keys error.",e),[]}}function jg(e){try{return sessionStorage.getItem(e)}catch(e){return console.error("Read session storage error.",e),null}}function Ug(e,t){try{sessionStorage.setItem(e,t)}catch(e){console.error("Set session storage error.",e)}}function Fg(e){try{localStorage.removeItem(e)}catch(e){console.error("Remove from Local storage error.",e)}}function Bg(e){try{sessionStorage.removeItem(e)}catch(e){console.error("Remove from session storage error.",e)}}function $g(e){return[e<0?"-":"",Qh().formatNumber(Math.abs(e))]}function Gg(e){var t,r;const n=jy().getState().appContext.locale,o=null!==(r=null===(t=jy().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==r&&r,i=parseFloat(e),[a,s]=$g(i),l=window.jimuUA.browser.name.toLowerCase();return o&&"firefox"!==l&&"safari"!==l?"he"===(null==n?void 0:n.toLowerCase())?`${a}${s}%`:`${a}%${s}`:"tr"===(null==n?void 0:n.toLowerCase().split("-")[0])?`${a}%${s}`:`${a}${s}%`}function Wg(e){var t,r;const n=parseFloat(e),o=null!==(r=null===(t=jy().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==r&&r,[i,a]=$g(n);return o?`${i}px${a}`:`${i}${a}px`}const Vg=()=>ty("jimu-theme")?ty("jimu-theme"):(console.error("Please init jimu-theme."),null);function Hg(e,t){function r(e){for(const t in e)"object"==typeof e[t]?Array.isArray(e[t])?o(e,t):r(e[t]):"string"==typeof e[t]&&n(e,t)}function n(e,r,n){if("number"==typeof n){const o=e[r][n];if(t.matcher(o)){const i=t.handler(o);e[r][n]=i}}else{const n=e[r];if(t.matcher(n)){const o=t.handler(n);e[r]=o}}}function o(e,t){for(let o=0;o<e[t].length;o++)"string"==typeof e[t][o]?n(e,t,o):"object"==typeof e[t][o]&&r(e[t][o])}return r(e),e}const zg=(e,t)=>{var r,n,o,i;const a=null===(r=(t=null!=t?t:jy().getState()).appRuntimeInfo)||void 0===r?void 0:r.selection;if(!(null===(n=t.appConfig)||void 0===n?void 0:n.layouts)||!a)return!1;const s=t.appConfig.layouts[a.layoutId];return(null===(i=null===(o=null==s?void 0:s.content)||void 0===o?void 0:o[a.layoutItemId])||void 0===i?void 0:i.widgetId)===e},qg=(e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)};function Yg(e,t,r){e&&(t=Array.from(new Set(t)),r=Array.from(new Set(r)));const n={};t.forEach((e=>{n[e]>0?n[e]++:n[e]=1}));const o={};r.forEach((e=>{o[e]>0?o[e]++:o[e]=1}));const i=Array.from(new Set(t.concat(r))),a=[],s=[],l=[];return i.forEach((e=>{const t=n[e]>0?n[e]:0,r=o[e]>0?o[e]:0;if(t<r){const n=r-t;for(let t=0;t<n;t++)a.push(e)}else if(t>r){const n=t-r;for(let t=0;t<n;t++)s.push(e)}const i=Math.min(t,r);if(i>0)for(let t=0;t<i;t++)l.push(e)})),{isEqual:0===a.length&&0===s.length,added:a,deleted:s,saved:l}}var Jg,Kg,Xg,Qg,Zg,em,tm,rm,nm,om,im,am,sm;function lm(e){let t="",r=e||"";return r=gm(r),r&&(t=r+"/sharing/rest/portals/self"),t}function um(e){let t="";const r=gm(e);return r&&(t=r+"/sharing/rest/community/groups"),t}function cm(){const e=`${window.location.protocol}//${window.location.host}${function(){const e=window.location.href.split("?")[0];let t=e.indexOf("/home/");t<0&&(t=e.indexOf("/apps/"));let r=e.substring(e.indexOf(window.location.host)+window.location.host.length+1,t);return"/"!==r&&(r="/"+r+"/"),r}()}`;return e.substr(0,e.length-1)}function dm(e){return/\/$/.test(e)?`${e}sharing/rest/`:`${e}/sharing/rest/`}function pm(e){const t=/\/$/.test(e)?"/sharing/rest/":"/sharing/rest";return e.substr(0,e.length-t.length)}function fm(e,t){const r=/^http(s?):\/\//gi,n=/^\/\//gi;return(e=gm(e).toLowerCase().replace(r,"").replace(n,""))===gm(t).toLowerCase().replace(r,"").replace(n,"")}function hm(e){return xv(e).includes(".arcgis.com")}function gm(e){const t=xv(e);return""===t?"":hm(t)?Cv(t,$l.Https):Cv(e=(e||"").trim().replace(/sharing(.*)/gi,"").replace(/\/*$/g,""),$l.Https)}function mm(e){let t="";const r=gm(e);return r&&(t=r+"/sharing/rest/content/items"),t}function vm(e,t){let r="";const n=mm(e);return n&&t&&(r=n+"/"+t),r}function ym(e){let t="";const r=gm(e);return r&&(t=r+"/sharing/rest/community/users"),t}function Sm(e,t){let r="";const n=ym(e);return e&&t&&(r=n+"/"+t),r}function bm(e){let t="";return e&&(t=(e=gm(e))+"/sharing/rest/content"),t}function wm(e,t,r){let n="",o="";return e&&t&&(n=bm(e),o=r?n+"/users/"+t+"/"+r:n+"/users/"+t),o}function Im(e,t,r){let n="",o="";return e&&t&&(n=wm(e,t,r),o=n+"/items"),o}function Em(e,t,r,n){let o="",i="";return e&&t&&(o=Im(e,t,n),i=o+"/"+r+"/share"),i}function Cm(e){let t="";const r=gm(e);return r&&(t=r+"/home/index.html"),t}function Om(e,t){let r="";const n=gm(e);return n&&(r=n+"/home/webmap/viewer.html",r+=t?"?webmap="+t:"?useExisting=1"),r}function xm(e){const t=window.location.protocol,r=Ev(e);return Ev(e)?t!==r&&t===$l.Https?Cv(e,$l.Https):e:Cv(e,t)}function Tm(e){return`${e}/sharing/proxy`}function Am(e){if(!e)return e;if(hm(e)){const t=xv(e),r=Ev(e),n=t.split("."),o=n[0];n.splice(0,1);const i=n.join(".");let a;return"devext"===o||"mapsdevext.arcgis.com"===i?a="devext.arcgis.com":"qaext"===o||"mapsqa.arcgis.com"===i?a="qaext.arcgis.com":"www"!==o&&"maps.arcgis.com"!==i||(a="www.arcgis.com"),a=a&&`${r?r+"//":""}${a}`,a}return e}function Pm(e){return e=xv(e),["devext.arcgis.com","qaext.arcgis.com","www.arcgis.com"].includes(e)}function Dm(){if(window.jimuConfig.isOutOfExb)return"./resources";{let e=null;e=window.jimuConfig.isBuilder?jy().getState().appStateInBuilder:jy().getState();const t=e&&e.appId;return window.jimuConfig.isDevEdition?window.location.origin+"/apps/"+t+"/resources":Am(jy().getState().portalUrl)+"/sharing/rest/content/items/"+t+"/resources"}}function Rm(e,t){const r=Dm(),n=new RegExp("^"+r),o=new RegExp("^\\$\\{appResourceUrl\\}+(.)");return Hg(e,{matcher:function(e){return o.test(e)||n.test(e)},handler:function(e){let n=null;return n=t?e+"?token="+t:e,n=n.replace("${appResourceUrl}",r),n}})}function _m(e){const t=Dm(),r=new RegExp("^"+t);return Hg(e,{matcher:function(e){return r.test(e)},handler:function(e){let r=e.split("?")[0];return r=r.replace(t,"${appResourceUrl}"),r}}),e}function km(e){const t={};return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?(t.isRemote=!0,t.folderUrl=e):(t.isRemote=!1,t.folderUrl=`${window.location.protocol}//${window.location.host}${zv()}${e}`),t}function Lm(e){const t=Ae(e).asMutable({deep:!0});return void 0===e.properties&&(t.properties={}),["hasVersionManager","supportInlineEditing","supportRepeat","hasBuilderSupportModule","hasEmbeddedLayout","lockChildren","flipIcon","coverLayoutBackground","canCrossLayoutBoundary","needActiveState","canConsumeDataAction","watchViewportVisibility","isWidgetController"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!1)})),["hasMainClass","hasConfig","hasSettingPage","hasConfigInSettingPage","passDataSourceToChildren","deactivateOtherWidgets","supportAutoSize"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!0)})),t}function Nm(e,t){t.icon=t.icon?t.icon:t.context.folderUrl+"icon.svg",t.label=t.label?t.label:Fm(e,"widget",t.manifest?t.manifest.i18nMessages._widgetLabel||t.manifest.label||t.manifest.name:"")}function Mm(e){e.widgets&&Object.keys(e.widgets).forEach((t=>{const r=e.widgets[t];r.layouts&&Object.keys(r.layouts).forEach((t=>{Object.keys(r.layouts[t]).forEach((n=>{var o;const i=r.layouts[t][n];if(e.layouts[i]&&!e.layouts[i].label){const n=null===(o=r.manifest.layouts)||void 0===o?void 0:o.find((e=>e.name===t));e.layouts[i].label=r.manifest.i18nMessages[`_layout_${t}_label`]||(null==n?void 0:n.label)||(null==n?void 0:n.name)}}))}))}))}function jm(e){return"y"===e.charAt(e.length-1)?`${e.slice(0,e.length-1)}ies`:`${e}s`}function Um(e,t){let r=0;const n=jm(t);return e[n]?(Object.keys(e[n]).forEach((e=>{const n=e.substring(`${t}_`.length,e.length);/^\d+$/.test(n)&&(r=Math.max(r,parseInt(n)))})),`${t}_${r+1}`):`${t}_${r+1}`}function Fm(e,t,r){const n=jm(t);let[o,i]=Bm(r);return e[n]?(Object.keys(e[n]).filter((t=>{const r=e[n][t].label;return r&&r.startsWith(o)})).forEach((t=>{let r=Bm(e[n][t].label)[1];r=null===r?1:r,i=Math.max(i,r)})),null===i?o:`${o} ${i+1}`):null===i?r:`${r} ${i+1}`}function Bm(e){if(!e)return[e,null];const t=e.lastIndexOf(" "),r=e.substring(t+1);let n,o;return/^\d+$/.test(r)?(n=e.substring(0,t),o=parseInt(r)):(n=e,o=null),[n,o]}function $m(e){if(!(null==e?void 0:e.widgets))return[];const t=[];return Object.keys(e.widgets).forEach((r=>{t.push(e.widgets[r])})),t}function Gm(e,t,r){let n=[];return e.messageConfigs&&Object.entries(e.messageConfigs).forEach((([e,o])=>{n=n.concat(o.actions&&o.actions.filter((e=>e.widgetId===t&&e.actionName===r)))})),n}function Wm(e,t,r){return e.sections&&Object.keys(e.sections).some((n=>{const o=e.sections[n].views;return(null==o?void 0:o.includes(t))&&(null==o?void 0:o.includes(r))}))}function Vm(e){(null==e?void 0:e.layouts)&&Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];return r.content&&Object.keys(r.content).forEach((e=>{isNaN(parseInt(e))?console.error("Layout item MUST be integer string"):r.content[e].id=e})),r.id=t,r}))}function Hm(e,t){var r,n,o,i;const a=e.appConfig,s=t,l=Object.keys(a.widgets||{}).filter((e=>!s.widgets[e]));if(e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.without.apply(e.widgetsRuntimeInfo,l)).set("widgetsState",e.widgetsState.without.apply(e.widgetsState,l)).set("widgetsMutableStateVersion",e.widgetsMutableStateVersion.without.apply(e.widgetsMutableStateVersion,l)),Object.keys(s.widgets||{}).filter((e=>!a.widgets[e])).forEach((t=>{const r=s.widgets[t];e.widgetsClassStatus[r.uri]&&(e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0))})),Object.keys(a.views||{}).filter((e=>!s.views[e])).forEach((t=>{var r,n,o,i,s,l;const u=Object.keys(a.sections||{}).find((e=>a.sections[e].views.includes(t)));(null===(r=e.appRuntimeInfo.sectionNavInfos)||void 0===r?void 0:r[u])&&((null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[u].currentViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",u,"currentViewId"],null)),(null===(o=e.appRuntimeInfo.sectionNavInfos)||void 0===o?void 0:o[u].previousViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",u,"previousViewId"],null)),(null===(s=null===(i=e.appRuntimeInfo.sectionNavInfos)||void 0===i?void 0:i[u].visibleViews)||void 0===s?void 0:s.find((e=>e===t)))&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",u,"visibleViews"],null===(l=e.appRuntimeInfo.sectionNavInfos)||void 0===l?void 0:l[u].visibleViews.filter((e=>e!==t)))))})),Object.keys(a.sections||{}).filter((e=>!s.sections[e])).forEach((t=>{var r;(null===(r=e.appRuntimeInfo.sectionNavInfos)||void 0===r?void 0:r[t])&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos"],e.appRuntimeInfo.sectionNavInfos.without(t)))})),e.appRuntimeInfo.currentPageId&&!s.pages[e.appRuntimeInfo.currentPageId]){const t=Object.keys(s.pages).find((e=>s.pages[e].isDefault));e=e.setIn(["appRuntimeInfo","currentPageId"],t)}if(e.appRuntimeInfo.currentDialogId&&!s.dialogs[e.appRuntimeInfo.currentDialogId]&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],null)),e.appRuntimeInfo.clipboard){const{layoutId:t,layoutItemId:o}=e.appRuntimeInfo.clipboard;(null===(n=null===(r=s.layouts[t])||void 0===r?void 0:r.content)||void 0===n?void 0:n[o])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("clipboard")))}if(e.appRuntimeInfo.selection){const{layoutId:t,layoutItemId:r}=e.appRuntimeInfo.selection;(null===(i=null===(o=s.layouts[t])||void 0===o?void 0:o.content)||void 0===i?void 0:i[r])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("selection")))}return e=e.set("appConfig",s)}function zm(e,t,r){var n;return null!==(n=e[t])&&void 0!==n?n:e[r]}function qm(e,t){var r,n;const o=e.layouts[t],i=e=>Object.keys(null!=e?e:{}).find((r=>e[r]===t));if(null==o?void 0:o.parent){const{id:t,type:a}=o.parent;switch(a){case Kg.Dialog:return i(e.dialogs[t].layout);case Kg.Footer:return i(e.footer.layout);case Kg.Header:return i(e.header.layout);case Kg.Page:return i(e.pages[t].layout);case Kg.Screen:return null!==(r=i(e.screens[t].main.layout))&&void 0!==r?r:i(null===(n=e.screens[t].panel)||void 0===n?void 0:n.layout);case Kg.View:return i(e.views[t].layout);case Kg.Widget:{const r=e.widgets[t].layouts;let n=null;return Object.keys(r).some((e=>(n=i(r[e]),!!n))),n}}}return null}function Ym(e){var t;return(null===(t=function(e){var t,r;if(!e)return null;const n=(null===(t=null===window||void 0===window?void 0:window.jimuConfig)||void 0===t?void 0:t.isBuilder)?jy().getState().appStateInBuilder:jy().getState(),o=null===(r=null==n?void 0:n.appConfig)||void 0===r?void 0:r.widgets;return o&&Object.values(o).find((t=>{var r;return null===(r=null==t?void 0:t.outputDataSources)||void 0===r?void 0:r.some((t=>t===e.mainDataSourceId))}))||null}(e))||void 0===t?void 0:t.id)||null}function Jm(){var e,t;const r=(null===(e=null===window||void 0===window?void 0:window.jimuConfig)||void 0===e?void 0:e.isBuilder)?jy().getState().appStateInBuilder:jy().getState(),n=((null===(t=null==r?void 0:r.appConfig)||void 0===t?void 0:t.connections)||[]).map((e=>{const t=`${e.portalUrl}/sharing/rest/oauth2/token?client_id=${e.clientId}&client_secret=invalid_secret&grant_type=client_credentials`,r=Object.assign({},e);return fetch(t).then((e=>e.json())).then((e=>{var t;return"invalid_client_id"===(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error)&&(r.clientId=null),r})).catch((e=>(r.clientId=null,r)))}));Promise.allSettled(n).then((e=>{let t=null==r?void 0:r.appConfig;const n=[];e.forEach((e=>{var t;(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.clientId)&&n.push(e.value)})),t=t.set("connections",n),jy().dispatch(Eb(t))}))}function Km(e){var t;const r=window.jimuConfig.isBuilder?jy().getState().appStateInBuilder:jy().getState();return((null===(t=null==r?void 0:r.appConfig)||void 0===t?void 0:t.connections)||[]).find((t=>"portal"===t.type&&fm(e,null==t?void 0:t.portalUrl)))}function Xm(e,t,r){const n=t||r;(t||r)&&(function(e,t,r,n){var o;const i=r||n,a=r?"WEB_MAP":"WEB_SCENE";Object.values(e.dataSources).find((e=>e.itemId===i))||(e.dataSources[t]={type:a,itemId:i,id:t,portalUrl:null===(o=e.attributes)||void 0===o?void 0:o.portalUrl})}(e,n,t,r),function(e,t){"blankfullscreen"===e.template&&function(e,t){e.widgets.widget_1={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConfig:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_1",layouts:{MapFixedLayout:{LARGE:"layout_1"}},useDataSources:[{dataSourceId:t,mainDataSourceId:t}]},e.layouts.layout_0={type:"FIXED",content:{0:{type:"WIDGET",bbox:{left:"50%",right:"58.6%",top:"50%",bottom:"38.9%",width:"31.3%",height:"50.0%"},widgetId:"widget_1",setting:{autoProps:{left:!1,right:!0,top:!1,bottom:!0},hCenter:!0,vCenter:!0,heightMode:"fixed",aspectRatio:1}}},order:["0"]},e.layouts.layout_1={type:"FIXED"}}(e,t),"blankscrollable"===e.template&&function(e,t){e.widgets.widget_1={uri:"widgets/layout/row/",version:window.jimuConfig.exbVersion,config:{space:10,style:{padding:{number:[10],unit:"px"}}},id:"widget_1",layouts:{DEFAULT:{LARGE:"layout_1"}}},e.widgets.widget_2={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConfig:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_2",layouts:{MapFixedLayout:{LARGE:"layout_2"}},useDataSources:[{dataSourceId:t,mainDataSourceId:t}]},e.layouts.layout_0={type:"FLOW",content:{0:{type:"WIDGET",bbox:{left:"80px",right:"480px",top:"4px",bottom:"404px",width:"400px",height:420},widgetId:"widget_1",setting:{heightMode:"fixed"}}},order:["0"]},e.layouts.layout_1={type:"ROW",order:["0"],content:{0:{type:"WIDGET",bbox:{left:"0px",width:"4px",height:"400px"},widgetId:"widget_2",setting:{heightMode:"fit"}}}},e.layouts.layout_2={type:"FIXED"}}(e,t),"blankfullscreengrid"===e.template&&function(e,t){e.widgets.widget_1={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConfig:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_1",layouts:{MapFixedLayout:{LARGE:"layout_1"}}},e.layouts.layout_0={type:"GRID",content:{0:{type:"WIDGET",widgetId:"widget_1",bbox:{width:100},gridType:Xg.Plain}},order:["0"],setting:{rootItem:"0"}},e.layouts.layout_1={type:"FIXED"}}(e)}(e,n),function(e,t){const r=Object.values(e.widgets).find((e=>"widgets/arcgis/arcgis-map/"===e.uri));r&&(r.useDataSources=[{dataSourceId:t,mainDataSourceId:t}],r.config&&(r.config.initialMapState=null,r.config.isUseCustomMapState=!1))}(e,n))}function Qm(e,t){return Zm(e.dataSources,t)}function Zm(e,t){var r,n;if(!t)return null;let o;const i=Object.values(e||{});for(let e=0;e<i.length&&(o=(null===(r=i[e])||void 0===r?void 0:r.id)===t?i[e]:Zm(null===(n=i[e])||void 0===n?void 0:n.childDataSourceJsons,t),!o);e++);return o}function ev(){var e,t,r;return window.jimuConfig.isBuilder?null===(t=null===(e=jy().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig:null===(r=jy().getState())||void 0===r?void 0:r.appConfig}function tv(e,t){const r=window._jimuHistory;try{t?r.browserHistory.replace(e):r.browserHistory.push(e)}catch(e){console.error("Failed to change browser history",e)}}function rv(e){var t,r;const n=ev();let o=!1;if(null==n?void 0:n.widgets){const r=n.widgets.getIn([e]);(null===(t=null==r?void 0:r.manifest.urlParameters)||void 0===t?void 0:t.length)>0&&(o=!0)}if(!o)return!1;const i=null===(r=n.urlParams)||void 0===r?void 0:r.getIn(["widgets",e]);return!!i&&!!i.isEnable}function nv(e,t){var r;let n=!0;const o=null===(r=ev().urlParams)||void 0===r?void 0:r.getIn(["widgets",e]);return n=null==o?void 0:o.getIn(["params",t]),void 0===n&&(n=!0),n}function ov(e){return/^widget_/.test(e)}function iv(e){let t=Object.keys(e);return t=t.filter((e=>!rv(e))),e.without(t)}function av(e){for(const t of Object.keys(e)){let r=e[t],n=r&&Object.keys(r);n=null==n?void 0:n.filter((e=>!nv(t,e))),r=null==r?void 0:r.without(n),r&&(e=e.setIn([t],r))}return e}function sv(e){let t={};t=pt.parse(e,{decode:!1});for(const e of Object.keys(t)){let r;e===nu.Data_s?(r=cv(t[e],nu.Data_s),t=Object.assign(t,r)):ov(e)&&(r=cv(t[e],nu.Widgets),t[e]=r)}return t}function lv(e){let t=e;for(const e of Object.keys(t))if(e===nu.Data_s){const r=t[e];t=t.setIn([e],r)}else if(ov(e)){const r=dv(t[e]);t=t.setIn([e],r)}let r=pt.stringify(t,{skipNull:!0,skipEmptyString:!0,encode:!1});return r&&(r="#"+r),r}function uv(e){return cv(e,nu.Widgets)}function cv(e,t,r){"object"==typeof e&&(null==e?void 0:e.length)&&(null==e?void 0:e.length)>0&&(e=e[0]);let n=Ae({});if(t===nu.Data_s)return n.set(nu.Data_s,decodeURIComponent(e));const{compatibleMode:o=!0}=null!=r?r:{};o&&e&&(e=gv(e));try{const t=null==e?void 0:e.split(",");null==t||t.forEach((e=>{const t=e.split(":"),r=t[0];let o=null;try{o=decodeURIComponent(t[1])}catch(e){console.warn(e)}n=n.set(r,o)}))}catch(e){console.warn(e)}return n}function dv(e){let t="";try{let r=!0;for(const n of Object.keys(e))r||(t+=","),t+=n+":"+e[n],r=!1}catch(e){console.warn(e)}return t}function pv(e){if(e)for(const t of Object.keys(e)){const r=e[t];if(t===nu.Data_s){const n=encodeURIComponent(r);e=e.setIn([t],n)}else if(ov(t))for(const n of Object.keys(r)){const o=encodeURIComponent(r[n]);e=e.setIn([t,n],o)}}return e}function fv(e){if(e)for(const t of Object.keys(e)){const r=e[t];e=e.setIn([t],encodeURIComponent(r))}return e}function hv(){var e;const t=null===(e=ev().urlParams)||void 0===e?void 0:e.getIn(["general","dataSelection","isEnable"]);return!(void 0!==t&&!t)}function gv(e){let t=e;return t=function(e){let t=e;return/^dataSource_[^%]*%3A/.test(e)&&(t=e.replace(/%3A/g,":")),t}(t),t}function mv(e){let t=e||"/",r="",n="";const o=t.indexOf("#");-1!==o&&(n=t.substr(o),t=t.substr(0,o));const i=t.indexOf("?");return-1!==i&&(r=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===r?"":r,hash:"#"===n?"":n}}function vv(e){return/(^http:)|(^https:)|(^\/\/)|(^mailto:)|(^tel:)|(^data:)|(^sms:)|(^ftp:)/.test(e)}function yv(e,t=["https","mailto","tel","sms","ftp","data"]){if(!e)return"valid";const r=null==t?void 0:t.find((t=>"sms"===t||"tel"===t||"mailto"===t||"data"===t?new RegExp(`^${t}:`,"i").test(e):new RegExp(`^(${t}:)?//`,"i").test(e)));if(!r)return"schemeError";if("sms"===r||"tel"===r){if(!/\d+/.test(e))return"invalidUrlError"}else if("mailto"===r){if(!e.includes("@"))return"invalidUrlError"}else if("data"===r){if(!e.includes(","))return"invalidUrlError"}else if("https"===r&&!e.includes(".")&&!e.toLowerCase().includes("localhost"))return"invalidUrlError";return"valid"}function Sv(e){if(/\/$/.test(e))return e;if(!([".js",".css",".scss",".html"].filter((t=>new RegExp(`${t}$`).test(e))).length>0))return e;const t=e.split("/");return t.pop(),t.join("/")}function bv(e,t){let r=t;const n=mv(t);e.hash&&!n.hash&&(r+=e.hash);const o=mv(r);return"/"===o.pathname||""===o.pathname?(o.pathname=e.pathname,o):"/"===o.pathname.charAt(0)?o:"."===o.pathname.charAt(0)?(o.pathname=e.pathname+"/"+o.pathname.substr(2),o):(o.pathname=e.pathname+"/"+o.pathname,o)}function wv(e){const t=e.pathname,r=e.search,n=e.hash;let o=t||"/";return r&&"?"!==r&&(o+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(o+="#"===n.charAt(0)?n:"#"+n),o}function Iv(e,t,r){if(!r&&""!==r)return e;const n=new URL(e),o=new URLSearchParams(n.search);return o.append(t,r),n.search=o.toString(),n.href}function Ev(e){let t;return 0===(e=e.toLowerCase()).indexOf("https://")?t="https:":0===e.indexOf("http://")&&(t="http:"),t}function Cv(e,t){return Ev(e)?e.replace(/^https?:\/\//,`${t}//`):`${t}//${e}`}function Ov(e){return e.replace(/^https?:\/\//,"")}function xv(e){return 0===(e=(e=(e||"").trim()).replace(/^(http(s?):?)\/\//gi,"")).indexOf("//")&&(e=e.slice(2)),e.split("/")[0].toLocaleLowerCase()}function Tv(e){return(e=(e||"").trim()).split("?")[0]}function Av(e,t,r){const n=(e=(e||"").trim()).indexOf("#");let o="";return n>-1&&(o=e.substring(n),e=e.substring(0,n)),e.includes("?")?e+=`&${t}=${r}${o}`:e+=`?${t}=${r}${o}`,e}function Pv(e){return e?new URL(e).href:""}function Dv(e,t){const r={},n=e.data_id&&Rv(e.data_id,(e=>e.split("+")))||[],o=t.data_s&&function(e){const t=_v(e),r={};return t.forEach((e=>{const{type:t,dsIds:n,value:o}=e;n.forEach((e=>{r[e]||(r[e]={widgetId:"_selectOptionsInUrl"}),t===ou.Id?r[e].ids=o.split("+"):t!==ou.Where&&t!==ou.Geometry||(r[e].queryParams||(r[e].queryParams={}),r[e].queryParams[t]=t===ou.Where?o:JSON.parse(o))}))})),Object.keys(r).map((e=>({dsId:e,data:r[e]})))}(t.data_s)||[],i=e.data_filter&&Rv(e.data_filter,(e=>({where:e})))||[],a=e.data_version&&Rv(e.data_version,(e=>e))||[];return n.concat(o,i,a).forEach((e=>{r[e.dsId]={}})),n.forEach((e=>{r[e.dsId].selectionType="id",r[e.dsId].selection=e.data})),o.forEach((e=>{r[e.dsId].selectionType="select_options",r[e.dsId].selection=e.data})),i.forEach((e=>{r[e.dsId].query=e.data})),a.forEach((e=>{r[e.dsId].gdbVersion=e.data})),r}function Rv(e,t){const r=uv(e),n=[],o=r.asMutable({deep:!0});return Object.keys(o).forEach((e=>{const r={dsId:e,data:t(o[e])};n.push(r)})),n}function _v(e){if(!e)return[];const t=[];return e.split(new RegExp(`,(?=${Object.values(ou).join("|")})`)).forEach((e=>{var r;const{type:n,dsIds:o,value:i}=(null===(r=new RegExp(`(?<type>${Object.values(ou).join("|")}):(?<dsIds>[^:]*):(?<value>.*)`).exec(e))||void 0===r?void 0:r.groups)||{};if(!n||!o||!i)return;const a=o.split("~");t.push({type:n,dsIds:a,value:i})})),t}function kv(e,t){if(!e.views)return{};const r=e.views.split(",").map((e=>jv(e,t))),n={};return Object.keys(t.sections||{}).forEach((e=>{var o;const i=null===(o=t.sections[e].views)||void 0===o?void 0:o.find((e=>r.includes(e)));i&&(n[e]={currentViewId:i})})),n}function Lv(e){if(e||(e=window.location),window.jimuConfig.useStructuralUrl)return Nv(e.pathname,jy().getState().appConfig);{const t=pt.parse(e.search);return{appId:t.id,pageId:Mv(t.page,jy().getState().appConfig)}}}function Nv(e,t){const r=e.substr(window.jimuConfig.rootPath.length),n={pageId:null,appId:null},o=r.split("/").filter((e=>e)).map((e=>decodeURIComponent(e)));return""===r||(1===o.length?r.includes(".")||"page"===o[0]||(n.appId=o[0]):2===o.length?/^page\/page\//.test(r)?n.pageId="page":/^page/.test(r)?n.pageId=o[1]:n.appId=o[0]:o.length>=3?(n.appId=o[0],n.pageId=o[2]):console.log("URL pattern is not correct.",e),n.pageId&&(n.pageId=Mv(n.pageId,t))),n}function Mv(e,t){if(!t||!e)return e;const r=t.pages;if(!r||r[e])return e;{const n=Object.keys(r).find((t=>Bv(r[t].label)===e));if(n)return n;{const r=Fv(e,"pages",t);return null!=r?r:e}}}function jv(e,t){if(!t||!e)return e;const r=t.views;if(!r||r[e])return e;{const n=Object.keys(r).find((t=>Gv(r[t].label)===e));if(n)return n;{const r=Fv(e,"views",t);return null!=r?r:e}}}function Uv(e,t){if(!t||!e)return e;const r=t.dialogs;if(!r||r[e])return e;{const n=Object.keys(r).find((t=>$v(r[t].label)===e));if(n)return n;{const r=Fv(e,"dialogs",t);return null!=r?r:e}}}function Fv(e,t,r){if(!r.historyLabels)return null;const n=r.historyLabels[t];return n?Object.keys(n).find((r=>!!n[r].find((r=>"views"===t?Gv(r)===e:"dialogs"===t?$v(r)===e:Bv(r)===e)))):null}function Bv(e){return null==e?void 0:e.replace(/\s/g,"-").replace(/\./g,"_")}function $v(e){return null==e?void 0:e.replace(/\s/g,"-")}function Gv(e){return null==e?void 0:e.replace(/\s/g,"-").replace(/,/g,"-")}function Wv(e){var t,r,n;let o=window.jimuConfig.isInBuilder?e:Bv(null!==(n=null===(r=null===(t=jy().getState().appConfig)||void 0===t?void 0:t.pages[e])||void 0===r?void 0:r.label)&&void 0!==n?n:e);if(window.jimuConfig.useStructuralUrl){o=encodeURIComponent(o);const e=Nv(window.location.pathname,jy().getState().appConfig);let t;return t=e.appId?`${window.jimuConfig.rootPath}${e.appId}/page/${o}/`:`${window.jimuConfig.rootPath}page/${o}/`,{path:t,qo:null}}return{path:window.jimuConfig.rootPath,qo:{page:o}}}function Vv(e,t,r){var n;const o=jy().getState().appConfig;if((null===(n=o.dialogs[e])||void 0===n?void 0:n.mode)===rm.Fixed){const r=window.jimuConfig.isInBuilder?e:$v(o.dialogs[e].label);t=t?t.set("dlg",r):{dlg:r}}return wv(bv(r,"?"+pt.stringify(t)))}function Hv(e,t,r=window.location,n){e===Fd&&(e=jy().getState().appRuntimeInfo.currentPageId);const o=Wv(e);let i,a;return i=t&&o.qo?Object.assign({},t,o.qo):t||o.qo,a=i&&!Ad(i,{})?`${o.path}?${pt.stringify(i)}`:o.path,r&&r.hash&&(a=`${a}${r.hash}`),n&&(a=`${a}#${n}`),a}function zv(){let e;return e=window.jimuConfig.isOutOfExb||window.jimuConfig.rootPath===window.jimuConfig.mountPath?window.jimuConfig.rootPath:window.jimuConfig.rootPath+"../",window.jimuConfig.buildNumber?e+"cdn/"+window.jimuConfig.buildNumber+"/":e}function qv(){return`${window.location.protocol}//${window.location.host}${zv()}`}function Yv(e,t,r=window.location,n=!1){var o;if("string"==typeof e)return vv(e)?e:/^www./.test(e)?`//${e}`:wv(bv(r,e));if(!e.linkType)return wv(e);{const i=e.linkType,a=e;let s,l=t;const u=jy().getState().appConfig;switch(i){case Ml.Page:case Ml.Screen:t=n?t:null==t?void 0:t.without("dlg");const e=i===Ml.Screen&&a.value;return s=i===Ml.Page?a.value:Fd,Hv(s,t,r,e);case Ml.Block:return function(e,t,r){return t=t?t.set("block_id",e):{block_id:e},wv(bv(r,"?"+pt.stringify(t)))}(a.value,l,r);case Ml.Dialog:return Vv(a.value,l,r);case Ml.View:const c=a.value.split(",")[0],d=a.value.split(",").slice(1).filter((e=>{var t;return null===(t=u.views)||void 0===t?void 0:t[e]}));if(null==l?void 0:l.views){let e=l.views.split(",").map((e=>jv(e,u)));d.forEach((t=>{e=e.filter((e=>!Wm(u,t,e))),e.push(t)}));const t=window.jimuConfig.isInBuilder?e:e.map((e=>{var t,r;return Gv((null===(r=null===(t=u.views)||void 0===t?void 0:t[e])||void 0===r?void 0:r.label)||e)}));l=l.set("views",t.join(","))}else{const e=window.jimuConfig.isInBuilder?d:d.map((e=>{var t,r;return Gv((null===(r=null===(t=u.views)||void 0===t?void 0:t[e])||void 0===r?void 0:r.label)||e)}));e.length>0&&(l=l?l.set("views",e.join(",")):Ae({views:e.join(",")}))}return(null===(o=jy().getState().appConfig.dialogs)||void 0===o?void 0:o[c])?Vv(c,l,r):Hv(c,l);case Ml.WebAddress:const p=a.value;if(vv(p))return p;if(/^www./.test(p))return`//${p}`;case Ml.None:case Ml.PageTop:return null;case Ml.PrintPreview:return l=l?l.set("print_preview",!0):{print_preview:String(!0)},wv(bv(r,"?"+pt.stringify(l)));default:console.error("Unknown type:",i)}}}function Jv(e){const{appId:t,isTemplate:r,isArcGisOnlineTemplate:n,isPortalRequest:o,isDraft:i,defaultTemplateName:a}=e,s=jy().getState().portalUrl,l=r?"template":"experience",u=window.jimuConfig.isDevEdition&&o,c=hm(s),d=u&&c;let p,f="";if(i&&(f=window.jimuConfig.useStructuralUrl?"?draft=true":"&draft=true"),p=window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${l}/${t}/${f}`:`${window.jimuConfig.mountPath}${l}/?id=${t}${f}`,(n||d)&&(p=`${Kv()}/${l}/${t}/`),u&&!d&&(p=`${s}/apps/experiencebuilder/${l}?id=${t}`),a){let e;e=window.jimuConfig.buildNumber?window.jimuConfig.mountPath+"cdn/"+window.jimuConfig.buildNumber+"/":window.jimuConfig.mountPath,p=`${window.jimuConfig.mountPath}template/?config=${e}templates/app/${a}/config.json`}return p}function Kv(){let e;const t=jy().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://experiencedev.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://experienceqa.arcgis.com":"https://experience.arcgis.com",e}function Xv(){let e;const t=jy().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://devext.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://qaext.arcgis.com":"https://www.arcgis.com",e}function Qv(){let e;const t=jy().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"VxZfyyZuOsDEPxG8":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"iWreOEDHiYP7Bqst":"oC086ufSSQ6Avnw2",e}!function(e){e.Page="pages",e.Dialog="dialogs",e.Header="header",e.Footer="footer",e.View="views",e.ScreenPanel="screens_panel",e.ScreenMain="screens_main"}(Jg||(Jg={})),function(e){e.Page="pages",e.View="view",e.Widget="widget",e.Screen="screen",e.Dialog="dialog",e.Header="header",e.Footer="footer"}(Kg||(Kg={})),function(e){e[e.Row=0]="Row",e[e.Column=1]="Column",e[e.Tab=2]="Tab",e[e.Plain=3]="Plain"}(Xg||(Xg={})),function(e){e.Fade="FADE",e.Cover="COVER",e.Push="PUSH"}(Qg||(Qg={})),function(e){e.Top="TOP",e.Upper="UPPER",e.Lower="LOWER",e.Bottom="BOTTOM"}(Zg||(Zg={})),function(e){e.Normal="NORMAL",e.Folder="FOLDER",e.Link="LINK"}(em||(em={})),function(e){e.FitWindow="FIT_WINDOW",e.AutoScroll="AUTO_SCROLL"}(tm||(tm={})),function(e){e.Fixed="FIXED",e.Anchored="ANCHORED"}(rm||(rm={})),function(e){e.Center="CENTER",e.Left="LEFT",e.Right="RIGHT",e.Top="TOP",e.Bottom="BOTTOM"}(nm||(nm={})),function(e){e.NoButton="NO_BUTTON",e.ButtonInline="BUTTON_INLINE",e.ButtonBlock="BUTTON_BLOCK"}(om||(om={})),function(e){e.TopLeft="TOP_LEFT",e.TopRight="TOP_RIGHT",e.BottomLeft="BOTTOM_LEFT",e.BottomRight="BOTTOM_RIGHT",e.TopCenter="TOP_CENTER",e.BottomCenter="BOTTOM_CENTER",e.MiddleLeft="MIDDLE_LEFT",e.MiddleRight="MIDDLE_RIGHT",e.MiddleCenter="MIDDLE_CENTER"}(im||(im={})),function(e){e.GeoEnrichment="GEOENRICH",e.Geometry="GEOMETRY",e.GeoCoding="GEOCODING",e.Printing="PRINTING",e.Routing="ROUTING",e.GPServer="GPSERVER",e.GPTask="GPTask"}(am||(am={})),function(e){e.Device="DEVICE",e.Specific="SPECIFIC",e.Data="DATA"}(sm||(sm={}));var Zv,ey=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function ty(e){const t=window.SystemJS.get(oy(e));return t?t.__useDefault?t.default:t:null}function ry(e,t){return ey(this,void 0,void 0,(function*(){!vv(e)||/\.(js|css)$/.test(e)||/\/$/.test(e)||(e=`${e}.js`);const r=(window._cachedModules||{})[e],n=!!t&&!!r&&t.every((e=>e in r));return Promise.resolve(n?r:window.SystemJS.import(e)).then((e=>e.__useDefault?e.default:e)).catch((e=>{console.error("Load module error.",e)}))}))}function ny(e){return ey(this,void 0,void 0,(function*(){return yield Promise.all(e.map((e=>ey(this,void 0,void 0,(function*(){return yield ry(e)})))))}))}function oy(e){return window.SystemJS.resolve(e)}function iy(e){const t=oy(e);return/^file:/.test(t)?t:t.substring(`${window.location.protocol}//${window.location.host}`.length,t.length)}function ay(){return ty("jimu-for-builder")}function sy(e){window.SystemJS.delete(oy(e))}!function(e){e.AppConfigProcessor="APP_CONFIG_PROCESSOR",e.WidgetClassWrapper="WIDGET_CLASS_WRAPPER",e.AppConfigService="APP_CONFIG_SERVICE",e.ReduxStore="REDUX_STORE",e.DependencyDefine="DEPENDENCY_DEFINE",e.DataSourceFactoryUri="DATA_SOURCE_FACTORY_URI",e.ContextTool="CONTEXT_TOOL",e.AppConfigOperations="APP_CONFIG_OPERATIONS",e.LayoutTransformer="LAYOUT_TRANSFORMER"}(Zv||(Zv={}));const ly=[Zv.ReduxStore,Zv.DataSourceFactoryUri,Zv.DependencyDefine,Zv.ContextTool,Zv.AppConfigOperations,Zv.LayoutTransformer],uy=[Zv.ContextTool,Zv.AppConfigOperations],cy=[Zv.ContextTool];class dy{}var py=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class fy{constructor(){this.extensions={},this.extensionClasses={}}static getInstance(){return fy.instance||(fy.instance=new fy,window._extensionManager=fy.instance),fy.instance}getExtensions(e){return this.extensions[e]||[]}getAllExtensions(){const e=[];return Object.keys(this.extensions).forEach((t=>{this.extensions[t].forEach((t=>{e.push(t)}))})),e}registerExtension(e){if(this.getExtensionById(e.extension.id))console.log(`Extension ${e.extension.id} has been registered.`);else{if(this.extensions[e.epName]){if(!ly.includes(e.epName))return;this.extensions[e.epName].push(e.extension),this.extensions[e.epName]=this.extensions[e.epName].sort(((e,t)=>e.index-t.index))}else this.extensions[e.epName]=[e.extension];if(cy.includes(e.epName)){const t={};Object.keys(e.extension).forEach((r=>{"string"!=typeof e.extension[r]&&"number"!=typeof e.extension[r]||(t[r]=e.extension[r])})),jy().dispatch(eI(e.epName,t))}e.epName===Zv.ReduxStore&&jy().dispatch(uw(e.extension.id))}}destryAllExtensions(){Object.keys(this.extensions).forEach((e=>{this.extensions[e].forEach((e=>{delete this.extensionClasses[e.name],e.destroy&&e.destroy()}))})),this.extensions={}}destryWidgetExtensions(e){Object.keys(this.extensions).forEach((t=>{this.extensions[t].forEach((t=>{t.widgetId===e&&(delete this.extensionClasses[t.name],t.destroy&&t.destroy())})),this.extensions[t]=this.extensions[t].filter((t=>t.widgetId!==e))}))}registerWidgetExtensions(e){return py(this,void 0,void 0,(function*(){const t=[];return e.manifest.extensions&&e.manifest.extensions.forEach((r=>{(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||!uy.includes(r.point))&&t.push(this.registerWidgetExtension(e,r))})),Promise.all(t)}))}registerWidgetExtension(e,t){return py(this,void 0,void 0,(function*(){if(this.extensions[t.point]){if(!ly.includes(t.point))return Promise.resolve();if(this.extensions[t.point].filter((r=>r.name===`${e.manifest.name}-${t.name}`&&r.widgetId===e.id)).length>0)return Promise.resolve()}return this.loadWidgetExtensionClass(e,t).then((r=>{const n=new r;n.name=`${e.manifest.name}-${t.name}`,n.widgetId=e.id,n.id=`${n.widgetId}-${t.name}`,n.label=e.manifest.i18nMessages[`_ext_${t.name}_label`]||t.label,this.registerExtension({epName:t.point,extension:n})})).catch((t=>(console.error("Register widget extension error.",e.label),Promise.resolve())))}))}loadWidgetExtensionClass(e,t){return py(this,void 0,void 0,(function*(){const r=`${e.manifest.name}-${t.name}`;if(this.extensionClasses[r])return yield this.extensionClasses[r];const n=e.uri+"dist/"+t.uri;return this.extensionClasses[r]=ry(n,["default"]).then((e=>e.default)),this.extensionClasses[r]}))}getExtensionById(e){const t=this.getAllExtensions();for(const r of t)if(r.id===e)return r}}function hy(e){return"string"==typeof e&&"no-color"!==e}function gy(e){if(null!=e)return Object.assign(Object.assign(Object.assign({},hy(e.background)&&{bg:e.background}),hy(e.text)&&{color:e.text}),hy(e.link)&&{link:e.link})}const my=e=>e===Ld,vy=e=>{let t=null;if(!e)return t;const r=e.header,n=e.body,o=e.button,i=e.logo,a=e.fonts,s=gy(r),l=gy(n),u=gy(o);return t={},s&&(t.header=s),l&&(t.body=l),u&&(t.button=u),i&&(t.logo=i),a&&(t.fonts=a),t},yy=e=>{let t=Ae({});if(!e)return t;const r=e.header,n=e.body,o=e.button,i=hy(null==o?void 0:o.bg)&&{primary:o.bg},a=hy(null==o?void 0:o.color)&&{variants:{primary:{default:{color:o.color}}}},s=hy(null==n?void 0:n.link)&&{color:null==n?void 0:n.link,hover:{color:null==n?void 0:n.link}};return i&&(t=t.set("colors",i)),r&&(t=t.set("header",r)),n&&(t=t.set("body",n)),a&&(t=t.set("components",{button:a})),s&&(t=t.set("link",s)),t};function Sy(e,t){var r,n,o,i,a,s,l,u;if(!e)return function(){const e={appConfig:null,portalUrl:null,portalSelf:null,widgetsRuntimeInfo:{},widgetsPreloadProps:{},widgetsClassStatus:{},dataSourcesPreloadData:{},appContext:{},appRuntimeInfo:{},isNetworkOffLine:null,browserSizeMode:null,appPath:window.location.pathname,appId:null,appInfo:{},appI18nMessages:{},queryObject:{},urlHashObject:{},dataSourcesInfo:{},jimuMapViewsInfo:{},mapWidgetsInfo:{},widgetsState:{},widgetsMutableStateVersion:{},token:null,user:null,overlays:[],userLocaleChanged:!1,hasPrivilege:!0,privilegeError:null,loadAppConfigError:null,portalsNeedToRegisterClinetId:[],noPermissionResourceChangedFlag:"",resourceSessions:{},extensionsInfo:{}};return Ae(e)}();if(t.type.includes("@@"))return e;switch(t.type){case bb.InitStoreExtensionState:return function(e,t){const r=fy.getInstance().getExtensionById(t.extensionId),n=r.getStoreKey().split(".");return e.getIn(n)||(e=e.setIn(n,r.getInitLocalState())),e}(e,t);case bb.AppConfigLoaded:return function(e,t){var r,n;const o=null===(n=null===(r=e.portalSelf)||void 0===r?void 0:r.portalProperties)||void 0===n?void 0:n.sharedTheme,i=by(Ae(t.appConfig),o,e.portalUrl)||t.appConfig;let a=e.set("appConfig",i);if(!a.appRuntimeInfo.currentPageId){const e=Object.keys(i.pages).find((e=>i.pages[e].isDefault));a=a.setIn(["appRuntimeInfo","currentPageId"],e)}return!a.appRuntimeInfo.currentDialogId&&a.queryObject.dlg&&(a=a.setIn(["appRuntimeInfo","currentDialogId"],Uv(a.queryObject.dlg,i))),a.appConfig.dataSources&&Object.keys(a.appConfig.dataSources).forEach((e=>{a=a.setIn(["dataSourcesInfo",e,"instanceStatus"],Hl.NotCreated)})),a}(e,t);case bb.LoadAppConfigFailed:return e.set("loadAppConfigError",t.error);case bb.SetPortalInfo:return t.portalInfo.portalUrl&&(e=e.set("portalUrl",t.portalInfo.portalUrl)),t.portalInfo.clientId&&(e=e.set("clientId",t.portalInfo.clientId)),void 0!==t.portalInfo.isWebTier&&(e=e.set("isWebTier",t.portalInfo.isWebTier)),e;case bb.SetPortalSelf:return function(e,t){var r;const n=null===(r=null==t?void 0:t.portalProperties)||void 0===r?void 0:r.sharedTheme,o=by(e.appConfig,n,e.portalUrl);let i=e.set("portalSelf",t);return o&&(i=i.set("appConfig",o)),i}(e,t.portalSelf);case bb.AppConfigChanged:return wy(e,t);case bb.AppPathChanged:return function(e,t){var r;e=e.set("appPath",t.path);let n=Nv(location.pathname,e.appConfig).pageId;return!n&&(null===(r=null==e?void 0:e.appConfig)||void 0===r?void 0:r.pages)&&(n=e.appConfig&&Object.keys(e.appConfig.pages).find((t=>e.appConfig.pages[t].isDefault))),n&&(e=Iy(e=e.setIn(["appRuntimeInfo","currentPageId"],n),n)),e}(e,t);case bb.AppInfoChanged:return e.set("appInfo",t.appInfo);case bb.AppContextInit:return e.set("appContext",t.appContext);case bb.AppIdChanged:return e.set("appId",t.appId);case bb.I18nMessagesLoaded:return function(e,t){return e.set("appI18nMessages",e.appI18nMessages.merge(t.messages))}(e,t);case bb.QueryObjectChanged:return function(e,t){var r,n,o,i,a;const s=function(e){var t,r,n,o,i,a,s;return(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId)&&((null===(n=null===(r=e.appConfig.dialogs)||void 0===r?void 0:r[e.appRuntimeInfo.currentDialogId])||void 0===n?void 0:n.isSplash)||(null===(i=null===(o=e.appConfig.dialogs)||void 0===o?void 0:o[e.appRuntimeInfo.currentDialogId])||void 0===i?void 0:i.mode)===rm.Anchored||(null===(s=null===(a=e.appConfig.pages)||void 0===a?void 0:a[e.appRuntimeInfo.currentPageId])||void 0===s?void 0:s.autoOpenDialogId)===e.appRuntimeInfo.currentDialogId)}(e=e.set("queryObject",Ae(t.query)));if(t.query.dlg){const a=Uv(t.query.dlg,e.appConfig);if(!s&&a!==(null===(r=e.appRuntimeInfo)||void 0===r?void 0:r.currentDialogId)&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],a)).appConfig){const t=null===(n=e.appConfig.dialogs)||void 0===n?void 0:n[a];let r=(e.appRuntimeInfo.dialogInfos||Ae({})).setIn([a,"canClose"],!(null==t?void 0:t.interactionType)||!(null==t?void 0:t.confirmBeforeClose)).setIn([a,"checked"],!1).setIn([a,"isClosed"],!1);if(window.jimuConfig.isInBuilder&&(null===(i=null===(o=e.appConfig.pages)||void 0===o?void 0:o[e.appRuntimeInfo.currentPageId])||void 0===i?void 0:i.autoOpenDialogId)===a){const n=e.appRuntimeInfo.currentPageId+"-"+a;r=r.setIn([n,"canClose"],!(null==t?void 0:t.interactionType)||!(null==t?void 0:t.confirmBeforeClose)).setIn([n,"checked"],!1).setIn([n,"isClosed"],!1)}e=e.setIn(["appRuntimeInfo","dialogInfos"],r)}}else s||(e=e.setIn(["appRuntimeInfo","currentDialogId"],null));if(t.query.views&&e.appConfig){const r=kv(t.query,e.appConfig);Object.keys(r).forEach((t=>{var n,o,i;if((null===(i=null===(o=null===(n=e.appRuntimeInfo)||void 0===n?void 0:n.sectionNavInfos)||void 0===o?void 0:o[t])||void 0===i?void 0:i.currentViewId)!==r[t].currentViewId){const n=Ay(e,t,r[t]);e=e.setIn(["appRuntimeInfo","sectionNavInfos",t],n)}}))}if(!window.jimuConfig.useStructuralUrl){let r=Mv(t.query.page,e.appConfig);!r&&(null===(a=null==e?void 0:e.appConfig)||void 0===a?void 0:a.pages)&&(r=e.appConfig&&Object.keys(e.appConfig.pages).find((t=>e.appConfig.pages[t].isDefault))),r&&r!==e.appRuntimeInfo.currentPageId&&(e=Iy(e=e.setIn(["appRuntimeInfo","currentPageId"],r),r))}return e}(e,t);case bb.UrlHashObjectChanged:return function(e,t){return e=e.set("urlHashObject",Ae(t.hash))}(e,t);case bb.SetAppInBuilder:return e.set("appContext",e.appContext.merge({isInBuilder:!0}));case bb.WidgetClassLoaded:return function(e,t){const r=e.appConfig.widgets||{},n=Object.keys(r).filter((e=>r[e].uri===t));return e=e.setIn(["widgetsClassStatus",t],!0),n.forEach((t=>{e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0)})),e}(e,t.widgetUri);case bb.WidgetConfigLoaded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config);case bb.WidgetUpgraded:return function(e,t,r){const n=e.appConfig.widgets[t];if(!n)return e;if(!r)return e.setIn(["appConfig","widgets",t,"version"],n.manifest.version);const o=r.widgetJson.set("version",r.widgetJson.manifest.version);return e=e.setIn(["appConfig","widgets",t],o),r.outputDataSourceJsons?(Object.keys(r.outputDataSourceJsons).forEach((t=>{const n=r.outputDataSourceJsons[t];e=e.setIn(["appConfig","dataSources",t],n)})),e=e.setIn(["appConfig","widgets",t,"outputDataSources"],Object.keys(r.outputDataSourceJsons))):e}(e,t.widgetId,t.upgradeInfo);case bb.OpenWidget:return Cy(e,t.widgetId,t.controllerWidgetId);case bb.OpenWidgets:return function(e,t,r){return t.forEach((t=>{e=Cy(e,t,r)})),e}(e,t.widgetIds,t.controllerWidgetId);case bb.CloseWidget:return Oy(e,t.widgetId);case bb.CloseWidgets:return function(e,t){return t.forEach((t=>{e=Oy(e,t)})),e}(e,t.widgetIds);case bb.ResetWidgetState:return xy(e,t.widgetId);case bb.ResetWidgetsState:return function(e,t){return t.forEach((t=>{e=xy(e,t)})),e}(e,t.widgetIds);case bb.ActivateWidget:return function(e,t){var r,n;const o=Object.keys(e.widgetsRuntimeInfo).filter((t=>e.widgetsRuntimeInfo[t].state===Nl.Active));return e.appConfig.widgets[t].manifest.properties.deactivateOtherWidgets&&o.forEach((t=>{e=e.setIn(["widgetsRuntimeInfo",t,"state"],Nl.Opened)})),(null===(n=null===(r=e.appConfig.widgets[t])||void 0===r?void 0:r.manifest)||void 0===n?void 0:n.properties.needActiveState)&&(e=e.setIn(["widgetsRuntimeInfo",t,"state"],Nl.Active)),e}(e,t.widgetId);case bb.SetWidgetIsInlineEditingState:return t.isInlineEditing?(Object.keys(e.widgetsRuntimeInfo).forEach((t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!0)):e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!1);case bb.SetWidgetPreloadProps:return e.setIn(["widgetsPreloadProps",t.widgetId],t.props);case bb.SetDataSourcePreloadData:return e.setIn(["dataSourcesPreloadData",t.dataSourceId],t.data);case bb.LayoutClassLoaded:return e.setIn(["isLayoutClassLoaded",t.layoutName],!0);case bb.DataSourceInstanceStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"instanceStatus"],t.status);case bb.DataSourceStatusChanged:return Ey(e,t.dataSourceId,"status",t.status,t.dataSourceManager);case bb.DataSourceCountStatusChanged:return Ey(e,t.dataSourceId,"countStatus",t.countStatus,t.dataSourceManager);case bb.DataSourceSaveStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"saveStatus"],t.saveStatus);case bb.DataSourceVersionAdded:const c=e.dataSourcesInfo[t.dataSourceId]&&e.dataSourcesInfo[t.dataSourceId].version?e.dataSourcesInfo[t.dataSourceId].version:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"version"],c+1);case bb.DataSourceSourceVersionAdded:const d=null!==(o=null===(n=null===(r=e.dataSourcesInfo)||void 0===r?void 0:r[t.dataSourceId])||void 0===n?void 0:n.sourceVersion)&&void 0!==o?o:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"sourceVersion"],d+1);case bb.ChangeDataSourceGDBVersion:return e.setIn(["dataSourcesInfo",t.dataSourceId,"gdbVersion"],t.gdbVersion);case bb.ClearDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.without(t.dataSourceId));case bb.UpdateDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.set(t.dataSourceId,t.dataSourceInfo));case bb.JimuMapViewAdded:case bb.JimuMapViewUpdated:return e.setIn(["jimuMapViewsInfo",t.jimuMapViewId],t.jimuMapViewInfo);case bb.JimuMapViewRemoved:let p=null;return p=e.jimuMapViewsInfo.without(t.jimuMapViewId),e.setIn(["jimuMapViewsInfo"],p);case bb.RequestAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],t.autoControlWidgetId);case bb.ReleaseAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],null);case bb.MapWidgetInfoAdded:case bb.MapWidgetInfoUpdated:return e.setIn(["mapWidgetsInfo",t.mapWidgetId],t.mapWidgetInfo);case bb.MapWidgetInfoRemoved:let f=null;return f=e.mapWidgetsInfo.without(t.mapWidgetId),e.setIn(["mapWidgetsInfo"],f);case bb.DataSourceSelectedIndexesChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],t.selectedIndexes).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],null).setIn(["dataSourcesInfo",t.dataSourceId,"selectOptions"],null);case bb.DataSourceSelectionChanged:const h=null===(i=t.selectOptions)||void 0===i?void 0:i.records;return t.selectOptions=t.selectOptions?Object.assign({},t.selectOptions):t.selectOptions,null===(a=t.selectOptions)||void 0===a||delete a.records,e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],(null==h?void 0:h.map((e=>e.getId())))||(null===(s=t.selectOptions)||void 0===s?void 0:s.ids)).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],null).setIn(["dataSourcesInfo",t.dataSourceId,"selectOptions"],(null===(l=t.selectOptions)||void 0===l?void 0:l.widgetId)?t.selectOptions:null);case bb.SetDataNeedRefresh:return e.setIn(["dataSourcesInfo",t.dataSourceId,"needRefresh"],t.refresh);case bb.UpdateWidgetQuery:return e.setIn(["dataSourcesInfo",t.dataSourceId,"widgetQueries",t.widgetId],t.query);case bb.WidgetStatePropChange:return function(e,t){const r=t.propKey.split(".");return e.setIn(["widgetsState",t.widgetId].concat(r),t.value)}(e,t);case bb.WidgetMutableStatePropChange:return function(e,t){var r,n;let o=null!==(n=null===(r=e.widgetsMutableStateVersion[t.widgetId])||void 0===r?void 0:r[t.propKey])&&void 0!==n?n:0;return e.setIn(["widgetsMutableStateVersion",t.widgetId,t.propKey],++o)}(e,t);case bb.SessionStart:return e.set("token",t.token);case bb.UserSignIn:return e.set("user",Ae(t.user));case bb.UserSignOut:return e.merge({token:null,user:null});case bb.BrowserSizeModeChanged:return e.set("browserSizeMode",t.browserSizeMode);case bb.NetworkStatusChanged:return e.set("isNetworkOffLine",t.isOffLine);case bb.CurrentPageChanged:return Iy(e=e.setIn(["appRuntimeInfo","currentPageId"],t.pageId),t.pageId);case bb.CurrentDialogChanged:return(e=e.setIn(["appRuntimeInfo","currentDialogId"],t.dialogId)).setIn(["appRuntimeInfo","currentDialogId"],t.dialogId);case bb.SelectionChanged:return Ty(e,t.selection);case bb.AppModeChanged:return e.setIn(["appRuntimeInfo","appMode"],t.mode).setIn(["appRuntimeInfo","animationPreview"],null).setIn(["appRuntimeInfo","hoverPreview"],null).setIn(["appRuntimeInfo","openedControllerInfo"],null);case bb.AppRuntimeInfoInit:return e.set("appRuntimeInfo",t.info);case bb.UpdateStoreState:return t.state;case bb.ThemeVariablesChanged:return e.set("theme",Ae(t.theme));case bb.ActivePagePartChanged:return e.setIn(["appRuntimeInfo","activePagePart"],t.part);case bb.OpenOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e:e.set("overlays",e.overlays.concat([t.id]));case bb.CloseOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e.set("overlays",e.overlays.filter((e=>e!==t.id))):e;case bb.ActiveOverlay:let g=null==e?void 0:e.overlays;return(null==g?void 0:g.includes(t.id))?(null==g?void 0:g.indexOf(t.id))===(null==g?void 0:g.length)-1?e:(g=g.filter((e=>e!==t.id)),g=g.concat([t.id]),e.set("overlays",g)):e;case bb.SetIsBusy:return e.setIn(["appRuntimeInfo","isBusy"],t.isBusy).setIn(["appRuntimeInfo","loadingType"],t.loadingType);case bb.ZoomScaleChanged:return e.setIn(["appRuntimeInfo","zoomScale"],t.zoomScale);case bb.LayoutChanged:return Ty(wy(e,{appConfig:t.appConfig,type:bb.AppConfigChanged}),t.selection);case bb.ClipboardChanged:return e.setIn(["appRuntimeInfo","clipboard"],t.item);case bb.SectionNavInfoChanged:{const r=Ay(e,t.sectionId,t.navInfo);return e.setIn(["appRuntimeInfo","sectionNavInfos",t.sectionId],r)}case bb.ScreenGroupNavInfoChanged:return e.setIn(["appRuntimeInfo","screenGroupNavInfos",t.screenGroupId],{activeIndex:t.activeIndex,scrollIntoView:t.scrollIntoView});case bb.DialogInfosChanged:return e.setIn(["appRuntimeInfo","dialogInfos"],t.dialogInfos);case bb.SetupAnimationPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("hoverPreview")).setIn(["appRuntimeInfo","animationPreview"],t.data);case bb.ClearAnimationPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("animationPreview"));case bb.SetupHoverPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("animationPreview")).setIn(["appRuntimeInfo","hoverPreview"],t.data);case bb.UserLocaleChanged:return e.set("userLocaleChanged",t.isChanged);case bb.HasPrivilegeChanged:return e.set("hasPrivilege",!1).set("privilegeError",t.error);case bb.AddToRegisterClientIdList:{let r=null==e?void 0:e.portalsNeedToRegisterClinetId;return(null==r?void 0:r.find((e=>e.portalUrl===t.portalUrl)))?e:(r=r.concat([{portalUrl:t.portalUrl,needToSignIn:t.needToSignIn,serviceUrl:t.serviceUrl}]),e.set("portalsNeedToRegisterClinetId",r))}case bb.RemoveFromRegisterClientIdList:{let r=null==e?void 0:e.portalsNeedToRegisterClinetId;return(null==r?void 0:r.find((e=>e.portalUrl===t.portalUrl)))?(r=r.filter((e=>e.portalUrl!==t.portalUrl)),e.set("portalsNeedToRegisterClinetId",r)):e}case bb.UpdateNoPermissionResourceChangedFlag:return e.set("noPermissionResourceChangedFlag",Be());case bb.UpdateResourceSessions:{const r=Object.assign({},e.resourceSessions);return r[t.resourceRootUrl]=t.userName,e.set("resourceSessions",r)}case bb.ScreenPanelVisibleChange:return e.setIn(["appRuntimeInfo","screenPanelStates",t.screenId],t.visible);case bb.ActivePrintPreview:return e.setIn(["appRuntimeInfo","isPrintPreview"],!0);case bb.QuitPrintPreview:return e.setIn(["appRuntimeInfo","isPrintPreview"],!1);case bb.UtilityStateChange:{const r={success:t.success};return t.success||(r.isSignInError=null!==(u=t.isSignInError)&&void 0!==u&&u),e.setIn(["appRuntimeInfo","utilityStates",t.id],r)}case bb.ExtensionRegistered:return e.extensionsInfo[t.epName]?e.setIn(["extensionsInfo",t.epName],e.extensionsInfo[t.epName].concat(t.extension)):e.setIn(["extensionsInfo",t.epName],[t.extension]);case bb.SaveThumbnailUrl:return e.setIn(["appRuntimeInfo","saveThumbnailUrl"],t.saveThumbnailUrl);default:return function(e,t){const r=fy.getInstance().getExtensions(Zv.ReduxStore);for(let n=0;n<r.length;n++){const o=r[n];if(o.getActions().includes(t.type)){const r=o.getStoreKey().split("."),n=e.getIn(r);return e.setIn(r,o.getReducer()(n,t,e))}}return e}(e,t)}}function by(e,t,r){var n,o,i;if(!(e&&(null===(n=e.attributes)||void 0===n?void 0:n.portalUrl)&&t&&r))return;if(e.attributes.portalUrl!==r)return;const a=vy(t);return Ad(a,null===(i=null===(o=e.sharedThemeVariables)||void 0===o?void 0:o.asMutable)||void 0===i?void 0:i.call(o,{deep:!0}))?void 0:e=e.set("sharedThemeVariables",a)}function wy(e,t){return Hm(e,t.appConfig)}function Iy(e,t){var r;let n;return n=e.appConfig&&e.appConfig.pages?e.appConfig.pages[t]:{},e.setIn(["appRuntimeInfo","activeLayout"],null!==(r=null==n?void 0:n.layout)&&void 0!==r?r:null).setIn(["appRuntimeInfo","selection"],null)}function Ey(e,t,r,n,o){var i;let a=e.setIn(["dataSourcesInfo",t,r],n);const s=null==o?void 0:o.getDataSource(t);return(null===(i=null==s?void 0:s.getDataSourceJson())||void 0===i?void 0:i.isOutputFromWidget)&&(n!==Hl.Unloaded&&n!==Hl.NotReady||s.getAllDerivedDataSources().forEach((e=>{a=a.setIn(["dataSourcesInfo",e.id,r],n)}))),a}function Cy(e,t,r){let n=e.setIn(["widgetsRuntimeInfo",t,"state"],Nl.Opened);return r&&(n=n.setIn(["widgetsRuntimeInfo",t,"controllerWidgetId"],r)),n}function Oy(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],Nl.Closed)}function xy(e,t){var r;let n=null===(r=e.widgetsRuntimeInfo)||void 0===r?void 0:r[t];return n?(n=n.without("state"),e.setIn(["widgetsRuntimeInfo",t],n)):e}function Ty(e,t){var r,n;if(Object.keys(e.widgetsRuntimeInfo).forEach((t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),t){const{layoutId:o,layoutItemId:i}=t;if(!(null===(n=null===(r=e.appConfig.layouts[o])||void 0===r?void 0:r.content)||void 0===n?void 0:n[i]))return e=e.setIn(["appRuntimeInfo","selection"],null)}return e=e.setIn(["appRuntimeInfo","selection"],t)}function Ay(e,t,r){var n,o,i,a,s,l;let u,c;if("asMutable"in r&&(r=r.asMutable({deep:!0})),(null===(n=r.visibleViews)||void 0===n?void 0:n.length)>0?(c=r.visibleViews,u=r.visibleViews.length):(c=null!==(i=null===(o=e.appConfig.sections[t])||void 0===o?void 0:o.views)&&void 0!==i?i:[],u=null!==(a=null==c?void 0:c.length)&&void 0!==a?a:0),r.useProgress&&(!r.currentViewId||!r.previousViewId)){const{currentIndex:e,previousIndex:t}=function(e,t){let r,n;const o=Py(e,0,1)*(t-1),i=Math.floor(o);return n=i,n=function(e){return Math.abs(e-Math.round(e))<1e-7}(o)?Math.round(o)-1:i,r=n+1,r=Py(r,0,t-1),n=Py(n,0,t-1),{previousIndex:n,progress:o,currentIndex:r}}(r.progress,u);r.currentViewId=c[e],r.previousViewId=c[t]}if(null==r.progress){const e=c.indexOf(r.currentViewId);r.progress=c.length>1?e/(c.length-1):1}if(null==r.previousViewId){const n=null===(l=null===(s=e.appRuntimeInfo)||void 0===s?void 0:s.sectionNavInfos)||void 0===l?void 0:l[t];if(null==n?void 0:n.currentViewId)r.previousViewId=n.currentViewId;else{const e=c.indexOf(r.currentViewId);r.previousViewId=e>0?c[e-1]:c[u-1]}}return r}function Py(e,t,r){return Math.max(t,Math.min(e,r))}function Dy(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ry="function"==typeof Symbol&&Symbol.observable||"@@observable",_y=function(){return Math.random().toString(36).substring(7).split("").join(".")},ky={INIT:"@@redux/INIT"+_y(),REPLACE:"@@redux/REPLACE"+_y(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_y()}};var Ly=function e(t,r,n){var o;if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Dy(0));if("function"==typeof r&&void 0===n&&(n=r,r=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Dy(1));return n(e)(t,r)}if("function"!=typeof t)throw new Error(Dy(2));var i=t,a=r,s=[],l=s,u=!1;function c(){l===s&&(l=s.slice())}function d(){if(u)throw new Error(Dy(3));return a}function p(e){if("function"!=typeof e)throw new Error(Dy(4));if(u)throw new Error(Dy(5));var t=!0;return c(),l.push(e),function(){if(t){if(u)throw new Error(Dy(6));t=!1,c();var r=l.indexOf(e);l.splice(r,1),s=null}}}function f(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(Dy(7));if(void 0===e.type)throw new Error(Dy(8));if(u)throw new Error(Dy(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=s=l,r=0;r<t.length;r++)(0,t[r])();return e}return f({type:ky.INIT}),(o={dispatch:f,subscribe:p,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Dy(10));i=e,f({type:ky.REPLACE})}})[Ry]=function(){var e,t=p;return e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Dy(11));function r(){e.next&&e.next(d())}return r(),{unsubscribe:t(r)}}},e[Ry]=function(){return this},e},o};let Ny;function My(e){return Ny||(Ny=Ly(Sy,e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({stateSanitizer:e=>e.appConfig?"1"===e.queryObject.__log_app_config_in_redux__||"true"===e.queryObject.__log_app_config_in_redux__?e:e.set("appConfig","<<appConfig>>"):e})),window._appStore=Ny,Ny)}function jy(){return Ny}function Uy(e,t){let r;function n(){let n=Ny.getState();t?(n=n.getIn(t),n!==r&&(e(r,n),r=n)):n!==r&&(e(r,n),r=n)}const o=Ny.subscribe(n);return n(),o}const Fy=function(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)},By=function(e){return e};var $y=Math.max;const Gy=function(){try{var e=Mu(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Wy=Gy?function(e,t){return Gy(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:By;var Vy=Date.now;const Hy=(zy=Wy,qy=0,Yy=0,function(){var e=Vy(),t=16-(e-Yy);if(Yy=e,t>0){if(++qy>=800)return arguments[0]}else qy=0;return zy.apply(void 0,arguments)});var zy,qy,Yy;const Jy=function(e,t){return Hy(function(e,t,r){return t=$y(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=$y(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,By),e+"")},Ky=Jy((function(e,t){return Fy(e,1,t)})),Xy={mapServer:"MapServer",imageServer:"ImageServer",featureServer:"FeatureServer",sceneServer:"SceneServer",streamServer:"StreamServer",vectortileServer:"VectorTileServer",GPServer:"GPServer",bigDataCatalogServer:"BigDataCatalogServer",dataReviewerServer:"DataReviewerServer",geoAnalytics:"GeoAnalytics",geocodeServer:"GeocodeServer",geoDataServer:"GeoDataServer",geometryServer:"GeometryServer",globeServer:"GlobeServer",knowledgeGraphServer:"KnowledgeGraphServer",LRServer:"LRServer",mobileServer:"MobileServer",networkDiagramServer:"NetworkDiagramServer",parcelFabricServer:"ParcelFabricServer",relationalCatalogServer:"RelationalCatalogServer",NAServer:"NAServer",schematicsServer:"SchematicsServer",symbolServer:"SymbolServer",topographicProductionServer:"TopographicProductionServer",traceNetworkServer:"TraceNetworkServer",utilityNetworkServer:"UtilityNetworkServer",validationServer:"ValidationServer",versionManagementServer:"VersionManagementServer"};function Qy(e=""){const t=Object.values(Xy),r=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/(admin\\/)?services\\/(.+?)\\/(${t.join("|")}))`,"i"),n=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${t.join("|")}))`,"i"),o=e.match(r)||e.match(n);return o?o[0]:null}function Zy(e=""){const t=/\/rest\/admin\/services(\/|$)/i,r=e.toLowerCase();let n=r.indexOf("/appservices");return-1===n&&(n=r.indexOf("/rest/services")),-1===n&&t.test(e)&&(n=e.search(t)),n>-1?e.substring(0,n):null}function eS(e=""){return!!Qy(e)}function tS(e=""){return!!Zy(e)}function rS(e=""){return Qy(e)||e}function nS(e=""){return Zy(e)||e}var oS=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const iS={},aS={};function sS(e){return oS(this,void 0,void 0,(function*(){if(aS[e])return aS[e];let t=[];const r=fy.getInstance().getExtensions(Zv.DependencyDefine).filter((t=>t.getDependencyKey()===e))[0];if(r)t=t.concat(r.getResources());else{if(!/^http/.test(e))return console.error("Unknown dependency.",e),Promise.reject(Error(`Unknown dependency: ${e}.`));t.push({url:e})}const n=[];return t.forEach((e=>{iS[e.url]?n.push(iS[e.url]):n.push(uS(e))})),aS[e]=Promise.all(n).then((e=>{if(null==r?void 0:r.postInit)return r.postInit()}))}))}function lS(e){return oS(this,void 0,void 0,(function*(){return e.reduce(((e,t)=>oS(this,void 0,void 0,(function*(){return e.then((()=>oS(this,void 0,void 0,(function*(){return sS(t)}))))}))),sS(e[0]))}))}function uS(e){return oS(this,void 0,void 0,(function*(){if(e.dependencies&&e.dependencies.length>0)return Promise.all(e.dependencies.map((e=>oS(this,void 0,void 0,(function*(){return uS(e)}))))).then((()=>oS(this,void 0,void 0,(function*(){return delete e.dependencies,uS(e)}))));const t=e.url;return iS[e.url]=ry(t),iS[e.url]}))}var cS=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function dS(e){return cS(this,void 0,void 0,(function*(){return yield sS("jimu-arcgis"),yield ny(e)}))}function pS(e){return cS(this,void 0,void 0,(function*(){return yield dS([e]).then((e=>e[0]))}))}function fS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var hS=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=fS({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=t.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",fS({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,fS({},this.attributes,t))},withConverter:function(t){return e(fS({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const gS={loading:"Loading",apply:"Apply",ok:"OK",publish:"Publish",cancel:"Cancel",yes:"Yes",no:"No",open:"Open",close:"Close",new:"New",classic:"Classic",widgetLoadError:"Fail to load",notPublishError:"This item is not published. Please open this item in Experience Builder, then click <b>&nbsp;Publish&nbsp;</b> to publish it.",versionUpdateMsg:"New updates are available. Click Reload to get the latest updates.",userLocaleChangeMsg:"The user locale has changed. Click Reload to refresh the page.",doUpdate:"Reload",search:"Search",delete:"Delete",about:"About",neverUnsupportedBrowserTitle:"Unsupported browser",neverUnsupportedBrowserOnlineContent:"You are using a browser that is not supported by [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>. Provide your feedback through <feedback-link>GeoNet, the Esri Community</feedback-link>.",neverUnsupportedBrowserEnterpriseContent:"You are using a browser that is not supported [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>.",message_StringSelectionChange:"String selection changes",message_ExtentChange:"Extent changes",message_DataSourceFilterChange:"Data filtering changes",message_DataRecordsSelectionChange:"Record selection changes",message_DataRecordSetChange:"Records created",message_DataSourcesChange:"Data added",message_SelectDataRecord:"Select data record",message_LocationChange:"Location change",message_ButtonClick:"Button click",actions:"Actions",noActions:"No available actions",selectedData:"Selected ({count})",allData:"All data ({count})",allDataWithoutCount:"All data",loadedData:"Loaded ({count})",currentData:"Current",export:"Export",exportAll:"Export all",exportSelected:"Export selected",largeWarningTitle:"Are you sure you want to export all data records? ",largeWarningContent:"Exporting this large dataset will take time.",tooLargeWarningTitle:"You can only export the first {max} records.",tooLargeWarningContent:"Dataset export is limited to the first {max} records.",dataAction_ExportJson:"Export to JSON",dataAction_ExportCSV:"Export to CSV",dataAction_ExportGeoJson:"Export to GeoJSON",dataAction_ExportItem:"Export to Item",dataAction_SetFilter:"Set filter",dataAction_DataStatistics:"Statistics",pleaseSelectAField:"Please select a field",countLabel:"Number of values",countEmptyLabel:"Number of empty values",sumLabel:"Sum of values",minLabel:"Minimum",maxLabel:"Maximum",avgLabel:"Average",stddevLabel:"Standard deviation",error:"Error",messageAction_SelectDataRecord:"Select data records",messageAction_FilterDataRecord:"Filter data records",action_addedData:"Added: {label}",icon:"Icon",small:"Small",low:"Low",high:"High",large:"Large",short:"Short",medium:"Medium",long:"Long",full:"Full",experience:"Experience",template:"Template",widget:"Widget",section:"Section",view:"View",page:"Page",dialog:"Window",layout:"Layout",theme:"Theme",dataSource:"Datasource",block:"Block",screenGroup:"Screen group",screen:"Screen",grid:"Grid",dialogConfirmationDefaultText:"I agree to the above terms and conditions",dialogPreventDisplayAgainDefaultText:"Don't show this again",noEditPrivilegesError:"Your account does not have permission to create or modify data.",noEditContentPrivilegesError:"Your account does not have permission to create or modify content.",essentialAppsLicenseErrorForApp:"Your account is not licensed to use an app that is not public. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",essentialAppsLicenseErrorForBuilder:"Your account is not licensed for Experience Builder. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",roleError:"Experience Builder Developer Edition requires a level 2 ArcGIS account to work. Please login with an account that has level 2 privileges.",roleError2:"Experience Builder Developer Edition requires an ArcGIS organization account with a user type that includes privileges to create content.",invalidResourceExperience:"This is not a supported item.",invalidResourceItem:"Item does not exist or is inaccessible.",invalidResourcePermission:"Sorry, you do not have permissions to access this application.",invalidResourcePermissionForReadOnly:"Sorry, you only have view permission to this application.",dataSourceCreateError:"Data is inaccessible.",blockedByAdminErrorForApp:"Your organization has blocked access to this application. Please contact your administrator for details.",blockedByAdminErrorForBuilder:"Your organization has blocked access to Experience Builder. Please contact your administrator for details.",goToAnotherExperienceBtn:"Go to another experience",switchAccoutBtn:"Switch account",switch:"Switch",signInErrorDefault:"Sorry, you do not have permission to access this resource.",signInErrorsDefault:"Sorry, you do not have permission to access ({names}).",signInErrorEnterCredential:"Sorry, you do not have permission to access this resource. Click to enter credential.",signInErrorCannotEnterCredential:"Sorry, your current account does not have permission to access this resource.",signInErrorTryAgain:"Sorry, you do not have permission to access this resource. Please try again.",signInErrorInvalidToken:"Invalid credential. Please login again.",signInBannerListWarning:"Sorry, you don’t have access to the resources from the following servers or organizations. Click Sign in to provide credentials. Click Ignore to avoid loading the resource until you refresh the app.",signInBannerIgnore:"Ignore",signInBannerIgnoreAll:"Ignore all",upgradedFrom:"Upgraded from previous config",versionIsHigh:"Oops.. It seems this experience is built with a higher version of ArcGIS Experience Builder. Please upgrade to the latest version to view.",badVersion:"Oops.. It seems the version of this experience is incorrect. Please check its configuration file.",setClientIdMessage1:"This service is hosted on an ArcGIS Enterprise that the Experience Builder not registered with. Please provide Client ID to {register} first.",registerText:"register",arcgisEnterpriseText:"ArcGIS Enterprise",setClientIdMessage2:"Provide the Client ID for Experience Builder registered in the ArcGIS Enterprise you specify above",experienceVersionRemind:"This experience is in higher version. Incompatible contents may not work.",templateVersionRemind:"This template is in higher version. Incompatible contents may not work.",publishedExperienceVersionRemind:"The published version of this experience is in higher version. Incompatible contents may not work.",publishedTemplateVersionRemind:"The published version of this template is in higher version. Incompatible contents may not work.",draftTemplateVersionRemind:"The draft version of this template is in higher version. Incompatible contents may not work.",draftExperienceVersionRemind:"The draft version of this experience is in higher version. Incompatible contents may not work.",featureLayer:"Feature Layer",featureSet:"Feature Set",featureService:"Feature Service",mapService:"Map Service",groupLayer:"Group Layer",map:"Map",simpleLocal:"Simple Local",webMap:"Web Map",webScene:"Web Scene",csv:"CSV",sceneService:"Scene Service",sceneLayer:"Scene Layer",imageService:"Image Service",vectorTileService:"Vector Tile Service",wfsLayer:"WFS Layer",wmsLayer:"WMS Layer",wmtsLayer:"WMTS Layer",kml:"KML",geojson:"GeoJSON",outputView:"{dataSourceLabel} output view",buildingScene:"Building Scene Layer",buildingGroup:"Building Group Layer",buildingComponent:"Building Component Layer"};class mS{constructor(){this._status="pending",this._promise=new Promise(((e,t)=>{this._resolver=e,this._rejecter=t}))}resolve(e){return this._status="resolved",this._resolver(e)}reject(e){return this._status="rejected",this._rejecter(e)}get status(){return this._status}get promise(){return this._promise}}const vS=function(e,t,r){"__proto__"==t&&Gy?Gy(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var yS=Object.prototype.hasOwnProperty;const SS=function(e,t,r){var n=e[t];yS.call(e,t)&&Gu(n,r)&&(void 0!==r||t in e)||vS(e,t,r)},bS=function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),o?vS(r,s,l):SS(r,s,l)}return r};var wS=Object.prototype.hasOwnProperty;const IS=function(e){if(!Iu(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Qc(e),r=[];for(var n in e)("constructor"!=n||!t&&wS.call(e,n))&&r.push(n);return r},ES=function(e){return rd(e)?Kc(e,!0):IS(e)};var CS="object"==typeof exports&&exports&&!exports.nodeType&&exports,OS=CS&&"object"==typeof module&&module&&!module.nodeType&&module,xS=OS&&OS.exports===CS?uu.Buffer:void 0,TS=xS?xS.allocUnsafe:void 0;const AS=function(e,t){if(t)return e.slice();var r=e.length,n=TS?TS(r):new e.constructor(r);return e.copy(n),n},PS=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},DS=Zc(Object.getPrototypeOf,Object),RS=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ic(t,Tc(e)),e=DS(e);return t}:Cc,_S=function(e){return Ec(e,ES,RS)};var kS=Object.prototype.hasOwnProperty;const LS=function(e){var t=new e.constructor(e.byteLength);return new vc(t).set(new vc(e)),t};var NS=/\w*$/;var MS=cu?cu.prototype:void 0,jS=MS?MS.valueOf:void 0;const US=function(e,t){var r=t?LS(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},FS=function(e,t,r){var n,o=e.constructor;switch(t){case"[object ArrayBuffer]":return LS(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?LS(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return US(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,NS.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return n=e,jS?Object(jS.call(n)):{}}};var BS=Object.create;const $S=function(){function e(){}return function(t){if(!Iu(t))return{};if(BS)return BS(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),GS=function(e){return"function"!=typeof e.constructor||Qc(e)?{}:$S(DS(e))};var WS=zc&&zc.isMap;const VS=WS?Gc(WS):function(e){return yu(e)&&"[object Map]"==wd(e)};var HS=zc&&zc.isSet;const zS=HS?Gc(HS):function(e){return yu(e)&&"[object Set]"==wd(e)};var qS="[object Arguments]",YS="[object Function]",JS="[object Object]",KS={};KS[qS]=KS["[object Array]"]=KS["[object ArrayBuffer]"]=KS["[object DataView]"]=KS["[object Boolean]"]=KS["[object Date]"]=KS["[object Float32Array]"]=KS["[object Float64Array]"]=KS["[object Int8Array]"]=KS["[object Int16Array]"]=KS["[object Int32Array]"]=KS["[object Map]"]=KS["[object Number]"]=KS[JS]=KS["[object RegExp]"]=KS["[object Set]"]=KS["[object String]"]=KS["[object Symbol]"]=KS["[object Uint8Array]"]=KS["[object Uint8ClampedArray]"]=KS["[object Uint16Array]"]=KS["[object Uint32Array]"]=!0,KS["[object Error]"]=KS[YS]=KS["[object WeakMap]"]=!1;const XS=function e(t,r,n,o,i,a){var s,l=1&r,u=2&r,c=4&r;if(n&&(s=i?n(t,o,i,a):n(t)),void 0!==s)return s;if(!Iu(t))return t;var d=au(t);if(d){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&kS.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!l)return PS(t,s)}else{var p=wd(t),f=p==YS||"[object GeneratorFunction]"==p;if(jc(t))return AS(t,l);if(p==JS||p==qS||f&&!i){if(s=u||f?{}:GS(t),!l)return u?function(e,t){return bS(e,RS(e),t)}(t,function(e,t){return e&&bS(t,ES(t),e)}(s,t)):function(e,t){return bS(e,Tc(e),t)}(t,function(e,t){return e&&bS(t,nd(t),e)}(s,t))}else{if(!KS[p])return i?t:{};s=FS(t,p,l)}}a||(a=new dc);var h=a.get(t);if(h)return h;a.set(t,s),zS(t)?t.forEach((function(o){s.add(e(o,r,n,o,t,a))})):VS(t)&&t.forEach((function(o,i){s.set(i,e(o,r,n,i,t,a))}));var g=d?void 0:(c?u?_S:od:u?ES:nd)(t);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););}(g||t,(function(o,i){g&&(o=t[i=o]),SS(s,i,e(o,r,n,i,t,a))})),s},QS=function(e){return XS(e,5)};var ZS,eb,tb=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.TokenRequired="TOKEN_REQUIRED",e.InvalidToken="INVALID_TOKEN",e.NoPermission="NO_PERMISSION",e.SignInCanceled="SIGN_IN_CANCELED",e.Other="OTHER"}(ZS||(ZS={})),function(e){e.ArcGISJSSync="ARCGIS_JS",e.OtherWindowSync="OTHER_WINDOW",e.AddOrUpdate="ADD_OR_UPDATE",e.Remove="REMOVE"}(eb||(eb={}));class rb{getMainSession(){var e;if(!this.sessions||!this.getMainPortal())return null;const t=this.sessions[this.getSessionKeyFromUrl(null===(e=this.getMainPortal())||void 0===e?void 0:e.portalUrl)];return this.isSessionExpired(t)?t:null}getSessions(){if(!this.sessions)return[];const e={};return Object.keys(this.sessions).forEach((t=>{const r=this.sessions[t];this.isSessionExpired(r)&&(e[t]=r)})),this.sessions=e,Object.keys(this.sessions).map((e=>this.sessions[e]))}clearSessions(){delete this.sessions}onSessionChanged(e){if(this.onSessionChangedCallbacks){const t=this.getSessions();this.onSessionChangedCallbacks.forEach((r=>{r(t,e)}))}}static getInstance(){return rb.instance||(rb.instance=new rb,window._sessionManager=rb.instance,this.instance.isSigning=!1,this.instance.signInUrlFromQueue="",this.instance.signInQueue=[],this.instance.onSessionChangedCallbacks=[],this.instance.requestCacheForValidatingToken={},this.instance.signInDialogPendingList={},this.instance.noPermissionResourceInfoList={}),rb.instance}constructor(){this.isMainSession=e=>{var t,r;if(!e)return!1;if(!this.isSessionExpired(e))return!1;const n=this.getSessionKeyFromUrl(e.portal);return!(!(null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl)||n!==this.getSessionKeyFromUrl(null===(r=this.getMainPortal())||void 0===r?void 0:r.portalUrl))},this.processInvalidSignInSession=()=>{this.removeAuthInfo(),this.clearSessions()},this.gotoSignInPage=()=>{let e;if(window.jimuConfig.isDevEdition)e=`${location.protocol}//${location.host}${window.jimuConfig.mountPath}page/set-portalurl`;else{if(window.jimuConfig.isInPortal)return void this.signIn({fromUrl:`${window.location.pathname}${window.location.search}`,popup:!1});{e=`${location.protocol}//${location.host}/page/landing`;const t=jy().getState().queryObject;t.locale&&(e=Av(e,"locale",t.locale)),t.__env__&&(e=Av(e,"__env__",t.__env__))}}0!==window.location.href.indexOf(e)&&(window.location.href=e)},this.gotoAuthErrorPage=(e=ZS.InvalidToken)=>{jy().dispatch(zw(e))},this.handleAuthError=(e,t=!0)=>tb(this,void 0,void 0,(function*(){const r=e.options;if(e instanceof qa.ah&&r&&(!r.authentication||498===e.code||"AUTHENTICATION_ERROR_CODE"===e.code)){const r=this.getSessionKeyFromUrl(e.url);return this.sessions&&this.sessions[r]&&delete this.sessions[r],yield this.signIn({fromUrl:window.location&&window.location.href,popup:t,desUrl:e.url})}throw e})),this.onSessionRequestMessage=this.onSessionRequestMessage.bind(this),window.addEventListener("message",this.onSessionRequestMessage,!1),this.clientIdDialogResultPromises={},window.jimuConfig.isInBuilder&&Uy(((e,t)=>{void 0===e?Jm():t.some((e=>{const t=this.getSessionKeyFromUrl(e.portalUrl);return!!this.clientIdDialogResultPromises[t]&&(this.onClientIdDialogFinished(e.portalUrl,e.clientId),!0)}))}),["appConfig","connections"])}initSession(){return tb(this,void 0,void 0,(function*(){const e=window.location.pathname;if(new RegExp(`^${window.jimuConfig.mountPath}page/set-portalurl`).test(e)||/^\/page\/landing/.test(e))return Promise.resolve();const t=jy().getState().queryObject["arcgis-auth-origin"];return t&&this.canReadSessionFromParent(window.location.origin)?this.readSessionFromParent(t).then((e=>{if(e){const t=this.getSessionKeyFromUrl(e.portal);this.setSession(t,e)}})):this.initSessionFromCookieOrStorage()}))}initSessionFromCookieOrStorage(){var e;return tb(this,void 0,void 0,(function*(){const t=this.getMainPortal();if(!t)return;let r=dm(t.portalUrl);Ev(r)||(r=Cv(r,$l.Https));const n=this.isValidTokenFromStorage(t.portalUrl),o=ss(null==t?void 0:t.clientId,r,r).then((e=>e)).catch((()=>null)),[i,a]=yield null===(e=Promise.allSettled([n,o]))||void 0===e?void 0:e.then((e=>e.map((e=>null==e?void 0:e.value)))),s=this.getSessionFromStorage();if(s){const e=this.getSessionKeyFromUrl(s.portal);i&&a?s.username===a.username?this.setSession(e,s):this.setSesssionByPlatformSelfResponse(a,t):!i&&a?this.setSesssionByPlatformSelfResponse(a,t):!i||a||hm(window.location.host)&&!this.readCookie("esri_locale")?this.failedToInitSession():this.setSession(e,s)}else a?this.setSesssionByPlatformSelfResponse(a,t):this.failedToInitSession()}))}failedToInitSession(){if(this.processInvalidSignInSession(),window.jimuConfig.isSite||window.jimuConfig.isBuilder)throw this.gotoSignInPage(),new Error("Should signIn")}setSesssionByPlatformSelfResponse(e,t){let r=dm(t.portalUrl);Ev(r)||(r=Cv(r,$l.Https));const n={expires:(new Date).getTime()+1e3*e.expires_in,server:r,ssl:!0,token:e.token,userId:e.username};let o=is.fromCredential(n),i=o.toJSON();i.clientId=t.clientId,o=new is(i);const a=this.getSessionKeyFromUrl(o.portal);this.setSession(a,o)}isValidTokenFromStorage(e){return tb(this,void 0,void 0,(function*(){const t=this.getSessionFromStorage();if((null==t?void 0:t.token)&&e){const r=`${e}/sharing/rest`,n=jy().getState().isWebTier?{credentials:"include"}:{};return this.isValidToken(r,t.token,n).then((e=>{var t;return!(!e.valid||!(null===(t=e.response)||void 0===t?void 0:t.currentVersion))}))}return Promise.resolve(!1)}))}isValidToken(e,t,r={}){return tb(this,void 0,void 0,(function*(){if(t){const n=`${e=rS(e=Tv(e))}?f=json&token=${t}`,o=`${e}_${t}`;if(this.requestCacheForValidatingToken[o])return this.requestCacheForValidatingToken[o];{const e=fetch(n,r).then((e=>e.json())).then((e=>(null==e?void 0:e.error)?{valid:!1,error:e.error}:{valid:!0,response:e,error:null})).catch((e=>(console.log("failed to validate token."),{valid:!1,error:e})));return this.requestCacheForValidatingToken[o]=Promise.resolve(e),e}}return Promise.resolve({valid:!1,error:null})}))}getUserInfo(){return tb(this,void 0,void 0,(function*(){return jy().getState().user?yield Promise.resolve(jy().getState().user.asMutable({deep:!0})):this.getMainSession()?yield this.getMainSession().getUser().then((e=>(this.afterGetUserInfo(e),e))):Promise.resolve(null)}))}afterGetUserInfo(e){jy().dispatch(mw(e));const t=null===e.culture?"":e.culture;null!==kg($d)?kg($d)!==t&&(Lg($d,t),jy().dispatch(Hw(!0))):Lg($d,t)}getMainPortal(){const e=jy().getState();return e.portalUrl?{portalUrl:e.portalUrl,clientId:e.clientId,isWebTier:e.isWebTier}:null}getTrustedServers(){var e;const t=jy().getState(),r=null===(e=null==t?void 0:t.portalSelf)||void 0===e?void 0:e.authorizedCrossOriginDomains;return!this.trustedServers&&r&&(this.trustedServers=r.map((e=>Cv(xv(e),$l.Https)))),this.trustedServers||[]}isTrustedServer(e){return this.getTrustedServers().some((t=>e.includes(t)))}removeSession(e){if(!e)return!1;const t=this.getSessionKeyFromSession(e);return!!this.removeSessionByKey(t)&&(this.removeServerSessionsByPortalSession(e),this.syncToOtherWindowSessionManager(),this.onSessionChanged(eb.Remove),!0)}removeSessionByKey(e){return!!e&&(this.sessions&&this.sessions[e]&&delete this.sessions[e],!0)}addOrReplaceSession(e){if(!e)return!1;if(this.doAddOrReplaceSession(e)){this.syncToOtherWindowSessionManager(),this.onSessionChanged(eb.AddOrUpdate);const t=e.server?`${e.server}/rest/services`:e.portal;return this.releasePendingSignIn(t),!0}return!1}doAddOrReplaceSession(e){if(!e)return!1;const t=this.getSessionKeyFromSession(e);return!!t&&(this.setSession(t,e),!0)}setSession(e,t){var r;if(!this.isSessionExpired(t))return;this.sessions||(this.sessions={});const n=this.sessions[e];if(this.removeServerSessionsByPortalSession(n),this.sessions[e]=t,e===this.getSessionKeyFromUrl(null===(r=this.getMainPortal())||void 0===r?void 0:r.portalUrl)&&(jy().dispatch(gw(t.token)),jy().getState().user||this.getUserInfo(),this.writeAuthInfo(t)),!(window.jimuConfig.isBuilder||t.portal&&t.server)){const e=gm(t.portal)||nS(t.server);jy().dispatch(Kw(e,t.username))}}removeServerSessionsByPortalSession(e){e&&e.portal&&!e.server&&this.getSessions().forEach((t=>{if(t.server&&t.portal===e.portal&&t.username===e.username){const e=this.getSessionKeyFromSession(t);this.removeSessionByKey(e)}}))}getSessionByUrl(e){if(!this.sessions)return;let t=this.getSessionKeyFromUrl(e),r=this.sessions[t];if((null==r?void 0:r.server)&&(null==r?void 0:r.portal)){const e=this.getPortalKeyFromUrl(r.portal);r=this.sessions[e]}return r}getSessionKeyFromSession(e){return(null==e?void 0:e.server)?"server_"+Ov(e.server):this.getSessionKeyFromUrl(e.portal)}getSessionKeyFromUrl(e){return this.getServerKeyFromUrl(e)||this.getPortalKeyFromUrl(e)}getServerKeyFromUrl(e){const t=tS(e)?Ov(nS(e)):"";return t?`server_${t}`:""}getPortalKeyFromUrl(e){var t,r;let n="";if(hm(e))n=this.getStandardAGOLSessionKey(e)||"";else{const{customBaseUrl:o,urlKey:i}=this.getPortalUrlInfo(e)||{};if(n=`${i}.${o}`,null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl){const e=this.getPortalUrlInfo(null===(r=this.getMainPortal())||void 0===r?void 0:r.portalUrl);i===e.urlKey&&0===o.indexOf(e.customBaseUrl)&&(n=`${e.urlKey}.${e.customBaseUrl}`)}}return n}getPortalUrlInfo(e){if(!e)return null;let t=e.toLowerCase(),r="",n=t.indexOf("https://");0===n?r="https://":(n=t.indexOf("http://"),0===n&&(r="http://")),n=r.length;let o,i,a=t.indexOf("/sharing/rest",n);a=a<0?t.length:a,t=t.substring(n,a);const s=t.split(".");return o=s[0],s.splice(0,1),i=s.join("."),{urlKey:o,customBaseUrl:i,schema:r}}getSessionFromAuthInfo(e){var t;if(!this.checkAuthInfo(e))return null;const r=this.getPortalFromAuthInfo(e);return new is({clientId:null===(t=this.getMainPortal())||void 0===t?void 0:t.clientId,token:e.token,tokenExpires:new Date(e.expires),portal:r,username:e.email})}getSessionFromStorage(){var e;const t=null===(e=this.readAuthInfo("exb_auth"))||void 0===e?void 0:e.authInfo,r=this.getSessionFromAuthInfo(t);return r&&this.isMainSession(r)?r:r?(this.processInvalidSignInSession(),null):null}readCookie(e){try{return hS.get(e)}catch(e){console.error("Read cookieerror.",e)}}getPortalFromAuthInfo(e){var t;if(window.jimuConfig.isInPortal)return`${null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl}/sharing/rest/`;const r=e.urlKey?`${e.urlKey}.`:"";let n=e.schema;n=n||"https://";let o=`${n}${r}${e.customBaseUrl}/sharing/rest/`;return"maps.arcgis.com"===e.customBaseUrl?o=`${n}www.arcgis.com/sharing/rest/`:"mapsdevext.arcgis.com"===e.customBaseUrl?o=`${n}devext.arcgis.com/sharing/rest/`:"mapsqa.arcgis.com"===e.customBaseUrl&&(o=`${n}qaext.arcgis.com/sharing/rest/`),o}isSessionExpired(e){return!(!e||new Date(e.tokenExpires)<new Date)}getAuthInfoFromSession(e){const{urlKey:t,customBaseUrl:r,schema:n}=this.getPortalUrlInfo(e.portal);return{portalApp:!1,email:e.username,token:e.token,expires:e.tokenExpires,urlKey:t,customBaseUrl:r,schema:n}}checkAuthInfo(e){return!(!e||new Date(e.expires)<new Date)}readAuthInfo(e){let t,r;try{r=JSON.parse(kg(e))}catch(e){console.error("Parse localStorage auth error")}if(r)t={authInfo:r,from:"LocalStorage"};else{try{r=JSON.parse(jg(e))}catch(e){console.error("Parse sessionStorage auth error")}t={authInfo:r,from:"SessionStorage"}}return t}writeAuthInfo(e){const t=this.readAuthInfo("exb_auth");this.removeAuthInfo(),"LocalStorage"===t.from||window.jimuConfig.isDevEdition||window.jimuConfig.isOutOfExb?Lg("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e))):Ug("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e)))}removeAuthInfo(){Fg("exb_auth"),Bg("exb_auth")}getStandardAGOLSessionKey(e){if(!hm(e))return;let t,r;const n=xv(e).split(".");let o;return t=n[0],n.splice(0,1),r=n.join("."),"devext"===t||"mapsdevext.arcgis.com"===r?o="devext.arcgis.com":"qaext"===t||"mapsqa.arcgis.com"===r?o="qaext.arcgis.com":"www"===t||"maps.arcgis.com"===r?o="www.arcgis.com":(o="www.arcgis.com",t.indexOf("dev")>-1||r.indexOf("dev")>-1?o="devext.arcgis.com":(t.indexOf("qa")>-1||r.indexOf("qa")>-1)&&(o="qaext.arcgis.com")),o}getOrgUrl(e,t){let r;return"www.arcgis.com"===e?r=`${t}.maps.arcgis.com`:"devext.arcgis.com"===e?r=`${t}.mapsdevext.arcgis.com`:"qaext.arcgis.com"===e?r=`${t}.mapsqa.arcgis.com`:(r=e,console.error("Bad params.",e,t)),Cv(r,$l.Https)}getHostedService(e){return tb(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?yield(0,qa.WY)(t+"/rest/info",{httpMethod:"GET"}).then((e=>tb(this,void 0,void 0,(function*(){if(!e.owningSystemUrl)return yield Promise.resolve(null);let t;return/https?:\/\/(www|services)\.arcgis\.com/.test(e.owningSystemUrl)?t="www.arcgis.com":/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsdevext\.arcgis\.com\/?$/.test(jy().getState().portalUrl)?t="devext.arcgis.com":/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsqa\.arcgis\.com\/?$/.test(jy().getState().portalUrl)&&(t="qaext.arcgis.com"),yield Promise.resolve(t)})))):yield Promise.resolve(null)}))}getHostedServiceArcgisKey(e){return tb(this,void 0,void 0,(function*(){const t=xv(e).split("."),r=t[0];let n;return t.splice(0,1),r.includes("servicesdev")?n="devext.arcgis.com":r.includes("servicesqa")?n="qaext.arcgis.com":r.includes("services")&&(n="www.arcgis.com"),n?yield Promise.resolve(n):yield this.getHostedService(e)}))}getSignInDomain(e,t){return tb(this,void 0,void 0,(function*(){if(!e)return null;if(hm(e)){let r=this.getStandardAGOLSessionKey(e);return r||(r=yield this.getHostedServiceArcgisKey(e),r=r||xv(e)),t?this.getOrgUrl(r,t):`https://${r}`}{const{customBaseUrl:t,urlKey:r,schema:n}=this.getPortalUrlInfo(e);return`${n||"https://"}${r}.${t}`}}))}signInByResourceUrl(e,t){return tb(this,void 0,void 0,(function*(){let r,n;if(tS(e))if(t)n=this.removeFromNoPermissionResourceInfoList(t),r=this.signIn({desUrl:t,forceLogin:!0,federatedServiceUrl:e});else{const t=this.getSessionByUrl(e);t&&this.removeSession(t);const o=nS(e);n=this.removeFromNoPermissionResourceInfoList(o),r=this.nonOAuthSignIn(e)}else n=this.removeFromNoPermissionResourceInfoList(gm(e)),r=this.signIn({desUrl:e,forceLogin:!0});return r.catch((e=>{e.code===ZS.SignInCanceled&&this.setNoPermissionResourceInfoList(Object.assign(Object.assign({},this.noPermissionResourceInfoList),n))}))}))}signIn(e={}){var t,r,n,o;return tb(this,void 0,void 0,(function*(){let i=e.fromUrl||window.jimuConfig.mountPath;const a=e.desUrl||(null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl),s=e.clientId||this.getClientIdByUrl(a),l=null===(r=e.popup)||void 0===r||r,u=null!==(n=e.forceLogin)&&void 0!==n&&n,c=e.federatedServiceUrl;"/"===i.split("#")[0]&&window.jimuConfig.isInPortal&&(i=window.location.pathname);const d=this.getSessionByUrl(a);if(d&&!u){if(this._executSignIn(),!l){const e=0===i.indexOf("/");window.location.href=`${location.protocol}//${location.host}${e?"":"/"}${i}`}return c&&(yield this.generateSeverSessionByPortalSession(d,c)),Promise.resolve(d)}let p=!1;if(l){const e=this.tryToPendingSignInDialog(a);p=!!e,c&&this.tryToPendingSignInDialog(c);const t=this.signInUrlFromQueue&&this.getSessionKeyFromUrl(this.signInUrlFromQueue)===this.getSessionKeyFromUrl(a);if(e&&!t)return e.promise.then((()=>tb(this,void 0,void 0,(function*(){this.isSigning=!1,c&&this.releasePendingSignIn(c),this._executSignIn();const e=this.getSessionByUrl(a);return c&&(yield this.generateSeverSessionByPortalSession(e,c)),e})))).catch((e=>{const t=this.getSignInErrorCodeByAuthError(e);return c&&this.releasePendingSignIn(c,e),this._executSignIn(),Promise.reject(this.getSignInErrorByCode(t))}))}const f=jy().getState().queryObject;if(this.isSigning&&!p){const e=this.defer();return this.signInQueue.push({desUrl:a,fromUrl:i,popup:l,sessionDefer:e,federatedServiceUrl:c}),yield e.promise}const h=dm(yield this.getSignInDomain(a,null==f?void 0:f.org)),g=Sv(iy("jimu-core"));let m=`${window.location.origin}${g}/oauth-callback.html?clientId=${s}&portal=${h}&popup=${l}&isInPortal=${window.jimuConfig.isInPortal}&isDevEdition=${window.jimuConfig.isDevEdition}&isOutOfExb=${window.jimuConfig.isOutOfExb}&mountPath=${window.jimuConfig.mountPath}&fromUrl=${encodeURIComponent(i)}`;m=new URL(m).toString();const v={portal:h,clientId:s,redirectUri:m,popup:l,params:{showSignupOption:!0,signupType:"esri",force_login:u}};this.isSigning=!0;const y=new mS;let S=window.open;return window.open=(e,t,r)=>{const n=S(e,t,r);if("oauth-window"===t){const e=n,t=setInterval((()=>{if(null==e?void 0:e.closed){const e=this.getSessionByUrl(h);this.releasePendingSignIn(a,e?null:{name:"identity-manager:user-aborted",details:"originally aborted from exb",message:"ABORTED"}),c&&this.releasePendingSignIn(c,e?null:{name:"identity-manager:user-aborted",details:"originally aborted from exb",message:"ABORTED"}),this.isSigning=!1,this._executSignIn(),e?y.resolve(e):y.reject(this.getSignInErrorByCode(ZS.SignInCanceled)),clearInterval(t)}}),500)}return n},null===(o=is.beginOAuth2(v))||void 0===o||o.then((e=>tb(this,void 0,void 0,(function*(){this.addOrReplaceSession(e),this.isSigning=!1,this._executSignIn(),y.resolve(e)})))),window.open=S,y.promise.then((e=>tb(this,void 0,void 0,(function*(){return c&&(yield this.generateSeverSessionByPortalSession(e,c)),e}))))}))}nonOAuthSignIn(e){return tb(this,void 0,void 0,(function*(){return dS(["esri/request"]).then((t=>{const[r]=t;return r(Av(e,"f","json"),{authMode:"auto",responseType:"json"}).then((t=>this.getSessionByUrl(e))).catch((t=>{const r=this.getSessionByUrl(e);if(r)return Promise.resolve(r);{const e=this.getSignInErrorCodeByAuthError(t),r=this.getSignInErrorByCode(e);return Promise.reject(r)}}))}))}))}getSignInErrorCodeByAuthError(e){var t,r,n,o;const i=(null===(r=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.error)||void 0===r?void 0:r.code)||e.code||(null===(o=null===(n=null==e?void 0:e.details)||void 0===n?void 0:n.raw)||void 0===o?void 0:o.code)||null;let a=null;return 499===i?a=ZS.TokenRequired:498===i?a=ZS.InvalidToken:403===i?a=ZS.NoPermission:"identity-manager:user-aborted"===e.name&&(a=ZS.SignInCanceled),a}getSignInErrorByCode(e=ZS.Other){const t=Qh(),r={code:e,isSignInError:!0,message:t.formatMessage({id:"signInErrorDefault",defaultMessage:gS.signInErrorDefault}),message1:t.formatMessage({id:"signInErrorEnterCredential",defaultMessage:gS.signInErrorEnterCredential}),message2:t.formatMessage({id:"signInErrorTryAgain",defaultMessage:gS.signInErrorTryAgain})};switch(e){case ZS.TokenRequired:case ZS.InvalidToken:case ZS.NoPermission:case ZS.SignInCanceled:break;default:r.code=ZS.Other}return r}getClientIdByUrl(e){var t;let r;const n=jy().getState();r=fm(Am(e),Am(n.portalUrl))?n.clientId:null===(t=Km(e))||void 0===t?void 0:t.clientId;const o=window.location.host;return(!r&&o.includes(".arcgis.com")||!r&&o.includes(".esri.com")&&e.includes(".arcgis.com"))&&(r="experienceBuilder"),r}onClientIdDialogFinished(e,t,r){const n=this.getSessionKeyFromUrl(e);this.clientIdDialogResultPromises[n]&&(r?this.clientIdDialogResultPromises[n].reject(null):this.clientIdDialogResultPromises[n].resolve(null))}useDialogToSetClientIdToConnectiosOfAppConfigAndSignIn(e,t,r){var n,o;let i;const a=this.getSessionKeyFromUrl(e);let s;if(this.clientIdDialogResultPromises[a]?s=this.clientIdDialogResultPromises[a]:(s={promise:null,resolve:null,reject:null},s.promise=new Promise(((e,t)=>{s.resolve=e,s.reject=t}))),window.jimuConfig.isBuilder)this.clientIdDialogResultPromises[a]=s,jy().dispatch(qw(e,t,r)),i=null===(n=this.clientIdDialogResultPromises[a])||void 0===n?void 0:n.promise;else if(window.jimuConfig.isInBuilder){const n=ty("jimu-for-builder").appBuilderSync;this.clientIdDialogResultPromises[a]=s,n.publishPortalUrlNeedToRegisterClientId(e,t,r),i=null===(o=this.clientIdDialogResultPromises[a])||void 0===o?void 0:o.promise}else i=Promise.resolve();return i}addSessionChangeListener(e){if("function"!=typeof e)throw new Error("callback must be a function");this.onSessionChangedCallbacks.includes(e)||this.onSessionChangedCallbacks.push(e)}_executSignIn(){if(!this.isSigning&&this.signInQueue){const e=this.signInQueue.pop();e&&(this.signInUrlFromQueue=e.desUrl,this.signIn({fromUrl:e.fromUrl,popup:e.popup,desUrl:e.desUrl,federatedServiceUrl:e.federatedServiceUrl}).then((t=>{e.sessionDefer.resolve(t)})).catch((t=>{e.sessionDefer.reject(t)})),this.signInUrlFromQueue="")}}signOut(){var e,t;const r=this.getMainSession();let n=null==r?void 0:r.portal;n||(n=null===(e=this.getMainPortal())||void 0===e?void 0:e.portalUrl,n=n&&dm(n));const o=(null==r?void 0:r.clientId)||(null===(t=this.getMainPortal())||void 0===t?void 0:t.clientId);this.clearSessions(),jy().dispatch(vw());const i=window&&window.location;let a;if(a=window.jimuConfig.isDevEdition?`${i.protocol}//${i.host}${window.jimuConfig.mountPath}page/set-portalurl`:window.jimuConfig.isInPortal?window.location.href:`${i.protocol}//${i.host}/page/landing`,this.removeAuthInfo(),this.arcgisJSIM&&this.arcgisJSIM.destroyCredentials(),n&&o){a=encodeURIComponent(a);const e=`${n}/oauth2/signout?client_id=${o}&redirect_uri=${a}`;i.href=e}else i.href="/"}switchAccount(){const{portalUrl:e,clientId:t}=jy().getState(),r=`${e}/home/pages/Account/manage_accounts.html#client_id=${t}&redirect_uri=${window.location.href}#`;this.removeAuthInfo(),window.location.href=r}defer(){const e={promise:null,resolve:null,reject:null};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}generateToken(e,t="",r){return tb(this,void 0,void 0,(function*(){const n=Cv(`${dm(e)}generateToken?f=json`,$l.Https),o=t||"",i={cache:"no-cache",credentials:r};return yield fetch(`${n}&${o}`,i).then((e=>tb(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>e.error?null:e),(e=>null))}))}generateSeverSessionByPortalSession(e,t,r="same-origin"){return tb(this,void 0,void 0,(function*(){const n=(t||"").trim().replace(/rest(.*)/gi,"").replace(/\/*$/g,""),o=Cv(xv(window.location.href),$l.Https),i=`serverUrl=${n}&referer=${o}&token=${e.token}`;return this.generateToken(pm(e.portal),i,r).then((t=>{if(t){const r=new is({portal:e.portal,server:n,token:t.token,tokenExpires:new Date(t.expires),ssl:t.ssl,username:e.username});return this.addOrReplaceSession(r),r}return null}))}))}getPortalSelf(e){return tb(this,void 0,void 0,(function*(){const t=Cv(`${dm(e)}portals/self?f=json`,$l.Https);return yield fetch(t,{cache:"no-cache",credentials:"include"}).then((e=>tb(this,void 0,void 0,(function*(){return yield e.json()}))))}))}getSessionFromWebTierPortal(e,t,r){let n,o;return o=r?Promise.resolve(r):this.getPortalSelf(e),o.then((r=>tb(this,void 0,void 0,(function*(){return n=r,yield this.generateToken(e,t,"include")})))).then((t=>{if(t&&t.token){const r={token:t.token,expires:t.expires,userId:n.user?n.user.username:"",ssl:t.ssl,server:dm(e)};return is.fromCredential(r)}return null})).catch((()=>null))}getSessionFromWebTierServer(e){return tb(this,void 0,void 0,(function*(){const t=(e||"").trim().replace(/rest(.*)/gi,"").replace(/\/*$/g,""),r=this.getSessionByUrl(e);if(r)return yield Promise.resolve(r);{const r=Cv(xv(window.location.href),$l.Https);return yield fetch(t+"/rest/info?f=json",{cache:"no-cache",credentials:"include"}).then((e=>tb(this,void 0,void 0,(function*(){return yield e.json()})))).then((t=>{const n=t.owningSystemUrl;if(n){const t=`referer=${r}`;return this.getSessionFromWebTierPortal(n,t).then((t=>tb(this,void 0,void 0,(function*(){if(t){this.addOrReplaceSession(t);const r=yield this.generateSeverSessionByPortalSession(t,e,"include");return r&&this.addOrReplaceSession(r),t}return null}))))}return null})).catch((e=>(console.warn("Failed to get session from trusted server."),null)))}}))}addFromArcGisJSCredential(e,t){let r;return!!e.server&&("server"===e.scope?(r=new is({server:e.server,token:e.token,tokenExpires:new Date(e.expires),ssl:e.ssl,username:e.userId}),(null==t?void 0:t.owningSystemUrl)?r.portal=`${null==t?void 0:t.owningSystemUrl}/sharing/rest`:r.portal=void 0):r=is.fromCredential(e),!!this.doAddOrReplaceSession(r)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(eb.ArcGISJSSync),!0))}syncToOtherWindowSessionManager(){window.jimuConfig.isBuilder?ty("jimu-for-builder").builderAppSync.publishChangeSessionToApp():window.jimuConfig.isInBuilder&&ty("jimu-for-builder").appBuilderSync.publishAppSessionChangeToBuilder()}syncSessionsFromOtherWindow(e){this.clearSessions(),e.forEach((e=>{const t=e.toJSON(),r=new is(t);r.portal=e.portal,r.server=e.server,this.doAddOrReplaceSession(r)})),this.onSessionChanged(eb.OtherWindowSync)}syncNoPermissionResourceInfoListToOtherWindowSessionManager(){window.jimuConfig.isBuilder?ty("jimu-for-builder").builderAppSync.publishNoPermissionResourceInfoListChangeToApp():window.jimuConfig.isInBuilder&&ty("jimu-for-builder").appBuilderSync.publishNoPermissionResourceInfoListChangeToBuilder()}syncNoPermissionResourceInfoListFromOtherWindow(e){this.noPermissionResourceInfoList=QS(e),jy().dispatch(Jw())}readSessionFromParent(e){return tb(this,void 0,void 0,(function*(){return yield is.fromParent(e).then((e=>(console.log("fromparent session:",e),e))).catch((e=>(console.error("Get session from parent error. Please check this link for details: https://esri.github.io/arcgis-rest-js/guides/embedded-apps/",e),null)))}))}canReadSessionFromParent(e){return e.endsWith(".arcgis.com")}onSessionRequestMessage(e){var t,r;let n=e.origin===window.location.origin||this.canReadSessionFromParent(e.origin),o="arcgis:auth:requestCredential"===e.data.type;if(n&&o)try{let r;r=e.origin.endsWith("dev.arcgis.com")?"https://devext.arcgis.com":e.origin.endsWith("qa.arcgis.com")?"https://qaext.arcgis.com":e.origin.endsWith(".arcgis.com")?"https://www.arcgis.com":e.origin;const n=this.getSessionByUrl(r);if(!n)return void e.source.postMessage({type:"arcgis:auth:error",error:{name:"NoCredential",message:"Does not find credential."}},e.origin);let o=n.toCredential();o.server=o.server.replace("/sharing/rest",""),null===(t=e.source)||void 0===t||t.postMessage({type:"arcgis:auth:credential",credential:o},e.origin)}catch(t){null===(r=e.source)||void 0===r||r.postMessage({type:"arcgis:auth:error",error:{name:t.name,message:t.message}},e.origin),console.error("Response requestCredential error.",t)}}tryToPendingSignInDialog(e){const t=this.getSessionKeyFromUrl(e);if(t){if(this.signInDialogPendingList[t])return this.signInDialogPendingList[t];{const e=new mS;return this.signInDialogPendingList[t]=e,null}}return null}releasePendingSignIn(e,t){const r=this.getSessionKeyFromUrl(e),n=this.signInDialogPendingList[r];n&&(t?n.reject(t):n.resolve(null),delete this.signInDialogPendingList[r])}getNoPermissionResourceKey(e){let t;const r="/sharing/rest/content/items";if(eS(e))t=rS(e);else{const n=Am(gm(e));if(e.includes(r)){const o=e.indexOf(r)+27;t=vm(n,e.substr(o+1).split("/")[0])}else t=null}return t}addToNoPermissionResourceInfoList(e,t,r,n,o){var i;const a=this.getNoPermissionResourceKey(e);if(!a)return;const s=this.noPermissionResourceInfoList[a],l=fm(Am(null===(i=this.getMainPortal())||void 0===i?void 0:i.portalUrl),Am(gm(o||e)));s&&s.userName===t||(this.noPermissionResourceInfoList[a]={owningSystemUrl:o||"",userName:t||"",ignored:n||!1,signInErrorCode:r||ZS.Other,allowSignIn:!(l&&(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder))},this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),jy().dispatch(Jw()))}removeFromNoPermissionResourceInfoList(e){const t={},r=this.getNoPermissionResourceKey(e);let n=!1;this.noPermissionResourceInfoList[r]&&(t[r]=this.noPermissionResourceInfoList[r],delete this.noPermissionResourceInfoList[r],n=!0);const o=!this.getServerKeyFromUrl(e)&&gm(e)===e,i=tS(e)&&nS(e)===e;return(o||i)&&Object.entries(this.noPermissionResourceInfoList).forEach((r=>{const o=r[0];r[1].owningSystemUrl!==e&&gm(o)!==Am(e)&&nS(o)!==e||(t[o]=this.noPermissionResourceInfoList[o],delete this.noPermissionResourceInfoList[o],n=!0)})),n?(this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),jy().dispatch(Jw()),t):null}ignoreFromNoPermissionResourceInfoList(e){let t=!1;if(e){const r=!this.getServerKeyFromUrl(e),n=this.getNoPermissionResourceKey(e),o=nS(`${e}/rest/services`)===e;this.noPermissionResourceInfoList[n]&&(this.noPermissionResourceInfoList[n].ignored=!0,t=!0),(r||o)&&Object.entries(this.noPermissionResourceInfoList).forEach((r=>{const n=r[0],o=r[1],i=o.owningSystemUrl===Am(e),a=gm(n)===Am(e),s=nS(n)===e;!o.ignored&&(i||a||s)&&(this.noPermissionResourceInfoList[n].ignored=!0,t=!0)}))}else Object.entries(this.noPermissionResourceInfoList).forEach((e=>{const r=e[0];e[1].ignored||(this.noPermissionResourceInfoList[r].ignored=!0,t=!0)}));t&&(this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),jy().dispatch(Jw()))}getNoPermissionResourceInfoList(){return this.noPermissionResourceInfoList}setNoPermissionResourceInfoList(e){this.noPermissionResourceInfoList=e,this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),jy().dispatch(Jw())}getNoPermissionResourceInfoByUrl(e){const t=this.getNoPermissionResourceKey(e);return this.noPermissionResourceInfoList[t]}checkSessionPermissionForUrl(e,t,r,n){e&&t&&this.isValidToken(e,t).then((t=>{var o,i;(null==t?void 0:t.valid)?this.removeFromNoPermissionResourceInfoList(e):403===(null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.code)?this.addToNoPermissionResourceInfoList(e,r,ZS.NoPermission,!1,n):498===(null===(i=null==t?void 0:t.error)||void 0===i?void 0:i.code)&&this.addToNoPermissionResourceInfoList(e,r,ZS.InvalidToken,!1,n)}))}handleInvalidToken(e){var t,r;const n=fm(Am(null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl),Am(gm(e))),o=jy().getState(),i=this.sessions&&this.sessions[this.getSessionKeyFromUrl(e)];this.removeSession(i),Object.keys(this.requestCacheForValidatingToken).forEach((t=>{t.includes(rS(Tv(e)))&&delete this.requestCacheForValidatingToken[t]})),n&&(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||(null===(r=o.appInfo)||void 0===r?void 0:r.access)&&"public"!==o.appInfo.access)&&(this.gotoAuthErrorPage(),window.jimuConfig.isInBuilder)&&ty("jimu-for-builder").appBuilderSync.publishCheck498ErrorToBuilder(e)}}const nb=rb;var ob=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function ib(e,t,r=1){return ob(this,void 0,void 0,(function*(){const n=(e,o=0)=>t(e).catch((t=>{if(o>=r)return Promise.reject(ab(t));const i=t.options,a=rb.getInstance();return"ArcGISAuthError"!==t.name||!i||i.authentication&&498!==t.code&&403!==t.code&&"AUTHENTICATION_ERROR_CODE"!==t.code&&"GWM_0003"!==t.code?n(e,o+1):(498===t.code&&a.handleInvalidToken(t.url),function(e){return ob(this,void 0,void 0,(function*(){const t=rb.getInstance(),r=t.getServerKeyFromUrl(e);let n,o="";if(t.getNoPermissionResourceInfoByUrl(e)){const r=t.getSessionByUrl(e);return n=r?Promise.resolve(r):Promise.reject(t.getSignInErrorByCode(ZS.SignInCanceled)),n}return n=r?mb.getInstance().fetchArcGISServerInfo(e).then((r=>ob(this,void 0,void 0,(function*(){if(null==r?void 0:r.owningSystemUrl){const n=t.getClientIdByUrl(null==r?void 0:r.owningSystemUrl);let i;if(o=null==r?void 0:r.owningSystemUrl,n)i=t.signIn({fromUrl:window.location&&window.location.href,popup:!0,desUrl:null==r?void 0:r.owningSystemUrl,clientId:n,federatedServiceUrl:e}).then((e=>ob(this,void 0,void 0,(function*(){return e}))));else{if(!window.jimuConfig.isBuilder&&!window.jimuConfig.isInBuilder)return t.nonOAuthSignIn(e);i=t.useDialogToSetClientIdToConnectiosOfAppConfigAndSignIn(r.owningSystemUrl,!0,e).then((()=>t.getSessionByUrl(r.owningSystemUrl)))}return i}return t.nonOAuthSignIn(e)})))):t.signIn({fromUrl:window.location&&window.location.href,popup:!0,desUrl:e}),n.then((r=>(t.checkSessionPermissionForUrl(e,r.token,r.username,o),r))).catch((r=>(r.code===ZS.SignInCanceled&&t.addToNoPermissionResourceInfoList(e,"",ZS.SignInCanceled,!1,o),Promise.reject(r))))}))}(t.url).then((e=>n(e,o+1))).catch((e=>Promise.reject(ab(e)))))})),o=rb.getInstance(),i=o.getSessionByUrl(e);return i?n(i):o.getServerKeyFromUrl(e)?mb.getInstance().fetchArcGISServerInfo(e).then((e=>ob(this,void 0,void 0,(function*(){return(null==e?void 0:e.owningSystemUrl)?n(o.getSessionByUrl(e.owningSystemUrl)):n(void 0)})))):n(void 0)}))}function ab(e){const t=rb.getInstance(),r=t.getSignInErrorCodeByAuthError(e);return r?t.getSignInErrorByCode(r):e}const sb=[],lb={};function ub(e){sb.push(e)}function cb(e,t){return lb[fb(e,t)]}function db(e,t,r){lb[fb(e,t)]=r}function pb(e,t){delete lb[fb(e,t)]}function fb(e,t){let r="";return t&&Object.keys(t).sort(((e,t)=>e.localeCompare(t,"en"))).forEach(((e,n)=>{r=`${r}${0===n?"?":"&"}${e}=${t[e]}`})),r?`${e}${r}`:e}function hb(e,t){return sb.some((r=>(r=>{const n=Object.prototype.toString.call(r);return"[object String]"===n?r===e:"[object RegExp]"===n?r.test(e):"[object Function]"===n&&r(e,t)})(r)))}window._cachedRequests=lb;var gb=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class mb{constructor(){this.servicesInfo={},this.servicesInfoPromise={},this.arcGISServersInfo={},this.arcGISServersInfoPromise={}}static getInstance(){if(window.jimuConfig&&window.jimuConfig.isBuilder){if(window._appWindow&&window._appWindow._serviceManager)return window._appWindow._serviceManager;console.error("No window._appWindow._serviceDefinitionManager.")}return mb.instance||(mb.instance=new mb),mb.instance}getServiceInfo(e){return this.servicesInfo[e]}setServiceInfo(e,t){this.servicesInfo[e]=t}getServerInfo(e){return this.arcGISServersInfo[e]}getServerInfoByServiceUrl(e){return this.arcGISServersInfo[this.getArcGISServerUrlFromServiceUrl(e)]}clearServiceInfo(e){e&&(delete this.servicesInfo[e],delete this.servicesInfoPromise[e])}fetchServiceInfo(e){return gb(this,void 0,void 0,(function*(){return this.getServiceInfo(e)?Promise.resolve(this.getServiceInfo(e)):(this.servicesInfoPromise[e]||(this.servicesInfoPromise[e]=this.isHostedServiceInSamePortal(e).then((t=>gb(this,void 0,void 0,(function*(){return ib(e,(r=>gb(this,void 0,void 0,(function*(){return(0,qa.WY)(e,{authentication:r,httpMethod:"GET"}).then((e=>({definition:e,isHostedInSamePortal:t})))}))),1)})))).then((t=>(this.servicesInfo[e]=t,t)))),this.servicesInfoPromise[e])}))}isHostedServiceInSamePortal(e){return gb(this,void 0,void 0,(function*(){return this.fetchArcGISServerInfo(e).then((t=>(null==t?void 0:t.owningSystemUrl)?!(!/https?:\/\/(www|services)\.arcgis\.com/.test(t.owningSystemUrl)||!/maps\.arcgis\.com\/?$/.test(jy().getState().portalUrl))||!(!/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsdevext\.arcgis\.com\/?$/.test(jy().getState().portalUrl))||!(!/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsqa\.arcgis\.com\/?$/.test(jy().getState().portalUrl))||fm(jy().getState().portalUrl,t.owningSystemUrl):!!nb.getInstance().getSessionByUrl(e)))}))}fetchArcGISServerInfo(e){return gb(this,void 0,void 0,(function*(){const t=this.getArcGISServerUrlFromServiceUrl(e);return t?(this.arcGISServersInfoPromise[t]||(this.arcGISServersInfoPromise[t]=(0,qa.WY)(t,{httpMethod:"GET"}).then((e=>(this.arcGISServersInfo[t]=e,e))).catch((e=>gb(this,void 0,void 0,(function*(){return console.warn("Failed to fetch ArcGIS server info."),Promise.resolve(null)}))))),this.arcGISServersInfoPromise[t]):Promise.resolve(null)}))}getArcGISServerUrlFromServiceUrl(e){const t=nS(e);return t?t+"/rest/info":null}isHostedService(e){return gb(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?(0,qa.WY)(t+"/rest/info",{httpMethod:"GET"}).then((e=>!!e.owningSystemUrl)):Promise.resolve(!1)}))}fetchChildLayerDefinitionsFromUrls(e){return gb(this,void 0,void 0,(function*(){return Promise.allSettled(e.map((e=>gb(this,void 0,void 0,(function*(){return this.fetchServiceInfo(e).then((e=>e.definition))}))))).then((t=>{const r={};let n;return t.forEach(((t,o)=>{const i="fulfilled"===t.status?t.value:null;i&&(n=e[o],r[n]=i)})),r})).then((e=>{const t=Object.keys(e).map((t=>e[t])),r=this._getAllChildLayerIdsOfGroupLayer(t),n={};return Object.keys(e).forEach((t=>{r.some((r=>{var n;return r===`${null===(n=e[t])||void 0===n?void 0:n.id}`}))||(n[t]=e[t])})),n}))}))}_getAllChildLayerIdsOfGroupLayer(e){if(!e||0===e.length)return[];const t=e.filter((e=>e.type===Jl.GroupLayer));return this._getChildLayerIdsFromGroupLayerDefinitions(t)}_getChildLayerIdsFromGroupLayerDefinitions(e){return 0===e.length?[]:Array.prototype.concat.apply([],e.map((e=>(null==e?void 0:e.subLayers.map((e=>`${e.id}`)))||[])))}}window.jimuConfig&&!window.jimuConfig.isBuilder&&(window._serviceManager=mb.getInstance());var vb=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class yb{static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._dataSourceManager:(yb.instance||(yb.instance=new yb,window._dataSourceManager=yb.instance),yb.instance)}constructor(){this.dataSources={},this.dataSourcesCreatePromise={},this.dataSourceFactories={},window.jimuConfig.isBuilder?console.error("DataSourceManager should not be created in builder"):(Uy(this.onStoreDataSourcesChange.bind(this),["appConfig","dataSources"]),Uy(this.onStoreResourceSessionsChange.bind(this),["resourceSessions"]))}getDataSource(e){return this.dataSources[e]}getDataViewDataSource(e,t){return this.dataSources[this.getDataViewDataSourceId(e,t)]}getDataSources(){return this.dataSources}getDataSourcesAsArray(){return Object.keys(this.dataSources).map((e=>this.dataSources[e]))}setDataSource(e,t){this.dataSources[e]=t}destroyAllDataSources(){Object.keys(this.dataSources).forEach((e=>{this.destroyDataSource(e)})),this.dataSourcesCreatePromise={}}destroyDataSource(e){var t;(null===(t=this.dataSources[e])||void 0===t?void 0:t.type)===zl.Error&&this.destroyDataSource(this.restoreErrorDataSourceId(e)),this.dataSources[e]?(jy().dispatch(Xb(e)),this.dataSources[e].getDataViews().forEach((e=>{this.destroyDataSource(e.id)})),this.dataSources[e].getLocalDataSources().forEach((e=>{this.destroyDataSource(e.id)})),this.getDataSourcesAsArray().forEach((t=>{t.getOriginDataSources().find((t=>t===this.dataSources[e]))&&this.destroyDataSource(t.id)})),this.dataSources[e].destroy(),delete this.dataSources[e],delete this.dataSourcesCreatePromise[e]):this.dataSourcesCreatePromise[e]&&(jy().dispatch(Xb(e)),delete this.dataSourcesCreatePromise[e])}getConfiguredDataSources(){return Object.keys(this.dataSources).filter((e=>!this.dataSources[e].getDataSourceJson().isOutputFromWidget)).map((e=>this.getDataSource(e))).filter((e=>{var t,r;return null===(t=this.getAppConfig().dataSources)||void 0===t?void 0:t[(null===(r=e.getRootDataSource())||void 0===r?void 0:r.id)||e.id]}))}getWidgetGeneratedDataSources(){const e={},t=this.getAppConfig();return Object.keys(t.widgets).filter((e=>t.widgets[e].outputDataSources)).forEach((r=>{e[r]=t.widgets[r].outputDataSources.asMutable().map((e=>this.getDataSource(e)))})),e}createAllDataSources(){const e=this.getAppConfig()&&this.getAppConfig().dataSources,t=[];return e&&Object.keys(e).forEach((e=>{this.dataSources[e]||t.push(this.createDataSource(e).then((e=>this.createDataViews(e).then((()=>e)))).catch((t=>{console.error("Create data source failed",e,t),Promise.resolve(null)})))})),Promise.all(t)}createDataViews(e){return Promise.all(Object.keys(e.getDataSourceJson().dataViews||{}).map((t=>this.createDataSource(e.id,t)))||[])}createDataSource(e,t,r){let n,o;if("string"==typeof e){const t=this.getAppConfig().dataSources[e];if(!t)throw Error("Can not create data source."+e);o=e,n={dataSourceJson:t,dataSourceManager:this,id:o}}else if(e.dataSourceJson||e.belongToDataSource)n=e,o=n.dataSourceJson?n.dataSourceJson.id:n.belongToDataSource.getMainDataSource().id,n.dataViewId&&(t=n.dataViewId,delete n.dataViewId),n.localId&&(r=n.localId,delete n.localId),n.dataSourceManager=this,n.id=o;else{const t=e;o=t.id,n={dataSourceJson:t,dataSourceManager:this,id:o}}const i=e=>this.dataSourcesCreatePromise[e]?this.dataSourcesCreatePromise[e]:this.createDataSource(e),a=(e,t)=>{const r=this.getDataViewDataSourceId(e,t);return this.getDataSource(r)?Promise.resolve(this.getDataSource(r)):i(o).then((e=>this.createDataView(e,t)))};return t&&r?a(o,t).then((e=>this.createLocalDataSource(e,r))):t?a(o,t):r?i(o).then((e=>this.createLocalDataSource(e,r))):this.createOriginDataSources(n.dataSourceJson).catch((t=>(console.error("Create origin datasource error.",e,t),jy().dispatch(zb(o,Hl.CreateError)),Promise.reject(new iu(o,t))))).then((()=>{var t;return this.dataSourcesCreatePromise[o]?this.dataSourcesCreatePromise[o]:((null===(t=jy().getState().dataSourcesInfo[o])||void 0===t?void 0:t.instanceStatus)!==Hl.NotCreated&&jy().dispatch(zb(o,Hl.NotCreated)),this.dataSourcesCreatePromise[o]=this.createDataSourceObj(n).then((e=>e.ready().then((()=>e.fetchSchema())).then((t=>{var r,n,o;this.initSchema(e,t),this.afterCreate(e),window.jimuConfig.isInBuilder&&e.isDataSourceSet&&!e.getRootDataSource()&&e.childDataSourcesReady().then((()=>vb(this,void 0,void 0,(function*(){const t=yield e.fetchSchema();this.initSchema(e,t)}))));let i=[];if(!e.isDataSourceSet&&(null===(r=e.getSchema())||void 0===r?void 0:r.fields)){const t=this.createDataViewObj(e,Nd);if(i=i.concat(t.ready()),null===(o=null===(n=e.getDataSourceJson())||void 0===n?void 0:n.dataViews)||void 0===o?void 0:o[Md]){const t=this.createDataViewObj(e,Md);i=i.concat(t.ready())}}return e.getDataSourceJson().isOutputFromWidget&&this.createDataViewObj(e,jd),Promise.allSettled(i).then((()=>e))})))).catch((t=>{var r,i,a,s,l,u,c,d;const p=o&&(null==n?void 0:n.dataSourceJson),f=nb.getInstance().getNoPermissionResourceInfoList()||{},h=(null==t?void 0:t.isSignInError)||(null===(s=null===(i=null===(r=null==t?void 0:t.name)||void 0===r?void 0:r.toLowerCase)||void 0===i?void 0:(a=i.call(r)).includes)||void 0===s?void 0:s.call(a,"abort"))||(null===(d=null===(u=null===(l=null==t?void 0:t.message)||void 0===l?void 0:l.toLowerCase)||void 0===u?void 0:(c=u.call(l)).includes)||void 0===d?void 0:d.call(c,"abort"))||Object.keys(f).some((e=>{var t,r;return(null===(t=n.dataSourceJson.url)||void 0===t?void 0:t.includes(e))||(null===(r=n.dataSourceJson.portalUrl)||void 0===r?void 0:r.includes(e))||e.includes(n.dataSourceJson.itemId)}));if(p&&h){const e=this.getErrorDataSourceId(o),t=Object.assign(Object.assign({},n),{id:e,dataSourceJson:n.dataSourceJson.set("id",e).set("type",zl.Error)});this.dataSourcesCreatePromise[e]=this.createDataSourceObj(t).then((t=>(this.dataSources[e]=t,t)))}return console.error("Create datasource error.",e,t),jy().dispatch(zb(o,Hl.CreateError)),Promise.reject(new iu(o,t))})),this.dataSourcesCreatePromise[n.dataSourceJson.id])}))}createDataSourceAndWaitForChildrenReady(e){return vb(this,void 0,void 0,(function*(){const t=yield this.createDataSource(e);return(null==t?void 0:t.isDataSourceSet)&&(yield t.childDataSourcesReady()),t}))}createDataView(e,t){const r=this.getDataViewDataSourceId(e.id,t);return this.getDataSource(r)?this.getDataSource(r):this.createDataViewObj(e,t)}createLocalDataSource(e,t){const r=this.getLocalDataSourceId(e.id,t);return this.getDataSource(r)?this.getDataSource(r):this.createLocalDataSourceObj(e,t)}afterCreate(e){var t,r,n;this.dataSources[e.id]=e,jy().dispatch(zb(e.id,Hl.Created));const o=e.getMainDataSource().id;if(e.id!==o&&e.dataViewId!==Nd&&e.dataViewId!==Md&&(null===(t=e.getMainDataSource().getSelectedRecordIds())||void 0===t?void 0:t.length)>0){const t=null===(n=null===(r=e.getMainDataSource().getSelectOptionsFromInfo())||void 0===r?void 0:r.asMutable)||void 0===n?void 0:n.call(r,{deep:!0});e.updateSelectionInfo(Object.assign(Object.assign({},t),{ids:e.getMainDataSource().getSelectedRecordIds()}),e.getMainDataSource())}}getDataViewDataSourceId(e,t){return`${e}-${t}`}getLocalDataSourceId(e,t){return`${e}-${t}`}createDataSourceByUseDataSource(e,t){const r=this.getAppConfig().dataSources;return r[e.mainDataSourceId]?e.dataViewId?e.dataViewId===Nd||e.dataViewId===jd||r[e.mainDataSourceId].dataViews[e.dataViewId]?this.createDataSource(e.mainDataSourceId,e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),Promise.reject(new iu(e.dataSourceId,"Can not find data source."))):this.createDataSource(e.mainDataSourceId,null,t):r[e.rootDataSourceId]?this.createDataSource(e.rootDataSourceId).then((t=>t.createDataSourceById(e.mainDataSourceId).catch((e=>(console.error("Create child data source error.",e),Promise.reject(e)))))).then((()=>{const r=this.getDataSource(e.mainDataSourceId);return r?e.dataViewId?e.dataViewId===Nd||r.getDataSourceJson().dataViews[e.dataViewId]?this.createDataSource(r.getDataSourceJson(),e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),Promise.reject(new iu(e.dataSourceId,"Can not find data source."))):t?this.createDataSource(r.getDataSourceJson(),null,t):r:Promise.reject(new iu(e.dataSourceId,"Can not find data source."))})):(console.error("Can not find data source:",e.dataSourceId),Promise.reject(new iu(e.dataSourceId,"Can not find data source.")))}createOriginDataSources(e){return e.isOutputFromWidget&&e.originDataSources&&e.originDataSources.length>0?Promise.all(e.originDataSources.asMutable().map((e=>this.createDataSourceByUseDataSource(e)))).then((()=>Promise.resolve())):Promise.resolve()}initSchema(e,t){e.setFetchedSchema(t);const r=e.getDataSourceJson().schema;if(e.getDataSourceJson().isOutputFromWidget)if(e.getDataSourceJson().schema)e.setSchema(e.getDataSourceJson().schema);else if(e.getDataSourceJson().originDataSources&&e.getDataSourceJson().originDataSources.length>0)if(1===e.getDataSourceJson().originDataSources.length){const t=this.getDataSource(e.getDataSourceJson().originDataSources[0].dataSourceId);e.setSchema(t&&t.getSchema())}else console.error("Datasource created from more than one data source must save the schema in app config.");else console.error("Datasource without origin data source must save the schema in app config.");else{jy().getState().appConfig.dataSources[e.id]&&(null==t?void 0:t.label)&&t.label!==e.getDataSourceJson().sourceLabel&&jy().dispatch(Eb(jy().getState().appConfig.setIn(["dataSources",e.id,"sourceLabel"],t.label)));const n=this.mergeSchema(e,r,t);e.setSchema(n)}}mergeSchema(e,t,r){if(e.isDataSourceSet){if(!t)return r;let n=t;return Object.keys(r.childSchemas).forEach((o=>{if(e.getReversedConfigSchema().childSchemas[o])e.getReversedConfigSchema().childSchemas[o].forEach((t=>{n=n.setIn(["childSchemas",t.jimuChildId],e.getChildDataSource(t.jimuChildId).getSchema())}));else{if(t.childSchemas[o])return void console.warn("Layer existed, please re-map the data source.",e.id,o);n=n.setIn(["childSchemas",o],r.childSchemas[o])}})),Object.keys(t.childSchemas).forEach((e=>{const n=t.childSchemas[e].childId;r.childSchemas[n]||console.error("Used data is not found.",n)})),n}return this.mergeOneSchema(e,t,r)}mergeOneSchema(e,t,r){if(!t)return r;let n=t;return(null==r?void 0:r.fields)&&Object.keys(r.fields).forEach((o=>{if(e.getReversedConfigSchema().fields[o])e.getReversedConfigSchema().fields[o].forEach((e=>{n.fields[e.jimuName].alias||(n=n.setIn(["fields",e.jimuName,"alias"],r.fields[o].alias))}));else{if(t.fields[o])return void console.warn("Field name existed, please re-map the data source.",e.id,o);const i=r.fields[o];n=n.setIn(["fields",o],i)}})),(null==t?void 0:t.fields)&&Object.keys(t.fields).forEach((e=>{var n;const o=t.fields[e].name;(null===(n=null==r?void 0:r.fields)||void 0===n?void 0:n[o])||console.error("Used field is not found.",o)})),n}getDataSourceFactory(e){let t=this.getDataSourceFactorySync(e);if(t)return Promise.resolve(t);const r=this.getDataSourceFactoryUri(e);return ry(r,["default"]).then((n=>{try{t=new n.default,this.dataSourceFactories[r]=t}catch(t){throw console.error("Load data source factory error.",e,t),t}return t}))}getDataSourceFactoryUri(e){const t=fy.getInstance().getExtensions(Zv.DataSourceFactoryUri).filter((t=>t.getFactoryUri(e)))[0];if(!t)throw console.error("Unknown data source type:"+e),Error("Unknown data source type:"+e);return t.getFactoryUri(e)}getDataSourceFactorySync(e){const t=this.getDataSourceFactoryUri(e),r=this.dataSourceFactories[t];if(r)return r}createDataSourceObj(e){return this.getDataSourceFactory(e.dataSourceJson.type).then((t=>{let r;try{r=t.createDataSource(e)}catch(t){return console.error("Create data source error.",e.dataSourceJson,t),Promise.reject(t)}return Promise.resolve(r)}))}createDataViewObj(e,t){const r=this.getDataSourceFactoryUri(e.type),n=this.dataSourceFactories[r];if(!n)throw Error("Data source is not created");let o=null;try{o=n.createDataSource({id:this.getDataViewDataSourceId(e.id,t),dataViewId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(r){console.error("Create data view error.",e.id,t,r),jy().dispatch(zb(this.getDataViewDataSourceId(e.id,t),Hl.CreateError))}return o}createLocalDataSourceObj(e,t){const r=this.getDataSourceFactoryUri(e.type),n=this.dataSourceFactories[r];if(!n)throw Error("Data source is not created");let o=null;try{o=n.createDataSource({id:this.getLocalDataSourceId(e.id,t),dataViewId:e.isDataView?e.dataViewId:null,localId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(r){console.error("Create local data source error.",e.id,t,r),jy().dispatch(zb(this.getLocalDataSourceId(e.id,t),Hl.CreateError))}return o}getAppConfig(){return jy().getState().appConfig}onStoreDataSourcesChange(e,t){e&&t&&Object.keys(e).forEach((r=>{if(t[r]){if(t[r]&&e[r]){const e=t[r],n=this.getDataSource(r);n&&(n.type!==e.type?Ky((()=>{this.destroyDataSource(r),this.createDataSource(r).then((e=>{this.createDataViews(e)}))})):this.updateDataSourceByDataSourceJson(n,e))}}else Ky((()=>{this.destroyDataSource(r)}))})),window.jimuConfig.isInBuilder&&e&&t&&Object.keys(t).forEach((t=>{var r;const n=jy().getState();e[t]||(null===(r=n.dataSourcesInfo[t])||void 0===r?void 0:r.instanceStatus)||this.createDataSource(t).then((e=>{this.createDataViews(e)}))}))}onStoreResourceSessionsChange(e,t){Ky((()=>vb(this,void 0,void 0,(function*(){const r=[],n=[];this.getDataSourcesAsArray().forEach((o=>{var i;if(o.getMainDataSource().id!==o.id)return;const a=o.getDataSourceJson().url&&(null===(i=mb.getInstance().getServerInfoByServiceUrl(o.getDataSourceJson().url))||void 0===i?void 0:i.owningSystemUrl),s=o.getDataSourceJson().url&&nS(o.getDataSourceJson().url),l=gm(a||s),u=gm(o.getDataSourceJson().portalUrl&&Am(o.getDataSourceJson().portalUrl));if(!l&&!u)return;const c=l&&(null==e?void 0:e[l])!==(null==t?void 0:t[l]),d=u&&(null==e?void 0:e[u])!==(null==t?void 0:t[u]);if(c||d){c&&mb.getInstance().clearServiceInfo(o.getDataSourceJson().url);const e=o.getRootDataSource();(null==e?void 0:e.type)===Yl.WebMap||(null==e?void 0:e.type)===Yl.WebScene?r.some((t=>t.id===e.id))||r.push(e):r.some((e=>e.id===o.id))||r.push(o);const t=o.type===zl.Error?this.restoreErrorDataSourceId(o.id):o.id,i=Ae({dataSourceId:t,mainDataSourceId:t,rootDataSourceId:null==e?void 0:e.id});n.some((e=>e.dataSourceId===i.dataSourceId))||n.push(i)}})),yield Promise.all(r.map((e=>e.isDataSourceSet?e.areSomeChildDataSourcesPending().then((t=>t&&r.splice(r.indexOf(e),1))):Promise.resolve()))),r.forEach((e=>{this.destroyDataSource(e.id)})),n.forEach((e=>{this.createDataSourceByUseDataSource(e)}))}))))}getErrorDataSourceId(e){return`error${e.charAt(0).toUpperCase()}${e.slice(1)}`}restoreErrorDataSourceId(e){const t=e.replace(/^error/,"");return`${t.charAt(0).toLowerCase()}${t.slice(1)}`}updateDataSourceByDataSourceJson(e,t){var r,n;if(e.getDataSourceJson()!==t){if(e.getDataSourceJson().query!==(null==t?void 0:t.query)&&Ky((()=>{e.clearRecords(),e.clearSelection()})),e.getDataSourceJson().dataViews!==(null==t?void 0:t.dataViews)){const r=e.getDataSourceJson().dataViews,n=null==t?void 0:t.dataViews;r&&n&&Object.keys(r).forEach((o=>{if(n[o]){if(n[o]&&r[o]){const r=this.getDataViewDataSourceId(e.id,o),n=this.getDataSource(r);n&&(Ad(n.getDataSourceJson().dataViews[o],t.dataViews[o])||Ky((()=>{n.clearRecords(),n.clearSelection()})))}}else Ky((()=>{this.destroyDataSource(this.getDataViewDataSourceId(e.id,o))}))}))}let o;e.getDataSourceJson().childDataSourceJsons!==(null==t?void 0:t.childDataSourceJsons)&&e.getChildDataSources().forEach((e=>{var r;this.updateDataSourceByDataSourceJson(e,null===(r=null==t?void 0:t.childDataSourceJsons)||void 0===r?void 0:r[e.jimuChildId])})),o=(null===(r=e.getDataSourceJson().originDataSources)||void 0===r?void 0:r.length)===(null===(n=null==t?void 0:t.originDataSources)||void 0===n?void 0:n.length)&&(!e.getDataSourceJson().originDataSources||e.getDataSourceJson().originDataSources.every((e=>(null==t?void 0:t.originDataSources)&&(null==t?void 0:t.originDataSources.some((t=>t.dataSourceId===e.dataSourceId))))));const i=t&&(e.getDataSourceJson().schema!==t.schema||!o||e.getDataSourceJson().itemId!==t.itemId||e.getDataSourceJson().portalUrl!==t.portalUrl||e.getDataSourceJson().url!==t.url);e.setDataSourceJson(t),i&&(e.getDataSourceJson().isDataInDataSourceInstance?(e.clearSourceRecordsNotAddVersion(),this.initSchema(e,null)):(e.clearRecordsNotAddVersion(),e.fetchSchema().then((t=>{this.initSchema(e,t),e.addVersion()})))),Ky((()=>{e.addVersion()}))}}}const Sb=yb;var bb;function wb(e){return{type:bb.AppConfigLoaded,appConfig:e}}function Ib(e){return{type:bb.LoadAppConfigFailed,error:e}}function Eb(e){return{type:bb.AppConfigChanged,appConfig:e}}function Cb(e){return{type:bb.AppPathChanged,path:e}}function Ob(e){return{type:bb.AppInfoChanged,appInfo:e}}function xb(e){return{type:bb.AppIdChanged,appId:e}}function Tb(e){return{type:bb.WidgetClassLoaded,widgetUri:e}}function Ab(e,t){return{type:bb.WidgetUpgraded,widgetId:e,upgradeInfo:t}}function Pb(e,t){return{type:bb.WidgetConfigLoaded,widgetId:e,config:t}}function Db(e,t){return{type:bb.OpenWidget,widgetId:e,controllerWidgetId:t}}function Rb(e,t){return{type:bb.OpenWidgets,widgetIds:e,controllerWidgetId:t}}function _b(e){return{type:bb.CloseWidget,widgetId:e}}function kb(e){return{type:bb.CloseWidgets,widgetIds:e}}function Lb(e){return{type:bb.ResetWidgetState,widgetId:e}}function Nb(e){return{type:bb.ResetWidgetsState,widgetIds:e}}function Mb(e){return{type:bb.ActivateWidget,widgetId:e}}function jb(e){return{type:bb.AppContextInit,appContext:e}}function Ub(e,t){return{type:bb.I18nMessagesLoaded,key:e,messages:t}}function Fb(e){return{type:bb.QueryObjectChanged,query:e}}function Bb(e){return{type:bb.UrlHashObjectChanged,hash:e}}function $b(){return{type:bb.SetAppInBuilder}}function Gb(e){return{type:bb.AppModeChanged,mode:e}}function Wb(e){return{type:bb.LayoutClassLoaded,layoutName:e}}function Vb(e,t){var r;const n=null===(r=Sb.getInstance())||void 0===r?void 0:r.getDataSource(e);return n&&t===Hl.NotReady&&(n.clearSourceRecordsNotAddVersion(),n.getAllDerivedDataSources().forEach((e=>{e.clearSourceRecordsNotAddVersion()}))),n&&t===Hl.Unloaded&&(n.clearRecordsNotAddVersion(),n.getAllDerivedDataSources().forEach((e=>{e.clearRecordsNotAddVersion()}))),{type:bb.DataSourceStatusChanged,dataSourceId:e,status:t,dataSourceManager:Sb.getInstance()}}function Hb(e,t){return{type:bb.DataSourceCountStatusChanged,dataSourceId:e,countStatus:t,dataSourceManager:Sb.getInstance()}}function zb(e,t){return{type:bb.DataSourceInstanceStatusChanged,dataSourceId:e,status:t}}function qb(e,t){return{type:bb.DataSourceSaveStatusChanged,dataSourceId:e,saveStatus:t}}function Yb(e){return{type:bb.DataSourceVersionAdded,dataSourceId:e}}function Jb(e){return{type:bb.DataSourceSourceVersionAdded,dataSourceId:e}}function Kb(e,t){return{type:bb.ChangeDataSourceGDBVersion,dataSourceId:e,gdbVersion:t}}function Xb(e){return{type:bb.ClearDataSourceInfo,dataSourceId:e}}function Qb(e,t){return{type:bb.UpdateDataSourceInfo,dataSourceId:e,dataSourceInfo:t}}function Zb(e,t){return{type:bb.SetDataNeedRefresh,dataSourceId:e,refresh:t}}function ew(e,t,r){return{type:bb.UpdateWidgetQuery,dataSourceId:e,widgetId:t,query:r}}function tw(e,t){return{type:bb.JimuMapViewAdded,jimuMapViewId:e,jimuMapViewInfo:t}}function rw(e,t){return{type:bb.JimuMapViewUpdated,jimuMapViewId:e,jimuMapViewInfo:t}}function nw(e){return{type:bb.JimuMapViewRemoved,jimuMapViewId:e}}function ow(e,t){return{type:bb.RequestAutoControlMapWidget,mapWidgetId:e,autoControlWidgetId:t}}function iw(e){return{type:bb.ReleaseAutoControlMapWidget,mapWidgetId:e}}function aw(e,t){return{type:bb.MapWidgetInfoAdded,mapWidgetId:e,mapWidgetInfo:t}}function sw(e,t){return{type:bb.MapWidgetInfoUpdated,mapWidgetId:e,mapWidgetInfo:t}}function lw(e){return{type:bb.MapWidgetInfoRemoved,mapWidgetId:e}}function uw(e){return{type:bb.InitStoreExtensionState,extensionId:e}}function cw(e,t,r){return{type:bb.WidgetStatePropChange,widgetId:e,propKey:t,value:r}}function dw(e,t){return{type:bb.WidgetMutableStatePropChange,widgetId:e,propKey:t}}function pw(e){return{type:bb.SetPortalInfo,portalInfo:e}}function fw(e,t){return{type:bb.DataSourceSelectedIndexesChanged,dataSourceId:e,selectedIndexes:t}}function hw(e,t){return{type:bb.DataSourceSelectionChanged,dataSourceId:e,selectOptions:t}}function gw(e){return{type:bb.SessionStart,token:e}}function mw(e){return{type:bb.UserSignIn,user:e}}function vw(){return{type:bb.UserSignOut}}function yw(e){const t=window.document&&window.document.documentElement;return t&&(t.classList.remove(`size-mode-${Dl.Large}`),t.classList.remove(`size-mode-${Dl.Medium}`),t.classList.remove(`size-mode-${Dl.Small}`),t.classList.add(`size-mode-${e}`)),{type:bb.BrowserSizeModeChanged,browserSizeMode:e}}function Sw(e,t){return{type:bb.SetWidgetIsInlineEditingState,widgetId:e,isInlineEditing:t}}function bw(e,t){return{type:bb.SetWidgetPreloadProps,widgetId:e,props:t}}function ww(e,t){return{type:bb.SetDataSourcePreloadData,dataSourceId:e,data:t}}function Iw(e){return{type:bb.NetworkStatusChanged,isOffLine:e}}function Ew(e){return{type:bb.CurrentPageChanged,pageId:e}}function Cw(e){return{type:bb.CurrentDialogChanged,dialogId:e}}function Ow(e){return{type:bb.DialogInfosChanged,dialogInfos:e}}function xw(e){return{type:bb.SelectionChanged,selection:e}}function Tw(e){return{type:bb.ClipboardChanged,item:e}}function Aw(e){return{type:bb.UpdateStoreState,state:e}}function Pw(e){return{type:bb.AppRuntimeInfoInit,info:e}}function Dw(e){return{type:bb.ThemeVariablesChanged,theme:e}}function Rw(e){return{type:bb.SetPortalSelf,portalSelf:e}}function _w(e){return{part:e,type:bb.ActivePagePartChanged}}function kw(e){return{type:bb.OpenOverlay,id:e}}function Lw(e){return{type:bb.CloseOverlay,id:e}}function Nw(e){return{type:bb.ActiveOverlay,id:e}}function Mw(e){return{type:bb.ZoomScaleChanged,zoomScale:e}}function jw(e,t){return{type:bb.SetIsBusy,isBusy:e,loadingType:t}}function Uw(e,t){return{type:bb.LayoutChanged,appConfig:e,selection:t}}function Fw(e,t){return{type:bb.SectionNavInfoChanged,sectionId:e,navInfo:t}}function Bw(e,t,r=!0){return{type:bb.ScreenGroupNavInfoChanged,screenGroupId:e,activeIndex:t,scrollIntoView:r}}function $w(e,t){return{type:bb.ScreenPanelVisibleChange,screenId:e,visible:t}}function Gw(e){return{type:bb.SetupAnimationPreview,data:e}}function Ww(){return{type:bb.ClearAnimationPreview}}function Vw(e){return{type:bb.SetupHoverPreview,data:e}}function Hw(e){return{type:bb.UserLocaleChanged,isChanged:e}}function zw(e){return{type:bb.HasPrivilegeChanged,error:e}}function qw(e,t,r){return{type:bb.AddToRegisterClientIdList,portalUrl:e,needToSignIn:t,serviceUrl:r}}function Yw(e){return{type:bb.RemoveFromRegisterClientIdList,portalUrl:e}}function Jw(){return{type:bb.UpdateNoPermissionResourceChangedFlag}}function Kw(e,t){return{type:bb.UpdateResourceSessions,resourceRootUrl:e,userName:t}}function Xw(){return{type:bb.ActivePrintPreview}}function Qw(){return{type:bb.QuitPrintPreview}}function Zw(e,t,r){return{type:bb.UtilityStateChange,id:e,success:t,isSignInError:r}}function eI(e,t){return{type:bb.ExtensionRegistered,epName:e,extension:t}}function tI(e){return{type:bb.SaveThumbnailUrl,saveThumbnailUrl:e}}!function(e){e.InitStoreExtensionState="INIT_STORE_EXTENSION_STATE",e.ExtensionRegistered="EXTENSION_REGISTERED",e.AppConfigLoaded="APPCONFIG_LOADED",e.AppConfigChanged="APPCONFIG_CHANGED",e.LoadAppConfigFailed="LOAD_APPCONFIG_FAILED",e.ThemeVariablesChanged="THEME_VARIABLES_CHANGED",e.SetPortalInfo="SET_PORTAL_INFO",e.SetPortalSelf="SET_PORTAL_SELF",e.WidgetClassLoaded="WIDGET_CLASS_LOADED",e.WidgetConfigLoaded="WIDGET_CONFIG_LOADED",e.WidgetUpgraded="WIDGET_UPGRADED",e.OpenWidget="OPEN_WIDGET",e.OpenWidgets="OPEN_WIDGETS",e.CloseWidget="CLOSE_WIDGET",e.CloseWidgets="CLOSE_WIDGETS",e.ResetWidgetState="RESET_WIDGET_STATE",e.ResetWidgetsState="RESET_WIDGETS_STATE",e.SetWidgetIsInlineEditingState="SET_WIDGET_IS_INLINE_EDITING_STATE",e.SetWidgetPreloadProps="SET_WIDGET_PRELOAD_PROPS",e.ActivateWidget="ACTIVATE_WIDGET",e.SetAppInBuilder="SET_APP_IN_BUILDER",e.LayoutClassLoaded="LAYOUT_CLASS_LOADED",e.AppContextInit="APP_CONTEXT_INIT",e.I18nMessagesLoaded="I18N_MESSAGES_LOADED",e.QueryObjectChanged="QUERY_OBJECT_CHANGED",e.UrlHashObjectChanged="URL_HASH_OBJECT_CHANGED",e.AppModeChanged="APP_MODE_CHANGED",e.SelectionChanged="SELECTION_CHANGED",e.AppRuntimeInfoInit="APP_RUNTIME_INFO_INIT",e.CurrentPageChanged="CURRENT_PAGE_CHANGED",e.CurrentDialogChanged="CURRENT_DIALOG_CHANGED",e.DialogInfosChanged="DIALOG_INFOS_CHANGED",e.ClipboardChanged="CLIPBOARD_CHANGED",e.AppPathChanged="APP_PATH_CHANGED",e.AppIdChanged="APP_ID_CHANGED",e.AppInfoChanged="APP_INFO_CHANGED",e.NetworkStatusChanged="NETWORK_STATUS_CHANGED",e.DataSourceStatusChanged="DATA_SOURCE_STATUS_CHANGED",e.DataSourceCountStatusChanged="DATA_SOURCE_COUNT_STATUS_CHANGED",e.DataSourceInstanceStatusChanged="DATA_SOURCE_INSTANCE_STATUS_CHANGED",e.DataSourceSaveStatusChanged="DATA_SOURCE_SAVE_STATUS_CHANGED",e.DataSourceVersionAdded="DATA_SOURCE_VERSION_ADDED",e.DataSourceSourceVersionAdded="DATA_SOURCE_SOURCE_VERSION_ADDED",e.DataSourceSelectedIndexesChanged="DATA_SOURCE_SELECTED_INDEXES_CHANGED",e.DataSourceSelectionChanged="DATA_SOURCE_SELECTION_CHANGED",e.SetDataSourcePreloadData="SET_DATA_SOURCE_PRELOAD_DATA",e.SetDataNeedRefresh="SET_DATA_NEED_REFRESH",e.UpdateWidgetQuery="UPDATE_WIDGET_QUERY",e.ChangeDataSourceGDBVersion="CHANGE_DATA_SOURCE_GDB_VERSION",e.ClearDataSourceInfo="CLEARE_DATA_SOURCE_INFO",e.UpdateDataSourceInfo="UPDATE_DATA_SOURCE_INFO",e.JimuMapViewAdded="JIMU_MAPVIEW_ADDED",e.JimuMapViewRemoved="JIMU_MAPVIEW_REMOVED",e.JimuMapViewUpdated="JIMU_MAPVIEW_UPDATED",e.MapWidgetInfoAdded="MAP_WIDGET_INFO_ADDED",e.MapWidgetInfoRemoved="MAP_WIDGET_INFO_REMOVED",e.MapWidgetInfoUpdated="MAP_WIDGET_INFO_UPDATED",e.RequestAutoControlMapWidget="REQUEST_AUTO_CONTROL_MAP_WIDGET",e.ReleaseAutoControlMapWidget="RELEASE_AUTO_CONTROL_MAP_WIDGET",e.WidgetStatePropChange="WIDGET_STATE_PROP_CHANGE",e.WidgetMutableStatePropChange="WIDGET_MUTABLE_STATE_PROP_CHANGE",e.SessionStart="SESSION_START",e.UserSignIn="USER_SIGN_IN",e.UserSignOut="USER_SIGN_OUT",e.BrowserSizeModeChanged="BROWSER_SIZE_MODE_CHANGED",e.UpdateStoreState="UPDATE_STORE_STATE",e.ActivePagePartChanged="ACTIVE_PAGE_PART_CHANGED",e.OpenOverlay="OPEN_OVERLAY",e.CloseOverlay="CLOSE_OVERLAY",e.ActiveOverlay="ACTIVE_OVERLAY",e.SetIsBusy="SET_IS_BUSY",e.ZoomScaleChanged="ZOOM_SCALE_CHANGED",e.LayoutChanged="LAYOUT_CHANGED",e.SectionNavInfoChanged="SECTION_NAV_INFO_CHANGED",e.SetupAnimationPreview="SETUP_ANIMATION_PREVIEW",e.ClearAnimationPreview="CLEAR_ANIMATION_PREVIEW",e.SetupHoverPreview="SETUP_HOVER_PREVIEW",e.ScreenGroupNavInfoChanged="SCREEN_GROUP_NAV_INFO_CHANGE",e.UserLocaleChanged="USER_LOCALE_CHANGED",e.HasPrivilegeChanged="HAS_PRIVILEGE_CHANGED",e.AddToRegisterClientIdList="ADD_TO_REGISTER_CLIENT_ID_LIST",e.RemoveFromRegisterClientIdList="REMOVE_FROM_REGISTER_CLIENT_ID_LIST",e.UpdateNoPermissionResourceChangedFlag="UPDATE_NO_PERMISSION_RESOURCE_CHANGED_FLAG",e.UpdateResourceSessions="UPDATE_RESOURCE_SESSIONS",e.ScreenPanelVisibleChange="SCREEN_PANEL_VISIBLE_CHANGE",e.ActivePrintPreview="ACTIVE_PRINT_PREVIEW",e.QuitPrintPreview="QUIT_PRINT_PREVIEW",e.UtilityStateChange="UTILITY_STATE_CHANGE",e.SaveThumbnailUrl="SAVE_THUMBNAIL_URL"}(bb||(bb={}));var rI=s(6598),nI=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};let oI={};function iI(e){return nI(this,void 0,void 0,(function*(){const t=nb.getInstance(),r=t.handleAuthError.bind(t);return oI[e]||(oI[e]=(0,qa.WY)(`${dm(e)}portals/self`,{authentication:t.getMainSession(),httpMethod:"GET",params:{f:"json",culture:window.locale}}).then((t=>{if(!t.isPortal){const r=`https://${t.urlKey}.${t.customBaseUrl}`;t.urlKey&&!fm(e,r)&&jy().dispatch(pw({portalUrl:r}))}return jy().dispatch(Rw(t)),t})).catch((e=>{r(e,!1)}))),oI[e]}))}function aI(){oI={}}const sI={};function lI(e=Lv().appId){return nI(this,void 0,void 0,(function*(){return sI[e]||(window.jimuConfig.isDevEdition?sI[e]=function(e){return nI(this,void 0,void 0,(function*(){return yield window.fetch(`/apps/${e}/info.json`).then((e=>nI(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>Object.assign(Object.assign({},e),{name:e.title})))}))}(e):sI[e]=function(e){return nI(this,void 0,void 0,(function*(){const t=nb.getInstance(),r=jy().getState().portalUrl,n=yield iI(r),o=n.isPortal?r:`https://${n.urlKey}.${n.customBaseUrl}`;return yield(0,rI.rV)(e,{portal:dm(o),authentication:t.getSessionByUrl(r)}).then((e=>Object.assign(Object.assign({},e),{name:e.title}))).catch((e=>"CONT_0001"===e.code?Promise.reject(e):Promise.reject({})))}))}(e)),sI[e]}))}function uI(e){delete sI[e]}const cI={ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",ControlLeft:"control",ControlRight:"control"},dI=e=>"code"in e?!!cI[e.code]:["Shift","Control","Alt","Meta"].includes(e.key),pI={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};function fI(e){if("undefined"==typeof window)return;let t=e.key;navigator.userAgent.includes("Edge")&&(dI(e)||pI[e.keyCode]||(t="key"+t));const r=new KeyboardEvent(e.type,{key:t+"-manual",code:e.code,location:e.location,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat,charCode:e.charCode,keyCode:e.keyCode,which:e.which});document.dispatchEvent(r)}var hI,gI,mI=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.AppList="AppList",e.Builder="Builder",e.Experience="Experience"}(hI||(hI={})),function(e){e.InvalidUserLevel="InvalidUserLevel",e.InvalidPrivilege="InvalidPrivilege",e.InvalidLicense="InvalidLicense",e.InvalidAppBlockedByOrg="InvalidAppBlockedByOrg",e.InvalidResourceExperience="InvalidResourceExperience",e.InvalidResourceItem="InvalidResourceItem",e.InvalidResourcePermission="InvalidResourcePermission",e.InvalidResourcePermissionForReadOnly="InvalidResourcePermissionForReadOnly",e.NullInfo=""}(gI||(gI={}));const vI="OAUTH_0070";function yI(e){return mI(this,void 0,void 0,(function*(){return yield bI(e).then((e=>e.valid))}))}function SI(e){return mI(this,void 0,void 0,(function*(){return yield _I(e).then((e=>mI(this,void 0,void 0,(function*(){return yield CI(e)}))))}))}function bI(e,t){return mI(this,void 0,void 0,(function*(){return yield _I(e).then((r=>mI(this,void 0,void 0,(function*(){const n=function(e,t){return mI(this,void 0,void 0,(function*(){const r=function(){const e=jy().getState();return e.appId||e.queryObject.id||e.queryObject.template}(),n={valid:!0,isExperience:!0,isValidItem:!0,hasPermissionToAccess:!0,viewOnly:!1};return e===hI.AppList||window.jimuConfig.isDevEdition?yield Promise.resolve(n):r?/\.json$/.test(r)||/^https/.test(r)?yield Promise.resolve(n):yield PI(r).then((r=>mI(this,void 0,void 0,(function*(){if(!r||"Web Experience"!==r.type&&"Web Experience Template"!==r.type)return n.valid=!1,n.isExperience=!1,n;{const o=!!jy().getState().queryObject.template;if(e===hI.Builder&&!o){const e=yield xI(),o="org_admin"===(null==e?void 0:e.role)&&"self"===r.contentOrigin,i=r.owner===(null==e?void 0:e.username),a=yield kI(r.id);o||i||a||t||(n.valid=!1,n.hasPermissionToAccess=!1)}return r.origin&&(n.viewOnly=!0),n}})))).catch((e=>(e&&"CONT_0001"===e.code?(n.valid=!1,n.isValidItem=!1):(n.valid=!1,n.hasPermissionToAccess=!1),n))):yield Promise.resolve(n)}))}(e,t),o=function(e){return mI(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition||e!==hI.Builder&&e!==hI.AppList?Promise.resolve(!0):yield xI().then((e=>!(!e||!e.orgId))).catch((()=>!1))}))}(e),i=function(e){return mI(this,void 0,void 0,(function*(){return yield II().then((t=>mI(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition&&t&&(e===hI.Builder||e===hI.AppList)?yield function(){return mI(this,void 0,void 0,(function*(){return yield xI().then((e=>!(!e||"2"!==e.level))).catch((()=>!1))}))}():yield Promise.resolve(!0)}))))}))}(e),a=function(e,t){return mI(this,void 0,void 0,(function*(){return yield CI(t).then((t=>{const r={valid:!1,capabilities:t,invalidInfo:gI.NullInfo,invalidMessage:""};if(window.jimuConfig.isDevEdition){if(e===hI.AppList)return r.valid=t.canCreateExperience,r;if(e===hI.Builder)return r.valid=t.canCreateExperience,r;if(e===hI.Experience)return r.valid=!0,r}else{if(e===hI.AppList)return r.valid=!0,r;if(e===hI.Builder)return r.valid=t.canCreateExperience,r;if(e===hI.Experience)return r.valid=!0,r}}))}))}(e,r),s=function(e,t){return mI(this,void 0,void 0,(function*(){const r=jy().getState();return window.jimuConfig.isDevEdition?yield Promise.resolve({valid:!0,viewOnly:!1}):e===hI.Builder||e===hI.AppList?yield Promise.resolve(t):r.appId?/^\/templates\/.*\.json$/.test(r.appId)?yield Promise.resolve({valid:!0,viewOnly:!1}):yield function(e){return mI(this,void 0,void 0,(function*(){return yield PI(e).then((e=>e&&"public"===e.access))}))}(r.appId).then((e=>e&&(t.valid||t.messageCode!==vI)?{valid:!0,viewOnly:!1}:t)).catch((e=>({valid:!0,viewOnly:!1}))):Promise.resolve({valid:!0,viewOnly:!1})}))}(e,r);return yield Promise.all([n,o,i,a,s])})))).then((t=>{const[r,n,o,i,a]=t,s={valid:r.valid&&n&&o&&i.valid&&a.valid&&(e!==hI.Builder||!r.viewOnly&&!a.viewOnly),capabilities:{canViewExperience:o&&i.capabilities.canViewExperience&&a.valid,canCreateExperience:!r.viewOnly&&o&&i.capabilities.canCreateExperience&&a.valid&&!a.viewOnly,canUpdateExperience:!r.viewOnly&&o&&i.capabilities.canUpdateExperience&&a.valid&&!a.viewOnly,canDeleteExperience:!r.viewOnly&&o&&i.capabilities.canDeleteExperience&&a.valid&&!a.viewOnly,canShareExperience:!r.viewOnly&&o&&i.capabilities.canShareExperience&&a.valid&&!a.viewOnly,canEditFeature:i.capabilities.canEditFeature},invalidInfo:gI.NullInfo,invalidMessage:""};return s.invalidInfo=function(e,t,r,n,o,i){let a=gI.NullInfo;return a=n?i.valid?!o.valid||!r||e===hI.Builder&&i.viewOnly?gI.InvalidPrivilege:t.valid&&e===hI.Builder&&t.viewOnly?gI.InvalidResourcePermissionForReadOnly:t.valid?gI.NullInfo:t.isExperience?t.isValidItem?gI.InvalidResourcePermission:gI.InvalidResourceItem:gI.InvalidResourceExperience:i.messageCode===vI?gI.InvalidAppBlockedByOrg:gI.InvalidLicense:gI.InvalidUserLevel,a}(e,r,n,o,i,a),s.invalidMessage=function(e,t){const r=Qh();let n="";return OI()?t===gI.InvalidLicense?e===hI.Builder||e===hI.AppList?n=r.formatMessage({id:"essentialAppsLicenseErrorForBuilder",defaultMessage:gS.essentialAppsLicenseErrorForBuilder}):e===hI.Experience&&(n=r.formatMessage({id:"essentialAppsLicenseErrorForApp",defaultMessage:gS.essentialAppsLicenseErrorForApp})):t===gI.InvalidAppBlockedByOrg?e===hI.Builder||e===hI.AppList?n=r.formatMessage({id:"blockedByAdminErrorForBuilder",defaultMessage:gS.blockedByAdminErrorForBuilder}):e===hI.Experience&&(n=r.formatMessage({id:"blockedByAdminErrorForApp",defaultMessage:gS.blockedByAdminErrorForApp})):t===gI.InvalidPrivilege?n=window.jimuConfig.isDevEdition?r.formatMessage({id:"roleError2",defaultMessage:gS.roleError2}):r.formatMessage({id:"noEditContentPrivilegesError",defaultMessage:gS.noEditContentPrivilegesError}):t===gI.InvalidUserLevel?n=r.formatMessage({id:"roleError",defaultMessage:gS.roleError}):t===gI.InvalidResourceExperience?n=r.formatMessage({id:"invalidResourceExperience",defaultMessage:gS.invalidResourceExperience}):t===gI.InvalidResourceItem?n=r.formatMessage({id:"invalidResourceItem",defaultMessage:gS.invalidResourceItem}):t===gI.InvalidResourcePermission?n=r.formatMessage({id:"invalidResourcePermission",defaultMessage:gS.invalidResourcePermission}):t===gI.InvalidResourcePermissionForReadOnly&&(n=r.formatMessage({id:"invalidResourcePermissionForReadOnly",defaultMessage:gS.invalidResourcePermissionForReadOnly})):n="",n}(e,s.invalidInfo),s}))}))}function wI(){return mI(this,void 0,void 0,(function*(){return yield function(){return mI(this,void 0,void 0,(function*(){const e=jy().getState(),t=e.portalSelf,r=e.portalUrl;return t?yield Promise.resolve(t):r?yield iI(r):yield Promise.resolve(null)}))}().then((e=>e&&e.isPortal?e.currentVersion:null)).catch((e=>null))}))}function II(){return mI(this,void 0,void 0,(function*(){const e=yield wI();return!!e&&Number(e)<=6.1}))}function EI(){return mI(this,void 0,void 0,(function*(){const e=yield wI();return!!e&&Number(e)<=7.3}))}function CI(e){return mI(this,void 0,void 0,(function*(){const t={canViewExperience:!0,canCreateExperience:!1,canUpdateExperience:!1,canDeleteExperience:!1,canShareExperience:!1,canEditFeature:!1};return yield TI().then((r=>mI(this,void 0,void 0,(function*(){const n=r&&e.valid&&!e.viewOnly;return t.canCreateExperience=n,t.canUpdateExperience=n,t.canDeleteExperience=n,t.canShareExperience=n,yield function(){return mI(this,void 0,void 0,(function*(){return yield xI().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("features:user:edit")))).catch((()=>!0))}))}()})))).then((e=>(t.canEditFeature=e,t)))}))}function OI(){return nb.getInstance().getMainSession()}function xI(){return mI(this,void 0,void 0,(function*(){const e=OI();return e?yield e.getUser().then((e=>e)).catch((t=>mI(this,void 0,void 0,(function*(){return console.log(t&&t.message,`You are currently signed in as: '${e.username}'.`),yield Promise.reject()})))):(console.log("The user has not signed in."),yield Promise.reject())}))}function TI(){return mI(this,void 0,void 0,(function*(){return yield xI().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("portal:user:createItem")))).catch((()=>!1))}))}function AI(){return mI(this,void 0,void 0,(function*(){return yield xI().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("portal:publisher:publishFeatures")))).catch((()=>!1))}))}function PI(e){return mI(this,void 0,void 0,(function*(){const t=OI(),r=jy().getState().appInfo;return r&&r.name?yield Promise.resolve(r):yield lI(e).then((e=>e)).catch((e=>mI(this,void 0,void 0,(function*(){return console.log(e&&e.message,`You are currently signed in as: '${null==t?void 0:t.username}'.`),yield Promise.reject(e)}))))}))}function DI(e){return mI(this,void 0,void 0,(function*(){return!window.jimuConfig.isDevEdition||(e===hI.Builder||e===hI.AppList)&&!(yield II())}))}let RI=null;function _I(e){return mI(this,void 0,void 0,(function*(){const t=jy().getState().portalUrl,r=(yield EI())?"arcgisWebApps":"experienceBuilder";return RI||(RI=(yield DI(e))?yield function(e,t,r){return mI(this,void 0,void 0,(function*(){const r={valid:!1,viewOnly:!1,messageCode:""},n=nb.getInstance().getSessionByUrl(e);if(n){const e=`${n.portal}/oauth2/validateAppAccess?client_id=${t}`;return yield(0,qa.WY)(e,{authentication:n}).then((e=>(!1===e.valid?(r.messageCode=e.messageCode||"",console.log("not-authorized",`You are currently signed in as: '${n.username}'.`)):(r.valid=!0,r.viewOnly=!!e.viewOnlyUserTypeApp),r))).catch((e=>mI(this,void 0,void 0,(function*(){return console.log(e&&e.message,`You are currently signed in as: '${n.username}'.`),yield Promise.resolve(r)}))))}return yield Promise.resolve(r)}))}(t,r):yield Promise.resolve({valid:!0,viewOnly:!1})),RI}))}function kI(e,t){return mI(this,void 0,void 0,(function*(){return xI().then((r=>{var n;const o=t||OI(),i=null===(n=null==r?void 0:r.groups)||void 0===n?void 0:n.filter((e=>e.capabilities.indexOf("updateitemcontrol")>-1));return(null==i?void 0:i.length)>0&&(0,rI.tX)(e,{authentication:o}).then((e=>{const t=[].concat(e.admin).concat(e.member).concat(e.other);return i.some((e=>t.some((t=>t.id===e.id))))}))})).catch((e=>!1))}))}var LI=s(8891),NI=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class MI{static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._utilityManager:(MI.instance||(MI.instance=new MI,window._utilityManager=MI.instance),MI.instance)}static isPrintingTask(e){var t;let r=!1,n=!1;return null===(t=e.parameters)||void 0===t||t.forEach((e=>{"web_map_as_json"===e.name.toLowerCase()&&"esriGPParameterDirectionInput"===e.direction&&(r=!0),"output_file"===e.name.toLowerCase()&&"GPDataFile"===e.dataType&&"esriGPParameterDirectionOutput"===e.direction&&(n=!0)})),r&&n}static getServiceInfo(e){return NI(this,void 0,void 0,(function*(){return yield ib(e,(t=>NI(this,void 0,void 0,(function*(){return yield qa.WY(MI.getInstance().getUrlUsedForRequest(e),{params:{f:"json"},authentication:t,httpMethod:"GET"})}))),1)}))}static getGPServerInfo(e){return NI(this,void 0,void 0,(function*(){const t=yield MI.getServiceInfo(e);if(!t)return null;const r=[];for(let n=0;n<t.tasks.length;n++){const o=t.tasks[n];try{const t=yield MI.getServiceInfo(`${e}/${o}`),n={name:o};MI.isPrintingTask(t)&&(n.isPrintingTask=!0),r.push(n)}catch(e){console.error(e),r.push({name:o})}}return{type:am.GPServer,info:Object.assign(Object.assign({},t),{tasks:r})}}))}constructor(){this.portalUtilitiesPromise={},window.jimuConfig.isBuilder&&console.error("UtilityManager should not be created in builder"),Uy(this.onUtilitiesChange.bind(this),["appConfig","utilities"]),Uy(this.onResourceSessionsChange.bind(this),["resourceSessions"])}onUtilitiesChange(e,t){e&&t&&Object.keys(e).forEach((r=>{var n;const o=e[r];t[r]||o.portalUrl&&(null===(n=this.portalUtilitiesPromise[o.portalUrl])||void 0===n?void 0:n[o.itemId])&&delete this.portalUtilitiesPromise[o.portalUrl][o.itemId]}))}onResourceSessionsChange(e,t){for(const r of Object.keys(this.portalUtilitiesPromise||{})){const n=rb.getInstance().getSessionKeyFromUrl(r),o=LI.portalUrlUtils.getStandardPortalUrl(n);e[o]!==t[o]&&delete this.portalUtilitiesPromise[r]}}urlExist(e){var t,r,n;const o=null!==(n=null===(r=null===(t=jy().getState())||void 0===t?void 0:t.appConfig)||void 0===r?void 0:r.utilities)&&void 0!==n?n:{};return Object.keys(o).some((t=>{const r=o[t];return"org"!==r.source&&!r.itemId&&r.url===e}))}itemExist(e,t){var r,n,o;const i=null!==(o=null===(n=null===(r=jy().getState())||void 0===r?void 0:r.appConfig)||void 0===n?void 0:n.utilities)&&void 0!==o?o:{};return Object.keys(i).some((r=>{const n=i[r];return n.itemId===t&&n.portalUrl===e}))}getLabelOfUseUtility(e){var t,r;if(e.task)return e.task;const n=this.getUtilityJson(e.utilityId);return"org"===n.source&&n.index>=0?n.taskName:null!==(r=null!==(t=n.label)&&void 0!==t?t:n.name)&&void 0!==r?r:n.sourceLabel}getUrlUsedForRequest(e){return FI()&&BI(e)||e}getUrlOfUseUtility(e){return NI(this,void 0,void 0,(function*(){const{utilityId:t,task:r}=e,n=yield this.getUtility(t);let o;return o=r?`${n.url}/${r}`:n.url,this.getUrlUsedForRequest(o)}))}getIdOfOrgUtility(e,t,r,n){var o,i,a;const s=null!==(a=null===(i=null===(o=jy().getState())||void 0===o?void 0:o.appConfig)||void 0===i?void 0:i.utilities)&&void 0!==a?a:{};let l=null;return Object.keys(s).some((o=>{const i=s[o];if("org"===i.source)if(r>=0){if(i.taskName===n&&i.url===t&&i.index>=0)return l=o,!0}else if(i.name===e&&i.url===t)return l=o,!0;return!1})),l}isUtilityUsed(e){var t,r;const n=null===(r=null===(t=jy().getState())||void 0===t?void 0:t.appConfig)||void 0===r?void 0:r.widgets;return Object.keys(null!=n?n:{}).some((t=>{var r;return(null!==(r=n[t].useUtilities)&&void 0!==r?r:[]).some((t=>t.utilityId===e))}))}getUtilityJson(e){var t,r,n;return null===(n=null===(r=null===(t=jy().getState())||void 0===t?void 0:t.appConfig)||void 0===r?void 0:r.utilities)||void 0===n?void 0:n[e]}getUtilityFromJson(e){var t;return NI(this,void 0,void 0,(function*(){if(!e)return null;const{id:r}=e;if(null==e.itemId){const n={utilityId:r,url:e.url};if(/\/rest\/services\/.*\/GPServer\/?$/.test(e.url))if((null===(t=e.tasks)||void 0===t?void 0:t.length)>0)n.tasks=[...e.tasks];else{const{info:t}=yield MI.getGPServerInfo(e.url);n.tasks=t.tasks}return n}const{portalUrl:n,itemId:o}=e;if(this.portalUtilitiesPromise[n]||(this.portalUtilitiesPromise[n]={}),this.portalUtilitiesPromise[n][o]){const t=yield this.portalUtilitiesPromise[n][o];return(null==t?void 0:t.tasks)&&t.tasks.forEach((t=>{const r=e.tasks.find((e=>e.name===t.name));r&&"visible"in r&&(t.visible=r.visible)})),t}return yield this.createUtilityOfItem(e)}))}getUtility(e){return NI(this,void 0,void 0,(function*(){const t=this.getUtilityJson(e),r=yield this.getUtilityFromJson(t);if(null==r)throw new Error(`Utility ${e} is not found`);return r}))}getUrlOfItem(e,t){return NI(this,void 0,void 0,(function*(){const r=rb.getInstance().getSessionByUrl(e);return yield rI.rV(t,{portal:dm(e),authentication:r}).then((e=>e.url)).catch((r=>(console.error("Get url failed",e,t,r),null)))}))}utilityHasSignInError(e){var t;const r=null===(t=jy().getState().appConfig.utilities)||void 0===t?void 0:t[e];if(r){const e=r.url,t=rb.getInstance().getNoPermissionResourceInfoList()||{};if(Object.keys(t).find((t=>e.includes(t))))return!0}return!1}reportUtilityState(e,t,r=!1){window.jimuConfig.isBuilder?ty("jimu-for-builder").builderAppSync.publichUtilityStateChangeToApp(e,t,r):jy().dispatch(LI.appActions.utilityStateChange(e,t,r))}createUtilityOfItem(e){return NI(this,void 0,void 0,(function*(){const{portalUrl:t,itemId:r,url:n,id:o,sourceLabel:i}=e,a={utilityId:o,url:n};return this.portalUtilitiesPromise[t][r]=this.fetchPortalItemUtility(e).then((t=>{var r;if(a.itemInfo=t,i!==t.title&&this.updateSourceLabelOfItem(e,t.title),/\/rest\/services\/.*\/GPServer\/?$/.test(n)){if((null===(r=e.tasks)||void 0===r?void 0:r.length)>0){const t=e.tasks.asMutable({deep:!0});return{type:am.GPServer,info:{tasks:t}}}return MI.getGPServerInfo(n)}})).then((e=>((null==e?void 0:e.info)&&(a.tasks=e.info.tasks),a))).catch((e=>(console.error("Create utility failed",t,r,e),null))),this.portalUtilitiesPromise[t][r]}))}updateSourceLabelOfItem(e,t){var r;const{id:n}=e;let o=null===(r=jy().getState())||void 0===r?void 0:r.appConfig;o&&(o=o.setIn(["utilities",n,"sourceLabel"],t),jy().dispatch(Eb(o)))}fetchPortalItemUtility(e){const{portalUrl:t,itemId:r}=e;if(!t||!r)return null;const n=rb.getInstance().getSessionByUrl(t);return rI.rV(r,{portal:dm(t),authentication:n})}checkUtilityStatus(e){return NI(this,void 0,void 0,(function*(){try{const{portalUrl:t,itemId:r}=e;t&&r&&(yield this.fetchPortalItemUtility(e));const n=this.getUrlUsedForRequest(e.url);return yield MI.getServiceInfo(n),this.reportUtilityState(e.id,!0),{success:!0}}catch(t){console.error(t);let r=!1;return("GWM_0003"===t.code||t.isSignInError)&&(r=!0),this.reportUtilityState(e.id,!1,r),{success:!1,isSignInError:r}}}))}}const jI=MI;var UI=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function FI(){var e,t;return!(null===(t=null===(e=jy().getState())||void 0===e?void 0:e.appContext)||void 0===t?void 0:t.isInBuilder)}function BI(e){var t,r,n;const o=null===(r=null===(t=jy().getState())||void 0===t?void 0:t.appConfig)||void 0===r?void 0:r.appProxies;if(!e||!o)return null;const i=null===(n=Object.values(o).find((t=>t.sourceUrl===function(e){if(!e)return null;let t=e.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,"").replace(/\/\d{1,}$/,"");return t.split("/").some((e=>e.toLowerCase()===Kl.SceneService.toLowerCase()))&&(t=t.replace(/\/layers$/,"")),t}(e))))||void 0===n?void 0:n.proxyUrl;if(i){let t=i;const r=e.split("/").filter((e=>e)),n=parseInt(r[r.length-1]);return isNaN(n)||(t=`${t}/${n}`),t}return null}const $I=[];function GI(e){"string"!=typeof e||$I.includes(e)||$I.push(e)}function WI(e){const t=$I.findIndex((t=>t===e));t>-1&&$I.splice(t,1)}function VI(){return $I}function HI(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription")}(e):function(e){return e&&QI.some((t=>t.test(e)))}(t)}function zI(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits")}(e):function(e){return e&&ZI.some((t=>t.test(e)))}(t)}function qI(e){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);if(e.itemId){const t=Sb.getInstance().getDataSource(e.id);let r;return r=EE(t)?t.fetchItemInfo():rE(e.portalUrl,e.itemId),r.then((t=>HI(t,e.url))).catch((e=>(console.error("Faield to check whether data source is subscriber.",e),Promise.resolve(!1))))}return Promise.resolve(HI(null,e.url))}function YI(e){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);if(e.itemId){const t=Sb.getInstance().getDataSource(e.id);let r;return r=EE(t)?t.fetchItemInfo():rE(e.portalUrl,e.itemId),r.then((t=>zI(t,e.url))).catch((e=>(console.error("Faield to check whether data source is premium.",e),Promise.resolve(!1))))}return Promise.resolve(zI(null,e.url))}function JI(e){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);if(e.itemId){const t=Sb.getInstance().getDataSource(e.id);let r;if(EE(t))r=t.fetchItemInfo();else{const t=tE(e.portalUrl,e.itemId);eE[t]||(eE[t]=rE(e.portalUrl,e.itemId)),r=eE[t]}return r.then((t=>HI(t,e.url)||zI(t,e.url))).catch((e=>(console.error("Faield to check whether data source is subscriber or premium.",e),Promise.resolve(!1))))}return Promise.resolve(HI(null,e.url)||zI(null,e.url))}function KI(e){return UI(this,void 0,void 0,(function*(){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);try{return e.itemId?HI((yield jI.getInstance().getUtility(e.id)).itemInfo,e.url):Promise.resolve(HI(null,e.url))}catch(e){return console.error("Faield to check whether utility is subscriber.",e),Promise.resolve(!1)}}))}function XI(e){return UI(this,void 0,void 0,(function*(){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);try{return e.itemId?zI((yield jI.getInstance().getUtility(e.id)).itemInfo,e.url):Promise.resolve(zI(null,e.url))}catch(e){return console.error("Faield to check whether utility is premium.",e),Promise.resolve(!1)}}))}const QI=[/demographics\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/route\w*\.arcgis\.com/i,/logistics\w*\.arcgis\.com/i,/analysis\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/sentinel\w*\.arcgis\.com/i,/oceans\w*\.arcgis\.com/i,/tiledbasemaps\w*\.arcgis\.com/i],ZI=[/traffic\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/hydro\w*\.arcgis\.com/i,/naip\w*\.arcgis\.com/i,/livefeeds\w*\.arcgis\.com/i,/demographics\w*\.arcgis\.com/i,/landscape\w*\.arcgis\.com/i,/historical\w*\.arcgis\.com/i,/earthobs\w*\.arcgis\.com/i],eE={};function tE(e,t){return`${e}-${t}`}function rE(e,t){const r=tE(e,t);return eE[r]||(eE[r]=ib(e,(r=>(0,rI.rV)(t,{portal:dm(e),authentication:r})))),eE[r]}var nE,oE,iE,aE,sE,lE=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function uE(e,t,r){return lE(this,void 0,void 0,(function*(){try{const n=yield function(e,t){var r,n,o,i;return lE(this,void 0,void 0,(function*(){try{const a=yield function(e){return lE(this,void 0,void 0,(function*(){return e?yield Promise.allSettled(e.filter((e=>null==e?void 0:e.feature)).map((e=>lE(this,void 0,void 0,(function*(){if("esri.Graphic"===e.feature.declaredClass){const t=e.feature.clone();return t.attributes=Object.assign({},e.feature.attributes),t}return yield SE(e.feature)}))))).then((e=>e.filter((e=>"fulfilled"===e.status)).map((e=>e.value)))):yield Promise.resolve(null)}))}(t);if(!a)return null;const s=e.getSchema(),l=null===(r=null==s?void 0:s.fields)||void 0===r?void 0:r[e.getIdField()];if(!l)return null;const u=hE(null==s?void 0:s.fields,l);if(!u)return null;const c=dE(e.getGeometryType());if(!c&&0===a.length)return null;let d;try{d=t.length>0?null===(n=t[0].feature.layer)||void 0===n?void 0:n.renderer:void 0}catch(e){}return{fields:u,objectIdField:l.name,source:a,geometryType:c,spatialReference:null===(o=e.getMainDataSource().layer)||void 0===o?void 0:o.spatialReference,fullExtent:null===(i=e.getMainDataSource().layer)||void 0===i?void 0:i.fullExtent,renderer:d}}catch(e){return console.error("Failed to get constructor options of JS API client-side feature layer.",e),null}}))}(e,t),o=new(yield pS("esri/layers/FeatureLayer"))(n),i=e.getPopupInfo();if(i){const e=yield pS("esri/PopupTemplate");o.popupEnabled=!0,o.popupTemplate=e.fromJSON(i)}else o.popupEnabled=!1;return o.title=e.getLabel()||e.getDataSourceJson().sourceLabel,{layer:o,sourceVersion:r}}catch(e){return console.error("Feaure layer data source error: failed to create feature layer with source records. ",e),{layer:null,sourceVersion:r}}}))}function cE(e,t,r){return e?{layer:{id:e.id,layerType:"ArcGISFeatureLayer",title:e.getLabel(),featureCollection:{layers:[{layerDefinition:e.getLayerDefinition(),popupInfo:e.getPopupInfo(),featureSet:{geometryType:e.getGeometryType(),features:fE(t)}}]}},sourceVersion:r}:null}function dE(e){return{esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}[e]}function pE(e){return{point:"esriGeometryPoint",multipoint:"esriGeometryMultipoint",polyline:"esriGeometryPolyline",polygon:"esriGeometryPolygon",extent:"esriGeometryEnvelope"}[e]}function fE(e){return e?e.filter((e=>null==e?void 0:e.feature)).map((e=>"esri.Graphic"===e.feature.declaredClass?e.feature.toJSON():e.feature)):null}function hE(e,t){return e&&t?Object.keys(e).map((r=>{const n={name:(o=e[r]).name,alias:o.alias,type:mE(o.type)};var o;return n.name===t.name&&(n.type="oid"),n})):null}function gE(e){const t=Array.isArray(e);let r;return(t||"number"==typeof e)&&(r={start:wE(t?e[0]:e),end:wE(t?e[1]:e)}),r}function mE(e){switch(e){case Rl.Number:return"double";case Rl.Date:return"date";default:return"string"}}function vE(e){return"esri.Graphic"===e.declaredClass?e.toJSON():e}function yE(e){return lE(this,void 0,void 0,(function*(){return"esri.Graphic"===e.declaredClass?yield Promise.resolve(e):yield SE(e)}))}function SE(e){return lE(this,void 0,void 0,(function*(){return yield dS(["esri/Graphic"]).then((t=>{const r=t[0],n=Object.assign({},e);return n.attributes=Object.assign({},e.attributes),r.fromJSON(n)}))}))}function bE(e,t){return lE(this,void 0,void 0,(function*(){const r=(null==e?void 0:e.type)===zl.FeatureLayer?e:null==e?void 0:e.getAssociatedDataSource();if(!r||!t)return null;const n=t.asMutable({deep:!0});return yield dS(["esri/geometry/support/jsonUtils"]).then((e=>{var o,i;const a=e[0];if("number"==typeof t.pageSize){const e=null!==(o=t.page)&&void 0!==o?o:1;n.start=(e-1)*t.pageSize,n.num=t.pageSize,null!==r.getMaxRecordCount()&&(1===e?n.num=Math.min(r.getMaxRecordCount(),t.pageSize):e*t.pageSize>r.getMaxRecordCount()&&(n.num=r.getMaxRecordCount()-(e-1)*t.pageSize)),delete n.page,delete n.pageSize}return n.geometry&&(n.geometry=a.fromJSON(n.geometry)),n.geometryType&&delete n.geometryType,n.spatialRel&&(n.spatialRelationship={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within"}[n.spatialRel]),delete n.spatialRel,n.units&&(n.units={esriSRUnit_StatuteMile:"miles",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_Meter:"meters",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}[n.units]),r.getGDBVersion()&&(n.gdbVersion=r.getGDBVersion()),n.outFields=n.outFields&&n.outFields.length>0?n.outFields:["*"],null!=t.time&&(n.timeExtent=gE(t.time)),delete n.time,(null===(i=n.outStatistics)||void 0===i?void 0:i.length)>0&&(n.outStatistics=n.outStatistics.map((e=>{var t;return"percentile_cont"===e.statisticType?e.statisticType="percentile-continuous":"percentile_disc"===e.statisticType&&(e.statisticType="percentile-discrete"),(null===(t=e.statisticParameters)||void 0===t?void 0:t.orderBy)&&(e.statisticParameters.orderBy=e.statisticParameters.orderBy.toUpperCase()),e}))),n}))}))}function wE(e){return"number"==typeof e?new Date(e):null}function IE(e){return(null==e?void 0:e.type)===zl.FeatureLayer||(null==e?void 0:e.type)===zl.SceneLayer}function EE(e){const t=e;return!!((null==t?void 0:t.id)&&(null==t?void 0:t.getItemData)&&(null==t?void 0:t.getItemInfo)&&(null==t?void 0:t.fetchItemData)&&(null==t?void 0:t.fetchItemInfo))}!function(e){e.All="ALL",e.Simple="SIMPLE"}(nE||(nE={})),function(e){e.And="AND",e.Or="OR"}(oE||(oE={})),function(e){e.None="NONE",e.Previous="PREVIOUS",e.All="ALL"}(iE||(iE={})),function(e){e.StringOperatorIs="STRING_OPERATOR_IS",e.StringOperatorIsNot="STRING_OPERATOR_IS_NOT",e.StringOperatorContains="STRING_OPERATOR_CONTAINS",e.StringOperatorDoesNotContain="STRING_OPERATOR_DOES_NOT_CONTAIN",e.StringOperatorStartsWith="STRING_OPERATOR_STARTS_WITH",e.StringOperatorDoesNotStartWith="STRING_OPERATOR_DOES_NOT_START_WITH",e.StringOperatorEndsWith="STRING_OPERATOR_ENDS_WITH",e.StringOperatorDoesNotEndWith="STRING_OPERATOR_DOES_NOT_END_WITH",e.StringOperatorIsAnyOf="STRING_OPERATOR_IS_ANY_OF",e.StringOperatorIsNoneOf="STRING_OPERATOR_IS_NONE_OF",e.StringOperatorIsBlank="STRING_OPERATOR_IS_BLANK",e.StringOperatorIsNotBlank="STRING_OPERATOR_IS_NOT_BLANK",e.NumberOperatorIs="NUMBER_OPERATOR_IS",e.NumberOperatorIsNot="NUMBER_OPERATOR_IS_NOT",e.NumberOperatorIsAtLeast="NUMBER_OPERATOR_IS_AT_LEAST",e.NumberOperatorIsAtMost="NUMBER_OPERATOR_IS_AT_MOST",e.NumberOperatorIsLessThan="NUMBER_OPERATOR_IS_LESS_THAN",e.NumberOperatorIsGreaterThan="NUMBER_OPERATOR_IS_GREATER_THAN",e.NumberOperatorIsBetween="NUMBER_OPERATOR_IS_BETWEEN",e.NumberOperatorIsNotBetween="NUMBER_OPERATOR_IS_NOT_BETWEEN",e.NumberOperatorIsAnyOf="NUMBER_OPERATOR_IS_ANY_OF",e.NumberOperatorIsNoneOf="NUMBER_OPERATOR_IS_NONE_OF",e.NumberOperatorIsBlank="NUMBER_OPERATOR_IS_BLANK",e.NumberOperatorIsNotBlank="NUMBER_OPERATOR_IS_NOT_BLANK",e.DateOperatorIsOn="DATE_OPERATOR_IS_ON",e.DateOperatorIsNotOn="DATE_OPERATOR_IS_NOT_ON",e.DateOperatorIsIn="DATE_OPERATOR_IS_IN",e.DateOperatorIsNotIn="DATE_OPERATOR_IS_NOT_IN",e.DateOperatorIsBefore="DATE_OPERATOR_IS_BEFORE",e.DateOperatorIsAfter="DATE_OPERATOR_IS_AFTER",e.DateOperatorIsOnOrBefore="DATE_OPERATOR_IS_ON_OR_BEFORE",e.DateOperatorIsOnOrAfter="DATE_OPERATOR_IS_ON_OR_AFTER",e.DateOperatorIsInTheLast="DATE_OPERATOR_IS_IN_THE_LAST",e.DateOperatorIsNotInTheLast="DATE_OPERATOR_IS_NOT_IN_THE_LAST",e.DateOperatorIsInTheNext="DATE_OPERATOR_IS_IN_THE_NEXT",e.DateOperatorIsNotInTheNext="DATE_OPERATOR_IS_NOT_IN_THE_NEXT",e.DateOperatorIsBetween="DATE_OPERATOR_IS_BETWEEN",e.DateOperatorIsNotBetween="DATE_OPERATOR_IS_NOT_BETWEEN",e.DateOperatorIsBlank="DATE_OPERATOR_IS_BLANK",e.DateOperatorIsNotBlank="DATE_OPERATOR_IS_NOT_BLANK"}(aE||(aE={})),function(e){e.UserInput="USER_INPUT",e.Field="FIELD",e.SingleSelectFromUnique="UNIQUE",e.MultipleSelectFromUnique="MULTIPLE",e.SingleSelectFromPredefined="UNIQUE_PREDEFINED",e.MultipleSelectFromPredefined="MULTIPLE_PREDEFINED"}(sE||(sE={}));const CE="-empty-";var OE,xE,TE,AE;!function(e){e.Single="SINGLE",e.Set="SET"}(OE||(OE={})),function(e){e.Inline="INLINE",e.Block="BLOCK"}(xE||(xE={})),function(e){e.None="NONE",e.UseAskForValue="USE_ASK_FOR_VALUE",e.UseLabel="USE_LABEL"}(TE||(TE={})),function(e){e.Asc="ASC",e.Desc="DESC"}(AE||(AE={}));const PE=s(6792),DE=864e5,RE=6e4,_E=1e3,kE={equals:{op:"= ?"},doesNotEqual:{op:"<> ?"},isAtLeast:{op:">= ?"},isAtMost:{op:"<= ?"},isLessThan:{op:"< ?"},isGreaterThan:{op:"> ?"},isBetween:{op:"BETWEEN ?",sep:" AND "},isNotBetween:{op:"NOT BETWEEN ?",sep:" AND "},contains:{op:"LIKE ?",mod:"%{0}%"},doesNotContain:{op:"NOT LIKE ?",mod:"%{0}%"},startsWith:{op:"LIKE ?",mod:"{0}%"},doesNotStartWith:{op:"NOT LIKE ?",mod:"{0}%"},endsWith:{op:"LIKE ?",mod:"%{0}"},doesNotEndWith:{op:"NOT LIKE ?",mod:"%{0}"},isAnyOf:{op:"IN ?",mod:"[{0}]",type:"IN"},isNoneOf:{op:"NOT IN ?",mod:"[{0}]",type:"IN"}};function LE(e){let t="";switch(e){case aE.NumberOperatorIs:case aE.StringOperatorIs:case aE.DateOperatorIsOn:case aE.NumberOperatorIsBlank:case aE.StringOperatorIsBlank:case aE.DateOperatorIsBlank:t="equals";break;case aE.NumberOperatorIsNot:case aE.StringOperatorIsNot:case aE.DateOperatorIsNotOn:case aE.NumberOperatorIsNotBlank:case aE.StringOperatorIsNotBlank:case aE.DateOperatorIsNotBlank:t="doesNotEqual";break;case aE.NumberOperatorIsAtLeast:case aE.DateOperatorIsOnOrAfter:t="isAtLeast";break;case aE.NumberOperatorIsAtMost:case aE.DateOperatorIsOnOrBefore:t="isAtMost";break;case aE.NumberOperatorIsLessThan:case aE.DateOperatorIsBefore:t="isLessThan";break;case aE.DateOperatorIsAfter:case aE.NumberOperatorIsGreaterThan:t="isGreaterThan";break;case aE.NumberOperatorIsBetween:case aE.DateOperatorIsBetween:t="isBetween";break;case aE.NumberOperatorIsNotBetween:case aE.DateOperatorIsNotBetween:t="isNotBetween";break;case aE.NumberOperatorIsAnyOf:case aE.StringOperatorIsAnyOf:case aE.DateOperatorIsIn:t="isAnyOf";break;case aE.NumberOperatorIsNoneOf:case aE.StringOperatorIsNoneOf:case aE.DateOperatorIsNotIn:t="isNoneOf";break;case aE.StringOperatorContains:t="contains";break;case aE.StringOperatorDoesNotContain:t="doesNotContain";break;case aE.StringOperatorStartsWith:t="startsWith";break;case aE.StringOperatorEndsWith:t="endsWith";break;case aE.StringOperatorDoesNotStartWith:t="doesNotStartWith";break;case aE.StringOperatorDoesNotEndWith:t="doesNotEndWith"}return t}function NE(e,t,r,n=!1,o=!1){if(e.includes("BLANK"))return r.fieldAlias+(e.includes("NOT")?" IS NOT NULL":" IS NULL");let i=LE(e);if(e.includes("DATE"))switch(e){case aE.DateOperatorIsOn:i=o?"is":n?"isAt":"isOn";break;case aE.DateOperatorIsNotOn:i=o?"isNot":n?"isNotAt":"isNotOn";break;case aE.DateOperatorIsIn:i="isIn";break;case aE.DateOperatorIsNotIn:i="isNotIn";break;case aE.DateOperatorIsBefore:i="isBefore";break;case aE.DateOperatorIsAfter:i="isAfter";break;case aE.DateOperatorIsOnOrBefore:i=n?"isAtOrBefore":"isOnOrBefore";break;case aE.DateOperatorIsOnOrAfter:i=n?"isAtOrAfter":"isOnOrAfter";break;case aE.DateOperatorIsInTheLast:i="isInTheLast";break;case aE.DateOperatorIsNotInTheLast:i="isNotInTheLast";break;case aE.DateOperatorIsInTheNext:i="isInTheNext";break;case aE.DateOperatorIsNotInTheNext:i="isNotInTheNext"}return t.formatMessage({id:i+"ForDisplaySQL"},r)}var ME;function jE(e,t){const r=e.asMutable({deep:!0});let n=!1;return r.parts&&function e(r){r.parts.forEach((function(o,i){if(o.type===OE.Set)e(o);else{const e=o,a=t[e.jimuFieldName],s=e.valueOptions.value;if(a&&a.type===Rl.String&&(a.esriType===_l.GlobalID||a.esriType===_l.GUID)&&(null==s?void 0:s.length)>0&&[aE.StringOperatorIs,aE.StringOperatorIsNot,aE.StringOperatorIsAnyOf,aE.StringOperatorIsNoneOf].includes(e.operator)){const t=[];s.forEach((e=>{t.push(e);const r=e.value,n=r.includes("{")?r.replace(/{(.*?)}/g,"$1"):`{${r}}`;t.push(Object.assign(Object.assign({},e),{value:n,label:n}))}));const o=e.operator===aE.StringOperatorIs?aE.StringOperatorIsAnyOf:e.operator===aE.StringOperatorIsNot?aE.StringOperatorIsNoneOf:e.operator,a=Object.assign(Object.assign({},e),{operator:o,valueOptions:Object.assign(Object.assign({},e.valueOptions),{value:t})});r.parts[i]=a,n=!0}}}))}(r),n?Ae(r):e}function UE(e,t,r){var n,o;r=r||Qh();const i={sqlExpression:e,sql:"",displaySQL:""};if(!e||!t)return i;const a=t.getSchema().fields,s=eO(t.url),l=null===(o=(n=t).getLayerDefinition)||void 0===o?void 0:o.call(n),u=((null==(c=l)?void 0:c.version)||(null==c?void 0:c.currentVersion))>=10.2&&(null==c?void 0:c.useStandardizedQueries);var c;const d=function(e){let t=0;return(null==e?void 0:e.dateFieldsTimeReference)&&"UTC"!==e.dateFieldsTimeReference.timeZone&&(t=60*(PE[e.dateFieldsTimeReference.timeZone]||0)*60*1e3),t}(l),p=FO(t),f=t.isSqlCaseSensitive,h=function e(n){if(!n.parts)return i;const o=n.logicalOperator?n.logicalOperator:oE.And,l=[],c=[];n.parts.forEach((function(n){var o,i,h,g,m,v,y,S,b,w,I,E;if(n.type===OE.Set){const t=e(n);t.sql&&l.push("("+t.sql+")"),c.push("("+t.displaySQL+")")}else{const e=n;let C=!1;const O=kE[LE(e.operator)];let x=sE.MultipleSelectFromPredefined===e.valueOptions.sourceType&&[aE.StringOperatorStartsWith,aE.StringOperatorDoesNotStartWith,aE.StringOperatorEndsWith,aE.StringOperatorDoesNotEndWith,aE.StringOperatorContains,aE.StringOperatorDoesNotContain].includes(e.operator),T="",A="",P=e.valueOptions.value?e.valueOptions.value.asMutable({deep:!0}):null;const D=a[e.jimuFieldName],R=D?D.type:null;if(!R)return;const _={fieldAlias:D.alias||D.name,value:"?",endValue:"?"};if(R===Rl.Date&&e.valueOptions.sourceType!==sE.Field){let n=!1,a=!1,s=e.valueOptions.inputEditor;if(null===P){if(e.operator.indexOf("BLANK")>0){const t=e.operator.indexOf("NOT")>0?"NOT ":"";l.push("("+D.name+" IS "+t+"NULL)")}"SIMPLE_SELECT"===s?(null===(o=D.format)||void 0===o?void 0:o.dateFormat)&&D.format.dateFormat.includes("Time")&&(n=!0):n=s.includes("TIME")}else if("NUMBER_LIST_SELECTOR"===s&&null===P[0].value)_.endValue=r.formatMessage({id:P[0].label.toLowerCase()});else{P&&"NUMBER_LIST_SELECTOR"!==s&&"SIMPLE_SELECT"!==s&&P.forEach((e=>{e&&"number"==typeof e.value&&(!p&&e.isUTC||(e.value=e.value+qE()))}));const o=u?"timestamp ":"";let c,f=null===(i=P[0])||void 0===i?void 0:i.value,C=!1;if("SIMPLE_SELECT"===s){let e=ME.Date;s="DATE_PICKER",(null===(h=D.format)||void 0===h?void 0:h.dateFormat)&&D.format.dateFormat.includes("Time")&&(n=!0,s="DATE_TIME_PICKER",e=D.format.dateFormat.includes("ShortTime")?ME.DateTimeShort:ME.DateTimeLong),_.value=YE(new Date(WO(f,t)),s,null===(g=D.format)||void 0===g?void 0:g.dateFormat,r),f=JE(f,e,p),c=f,C=!0}else if("NUMBER_LIST_SELECTOR"===s)f=null,_.value=P[0].value,_.endValue=r.formatMessage({id:P[0].label.toLowerCase()});else{const e=null===(m=P[1])||void 0===m?void 0:m.value;if(null===P[0])f=null;else if("string"==typeof f){a=!0,_.value=r.formatMessage({id:$E(P[0].value)});const t=mp(f,r);f=JE(t[0]||t,ME.Date),void 0!==t.length?c=JE(t[1],ME.Date):e||(c=f,s="DATE_PICKER")}else n=s.includes("TIME"),_.value=YE(new Date(WO(f,t)),s,null===(v=D.format)||void 0===v?void 0:v.dateFormat,r),c=f;if(null===P[1])a=!1,c=null;else if(e){let n;if(a=!1,"string"==typeof e){n=r.formatMessage({id:$E(P[1].value)});const t=mp(e,r);c=JE(t[0]||t,ME.Date),s="DATE_PICKER"}else n=YE(new Date(WO(e,t)),s,null===(y=D.format)||void 0===y?void 0:y.dateFormat,r),c=e;_.endValue=n}}const O=f?o+"'"+zE(f,d,C&&p)+"'":null,x=c?o+"'"+function(e,t,r,n,o=!1){let i;return"DATE_PICKER"===r||"DOUBLE_DATE_PICKER"===r||"DATE_RANGE_SELECTOR"===r?i=e+DE:"DATE_TIME_PICKER"!==r&&"DOUBLE_DATE_TIME_PICKER"!==r||(i=n&&n.includes("LongTime")?e+_E:e+RE),zE(i,t,o)}(c,d,s,null===(S=D.format)||void 0===S?void 0:S.dateFormat,C&&p)+"'":null;switch(e.operator){case aE.DateOperatorIsOn:T=D.name+" BETWEEN "+O+" AND "+x+" AND ("+D.name+" <> "+x+")";break;case aE.DateOperatorIsNotOn:T=D.name+" < "+O+" OR "+D.name+" >= "+x;break;case aE.DateOperatorIsBefore:T=D.name+" < "+O;break;case aE.DateOperatorIsAfter:T=D.name+" >= "+x;break;case aE.DateOperatorIsOnOrBefore:T=D.name+" < "+x;break;case aE.DateOperatorIsOnOrAfter:T=D.name+" >= "+O;break;case aE.DateOperatorIsInTheLast:T=D.name+" BETWEEN CURRENT_TIMESTAMP - "+BE(P[0].value,null===(b=P[0])||void 0===b?void 0:b.label)+" AND CURRENT_TIMESTAMP";break;case aE.DateOperatorIsNotInTheLast:T=D.name+" NOT BETWEEN CURRENT_TIMESTAMP - "+BE(P[0].value,null===(w=P[0])||void 0===w?void 0:w.label)+" AND CURRENT_TIMESTAMP";break;case aE.DateOperatorIsInTheNext:T=D.name+" BETWEEN CURRENT_TIMESTAMP AND CURRENT_TIMESTAMP + "+BE(P[0].value,null===(I=P[0])||void 0===I?void 0:I.label);break;case aE.DateOperatorIsNotInTheNext:T=D.name+" NOT BETWEEN CURRENT_TIMESTAMP AND CURRENT_TIMESTAMP + "+BE(P[0].value,null===(E=P[0])||void 0===E?void 0:E.label);break;case aE.DateOperatorIsBetween:case aE.DateOperatorIsIn:T=O&&x?"("+D.name+" BETWEEN "+O+" AND "+x+") AND ("+D.name+" <> "+x+")":"";break;case aE.DateOperatorIsNotBetween:case aE.DateOperatorIsNotIn:T=O&&x?"("+D.name+" < "+O+") OR ("+D.name+" >= "+x+")":""}""!==T&&l.push("("+T+")")}return A=NE(e.operator,r,_,n,a),void c.push("("+A+")")}let k=[];const L=[],N=[sE.SingleSelectFromPredefined,sE.MultipleSelectFromPredefined].includes(e.valueOptions.sourceType);if(N&&P&&(P=P.filter((e=>e.selected)),P=P.length>0?P:null),null===P)"IN"===O.type&&(_.value="(?)");else{let t=!1;for(let r=0;r<P.length;r++){null!==P[r]&&P[r].value!==CE||(t=!0,P[r]={value:null,label:"?",alias:"?"});let n=P[r].value,o=N?P[r].alias:P[r].label;if(e.valueOptions.sourceType===sE.Field){const e=a[n];o=e.alias?e.alias:e.name}else{R===Rl.String&&(n=null!==n?WE(n):null,C=f&&!e.caseSensitive),o=WE(o),O.mod&&"IN"!==O.type&&(n=null!==n?VE(O.mod,[n]):null);let t="";R===Rl.String&&null!==n&&(t=s&&HE(n)?"N":"",n="'"+n+"'",o="'"+o+"'",C&&(n=null!==n?n.toLowerCase():null,o=o.toLowerCase()),t&&(n=t+n))}null!==n&&k.push(n),L.push(o)}if(t&&(k=[]),x=x&&k.length>1,x||!O.sep&&O.mod&&"IN"===O.type){const e=function(e){const t=[];return new Array(e).fill(1).forEach(((e,r)=>{t.push("{"+r+"}")})),"("+t.join(",")+")"}(k.length);T=x?"predefined":VE(e,k),_.value=VE(e,L)}else k.forEach(((e,t)=>{t>0&&(T+=O.sep),T+=e})),_.value=L[0],_.endValue=L[1]||_.endValue}const M=D.name;if(""!==T){const t=C?"LOWER("+M+")":M;if(x){const r=e.operator.includes("_NOT_")?" AND ":" OR ",n=k.map((e=>"("+t+" "+GE(O.op,e)+")")).join(r);l.push(n)}else{const e=GE(O.op,T);l.push("("+t+" "+e+")")}}else if(e.operator.indexOf("BLANK")>0){const t=e.operator.indexOf("NOT")>0?"NOT ":"";l.push("("+M+" IS "+t+"NULL)"),A="Null"}A=NE(e.operator,r,_),c.push("("+A+")")}}));const h=r.formatMessage({id:o.toLowerCase()+"LowerCase"});return{sql:l.join(` ${o} `),displaySQL:c.join(` ${h} `)}}(jE(e,a)),g=""===h.sql||"()"===h.sql?"":"("+h.sql+")";return{sqlExpression:e.set("sql",g).set("displaySQL",h.displaySQL),sql:g,displaySQL:h.displaySQL}}function FE(e){return null}function BE(e,t){let r=e;return t===qd.Year?r=365*e:t===qd.Month?r=30*e:t===qd.Week?r=7*e:t===qd.Hour?r=e/24:t===qd.Minute&&(r=e/1440),r=Math.round(1e6*r)/1e6,r}function $E(e){return(e=e.toLowerCase()).replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}function GE(e,t){return e.replace("?",(function(){return t}))}function WE(e){return e.replace(/\'/g,"''")}function VE(e,t){return e.replace(/{([0-9]+)}/g,(function(e,r){return t[parseInt(r)]}))}function HE(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function zE(e,t=0,r=!1){const n=new Date(e+t);return r?n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2)+" "+("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2):n.getUTCFullYear()+"-"+("0"+(n.getUTCMonth()+1)).slice(-2)+"-"+("0"+n.getUTCDate()).slice(-2)+" "+("0"+n.getUTCHours()).slice(-2)+":"+("0"+n.getUTCMinutes()).slice(-2)+":"+("0"+n.getUTCSeconds()).slice(-2)}function qE(){const e=(new Date).getTimezoneOffset();return(e<0?1:-1)*(e<0?Math.abs(e)/60:e/60)*60*60*1e3}function YE(e,t,r,n){let o="";if(n){let i=ap.date,a=ap.time;if(r){const e=sp(r);i=e.datePattern,a=t.includes("DATE_TIME_PICKER")?e.timePattern||a:""}else"DATE_PICKER"!==t&&"DOUBLE_DATE_PICKER"!==t||(a="");o=cp(e,n,i,a)}else"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t?o=e.toLocaleDateString():"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(o=e.toLocaleDateString()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2));return o}function JE(e,t,r=!1){return"number"!=typeof e&&"string"!=typeof e||("number"==typeof e&&r&&(e-=qE()),e=new Date(e)),e.setMilliseconds(0),t===ME.Date?(e.setHours(0),e.setMinutes(0),e.setSeconds(0)):t===ME.DateTimeShort&&e.setSeconds(0),e.getTime()}!function(e){e.Date="DATE",e.DateTimeShort="DATE_TIME_SHORT",e.DateTimeLong="DATE_TIME_LONG"}(ME||(ME={}));var KE,XE=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function QE(e,t,r,n){return XE(this,void 0,void 0,(function*(){return yield ZE(e,t,r,n).then((e=>XE(this,void 0,void 0,(function*(){return e?yield mb.getInstance().fetchServiceInfo(e).then((e=>e.definition)).then((t=>t?{def:t,url:e}:null)):yield Promise.resolve(null)}))))}))}function ZE(e,t,r,n){return XE(this,void 0,void 0,(function*(){return e||r?r?yield tC(r,n).then((r=>XE(this,void 0,void 0,(function*(){if(!r)return yield rC(eC(e),e,t);const n=FI();let o=r.url;return n&&(o=lC(o)||o),yield rC(o,e,t)})))):yield rC(eC(e),e,t):yield Promise.resolve(null)}))}function eC(e){let t=sC(e,!1);const r=FI();r&&(t=uC(t));let n=t.replace(`/${Kl.SceneService}`,`/${Kl.FeatureService}`);return r&&(n=lC(n)||n),n}function tC(e,t){return XE(this,void 0,void 0,(function*(){if(!e)return yield Promise.resolve(null);const r={id:e,relationshipType:"Service2Service",direction:"reverse",authentication:nb.getInstance().getSessionByUrl(t)};return yield(0,rI.oO)(r).then((e=>{var t;return(null===(t=null==e?void 0:e.relatedItems)||void 0===t?void 0:t.find((e=>e.type===Xl.FeatureService)))||null}))}))}function rC(e,t,r){return XE(this,void 0,void 0,(function*(){const n=sC(t,!1),o=sC(e,!1);return yield Promise.all([mb.getInstance().fetchServiceInfo(n),mb.getInstance().fetchServiceInfo(o)]).then((e=>{var t,n;const i=null===(t=e[0].definition)||void 0===t?void 0:t.layers,a=null===(n=e[1].definition)||void 0===n?void 0:n.layers;if(!Array.isArray(a))return null;const s=parseInt(r);if(Array.isArray(i)){for(let e=0;e<Math.min(i.length,a.length);e++)if(i[e].id===s)return`${o}/${a[e].id}`}else if(s<a.length)return`${o}/${a[s].id}`;return null})).catch((e=>(console.error("Can not find associated feature layer, ",t),null)))}))}function nC(e){if(!iC(e))return"";const t=decodeURI(e).split("/"),r=t.findIndex((e=>Object.values(Kl).some((t=>t.toLowerCase()===e.toLowerCase()))))-1;return t[r]}function oC(e){return!(!iC(e)||aC(e))}function iC(e,t){if(!e||!/^(http(s)?:)?\/\//.test(e))return!1;const r=sC(e,!1),n=null==r?void 0:r.split("/");return!(!n||!Object.values(Kl).some((e=>n[n.length-1].toLowerCase()===e.toLowerCase()))||t&&!t.some((e=>n[n.length-1].toLowerCase()===e.toLowerCase())))}function aC(e){return!!iC(e)&&(e.split("/").find((e=>e.toLowerCase()===Kl.SceneService.toLowerCase()))?/\/layers\/\d+\/?$/.test(e):/\/\d+\/?$/.test(e))}function sC(e,t,r){if(!e||t&&!r)return null;const n=e.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,"").split("/"),o=n.findIndex((e=>Object.values(Kl).some((t=>t.toLowerCase()===e.toLowerCase()))));if(-1===o)return null;const i=n.slice(0,o+1).join("/");return t?null==r.id?null:i.split("/").find((e=>e.toLowerCase()===Kl.SceneService.toLowerCase()))?`${i}/layers/${r.id}`:`${i}/${r.id}`:i}function lC(e){return BI(e)}function uC(e){var t,r,n;const o=null===(r=null===(t=jy().getState())||void 0===t?void 0:t.appConfig)||void 0===r?void 0:r.appProxies;if(!e||!o)return e;const i=null===(n=Object.values(o).find((t=>t.proxyUrl===sC(e,!1))))||void 0===n?void 0:n.sourceUrl;if(i){let t=i;const r=e.split("/").filter((e=>e)),n=parseInt(r[r.length-1]);return isNaN(n)||(t=e.split("/").find((e=>e.toLowerCase()===Kl.SceneService.toLowerCase()))?`${t}/layers/${n}`:`${t}/${n}`),t}return e}function cC(e,t){if(!e||!t)return"";const r=e;switch(r){case Yl.Error:return t.formatMessage({id:"widgetLoadError",defaultMessage:gS.widgetLoadError});case Yl.FeatureLayer:return t.formatMessage({id:"featureLayer",defaultMessage:gS.featureLayer});case Yl.FeatureService:return t.formatMessage({id:"featureService",defaultMessage:gS.featureService});case Yl.MapService:return t.formatMessage({id:"mapService",defaultMessage:gS.mapService});case Yl.GroupLayer:return t.formatMessage({id:"groupLayer",defaultMessage:gS.groupLayer});case Yl.Map:return t.formatMessage({id:"map",defaultMessage:gS.map});case Yl.SimpleLocal:return t.formatMessage({id:"simpleLocal",defaultMessage:gS.simpleLocal});case Yl.WebMap:return t.formatMessage({id:"webMap",defaultMessage:gS.webMap});case Yl.WebScene:return t.formatMessage({id:"webScene",defaultMessage:gS.webScene});case Yl.CSV:return t.formatMessage({id:"csv",defaultMessage:gS.csv});case Yl.SceneService:return t.formatMessage({id:"sceneService",defaultMessage:gS.sceneService});case Yl.SceneLayer:return t.formatMessage({id:"sceneLayer",defaultMessage:gS.sceneLayer});case Yl.ImageService:return t.formatMessage({id:"imageService",defaultMessage:gS.imageService});case Yl.VectorTileService:return t.formatMessage({id:"vectorTileService",defaultMessage:gS.vectorTileService});case Yl.WFS:return t.formatMessage({id:"wfsLayer",defaultMessage:gS.wfsLayer});case Yl.WMS:return t.formatMessage({id:"wmsLayer",defaultMessage:gS.wmsLayer});case Yl.WMTS:return t.formatMessage({id:"wmtsLayer",defaultMessage:gS.wmtsLayer});case Yl.KML:return t.formatMessage({id:"kml",defaultMessage:gS.kml});case Yl.GeoJSON:return t.formatMessage({id:"geojson",defaultMessage:gS.geojson});default:throw new Error(`Unhandled case: ${r}`)}}function dC(e){const t=e&&e.type,r=Sb.getInstance().getDataSource(null==e?void 0:e.id),n=function(e){if(e){if(e.toLowerCase().includes(KE.Point.toLowerCase()))return KE.Point;if(e.toLowerCase().includes(KE.Polyline.toLowerCase()))return KE.Polyline;if(e.toLowerCase().includes(KE.Polygon.toLowerCase()))return KE.Polygon}return null}(r?r.getGeometryType():null==e?void 0:e.geometryType),o=function(e){if(!e)return!1;const t=Sb.getInstance().getDataSource(e.id);return t&&t.supportSpatialInfo&&!t.supportSpatialInfo()}(e),i=function(e,t,r){switch(e){case Yl.WebMap:case Yl.WebScene:case Yl.MapService:case Yl.FeatureService:case Yl.GroupLayer:case Yl.SceneService:case Yl.SceneLayer:case Yl.CSV:case Yl.GeoJSON:case Yl.ImageService:case Yl.KML:case Yl.VectorTileService:case Yl.WFS:case Yl.WMS:case Yl.WMTS:return e;case Yl.FeatureLayer:return r?`${e}_${Jl.Table}`:t?`${e}_${t}`:e;default:return"UNKNOWN"}}(t,n,o);switch(i){case Yl.WebMap:return s(3185);case Yl.WebScene:return s(9013);case`${Yl.FeatureLayer}_${KE.Point}`:return s(9487);case`${Yl.FeatureLayer}_${KE.Polyline}`:return s(8103);case`${Yl.FeatureLayer}_${KE.Polygon}`:return s(6992);case`${Yl.FeatureLayer}_${Jl.Table}`:return s(129);case`${Yl.FeatureLayer}`:return s(5124);case`${Yl.FeatureService}`:return s(8309);case`${Yl.MapService}`:return s(8302);case`${Yl.GroupLayer}`:return s(2491);case Yl.SceneService:return s(8310);case Yl.SceneLayer:return s(1402);case Yl.CSV:return s(9431);case Yl.GeoJSON:return s(7597);case Yl.ImageService:return s(4422);case Yl.KML:return s(945);case Yl.VectorTileService:return s(3493);case Yl.WFS:return s(3323);case Yl.WMS:return s(1547);case Yl.WMTS:return s(3814);default:return s(2534)}}function pC(e,t,r,n=!1){const o=t===aE.DateOperatorIsOn?"DATE_TIME_PICKER":"TEXT_BOX",i={type:OE.Single,jimuFieldName:e,operator:t,valueOptions:{isValid:!0,sourceType:sE.UserInput,inputEditor:o,value:r},displayType:TE.None};return n&&(i.caseSensitive=n),i}function fC(e,t){return{type:OE.Set,logicalOperator:e,parts:t}}function hC(e,t,r){const n={sql:"1=1",displaySQL:"",logicalOperator:e,parts:t},o=UE(Ae(n),r);return n.sql=o.sql,n.displaySQL=o.displaySQL,n}function gC(e,t,r=oE.And){return hC(r,e.filter((e=>e)).map((e=>({type:OE.Set,logicalOperator:e.logicalOperator,parts:e.parts}))),t)}function mC(e,t,r){if(!e||!t)return null;const n=e[0];let o=n.clause;const i=r(o.operator.toLowerCase().replace(/\_(\w)/g,((e,t)=>t.toUpperCase())));return o.displayType===TE.UseLabel&&null===o.displayLabel?o=o.set("displayLabel",i+" "+o.valueOptions.value.map((e=>e.label)).join(",")):o.displayType===TE.UseAskForValue&&null===o.askForValueOptions.label&&(o=o.setIn(["askForValueOptions","label"],i)),Ae(hC(n.logicalOperator,[o],t))}function vC(e,t){var r;if(!e||!t)return null;let n=null;const o=null===(r=null==e?void 0:e.filter((e=>e.dataSourceId===t.id)))||void 0===r?void 0:r[0];if(o){const r=e[0].clause,i=[];o.fieldList.forEach((e=>{i.push(r.set("jimuFieldName",e))})),n=Ae(hC(o.logicalOperator,i,t))}return n}!function(e){e.Point="POINT",e.Polyline="POLYLINE",e.Polygon="POLYGON"}(KE||(KE={}));var yC=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const SC=10;function bC(e){var t,r;return yC(this,void 0,void 0,(function*(){const{searchFields:n,dataSource:o,maxSuggestions:i,searchText:a}=e;return e.searchText=null==a?void 0:a.trim(),n&&0!==(null==n?void 0:n.length)&&o?(null===(r=null===(t=o.getLayerDefinition())||void 0===t?void 0:t.advancedQueryCapabilities)||void 0===r?void 0:r.supportsFullTextSearch)?function(e,t){var r;return yC(this,void 0,void 0,(function*(){if(!t)return Promise.resolve({fields:[],fullTextField:[]});if(!e)return Promise.resolve({fields:t,fullTextField:[]});const n=(null===(r=e.getLayerDefinition())||void 0===r?void 0:r.indexes)||[],o=[],i=[];return DC(e,t).forEach((e=>{if(e.esriType!==_l.GlobalID&&e.type===Rl.String){let t=!1;null==n||n.forEach((r=>{var n;(null===(n=r.fields)||void 0===n?void 0:n.split(", ").includes(e.name))&&(t=!0)})),t?i.push(e):o.push(e)}else o.push(e)})),Promise.resolve({fields:TC(o),fullTextField:TC(i)})}))}(o,n).then((t=>{const r=t.fields||[],n=t.fullTextField||[],o=[wC(Object.assign(Object.assign({},e),{searchFields:r})),IC(Object.assign(Object.assign({},e),{searchFields:n}))];return Promise.all(o).then((e=>{let t=e[0].concat(e[1]);return t=t.splice(0,i||SC),Promise.resolve(t)}))})):wC(e,i):[]}))}function wC(e,t=SC){var r,n;return yC(this,void 0,void 0,(function*(){const{searchText:o,searchFields:i,dataSource:a,exact:s}=e;if(!i||0===i.length)return Promise.resolve([]);const l=null===(n=null===(r=a.getLayerDefinition())||void 0===r?void 0:r.advancedQueryCapabilities)||void 0===n?void 0:n.supportsDistinct,u=PC(o,i,a,s,oE.Or,aE.StringOperatorStartsWith);return EC({outFields:i,returnDistinctValues:!!l,returnGeometry:!1,orderByFields:null,where:u.sql||"1=0",sqlExpression:u},e,t)}))}function IC(e){var t,r;return yC(this,void 0,void 0,(function*(){const{searchText:n,searchFields:o,dataSource:i}=e;if(!o||0===o.length)return Promise.resolve([]);const a=null===(r=null===(t=i.getLayerDefinition())||void 0===t?void 0:t.advancedQueryCapabilities)||void 0===r?void 0:r.supportsDistinct,s=i.getCurrentQueryParams(),l=function(e,t){var r;const n=[];return null===(r=null==t?void 0:t.split(" "))||void 0===r||r.forEach((t=>{if(t){const r={onFields:e,searchTerm:t,searchType:"prefix"};n.push(r)}})),n}(o,n);return EC({fullText:l,where:s.where||"1=1",geometry:s.geometry,returnDistinctValues:!!a,orderByFields:null,returnGeometry:!1,outFields:o},e,null,!0)}))}function EC(e,t,r=SC,n=!1){return yC(this,void 0,void 0,(function*(){const{searchText:o,dataSource:i,searchFields:a}=t,s=CC(o,n);return(n?OC(e,i):function(e,t){return yC(this,void 0,void 0,(function*(){return t?yield t.query(e,{scope:eu.InRuntimeView}).then((e=>yC(this,void 0,void 0,(function*(){return yield function(e,t){return yC(this,void 0,void 0,(function*(){return yield Promise.resolve((null==t?void 0:t.records)||[])}))}(0,e)})))):yield Promise.resolve([])}))}(e,i)).then((e=>yC(this,void 0,void 0,(function*(){let t=[];return a.forEach((r=>{e.forEach((e=>{const a=Qh();let l;if(l=n?i.buildRecord(e).getFormattedFieldValue(r,a):e.getFormattedFieldValue(r,a),l&&!xC(t,l)&&l.match(s)){const e={suggestionHtml:AC(l,o,n),suggestion:l,fieldName:r};t.push(e)}}))})),t=function(e,t){const r=e[0]?[e[0]]:[];for(let n=1;n<e.length;n++){const o=e[n];let i=!1;for(let e=0;e<r.length;e++)if(o[t]===r[e][t]){i=!0;break}i||r.push(o)}return r}(t,"suggestion"),r&&(t=t.splice(0,r)),Promise.resolve(t)})))).catch((e=>(console.error(e),Promise.resolve([]))))}))}function CC(e,t=!1){let r=new RegExp(`(${n=e,n.replace(/[-[\]{}()*+!<=:?.\/\\^$|#\s,]/g,"\\$&")})`,"gi");var n;return t&&(e=e.split(" ").join("|"),r=new RegExp(e,"ig")),r}function OC(e,t){return yC(this,void 0,void 0,(function*(){const r=t.getDataSourceJson().url;return ib(r,(t=>yC(this,void 0,void 0,(function*(){return yield qa.WY(`${r}/query`,{params:e,authentication:t,httpMethod:"GET"}).then((e=>Promise.resolve((null==e?void 0:e.features)||[]))).catch((e=>Promise.resolve([])))}))))}))}function xC(e,t){return e.filter((e=>t===(null==e?void 0:e.suggestion))).length>0}function TC(e){return e?e.map((e=>e.name)):[]}function AC(e,t,r=!1){if(!t)return e;const n=CC(t,r);return e.match(n)?e.replace(n,"<strong >$&</strong>"):e}function PC(e,t,r,n=!1,o=oE.Or,i=aE.StringOperatorContains){if(e=null==e?void 0:e.trim(),t){const a=[];return DC(r,t).forEach((t=>{let o=e;const s=null==r?void 0:r.getFieldCodedValueList(null==t?void 0:t.name);s&&(null==s||s.forEach((e=>{o===(null==e?void 0:e.label)&&(o=null==e?void 0:e.value)})));const l=!isNaN(Number(o))&&isFinite(Number(o));if(t.type===Rl.Number&&!l)return!1;const u=function(e,t,r=aE.StringOperatorContains){let n;return e===Rl.Number?n=aE.NumberOperatorIs:e===Rl.String&&(n=t?aE.StringOperatorIs:r),n}(t.type,n,i),c=t.type===Rl.Number?Number(o):o,d=pC(null==t?void 0:t.name,u,[{value:c,label:c+""}]);a.push(d)})),hC(o,a,r)}}function DC(e,t){var r;if(!e||!t)return[];const n=(null===(r=null==e?void 0:e.getSchema())||void 0===r?void 0:r.fields)||{},o=[];for(const e in n)t.includes(n[e].name)&&o.push(n[e]);return o}var RC=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const _C={};function kC(e){var t,r;return RC(this,void 0,void 0,(function*(){(e=Object.assign({},e)).query=Object.assign({},e.query);let{widgetId:n,ds:o,query:i,selectionMode:a,signal:s,jimuLayerView:l,updateSelectionIfAborted:u}=e;const c=i.outFields||[],d=o.getAllUsedFields()||[];let p=[];const f=l&&l.view;f&&(null===(t=f.availableFields)||void 0===t?void 0:t.length)>0&&(p=null===(r=f.availableFields)||void 0===r?void 0:r.slice()),p||(p=[]);let h=c.concat(d).concat(p);h=Array.from(new Set(h)),h.includes("*")&&(h=["*"]),i.outFields=h,s||(s=(new AbortController).signal);const g=o.id,m=_C[g];if(m){const e=new Event("abort");m.dispatchEvent(e)}_C[g]=s;const v=yield function(e){return RC(this,void 0,void 0,(function*(){let t=[],{ds:r,query:n,selectionMode:o,signal:i,jimuLayerView:a,checkLayerVisibility:s,progressCallback:l}=e;return new Promise((e=>RC(this,void 0,void 0,(function*(){if(n=Object.assign({},n),n.geometry&&(n.geometry.toJSON&&(n.geometry=n.geometry.toJSON()),!n.geometryType)){const e=!1,t=yield LI.geometryUtils.convertGeometryJsonToGeometryInstance(n.geometry,e);if(t){const e=LI.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(t.type);e&&(n.geometryType=e)}}const u=LI.lodash.cloneDeep(n),c=(0,LI.Immutable)(u);let d=!1,p=!1;function f(){return{queryParams:c,records:t,isAborted:p}}function h(){if(!d){i&&i.removeEventListener("abort",g,!1),d=!0;const t=f();e(t)}}function g(){p=!0}function m(e){if(l){const t=.95*e,r=f();l(t,r)}}if(i&&i.addEventListener("abort",g,!1),s&&a&&!a.isLayerVisible())h();else{try{if(o===LI.DataSourceSelectionMode.New){const e=yield r.queryAll(n,i,m);t=(null==e?void 0:e.records)||[]}else{const e=r.getSelectedRecords(),a=e.map((e=>parseFloat(e.getId()))),s=yield r.queryIds(n),l=((null==s?void 0:s.ids)||[]).map((e=>parseFloat(e)));if(p)return void h();if(o===LI.DataSourceSelectionMode.AddToCurrent){const o=.1,s=1-o;m(o);const u={};a.forEach((e=>{u[e]=!0}));const c=l.filter((e=>!u[e]));if(c.length>0){const a=LI.lodash.cloneDeep(n);delete a.geometry,delete a.where,a.objectIds=c;const l=yield r.queryAll(a,i,(e=>{m(o+s*e)})),u=(null==l?void 0:l.records)||[];t=[...e,...u]}else t=e}else{m(.5);const r={};l.forEach((e=>{r[e]=!0})),o===LI.DataSourceSelectionMode.RemoveFromCurrent?t=e.filter((e=>{const t=e.getId();return!r[t]})):o===LI.DataSourceSelectionMode.SelectFromCurrent&&(t=e.filter((e=>{const t=e.getId();return r[t]})))}}}catch(e){console.error("query features from server error by selection mode",e)}h()}}))))}))}(e),y=(null==v?void 0:v.records)||[],S={widgetId:n,records:y};if(y.length>0){let e=null;a===LI.DataSourceSelectionMode.New&&(i.where||i.geometry)&&(e={},i.where&&(e.where=i.where),i.geometry&&(e.geometry=i.geometry)),e?S.queryParams=e:S.ids=y.map((e=>e.getId()))}let b=!0;return b=s===_C[g]&&(!s.aborted||u()),b?o.selectRecords(S):null}))}var LC=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const NC=s(6792),MC=["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"],jC=["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"];function UC(e){return LC(this,void 0,void 0,(function*(){return yield ib(e.url,(t=>LC(this,void 0,void 0,(function*(){const r=(null==t?void 0:t.token)?{httpMethod:"GET",params:{token:null==t?void 0:t.token}}:{httpMethod:"GET"};return e.url?yield(0,qa.WY)(`${e.url}/${e.featureId}/attachments`,r).then((e=>LC(this,void 0,void 0,(function*(){return yield Promise.resolve(e.attachmentInfos)})))):yield Promise.reject(null)}))),1)}))}function FC(e,t){return LC(this,void 0,void 0,(function*(){return yield ib(t.url,(r=>LC(this,void 0,void 0,(function*(){if(t&&t.attachmentTypes&&t.attachmentTypes.length>0){const n=[];for(let o=0;o<e.length;o++)t.attachmentTypes.includes(e[o].contentType)&&(e[o].url=`${t.url}/${t.featureId}/attachments/${e[o].id}`+((null==r?void 0:r.token)?`?token=${null==r?void 0:r.token}`:""),n.push(e[o]));return yield Promise.resolve(n)}for(let n=0;n<e.length;n++)e[n].url=`${t.url}/${t.featureId}/attachments/${e[n].id}`+((null==r?void 0:r.token)?`?token=${null==r?void 0:r.token}`:"");return yield Promise.resolve(e)}))),1)}))}function BC(e,t){let r;return MC.includes(e.type)?r=Rl.Number:"esriFieldTypeDate"===e.type?r=Rl.Date:jC.includes(e.type)&&(r=Rl.String),r?{jimuName:e.name,name:e.name,type:r,esriType:e.type,alias:(null==t?void 0:t.label)||e.alias,format:(null==t?void 0:t.format)||("esriFieldTypeOID"===e.type?{digitSeparator:!1,places:0}:null)}:null}function $C(e){return MC.includes(e)}function GC(e,t){let r=null;return e&&e.length>0&&e.some((e=>e.name===t&&(r=e,!0))),r}function WC(e,t,r){const n=r[t];let o;const i=e.typeIdField;let a;r.hasOwnProperty(i)&&(o=r[i]);const s=GC(e.fields,t);a=null!=o?JC(e,t,o,s):XC(e,s);const l=YC(n,a);if(e.typeIdField===t){const n=[{value:r[t],label:l.displayValue}];l.displayValue=QC(e,n)[0].label}return l}function VC(e,t,r){if(1===r.length)return[WC(e,t,r[0])];const n=e.typeIdField;let o=null,i=null,a=[];const s=[];for(const l of r){const r=l,u=r[t];if(n===t)a=o||zC(e);else{const s=GC(e.fields,t);if(r.hasOwnProperty(n)){if(!i){i={},o=zC(e);for(const r of o){const n=r.value;i[n]=JC(e,t,n,s)}}a=i[r[n]],a||(a=qC(s))}else a=XC(e,s)}const c=YC(u,a);s.push(c)}return s}function HC(e,t,r){let n=null;if(!e)return n;const o=GC(e.fields,t);if(!o)return n;const i=r?r[e.typeIdField]:null,a=r&&null!=i;if(e.typeIdField&&e.typeIdField.toUpperCase()===t.toUpperCase()){if(n=zC(e),a){const e=YC(i,n);n=[{value:e.value,label:e.displayValue}]}}else n=a?JC(e,t,i,o):XC(e,o);return n}function zC(e){const t=function(e){let t=null;return e.typeIdField&&e.types&&e.types.length>0&&(t=[],Object.keys(e.types).forEach((r=>{t.push({value:e.types[r].id,label:e.types[r].name})}))),t}(e);return QC(e,t)}function qC(e){let t=null;if(!e)return t;const r=e.domain;return r&&"codedValue"===r.type&&r.codedValues&&r.codedValues.length>0&&(t=[],r.codedValues.forEach((e=>{t.push({value:e.code,label:e.name})}))),t}function YC(e,t){let r={isCodedValueOrSubtype:!1,displayValue:e+""};return t&&t.length>0&&t.some((t=>t.value===e&&(r={isCodedValueOrSubtype:!0,displayValue:t.label},!0))),Object.assign(r,{value:e})}function JC(e,t,r,n){let o=null;return(n=n||GC(e.fields,t))?(e.typeIdField&&e.types&&e.types.length>0?(e.types.some((i=>{if(i.id===r){if(t===e.typeIdField)o=[{value:i.id,label:i.name}];else if(i.domains&&i.domains[t]){const e=i.domains[t];"inherited"===e.type?o=qC(n):e.codedValues&&e.codedValues.length>0&&(o=[],e.codedValues.forEach((e=>{o.push({value:e.code,label:e.name})})))}else i.domains&&(o=qC(n));return!0}})),o||(o=qC(n))):o=qC(n),o):o}function KC(e,t,r){return e[t]?r===e[t]||(e[t]=e[t]+", "+r):e[t]=r,e}function XC(e,t){let r=null;if(!t)return r;const n=t.name;let o={},i=!0;e.typeIdField&&e.types&&e.types.length>0?(Object.keys(e.types).forEach((r=>{const a=e.types[r];if(a.domains&&a.domains[n]){const e=a.domains[n];if("inherited"===e.type){if(i){i=!1;const e=qC(t);null==e||e.forEach((e=>{o=KC(o,e.value,e.label)}))}}else e.codedValues&&e.codedValues.length>0&&e.codedValues.forEach((e=>{o=KC(o,e.code,e.name)}))}})),r||(r=qC(t))):r=qC(t);const a=[];for(const e in o){const r=$C(t.type)?parseFloat(e):e;a.push({value:r,label:o[e]})}return a.length>0&&(r=a),r}function QC(e,t){const r=function(e){let t=null,r=null;const n=ZC(e);if(n)t={},r=n.uniqueValueInfos;else{const n=e;if(n.renderer){const e=ZC(n.sourceJSON),o=n.renderer.toJson();"uniqueValue"===o.type&&e&&e.field1===o.field1?(t={},r=o.uniqueValueInfos):e&&(t={},r=e.uniqueValueInfos)}}if(r)for(let e=0;e<r.length;e++){const n=r[e];t[n.value]=n.label}return t}(e);if(r&&t)for(let e=0;e<t.length;e++){const n=t[e];r[n.value]&&(n.label=r[n.value])}return t}function ZC(e){let t=null;return e.drawingInfo&&e.drawingInfo.renderer&&"uniqueValue"===e.drawingInfo.renderer.type&&(t=e.drawingInfo.renderer),t}function eO(e){if(!e)return!1;const t=e.includes(".arcgis.com/"),r=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return t&&r}function tO(e){return null==e?void 0:e.replace(/\s/g,"_")}function rO(e){var t,r;if(!e)return null;const n=null!==(r=null!==(t=e.id)&&void 0!==t?t:e.title)&&void 0!==r?r:e.name;return void 0===n?null:tO(`${n}`)}function nO(e){var t,r,n,o,i,a;if(!e)return null;const s=null!==(a=null!==(i=null!==(o=null!==(r=null===(t=e.source)||void 0===t?void 0:t.mapLayerId)&&void 0!==r?r:null===(n=e.sourceJSON)||void 0===n?void 0:n.id)&&void 0!==o?o:e.id)&&void 0!==i?i:e.title)&&void 0!==a?a:e.name;return void 0===s?null:tO(`${s}`)}function oO(e){var t,r;if(!e)return null;const n=null!==(r=null!==(t=e.id)&&void 0!==t?t:e.name)&&void 0!==r?r:e.title;return void 0===n?null:tO(`${n}`)}function iO(e){var t;if(!e)return null;const r=null!==(t=e.name)&&void 0!==t?t:e.id;return void 0===r?null:tO(`${r}`)}function aO(e){return(null==e?void 0:e.type)&&Object.values(Ql).some((t=>t===e.type))}function sO(e){return e.sort(((e,t)=>{var r;return null===(r=null==e?void 0:e.getLabel())||void 0===r?void 0:r.localeCompare(null==t?void 0:t.getLabel(),null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}))}function lO(e,t){return`${e}-${t}`}function uO(e,t,r,n=eu.InConfigView,o){let i=`${e.name} IS NOT NULL`;e.type===Rl.String&&(i=`(${i} AND CHAR_LENGTH(${e.name}) > 0)`);const a={queryParams:{where:r=r?`(${r} AND ${i})`:i,returnGeometry:!1,outFields:[e.name],orderByFields:[e.name],returnDistinctValues:!0},queryOptions:{scope:n,widgetId:o||"advanced_select_query"}};return o&&(a.queryOptions.excludeQuery={dataSourceId:t,widgetId:o}),a}function cO(e,t,r,n=eu.InConfigView,o){return LC(this,void 0,void 0,(function*(){if(!e)return 0;const i=t,a=uO(e,i.belongToDataSource.id,r,n,o);return yield i.loadCount(a.queryParams,a.queryOptions).then((e=>e))}))}function dO(e,t,r,n,o,i=eu.InConfigView,a){return LC(this,void 0,void 0,(function*(){const s=[];let l=0;if(!e)return{list:s,reducedCount:l};const u=["undefined"];e.type===Rl.Number&&u.push("nan");const c=t,d=uO(e,t.belongToDataSource.id,o,i,a);return d.queryParams.page=1,d.queryParams.pageSize=r,yield c.load(d.queryParams,d.queryOptions).then((t=>{const r={},o={};return t?(t.forEach((t=>{const i=t,a=i.feature.attributes[e.jimuName];if(!(a in r)&&(r[a]=!0,0===u.filter((e=>(a+"").trim().toLowerCase()===e)).length)){const t=i.getFormattedFieldValue(e.jimuName,n);e.type===Rl.Date?(t in o||s.push({value:a,label:t}),o[t]=!0):s.push({value:a,label:t})}})),l=t.length-s.length,{list:s,reducedCount:l}):null}))}))}function pO(e){let t=null==e?void 0:e.url;return t?(t=null!==e.layerId&&void 0!==e.layerId?e.type===Ql.SceneLayer?e.url+"/layers/"+e.layerId:e.url+"/"+e.layerId:e.url,t=t.replace(/^http:/,"https:"),t):null}function fO(e,t){const r=Sb.getInstance();let n;return n=t?e.dataViewId?r.getLocalDataSourceId(r.getDataViewDataSourceId(e.mainDataSourceId,e.dataViewId),t):r.getLocalDataSourceId(e.mainDataSourceId,t):e.dataSourceId,n}function hO(e){var t;return e?{dataSourceId:e.id,mainDataSourceId:e.getMainDataSource().id,dataViewId:e.dataViewId,rootDataSourceId:null===(t=e.getRootDataSource())||void 0===t?void 0:t.id}:null}function gO(e){var t;return LC(this,void 0,void 0,(function*(){const r=null==e?void 0:e.getDataSourceJson();if(null==r?void 0:r.sourceLabel)return r.sourceLabel;const n=(null==e?void 0:e.getServiceDefinition)?e.getServiceDefinition():null===(t=null==e?void 0:e.getLayerDefinition)||void 0===t?void 0:t.call(e),o=null==e?void 0:e.layer;let i=null==n?void 0:n.name;return o?i=o.title||i:(null==r?void 0:r.itemId)&&!e.parentDataSource&&e.fetchItemInfo&&(i=yield e.fetchItemInfo().then((e=>(null==e?void 0:e.title)||i)).catch((e=>(console.warn("Can not get item info. ",e,r.itemId,r.portalUrl),i)))),i}))}function mO(e){var t;let r,n=e;for(;null===(t=null==n?void 0:n.declaredClass)||void 0===t?void 0:t.includes("layer");)r=r?`${tO(n.id+"")}-${r}`:tO(n.id+""),n=n.parent;return r}function vO(e,t){if(!e)return null;const r=e.getMainDataSource(),n=e=>{var t,n;return!e||(r.map?!(null===(n=null===(t=null==e?void 0:e.declaredClass)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.includes("layer")):r.layer?`${e.id}`===r.layer.id:yO(r,e))};let o,i=t;for(;!n(i);)o="esri.layers.support.Sublayer"===i.declaredClass?o?`${nO(i)}-${o}`:nO(i):o?`${rO(i)}-${o}`:rO(i),i=i.parent;return o?`${r.id}-${o}`:r.id}function yO(e,t){var r,n,o;if(!e||!t)return!1;const i=e.getMainDataSource();return t[qO]?t[qO]===i.id:(null===(r=t.portalItem)||void 0===r?void 0:r.id)?t.portalItem.id===i.itemId&&(t.url?pO(t)===i.url:!t.parent||!(null===(o=null===(n=t.parent.declaredClass)||void 0===n?void 0:n.toLowerCase())||void 0===o?void 0:o.includes("layer"))||`${t.layerId}`===i.jimuChildId):t.url?pO(t)===i.url:i.layer?`${t.id}`===i.layer.id:`${t.id}`===i.jimuChildId}function SO(e,t){const r=(null==e?void 0:e.split("-"))||[],n=(null==t?void 0:t.split("-"))||[];return(null==r?void 0:r.every(((e,t)=>n[t]===e)))&&n.length-1===r.length}function bO(e){return(null==e?void 0:e.split("-").reverse()[0])===Nd}function wO(e){return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportSymbol():!(e.getDataSourceJson().isDataInDataSourceInstance||!e.layer))}function IO(e){var t;return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportAttachment():null===(t=e.getLayerDefinition())||void 0===t?void 0:t.hasAttachments)}function EO(e){var t,r,n,o,i,a,s,l;if((null==e?void 0:e.type)!==zl.FeatureLayer&&(null==e?void 0:e.type)!==zl.MapService)return!1;if(e.isDataView||e.isLocal)return e.getMainDataSource().supportTime();if(e.type===zl.FeatureLayer?null===(r=null===(t=e.getLayerDefinition())||void 0===t?void 0:t.timeInfo)||void 0===r?void 0:r.timeExtent:null===(o=null===(n=e.getServiceDefinition())||void 0===n?void 0:n.timeInfo)||void 0===o?void 0:o.timeExtent){let t=e;(null===(i=e.getDataSourceJson().url)||void 0===i?void 0:i.split("/").some((e=>e.toLowerCase()===Kl.MapService.toLowerCase())))&&(t=TO(e)||t);const r=xO(null===(l=null===(s=null===(a=e.getRootDataSource())||void 0===a?void 0:a.map)||void 0===s?void 0:s.resourceInfo)||void 0===l?void 0:l.operationalLayers,t);return!r||!1!==r.timeAnimation}return!1}function CO(e,t){if(-1===e||-1===t)return-1;if(null==e||null==t)return e||t;const r="number"==typeof e,n="number"==typeof t,o=Array.isArray(e),i=Array.isArray(t);if(r&&n)return e===t?e:-1;if(r&&i||o&&n){const n=r?e:t,i=o?e:t,a=OO(i),s=OO(i,!1);return n>=a&&n<=s?n:-1}if(o&&i){const r=Math.max(OO(e),OO(t)),n=Math.min(OO(e,!1),OO(t,!1));return[r===-1/0?null:r,n===1/0?null:n]}return-1}function OO(e,t=!0){return t?"number"==typeof(null==e?void 0:e[0])?e[0]:-1/0:"number"==typeof(null==e?void 0:e[1])?e[1]:1/0}function xO(e,t){let r=null;return t?(null==e||e.some((e=>{var n;return(null==e?void 0:e.id)!==(null===(n=t.getSchema())||void 0===n?void 0:n.childId)&&(null==e?void 0:e.id)!==t.jimuChildId||(r=e),r||"GroupLayer"!==(null==e?void 0:e.layerType)||(r=xO(null==e?void 0:e.layers,t)),!!r})),r):r}function TO(e){let t=e,r=null;for(;t;){if(t.type===zl.MapService){r=t;break}t=t.parentDataSource}return r}function AO(e){var t;const r=LO(e);return r?r.type!==e.type?null===(t=r.getAssociatedDataSource())||void 0===t?void 0:t._layer:r._layer:null}function PO(e){var t,r,n,o;const i=LO(e);if(!i)return null;if(!i._restLayer){const e={id:i.id,layerType:"ArcGISFeatureLayer",url:i.url,itemId:i.itemId,layerDefinition:i.getLayerDefinition(),popupInfo:i.getPopupInfo(),title:i.getLabel()};if(!i.url&&!i.itemId&&!i.getDataSourceJson().isDataInDataSourceInstance){const a=i.getRootDataSource();if(null===(r=null===(t=null==a?void 0:a.map)||void 0===t?void 0:t.resourceInfo)||void 0===r?void 0:r.operationalLayers){const t=xO(null===(o=null===(n=null==a?void 0:a.map)||void 0===n?void 0:n.resourceInfo)||void 0===o?void 0:o.operationalLayers,i);(null==t?void 0:t.featureCollection)&&(e.featureCollection=t.featureCollection)}}i._restLayer=e}return i._restLayer}function DO(e){const t=LO(e);return null==t?void 0:t.layerDefinition}function RO(e){const t=LO(e);return(null==t?void 0:t.popupInfo)||function(e){var t,r,n,o;if(!e)return null;let i;if(e.layer)i=null===(t=e.layer.popupTemplate)||void 0===t?void 0:t.toJSON();else if(EE(e)){const t=e.getItemData(),n=null===(r=null==t?void 0:t.layers)||void 0===r?void 0:r.find((t=>`${t.id}`===e.getDataSourceJson().layerId));i=null==n?void 0:n.popupInfo}if(null===(n=null==i?void 0:i.fieldInfos)||void 0===n?void 0:n.length){const t=(null===(o=e.getSchema())||void 0===o?void 0:o.fields)||{};i.fieldInfos=i.fieldInfos.filter((e=>e.fieldName.startsWith("expression/")||Object.keys(t).some((r=>t[r].name===e.fieldName))))}return i}(t)}function _O(e,t){var r,n;if(!e||!t)return null;const o=Object.values((null===(r=t.getDataSourceJson().schema)||void 0===r?void 0:r.fields)||{}),i=null===(n=e.fieldInfos)||void 0===n?void 0:n.filter((e=>o.some((t=>(null==t?void 0:t.name)===(null==e?void 0:e.fieldName)))));return Object.assign(Object.assign({},e),{fieldInfos:i})}function kO(e,t){var r,n;if(!e||!t)return null;const o=Object.values((null===(r=t.getDataSourceJson().schema)||void 0===r?void 0:r.fields)||{}),i=null===(n=e.fields)||void 0===n?void 0:n.filter((e=>o.some((t=>(null==t?void 0:t.name)===(null==e?void 0:e.name)))));return Object.assign(Object.assign({},e),{fields:i,geometryType:null,typeIdField:null})}function LO(e){var t;if(!e)return null;if(e.getDataSourceJson().isOutputFromWidget&&!e.getDataSourceJson().schema&&1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){const t=e.getOriginDataSources()[0];if(IE(t))return LO(t)}return e.getMainDataSource()}function NO(e,t=!0){var r,n,o,i,a,s,l;return LC(this,void 0,void 0,(function*(){if(!IE(e))return Promise.resolve(null);if(e.dataViewId===Nd&&e.useNoSelectionView()){const t=e.getMainDataSource().getDataView(Md);if(t)return NO(t)}let u=null;try{if(e.getDataSourceJson().isDataInDataSourceInstance)u=yield uE(e,e.getSourceRecords()).then((e=>null==e?void 0:e.layer));else if((null===(i=null===(o=null===(n=null===(r=e.layer)||void 0===r?void 0:r.source)||void 0===n?void 0:n.toArray)||void 0===o?void 0:o.call(n))||void 0===i?void 0:i.length)>0)u=new(0,(yield dS(["esri/layers/FeatureLayer"]))[0])({source:e.layer.source.clone(),objectIdField:e.layer.objectIdField,geometryType:e.layer.geometryType,sourceJSON:e.layer.sourceJSON,fields:e.layer.fields,customParameters:e.layer.customParameters||{},outFields:["*"]});else if(null===(a=e.layer)||void 0===a?void 0:a.clone)try{u=e.layer.clone()}catch(t){u=new(0,(yield dS(["esri/layers/FeatureLayer"]))[0])({source:e.layer.source.clone(),objectIdField:e.layer.objectIdField,geometryType:e.layer.geometryType,sourceJSON:e.layer.sourceJSON,fields:e.layer.fields,outFields:["*"]})}else if(e.itemId&&!e.url)u=yield jO(e);else if(e.itemId||e.url){const t=e.type===zl.FeatureLayer?dS(["esri/layers/FeatureLayer"]):dS(["esri/layers/SceneLayer"]),r=e.layerId?+e.layerId:NaN;u=yield t.then((t=>LC(this,void 0,void 0,(function*(){const n=t[0];return e.itemId?new n(Object.assign(Object.assign({},e.url?{url:e.url}:{}),{portalItem:{id:e.itemId,portal:{url:e.portalUrl}},layerId:isNaN(r)?void 0:r})):new n({url:e.url})}))))}}catch(e){console.error("Failed to create JS API layer by data source. ",e)}return u&&(null==e?void 0:e.url)&&(u.url=e.url),u&&(u.definitionExpression=t?null===(s=e.getCurrentQueryParams())||void 0===s?void 0:s.where:null,u.type===Ql.FeatureLayer&&(u.gdbVersion=t?e.getGDBVersion():null,u.timeExtent=t?gE(null===(l=e.getCurrentQueryParams())||void 0===l?void 0:l.time):null)),u&&(u.title=e.getLabel()||e.getDataSourceJson().sourceLabel),u}))}function MO(e){var t;return(null==e?void 0:e.type)!==zl.FeatureLayer?null:e.getDataSourceJson().isDataInDataSourceInstance?null===(t=cE(e,e.getSourceRecords()))||void 0===t?void 0:t.layer:Object.assign({},e.restLayer)}function jO(e){return LC(this,void 0,void 0,(function*(){return(null==e?void 0:e.itemId)&&(null==e?void 0:e.portalUrl)?yield dS(["esri/layers/Layer","esri/portal/PortalItem"]).then((t=>LC(this,void 0,void 0,(function*(){const r=t[0],n=t[1];return yield r.fromPortalItem({portalItem:new n({id:e.itemId,portal:{url:e.portalUrl}})}).then((t=>LC(this,void 0,void 0,(function*(){return(null==t?void 0:t.type)===Ql.FeatureLayer?yield Promise.resolve(t):(null==t?void 0:t.type)===Ql.GroupLayer?yield t.loadAll().then((t=>LC(this,void 0,void 0,(function*(){const r=t.layers.toArray().find((t=>`${t.layerId}`===e.layerId||tO(t.title)===tO(e.getMainDataSource().getDataSourceJson().sourceLabel)));return(null==r?void 0:r.type)===Ql.FeatureLayer?Promise.resolve(r):Promise.reject("Feaure layer data source error: failed to create feature layer with specific layer id.")})))):void 0}))))})))):yield Promise.resolve(null)}))}function UO(e,t,r){if(!e)return null;"number"==typeof e&&(e=new Date(e));const n=op[t];if(!n)return console.warn(`Invalid data format ${t}`),null;let o=hp(e,n.datePattern,r);if("date and time"===n.selector){const t=gp(e,n.timePattern,r),i=r.locale||"en";o=o+ip[tg(i,Object.keys(ip))||"common"]+t}return o}function FO(e){var t,r,n;const o=e;return(null===(t=o.layer)||void 0===t?void 0:t.datesInUnknownTimezone)||(null===(n=null===(r=o.getLayerDefinition)||void 0===r?void 0:r.call(o))||void 0===n?void 0:n.datesInUnknownTimezone)}function BO(e){let t=0;if(null===e)return t;if(t=NC[e],void 0===t){const r=/([-+]?\d+(\.\d+)?)/,n=new Intl.DateTimeFormat("en-us",{timeZone:e,timeZoneName:"shortOffset"}).formatToParts(new Date).find((({type:e})=>"timeZoneName"===e)).value.match(r);t=n?parseFloat(n[0]):0}return 60*t*60*1e3}function $O(e){let t="";return t="unknown"===e||NC[e]||null===e?"unknown":"device"===e?"system":e,t}function GO(e,t){const r=[t];let n=e;for(;n;)n.jimuChildId&&r.push(n.jimuChildId),n=n.parentDataSource;const o=r.reverse(),i=e.getRootDataSource();let a=Sb.getInstance().getDataSource(i.id).getDataSourceJson();for(const e of o){if(!a.childDataSourceJsons)return{};a=a.childDataSourceJsons[e]}return a}function WO(e,t){const r=t.getTimezone();if("unknown"===r)e-=qE();else if("device"!==r){const t=BO(r);e=e-qE()+t}return e}function VO(e,t){const r=t.getTimezone();if("unknown"===r)e+=qE();else if("device"!==r){const t=BO(r);e=e+qE()-t}return e}function HO(e,t,r){r=r||Qh();let n=t+"";return e&&(n=e.format?UO(t,e.format.dateFormat,r):null!=t?r.formatDate(t):null),n}function zO(e,t,r){var n;if(!t||!e)return[];if("feature"===r&&(null===(n=e.outFields)||void 0===n?void 0:n.includes("*")))return["*"];const o=Object.values(t.getSchema().fields||{}).map((e=>e.jimuName)),i=o.filter((t=>{var r,n;return null===(n=null===(r=e.where)||void 0===r?void 0:r.split(" "))||void 0===n?void 0:n.some((e=>null==e?void 0:e.includes(t)))})),a=o.filter((t=>{var r;return null===(r=e.orderByFields)||void 0===r?void 0:r.some((e=>{var r;return null===(r=null==e?void 0:e.split(" "))||void 0===r?void 0:r.includes(t)}))})),s=o.filter((t=>{var r;return null===(r=e.groupByFieldsForStatistics)||void 0===r?void 0:r.some((e=>null==e?void 0:e.includes(t)))}));let l=[];if("count"===r||"id"===r)l=Array.from(new Set([...i,...a,...s]));else if("feature"===r){const t=e.outFields||[];l=Array.from(new Set([...t,...i,...a,...s]))}return l.length===o.length&&(l=["*"]),l}const qO="exb_data_source_id_set_to_created_js_api_layer";function YO(e,t,r,n){let o=Ae(e);const i=null==e?void 0:e.utilities;if(JO(i,t))return{id:KO(i,t),appConfig:e};{const i={id:XO(e),type:r,source:"custom",url:t,label:n||QO(t)};return o=o.setIn(["utilities",i.id],i),{id:i.id,appConfig:null==o?void 0:o.asMutable({deep:!0})}}}const JO=(e,t)=>{var r;const n=null===(r=Object.keys(e||{}))||void 0===r?void 0:r.map((t=>{var r;return null===(r=e[t])||void 0===r?void 0:r.url}));return null==n?void 0:n.includes(t)},KO=(e,t)=>{var r;let n;return null===(r=Object.keys(e||{}))||void 0===r||r.forEach((r=>{var o,i;(null===(o=e[r])||void 0===o?void 0:o.url)===t&&(n=null===(i=e[r])||void 0===i?void 0:i.id)})),n},XO=e=>Um(e,"utility"),QO=e=>{var t;const r=e.match(/\/(\w*)\/(?:GP|NA|Geoenrichment|Geometry|Geocode)Server\/?(\w*)?\/?/);return 3===(null==r?void 0:r.length)?null!==(t=r[2])&&void 0!==t?t:r[1]:""};var ZO,ex=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function tx(e,t){return ex(this,void 0,void 0,(function*(){const r=yield pS("esri/geometry/support/jsonUtils"),n=e&&e[0]&&e[0].getGeometry();return!n||t.equals(n.spatialReference)?Promise.resolve(e):rx(e.map((e=>r.fromJSON(e.getGeometry()))),t).then((t=>t.map(((t,r)=>{const n=e[r]&&e[r].clone();return n.setGeometry(t),n}))))}))}function rx(e,t){return ex(this,void 0,void 0,(function*(){return e&&0!==e.length&&e[0]&&t.wkid!==e[0].spatialReference.wkid&&!t.equals(e[0].spatialReference)?yield dS(["esri/rest/geometryService","esri/rest/support/ProjectParameters","esri/geometry/projection"]).then((r=>ex(this,void 0,void 0,(function*(){var n,o;let i,a,s;if([i,a,s]=r,s.isLoaded()&&(null===(o=null===(n=e[0])||void 0===n?void 0:n.spatialReference)||void 0===o?void 0:o.wkid)){const r=function(e,t,r){return r.project(e,t)}(e,t,s);return r&&r[0]?yield Promise.resolve(r):yield ox(e,t,i,a).then((e=>ex(this,void 0,void 0,(function*(){return yield Promise.resolve(e)}))),(e=>ex(this,void 0,void 0,(function*(){return console.error(e),yield Promise.reject(e)}))))}return s.load(),yield ox(e,t,i,a).then((e=>ex(this,void 0,void 0,(function*(){return yield Promise.resolve(e)}))),(e=>ex(this,void 0,void 0,(function*(){return console.error(e),yield Promise.reject(e)}))))})))):yield Promise.resolve(e)}))}function nx(e,t,r){return ex(this,void 0,void 0,(function*(){const n=Array.isArray(e)?e[0]:e,o=new(yield pS("esri/geometry/SpatialReference"))("function"==typeof n.spatialReference.toJSON?n.spatialReference.toJSON():n.spatialReference);if(o.isGeographic&&!o.isWGS84){const o=ag(),[i,a]=yield dS(["esri/rest/geometryService","esri/rest/support/BufferParameters"]);return yield i.buffer(o,new a({distances:t,unit:r,geodesic:!0,bufferSpatialReference:n.spatialReference,outSpatialReference:n.spatialReference,geometries:Array.isArray(e)?e:[e]}))}{const n=yield pS("esri/geometry/geometryEngine");return o.isWGS84||o.isWebMercator?n.geodesicBuffer(e,t,r):n.buffer(e,t,r)}}))}function ox(e,t,r,n){return ex(this,void 0,void 0,(function*(){const o=ag(),i=new n({geometries:e,outSpatialReference:t});return yield r.project(o,i)}))}function ix(e,t){return ex(this,void 0,void 0,(function*(){const r=yield pS("esri/geometry/support/jsonUtils");let n=null;if(e)if(e.declaredClass)n=t?e.clone():e;else try{n=r.fromJSON(e)}catch(e){n=null,console.error("can not get geometry instance by geometry json",e)}return n}))}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(ZO||(ZO={}));var ax="beforeunload";function sx(e){e.preventDefault(),e.returnValue=""}function lx(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}const ux=[/\.arcgis\.com$/];var cx,dx;function px(e){if(!window||!window.parent||window.parent===window)return;const t=window.parent;try{if(t.jimuConfig&&t.jimuConfig.isBuilder)return}catch(e){}t.postMessage(e,window.location.origin)}function fx(e,t){if(!window||!window.addEventListener)return;const r=function(e,t){return function(r){if(!function(e){var t;return(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.origin)===e||ux.some((t=>t.test(e)))}(r.origin))return;if(!r.data)return;if(!Object.keys(dx).map((e=>dx[e])).includes(r.data.type))return;const n=r.data;n.type===e&&t(n)}}(e,t);return window.addEventListener("message",r,!1),r}!function(e){e.JimuPageChanged="JIMU_PAGE_CHANGED",e.JimuQueryChanged="JIMU_QUERY_CHANGED",e.JimuHashChanged="JIMU_HASH_CHANGED"}(cx||(cx={})),function(e){e.ChangePage="CHANGE_PAGE",e.ChangeQuery="CHANGE_QUERY"}(dx||(dx={}));const hx=document&&function(e){void 0===e&&(e={});var t=e.window,r=void 0===t?document.defaultView:t,n=r.history;function o(){var e=r.location,t=e.pathname,o=e.search,i=e.hash,a=n.state||{};return[a.idx,{pathname:t,search:o,hash:i,state:a.usr||null,key:a.key||"default"}]}var i=null;r.addEventListener("popstate",(function(){if(i)d.call(i),i=null;else{var e=ZO.Pop,t=o(),r=t[0],n=t[1];if(d.length){if(null!=r){var a=l-r;a&&(i={action:e,location:n,retry:function(){v(-1*a)}},v(a))}}else m(e)}}));var a=ZO.Pop,s=o(),l=s[0],u=s[1],c=lx(),d=lx();function p(e){return"string"==typeof e?e:(r=(t=e).pathname,n=void 0===r?"/":r,o=t.search,i=void 0===o?"":o,a=t.hash,s=void 0===a?"":a,i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n);var t,r,n,o,i,a,s}function f(e,t){return void 0===t&&(t=null),Q({pathname:u.pathname,hash:"",search:""},"string"==typeof e?function(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}(e):e,{state:t,key:Math.random().toString(36).substr(2,8)})}function h(e,t){return[{usr:e.state,key:e.key,idx:t},p(e)]}function g(e,t,r){return!d.length||(d.call({action:e,location:t,retry:r}),!1)}function m(e){a=e;var t=o();l=t[0],u=t[1],c.call({action:a,location:u})}function v(e){n.go(e)}null==l&&(l=0,n.replaceState(Q({},n.state,{idx:l}),""));var y={get action(){return a},get location(){return u},createHref:p,push:function e(t,o){var i=ZO.Push,a=f(t,o);if(g(i,a,(function(){e(t,o)}))){var s=h(a,l+1),u=s[0],c=s[1];try{n.pushState(u,"",c)}catch(e){r.location.assign(c)}m(i)}},replace:function e(t,r){var o=ZO.Replace,i=f(t,r);if(g(o,i,(function(){e(t,r)}))){var a=h(i,l),s=a[0],u=a[1];n.replaceState(s,"",u),m(o)}},go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(e){return c.push(e)},block:function(e){var t=d.push(e);return 1===d.length&&r.addEventListener(ax,sx),function(){t(),d.length||r.removeEventListener(ax,sx)}}};return y}();fx(dx.ChangePage,(e=>{bx(e.pageId)})),fx(dx.ChangeQuery,(e=>{yx(e.queryObject)})),hx&&hx.listen((({action:e,location:t})=>{if(t.pathname!==jy().getState().appPath){jy().dispatch(Cb(t.pathname));r=Nv(t.pathname,jy().getState().appConfig).pageId,px({type:cx.JimuPageChanged,pageId:r})}var r;const n=jy().getState().queryObject.asMutable(),o=pt.parse(t.search);var i;Ad(n,o)||(jy().dispatch(Fb(o)),i=o,px({type:cx.JimuQueryChanged,queryObject:i}));const a=sv(t.hash);var s;Ad(a,jy().getState().urlHashObject.asMutable())||(jy().dispatch(Bb(a)),s=a,px({type:cx.JimuHashChanged,urlHashObject:s}))}));const gx=k.createContext(hx),mx=e=>k.createElement(gx.Provider,{value:hx},e.children);function vx(e){class t extends k.PureComponent{render(){return k.createElement(gx.Consumer,null,(t=>k.createElement(e,Object.assign({},this.props,{history:t}))))}}return t.displayName=`HistoryComponent(${e.displayName})`,t}function yx(e,t=!1,r=!1){if(Ad(e,jy().getState().queryObject))return;let n=r?Ae(e):jy().getState().queryObject.merge(e);n=n.without.apply(n,Object.keys(n).filter((e=>null===n[e])));const o=bv(hx.location,"?"+pt.stringify(n));try{t?hx.replace(o):hx.push(o)}catch(e){console.error("Failed to change browser history",e)}}function Sx(e,t){const{replaceHistory:r=!0,isReplaceHashObject:n=!1}=null!=t?t:{};if(Ad(e,jy().getState().urlHashObject))return;const o=hx.location.search;let i=jy().getState().urlHashObject;i=pv(i);const a=!n;let s=i.merge(e,{deep:a});for(const e of Object.keys(s)){const t=s[e];if(null===e||null===t)s=s.without(e);else for(const r of Object.keys(t)){const n=t[r];null!==r&&null!==n||(s=s.update(e,(e=>e.without(r))))}}const l=lv(s),u=Object.assign({},hx.location);u.hash=l;const c=bv(u,o);try{r?hx.replace(c):hx.push(c)}catch(e){console.error("Failed to change browser history",e)}}function bx(e){Nv(window.location.pathname,jy().getState().appConfig).pageId!==e&&hx.push(Hv(e,jy().getState().queryObject))}function wx(e,t){const r=jy().getState();let n=r.queryObject.views?r.queryObject.views.split(","):[];n=n.map((e=>jv(e,r.appConfig)));const o=n.length,i=Object.keys(r.appConfig.views);n=n.filter((e=>i.includes(e)));const a=n.length;if(n.includes(t)){if(o===a)return;yx({views:n.map((e=>r.appConfig.views[e].label)).join(",")})}else n=n.filter((t=>!r.appConfig.sections[e].views.includes(t))),n.push(t),yx({views:n.map((e=>Gv(r.appConfig.views[e].label))).join(",")})}function Ix(e,t){var r;const n=jy().getState();let o=(null===(r=n.queryObject.views)||void 0===r?void 0:r.split(",").map((e=>jv(e,n.appConfig))))||[];o.includes(t.currentViewId)||(o=o.filter((t=>!n.appConfig.sections[e].views.includes(t))),o.push(t.currentViewId)),yx({views:o.map((e=>Gv(n.appConfig.views[e].label))).join(",")})}function Ex(e){yx({dlg:e})}function Cx(e,t){var r;const n=function(e){var t;const r={};if(null==e?void 0:e.queryParams)e.queryParams.where&&(r[ou.Where]=e.queryParams.where),e.queryParams.geometry&&(r[ou.Geometry]=JSON.stringify(e.queryParams.geometry));else if((null==e?void 0:e.records)||(null==e?void 0:e.ids)){const n=(null===(t=null==e?void 0:e.records)||void 0===t?void 0:t.map((e=>e.getId())))||(null==e?void 0:e.ids);r[ou.Id]=n.sort(((e,t)=>e.localeCompare(t,"en",{numeric:!0,sensitivity:"base"}))).join("+")}return r}(t),o=function(e,t,r){const n="~",o=":",i=r.map((e=>`${e.type}${o}${e.dsIds.join(n)}${o}${e.value}`)),a=[];return r.forEach(((r,s)=>{const{type:l,dsIds:u,value:c}=r,d=t[l],p=d&&d===c;!d||d!==c||a.includes(l)?i[s]=((e,t,r,i)=>r.includes(e)?[t,r.filter((t=>t!==e)).join(n),i].join(o):[t,r.join(n),i].join(o))(e,l,u,c):p&&(i[s]=((e,t,r,i)=>r.includes(e)?[t,r.join(n),i].join(o):[t,r.concat(e).join(n),i].join(o))(e,l,u,c),a.push(l)),0===_v(i[s]).length&&(i[s]="")})),Object.keys(t).forEach((r=>{const n=t[r];n&&!a.includes(r)&&i.push([r,e,n].join(o))})),i.filter((e=>!!e))}(e,n,_v(null===(r=jy().getState().urlHashObject)||void 0===r?void 0:r.data_s));Sx(Ae.from({data_s:o.length>0?encodeURIComponent(o.join(",")):null})),jy().getState().queryObject.data_id&&o.length>0&&yx({data_id:null},!0)}function Ox(e,t){var r;const n=`${e}:${t}`,o=function(e,t,r){const n=[];let o=!1;return t.forEach((t=>{t.split(":")[0]===e?r&&(n.push(r),o=!0):n.push(t)})),!o&&r&&n.push(r),n}(e,(null===(r=jy().getState().queryObject.data_version)||void 0===r?void 0:r.split(","))||[],n);yx({data_version:o.length>0?o.join(","):null},!0)}var xx,Tx,Ax;!function(e){e.String="STRING",e.Number="NUMBER",e.Field="FIELD",e.Function="FUNCTION",e.Operator="OPERATOR",e.Unknown="UNKNOWN"}(xx||(xx={})),function(e){e.Average="AVERAGE",e.Count="COUNT",e.Sum="SUM",e.Max="MAX",e.Min="MIN"}(Tx||(Tx={})),function(e){e.Count="count",e.Sum="sum",e.Min="min",e.Max="max",e.Avg="avg"}(Ax||(Ax={}));const Px="esriFieldTypeOID",Dx="EXPRESSION_RESOLVER";var Rx;!function(e){e.ParamType="INVALID_PARAM_TYPE",e.ParamNumber="INVALID_NUMBER_OF_PARAMS",e.FuncType="INVALID_FUNCTION_TYPE",e.NeedRecord="NEED_RECORD",e.NeedDataSource="NEED_DATA_SOURCE"}(Rx||(Rx={}));var _x=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function kx(e,t,r,n,o){return e.type===xx.Field?Lx(e,t,r,n,o):e.type===xx.Number?n?Qh().formatNumber(parseFloat(e.exp),o):parseFloat(e.exp):e.type===xx.String?e.exp.replace(/^"/,"").replace(/"$/,""):void 0}function Lx(e,t,r,n,o){let i="";const a=function(e,t,r){var n,o,i;if(t)return null===(n=t[e.dataSourceId])||void 0===n?void 0:n[0];let a;const s=bO(null==e?void 0:e.dataSourceId);if(e.isFromRepeatedDataSourceContext)a=Array.isArray(r)?null===(o=r[0])||void 0===o?void 0:o.record:null===(i=r)||void 0===i?void 0:i.record;else if(s){const t=Sb.getInstance().getDataSource(e.dataSourceId);a=(null==t?void 0:t.useNoSelectionView())?t.getSourceRecords()[0]:null==t?void 0:t.getMainDataSource().getSelectedRecords()[0]}else{const t=Sb.getInstance().getDataSource(e.dataSourceId);a=null==t?void 0:t.getRecords()[0]}return a}(e,t,r);if(!a||!0===a.fake)throw new Error(Rx.NeedRecord);if(!function(e){return!(!e||!e.getData||"function"!=typeof e.getData)}(a))return i;const s=e.jimuFieldName;return i=n?o&&Fx(e)?Qh().formatNumber(a.getFieldValue(s),o):a.getFormattedFieldValue(s,Qh()):a.getFieldValue(s),null!=i?i:""}function Nx(e,t,r){let n=e.map((e=>e.getFieldValue(t.jimuFieldName)));return n=[Tx.Max,Tx.Min].some((e=>e===r))?n.filter((e=>"number"==typeof e)):n.map((e=>e||0)),0===n.length&&[Tx.Max,Tx.Min].some((e=>e===r))&&Bx(t)?Rx.NeedRecord:n}function Mx(e){return!isNaN(parseFloat(e))&&isFinite(e)&&"[object Number]"===Object.prototype.toString.call(e)}function jx(e){switch(e){case Tx.Average:return Ax.Avg;case Tx.Count:return Ax.Count;case Tx.Sum:return Ax.Sum;case Tx.Max:return Ax.Max;case Tx.Min:return Ax.Min;default:return null}}function Ux(e,t){var r;if(!e)return!1;const n=Sb.getInstance().getDataSource(e.dataSourceId),o=null==n?void 0:n.getSchema(),i=e.jimuFieldName,a=null===(r=null==o?void 0:o.fields)||void 0===r?void 0:r[i];return t===Tx.Count?!!a:t===Tx.Min||t===Tx.Max?(null==a?void 0:a.type)===Rl.Number||(null==a?void 0:a.type)===Rl.Date:(null==a?void 0:a.type)===Rl.Number}function Fx(e){var t;if(!e||e.type!==xx.Field)return!1;const r=Sb.getInstance().getDataSource(e.dataSourceId),n=null==r?void 0:r.getSchema(),o=e.jimuFieldName,i=null===(t=null==n?void 0:n.fields)||void 0===t?void 0:t[o],a=!(!r||!HC(r.getLayerDefinition(),e.jimuFieldName));return(null==i?void 0:i.type)===Rl.Number&&!a}function Bx(e){if(!e||e.type!==xx.Field)return!1;const t=$x(e);return(null==t?void 0:t.type)===Rl.Date}function $x(e){var t;if(!e||e.type!==xx.Field)return null;const r=Sb.getInstance().getDataSource(e.dataSourceId),n=null==r?void 0:r.getSchema(),o=e.jimuFieldName;return null===(t=null==n?void 0:n.fields)||void 0===t?void 0:t[o]}function Gx(e,t,r){if(!e||0===e.length||t!==Tx.Count&&e.some((e=>!Mx(e))))return 0;switch(t){case Tx.Average:return e.reduce(((e,t)=>e+t),0)/e.length;case Tx.Sum:return e.reduce(((e,t)=>e+t),0);case Tx.Count:return r?e[0]:Array.from(new Set(e)).length;case Tx.Max:return Math.max.apply(null,e);case Tx.Min:return Math.min.apply(null,e);default:return 0}}function Wx(e){let t=[];const r=[];return e&&e.forEach(((n,o)=>{if(n&&!r.some((e=>e===o)))if(n.type!==xx.Function)t=t.concat(n);else if(r.push(o),e[o+1]&&e[o+1].type===xx.Operator&&"("===e[o+1].exp){const i=e.slice(o+2);let a=0,s=0;for(let e=0;e<i.length;e++){if(0===s&&i[e].type===xx.Operator&&")"===i[e].exp){a=e;break}s>0&&i[e].type===xx.Operator&&")"===i[e].exp?s--:i[e].type===xx.Operator&&"("===i[e].exp&&s++}const l=a+o+2;if(l>=o+2){const i=e.slice(o+2,l);for(let e=o+1;e<=l;e++)r.push(e);t=t.concat(Object.assign(Object.assign({},n),{parts:Wx(i)}))}else console.warn("Can not martch parentheses")}else t=t.concat(n)})),t}function Vx(e){return Mx(e)?{exp:`${e}`,type:xx.Number}:{exp:`"${e.replace(/^"/,"").replace(/"$/,"")}"`,type:xx.String}}function Hx(e){var t;return e.type===xx.String||e.type===xx.Field&&Sb.getInstance().getDataSource(e.dataSourceId)&&!Fx(e)||e.type===xx.Function&&e.exp!==Tx.Count&&Bx(null===(t=e.parts)||void 0===t?void 0:t[0])}var zx=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function qx(e,t,r){return zx(this,void 0,void 0,(function*(){const n=e&&e.parts&&e.parts.slice();if(!n)return yield Promise.resolve("");const o=function(e){const t=[],r=[];for(e.forEach(((e,n)=>{if(e.type===xx.Number||e.type===xx.String||e.type===xx.Field||e.type===xx.Function)t.push(e);else if(e.type===xx.Operator)if("("===e.exp)r.push(e);else if(")"===e.exp){let e=r.pop();for(;"("!==e.exp;)t.push(e),e=r.pop()}else if("+"===e.exp||"-"===e.exp){for(;r.length>0&&("+"===r[r.length-1].exp||"-"===r[r.length-1].exp||"*"===r[r.length-1].exp||"/"===r[r.length-1].exp);)t.push(r.pop());r.push(e)}else if("*"===e.exp||"/"===e.exp){for(;r.length>0&&("*"===r[r.length-1].exp||"/"===r[r.length-1].exp);)t.push(r.pop());r.push(e)}}));r.length>0;)t.push(r.pop());return t}(Wx(n));return Promise.all(o.map((e=>e.type===xx.Function?function(e,t,r){if(Object.values(Tx).some((t=>t===e.exp))){const n=e.exp;return function(e,t,r,n){var o,i;return _x(this,void 0,void 0,(function*(){if(1===(null==e?void 0:e.length)){let a;if((null===(o=e[0])||void 0===o?void 0:o.type)!==xx.Field)return Promise.reject(Rx.ParamType);if(a=r?yield function(e,t,r){if(!Ux(e,t))return Promise.reject(Rx.ParamType);const n=r[e.dataSourceId];if(!n||0===n.length)return Promise.reject(Rx.NeedRecord);const o=Nx(n,e,t);return Array.isArray(o)?Promise.resolve(Gx(o,t,!1)):Promise.reject(o)}(e[0],t,r):function(e){return bO(null==e?void 0:e.dataSourceId)}(e[0])?yield function(e,t){const r=Sb.getInstance().getDataSource(e.dataSourceId);if(!r)return Promise.reject(Rx.NeedDataSource);if(!Ux(e,t))return Promise.reject(Rx.ParamType);const n=r.useNoSelectionView()?r.getSourceRecords():r.getMainDataSource().getSelectedRecords();if(!n||0===n.length)return Promise.reject(Rx.NeedRecord);const o=Nx(n,e,t);return Array.isArray(o)?Promise.resolve(Gx(o,t,!1)):Promise.reject(o)}(e[0],t):function(e){return!!(null==e?void 0:e.isFromRepeatedDataSourceContext)}(e[0])?yield function(e,t,r){if(!Ux(e,t))return Promise.reject(Rx.ParamType);if(t===Tx.Count)return Promise.resolve(1);{const t=Lx(e,null,r,!1,null);return Promise.resolve(t)}}(e[0],t,n):yield function(e,t){return _x(this,void 0,void 0,(function*(){if(!Ux(e,t))return Promise.reject(Rx.ParamType);const r=yield function(e,t){if(!e||!t)return Promise.resolve(null);const r=Sb.getInstance().getDataSource(e.dataSourceId),n=function(e,t){return`${Dx}-${t}-${e.jimuFieldName}`}(e,t),o=Sb.getInstance().createLocalDataSource(r,n);if(r&&r.load){const i=function(e,t){if(!e)return null;const r=Sb.getInstance().getDataSource(e.dataSourceId),n=r&&r.getSchema(),o=n&&n.fields&&n.fields[e.jimuFieldName];if(t===Tx.Count&&(null==o?void 0:o.name)!==r.getIdField())return{returnGeometry:!1,returnDistinctValues:!0,returnCountOnly:!0,outFields:[`${null==o?void 0:o.name}`],where:"1=1",orderByFields:void 0,returnIdsOnly:!1};{const e=function(e,t){return`${t||"objectId"}_${e}`}(t,o&&o.jimuName);return{returnGeometry:!1,where:"1=1",outStatistics:[{onStatisticField:o&&o.name,outStatisticFieldName:e,statisticType:jx(t)}]}}}(e,t);return(i.returnCountOnly?o.loadCount(i,{widgetId:n}):o.load(i,{widgetId:n})).then((n=>{var i,a,s,l,u;let c;if("number"==typeof n)c=[n];else{const e=n,t=e&&e[0]&&e[0].getData()||{};c=Object.keys(t).filter((e=>e!==o.getIdField())).map(((e,r)=>t[e]))}if(t===Tx.Count){const e=r.isDataView?(null===(a=null===(i=r.getMainDataSource())||void 0===i?void 0:i.getDataSourceJson())||void 0===a?void 0:a.dataViews)&&(null===(s=r.getMainDataSource().getDataSourceJson().dataViews[r.dataViewId])||void 0===s?void 0:s.maximum):null===(u=null===(l=r.getDataSourceJson())||void 0===l?void 0:l.query)||void 0===u?void 0:u.maximum;"number"==typeof e&&(c[0]=Math.min(c[0],e))}return[Tx.Max,Tx.Min].some((e=>e===t))&&Bx(e)&&c.some((e=>!Mx(e)))?Promise.reject(Rx.NeedDataSource):Gx(c,t,!0)}))}return Promise.reject(Rx.NeedDataSource)}(e,t);return Promise.resolve(r)}))}(e[0],t),"number"==typeof a&&t!==Tx.Count&&Bx(e[0])){const t=$x(e[0]);a=(null===(i=null==t?void 0:t.format)||void 0===i?void 0:i.dateFormat)?UO(a,t.format.dateFormat,Qh()):Qh().formatDate(a)}return a}return Promise.reject(Rx.ParamNumber)}))}(n===Tx.Count?function(e,t,r){let n=null;const o=Sb.getInstance().getDataSource(t);if(e&&0!==e.length)n=e;else if(o){const e=o&&o.getSchema(),r=e&&e.fields&&Object.keys(e.fields).find((t=>e.fields[t].esriType===Px)),i=e&&e.fields&&e.fields[r];if(i)n=[{type:xx.Field,jimuFieldName:i.jimuName,dataSourceId:t,exp:`{${i.alias||i.name}}`}];else if(e&&e.fields&&Object.keys(e.fields).length>0){const r=Object.keys(e.fields)[0],o=e.fields[r];o&&(n=[{type:xx.Field,jimuFieldName:o.jimuName,dataSourceId:t,exp:`{${o.alias||o.name}}`}])}}return n}(e.parts,e.dataSourceId):e.parts,n,t,r)}return Promise.reject(Rx.FuncType)}(e,t,r).then((e=>Vx(e))):Promise.resolve(e)))).then((n=>{const o=function(e,t,r,n){const o=[];return e.forEach((e=>{if(e.type===xx.Number||e.type===xx.String||e.type===xx.Field)o.push(e);else if(e.type===xx.Operator){const i=o.pop(),a=o.pop(),s=e.exp;let l=!1;(Hx(a)||Hx(i))&&(l=!0);const u=function(e,t,r){switch(r){case"*":return Mx(e)&&Mx(t)?parseFloat(e)*parseFloat(t):"";case"/":return Mx(e)&&Mx(t)?parseFloat(e)/parseFloat(t):"";case"-":return Mx(e)&&Mx(t)?parseFloat(e)-parseFloat(t):"";default:return Mx(e)&&Mx(t)?parseFloat(e)+parseFloat(t):`${e}${t}`}}(kx(a,t,r,l,n),kx(i,t,r,l,n),s);o.push(Vx(u))}})),kx(o.pop(),t,r,!0,n)}(n,t,r,e.numberFormat);return`${null!=o?o:""}`}))}))}function Yx(e,t){if(!t||0===t.length)return t;if(!e||0===e.length)return tT(t);const r=tT(t).asMutable({deep:!0});return e.filter((e=>!!e)).forEach((e=>{var n;if(e.dataSourceId&&e.jimuFieldName){let o;o=bO(e.dataSourceId)?e.dataSourceId&&t.asMutable({deep:!0}).findIndex((t=>t.mainDataSourceId===e.dataSourceId.replace(new RegExp(`-${Nd}$`),""))):e.dataSourceId&&t.asMutable({deep:!0}).findIndex((t=>t.dataSourceId===e.dataSourceId)),r[o]&&!(null===(n=r[o].fields)||void 0===n?void 0:n.some((t=>t===e.jimuFieldName)))&&(r[o]=Object.assign(Object.assign({},r[o]),{fields:(r[o].fields||[]).concat(e.jimuFieldName)}))}})),Ae(r)}function Jx(e=Ae([]),t=Ae([])){let r=Ae([]),n=Ae({});const o=Ae(e.concat(t)),i={};return o.forEach((e=>{i[e.dataSourceId]||(i[e.dataSourceId]=o.filter((t=>e.dataSourceId===t.dataSourceId)))})),Object.keys(i).forEach((e=>{n=Ae({}),i[e].forEach((e=>{n=function(e,t){if(!e||!t)return e||t;if(e.dataSourceId&&t.dataSourceId&&e.dataSourceId!==t.dataSourceId)return console.warn("can not merge data sources with different id"),null;if(!e.dataSourceId&&!t.dataSourceId)return e;if(e.fields&&t.fields){const r=Array.from(new Set(e.fields.asMutable().concat(t.fields.asMutable())));return e.merge(t.asMutable({deep:!0})).set("fields",r)}return e.merge(t.asMutable({deep:!0}))}(n,e)})),r=Ae(r.concat(n))})),r}function Kx(e){if(!e||!e.parts)return!0;const t=e.parts.filter((e=>!!e)),r=t.some((e=>e.type===xx.Unknown));if(r)return!1;const n=t.filter((e=>e.type===xx.Operator&&"("===e.exp)).length===t.filter((e=>e.type===xx.Operator&&")"===e.exp)).length;if(!n)return!1;const o=t.filter((e=>!(e.type===xx.Operator&&("("===e.exp||")"===e.exp||/^\s*$/.test(e.exp))||e.type===xx.Function)));let i=!0;for(let e=0;e<o.length;e++)if((e%2==0||e===o.length-1)&&o[e].type===xx.Operator||e%2==1&&o[e].type!==xx.Operator){i=!1;break}if(!i)return!1;let a=!0;for(let e=0;e<t.length;e++)if(t[e].type===xx.Function&&!Xx(t[e])||t[e].type===xx.Field&&!Qx(t[e].dataSourceId,t[e].jimuFieldName,t[e].exp.replace(/^\{/,"").replace(/\}$/,""))){a=!1;break}if(!a)return!1;const s=Wx(t),l=!s.some((e=>e.type===xx.Operator&&","===e.exp));if(!l)return!1;const u=s.every((e=>{if(e.type===xx.Function){if(e.exp===Tx.Count){if(e.parts&&1===e.parts.length&&e.parts[0].type===xx.Field){const t=Sb.getInstance().getDataSource(e.parts[0].dataSourceId),r=t&&t.getSchema(),n=e.parts[0].jimuFieldName;return!!(r&&r.fields&&r.fields[n])}return!(e.parts&&0!==e.parts.length||!e.dataSourceId)}if(Object.keys(Tx).some((t=>e.exp===Tx[t]))){if(e.parts&&1===e.parts.length&&e.parts[0].type===xx.Field){const t=e.exp===Tx.Min||e.exp===Tx.Max,r=Sb.getInstance().getDataSource(e.parts[0].dataSourceId),n=r&&r.getSchema(),o=e.parts[0].jimuFieldName,i=n&&n.fields&&n.fields[o],a=i&&i.type===Rl.Number,s=i&&i.type===Rl.Date;return a||t&&s}return!1}return!1}return!0}));return!r&&n&&i&&a&&l&&u}function Xx(e){return!(!e||e.type!==xx.Function)&&Object.keys(Tx).some((t=>Tx[t]===e.exp))}function Qx(e,t,r){if(!e||!t)return!1;const n=Sb.getInstance().getDataSource(e),o=n&&n.getSchema&&n.getSchema(),i=o&&o.fields;return!!i&&!(!i[t]||r!==(i[t].alias||i[t].name))}const Zx=e=>{var t,r,n;if(e)return 1===(null===(t=e.parts)||void 0===t?void 0:t.length)&&(null===(n=null===(r=e.parts)||void 0===r?void 0:r[0])||void 0===n?void 0:n.type)===xx.String},eT=e=>{var t,r,n;return Zx(e)?null===(n=null===(r=null===(t=e.parts)||void 0===t?void 0:t[0])||void 0===r?void 0:r.exp)||void 0===n?void 0:n.replace(/(^\"|\"$)/g,""):""},tT=e=>null==e?void 0:e.map((e=>null==e?void 0:e.set("fields",[]).asMutable({deep:!0}))),rT=e=>null==e?void 0:e.some((e=>{var t;return!!(null===(t=e.fields)||void 0===t?void 0:t.length)}));function nT(e){return(null==e?void 0:e.parts)?Array.from(new Set(e.parts.map((e=>null==e?void 0:e.dataSourceId)).filter((e=>!!e)))):[]}class oT{constructor(e,t,r){this.db=null,this.closed=!1,this.dbName=sT(e,t),this.storeName=r}init(){return indexedDB?Promise.resolve().then((()=>{const e=indexedDB.open(this.dbName);return e.onupgradeneeded=()=>{const t=e.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName)},iT(e)})).then((e=>{this.closed?e.close():this.db=e})):Promise.reject()}initialized(){return null!=this.db}close(){this.db&&(this.db.close(),this.db=null),this.closed=!0}put(e,t){return null==this.db?Promise.reject("indexedb:not-initialized"):iT(this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t,e)).then()}putAll(e){if(null==this.db)return Promise.reject("indexedb:not-initialized");const t=this.db.transaction([this.storeName],"readwrite");return e.forEach((e=>{t.objectStore(this.storeName).put(e.value,e.key)})),aT(t)}get(e){return null==this.db?Promise.reject("indexedb:not-initialized"):iT(this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e))}getAllKeys(){return null==this.db?Promise.reject("indexedb:not-initialized"):iT(this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAllKeys())}getAll(){return null==this.db?Promise.reject("indexedb:not-initialized"):iT(this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll())}delete(e){return null==this.db?Promise.reject("indexedb:not-initialized"):iT(this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e))}deleteAll(e){if(null==this.db)return Promise.reject("indexedb:not-initialized");const t=this.db.transaction([this.storeName],"readwrite");return e.forEach((e=>{t.objectStore(this.storeName).delete(e)})),aT(t)}clear(){return null==this.db?Promise.reject("indexedb:not-initialized"):iT(this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear())}destroy(){this.db&&this.db.deleteObjectStore(this.storeName),this.close()}}function iT(e){return new Promise(((t,r)=>{"done"===e.readyState?null!=e.error?r(e.error):t(e.result):(e.onsuccess=()=>{t(e.result)},e.onerror=()=>{r(e.error)})}))}function aT(e){return new Promise(((t,r)=>{e.oncomplete=()=>{t()},e.onerror=()=>{r(e.error)},e.onabort=()=>{r(e.error)}}))}function sT(e,t){var r,n;return`exb-${(null===(r=window.jimuConfig)||void 0===r?void 0:r.isBuilder)?null===(n=jy().getState().appStateInBuilder)||void 0===n?void 0:n.appId:jy().getState().appId}-${t}-${e}-cache`}function lT(){var e=k.useContext(Mh);return Dh(e),e}var uT,cT;!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(uT||(uT={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(cT||(cT={}));var dT=function(e){var t=lT(),r=e.value,n=e.children,o=Ep(e,["value","children"]);return n(t.formatNumberToParts(r,o))};function pT(e){var t=function(t){var r=lT(),n=t.value,o=t.children,i=Ep(t,["value","children"]),a="string"==typeof n?new Date(n||0):n;return o("formatDate"===e?r.formatDateToParts(a,i):r.formatTimeToParts(a,i))};return t.displayName=cT[e],t}function fT(e){var t=function(t){var r=lT(),n=t.value,o=t.children,i=Ep(t,["value","children"]),a=r[e](n,i);if("function"==typeof o)return o(a);var s=r.textComponent||k.Fragment;return k.createElement(s,null,a)};return t.displayName=uT[e],t}dT.displayName="FormattedNumberParts",dT.displayName="FormattedNumberParts";var hT=fT("formatDate"),gT=fT("formatTime"),mT=fT("formatNumber");function vT(e){var t=lT(),r=t.formatMessage,n=t.textComponent,o=void 0===n?k.Fragment:n,i=e.id,a=e.description,s=e.defaultMessage,l=e.values,u=e.children,c=e.tagName,d=void 0===c?o:c,p=r({id:i,description:a,defaultMessage:s},l,{ignoreTag:e.ignoreTag});return"function"==typeof u?u(Array.isArray(p)?p:[p]):d?k.createElement(d,null,k.Children.toArray(p)):k.createElement(k.Fragment,null,p)}fT("formatList"),fT("formatDisplayName"),pT("formatDate"),pT("formatTime"),vT.displayName="FormattedMessage";var yT=k.memo(vT,(function(e,t){var r=e.values,n=Ep(e,["values"]),o=t.values,i=Ep(t,["values"]);return _h(o,r)&&_h(n,i)}));yT.displayName="MemoizedFormattedMessage";const ST=yT;var bT=function(e){var t=lT(),r=t.formatPlural,n=t.textComponent,o=e.value,i=e.other,a=e.children,s=e[r(o,e)]||i;return"function"==typeof a?a(s):n?k.createElement(n,null,s):s};bT.defaultProps={type:"cardinal"},bT.displayName="FormattedPlural";const wT=bT;var IT=3600;function ET(e){var t=Math.abs(e);return t<60?"second":t<IT?"minute":t<86400?"hour":"day"}function CT(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return IT;default:return 86400}}var OT=["second","minute","hour"];function xT(e){return void 0===e&&(e="second"),OT.indexOf(e)>-1}var TT=function(e){var t=lT(),r=t.formatRelativeTime,n=t.textComponent,o=e.children,i=r(e.value||0,e.unit,Ep(e,["children","value","unit"]));return"function"==typeof o?o(i):n?k.createElement(n,null,i):k.createElement(k.Fragment,null,i)},AT=function(e){var t=e.value,r=e.unit,n=e.updateIntervalInSeconds,o=Ep(e,["value","unit","updateIntervalInSeconds"]);nh(!n||!(!n||!xT(r)),"Cannot schedule update with unit longer than hour");var i,a=k.useState(),s=a[0],l=a[1],u=k.useState(0),c=u[0],d=u[1],p=k.useState(0),f=p[0],h=p[1];r===s&&t===c||(d(t||0),l(r),h(xT(r)?function(e,t){if(!e)return 0;switch(t){case"second":return e;case"minute":return 60*e;default:return e*IT}}(t,r):0)),k.useEffect((function(){function e(){clearTimeout(i)}if(e(),!n||!xT(r))return e;var t=f-n,o=ET(t);if("day"===o)return e;var a=CT(o),s=t-t%a,l=s>=f?s-a:s,u=Math.abs(l-f);return f!==l&&(i=setTimeout((function(){return h(l)}),1e3*u)),e}),[f,n,r]);var g=t||0,m=r;if(xT(r)&&"number"==typeof f&&n){var v=CT(m=ET(f));g=Math.round(f/v)}return k.createElement(TT,Ip({value:g,unit:m},o))};AT.displayName="FormattedRelativeTime",AT.defaultProps={value:0,unit:"second"};const PT=AT,DT=k.createContext(null);function RT({data:e,children:t}){return k.createElement(DT.Consumer,null,(r=>{let n=e;return r&&(n=Array.isArray(r)?r.concat(e):[r].concat(e)),k.createElement(DT.Provider,{value:n},t)}))}function _T(e){function t(t){return k.createElement(DT.Consumer,null,(r=>k.createElement(e,Object.assign({},t,{repeatedDataSource:r}))))}return t.displayName="RepeatedDataSourceContextConsumerWrapper",t}var kT,LT;DT.Consumer,function(e){e.Unkown="UNKNOWN",e.Widget="WIDGET",e.Section="SECTION",e.ScreenGroup="SCREEN_GROUP"}(kT||(kT={})),function(e){e.FixedLayout="FIXED",e.FlowLayout="FLOW",e.GridLayout="GRID",e.ColumnLayout="COLUMN",e.RowLayout="ROW"}(LT||(LT={}));var NT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class MT{upgrade(e,t,r,n){return NT(this,void 0,void 0,(function*(){const o=this.checkVersions(t,r);if(!o)return e;const[i,a]=o;if(i===a)return this.versions[a].upgrader(e,n);const s=e,l=this.versions.slice(i+1,a+1).filter((e=>null==e?void 0:e.upgrader));return l.reduce(((e,t)=>NT(this,void 0,void 0,(function*(){const r=yield e;return t.upgrader(r,n)}))),Promise.resolve(s))}))}checkVersions(e,t){if(!$e.valid(e)||!$e.valid(t))return!1;if(!this.checkVersion())return!1;const r=this.getVersionIndex(e),n=this.getVersionIndex(t);return r>n?(console.error("New version should higher than old version."),!1):r===n?!!this.versions[n]&&[r,n]:[r,n]}getVersionIndex(e){const t=this.versions.findIndex((t=>$e.eq(e,t.version)));if(t>-1)return t;for(let t=0;t<this.versions.length-1;t++)if($e.gt(e,this.versions[t].version)&&$e.lt(e,this.versions[t+1].version))return t;return $e.lt(e,this.versions[0].version)?-1:$e.gt(e,this.versions[this.versions.length-1].version)?this.versions.length:void 0}checkVersion(){for(let e=0;e<this.versions.length-1;e++){if(!$e.valid(this.versions[e].version))return console.error("Invalid version.",this.versions[e].version),!1;if($e.gt(this.versions[e].version,this.versions[e+1].version))return console.error("Version order error.",this.versions[e].version,this.versions[e+1]),!1}return!0}}class jT extends MT{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"First release.",upgrader:e=>{let t=e;return delete t.widgetsManifest,t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{var r;const n=e.widgets[t];"widgets/common/controller/"===n.uri&&(null===(r=n.layouts)||void 0===r?void 0:r.openwidget)&&(n.layouts._openwidget=n.layouts.openwidget,delete n.layouts.openwidget)})),e))(t),t=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var r,n;Object.keys(null!==(n=null===(r=e.layouts[t])||void 0===r?void 0:r.content)&&void 0!==n?n:{}).forEach((r=>{var n,o,i,a;const s=e.layouts[t].content[r];if(null===(n=null==s?void 0:s.setting)||void 0===n?void 0:n.fitContainer){s.setting.heightMode="fit";const e=null!==(o=s.setting.autoProps)&&void 0!==o?o:{};e.height="STRETCH",s.setting.autoProps=e,delete s.setting.fitContainer}if(null===(i=null==s?void 0:s.setting)||void 0===i?void 0:i.autoHeight){const e=null!==(a=s.setting.autoProps)&&void 0!==a?a:{},t=s.bbox;null!=t.top&&null!=t.bottom?e.height="STRETCH":e.height="AUTO",s.setting.autoProps=e,delete s.setting.autoHeight}}))})),e})(t),t}},{version:"1.1.0",description:"1.1.0",upgrader:e=>NT(this,void 0,void 0,(function*(){return Promise.all([ry("jimu-layouts/layout-runtime",["searchUtils"]),ry("jimu-ui",["richTextUtils"])]).then((t=>{const[r,n]=t;let o=e;return o=(e=>{var t;return Object.keys(null!==(t=e.dataSources)&&void 0!==t?t:{}).forEach((t=>{var r;const n=e.dataSources[t];"FEATURE_QUERY"===n.type?n.type=zl.FeatureLayer:n.isOutputFromWidget&&(null===(r=null==n?void 0:n.originDataSources)||void 0===r||r.forEach((e=>{e.mainDataSourceId=e.dataSourceId})))})),e})(o),o=((e,t,r)=>{var n;const o=Qh().formatMessage({id:"upgradedFrom"}),i="_from_10_";return Object.keys(null!==(n=e.widgets)&&void 0!==n?n:{}).forEach((r=>{var n;const a=e.widgets[r];(null!==(n=a.useDataSources)&&void 0!==n?n:[]).forEach(((n,s)=>{var l,u,c,d,p,f;if(n.query||"widgets/arcgis/feature-info/"===a.uri&&(null===(l=a.config)||void 0===l?void 0:l.limitGraphics)||"widgets/common/list/"===a.uri){const l=`${i}${r}_${s}`,h=e.dataSources||{},g={id:l,label:o,where:null===(u=n.query)||void 0===u?void 0:u.where,orderBy:null===(d=null===(c=n.query)||void 0===c?void 0:c.orderBy)||void 0===d?void 0:d.filter((e=>!!(null==e?void 0:e.jimuFieldName))),maximum:"widgets/arcgis/feature-info/"===a.uri?null===(p=a.config)||void 0===p?void 0:p.maxGraphics:"widgets/common/list/"===a.uri&&(null===(f=a.config)||void 0===f?void 0:f.maxItems)},m=n.dataSourceId,v=n.rootDataSourceId,y=`${m}-${l}`;if(n.dataSourceId=y,n.mainDataSourceId=m,n.dataViewId=l,t.getChildrenContents(e,r,kT.Widget,!0).forEach((t=>{var r;const n=e.widgets[t];if((null!==(r=n.useDataSources)&&void 0!==r?r:[]).forEach(((e,t)=>{e.dataSourceId===m&&(e.dataSourceId=y,e.mainDataSourceId=m,e.dataViewId=l)})),"widgets/common/image/"===n.uri||"widgets/common/button/"===n.uri){let e=[];e="widgets/common/image/"===n.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],e.forEach((e=>{var t,r,o;const i=e.split("."),a=1===i.length?(null===(t=null==n?void 0:n.config)||void 0===t?void 0:t.functionConfig)&&n.config.functionConfig[i[0]]:(null===(r=null==n?void 0:n.config)||void 0===r?void 0:r.functionConfig)&&n.config.functionConfig[i[0]]&&n.config.functionConfig[i[0]][i[1]];null===(o=null==a?void 0:a.parts)||void 0===o||o.forEach((e=>{e.dataSourceId===m&&(e.dataSourceId=y)}))}))}else"widgets/common/text/"===n.uri&&(n.config.text=n.config.text.replace(new RegExp(m,"g"),y))})),h[m])h[m].dataViews?h[m].dataViews[l]=g:h[m].dataViews={[l]:g};else if(h[v]){const e=m.substr(v.length+1);h[v].childDataSourceJsons?h[v].childDataSourceJsons[e]?h[v].childDataSourceJsons[e].dataViews?h[v].childDataSourceJsons[e].dataViews[l]=g:h[v].childDataSourceJsons[e].dataViews={[l]:g}:h[v].childDataSourceJsons[e]={id:m,dataViews:{[l]:g}}:h[v].childDataSourceJsons={[e]:{id:m,dataViews:{[l]:g}}}}else console.error("bad config ds.",n);Object.keys(h).forEach((e=>{h[e].originDataSources&&h[e].originDataSources.forEach((e=>{e.dataSourceId===m&&(e.dataSourceId=y,e.mainDataSourceId=m,e.dataViewId=l)}))})),delete n.query}else n.mainDataSourceId||(n.mainDataSourceId=n.dataSourceId)}))})),(e=>{var t;return Object.keys(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var r;const n=null===(r=e.messageConfigs[t])||void 0===r?void 0:r.actions,o=e.widgets||{};n&&n.forEach((e=>{var t,r,n,i,a,s;if("widgets/common/list/"===(null===(t=o[null==e?void 0:e.widgetId])||void 0===t?void 0:t.uri)){if(e.config=e.config||{},e.config.actionUseDataSource&&e.config.actionUseDataSource.dataSourceId){const t=null===(r=e.config.actionUseDataSource)||void 0===r?void 0:r.fields;e.config.actionUseDataSource=null===(n=o[e.widgetId])||void 0===n?void 0:n.useDataSources[0],e.config.actionUseDataSource.fields=t}if(e.config.messageUseDataSource&&e.config.messageUseDataSource.dataSourceId)if("widgets/common/list/"===(null===(i=o[null==e?void 0:e.messageWidgetId])||void 0===i?void 0:i.uri)){const t=null===(a=e.config.messageUseDataSource)||void 0===a?void 0:a.fields;e.config.messageUseDataSource=null===(s=o[e.messageWidgetId])||void 0===s?void 0:s.useDataSources[0],e.config.messageUseDataSource.fields=t}else e.config.messageUseDataSource.mainDataSourceId=e.config.messageUseDataSource.dataSourceId;e.actionId=e.actionId.replace(`${e.widgetId}-filter`,"filter-data-record-action"),e.actionName=e.actionName.replace("filter","filter data record action"),e.version="1.1.0",delete e.widgetId}}))})),e})(((e,t,r,n)=>{var o;return Object.keys(null!==(o=e.widgets)&&void 0!==o?o:{}).forEach((o=>{const i=(e,t,r)=>{const o=(null==t?void 0:t.parts)&&(null==t?void 0:t.parts[e]);if(!o)return null;if(o.type===xx.Field){const i=e>0?t.parts[e-1]:null,a=e>1?t.parts[e-2]:null,s=t.parts[e+1];if((null==a?void 0:a.type)===xx.Function&&"("===(null==i?void 0:i.exp)&&")"===(null==s?void 0:s.exp))return o;if(r&&o.dataSourceId===r)o.isFromRepeatedDataSourceContext=!0;else if(o.dataSourceId&&!o.isFromRepeatedDataSourceContext){const e=0===o.dataSourceId.split("-").reverse()[0].indexOf(n)?o.dataSourceId.split("-").reverse().slice(1).reverse().join("-"):o.dataSourceId;o.dataSourceId=`${e}-${Nd}`}}return o},a=(e,t)=>{var n,o,a,s;if("widgets/common/image/"===e.uri||"widgets/common/button/"===e.uri){let r=[];r="widgets/common/image/"===e.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],r.forEach((r=>{var n,o,a;const s=r.split("."),l=1===s.length?(null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.functionConfig)&&e.config.functionConfig[s[0]]:(null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.functionConfig)&&e.config.functionConfig[s[0]]&&e.config.functionConfig[s[0]][s[1]];null===(a=null==l?void 0:l.parts)||void 0===a||a.forEach(((e,r)=>{i(r,l,t)}))}))}else"widgets/common/embed/"===e.uri?null===(a=null===(o=null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.expression)||void 0===o?void 0:o.parts)||void 0===a||a.forEach(((r,n)=>{i(n,e.config.expression,t)})):"widgets/common/text/"===e.uri&&(null===(s=e.config)||void 0===s?void 0:s.text)&&(e.config.text=r.editExpressionPart(e.config.text,((e,r)=>i(e,r,t))));return e};let s=e.widgets[o];"widgets/common/list/"===s.uri?t.getChildrenContents(e,o,kT.Widget,!0).forEach((t=>{const r=(null==s?void 0:s.useDataSources)&&s.useDataSources[0]&&s.useDataSources[0].dataSourceId;e.widgets[t]=a(e.widgets[t],r)})):s=a(s)})),e})(e,t,r,i))})(o,r.searchUtils,n.richTextUtils),o=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var r;const n=e.layouts[t],o=null==n?void 0:n.type;Object.keys(null!==(r=null==n?void 0:n.content)&&void 0!==r?r:{}).forEach((e=>{var t,r,i,a,s,l;const u=n.content[e],c=null!==(r=null===(t=u.setting)||void 0===t?void 0:t.autoProps)&&void 0!==r?r:{};!0===c.width?(o===LT.FixedLayout?c.left||c.right?c.width="AUTO":c.width="STRETCH":c.width="AUTO",u.setting.autoProps=c):!1===c.width&&(c.width="CUSTOM",u.setting.autoProps=c),!0===(null===(i=u.setting)||void 0===i?void 0:i.fitContainer)?c.height="STRETCH":!1===(null===(a=u.setting)||void 0===a?void 0:a.fitContainer)&&(null===(s=u.bbox)||void 0===s?void 0:s.height)?c.height="CUSTOM":!0===c.height?(o===LT.FixedLayout?c.top||c.bottom?c.height="AUTO":c.height="STRETCH":c.height="AUTO",u.setting.autoProps=c):!1===c.height&&(c.height="CUSTOM",u.setting.autoProps=c),(null===(l=u.setting)||void 0===l?void 0:l.heightMode)&&null==c.height&&("auto"===u.setting.heightMode?(c.height="AUTO",u.setting.autoProps=c):"fit"===u.setting.heightMode?(c.height="STRETCH",u.setting.autoProps=c):"fixed"===u.setting.heightMode&&(c.height="CUSTOM",u.setting.autoProps=c))}))})),e})(o),o}))}))},{version:"1.2.0",description:"1.2.0",upgrader:e=>{let t=e;return t=(e=>(Object.keys(e.pages).forEach((t=>{e.pages[t].icon&&(e.pages[t].icon.properties.color=null)})),e))(t),t=(e=>{if(!e.dialogs)return e;let t=0,r=0;Object.keys(e.dialogs).forEach((n=>{const o=e.dialogs[n];o.mode===rm.Fixed?o.index=t++:o.index=r++,o.dialogBackground?""===o.dialogBackground.color&&(o.dialogBackground.color="rgba(0,0,0,0)"):o.dialogBackground={color:"rgba(0,0,0,0)",fillType:"fit",image:{url:""}},o.mode===rm.Fixed&&o.confirmBeforeClose?(o.interactionType=om.ButtonInline,o.interactionStyles=o.confirmationStyle,o.alwaysShowConfirmation=!1):(o.interactionType=null,o.interactionStyles=null),delete o.confirmationStyle}));const n={};return Object.keys(e.dialogs).sort().forEach((t=>{n[t]=e.dialogs[t]})),e.dialogs=n,e})(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];(null==r?void 0:r.type)===LT.FixedLayout&&Object.keys(r.content||{}).forEach((e=>{var t,n;const o=r.content[e];!0===(null===(t=o.setting)||void 0===t?void 0:t.hCenter)&&(o.bbox||(o.bbox={}),o.bbox.left="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.left=!1,o.setting.autoProps.right=!0):o.setting.autoProps={left:!1,right:!0}:o.setting={autoProps:{left:!1,right:!0}}),!0===(null===(n=o.setting)||void 0===n?void 0:n.vCenter)&&(o.bbox||(o.bbox={}),o.bbox.top="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.top=!1,o.setting.autoProps.bottom=!0):o.setting.autoProps={top:!1,bottom:!0}:o.setting={autoProps:{top:!1,bottom:!0}})}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];(null==r?void 0:r.type)===LT.FlowLayout&&Object.keys(r.content||{}).forEach((e=>{var t,n,o;const i=r.content[e];!0===(null===(t=i.setting)||void 0===t?void 0:t.isFloating)&&(+(null===(n=i.bbox)||void 0===n?void 0:n.width)>0&&(i.bbox.width=`${i.bbox.width}px`),+(null===(o=i.bbox)||void 0===o?void 0:o.height)>0&&(i.bbox.height=`${i.bbox.height}px`))}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];Object.keys(r.content||{}).forEach((t=>{var n,o,i,a,s;const l=r.content[t];if(l.type===kT.Widget){const t=e.widgets[l.widgetId];0===(null===(n=null==t?void 0:t.uri)||void 0===n?void 0:n.indexOf("widgets/common/card"))&&("AUTO"===(null===(i=null===(o=l.setting)||void 0===o?void 0:o.autoProps)||void 0===i?void 0:i.width)&&(l.setting.autoProps.width="CUSTOM",l.bbox||(l.bbox={}),l.bbox.width=`${t.config.widgetWidth}px`),"AUTO"===(null===(s=null===(a=l.setting)||void 0===a?void 0:a.autoProps)||void 0===s?void 0:s.height)&&(l.setting.autoProps.height="CUSTOM",l.bbox||(l.bbox={}),l.bbox.height=`${t.config.widgetHeight}px`))}}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];Object.keys(r.content||{}).forEach((t=>{var n,o;const i=r.content[t];if(i.type===kT.Widget){const t=e.widgets[i.widgetId];if(0===(null===(n=null==t?void 0:t.uri)||void 0===n?void 0:n.indexOf("widgets/layout/column"))){const r=null===(o=t.layouts)||void 0===o?void 0:o.DEFAULT;r&&Object.keys(r).forEach((n=>{var o,i,a,s,l,u,c,d;const p=r[n],f=e.layouts[p];f.setting||(f.setting={}),f.setting.space=(null===(i=null===(o=t.config)||void 0===o?void 0:o.space)||void 0===i?void 0:i.distance)||(null===(a=t.config)||void 0===a?void 0:a.space),f.setting.padding=null===(l=null===(s=t.config)||void 0===s?void 0:s.style)||void 0===l?void 0:l.padding,f.setting.justifyContent=null===(c=null===(u=t.config)||void 0===u?void 0:u.style)||void 0===c?void 0:c.justifyContent,f.setting.overflowY=null===(d=t.config)||void 0===d?void 0:d.style.overflowY}))}}}))})),e))(t),t}},{version:"1.3.0",description:"1.3.0",upgrader:e=>e},{version:"1.4.0",description:"1.4.0",upgrader:e=>{let t=e;return t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{const r=e.widgets[t];if("widgets/common/filter/"===r.uri&&r.useDataSources){const n={};r.useDataSources.forEach((e=>{if(e.dataSourceId in n){const t=n[e.dataSourceId].fields||[],r=e.fields||[];n[e.dataSourceId].fields=Array.from(new Set(t.concat(r))).sort()}else n[e.dataSourceId]=e})),e.widgets[t].useDataSources=Object.keys(n).map((e=>n[e]))}})),e))(t),t=(e=>e.dialogs?(Object.keys(e.dialogs).forEach((t=>{const r=e.dialogs[t],n={width:r.width,height:r.height,aspectRatio:!!r.aspectRatio};delete r.width,delete r.height,delete r.aspectRatio,r.mode===rm.Fixed&&(n.position=r.position,delete r.position),r.sizeMode={},r.sizeMode[Dl.Large]=n})),e):e)(t),t=(e=>{var t;const r=["widgets/arcgis/feature-info/","widgets/arcgis/query/","widgets/common/chart/","widgets/common/list/","widgets/common/table/"];return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{const n=e.widgets[t];r.includes(n.uri)&&(n.enableDataAction=!1)})),e})(t),t}},{version:"1.5.0",description:"1.5.0",upgrader:e=>{let t=e;return t=(e=>{var t;return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{var r,n;const o=e.widgets[t];if(0===(null===(r=null==o?void 0:o.uri)||void 0===r?void 0:r.indexOf("widgets/layout/row"))){const t=null===(n=o.layouts)||void 0===n?void 0:n.DEFAULT;t&&Object.keys(t).forEach((r=>{var n,i,a,s,l,u;const c=t[r],d=e.layouts[c];d&&(d.setting||(d.setting={}),d.setting.style||(d.setting.style={}),d.setting.space=null!==(a=null===(i=null===(n=o.config)||void 0===n?void 0:n.space)||void 0===i?void 0:i.distance)&&void 0!==a?a:null===(s=o.config)||void 0===s?void 0:s.space,d.setting.style.padding=null===(u=null===(l=o.config)||void 0===l?void 0:l.style)||void 0===u?void 0:u.padding,o.config={})}))}})),e})(t),t=(e=>{var t,r;const n=t=>{Object.keys(null!=t?t:{}).forEach((r=>{var n;const o=t[r],i=e.layouts[o];if(i){const e=null!==(n=i.setting)&&void 0!==n?n:{};e.lockDescendants=!0,i.setting=e}}))};return n(null===(t=e.header)||void 0===t?void 0:t.layout),n(null===(r=e.footer)||void 0===r?void 0:r.layout),e})(t),t=(e=>{var t;return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{var r,n;const o=e.widgets[t];if(0===(null===(r=null==o?void 0:o.uri)||void 0===r?void 0:r.indexOf("widgets/layout/column"))){const t=null===(n=o.layouts)||void 0===n?void 0:n.DEFAULT;t&&Object.keys(t).forEach((r=>{const n=t[r],o=e.layouts[n];o&&!o.type&&(o.type=LT.ColumnLayout)}))}})),e})(t),t}},{version:"1.6.0",description:"1.6.0",upgrader:e=>{const t=e.customTheme;if(!t)return e;const r=t.sharedThemeVariables;delete t.sharedThemeVariables;let n=e;return n.customTheme=t,n.sharedThemeVariables=r,n=(e=>{var t;return Object.values(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var r;"DATA_RECORDS_SELECTION_CHANGE"===(null==t?void 0:t.messageType)&&(null!==(r=t.actions)&&void 0!==r?r:[]).forEach((r=>{var n,o,i,a,s;if(!("zoomToFeature"!==(null==r?void 0:r.actionName)&&"panTo"!==r.actionName||(null===(n=null==r?void 0:r.config)||void 0===n?void 0:n.useDataSources)&&0!==(null===(i=null===(o=null==r?void 0:r.config)||void 0===o?void 0:o.useDataSources)||void 0===i?void 0:i.length))){const n=e.widgets[t.widgetId];if(r.config||(r.config={}),"widgets/arcgis/query/"===n.uri){const e=null!==(a=n.outputDataSources)&&void 0!==a?a:[];r.config.useDataSources=e.map((e=>({dataSourceId:e,mainDataSourceId:e,rootDataSourceId:null}))),r.config.useDataSource=r.config.useDataSources[0]}else{const e=null!==(s=n.useDataSources)&&void 0!==s?s:[];r.config.useDataSources=e.map((e=>({dataSourceId:e.dataSourceId,mainDataSourceId:e.mainDataSourceId,rootDataSourceId:e.rootDataSourceId})))}}}))})),e})(n),n}},{version:"1.7.0",description:"1.7.0",upgrader:e=>{const t=function(e,t){let r;return"page"===t?r=e.pages:"view"===t?r=e.views:"dialog"===t&&(r=e.dialogs),r?(Object.keys(r).forEach((e=>{Object.keys(r).some((t=>{if(t===e)return!0;r[t].label===r[e].label&&(r[e].label+=" ")}))})),r):null};let r=e;return r=(e=>{var t,r;return Object.keys(null!==(t=e.dataSources)&&void 0!==t?t:{}).forEach((t=>{var r;const n=e.dataSources[t];n.isOutputFromWidget&&Object.values(null!==(r=e.widgets)&&void 0!==r?r:{}).find((e=>{var t;return"widgets/common/list/"===e.uri&&(null===(t=e.outputDataSources)||void 0===t?void 0:t.includes(n.id))}))&&delete e.dataSources[t]})),Object.keys(null!==(r=e.widgets)&&void 0!==r?r:{}).forEach((t=>{const r=e.widgets[t];"widgets/common/list/"===r.uri&&Array.isArray(r.outputDataSources)&&delete r.outputDataSources})),e})(r),r=(e=>(e.pages=t(e,"page"),e.dialogs&&(e.dialogs=t(e,"dialog")),e.views&&(e.views=t(e,"view")),e))(r),r=(e=>{var t;return Object.values(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var r;"DATA_SOURCE_FILTER_CHANGE"===(null==t?void 0:t.messageType)&&(null!==(r=t.actions)&&void 0!==r?r:[]).forEach((r=>{var n;if("zoomToFeature"===(null==r?void 0:r.actionName)||"panTo"===r.actionName){const o=e.widgets[t.widgetId];r.config||(r.config={});const i=(null!==(n=o.useDataSources)&&void 0!==n?n:[]).filter((e=>{var t;return null===(t=r.config.useDataSources)||void 0===t?void 0:t.find((t=>t.mainDataSourceId===e.mainDataSourceId))}));r.config.useDataSources=i||[]}}))})),e})(r),r}},{version:"1.8.0",description:"1.8.0",upgrader:e=>{let t=e;return t=(e=>e.dialogs?(Object.keys(e.dialogs).forEach((t=>{const r=e.dialogs[t];r.mode===rm.Anchored&&(r.closeWhenClickOverlay=!0)})),e):e)(t),t}},{version:"1.9.0",description:"1.9.0",upgrader:e=>(e=>{function t(t,r,n){var o;let i;if(JO(null==e?void 0:e.utilities,t))i=KO(null==e?void 0:e.utilities,t);else{const a=YO(e,t,r,n);i=a.id,e.utilities=null===(o=a.appConfig)||void 0===o?void 0:o.utilities}return{utilityId:i}}const r=e.widgets||{};return Object.keys(r).forEach((n=>{var o,i,a,s,l,u,c,d,p,f,h,g,m,v,y,S,b;const w="widgets/arcgis/directions/"===(null===(o=null==r?void 0:r[n])||void 0===o?void 0:o.uri),I="widgets/common/search/"===(null===(i=null==r?void 0:r[n])||void 0===i?void 0:i.uri);if(w||I){const o=I?null===(s=null===(a=null==r?void 0:r[n])||void 0===a?void 0:a.config)||void 0===s?void 0:s.datasourceConfig:null===(c=null===(u=null===(l=null==r?void 0:r[n])||void 0===l?void 0:l.config)||void 0===u?void 0:u.searchConfig)||void 0===c?void 0:c.dataConfig,i=null==o?void 0:o.map((e=>((null==e?void 0:e.geocodeURL)&&(e.useUtility=t(e.geocodeURL,am.GeoCoding,e.label),null==e||delete e.geocodeURL),e)));if(w){let r;o&&(e.widgets[n].config.searchConfig.dataConfig=i.map((e=>(null==e||delete e.outputDataSourceId,null==e||delete e.useDataSource,e)))),r=(null===(d=e.widgets[n].config.routeConfig)||void 0===d?void 0:d.routeServiceUrl)?null===(m=e.widgets[n].config.routeConfig)||void 0===m?void 0:m.routeServiceUrl:(null===(g=null===(h=null===(f=null===(p=jy().getState())||void 0===p?void 0:p.portalSelf)||void 0===f?void 0:f.helperServices)||void 0===h?void 0:h.route)||void 0===g?void 0:g.url)||"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",e.widgets[n].config.routeConfig={useUtility:t(r,am.Routing)},e.widgets[n].useUtilities=[null===(v=e.widgets[n].config.routeConfig)||void 0===v?void 0:v.useUtility].concat(null===(S=null===(y=e.widgets[n].config.searchConfig)||void 0===y?void 0:y.dataConfig)||void 0===S?void 0:S.map((e=>null==e?void 0:e.useUtility))).filter((e=>!!e))}else o&&(e.widgets[n].config.datasourceConfig=i),e.widgets[n].useUtilities=null===(b=e.widgets[n].config.datasourceConfig)||void 0===b?void 0:b.map((e=>null==e?void 0:e.useUtility)).filter((e=>!!e))}})),e})(e)},{version:"1.10.0",description:"1.10.0",upgrader:e=>{let t=(e=>{const t=(e,t)=>{if(!e.isOutputFromWidget||!e.isDataInDataSourceInstance)return!1;const r=Object.values(t).find((t=>{var r;return(null===(r=t.outputDataSources)||void 0===r?void 0:r[0])===e.id&&"widgets/common/chart/"===t.uri}));return(e=>{var t,r,n,o,i,a,s,l;if(!e)return!1;const u=null===(n=null===(r=null===(t=e.config.webChart)||void 0===t?void 0:t.series)||void 0===r?void 0:r[0])||void 0===n?void 0:n.type;if(!["barSeries","lineSeries","pieSeries"].includes(u))return!1;let c=null===(i=null===(o=e.config.webChart)||void 0===o?void 0:o.dataSource)||void 0===i?void 0:i.query;return null==c&&(c=null===(l=null===(s=null===(a=e.config.webChart)||void 0===a?void 0:a.series)||void 0===s?void 0:s[0])||void 0===l?void 0:l.query),null==(null==c?void 0:c.groupByFieldsForStatistics)&&null!=(null==c?void 0:c.outStatistics)})(r)},r={jimuName:"name",type:Rl.String,esriType:_l.String,name:"name",alias:"Name",format:null},n={jimuName:"value",type:Rl.Number,esriType:_l.Double,name:"value",alias:"Value",format:{digitSeparator:!0,places:3}},o=e.dataSources;return((e,r)=>!!e&&Object.values(e).some((e=>t(e,r))))(o,e.widgets)?(Object.values(o).forEach((o=>{if(t(o,e.widgets)){const e=o.schema,t=e.fields[e.idField],i={[t.jimuName]:t,name:r,value:n};e.fields=i}})),e):e})(e);return t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((r=>{var n,o,i,a,s,l,u,c,d;"widgets/common/print/"===(null===(n=null==t?void 0:t[r])||void 0===n?void 0:n.uri)&&((null===(i=null===(o=null==e?void 0:e.widgets)||void 0===o?void 0:o[r])||void 0===i?void 0:i.style)||(e.widgets[r].style={}),(null===(l=null===(s=null===(a=null==e?void 0:e.widgets)||void 0===a?void 0:a[r])||void 0===s?void 0:s.style)||void 0===l?void 0:l.background)||(e.widgets[r].style.background={color:"var(--white)",fillType:"fill"}),(null===(d=null===(c=null===(u=null==e?void 0:e.widgets)||void 0===u?void 0:u[r])||void 0===c?void 0:c.style)||void 0===d?void 0:d.border)||(e.widgets[r].style.border={color:"var(--light-400)",type:"solid",width:"1px"}))})),e})(t),t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((e=>{var r,n,o;if("widgets/common/search/"===(null===(r=null==t?void 0:t[e])||void 0===r?void 0:r.uri)){const r=(null===(o=null===(n=t[e])||void 0===n?void 0:n.config)||void 0===o?void 0:o.datasourceConfig)||[];let i=[];null==r||r.forEach((e=>{const t=null==e?void 0:e.useDataSource;var r;t&&(((e,t)=>{var r;return(null===(r=null==t?void 0:t.filter((t=>(null==e?void 0:e.dataSourceId)===(null==t?void 0:t.dataSourceId))))||void 0===r?void 0:r.length)>0})(t,i)?(r=t,i=i.map((e=>{if((null==r?void 0:r.dataSourceId)===(null==e?void 0:e.dataSourceId)){const t=(null==r?void 0:r.fields)||[],n=(null==e?void 0:e.fields)||[],o=Array.from(new Set(n.concat(t)));e.fields=o}return e}))):i.push(t))})),t[e].useDataSources=i}})),e})(t),t}},{version:"1.12.0",description:"1.12.0",upgrader:e=>{let t=(e=>{var t;return Object.keys(null!==(t=null==e?void 0:e.layouts)&&void 0!==t?t:{}).forEach((t=>{var r;const n=e.layouts[t];n.type===LT.GridLayout&&Object.keys(null!==(r=n.content)&&void 0!==r?r:{}).forEach((e=>{const t=n.content[e],r=t.setting;null!=(null==r?void 0:r.type)?(t.gridType=r.type,delete r.type):t.gridType=Xg.Plain,null!=(null==r?void 0:r.parent)&&(t.parent=r.parent,delete r.parent),(null==r?void 0:r.children)&&(t.children=r.children,delete r.children),(null==r?void 0:r.active)>=0&&(t.activeTab=r.active,delete r.active),(null==r?void 0:r.size)>=0&&(t.bbox={width:r.size},delete r.size)}))})),e})(e);return t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((e=>{var r;"widgets/arcgis/map-layers/"===(null===(r=null==t?void 0:t[e])||void 0===r?void 0:r.uri)&&(t[e].enableDataAction=!1)})),e})(t),t}},{version:"1.13.0",description:"1.13.0",upgrader:e=>{let t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((r=>{var n,o,i,a,s;const l="widgets/common/list/"===(null===(n=null==t?void 0:t[r])||void 0===n?void 0:n.uri),u="widgets/common/card/"===(null===(o=null==t?void 0:t[r])||void 0===o?void 0:o.uri),c="widgets/arcgis/bookmark/"===(null===(i=null==t?void 0:t[r])||void 0===i?void 0:i.uri);(u||l||c)&&(null===(s=null===(a=null==t?void 0:t[r])||void 0===a?void 0:a.layouts)||void 0===s?void 0:s.REGULAR)&&(e.widgets[r].layouts.DEFAULT=t[r].layouts.REGULAR,delete t[r].layouts.REGULAR,t[r].layouts=(e=>{const t={};(null==e?void 0:e.DEFAULT)&&(t.DEFAULT=e.DEFAULT);for(const r in e)"DEFAULT"!==r&&(t[r]=e[r]);return t})(t[r].layouts),u?(e.widgets[r].config.DEFAULT=t[r].config.REGULAR,delete t[r].config.REGULAR):l&&(e.widgets[r].config.cardConfigs.DEFAULT=t[r].config.cardConfigs.REGULAR,delete t[r].config.cardConfigs.REGULAR))})),e})(e);return t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{const r=e.widgets[t];"widgets/common/controller/"===r.uri&&r.layouts._openwidget&&(Object.values(r.layouts._openwidget).forEach((t=>{e.layouts[t]&&delete e.layouts[t]})),delete r.layouts._openwidget)})),e))(t),t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((e=>{const r=t[e];r&&"widgets/arcgis/arcgis-map/"===r.uri&&(r.enableDataAction=!1)})),e})(t),t}},{version:"1.14.0",description:"1.14.0",upgrader:e=>NT(this,void 0,void 0,(function*(){const{getJimuFieldNamesBySqlExpression:t}=yield ry("jimu-ui/basic/sql-expression-runtime",["getJimuFieldNamesBySqlExpression"]),r=e=>{const r=[],n=null==e?void 0:e.actionUseDataSource,o=null==e?void 0:e.messageUseDataSource;if(o&&r.push(o),n){const o=(null==e?void 0:e.sqlExprObj)||null,i=t(Ae(o))||[],a=(null==n?void 0:n.fields)||[],s=Ae(n).set("fields",Array.from(new Set(a.concat(i))));r.push(s)}return r};let n=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var r,n,o;const i=e.layouts[t];if(i.type===LT.GridLayout){const e=null===(n=null===(r=i.setting)||void 0===r?void 0:r.expandable)||void 0===n||n;Object.keys(null!==(o=i.content)&&void 0!==o?o:{}).forEach((t=>{const r=i.content[t];r.gridType===Xg.Plain&&(r.expandable=e)}))}})),e})(e);return n=(e=>{const t={};return Object.keys(e.dialogs).forEach((r=>{e.dialogs[r].mode===rm.Fixed&&(e.dialogs[r].blockPage=!0),t[r]=e.dialogs[r]})),e})(n),(e=>{var t;let n=!1;const o=(null==e?void 0:e.messageConfigs)||{};return null===(t=Object.keys(o))||void 0===t||t.forEach((e=>{var t;((null===(t=o[e])||void 0===t?void 0:t.actions)||[]).forEach((e=>{(null==e?void 0:e.config)&&!(null==e?void 0:e.useDataSources)&&r(null==e?void 0:e.config).length>0&&(n=!0)}))})),n})(n)&&(n=(e=>{var t;const n=(null==e?void 0:e.messageConfigs)||{};return null===(t=Object.keys(n))||void 0===t||t.forEach((e=>{var t;const o=((null===(t=n[e])||void 0===t?void 0:t.actions)||[]).map((e=>{if((null==e?void 0:e.config)&&!(null==e?void 0:e.useDataSources)){const t=r(null==e?void 0:e.config);return t.length>0&&(e.useDataSources=t),e}return e}));n[e].actions=o})),e.messageConfigs=n,e})(n)),n}))}]}}var UT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class FT extends MT{widgetUpgrade(e,t,r,n){return UT(this,void 0,void 0,(function*(){const o=this.checkVersions(t,r);if(!o)return e;const[i,a]=o;if(i===a)return this.runWidgetUpgrader(this.versions[a],e,n);const s=e,l=this.versions.slice(i+1,a+1).filter((e=>null==e?void 0:e.upgrader));return l.reduce(((e,t)=>UT(this,void 0,void 0,(function*(){const r=yield e;return this.runWidgetUpgrader(t,r,n)}))),Promise.resolve(s))}))}runWidgetUpgrader(e,t,r){return UT(this,void 0,void 0,(function*(){if(e.upgradeFullInfo)return e.upgrader(t,r);{const n=yield e.upgrader(t.widgetJson.config,r);return{widgetJson:t.widgetJson.set("config",n),outputDataSourceJsons:t.outputDataSourceJsons}}}))}}class BT extends k.PureComponent{}const $T=BT;var GT="NOT_FOUND",WT=function(e,t){return e===t};function VT(e,t){var r,n,o="object"==typeof t?t:{equalityCheck:t},i=o.equalityCheck,a=void 0===i?WT:i,s=o.maxSize,l=void 0===s?1:s,u=o.resultEqualityCheck,c=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}}(a),d=1===l?(r=c,{get:function(e){return n&&r(n.key,e)?n.value:GT},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}):function(e,t){var r=[];function n(e){var n=r.findIndex((function(r){return t(e,r.key)}));if(n>-1){var o=r[n];return n>0&&(r.splice(n,1),r.unshift(o)),o.value}return GT}return{get:n,put:function(t,o){n(t)===GT&&(r.unshift({key:t,value:o}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(l,c);function p(){var t=d.get(arguments);if(t===GT){if(t=e.apply(null,arguments),u){var r=d.getEntries().find((function(e){return u(e.value,t)}));r&&(t=r.value)}d.put(arguments,t)}return t}return p.clearCache=function(){return d.clear()},p}function HT(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i,a=0,s={memoizeOptions:void 0},l=n.pop();if("object"==typeof l&&(s=l,l=n.pop()),"function"!=typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=s.memoizeOptions,c=void 0===u?r:u,d=Array.isArray(c)?c:[c],p=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}(n),f=e.apply(void 0,[function(){return a++,l.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],t=p.length,r=0;r<t;r++)e.push(p[r].apply(null,arguments));return i=f.apply(null,e)}));return Object.assign(h,{resultFunc:l,memoizedResultFunc:f,dependencies:p,lastResult:function(){return i},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),h}}var zT=HT(VT);const qT=function(e,t,r){return null==e?e:function(e,t,r,n){if(!Iu(e))return e;for(var o=-1,i=(t=sc(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=lc(t[o]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=Iu(c)?c:Fc(t[o+1])?[]:{})}SS(s,l,u),s=s[l]}return e}(e,t,r)};class YT{constructor(){this.state={}}static getInstance(){return YT.instance||(YT.instance=new YT,window._mutableStoreManager=YT.instance),YT.instance}updateStateValue(e,t,r){var n;const o=null!==(n=null==t?void 0:t.split("."))&&void 0!==n?n:[],i=[e].concat(o);qT(this.state,i,r),jy().dispatch(dw(e,t))}readStateValue(e,t){var r;const n=null!==(r=null==t?void 0:t.split("."))&&void 0!==r?r:[],o=[e].concat(n);return uc(this.state,o)}getStateValue(e){return uc(this.state,e)}getState(){return this.state}clearState(){Object.keys(this.state).forEach((e=>{delete this.state[e]}))}}var JT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class KT{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return KT.instance||(KT.instance=new KT,window._messageManager=KT.instance),KT.instance}getActions(){return this.actions}getWidgetActions(e){return this.actions.filter((t=>t.widgetId===e))}getAction(e,t){return this.actions.find((r=>r.widgetId===e&&r.name===t))}destroyWidgetActions(e){this.actions=this.actions.filter((t=>(t.destroy(),t.widgetId!==e)))}registerWidgetActions(e,t){return JT(this,void 0,void 0,(function*(){const r=[];return e.manifest.messageActions&&e.manifest.messageActions.forEach((n=>{const o=e.uri+"dist/"+n.uri;r.push(this.registerAction({id:`${e.id}-${n.name}`,name:n.name,uri:o,widgetId:e.id,appConfig:t,label:e.manifest.i18nMessages[`_action_${n.name}_label`]||n.label||n.name}))})),Promise.all(r)}))}registerAction(e){return JT(this,void 0,void 0,(function*(){let t=this.actions.find((t=>t.id===e.id));return t?Promise.resolve(t):(()=>JT(this,void 0,void 0,(function*(){return e.ActionClass?Promise.resolve(e.ActionClass):this.loadActionClass(e.uri)})))().then((r=>JT(this,void 0,void 0,(function*(){t=new r({id:e.id,name:e.name,widgetId:e.widgetId,label:e.label,intl:Qh(e.widgetId,"runtime")});let n=[];return r.versionManager&&e.appConfig&&(n=Gm(e.appConfig,e.widgetId,e.name).map((t=>JT(this,void 0,void 0,(function*(){return this.upgradeActionConfig(t,r.versionManager,e.appConfig.widgets[e.widgetId].manifest.version)}))))),Promise.all(n).then((()=>(this.actions.push(t),t)))}))))}))}upgradeActionConfig(e,t,r){return JT(this,void 0,void 0,(function*(){const n=e.version,o=e.widgetId,i=e.config;return n||(e.version="1.0.0-beta2"),r===n?i:t?$e.valid(n)&&$e.valid(r)?t.upgrade(i,n,r,e.actionId).then((t=>{e.config=t,e.version=r})):(console.error("Bad widget action config version number, "+o+","+n+","+r),i):i}))}loadActionClass(e){return JT(this,void 0,void 0,(function*(){return this.actionClassPromises[e]||(this.actionClassPromises[e]=ry(e,["default"]).then((e=>e.default))),this.actionClassPromises[e]}))}publishMessage(e){return JT(this,void 0,void 0,(function*(){const t=jy().getState().appConfig.messageConfigs,r=Object.keys(t||{});let n=null;for(let o=0;o<r.length;o++)if(t[r[o]].messageType===e.type&&t[r[o]].widgetId===e.widgetId){n=t[r[o]];break}if(n)for(let t=0;t<n.actions.length;t++){const r=n.actions[t],o=this.actions.filter((e=>e.widgetId===r.widgetId&&e.name===r.actionName))[0];if(!o){console.error(`Not find action: ${r.actionName}`);break}if(!o.filterMessage(e))break;if(o.widgetId&&this.openWidget(o.widgetId),!(yield this.exeAction(o,e,r)))return void console.warn(`Action execute failed. id: ${o.id}`)}}))}openWidget(e){}exeAction(e,t,r){var n;return JT(this,void 0,void 0,(function*(){(null===(n=r.useDataSources)||void 0===n?void 0:n.length)>0&&(yield Promise.all(r.useDataSources.asMutable({deep:!1}).map((e=>Sb.getInstance().createDataSourceByUseDataSource(e)))));const o=e.onExecute(t,r.config);return o&&o instanceof Promise?o.then((e=>e),(function(e){return JT(this,void 0,void 0,(function*(){return console.error(e),Promise.resolve(!1)}))})):Promise.resolve(o)}))}}const XT=KT;var QT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function ZT(e,t,r){var n,o,i,a,s,l;if(e===t)return!1;const u=null===(n=jy().getState().appConfig)||void 0===n?void 0:n.widgets[e];if(!u)return!1;const c=u.dataActions;if(null===(i=null===(o=null==c?void 0:c[r])||void 0===o?void 0:o.enabled)||void 0===i||i){const e=null===(s=null===(a=null==c?void 0:c[r])||void 0===a?void 0:a.actions)||void 0===s?void 0:s[t];return null===(l=null==e?void 0:e.enabled)||void 0===l||l}return!1}class eA{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return eA.instance||(eA.instance=new eA,window._dataActionManager=eA.instance),eA.instance}getActions(){return this.actions}getSupportedActions(e,t,r){var n;return QT(this,void 0,void 0,(function*(){const o={},i=jy().getState(),a=i.appConfig,s=i.browserSizeMode,l=null==a?void 0:a.widgets[e],u=null===(n=l.manifest)||void 0===n?void 0:n.excludeDataActions,c=this.getAllWidgetsInSameRootContainer(a,e,s),d=this.actions;return yield Promise.all(d.map((n=>QT(this,void 0,void 0,(function*(){var i;if(yield this.testActionSupportData(n,t,r,e)){if(n.widgetId){const t=null===(i=jy().getState().appConfig)||void 0===i?void 0:i.widgets[n.widgetId];if(this.isActionExcluded(`${t.manifest.name}.${n.name}`,u)||!ZT(e,n.widgetId,n.name)||!c.includes(n.widgetId))return}else if((null==u?void 0:u.includes(n.name))||!ZT(e,null,n.name))return;o[n.name]||(o[n.name]=[]),o[n.name].push(n)}}))))),o}))}getAllWidgetsInSameRootContainer(e,t,r){const n=ty("jimu-layouts/layout-runtime"),o=n.searchUtils.getContentRootContainerInfo(e,t,kT.Widget,r,!1),i=jy().getState().appRuntimeInfo.currentPageId;return n.searchUtils.getContentsInContainerRecursiveAdv(e,o,kT.Widget,r,{includePending:!1,includeOtherSizeMode:!1,currentPageId:i})}isActionExcluded(e,t=[]){const r=e.split(".");if(2!==r.length)return!0;const n=`${r[0]}.*`;return t.some((t=>t===e||t===n))}registerWidgetActions(e){return QT(this,void 0,void 0,(function*(){const t=[];if(!e.uri)return t;const r=r=>QT(this,void 0,void 0,(function*(){var n;const o=e.uri+"dist/"+r.uri,i=`${e.id}-${r.name}`,a=yield this.registerAction({id:i,name:r.name,uri:o,widgetId:e.id,label:null!==(n=e.manifest.i18nMessages[`_action_${r.name}_label`])&&void 0!==n?n:r.label,icon:`${km(e.uri).folderUrl}dist/${r.icon}`});a&&t.push(a)}));if(e.manifest.dataActions)for(let t=0;t<e.manifest.dataActions.length;t++){const n=e.manifest.dataActions[t];yield r(n)}return t}))}registerAction(e){return QT(this,void 0,void 0,(function*(){const t=this.actions.find((t=>t.id===e.id));if(t)return t;const r=()=>QT(this,void 0,void 0,(function*(){return e.ActionClass?e.ActionClass:this.loadActionClass(e.uri)}));try{const t=new(yield r())({id:e.id,name:e.name,label:e.label,icon:e.icon,widgetId:e.widgetId,intl:Qh(e.widgetId,"runtime")});return this.actions.push(t),t}catch(t){console.error(`Action class ${e.uri} load failed.`,t)}return null}))}executeDataAction(e,t,r,n,o){return QT(this,void 0,void 0,(function*(){return e.widgetId&&this.openWidget(e.widgetId),e.onExecute(t,r,n,o)}))}openWidget(e){const t=ty("jimu-layouts/layout-runtime"),r=jy().getState(),n=r.appConfig,o=r.browserSizeMode,i=t.searchUtils.getParentWidgetIdOfContent(n,e,kT.Widget,o);i&&(n.widgets[i].manifest.properties.isWidgetController?jy().dispatch(Db(e)):this.openWidget(i))}destroyWidgetActions(e){this.actions=this.actions.filter((t=>(t.widgetId===e&&t.destroy(),t.widgetId!==e)))}loadActionClass(e){return QT(this,void 0,void 0,(function*(){return this.actionClassPromises[e]||(this.actionClassPromises[e]=ry(e,["default"]).then((e=>e.default))),this.actionClassPromises[e]}))}testActionSupportData(e,t,r,n){return QT(this,void 0,void 0,(function*(){return e.isSupported(t,r,n)}))}}var tA=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class rA{static getInstance(){return rA.instance||(rA.instance=new rA,window._widgetManager=rA.instance),rA.instance}constructor(){this.widgets={},Uy(this.onStoreChange.bind(this),["appConfig","widgets"]),this.dsManager=Sb.getInstance()}updateWidgetCache(e,t){this.widgets[e]||(this.widgets[e]={});for(const r in t)this.widgets[e][r]=t[r]}getWidgetListInfo(){return tA(this,void 0,void 0,(function*(){return this.widgetListInfo&&this.widgetListInfo.length>0?Promise.resolve(this.widgetListInfo):fetch(`${iy("widgets/")}widgets-info.json`).then((e=>tA(this,void 0,void 0,(function*(){return e.json()})))).then((e=>(this.widgetListInfo=e.map((e=>{var t;e.manifest=Lm(e.manifest);const r=tg(jy().getState().appContext.locale,e.manifest.translatedLocales);return{itemType:kT.Widget,name:e.name,label:(null===(t=e.i18nLabel)||void 0===t?void 0:t[r])||e.manifest.label||e.name,uri:e.uri,manifest:e.manifest,icon:`${iy("widgets/")}../${e.icon}`}})),this.widgetListInfo)))}))}getWidgetClass(e){var t,r,n;const o=null===(r=null===(t=jy().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===r?void 0:r[e];if(o)return null===(n=this.widgets[o.uri])||void 0===n?void 0:n.clazz}getWidgetClassByUri(e){var t;return null===(t=this.widgets[e])||void 0===t?void 0:t.clazz}destroyWidget(e){var t,r;const n=null===(r=null===(t=jy().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===r?void 0:r[e];n&&delete this.widgets[n.uri]}destroyWidgetByUri(e){this.checkWidgetUriInConfig(e)||delete this.widgets[e]}destroyAllWidgets(){this.widgets={}}checkWidgetUriInConfig(e){const t=jy().getState().appConfig.widgets||{};return!!Object.keys(t).find((r=>t[r].uri===e))}loadWidgetClass(e){var t,r;return tA(this,void 0,void 0,(function*(){const n=null===(r=null===(t=jy().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===r?void 0:r[e];return n?this.loadWidgetClassByUri(n.uri):Promise.resolve(null)}))}loadWidgetClassByUri(e){var t,r;return tA(this,void 0,void 0,(function*(){if(!this.checkWidgetUriInConfig(e))return Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.clazzPromise)return this.widgets[e].clazzPromise;if(!(null===(r=this.widgets[e])||void 0===r?void 0:r.manifest))return console.error(e,"Should load manifest first."),Promise.reject(null);const n=this.widgets[e].manifest;return n.properties.hasMainClass?(this.widgets[e].clazzPromise=this.loadRawClass(e).then((()=>tA(this,void 0,void 0,(function*(){return this.injectWidgetProps(e)})))).then((e=>e?this.appWidgetClassWrapperExtension(e,n):e)).then((t=>t?(this.widgets[e].clazz=t,jy().dispatch(Tb(e)),t):(delete this.widgets[e],t))),this.widgets[e].clazzPromise):Promise.resolve(null)}))}loadRawClass(e){return tA(this,void 0,void 0,(function*(){return this.loadWidgetDependency(e).then((()=>tA(this,void 0,void 0,(function*(){return ry(`${e}dist/runtime/widget`,[])})))).then((t=>{if(vv(e)&&t.__set_webpack_public_path__){const r=e.indexOf("/widgets/");if(r<0)console.warn(`The widget, located at ${e}, is not present within the "widgets" folder. If the widget utilizes the "import()" function to dynamically load modules, it is necessary to deploy both the widget itself and the "chunks" folder within the "widgets" directory.`);else{const n=e.substring(0,r+1);t.__set_webpack_public_path__(n)}}const r=t.default?t.default:t;return this.widgets[e].rawClazz=r,r}))}))}loadWidgetTranslation(e,t){return tA(this,void 0,void 0,(function*(){let r=jy().getState().appContext.locale;return r=Hh(r,t.translatedLocales),r?Jh(`${e}dist/runtime/translations`,r).catch((e=>tA(this,void 0,void 0,(function*(){return console.error("Load widget translation error",e),Promise.resolve({})})))):Promise.resolve({})}))}openWidget(e){jy().dispatch(Db(e))}closeWidget(e){jy().dispatch(_b(e))}appWidgetClassWrapperExtension(e,t){const r=fy.getInstance().getExtensions(Zv.WidgetClassWrapper)[0];return r?r.wrap(e,t):e}handleNewWidgetJson(e){return tA(this,void 0,void 0,(function*(){return e.context=km(e.uri),e.itemId&&(e.uri=yield this.getWidgetUriByItemId(e.itemId)),this.loadWidgetManifest(e.uri,!e.itemId).then((t=>tA(this,void 0,void 0,(function*(){return e._originManifest=t,this.processWidgetManifest(e)})))).then((t=>tA(this,void 0,void 0,(function*(){return e.manifest=t,e.version=t.version,Nm(jy().getState().appStateInBuilder?jy().getState().appStateInBuilder.appConfig:jy().getState().appConfig,e),this.loadWidgetDefaultConfig(e.uri)})))).then((t=>(e.config=t,e)))}))}getWidgetUriByItemId(e){return tA(this,void 0,void 0,(function*(){if(hm(jy().getState().portalUrl))return Promise.reject("Not support yet.");const t=yield(0,rI.rV)(e,{portal:dm(jy().getState().portalUrl),authentication:nb.getInstance().getSessionByUrl(jy().getState().portalUrl)}).catch((e=>nb.getInstance().handleAuthError(e,!1)));if("Experience Builder Widget"!==t.type)return Promise.reject("Item type is not correct.");if(!t.url)return Promise.reject("Item does not have url.");let r;return r=/manifest\.json$/.test(t.url)?t.url.substring(0,t.url.length-13):/\/$/.test(t.url)?t.url:t.url+"/",r=r.replace(/^http:\/\//,"https://"),r}))}loadWidgetManifest(e,t){var r;return tA(this,void 0,void 0,(function*(){if(!e)return Promise.reject("Widget uri or itemId is required.");if(t&&vv(e))return Promise.reject("Remote URL is not allowed.");if(this.widgets[e]||(this.widgets[e]={}),this.widgets[e].manifestPromise)return this.widgets[e].manifestPromise;let n;if(null===(r=window.widgetsManifest)||void 0===r?void 0:r[e])n=Promise.resolve(window.widgetsManifest[e]);else{const t=`${km(e).folderUrl}manifest.json`;n=window.fetch(t).then((e=>tA(this,void 0,void 0,(function*(){return 404===e.status?Promise.reject(new Error("404, widget not found.")):e.json()}))))}return this.widgets[e].manifestPromise=n.then((t=>tA(this,void 0,void 0,(function*(){if(t.error&&t.error.code)return Promise.reject(t.error);const r=t;return!r.widgetType&&r.properties&&r.properties.type&&(r.widgetType=r.properties.type,delete r.properties.type),!r.layouts&&r.properties&&r.properties.layouts&&(r.layouts=r.properties.layouts,delete r.properties.layouts),!r.translatedLocales&&r.supportedLocales&&(r.translatedLocales=r.supportedLocales),this.widgets[e].rawManifest=r,Promise.resolve(r)})))),this.widgets[e].manifestPromise}))}processWidgetManifest(e){return tA(this,void 0,void 0,(function*(){const t=Lm(e._originManifest);return e.manifest=t,this.loadWidgetTranslation(e.uri,t).then((r=>(t.i18nMessages=r||{},e.manifest=t,this.widgets[e.uri]?this.widgets[e.uri].manifest=t:this.widgets[e.uri]={rawManifest:e._originManifest,manifest:t,manifestPromise:Promise.resolve(t)},t)))}))}registerManifestProps(e,t){return tA(this,void 0,void 0,(function*(){const r=e.manifest,n=[];return r.extensions&&r.extensions.length>0&&n.push(fy.getInstance().registerWidgetExtensions(e)),r.messageActions&&r.messageActions.length>0&&n.push(XT.getInstance().registerWidgetActions(e,t)),r.dataActions&&r.dataActions.length>0&&n.push(eA.getInstance().registerWidgetActions(e)),Promise.all(n).then((()=>{}))}))}unRegisterManifestProps(e){fy.getInstance().destryWidgetExtensions(e),XT.getInstance().destroyWidgetActions(e),eA.getInstance().destroyWidgetActions(e)}loadWidgetDefaultConfig(e){var t;return tA(this,void 0,void 0,(function*(){if(!this.widgets[e].manifest.properties.hasConfig)return Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.defaultConfigPromise)return this.widgets[e].defaultConfigPromise;const r=km(e).folderUrl;return this.widgets[e].defaultConfigPromise=window.fetch(`${r}config.json`).then((e=>tA(this,void 0,void 0,(function*(){return 404===e.status?Promise.reject(new Error("404, widget not found.")):e.json()})))).then((e=>e)),this.widgets[e].defaultConfigPromise}))}loadWidgetDependency(e){return tA(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest;return t.dependency?lS("string"==typeof t.dependency?[t.dependency]:t.dependency):Promise.resolve()}))}injectWidgetProps(e){return tA(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest,r=t.name,n=Vg().withTheme,o=this.widgets[e].rawClazz,i=_T(n(jh(o),window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder));if(!this.checkWidgetUriInConfig(e))return Promise.resolve(null);const a=zT((e=>e.appI18nMessages),(e=>{const r=t.i18nMessages;return Object.assign({},r,e)})),s=(t,r)=>{var n;const i=r.widgetId;if(!t.appConfig.widgets[i])return{};const s=t.widgetsRuntimeInfo[i],l=Object.assign({portalUrl:t.portalUrl,portalSelf:t.portalSelf,user:t.user,token:t.token,locale:t.appContext.locale,appI18nMessages:t.appI18nMessages,i18nMessages:a(t)},r);t.widgetsState[i]&&(l.stateProps=t.widgetsState[i]),t.widgetsMutableStateVersion[i]&&(l.mutableStatePropsVersion=t.widgetsMutableStateVersion[i],l.mutableStateProps=YT.getInstance().getStateValue([i])),(null===(n=this.widgets[e])||void 0===n?void 0:n.widgetBuilderSupportModules)&&(l.builderSupportModules=this.widgets[e].widgetBuilderSupportModules),t.widgetsPreloadProps&&t.widgetsPreloadProps[i]&&Object.assign(l,t.widgetsPreloadProps[i]);const u=Object.assign(l,t.appConfig.widgets[i],s);return Object.assign(u,o.mapExtraStateProps?o.mapExtraStateProps(t,u):{})};class l extends k.PureComponent{upgradeWidget(){return tA(this,void 0,void 0,(function*(){const e=this.props,t=o.versionManager,n=e.manifest.version,i=e.version,a=e.config;if(n===i)return Promise.resolve();if(!i)return Promise.resolve();if(!t)return jy().dispatch(Ab(e.id)),Promise.resolve();if(!$e.valid(i)||!$e.valid(n))return Promise.reject("Bad widget version number, "+e.manifest.name+","+i+","+n);let s=null;e.outputDataSources&&(s=Ae({}),e.outputDataSources.forEach((e=>{s=s.set(e,jy().getState().appConfig.dataSources[e])})));const l={widgetJson:jy().getState().appConfig.widgets[e.id],outputDataSourceJsons:s};if($e.lt(i,n))try{let r;if(t.widgetUpgrade)r=yield t.widgetUpgrade(l,i,n,e.id);else{const o=yield t.upgrade(a,i,n,e.id);r={widgetJson:l.widgetJson.set("config",o),outputDataSourceJsons:l.outputDataSourceJsons}}jy().dispatch(Ab(e.id,r))}catch(e){console.error("Upgrade widget ["+r+"] error,"+e)}else console.error("It seems this widget is configured with a higher version. Please upgrade to the latest version to view. "+r+","+i+","+n),jy().dispatch(Ab(e.id))}))}componentDidMount(){this.upgradeWidget()}componentDidUpdate(){this.upgradeWidget()}render(){const{id:e,manifest:t,version:r,i18nMessages:n}=this.props;return e?o.versionManager&&r&&t.version!==r?null:k.createElement(Wh,{locale:this.props.locale,defaultLocale:this.props.locale,messages:n},k.createElement(i,Object.assign({},this.props))):null}}return l.displayName=`WidgetWrapper(${r})`,this.loadWidgetBuilderSupportModules(e,t).then((()=>tA(this,void 0,void 0,(function*(){return this.checkWidgetUriInConfig(e)?Promise.resolve(be(s)(l)):Promise.resolve(null)}))))}))}loadWidgetBuilderSupportModules(e,t){var r;return tA(this,void 0,void 0,(function*(){const n=[];if(window.jimuConfig.isInBuilder){if(null===(r=this.widgets[e])||void 0===r?void 0:r.widgetBuilderSupportModulesPromise)return this.widgets[e].widgetBuilderSupportModulesPromise;if(t.properties.hasEmbeddedLayout?n.push(ry("jimu-layouts/layout-builder",["LayoutEntry"]).then((e=>e.LayoutEntry))):n.push(Promise.resolve(null)),t.properties.hasBuilderSupportModule){const t=`${e}dist/runtime/builder-support`;n.push(ry(t,["default"]).then((e=>e.default)))}else n.push(Promise.resolve(null));return this.widgets[e].widgetBuilderSupportModulesPromise=Promise.all(n).then((t=>(this.widgets[e].widgetBuilderSupportModules={jimuForBuilderLib:ay(),LayoutEntry:t[0],widgetModules:t[1]},this.widgets[e].widgetBuilderSupportModules))),this.widgets[e].widgetBuilderSupportModulesPromise}return Promise.resolve({jimuForBuilderLib:null})}))}onStoreChange(e,t){e&&t&&Object.keys(e).forEach((e=>{t[e]||this.unRegisterManifestProps(e)})),e&&t&&Object.keys(t).forEach((r=>{e[r]?e[r].uri!==t[r].uri&&(this.unRegisterManifestProps(r),this.registerManifestProps(t[r])):this.registerManifestProps(t[r])}))}}const nA=rA;var oA=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const iA=s(1981);window.jimuConfig.exbVersion=iA.exbVersion;class aA{static getInstance(e){return aA.instance||(aA.instance=new aA(e)),aA.instance}constructor(e){this.intl=e.intl}loadAppConfig(){return oA(this,void 0,void 0,(function*(){return this.loadAndProcessAppConfig().then((e=>oA(this,void 0,void 0,(function*(){return this.updateAppInfoForDeployedApp(e.attributes),Ae(e)}))))}))}loadAndProcessAppConfig(){return oA(this,void 0,void 0,(function*(){return jy().getState().appConfig?Promise.resolve(jy().getState().appConfig.asMutable({deep:!0})):this.loadRawAppConfig().then((e=>oA(this,void 0,void 0,(function*(){return e.__not_publish?Promise.reject(new Error("notPublishError")):(this.addWebmapOrWebsceneToAppConfig(e),this.upgradeAppConfig(e))})))).then((e=>oA(this,void 0,void 0,(function*(){return this.processRawConfig(e)})))).then((e=>oA(this,void 0,void 0,(function*(){return this.initPortalAndWebTier(e)})))).then((e=>oA(this,void 0,void 0,(function*(){return window.jimuConfig.isInBuilder||jy().getState().portalUrl&&iI(jy().getState().portalUrl),this.handlePortalResourceInConfig(e)}))))}))}initPortalAndWebTier(e){return oA(this,void 0,void 0,(function*(){const t=jy().getState();if(window.jimuConfig.isInBuilder||nb.getInstance().getMainSession())return Promise.resolve(e);if(e.attributes.portalUrl)if(t.portalUrl){if(Pm(t.portalUrl))jy().dispatch(pw({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId}));else if(!t.portalUrl)return console.error("portalUrl is required."),Promise.reject(e)}else jy().dispatch(pw({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId}));if(window.jimuConfig.isDevEdition||window.jimuConfig.isInPortal){const t=jy().getState();return this.handleWebTierAndUpdatePortalAndInitSession(t.portalUrl,t.clientId,t.isWebTier).then((()=>e))}if(window.jimuConfig.isOutOfExb){const t=xm(e.attributes.portalUrl);return this.handleWebTierAndUpdatePortalAndInitSession(t,e.attributes.clientId,!!e.attributes.isWebTier).then((()=>e))}return Promise.resolve(e)}))}upgradeAppConfig(e){return oA(this,void 0,void 0,(function*(){return $e.valid(e.exbVersion)&&$e.valid(iA.exbVersion)?(e.originExbVersion=e.exbVersion,$e.lt(e.exbVersion,iA.exbVersion)?(new jT).upgrade(e,e.exbVersion,iA.exbVersion,"app").then((e=>(e.exbVersion=iA.exbVersion,e))):(e.exbVersion,iA.exbVersion,Promise.resolve(e))):Promise.reject(new Error(this.intl.formatMessage({id:"badVersion",defaultMessage:gS.badVersion})))}))}handleWebTierAndUpdatePortalAndInitSession(e,t,r){return oA(this,void 0,void 0,(function*(){if(r)return this.checkWebTierAndUpdatePortalAndInitSession(e,t);if(null==r)return this.checkWebTierAndUpdatePortalAndInitSession(e,t);{jy().dispatch(pw({isWebTier:!1}));const e=nb.getInstance();return e.getMainSession()?Promise.resolve():e.initSession()}}))}checkWebTierAndUpdatePortalAndInitSession(e,t){return oA(this,void 0,void 0,(function*(){const t=nb.getInstance();return t.getSessionFromWebTierPortal(e).then((e=>{let r=!1;return e?(r=!0,jy().dispatch(pw({isWebTier:r})),t.initSession(),t.getMainSession()?r:(t.writeAuthInfo(e),t.initSession().then((()=>r)))):(r=!1,jy().dispatch(pw({isWebTier:r})),t.initSession().then((()=>r)))}))}))}processRawConfig(e){return oA(this,void 0,void 0,(function*(){return this.processAppConfigAfterLoad(e),this.loadAllWidgetsManifest(e).then((e=>oA(this,void 0,void 0,(function*(){return this.applyAppConfigProcessorExtension(e)})))).then((e=>(this.addDefaultLabelAndIcon(e),e)))}))}updateAppInfoForDeployedApp(e){if(window.jimuConfig.isOutOfExb){const t={name:e.title,description:e.description,snippet:e.description,thumbnail:e.thumbnail};jy().dispatch(Ob(t))}}loadRawAppConfig(){return oA(this,void 0,void 0,(function*(){const e=fy.getInstance().getExtensions(Zv.AppConfigService)[0];return e?e.loadAppConfig():this.loadAppConfigWithDefault()}))}loadAppConfigWithDefault(){return oA(this,void 0,void 0,(function*(){const e=jy().getState();if(!e.appContext.isBuilder){const e=Lv().appId;if(e)return window.jimuConfig.isDevEdition?this.loadAppConfigFromLocalServer(e):this.loadAppConfigFromPortal(e)}let t=e.queryObject.config;t||(t="config.json");const r=t.split(":");if(2===r.length&&"item"===r[0])return this.loadAppConfigFromPortal(r[1]);if(vv(t)&&!/^https:\/\/(.)+\.arcgis\.com/.test(t.trim())){const e="Only *.arcgis.com is allowed.";return console.error(e),Promise.reject({message:e})}return window.fetch(t).then((e=>oA(this,void 0,void 0,(function*(){return e.json()}))))}))}addWebmapOrWebsceneToAppConfig(e){if(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder)return;"template"!==window.jimuConfig.appFolderName&&(e.template=null);const t=jy().getState().queryObject;Xm(e,null==t?void 0:t.webmap,null==t?void 0:t.webscene)}loadAppConfigFromLocalServer(e){return oA(this,void 0,void 0,(function*(){const t=jy().getState().queryObject.draft,r="true"===t||"1"===t?`/apps/${e}/resources/config/config.json`:`/apps/${e}/config.json`;return window.fetch(r).then((e=>{if(404===e.status){const e=this.intl.formatMessage({id:"invalidResourceItem",defaultMessage:gS.invalidResourceItem});return Promise.reject(Error(e))}return e.json()}))}))}loadAppConfigFromPortal(e){return oA(this,void 0,void 0,(function*(){const t=nb.getInstance(),r=(new Date).getTime(),n=jy().getState().queryObject.draft;return"true"===n||"1"===n?(0,qa.WY)(`${dm(jy().getState().portalUrl)}/content/items/${e}/resources/config/config.json`,{authentication:t.getSessionByUrl(jy().getState().portalUrl),httpMethod:"GET",params:{timestamp:r}}).catch((t=>{if("CONT_0001"===t.code){const e=this.intl.formatMessage({id:"invalidResourceItem",defaultMessage:gS.invalidResourceItem});return Promise.reject(Error(e))}return this._handleAuthError(t,e)})):(0,rI.m_)(e,{portal:dm(jy().getState().portalUrl),authentication:t.getSessionByUrl(jy().getState().portalUrl)}).catch((t=>oA(this,void 0,void 0,(function*(){if("CONT_0001"===t.code){const e=this.intl.formatMessage({id:"invalidResourceItem",defaultMessage:gS.invalidResourceItem});return Promise.reject(Error(e))}return this._handleAuthError(t,e)}))))}))}_handleAuthError(e,t){return oA(this,void 0,void 0,(function*(){const r=!!cg();return nb.getInstance().handleAuthError(e,r).then((()=>oA(this,void 0,void 0,(function*(){return r?(uI(t),aI(),bI(hI.Experience).then((e=>{e.valid||jy().dispatch(zw(e.invalidMessage))})).catch((e=>{console.error(e),jy().dispatch(zw(e.message))})),iI(jy().getState().portalUrl),lI(t).then((e=>(jy().dispatch(Ob(e)),e))),this.loadAppConfigFromPortal(t)):Promise.reject({})}))))}))}applyAppConfigProcessorExtension(e){return oA(this,void 0,void 0,(function*(){const t=fy.getInstance().getExtensions(Zv.AppConfigProcessor)[0];return t?t.process(e):Promise.resolve(e)}))}loadAllWidgetsManifest(e){return oA(this,void 0,void 0,(function*(){const t=nA.getInstance(),r=$m(e).map(((r,n)=>oA(this,void 0,void 0,(function*(){const n=r;if(n.uri||n.itemId)return n.itemId&&(n.uri=yield t.getWidgetUriByItemId(n.itemId)),e.useCachedManifest&&e.widgetsManifest[n.uri]?(n._originManifest=e.widgetsManifest[n.uri],yield t.processWidgetManifest(n),void(yield t.registerManifestProps(r))):t.loadWidgetManifest(n.uri,!n.itemId).then((e=>oA(this,void 0,void 0,(function*(){return n._originManifest=e,t.processWidgetManifest(n).then((()=>oA(this,void 0,void 0,(function*(){return t.registerManifestProps(n)}))))}))),(e=>oA(this,void 0,void 0,(function*(){console.error(e);const t={i18nMessages:{},properties:{}};return n._originManifest=t,n.manifest=t,Promise.resolve()}))))}))));return Promise.all(r).then((t=>e))}))}processAppConfigAfterLoad(e){this.cleanConfig(e),this.handleEmbedMode(e),this.addDefaultValues(e),this.fixAllIds(e),this.fixWidgetUri(e),this.fixThemeUri(e),this.addWidgetContext(e),this.addDefaultPageStructure(e),this.buildAppStructure(e)}handlePortalResourceInConfig(e){return oA(this,void 0,void 0,(function*(){if(window.jimuConfig.isBuilder&&!window.jimuConfig.isInBuilder)return Promise.resolve(e);const t=nb.getInstance().getMainSession();if(t&&t.token){const r=t.token;return Rm(e,r)}return Rm(e,null)}))}cleanConfig(e){const t=e.widgets||{};Object.keys(null!=t?t:{}).forEach((r=>{var n,o;if("widgets/common/controller/"===(null===(n=null==t?void 0:t[r])||void 0===n?void 0:n.uri)){const n=t[r];Object.keys(null!==(o=n.layouts._openwidget)&&void 0!==o?o:{}).forEach((t=>{const r=n.layouts._openwidget[t],o=e.layouts[r];o&&(o.content={},o.order=[])}))}})),e.layouts.undefined&&delete e.layouts.undefined}handleEmbedMode(e){const t=jy().getState().queryObject.embedded;"true"!==t&&"1"!==t||Object.keys(e.pages).forEach((t=>{e.pages[t].header=!1,e.pages[t].footer=!1}))}buildAppStructure(e){var t,r,n,o;const i=(t,r,n)=>{var o,i;(null===(i=null===(o=t.parent)||void 0===o?void 0:o[r])||void 0===i?void 0:i.length)>0?(t.parent[r]=t.parent[r].filter((t=>{var r,n;return null!=(null===(n=null===(r=e.layouts[t.layoutId])||void 0===r?void 0:r.content)||void 0===n?void 0:n[t.layoutItemId])})),t.parent[r].some((e=>e.layoutId===n.layoutId&&e.layoutItemId===n.layoutItemId))||t.parent[r].push(n)):t.parent?t.parent[r]=[n]:t.parent={[r]:[n]}},a=(t,r,n)=>{Object.keys(null!=t?t:{}).forEach((o=>{const s=t[o],l=e.layouts[s];l&&(l.parent={id:r,type:n},((t,r,n)=>{var o;Object.keys(null!==(o=r.content)&&void 0!==o?o:{}).forEach((o=>{const s=r.content[o];switch(s.type){case kT.Widget:{const r=e.widgets[s.widgetId];r?(i(r,n,{layoutId:t,layoutItemId:o}),r.layouts&&Object.values(r.layouts).forEach((e=>{a(e,s.widgetId,Kg.Widget)}))):s.widgetId&&delete s.widgetId;break}case kT.Section:{const r=e.sections[s.sectionId];i(r,n,{layoutId:t,layoutItemId:o}),r.views.forEach((t=>{const n=e.views[t];n.parent=r.id,a(n.layout,t,Kg.View)}));break}case kT.ScreenGroup:{const r=e.screenGroups[s.screenGroupId];r.parent?r.parent[n]={layoutId:t,layoutItemId:o}:r.parent={[n]:{layoutId:t,layoutItemId:o}},r.screens.forEach((t=>{var n;const o=e.screens[t];o.parent=r.id,a(o.main.layout,t,Kg.Screen),(null===(n=o.panel)||void 0===n?void 0:n.layout)&&a(o.panel.layout,t,Kg.Screen)}));break}}}))})(s,l,o))}))};Object.values(null!==(t=e.pages)&&void 0!==t?t:{}).forEach((e=>{a(e.layout,e.id,Kg.Page)})),Object.values(null!==(r=e.dialogs)&&void 0!==r?r:{}).forEach((e=>{a(e.layout,e.id,Kg.Dialog)})),(null===(n=e.header)||void 0===n?void 0:n.layout)&&a(e.header.layout,"",Kg.Header),(null===(o=e.footer)||void 0===o?void 0:o.layout)&&a(e.footer.layout,"",Kg.Footer)}addDefaultPageStructure(e){e.pageStructure||(e.pageStructure=[],Object.keys(e.pages).forEach((t=>{e.pageStructure.push({[t]:[]})})))}fixAllIds(e){this.fixId(e.pages),this.fixId(e.widgets),this.fixId(e.sections),this.fixId(e.views),this.fixId(e.dialogs),this.fixId(e.messageConfigs),this.fixId(e.dataSources),Vm(e)}fixId(e){e&&Object.keys(e).forEach((t=>{"string"!=typeof e[t]&&(e[t].id=t)}))}fixWidgetUri(e){$m(e).forEach((e=>{e.uri&&!/\/$/.test(e.uri)&&(e.uri=e.uri+"/")}))}fixThemeUri(e){/\/$/.test(e.theme)||(e.theme=e.theme+"/")}addWidgetContext(e){$m(e).forEach((e=>{const t=km(e.uri);e.context=t}))}addDefaultValues(e){return e.attributes||(e.attributes={}),e.widgets||(e.widgets={}),e.widgetsManifest||(e.widgetsManifest={}),e.views||(e.views={}),e.sections||(e.sections={}),e.dialogs||(e.dialogs={}),e.pages||(e.pages={}),e.layouts||(e.layouts={}),e.dataSources||(e.dataSources={}),e.messageConfigs||(e.messageConfigs={}),this.addDefaultPageVisible(e),e}addDefaultPageVisible(e){Object.keys(e.pages).forEach((t=>{void 0===e.pages[t].isVisible&&(e.pages[t].isVisible=!0)}))}addDefaultLabelAndIcon(e){this.addPageLabel(e),Object.keys(e.dialogs||{}).forEach((t=>{e.dialogs[t].label||(e.dialogs[t].label=Fm(e,"dialog",this.intl.formatMessage({id:"dialog",defaultMessage:gS.dialog})))})),e.layouts&&Object.keys(e.layouts).filter((t=>e.layouts[t].type===LT.FlowLayout)).forEach((t=>{const r=e.layouts[t];Object.keys(r.content||{}).filter((e=>r.content[e].type===kT.Widget)).map((e=>r.content[e].widgetId)).forEach((t=>{const r=e.widgets[t];if(r&&!r.label&&"widgets/layout/row/"===r.uri){const t=this.intl.formatMessage({id:"block",defaultMessage:gS.block});r.label=Fm(e,"widget",t)}}))})),$m(e).forEach((t=>{Nm(e,t)})),Object.keys(e.sections||{}).forEach((t=>{const r=e.sections[t];r.label||(r.label=Fm(e,"section",this.intl.formatMessage({id:"section",defaultMessage:gS.section})))})),Object.keys(e.views||{}).forEach((t=>{const r=e.views[t];r.label||(r.label=Fm(e,"view",this.intl.formatMessage({id:"view",defaultMessage:gS.view})))})),Object.keys(e.screenGroups||{}).forEach((t=>{const r=e.screenGroups[t];r.label||(r.label=Fm(e,"screenGroup",this.intl.formatMessage({id:"screenGroup",defaultMessage:gS.screenGroup})))})),Object.keys(e.screens||{}).forEach((t=>{const r=e.screens[t];r.label||(r.label=Fm(e,"screen",this.intl.formatMessage({id:"screen",defaultMessage:gS.screen})))})),Mm(e)}addPageLabel(e){e.pageStructure&&e.pageStructure.forEach((t=>{const r=Object.keys(t)[0];e.pages[r]&&!e.pages[r].label&&(e.pages[r].label=Fm(e,"page",this.intl.formatMessage({id:"page",defaultMessage:gS.page}))),t[r].forEach((t=>{e.pages[t]&&!e.pages[t].label&&(e.pages[t].label=Fm(e,"page",this.intl.formatMessage({id:"page",defaultMessage:gS.page})))}))}))}}class sA{constructor(){this.QUERY_PARAMS_WITH_MULTI_LVL=["data_filter","data_version"]}static getInstance(){return sA.instance||(sA.instance=new sA,window._messageManager=sA.instance),sA.instance}init(e){let t=pt.parse(window.location.search,{decode:!1});t=this.compatibleParseOldUrlRule(t),e.dispatch(Fb(t));const r=sv(window.location.hash);return e.dispatch(Bb(r)),t.__env__&&(window.jimuConfig.hostEnv=t.__env__),{queryObject:t,urlHashObject:r}}getQueryObject(){return jy().getState().queryObject}updateQueryObject(e){return jy().dispatch(Fb(e))}getHashObject(){var e,t;return window.jimuConfig.isBuilder?null===(e=jy().getState())||void 0===e?void 0:e.appStateInBuilder.urlHashObject:null===(t=jy().getState())||void 0===t?void 0:t.urlHashObject}setWidgetUrlParams(e,t,r){var n,o;const{isReplaceHashObject:i=!1}=null!=r?r:{};if(rv(e)){let r=Ae.from({});i||(r=null!==(o=null===(n=jy().getState().urlHashObject)||void 0===n?void 0:n.getIn([e]))&&void 0!==o?o:Ae.from({}),r=fv(r)),r=Ae.from(null!=r?r:{});const a={};if(t)for(const e of Object.keys(t)){const r=t[e],n=null==r;a[e]=n?null:encodeURIComponent(r)}r=r.merge(a),null==t&&(r=null),this.setHashObject(Ae.from({[e]:r}),i)}}setHashObject(e,t=!1){let r=iv(e);r=av(r),Sx(r,{isReplaceHashObject:t})}changeHashObjectByDataSourceSelection(e,t){return!!hv()&&(Cx(e,t),!0)}compatibleParseOldUrlRule(e){const t={};for(const r in e){const n=e[r];if(this.QUERY_PARAMS_WITH_MULTI_LVL.includes(r))t[decodeURIComponent(r)]=n;else{const e=this._decodeAllIn1stLvl(r,n);t[e.key]=e.value}}return t}_decodeAllIn1stLvl(e,t){let r=null,n=null;try{r=decodeURIComponent(e);try{n=decodeURIComponent(t)}catch(e){console.warn(e)}}catch(e){console.warn(e)}return{key:r,value:n}}}const lA=sA;var uA,cA=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.DataSource="DATA_SOURCE",e.Records="RECORDS"}(uA||(uA={}));class dA{constructor(e){e.id&&(this.id=e.id),e.name&&(this.name=e.name),e.label&&(this.label=e.label),e.icon&&(this.icon=e.icon),e.index&&(this.index=e.index),e.widgetId&&(this.widgetId=e.widgetId),e.intl&&(this.intl=e.intl)}destroy(){}getLabel(e){return this.label}}class pA extends dA{isSupported(e,t,r){return cA(this,void 0,void 0,(function*(){return!0}))}onExecute(e,t,r){return cA(this,void 0,void 0,(function*(){return!0}))}}var fA=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class hA extends dA{isSupported(e,t){return fA(this,void 0,void 0,(function*(){if(e.length>1&&t!==uA.Records)return!1;for(let r=0;r<e.length;r++)if(yield this.dataSourceAllowExport(e[r],t))return!0;return!1}))}dataSourceAllowExport(e,t){return fA(this,void 0,void 0,(function*(){const{dataSource:r}=e;if(null==r||"function"!=typeof r.query||r.getStatus()===Hl.NotReady)return!1;if(r.useNoSelectionView())return!1;const n=r;return!!(yield n.allowToExportData())&&(t!==uA.Records||this.getLocalRecrods(e).length>0)}))}checkPrivilege(){return fA(this,void 0,void 0,(function*(){return!0}))}confirm(e,t){return fA(this,void 0,void 0,(function*(){if(e.getDataSourceJson().isDataInDataSourceInstance||t===uA.Records)return{needed:!1};let r=e.count;if(null==r){const t=e;"function"==typeof t.queryCount&&(r=(yield t.queryCount({})).count)}if(r>1e4){const e=Qh();return{needed:!0,content:{title:e.formatMessage({id:"largeWarningTitle"}),content:e.formatMessage({id:"largeWarningContent"}),okLabel:e.formatMessage({id:"export"}),cancelLabel:e.formatMessage({id:"cancel"})}}}return{needed:!1}}))}getExportFileName(e){return e.getLabel()||e.getDataSourceJson().sourceLabel}getLocalRecrods(e){return e.records}getRecords(e,t,r=!0){return fA(this,void 0,void 0,(function*(){const n=e;if("function"==typeof n.queryCount){const e=1e3,o=(yield n.queryCount({})).count;return yield this.query(n,e,o,t,r)}return[]}))}processGeometryAndBuffer(e,t,r){return fA(this,void 0,void 0,(function*(){if(e&&(t>0||t<0)){let n;switch(r){case"esriSRUnit_Meter":n="meters";break;case"esriSRUnit_Foot":n="feet";break;case"esriSRUnit_Kilometer":n="kilometers";break;case"esriSRUnit_NauticalMile":case"esriSRUnit_USNauticalMile":n="nautical-miles"}if(null!=n)return[(yield nx(e,[t],n)).toJSON(),"esriGeometryPolygon"]}return[e,e?ig(e):void 0]}))}tryCreateReplica(e,t,r){return fA(this,void 0,void 0,(function*(){const n=e.url;if(/rest\/services\/.*\/FeatureServer/.test(n)){const o=/rest\/services\/.*\/FeatureServer\/([0-9]+)/,i=n.match(o);if(2===(null==i?void 0:i.length)){const o=i[1],a="/FeatureServer",s=n.lastIndexOf(a),l=n.substring(0,s+a.length),u=nb.getInstance().getSessionByUrl(jy().getState().portalUrl),c=e.getCurrentQueryParams();try{let e=`${l}/createReplica`;(null==u?void 0:u.token)&&(e=`${e}?token=${u.token}`);const n={where:null==c?void 0:c.where,useGeometry:null!=(null==c?void 0:c.geometry),queryOption:"useFilter"};(null==r?void 0:r.length)>0&&(n.fields=r.join(","));const[i,a]=yield this.processGeometryAndBuffer(null==c?void 0:c.geometry,null==c?void 0:c.distance,null==c?void 0:c.units),s=yield(0,qa.WY)(e,{authentication:u,httpMethod:"POST",params:{layers:+o,layerQueries:{[o]:n},geometry:i,geometryType:a,transportType:"esriTransportTypeUrl",returnAttachments:!1,returnAttachmentsDataByUrl:!0,async:!0,syncModel:"none",targetType:"client",syncDirection:"download",attachmentsSyncDirection:"none",dataFormat:t,f:"json"}}),d=null==s?void 0:s.statusUrl;if(d)return new Promise(((e,t)=>{const r=setInterval((()=>{(0,qa.WY)(d,{authentication:u,httpMethod:"GET"}).then((n=>{if("Completed"===n.status){const o=null==n?void 0:n.resultUrl;o?(null==u?void 0:u.token)?e(`${o}?token=${u.token}`):e(o):t("no result url found"),clearInterval(r)}else"Failed"!==n.status&&"CompletedWithErrors"!==n.status||(clearInterval(r),t("createReplica job failed"))})).catch((e=>{clearInterval(r),t(e)}))}),1e3)}))}catch(e){console.warn("createReplica not supported",e)}}}return Promise.reject("failed")}))}saveAsLocalFile(e,t){if(cg()){const r=window.open("","_blank","popup,width=320,height=320").document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=t,r.click()}else(0,Ha.saveAs)(e,t)}query(e,t,r,n=null,o=!0){return fA(this,void 0,void 0,(function*(){const i=t>0?t:r,a=Math.ceil(r/i);let s=[];for(let t=1;t<=a;t++){const r={page:t,pageSize:i,returnGeometry:o};null!=n&&(r.outFields=n);const a=yield e.query(r);s=s.concat(a.records)}return s}))}}var gA=s(9395),mA=s.n(gA),vA=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class yA extends hA{constructor(e){super(e),this.icon=mA()}onExecute(e,t){return vA(this,void 0,void 0,(function*(){if(e.length>1)return this.batchExport(e);const r=e[0],{dataSource:n}=r,o=yield this.confirm(n,t);if(o.needed){const{ConfirmDialog:e}=yield ry("jimu-ui");return k.createElement(e,{level:"info",title:o.content.title,hasNotShowAgainOption:!1,content:o.content.content,confirmLabel:o.content.okLabel,cancelLabel:o.content.cancelLabel,onConfirm:()=>{this.doExport(r,t)}})}return this.doExport(r,t)}))}processDataRecord(e,t){var r;const n=e.toJson();if((null===(r=n.feature)||void 0===r?void 0:r.attribute)&&(null==t?void 0:t.length)>0&&"*"!==t[0]){const e=n.feature.attribute;n.feature.attribute={},Object.keys(null!=e?e:{}).forEach((r=>{t.includes(r)&&(n.feature.attribute[r]=e[r])}))}return n}exportRecords(e,t,r){return vA(this,void 0,void 0,(function*(){const n=t.map((e=>this.processDataRecord(e,r))),o=new Blob([JSON.stringify(n)],{type:"text/plain;charset=utf-8"});this.saveAsLocalFile(o,`${this.getExportFileName(e)}.json`)}))}batchExport(e){return vA(this,void 0,void 0,(function*(){const{JSZip:t}=yield ry("jimu-core/jszip"),r=new t;for(const t of e){const{dataSource:e,fields:n}=t;if(yield this.dataSourceAllowExport(t,uA.Records)){const o=this.getLocalRecrods(t).map((e=>this.processDataRecord(e,n))),i=new Blob([JSON.stringify(o)],{type:"text/plain;charset=utf-8"});r.file(`${this.getExportFileName(e)}.json`,i)}}return r.generateAsync({type:"blob"}).then((e=>{this.saveAsLocalFile(e,"json_datasets.zip")})),!0}))}doExport(e,t){return vA(this,void 0,void 0,(function*(){const{dataSource:r,fields:n}=e;if(t===uA.Records)return this.exportRecords(r,this.getLocalRecrods(e),n),!0;try{const e=yield this.tryCreateReplica(r,"json",n);return window.open(e,"_blank"),!0}catch(e){}const o=yield this.getRecords(r,n);return this.exportRecords(r,o),!0}))}}function SA(){var e;return","===eg(null!==(e=jy().getState().appContext.locale)&&void 0!==e?e:"en")?";":","}function bA(e){return e.replace(/\r\n/g,"\n").replace(/\n/g," ")}function wA(e,t,r){const n=t.find(((t,n)=>{var o;return(null!==(o=null==r?void 0:r[n])&&void 0!==o?o:t)===e}));return n?wA(`_${e}`,t,r):e}function IA(e,t,r){let n,o;const i=e.getSchema();if(null!=(null==i?void 0:i.fields))n=null!=r?r:Object.keys(i.fields),o=n.map((e=>i.fields[e].alias));else{const e=t[0];n=null!=r?r:Object.keys(e.getData())}const a=function(e){return"esriGeometryPoint"===e.getGeometryType()}(e);let s=function(e,t,r){const n=SA();let o="",i=!1,a=!1;if(e.forEach(((r,s)=>{var l;let u=null!==(l=null==t?void 0:t[s])&&void 0!==l?l:r;u.includes(n)&&(u=`"${u}"`),i=i||"x"===u,a=a||"y"===u,s!==e.length-1?o+=`${u}${n}`:o+=u})),r){const r=wA("x",e,t),n=wA("y",e,t);o+=`,${r},${n}`}return`${o}\r\n`}(n,o,a);return t.forEach((e=>{s+=function(e,t,r){const n=Qh(),o=SA();let i="";if(t.forEach(((r,a)=>{var s;let l=null!==(s=e.getFormattedFieldValue(r,n))&&void 0!==s?s:"";l.includes(o)&&(l=`"${l}"`),a!==t.length-1?i+=bA(`${l}${o}`):i+=bA(l)})),r){const t=e.getGeometry();t&&(i+=`,${t.x},${t.y}`)}return`${i}\r\n`}(e,n,a)})),new Blob(["\ufeff",s],{type:"text/plain;charset=utf-8"})}var EA=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class CA extends hA{onExecute(e,t){return EA(this,void 0,void 0,(function*(){if(e.length>1)return this.batchExport(e);const r=e[0],{dataSource:n}=r,o=yield this.confirm(n,t);if(o.needed){const{ConfirmDialog:e}=yield ry("jimu-ui");return k.createElement(e,{level:"info",title:o.content.title,hasNotShowAgainOption:!1,content:o.content.content,confirmLabel:o.content.okLabel,cancelLabel:o.content.cancelLabel,onConfirm:()=>{this.doExport(r,t)}})}return this.doExport(r,t)}))}exportRecords(e,t,r){return EA(this,void 0,void 0,(function*(){const n=IA(e,t,r);this.saveAsLocalFile(n,`${this.getExportFileName(e)}.csv`)}))}batchExport(e){return EA(this,void 0,void 0,(function*(){const{JSZip:t}=yield ry("jimu-core/jszip"),r=new t;for(const t of e){const{dataSource:e,fields:n}=t;if(yield this.dataSourceAllowExport(t,uA.Records)){const o=IA(e,this.getLocalRecrods(t),n);r.file(`${this.getExportFileName(e)}.csv`,o)}}return r.generateAsync({type:"blob"}).then((e=>{this.saveAsLocalFile(e,"csv_datasets.zip")})),!0}))}doExport(e,t){return EA(this,void 0,void 0,(function*(){const{dataSource:r,fields:n}=e;if(t===uA.Records)return this.exportRecords(r,this.getLocalRecrods(e),n),!0;try{const e=yield this.tryCreateReplica(r,"csv",n);return window.open(e,"_blank"),!0}catch(e){}const o=yield this.getRecords(r,n);return this.exportRecords(r,o,n),!0}))}}function OA(e){let t=0,r=0;const n=e.length;let o,i=e[r];for(;r<n-1;r++)o=e[r+1],t+=(o[0]-i[0])*(o[1]+i[1]),i=o;return t>=0}function xA(e,t,r,n){const o=(n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]),i=(t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]),a=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(0!==a){const e=o/a,t=i/a;if(e>=0&&e<=1&&t>=0&&t<=1)return!0}return!1}function TA(e,t){for(let r=0;r<e.length-1;r++)for(let n=0;n<t.length-1;n++)if(xA(e[r],e[r+1],t[n],t[n+1]))return!0;return!1}function AA(e,t){const r=TA(e,t),n=function(e,t){let r=!1;for(let n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[n][1])&&t[0]<(e[i][0]-e[n][0])*(t[1]-e[n][1])/(e[i][1]-e[n][1])+e[n][0]&&(r=!r);return r}(e,t[0]);return!(r||!n)}function PA(e,t,r,n){const o={},i=e.getGeometry(),a=e.getData();if((i||a)&&(o.type="Feature",o.geometry=i?function(e){var t;let r={};const n=e;"number"==typeof(null==n?void 0:n.x)&&"number"==typeof(null==n?void 0:n.y)&&(r.type="Point",r.coordinates=[n.x,n.y],"number"==typeof n.z&&r.coordinates.push(n.z));const o=e;(null==o?void 0:o.points)&&(r.type="MultiPoint",r.coordinates=o.points.slice(0));const i=e;(null==i?void 0:i.paths)&&(1===i.paths.length?(r.type="LineString",r.coordinates=i.paths[0].slice(0)):(r.type="MultiLineString",r.coordinates=i.paths.slice(0)));const a=e;(null==a?void 0:a.rings)&&(r=function(e){const t=[],r=[];let n,o,i;for(let n=0;n<e.length;n++){const o=(function(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}((a=e[n].slice(0))[0],a[a.length-1])||a.push(a[0]),a);if(!(o.length<4))if(OA(o)){const e=[o.slice().reverse()];t.push(e)}else r.push(o.slice().reverse())}var a;const s=[];for(;r.length;){i=r.pop();let e=!1;for(n=t.length-1;n>=0;n--)if(o=t[n][0],AA(o,i)){t[n].push(i),e=!0;break}e||s.push(i)}for(;s.length;){i=s.pop();let e=!1;for(n=t.length-1;n>=0;n--)if(o=t[n][0],TA(o,i)){t[n].push(i),e=!0;break}e||t.push([i.reverse()])}return 1===t.length?{type:"Polygon",coordinates:t[0]}:{type:"MultiPolygon",coordinates:t}}(a.rings.slice(0)));const s=e;return"number"==typeof(null==s?void 0:s.xmin)&&"number"==typeof(null==s?void 0:s.ymin)&&"number"==typeof(null==s?void 0:s.xmax)&&"number"==typeof(null==s?void 0:s.ymax)&&(r.type="Polygon",r.coordinates=[[[s.xmax,s.ymax],[s.xmin,s.ymax],[s.xmin,s.ymin],[s.xmax,s.ymin],[s.xmax,s.ymax]]]),(null===(t=null==e?void 0:e.spatialReference)||void 0===t?void 0:t.wkid)&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),r}(i):null,a&&(null==n?void 0:n.length)>0&&"*"!==n[0]?(o.properties={},Object.keys(a).forEach((t=>{var i;n.includes(t)&&(o.properties[t]=null!==(i=e.getFormattedFieldValue(t,r))&&void 0!==i?i:"")}))):o.properties=a?function(e,t,r){var n;const o={};for(const i in t)t.hasOwnProperty(i)&&(o[i]=null!==(n=e.getFormattedFieldValue(i,r))&&void 0!==n?n:"");return o}(e,a,r):null,a))try{o.id=function(e,t){const r=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"];for(let t=0;t<r.length;t++){const n=r[t];if(n in e&&("string"==typeof e[n]||"number"==typeof e[n]))return e[n]}throw Error("No valid id attribute found")}(a,t)}catch(e){}return JSON.stringify(o.geometry)===JSON.stringify({})&&(o.geometry=null),o}function DA(e,t,r){const n={},o=Qh();n.type="FeatureCollection",n.features=[];for(let i=0;i<e.length;i++)n.features.push(PA(e[i],t,o,r));return n}function RA(e){return t=this,r=void 0,o=function*(){if(!e||0===e.length)return e;try{const t=yield pS("esri/geometry/SpatialReference");return yield tx(e,t.WGS84)}catch(e){console.error(e)}return e},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}l((o=o.apply(t,r||[])).next())}));var t,r,n,o}var _A=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class kA extends hA{isSupported(e,t){const r=Object.create(null,{isSupported:{get:()=>super.isSupported}});return _A(this,void 0,void 0,(function*(){const n=e[0],{dataSource:o}=n;return(yield r.isSupported.call(this,e,t))&&null!=o.getGeometryType()}))}onExecute(e,t){return _A(this,void 0,void 0,(function*(){if(e.length>1)return this.batchExport(e);const r=e[0],{dataSource:n}=r,o=yield this.confirm(n,t);if(o.needed){const{ConfirmDialog:e}=yield ry("jimu-ui");return k.createElement(e,{level:"info",title:o.content.title,hasNotShowAgainOption:!1,content:o.content.content,confirmLabel:o.content.okLabel,cancelLabel:o.content.cancelLabel,onConfirm:()=>{this.doExport(r,t)}})}return this.doExport(r,t)}))}exportRecords(e,t,r){var n;return _A(this,void 0,void 0,(function*(){const o=DA(yield RA(t),null===(n=e.getSchema())||void 0===n?void 0:n.idField,r),i=new Blob([JSON.stringify(o)],{type:"text/plain;charset=utf-8"});this.saveAsLocalFile(i,`${this.getExportFileName(e)}.geojson`)}))}batchExport(e){var t;return _A(this,void 0,void 0,(function*(){const{JSZip:r}=yield ry("jimu-core/jszip"),n=new r;for(const r of e){const{dataSource:e,fields:o}=r;if(yield this.dataSourceAllowExport(r,uA.Records)){const i=DA(yield RA(this.getLocalRecrods(r)),null===(t=e.getSchema())||void 0===t?void 0:t.idField,o),a=new Blob([JSON.stringify(i)],{type:"text/plain;charset=utf-8"});n.file(`${this.getExportFileName(e)}.geojson`,a)}}return n.generateAsync({type:"blob"}).then((e=>{this.saveAsLocalFile(e,"geojson_datasets.zip")})),!0}))}doExport(e,t){return _A(this,void 0,void 0,(function*(){const{dataSource:r,fields:n}=e;if(t===uA.Records)return this.exportRecords(r,this.getLocalRecrods(e),n),!0;try{const e=yield this.tryCreateReplica(r,"geojson",n);return window.open(e,"_blank"),!0}catch(e){}const o=yield this.getRecords(r,n);return this.exportRecords(r,o),!0}))}}var LA=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),NA=Math.abs,MA=String.fromCharCode,jA=Object.assign;function UA(e){return e.trim()}function FA(e,t,r){return e.replace(t,r)}function BA(e,t){return e.indexOf(t)}function $A(e,t){return 0|e.charCodeAt(t)}function GA(e,t,r){return e.slice(t,r)}function WA(e){return e.length}function VA(e){return e.length}function HA(e,t){return t.push(e),e}var zA=1,qA=1,YA=0,JA=0,KA=0,XA="";function QA(e,t,r,n,o,i,a){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:zA,column:qA,length:a,return:""}}function ZA(e,t){return jA(QA("",null,null,"",null,null,0),e,{length:-e.length},t)}function eP(){return KA=JA>0?$A(XA,--JA):0,qA--,10===KA&&(qA=1,zA--),KA}function tP(){return KA=JA<YA?$A(XA,JA++):0,qA++,10===KA&&(qA=1,zA++),KA}function rP(){return $A(XA,JA)}function nP(){return JA}function oP(e,t){return GA(XA,e,t)}function iP(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aP(e){return zA=qA=1,YA=WA(XA=e),JA=0,[]}function sP(e){return XA="",e}function lP(e){return UA(oP(JA-1,dP(91===e?e+2:40===e?e+1:e)))}function uP(e){for(;(KA=rP())&&KA<33;)tP();return iP(e)>2||iP(KA)>3?"":" "}function cP(e,t){for(;--t&&tP()&&!(KA<48||KA>102||KA>57&&KA<65||KA>70&&KA<97););return oP(e,nP()+(t<6&&32==rP()&&32==tP()))}function dP(e){for(;tP();)switch(KA){case e:return JA;case 34:case 39:34!==e&&39!==e&&dP(KA);break;case 40:41===e&&dP(e);break;case 92:tP()}return JA}function pP(e,t){for(;tP()&&e+KA!==57&&(e+KA!==84||47!==rP()););return"/*"+oP(t,JA-1)+"*"+MA(47===e?e:tP())}function fP(e){for(;!iP(rP());)tP();return oP(e,JA)}var hP="-ms-",gP="-moz-",mP="-webkit-",vP="comm",yP="rule",SP="decl",bP="@keyframes";function wP(e,t){for(var r="",n=VA(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function IP(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case SP:return e.return=e.return||e.value;case vP:return"";case bP:return e.return=e.value+"{"+wP(e.children,n)+"}";case yP:e.value=e.props.join(",")}return WA(r=wP(e.children,n))?e.return=e.value+"{"+r+"}":""}function EP(e){return sP(CP("",null,null,null,[""],e=aP(e),0,[0],e))}function CP(e,t,r,n,o,i,a,s,l){for(var u=0,c=0,d=a,p=0,f=0,h=0,g=1,m=1,v=1,y=0,S="",b=o,w=i,I=n,E=S;m;)switch(h=y,y=tP()){case 40:if(108!=h&&58==$A(E,d-1)){-1!=BA(E+=FA(lP(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:E+=lP(y);break;case 9:case 10:case 13:case 32:E+=uP(h);break;case 92:E+=cP(nP()-1,7);continue;case 47:switch(rP()){case 42:case 47:HA(xP(pP(tP(),nP()),t,r),l);break;default:E+="/"}break;case 123*g:s[u++]=WA(E)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:-1==v&&(E=FA(E,/\f/g,"")),f>0&&WA(E)-d&&HA(f>32?TP(E+";",n,r,d-1):TP(FA(E," ","")+";",n,r,d-2),l);break;case 59:E+=";";default:if(HA(I=OP(E,t,r,u,c,o,s,S,b=[],w=[],d),i),123===y)if(0===c)CP(E,t,I,I,b,i,d,s,w);else switch(99===p&&110===$A(E,3)?100:p){case 100:case 108:case 109:case 115:CP(e,I,I,n&&HA(OP(e,I,I,0,0,o,s,S,o,b=[],d),w),o,w,d,s,n?b:w);break;default:CP(E,I,I,I,[""],w,0,s,w)}}u=c=f=0,g=v=1,S=E="",d=a;break;case 58:d=1+WA(E),f=h;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==eP())continue;switch(E+=MA(y),y*g){case 38:v=c>0?1:(E+="\f",-1);break;case 44:s[u++]=(WA(E)-1)*v,v=1;break;case 64:45===rP()&&(E+=lP(tP())),p=rP(),c=d=WA(S=E+=fP(nP())),y++;break;case 45:45===h&&2==WA(E)&&(g=0)}}return i}function OP(e,t,r,n,o,i,a,s,l,u,c){for(var d=o-1,p=0===o?i:[""],f=VA(p),h=0,g=0,m=0;h<n;++h)for(var v=0,y=GA(e,d+1,d=NA(g=a[h])),S=e;v<f;++v)(S=UA(g>0?p[v]+" "+y:FA(y,/&\f/g,p[v])))&&(l[m++]=S);return QA(e,t,r,0===o?yP:s,l,u,c)}function xP(e,t,r){return QA(e,t,r,vP,MA(KA),GA(e,2,-2),0)}function TP(e,t,r,n){return QA(e,t,r,SP,GA(e,0,n),GA(e,n+1,-1),n)}var AP=function(e,t,r){for(var n=0,o=0;n=o,o=rP(),38===n&&12===o&&(t[r]=1),!iP(o);)tP();return oP(e,JA)},PP=new WeakMap,DP=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||PP.get(r))&&!n){PP.set(e,!0);for(var o=[],i=function(e,t){return sP(function(e,t){var r=-1,n=44;do{switch(iP(n)){case 0:38===n&&12===rP()&&(t[r]=1),e[r]+=AP(JA-1,t,r);break;case 2:e[r]+=lP(n);break;case 4:if(44===n){e[++r]=58===rP()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=MA(n)}}while(n=tP());return e}(aP(e),t))}(t,o),a=r.props,s=0,l=0;s<i.length;s++)for(var u=0;u<a.length;u++,l++)e.props[l]=o[s]?i[s].replace(/&\f/g,a[u]):a[u]+" "+i[s]}}},RP=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function _P(e,t){switch(function(e,t){return 45^$A(e,0)?(((t<<2^$A(e,0))<<2^$A(e,1))<<2^$A(e,2))<<2^$A(e,3):0}(e,t)){case 5103:return mP+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mP+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return mP+e+gP+e+hP+e+e;case 6828:case 4268:return mP+e+hP+e+e;case 6165:return mP+e+hP+"flex-"+e+e;case 5187:return mP+e+FA(e,/(\w+).+(:[^]+)/,mP+"box-$1$2"+hP+"flex-$1$2")+e;case 5443:return mP+e+hP+"flex-item-"+FA(e,/flex-|-self/,"")+e;case 4675:return mP+e+hP+"flex-line-pack"+FA(e,/align-content|flex-|-self/,"")+e;case 5548:return mP+e+hP+FA(e,"shrink","negative")+e;case 5292:return mP+e+hP+FA(e,"basis","preferred-size")+e;case 6060:return mP+"box-"+FA(e,"-grow","")+mP+e+hP+FA(e,"grow","positive")+e;case 4554:return mP+FA(e,/([^-])(transform)/g,"$1"+mP+"$2")+e;case 6187:return FA(FA(FA(e,/(zoom-|grab)/,mP+"$1"),/(image-set)/,mP+"$1"),e,"")+e;case 5495:case 3959:return FA(e,/(image-set\([^]*)/,mP+"$1$`$1");case 4968:return FA(FA(e,/(.+:)(flex-)?(.*)/,mP+"box-pack:$3"+hP+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+mP+e+e;case 4095:case 3583:case 4068:case 2532:return FA(e,/(.+)-inline(.+)/,mP+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(WA(e)-1-t>6)switch($A(e,t+1)){case 109:if(45!==$A(e,t+4))break;case 102:return FA(e,/(.+:)(.+)-([^]+)/,"$1"+mP+"$2-$3$1"+gP+(108==$A(e,t+3)?"$3":"$2-$3"))+e;case 115:return~BA(e,"stretch")?_P(FA(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==$A(e,t+1))break;case 6444:switch($A(e,WA(e)-3-(~BA(e,"!important")&&10))){case 107:return FA(e,":",":"+mP)+e;case 101:return FA(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mP+(45===$A(e,14)?"inline-":"")+"box$3$1"+mP+"$2$3$1"+hP+"$2box$3")+e}break;case 5936:switch($A(e,t+11)){case 114:return mP+e+hP+FA(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return mP+e+hP+FA(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return mP+e+hP+FA(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return mP+e+hP+e+e}return e}var kP=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case SP:e.return=_P(e.value,e.length);break;case bP:return wP([ZA(e,{value:FA(e.value,"@","@"+mP)})],n);case yP:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return wP([ZA(e,{props:[FA(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return wP([ZA(e,{props:[FA(t,/:(plac\w+)/,":"+mP+"input-$1")]}),ZA(e,{props:[FA(t,/:(plac\w+)/,":-moz-$1")]}),ZA(e,{props:[FA(t,/:(plac\w+)/,hP+"input-$1")]})],n)}return""}))}}],LP=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,o,i=e.stylisPlugins||kP,a={},s=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;s.push(e)}));var l,u,c,d,p=[IP,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],f=(u=[DP,RP].concat(i,p),c=VA(u),function(e,t,r,n){for(var o="",i=0;i<c;i++)o+=u[i](e,t,r,n)||"";return o});o=function(e,t,r,n){l=r,wP(EP(e?e+"{"+t.styles+"}":t.styles),f),n&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new LA({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return h.sheet.hydrate(s),h},NP=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var n=e(r);return t.set(r,n),n}};function MP(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}var jP=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},UP=function(e,t,r){jP(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}},FP={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function BP(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var $P=/[A-Z]|^ms/g,GP=/_EMO_([^_]+?)_([^]*?)_EMO_/g,WP=function(e){return 45===e.charCodeAt(1)},VP=function(e){return null!=e&&"boolean"!=typeof e},HP=BP((function(e){return WP(e)?e:e.replace($P,"-$&").toLowerCase()})),zP=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(GP,(function(e,t,r){return YP={name:t,styles:r,next:YP},t}))}return 1===FP[e]||WP(e)||"number"!=typeof t||0===t?t:t+"px"};function qP(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return YP={name:r.name,styles:r.styles,next:YP},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)YP={name:n.name,styles:n.styles,next:YP},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=qP(e,t,r[o])+";";else for(var i in r){var a=r[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?n+=i+"{"+t[a]+"}":VP(a)&&(n+=HP(i)+":"+zP(i,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=qP(e,t,a);switch(i){case"animation":case"animationName":n+=HP(i)+":"+s+";";break;default:n+=i+"{"+s+"}"}}else for(var l=0;l<a.length;l++)VP(a[l])&&(n+=HP(i)+":"+zP(i,a[l])+";")}return n}(e,t,r);case"function":if(void 0!==e){var o=YP,i=r(e);return YP=o,qP(e,t,i)}}if(null==t)return r;var a=t[r];return void 0!==a?a:r}var YP,JP,KP,XP,QP,ZP=/label:\s*([^\s;\n{]+)\s*(;|$)/g,eD=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";YP=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,o+=qP(r,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=qP(r,t,e[a]),n&&(o+=i[a]);ZP.lastIndex=0;for(var s,l="";null!==(s=ZP.exec(o));)l+="-"+s[1];var u=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+l;return{name:u,styles:o,next:YP}},tD=!!k.useInsertionEffect&&k.useInsertionEffect,rD=tD||function(e){return e()},nD=tD||k.useLayoutEffect,oD={}.hasOwnProperty,iD=k.createContext("undefined"!=typeof HTMLElement?LP({key:"css"}):null),aD=iD.Provider,sD=function(e){return(0,k.forwardRef)((function(t,r){var n=(0,k.useContext)(iD);return e(t,n,r)}))},lD=k.createContext({}),uD=NP((function(e){return NP((function(t){return function(e,t){return"function"==typeof t?t(e):Q({},e,t)}(e,t)}))})),cD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",dD=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return jP(t,r,n),rD((function(){return UP(t,r,n)})),null},pD=sD((function(e,t,r){var n=e.css;"string"==typeof n&&void 0!==t.registered[n]&&(n=t.registered[n]);var o=e[cD],i=[n],a="";"string"==typeof e.className?a=MP(t.registered,i,e.className):null!=e.className&&(a=e.className+" ");var s=eD(i,void 0,k.useContext(lD));a+=t.key+"-"+s.name;var l={};for(var u in e)oD.call(e,u)&&"css"!==u&&u!==cD&&(l[u]=e[u]);return l.ref=r,l.className=a,k.createElement(k.Fragment,null,k.createElement(dD,{cache:t,serialized:s,isStringTag:"string"==typeof o}),k.createElement(o,l))})),fD=function(e,t){var r=arguments;if(null==t||!oD.call(t,"css"))return k.createElement.apply(void 0,r);var n=r.length,o=new Array(n);o[0]=pD,o[1]=function(e,t){var r={};for(var n in t)oD.call(t,n)&&(r[n]=t[n]);return r[cD]=e,r}(e,t);for(var i=2;i<n;i++)o[i]=r[i];return k.createElement.apply(null,o)},hD=sD((function(e,t){var r=e.styles,n=eD([r],void 0,k.useContext(lD)),o=k.useRef();return nD((function(){var e=t.key+"-global",r=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,a=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(r.before=t.sheet.tags[0]),null!==a&&(i=!0,a.setAttribute("data-emotion",e),r.hydrate([a])),o.current=[r,i],function(){r.flush()}}),[t]),nD((function(){var e=o.current,r=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&UP(t,n.next,!0),r.tags.length){var i=r.tags[r.tags.length-1].nextElementSibling;r.before=i,r.flush()}t.insert("",n,r,!1)}}),[t,n.name]),null}));function gD(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return eD(t)}function mD(e,t){return{STRING_SELECTION_CHANGE:t.formatMessage({id:"message_StringSelectionChange",defaultMessage:gS.message_StringSelectionChange}),EXTENT_CHANGE:t.formatMessage({id:"message_ExtentChange",defaultMessage:gS.message_ExtentChange}),DATA_RECORDS_SELECTION_CHANGE:t.formatMessage({id:"message_DataRecordsSelectionChange",defaultMessage:gS.message_DataRecordsSelectionChange}),DATA_SOURCE_FILTER_CHANGE:t.formatMessage({id:"message_DataSourceFilterChange",defaultMessage:gS.message_DataSourceFilterChange}),DATA_RECORD_SET_CHANGE:t.formatMessage({id:"message_DataRecordSetChange",defaultMessage:gS.message_DataRecordSetChange}),DATA_SOURCES_CHANGE:t.formatMessage({id:"message_DataSourcesChange",defaultMessage:gS.message_DataSourcesChange}),LOCATION_CHANGE:t.formatMessage({id:"message_LocationChange",defaultMessage:gS.message_LocationChange}),SELECT_DATA_RECORD:t.formatMessage({id:"message_SelectDataRecord",defaultMessage:gS.message_SelectDataRecord}),BUTTON_CLICK:t.formatMessage({id:"message_ButtonClick",defaultMessage:gS.message_ButtonClick})}[e]}(function(e){e.StringSelectionChange="STRING_SELECTION_CHANGE",e.ExtentChange="EXTENT_CHANGE",e.DataRecordsSelectionChange="DATA_RECORDS_SELECTION_CHANGE",e.DataSourceFilterChange="DATA_SOURCE_FILTER_CHANGE",e.DataRecordSetChange="DATA_RECORD_SET_CHANGE",e.DataSourcesChange="DATA_SOURCES_CHANGE",e.LocationChange="LOCATION_CHANGE",e.SelectDataRecord="SELECT_DATA_RECORD",e.ButtonClick="BUTTON_CLICK"})(JP||(JP={})),function(e){e.UseDataSource="USE_DATA_SOURCE",e.OutputDataSource="OUTPUT_DATA_SOURCE",e.BothDataSource="BOTH_DATA_SOURCE"}(KP||(KP={}));class vD{constructor(e,t){this.type=JP.StringSelectionChange,this.widgetId=e,this.str=t}}class yD{constructor(e,t){this.type=JP.DataRecordsSelectionChange,this.widgetId=e,this.records=t}}class SD{constructor(e,t,r,n){this.type=JP.ExtentChange,this.widgetId=e,this.extent=t,this.viewpoint=r,this.stationary=n,this.relatedWidgetIds=[]}setRelatedWidgetIds(e){this.relatedWidgetIds=e.slice()}getRelatedWidgetIds(){return this.relatedWidgetIds?this.relatedWidgetIds.slice():[]}addRelatedWidgetId(e){this.relatedWidgetIds.includes(e)||this.relatedWidgetIds.push(e)}clone(){const e=this.extent?this.extent.clone():null,t=this.viewpoint?this.viewpoint.clone():null,r=new SD(this.widgetId,e,t,this.stationary);r.publishTime=this.publishTime;const n=this.getRelatedWidgetIds();return r.setRelatedWidgetIds(n),r}}class bD{constructor(e,t){this.type=JP.DataSourceFilterChange,this.widgetId=e,this.dataSourceIds=t}}!function(e){e.CreateUpdate="CREATE_UPDATE",e.Remove="REMOVE"}(XP||(XP={}));class wD{constructor(e,t,r){this.type=JP.DataRecordSetChange,this.widgetId=e,this.changeType=t,t===XP.CreateUpdate?this.dataRecordSets=r:this.dataRecordSetNames=r}}!function(e){e.Create="CREATE",e.Remove="REMOVE"}(QP||(QP={}));class ID{constructor(e,t,r){this.type=JP.DataSourcesChange,this.widgetId=e,this.changeType=t,this.dataSources=r}}class ED{constructor(e,t){this.type=JP.LocationChange,this.widgetId=e,this.point=t}}class CD{constructor(e,t,r){this.type=JP.SelectDataRecord,this.widgetId=e,this.dataSourceId=t,this.recordId=r}}class OD{constructor(e){this.type=JP.ButtonClick,this.widgetId=e}}class xD{constructor(e){this.id=e.id,e.name&&(this.name=e.name),e.widgetId&&(this.widgetId=e.widgetId),this.label=e.label,this.intl=e.intl}destroy(){}onRemoveListen(e,t){}}class TD extends xD{filterMessageDescription(e){return!0}filterMessage(e){return!0}onExecute(e,t){return!0}}function AD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PD(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function DD(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_D(e,t,"get"))}function RD(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,_D(e,t,"set"),r),r}function _D(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var kD="undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag",LD=new WeakMap,ND=new WeakMap;class MD{constructor(e){var{executor:t=(()=>{}),internals:r=VD(),promise:n=new Promise(((e,n)=>t(e,n,(e=>{r.onCancelList.push(e)}))))}=e;PD(this,LD,{writable:!0,value:void 0}),PD(this,ND,{writable:!0,value:void 0}),AD(this,kD,"CancelablePromise"),this.cancel=this.cancel.bind(this),RD(this,LD,r),RD(this,ND,n||new Promise(((e,n)=>t(e,n,(e=>{r.onCancelList.push(e)})))))}then(e,t){return GD(DD(this,ND).then($D(e,DD(this,LD)),$D(t,DD(this,LD))),DD(this,LD))}catch(e){return GD(DD(this,ND).catch($D(e,DD(this,LD))),DD(this,LD))}finally(e,t){return t&&DD(this,LD).onCancelList.push(e),GD(DD(this,ND).finally($D((()=>{if(e)return t&&(DD(this,LD).onCancelList=DD(this,LD).onCancelList.filter((t=>t!==e))),e()}),DD(this,LD))),DD(this,LD))}cancel(){DD(this,LD).isCanceled=!0;var e=DD(this,LD).onCancelList;for(var t of(DD(this,LD).onCancelList=[],e))if("function"==typeof t)try{t()}catch(e){console.error(e)}}isCanceled(){return!0===DD(this,LD).isCanceled}}class jD extends MD{constructor(e){super({executor:e})}}AD(jD,"all",(function(e){return WD(e,Promise.all(e))})),AD(jD,"allSettled",(function(e){return WD(e,Promise.allSettled(e))})),AD(jD,"any",(function(e){return WD(e,Promise.any(e))})),AD(jD,"race",(function(e){return WD(e,Promise.race(e))})),AD(jD,"resolve",(function(e){return FD(Promise.resolve(e))})),AD(jD,"reject",(function(e){return FD(Promise.reject(e))})),AD(jD,"isCancelable",BD);const UD=jD;function FD(e){return GD(e,VD())}function BD(e){return e instanceof jD||e instanceof MD}function $D(e,t){if(e)return r=>{if(!t.isCanceled){var n=e(r);return BD(n)&&t.onCancelList.push(n.cancel),n}return r}}function GD(e,t){return new MD({internals:t,promise:e})}function WD(e,t){var r=VD();return r.onCancelList.push((()=>{for(var t of e)BD(t)&&t.cancel()})),new MD({internals:r,promise:t})}function VD(){return{isCanceled:!1,onCancelList:[]}}const HD=function(e){return Jy((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(e,t,r){if(!Iu(r))return!1;var n=typeof t;return!!("number"==n?rd(r)&&Fc(t,r.length):"string"==n&&t in r)&&Gu(r[t],e)}(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t}))};var zD=Object.prototype.hasOwnProperty;const qD=HD((function(e,t){if(Qc(t)||rd(t))bS(t,nd(t),e);else for(var r in t)zD.call(t,r)&&SS(e,r,t[r])})),{useRef:YD,useEffect:JD,useMemo:KD,useCallback:XD,useState:QD}=k,ZD=(e,t,r)=>{const n=lT(),o=k.useMemo((()=>{const n=null==e&&null==t&&null==r?[gS]:[e,t,r].filter((e=>null!=e));return qD({},...n)}),[e,t,r]);return XD(((e,t)=>n.formatMessage({id:e,defaultMessage:o[e]},t)),[n,o])},eR=e=>{const t=YD(e);return t.current=e,t},tR=(e,t)=>KD((()=>null==e&&null==t?null:r=>{qg(e,r),qg(t,r)}),[e,t]),rR=e=>{const t=YD(null),r=tR(t,e);return[t,XD((e=>{qg(r,e)}),[r])]},nR=()=>{const e=YD(!0);return e.current?(e.current=!1,!0):e.current},oR=(e,t)=>{const r=nR();JD((()=>{if(!r)return e()}),t)},iR=e=>{JD(e,[])},aR=e=>{const t=YD(e);t.current=e,iR((()=>()=>t.current()))},sR=e=>{const t=k.useRef(e);return JD((()=>{t.current=e})),k.useCallback(((...e)=>(0,t.current)(...e)),[])},lR=({controlled:e,default:t})=>{const{current:r}=YD(void 0!==e),[n,o]=QD(t);return[r?e:n,k.useCallback((e=>{r||o(e)}),[]),r]},uR=e=>X((t=>zg(e,t))),cR=e=>X((t=>{var r,n;return(null===(n=null===(r=t.widgetsRuntimeInfo)||void 0===r?void 0:r[e])||void 0===n?void 0:n.state)===Nl.Active})),dR=()=>X((e=>e.browserSizeMode))===Dl.Small,pR=()=>{const e=YD([]);return JD((()=>function(){e.current.forEach((e=>{e.cancel()})),e.current=[]}),[]),XD((t=>{const r=FD(t);return e.current.push(r),r}),[])},fR=e=>{const t=YD();return JD((()=>{t.current=e})),t.current},hR=(e,t)=>{const r=eR(e),n=eR(t),o=k.useRef(t);k.useEffect((()=>{const e=o.current;r.current(e),o.current=n.current}),t)};var gR=s(5749),mR=s.n(gR),vR=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class yR extends dA{constructor(e){super(e),this.icon=mR(),Uy(this.onDsInfoChange.bind(this),["dataSourcesInfo"])}loadModules(){return vR(this,void 0,void 0,(function*(){const{Popper:e,Switch:t,Label:r,Badge:n,Icon:o,Loading:i}=yield ry("jimu-ui"),{useTheme:a}=yield ry("jimu-theme");this._modules={Popper:e,Switch:t,Label:r,Badge:n,Icon:o,Loading:i,useTheme:a}}))}isSupported(e,t,r){return vR(this,void 0,void 0,(function*(){if(e.length>1)return!1;const r=e[0];this.dsId=r.dataSource.id;const n=t===uA.DataSource&&[Yl.FeatureLayer,Yl.SceneLayer].includes(r.dataSource.type)&&r.dataSource.getStatus()!==Hl.NotReady;return n&&(this._modules||(yield this.loadModules())),n}))}onExecute(e,t,r){return vR(this,void 0,void 0,(function*(){const t=e[0];this._version||(this._version=0);const n=this._modules,{Badge:o,Icon:i}=n,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(n,["Badge","Icon"]),s=Object.assign({name:this.name,version:this._version++,activeRef:document.querySelector(".active-data-action-item"),dataSet:t,widgetId:r},a);return fD(wR,Object.assign({},s))}))}onDsInfoChange(e,t){const r=YT.getInstance(),n=this.dsId&&!(null==t?void 0:t[this.dsId]);r.getStateValue(["dataActions",this.name,this.dsId])&&n&&r.updateStateValue("dataActions",`${this.name}.${this.dsId}`,null)}}const SR={width:335,height:300},bR={width:350,height:444},wR=e=>{const{Popper:t,Switch:r,Label:n,Loading:o,version:i,dataSet:a,name:s,widgetId:l,activeRef:u}=e,{dataSource:c}=a,d=s+"-"+c.id,p=IR(),[f,h]=k.useState(bR),[g,m]=k.useState(!0),v=(e=c.id)=>{var t;return(null===(t=YT.getInstance().getStateValue(["dataActions",s]))||void 0===t?void 0:t[e])||Ae({})},y=v(c.id),[S,b]=k.useState(y.applied||!1),w=fR(S),[I,E]=k.useState(y.expression||null),C=k.useRef(null),[O,x]=k.useState(!1);k.useEffect((()=>{T()}),[]);const T=()=>vR(void 0,void 0,void 0,(function*(){const{SqlExpressionBuilder:e}=yield ry("jimu-ui/advanced/sql-expression-builder");C.current=e,x(!0)}));k.useEffect((()=>{const e=v(c.id);E((null==e?void 0:e.expression)||null),b((null==e?void 0:e.applied)||!1),m(!0)}),[i,c.id]),k.useEffect((()=>{var e,t;const r=!w!=!S;if(S){const e=UE(I,c);A(e,r)}else{const n=null===(t=null===(e=c.getInfo().widgetQueries)||void 0===e?void 0:e[d])||void 0===t?void 0:t.where;n&&""!==n&&A({sql:"",sqlExpression:null},r)}D()}),[S]);const A=(e,t=!1)=>{const r={where:e.sql||"1=1",sqlExpression:e.sql?e.sqlExpression:null};null==c||c.updateQueryParams(r,d),t&&XT.getInstance().publishMessage(new bD(l,[c.id]))},P=()=>{m(!1),D(),setTimeout((()=>{u.focus()}),10)},D=()=>vR(void 0,void 0,void 0,(function*(){const e=v(),t=S&&I,{Badge:r,Icon:n}=yield ry("jimu-ui"),o=fD(r,{color:"primary",dot:!0,hideBadge:!t},fD(n,{icon:mR()})),i=e.set("applied",S).set("expression",I).set("icon",o);YT.getInstance().updateStateValue("dataActions",`${s}.${c.id}`,i)})),R=c.getLabel(),_=C.current;return fD(t,{version:i,floating:!0,open:g,headerTitle:p("dataAction_SetFilter"),onHeaderClose:P,minSize:SR,onResize:e=>{h(e)},dragBounds:"body",defaultSize:f,reference:u,toggle:(e,t)=>{"clickOutside"!==t&&P()}},fD("div",{className:"set-filter-container h-100 p-4"},O?fD(k.Fragment,null,fD(n,{className:"d-flex justify-content-between"},fD("span",{title:R,css:gD`
              overflow: hidden;
              text-overflow: ellipsis;
              display: -webkit-box;
              -webkit-box-orient: vertical;
              word-break: break-word;
              -webkit-line-clamp: 1;
              font-size: ${Pt(14)};
            `},R),fD(r,{checked:S,onChange:()=>{b(!S)}})),fD("div",{className:"mt-4",css:gD`
      height: calc(100% - 40px);
      .sql-expression-list{
        height: calc(100% - 48px) !important;
      }
    `},fD(_,{dataSource:c,mode:nE.Simple,widgetId:d,expression:I,noScrollForList:!0,queryScope:eu.InRuntimeView,onChange:e=>{if(E(e),S){const t=UE(e,c);A(t,!0)}}}))):fD(o,{type:Vl.Secondary})))},IR=()=>{const e=lT();return k.useCallback(((t,r)=>e.formatMessage({id:t,defaultMessage:gS[t]},r)),[e])};const ER={"opening-tour":"OnboardingGuide"};class CR{constructor(){this.guideModules={}}static getInstance(){return CR.instance||(CR.instance=new CR,window._guideManager=CR.instance),CR.instance}registerGuideModule(e,t){this.guideModules[e]||(this.guideModules[e]=t)}getGuideModule(e){return t=this,r=void 0,o=function*(){if(this.guideModules[e])return yield Promise.resolve(this.guideModules[e]);const t=/(^|\/)widgets\//.test(e),r=t?`${e}/dist/guide/guide`:"jimu-ui/basic/guide";return yield ry(r).then((r=>{const n=t?null==r?void 0:r.default:null==r?void 0:r[ER[e]];return this.registerGuideModule(e,n),n}))},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}l((o=o.apply(t,r||[])).next())}));var t,r,n,o}}const OR=e=>!(!e||!e.tagName)&&("BUTTON"===e.tagName||"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||"DIV"===e.tagName&&"true"===e.contentEditable||"SPAN"===e.tagName&&"true"===e.contentEditable||["ANALYSIS-LAYER-INPUT-POPOVER","ARCGIS-ITEM-BROWSER-SEARCH","CALCITE-INPUT-TEXT","CALCITE-LIST"].includes(e.tagName)),xR=e=>{console.log(":keyboard event:",e)},TR=function(e="keydown",t=null){if("undefined"==typeof window)return!1;const r={};let n=null,o=null;null===t&&(t=window.document);const i=!OR(t);function a(e){if(dI(e))return;if(i&&(e=>OR(e.target||e.nativeEvent.target))(e))return;o&&o(e);const t=(e=>{let t="";const r=[];if(navigator.userAgent.includes("Edge")&&-1!==e.key.indexOf("-manual"))t=e.key.replace("-manual","");else if("code"in e)t=pI[e.code]?pI[e.code]:e.code;else{const r=e.which;t=String.fromCharCode(r).toLowerCase(),pI[r]&&(t=pI[r])}return e.metaKey&&r.push("command"),e.ctrlKey&&r.push("Ctrl"),e.shiftKey&&r.push("Shift"),e.altKey&&r.push("Alt"),r.push(t),r.join("+")})(e),a=r[t.toLowerCase()]||[];if("function"==typeof n){const r=a.length>0;n(t,r,e)}a.length&&e.preventDefault();let s=!0;for(let t=a.length-1;t>=0&&(a[t]&&(s=a[t](e)),s);t--);return!!s&&void 0}function s(){t.addEventListener(e,a)}return s(),{subscribe:function(e,t){return(e=e.toLowerCase()).replace(/\s/,""),void 0===r[e]&&(r[e]=[]),r[e].push(t),{unsubscribe:()=>{const n=r[e].indexOf(t);r[e].splice(n,1)}}},setMonitor:function(e=null){n=!0===e?xR:e},startListening:s,stopListening:function(){t.removeEventListener(e,a)},setKeyboardTriggerFunction:function(e){o=e}}};class AR extends k.PureComponent{constructor(e){super(e),this.subs=[],this.keyboardListener=TR(e.eventName,this.props.element),this.props.onKeyboardTrigger&&this.keyboardListener.setKeyboardTriggerFunction(this.props.onKeyboardTrigger)}componentDidMount(){const{bindings:e,monitor:t}=this.props;Object.keys(e).forEach((t=>{const r=e[t],n=this.keyboardListener.subscribe(t,r);this.subs.push(n)})),t&&this.keyboardListener.setMonitor(t)}componentWillUnmount(){this.subs.forEach((e=>e.unsubscribe()))}render(){return null}}AR.defaultProps={eventName:"keydown",bindings:{},monitor:null};const PR=AR;class DR extends k.PureComponent{constructor(){super(...arguments),this.onKeyboardTrigger=e=>{e.key.includes("-manual")||ay().appBuilderSync.letBuilderResponseToKeyboard(e)},this.isMac=()=>{var e,t;return"macOS"===(null===(t=null===(e=window.jimuUA)||void 0===e?void 0:e.os)||void 0===t?void 0:t.name)}}render(){return this.isMac()?k.createElement(PR,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"command+keys":()=>!1}}):k.createElement(PR,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"ctrl+keys":()=>!1}})}}function RR(){const e=X((e=>{var t;return null===(t=e.appInfo)||void 0===t?void 0:t.name})),t=X((e=>{var t;const r=null===(t=e.appConfig)||void 0===t?void 0:t.pages[e.appRuntimeInfo.currentPageId];return r?r.isDefault?null:r.label:null}));return(0,k.useEffect)((()=>{if(e){const r=t?`${t} | ${e}`:e;document.title=r}})),null}function _R(e){const t=X((e=>{var t,r;return null===(r=null===(t=e.appConfig)||void 0===t?void 0:t.attributes)||void 0===r?void 0:r.favicon}));return(0,k.useEffect)((()=>{var r,n,o;const i=document.querySelector('link[rel="shortcut icon"]');if(i)if(null===(r=null==t?void 0:t.properties)||void 0===r?void 0:r.isUploaded)i.href=null===(n=null==t?void 0:t.properties)||void 0===n?void 0:n.path;else{let r=null==t?void 0:t.svg;if(!r)return;let n=null===(o=null==t?void 0:t.properties)||void 0===o?void 0:o.color;const{isCSSVariable:a,getThemeColorValue:s}=Vg();if(a(n)&&(n=s(n,e.themeVariables)),n){const e=(new DOMParser).parseFromString(r,"image/svg+xml");e.querySelectorAll("svg,path").forEach((e=>{e.setAttribute("fill",n)})),r=(new XMLSerializer).serializeToString(e)}const l=new Blob([r],{type:"image/svg+xml"});i.href=window.URL.createObjectURL(l)}}),[t,e.themeVariables]),null}var kR=s(119),LR=s.n(kR);const NR=e=>{const t=window.SVG,{className:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["className"]),o=(0,LI.classNames)("jimu-icon jimu-icon-component",r);return t?LI.React.createElement(t,Object.assign({className:o,src:LR()},n)):LI.React.createElement("svg",Object.assign({className:o},n))};var MR=s(8940),jR=s.n(MR);const UR=e=>{const t=window.SVG,{className:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["className"]),o=(0,LI.classNames)("jimu-icon jimu-icon-component",r);return t?LI.React.createElement(t,Object.assign({className:o,src:jR()},n)):LI.React.createElement("svg",Object.assign({className:o},n))};var FR=s(9964),BR=s.n(FR);const $R=e=>{const t=window.SVG,{className:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["className"]),o=(0,LI.classNames)("jimu-icon jimu-icon-component",r);return t?LI.React.createElement(t,Object.assign({className:o,src:BR()},n)):LI.React.createElement("svg",Object.assign({className:o},n))};function GR(e){return gD`
    .permission-banner-list {
      position: fixed;
      bottom: 2px;
      right: 2px;
      alignItems: stretch;
      flexDirection: column;
      z-index: 999;
      fontSize: 13px;
      .banner-list-panel {
        color: var(--black, #FFF);
        margin-left: 27px;
      }
      .warning-icon {
        position: absolute;
        left: 10px;
        width: 24px;
        height: 24px;
        color: var(--warning-800) !important;
      }
      .banner-list-item {
      }
      .banner-list-item-content {
        display: flex;
        justify-content: space-between; 
        align-items: center;
        margin-bottom: 1px;
        position: relative;
        .item-info {
          flex-grow: 2;
          .fold-btn {
            position: absolute;
            left: -22px;
            .directional {
              width: 8px;
              height: 8px;
              color: var(--dark-600) !important;
            }
          }
        }
        .item-link {
          display: block;
          color: var(--primary-700);
          max-width: 160px;
          white-space: nowrap;
          text-overflow: ellipsis;
          overflow: hidden;
        }
        .item-link.sub-item-link {
          max-width: 315px;
        }
        .item-operation {
          display: flex;
          align-items: center;
        }

        .button-separator {
          height: 18px;
          border-right-width: 1px;
          border-right-style: solid;
          border-right-color: var(--light-800)
        }
      }
      .user-name {
        max-width: 315px;
        font-size: 12px;
        font-style: italic;
        color: var(--dark-400);
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .jimu-btn {
        color: var(--dark-600)
      }
      .jimu-btn: hover {
        background-color: transparent;
        color: var(--primary-300);
      }
      .ignore-all-btn {
        border: 1px solid var(--light-500);
        width: 100%;
        height: 26px;
        margin-top: 10px;
      }
      .left-part {
        display: block !important
      }
    }`}function WR(e){const[t,r]=(0,k.useState)({}),n=(0,k.useCallback)((()=>{rb.getInstance().ignoreFromNoPermissionResourceInfoList()}),[]),o=(0,k.useCallback)(((e,n)=>{const o=Object.assign({},t);o[n]=e,r(o)}),[t]),{Alert:i,Button:a}=ty("jimu-ui"),{theme:s,intl:l}=e,u=function(){const e={},t=rb.getInstance(),r=rb.getInstance().getNoPermissionResourceInfoList();return Object.entries(r).forEach((r=>{const n=r[0],o=r[1];if(!o.ignored){let r;r=t.getServerKeyFromUrl(n)?o.owningSystemUrl?gm(o.owningSystemUrl):nS(n):gm(n),e[r]||(e[r]=[]),r!==n&&e[r].push(n)}})),e}(),c=jy().getState().browserSizeMode===Dl.Small,d=c?"auto":"400px",p=c?"2px":"auto";return fD("div",{css:GR()},fD(i,{form:"basic",type:"info",open:Object.keys(u).length>0,className:"permission-banner-list p-4",closable:!1,withIcon:!1,style:{left:p,width:d,borderColor:`${s.colors.palette.light[500]}`,backgroundColor:`${s.colors.palette.light[300]}`}},fD("div",{className:"banner-list-panel"},fD($R,{className:"warning-icon"}),fD(ST,{id:"signInBannerListWarning",defaultMessage:gS.signInBannerListWarning}),fD("div",{className:"mt-4"},Object.entries(u).map(((e,r)=>{const n=e[0],i=e[1];return fD("div",{key:r},fD(VR,{url:n,resourceUrl:i[0],theme:s,intl:l,key:r,hasSubItems:i.length>0,isUnFold:t[n],foldBtnClick:o}),t[n]&&i.map(((e,t)=>fD(HR,{url:e,theme:s,intl:l,key:t}))))}))),a&&fD(a,{className:"ignore-all-btn",type:"tertiary",size:"sm",onClick:n},e.intl.formatMessage({id:"signInBannerIgnoreAll",defaultMessage:gS.signInBannerIgnoreAll})))))}function VR(e){var t,r;const{url:n,resourceUrl:o,theme:i,intl:a,hasSubItems:s,isUnFold:l,foldBtnClick:u}=e,c=(0,k.useCallback)((()=>{const e=rb.getInstance();let t;t=tS(o)&&nS(o)===n?o:n,e.signInByResourceUrl(t)}),[n,o]),d=(0,k.useCallback)((()=>{rb.getInstance().ignoreFromNoPermissionResourceInfoList(n)}),[n]),p=(0,k.useCallback)((()=>{u(!l,n)}),[n,l,u]),{Button:f}=ty("jimu-ui"),h=(null===(t=rb.getInstance().getSessionByUrl(n))||void 0===t?void 0:t.username)||(null===(r=rb.getInstance().getSessionByUrl(`${n}/rest/services`))||void 0===r?void 0:r.username),g=a.formatMessage({id:"currentData",defaultMessage:"current"}),m=h?a.formatMessage({id:"switch",defaultMessage:"Switch"}):a.formatMessage({id:"signIn",defaultMessage:"Sign in"});return fD("div",{className:"banner-list-item"},fD("div",{className:"banner-list-item-content",css:GR()},fD("div",{className:"item-info"},fD("div",null,s&&f&&fD(f,{className:"fold-btn",size:"sm",type:"tertiary",icon:!0,onClick:p},fD(l?NR:UR,{className:"directional"})),fD("a",{className:"item-link",href:n,target:"_blank",title:n},n))),fD("div",{className:"item-operation"},f&&fD(f,{size:"sm",type:"tertiary",onClick:c},m),fD("div",{className:"button-separator",style:{}}),f&&fD(f,{size:"sm",type:"tertiary",onClick:d},a.formatMessage({id:"signInBannerIgnore",defaultMessage:gS.signInBannerIgnore})))),h&&fD("div",{className:"user-name"},`${g}:${h}`))}function HR(e){const{url:t,theme:r}=e;return fD("div",{className:"banner-list-item-content",css:GR()},fD("a",{className:"item-link sub-item-link",href:t,target:"_blank",title:t},t))}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r},writable:!0,configurable:!0});const zR={w3c:{title:"title",description:"snippet",keywords:"typeKeywords",image_src:"thumbnail"},twitter:{title:"title",description:"snippet",image:"thumbnail"},og:{title:"title",description:"snippet",url:"itemUrl",image:"thumbnail"}};function qR(e){if(e){if(!window.URL||"function"!=typeof window.URL)return function(e){let t=e.split("?");if(1===t.length||0===t[1].length)return e;let r=t[1].split("#");r[1]&&r[1].length?(t[1]=r[0],r=r[1]):r="";const n=t[1].split("&").map((e=>{const t=e.split("=");return"token"==t[0]?[]:t})).reduce(((e,t)=>(e.length&&(e+="&"),t.length&&(e+=t.join("=")),e)),"");let o=t[0];return n&&n.length&&(o+="?"+n),r&&r.length&&(o+="#"+r),o}(e);try{const t=new URL(e);return t.searchParams.has("token")&&t.searchParams.delete("token"),t.toString()}catch(t){return console.log(`can not parse ${e} into a valid URL`),""}}}function YR(e){const t=document.createElement("meta");for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];t.setAttribute(r,n)}document.head.appendChild(t)}function JR(){const e=X((e=>e.appInfo)),t=Am(X((e=>e.portalUrl))),r=X((e=>{var t;const r=null===(t=e.appConfig)||void 0===t?void 0:t.pages[e.appRuntimeInfo.currentPageId];return r?r.isDefault?null:r.label:null}));return(0,k.useEffect)((()=>{if(!e||!e.name)return;const n=r?`${r} | ${e.name}`:e.name;let o=e.set("title",n);o=window.jimuConfig.isOutOfExb?o.set("thumbnail",`${qv()}${o.thumbnail}`):window.jimuConfig.isDevEdition?o.set("thumbnail",`${location.origin}/apps/${e.id}/${o.thumbnail}`):o.set("thumbnail",`${t}/sharing/rest/content/items/${e.id}/info/${e.thumbnail}`),function({profiles:e="w3c,twitter,og",mapping:t,item:r,imageSrc:n,noindex:o}){if(r&&o&&"function"==typeof o&&o(r))return void YR({name:"robots",content:"noindex"});e=e.toLowerCase().split(",").map((e=>e.trim()));const i=function(e){return Object.keys(e).reduce(((t,r)=>(t[r]=Object.assign({},e[r]),t)),{})}(zR);if(n&&(i.w3c.image_src=n,i.twitter.image=n,i.og.image=n),t)for(const e in t)if(t.hasOwnProperty(e)){const r=t[e];i[e]?Object.assign(i[e],r):i[e]=r}e.forEach((e=>{"w3c"==e?function(e,t){if(["title","description","keywords"].forEach((r=>{const n=t[r];let o=e[n];Array.isArray(o)&&(o=o.join(",")),void 0!==o&&YR({name:r,content:o})})),null!=e[t.image_src]){const r=qR(e[t.image_src]);if(""!=r){const e=document.createElement("link");e.setAttribute("rel","image_src"),e.setAttribute("href",r),document.head.appendChild(e)}}}(r,i[e]):"twitter"==e?function(e,t){YR({name:"twitter:card",content:"summary"}),YR({name:"twitter:site",content:"@arcgisonline"});for(const r in t)if(t.hasOwnProperty(r)){const n=t[r];let o="image"==r?qR(e[n]):e[n];Array.isArray(o)&&(o=o.join(",")),void 0!==o&&""!==o&&YR({name:`twitter:${r}`,content:o})}}(r,i[e]):"og"==e?function(e,t){for(const r in t)if(t.hasOwnProperty(r)){const n=t[r];let o="image"==r?qR(e[n]):e[n];Array.isArray(o)&&(o=o.join(",")),void 0!==o&&""!==o&&YR({property:`og:${r}`,content:o})}}(r,i[e]):i[e]&&i[e].insert&&"function"==typeof i[e].insert&&i[e].insert(r,i[e])}))}({item:o})})),null}var KR=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const XR=s(1981).exbVersion;class QR extends k.PureComponent{constructor(e){super(e),this.getKeyboardComponent=()=>{if(window.jimuConfig.isBuilder){const e=ty("jimu-for-builder").BuilderKeyboardComponent;return fD(e,null)}return window.jimuConfig.isInBuilder?fD(DR,null):null},this.renderVersionRemind=()=>{const{isVersionAlertOpened:e}=this.state,{appConfigVersion:t}=this.props,{Alert:r}=this.getJimuUI(),n=jy().getState(),o=null==n?void 0:n.appInfo,i=$e.lt(XR,t);if(window.jimuConfig.isBuilder||!i||!e)return null;const a="Web Experience Template"===(null==o?void 0:o.type);return fD(r,{className:"w-100 position-absolute version-remind",open:e,onClose:this.onVersionRemindClose,closable:!0,style:{zIndex:2}},a?this.props.intl.formatMessage({id:"templateVersionRemind",defaultMessage:gS.templateVersionRemind}):this.props.intl.formatMessage({id:"experienceVersionRemind",defaultMessage:gS.experienceVersionRemind}))},this.onVersionRemindClose=()=>{this.setState({isVersionAlertOpened:!1})},this.onGoToAnotherExperienceBtnClick=()=>{location.href="/"},this.onSwitchAccoutBtnClick=()=>{nb.getInstance().switchAccount()},this.onGoToSignInBtnClick=()=>{var e,t;nb.getInstance().signIn({fromUrl:null===(e=window.location)||void 0===e?void 0:e.href,popup:!1,desUrl:null===(t=jy().getState())||void 0===t?void 0:t.portalUrl})},this.getPortalVersion=e=>(0,qa.WY)(lm(e),{httpMethod:"GET"}).then((e=>Number(null==e?void 0:e.currentVersion))).catch((e=>(console.warn(e),null))),this.setClientIdAndSignIn=(e,t,r)=>{const n=this.clientIdInput.current.value,o=jy().getState().appStateInBuilder;let i=null==o?void 0:o.appConfig,a=(null==i?void 0:i.connections)||[];if(n&&i){const r=nb.getInstance(),o=ty("jimu-for-builder").builderAppSync;this.getPortalVersion(e).then((s=>{var l;if(a=a.concat([{type:"portal",portalUrl:e,clientId:n,portalVersion:s}]),t)return null==r?void 0:r.signIn({fromUrl:null===(l=window.location)||void 0===l?void 0:l.href,popup:!0,desUrl:e,clientId:n}).then((t=>KR(this,void 0,void 0,(function*(){i=i.set("connections",a),o.publishAppConfigChangeToApp(i),jy().dispatch(Yw(e)),r.onClientIdDialogFinished(e,n)})))).catch((t=>{console.warn("sign in faild from set client id dialog."),jy().dispatch(Yw(e)),r.onClientIdDialogFinished(e,n,t)}));i=i.set("connections",a),o.publishAppConfigChangeToApp(i),jy().dispatch(Yw(e)),r.onClientIdDialogFinished(e,n)}))}},this.closeSetClientIdAlert=e=>{ty("jimu-for-builder").builderAppSync.publishSetClientIdAlertIsCancelled(e),jy().dispatch(Yw(e)),nb.getInstance().onClientIdDialogFinished(e,null,new Error("setting clientId is cancelled."))};const t={},r=this.getPageId();t.pageStatus=Ae(r?{[r]:!0}:{}),t.preloadWidgetsLoaded=!1,t.isVersionAlertOpened=!0,this.state=t,this.onDismiss=this.onDismiss.bind(this),this.reload=this.reload.bind(this),this.setClientIdAndSignIn=this.setClientIdAndSignIn.bind(this),this.clientIdInput=k.createRef(),Sb.getInstance()}getLayoutEntryPath(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",e}getPageRenderClass(){return ty(this.getLayoutEntryPath())?ty(this.getLayoutEntryPath()).PageRenderer:(console.error("Please init jimu-layouts."),null)}getJimuUI(){return ty("jimu-ui")?ty("jimu-ui"):(console.error("Please init jimu-ui."),null)}componentDidMount(){aA.getInstance({intl:this.props.intl}).loadAppConfig().then((e=>(this.props.dispatch(wb(e)),e))).then((e=>{const t=kv(this.props.queryObject,e);return Object.keys(t).forEach((e=>{this.props.dispatch(Fw(e,t[e]))})),this.props.dispatch(Ew(this.getPageId())),this.addA11yKeyboardEvent(e,this.props.queryObject),e})).then((e=>{this.loadPreloadWidgets(e).then((()=>{Pg(),window.jimuConfig.isInBuilder&&(Sb.getInstance().createAllDataSources(),jI.getInstance())})).catch((e=>{console.error("Initializing theme manager failed.",e),this.props.dispatch(Ib({message:(null==e?void 0:e.message)||"",type:"ArcGISAuthError"===(null==e?void 0:e.name)?e.name:"CommonError",code:null==e?void 0:e.code}))}))})).catch((e=>{console.error("Load app config error.",e),this.props.dispatch(Ib({message:(null==e?void 0:e.message)||"",type:"ArcGISAuthError"===(null==e?void 0:e.name)?e.name:"CommonError",code:null==e?void 0:e.code}))}))}componentWillUnmount(){const e=document.getElementById("jimu-base-style");e&&e.remove()}loadPreloadWidgets(e){var t;return KR(this,void 0,void 0,(function*(){const r=[],n=(null===(t=e.preloadWidgets)||void 0===t?void 0:t.asMutable())||[];return Object.keys(e.widgets).forEach((t=>{const o=e.widgets[t];r.includes(o.uri)&&!n.includes(o.uri)&&n.push(o.uri)})),0===n.length?(this.setState({preloadWidgetsLoaded:!0}),Promise.resolve()):Promise.all(n.map((e=>KR(this,void 0,void 0,(function*(){return yield nA.getInstance().loadWidgetClassByUri(e)}))))).then((()=>{this.setState({preloadWidgetsLoaded:!0})}))}))}componentDidUpdate(){const e=this.getPageId();let t=this.state.pageStatus;e&&!t[e]&&(Object.keys(t).forEach((e=>{t=t.set(e,!1)})),this.setState({pageStatus:t.set(e,!0)}))}addA11yKeyboardEvent(e,t){var r;if(window.jimuConfig.isInBuilder){const e=document.body;e.setAttribute("tabindex","0"),e.style.outlineOffset="-2px",e.addEventListener("keydown",(e=>{"BODY"!==e.target.tagName&&!e.target.classList.contains("app-dialog-modal")||"Tab"!==e.key||e.shiftKey||jy().getState().appRuntimeInfo.appMode!==Ll.Design||(e.preventDefault(),window.parent.document.querySelector("div.builder-dynamic-setting .jimu-btn").focus())}))}else if(!window.jimuConfig.isBuilder&&window.location!==(null===(r=window.parent)||void 0===r?void 0:r.location)&&"true"===(null==t?void 0:t.disable_window_focus)&&e.dialogs){const e=document.body;e.setAttribute("tabindex","0"),e.addEventListener("focus",(t=>{if("BODY"===t.target.tagName){e.setAttribute("tabindex","-1");const r=document.querySelectorAll(".app-dialog-modal");r.length&&(t.preventDefault(),r[r.length-1].focus())}}))}}getPageId(){if(!this.props.pages)return null;const e=Lv();return e.pageId?e.pageId:Object.keys(this.props.pages).find((e=>this.props.pages[e].isDefault))}getDialogId(){return this.props.dialogJson&&(window.jimuConfig.isInBuilder||this.props.dialogJson.mode!==rm.Anchored)?window.jimuConfig.isInBuilder&&this.props.dialogJson.mode===rm.Anchored&&this.props.currentDialogId&&this.props.currentDialogId!==Uv(this.props.queryObject.dlg,jy().getState().appConfig)?null:this.props.dialogJson.id:null}render(){var e,t;const{pageStatus:r}=this.state,n=this.getPageRenderClass(),o=this.getJimuUI();if(this.props.loadAppConfigError){if(Pg(),"ArcGISAuthError"===(null===(e=this.props.loadAppConfigError)||void 0===e?void 0:e.type))return this.renderPrivilegeError();{let e=null===(t=this.props.loadAppConfigError)||void 0===t?void 0:t.message;if("notPublishError"===e){const e=this.props.intl.formatMessage({id:"notPublishError",defaultMessage:gS.notPublishError});return fD("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:e}})}{const t=e.indexOf("token=");return t>-1&&(e=e.substring(0,t-1)),fD("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},e)}}}if(!this.props.hasPrivilege)return Pg(),this.renderPrivilegeError();if(!this.props.appConfigLoaded||!n||!this.state.preloadWidgetsLoaded||Ad(this.props.themeVariables,{}))return null;const i=this.getPageId();if(!i)return console.error("No page to render."),null;if(!this.props.pages[i])return console.error("Invalid page id.",i),null;if(this.props.pages[i].type===em.Folder)return console.error("This is a folder."),null;if(this.props.pages[i].linkUrl)return window.location.assign(this.props.pages[i].linkUrl),null;const a=o.Loading;return fD(k.Fragment,null,fD(RR,null),fD(_R,{themeVariables:this.props.themeVariables}),fD(JR,null),this.renderReloadAlert(this.props.themeVariables),this.renderSetClientIdAlert(this.props.themeVariables),this.renderVersionRemind(),this.renderPermissionBannerList(this.props.themeVariables),fD(n,{pageStatus:r,dialogId:this.getDialogId()}),fD("div",{id:"helper-nodes-container"}),this.getKeyboardComponent(),a&&this.props.isBusy&&fD(a,{type:this.props.loadingType}))}renderPrivilegeError(){const{Button:e}=this.getJimuUI(),t=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"white":"black",r=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"#232323":"#f0f0f0";document.getElementById("app").style.zIndex="800";const n={padding:"0.25rem 1rem",fontSize:"14px",userSelect:"none",lineHeight:1.5,borderRadius:"2px",color:"#fff",background:"#007f94",borderWidth:"1px",borderStyle:"solid",borderColor:"#007f94",marginTop:"20px",outline:"none",minWidth:"241px",height:"49px",margin:"79px 35px",cursor:"pointer"},o="INVALID_TOKEN"===this.props.privilegeError,i=o?this.props.intl.formatMessage({id:"signInErrorInvalidToken",defaultMessage:gS.signInErrorInvalidToken}):this.props.privilegeError;return fD("div",{id:"privilegeError",style:{width:"100vw",height:"100vh",color:t,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"20px",backgroundColor:r}},fD("div",{id:"foo",dangerouslySetInnerHTML:{__html:i}}),fD("div",{style:{display:"flex"}},e&&!o&&fD(e,{size:"lg",style:n,onClick:this.onGoToAnotherExperienceBtnClick},this.props.intl.formatMessage({id:"goToAnotherExperienceBtn",defaultMessage:gS.goToAnotherExperienceBtn})),!window.jimuConfig.isInPortal&&!o&&e&&fD(e,{size:"lg",style:n,onClick:this.onSwitchAccoutBtnClick},this.props.intl.formatMessage({id:"switchAccoutBtn",defaultMessage:gS.switchAccoutBtn})),e&&o&&fD(e,{size:"lg",style:n,onClick:this.onGoToSignInBtnClick},this.props.intl.formatMessage({id:"signIn",defaultMessage:"Sign in"}))))}renderSetClientIdAlert(e){if(!window.jimuConfig.isBuilder)return null;const t=this.props.portalsNeedToRegisterClinetId&&this.props.portalsNeedToRegisterClinetId[0],r=null==t?void 0:t.portalUrl;if(!r)return null;const{AlertPopup:n,TextInput:o}=this.getJimuUI(),i=this.props.intl.formatMessage({id:"setClientIdMessage1",defaultMessage:gS.setClientIdMessage1},{register:this.props.intl.formatMessage({id:"registerText",defaultMessage:gS.registerText})});return fD(n,{isOpen:!0,title:"",onClickOk:()=>{this.setClientIdAndSignIn(r,null==t?void 0:t.needToSignIn,null==t?void 0:t.serviceUrl)},onClickClose:()=>{this.closeSetClientIdAlert(r)}},fD("div",{style:{color:`${e.colors.black}`,fontSize:`${Pt(16)}`}},fD("p",null,i),fD("p",null,fD(ST,{id:"arcgisEnterpriseText",defaultMessage:gS.arcgisEnterpriseText})),fD("p",{style:{color:`${e.colors.palette.dark[300]}`}},r),fD("p",null,fD(ST,{id:"setClientIdMessage2",defaultMessage:gS.setClientIdMessage2})),fD(o,{css:gD`.input-wrapper {background-color: var(--light-300)}`,ref:this.clientIdInput})))}renderReloadAlert(e){if(window.jimuConfig.isInBuilder||window.jimuConfig.isSite&&"landing"===this.getPageId())return null;if(!this.props.userLocaleChanged)return null;const{Alert:t,Button:r}=this.getJimuUI();return fD(t,{form:"basic",type:"info",open:this.props.userLocaleChanged,onClose:this.onDismiss,className:"pl-4 pr-4",closable:!0,style:{position:"absolute",zIndex:999,width:"100%",paddingTop:`${Pt(11)}`,paddingBottom:`${Pt(11)}`,backgroundColor:`${e.colors.palette.primary[100]}`,color:`${e.colors.black}`,fontSize:`${Pt(16)}`}},fD(ST,{id:"userLocaleChangeMsg",defaultMessage:gS.userLocaleChangeMsg}),fD(r,{size:"sm",type:"primary",className:"ml-4",onClick:this.reload,style:{minWidth:`${Pt(78)}`,height:`${Pt(26)}`,marginTop:`${Pt(-2)}`}},fD(ST,{id:"doUpdate",defaultMessage:gS.doUpdate})))}renderPermissionBannerList(e){return window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||!e?null:fD(WR,{noPermissionResourceChangedFlag:this.props.noPermissionResourceChangedFlag,theme:e,intl:this.props.intl})}onDismiss(){var e;this.props.dispatch(Hw(!1)),window.jimuConfig.isBuilder&&(null===(e=window._appWindow)||void 0===e?void 0:e._appStore)&&(window._appWindow._appStore.dispatch({type:"SET_HAS_NEW_VERSION",hasNew:!1}),window._appWindow._appStore.dispatch({type:"USER_LOCALE_CHANGED",isChanged:!1}))}reload(){window.location.reload()}}const ZR=jh(be((e=>{var t;return e.appConfig?{appConfigLoaded:!0,customTheme:e.appConfig.customTheme,pages:e.appConfig.pages,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,isBusy:e.appRuntimeInfo.isBusy,loadingType:e.appRuntimeInfo.loadingType,dialogJson:e.appConfig.dialogs?e.appConfig.dialogs[Uv(e.queryObject.dlg,e.appConfig)]:null,currentDialogId:e.appRuntimeInfo.currentDialogId,userLocaleChanged:e.userLocaleChanged,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,portalsNeedToRegisterClinetId:e.portalsNeedToRegisterClinetId,noPermissionResourceChangedFlag:e.noPermissionResourceChangedFlag,loadAppConfigError:null,appConfigVersion:null===(t=e.appConfig)||void 0===t?void 0:t.exbVersion}:{appConfigLoaded:!1,customTheme:null,pages:null,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,loadingType:null,isBusy:e.appRuntimeInfo.isBusy,dialogJson:null,currentDialogId:null,userLocaleChanged:!1,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,portalsNeedToRegisterClinetId:e.portalsNeedToRegisterClinetId,noPermissionResourceChangedFlag:e.noPermissionResourceChangedFlag,loadAppConfigError:e.loadAppConfigError,appConfigVersion:null}}))((e=>{var t,r;const n=null===(r=null===(t=Vg())||void 0===t?void 0:t.useTheme)||void 0===r?void 0:r.call(t);return fD(QR,Object.assign({},e,{themeVariables:n}))})));class e_ extends k.Component{constructor(e){super(e),this.state={error:null}}componentDidCatch(e,t){this.setState({error:e})}render(){return this.state.error?k.createElement("h1",null,this.state.error.message):this.props.children}}const{useEffect:t_}=k,r_="jimu-keyboard-nav",n_="jimu-interactive-node";function o_(e){if(i_(document.body,e),window.jimuConfig.isBuilder){const t=document.querySelector(`iframe[name="${Gl}"]`);i_((null==t?void 0:t.contentDocument.body)||(null==t?void 0:t.contentWindow.document.body),e)}else window.jimuConfig.isInBuilder&&i_(window.parent.document.body,e)}function i_(e,t){e&&(t?e.classList.add(r_):e.classList.remove(r_))}function a_(){return document.body.classList.contains(r_)}function s_(e){return t_((()=>{function e(){a_()&&o_(!1)}function t(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e(),r())}function r(){document.removeEventListener("mousedown",t),document.removeEventListener("mouseup",t),document.removeEventListener("pointerdown",t),document.removeEventListener("pointerup",t),document.removeEventListener("touchmove",t),document.removeEventListener("touchstart",t),document.removeEventListener("touchend",t)}function n(e){"Tab"===e.key&&(a_()||o_(!0))}return document.addEventListener("keydown",n,!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("pointerdown",t),document.addEventListener("pointerup",t),document.addEventListener("touchmove",t),document.addEventListener("touchstart",t),document.addEventListener("touchend",t),()=>{document.removeEventListener("keydown",n,!0),document.removeEventListener("mousedown",e,!0),document.removeEventListener("pointerdown",e,!0),document.removeEventListener("touchstart",e,!0),r()}}),[]),k.createElement(k.Fragment,null,e.children)}const l_=be((e=>({locale:e.appContext.locale,defaultLocale:e.appContext.locale,messages:e.appI18nMessages})))(Wh);function u_(){const e=k.useMemo((()=>{var e;return null===(e=Vg())||void 0===e?void 0:e.ThemeManager}),[]);return k.createElement(we,{store:jy()},k.createElement(e_,null,k.createElement(mx,null,k.createElement(l_,null,k.createElement(e,null,k.createElement(s_,null,k.createElement(ZR,null)))))))}const c_=["widgetQueries","sourceVersion","gdbVersion","needRefresh"];class d_ extends k.PureComponent{componentDidMount(){var e,t,r,n;if(this.createDataSource(),this.props.dataSource&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),(null===(e=this.props.dataSource)||void 0===e?void 0:e.isDataSourceSet)&&this.props.onAllChildDataSourcesCreated&&this.props.dataSource.childDataSourcesReady().then((()=>{this.props.onAllChildDataSourcesCreated(this.props.dataSource)})),this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo),!this.props.query&&this.props.dataSourceInfo&&this.props.onQueryRequired){const e=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,null,this.props.belongToDataSourceInfo,null,this.props.belongToBelongToDataSourceInfo,null);(e.queryRequiredInfo||e.prevQueryRequiredInfo)&&this.props.onQueryRequired(e.queryRequiredInfo)}(null===(r=null===(t=this.props.dataSourceInfo)||void 0===t?void 0:t.selectedIds)||void 0===r?void 0:r.length)>0&&this.props.onSelectionChange&&this.props.onSelectionChange(this.props.dataSourceInfo.selectedIds),(null===(n=this.props.dataSourceInfo)||void 0===n?void 0:n.status)&&this.props.onDataSourceStatusChange&&this.props.onDataSourceStatusChange(this.props.dataSourceInfo.status),this.doQuery()}componentDidUpdate(e){var t,r,n,o,i,a,s,l,u;if(this.createDataSource(),(!e.dataSource&&this.props.dataSource||e.dataSource&&this.props.dataSource&&e.dataSource.id!==this.props.dataSource.id)&&(this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),this.props.onAllChildDataSourcesCreated&&this.props.dataSource.isDataSourceSet&&this.props.dataSource.childDataSourcesReady().then((()=>{this.props.onAllChildDataSourcesCreated(this.props.dataSource)}))),e.dataSourceInfo!==this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo,e.dataSourceInfo),(e.dataSourceInfo!==this.props.dataSourceInfo||e.belongToDataSourceInfo!==this.props.belongToDataSourceInfo||e.belongToBelongToDataSourceInfo!==this.props.belongToBelongToDataSourceInfo)&&!this.props.query&&this.props.onQueryRequired){const t=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,e.dataSourceInfo,this.props.belongToDataSourceInfo,e.belongToDataSourceInfo,this.props.belongToBelongToDataSourceInfo,e.belongToBelongToDataSourceInfo);(t.queryRequiredInfo||t.prevQueryRequiredInfo)&&this.props.onQueryRequired(t.queryRequiredInfo,t.prevQueryRequiredInfo)}e.dataSourceSchema!==this.props.dataSourceSchema&&this.props.onDataSourceSchemaChange&&this.props.onDataSourceSchemaChange(this.props.dataSourceSchema,e.dataSourceSchema),(null===(t=e.dataSourceInfo)||void 0===t?void 0:t.selectedIds)!==(null===(r=this.props.dataSourceInfo)||void 0===r?void 0:r.selectedIds)&&this.props.onSelectionChange&&this.props.onSelectionChange(null===(n=this.props.dataSourceInfo)||void 0===n?void 0:n.selectedIds,null===(o=e.dataSourceInfo)||void 0===o?void 0:o.selectedIds),(null===(i=e.dataSourceInfo)||void 0===i?void 0:i.status)!==(null===(a=this.props.dataSourceInfo)||void 0===a?void 0:a.status)&&this.props.onDataSourceStatusChange&&this.props.onDataSourceStatusChange(null===(s=this.props.dataSourceInfo)||void 0===s?void 0:s.status,null===(l=e.dataSourceInfo)||void 0===l?void 0:l.status),e.forceRefreshVersion!==this.props.forceRefreshVersion&&"number"==typeof this.props.forceRefreshVersion&&(null===(u=this.props.dataSource)||void 0===u||u.addSourceVersion()),this.doQuery(),this.handleAutoRefresh()}render(){const{useDataSource:e,dataSource:t,dataSourceInfo:r,children:n,query:o,errorString:i}=this.props;return e&&r?r.instanceStatus===Hl.CreateError?null!=i?i:null:t&&n?"function"==typeof n?n(t,r,o):n:null:null}doQuery(){if(!this.props.dataSource)return;const{dataSource:e,query:t,queryCount:r,widgetId:n,localId:o,queryScope:i}=this.props,a=e;if(!a.load||!a.query)return;if(!t)return;const s={widgetId:n||o,scope:i};if(a.load(t,s),r){const e=Object.assign({},t);a.loadCount(e,s)}}handleAutoRefresh(){if(!this.props.dataSource)return;const e=this.props.dataSource;e.stopAutoRefresh&&e.startAutoRefresh&&((window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder)&&this.props.appMode===Ll.Design?e.stopAutoRefresh():e.startAutoRefresh())}createDataSource(){this.props.useDataSource&&this.props.dataSourceManager.createDataSourceByUseDataSource(this.props.useDataSource,this.props.localId).then((e=>{})).catch((e=>{this.props.dataSource||e.dataSourceId!==this.props.useDataSource.dataSourceId&&e.dataSourceId!==this.props.useDataSource.rootDataSourceId&&e.dataSourceId!==this.props.useDataSource.mainDataSourceId||this.props.onCreateDataSourceFailed&&this.props.onCreateDataSourceFailed(e)}))}getChangedQueryRequiredInfo(e,t,r,n,o,i){const a=c_.filter((e=>"needRefresh"!==e)),s=this.getChangedInfo(e,t,c_),l=this.getChangedInfo(r,n,a),u=this.getChangedInfo(o,i,a),c={queryRequiredInfo:null,prevQueryRequiredInfo:null},d=this.getDsAndBelongToDsIds();return this.setChangedInfoToResult(d.dsId,s.info,!1,c),this.setChangedInfoToResult(d.belongToDsId,l.info,!1,c),this.setChangedInfoToResult(d.belongToBelongToDsId,u.info,!1,c),this.setChangedInfoToResult(d.dsId,s.prevInfo,!0,c),this.setChangedInfoToResult(d.belongToDsId,l.prevInfo,!0,c),this.setChangedInfoToResult(d.belongToBelongToDsId,u.prevInfo,!0,c),c}setChangedInfoToResult(e,t,r,n){if(e&&t){const o=r?"prevQueryRequiredInfo":"queryRequiredInfo";n[o]||(n[o]={}),n[o][e]=t}}getChangedInfo(e,t,r){const n={};return null==r||r.forEach((r=>{(null==e?void 0:e[r])!==(null==t?void 0:t[r])&&(n.info=n.info?n.info.set(r,null==e?void 0:e[r]):Ae({[r]:null==e?void 0:e[r]}),n.prevInfo=n.prevInfo?n.prevInfo.set(r,null==t?void 0:t[r]):Ae({[r]:null==t?void 0:t[r]}))})),n}getDsAndBelongToDsIds(){var e,t,r,n,o,i;return{dsId:null===(e=this.props.dataSource)||void 0===e?void 0:e.id,belongToDsId:null===(r=null===(t=this.props.dataSource)||void 0===t?void 0:t.belongToDataSource)||void 0===r?void 0:r.id,belongToBelongToDsId:null===(i=null===(o=null===(n=this.props.dataSource)||void 0===n?void 0:n.belongToDataSource)||void 0===o?void 0:o.belongToDataSource)||void 0===i?void 0:i.id}}}const p_=be(((e,t)=>{var r,n;const o=Sb.getInstance(),i=window.jimuConfig.isBuilder?e.appStateInBuilder:e;if(!i||!t.useDataSource&&!t.dataSource)return{dataSourceInfo:null,dataSourceJson:null,dataSourceSchema:null,rootDataSourceJson:null,dataSource:null,dataSourceManager:o,belongToDataSourceInfo:null,appMode:null};const a=t.dataSource?hO(t.dataSource):t.useDataSource,s=fO(a,t.localId),l=o.getDataSource(a.rootDataSourceId);let u=o.getDataSource(s);return a.rootDataSourceId&&!l&&(u=null),{dataSourceInfo:i.dataSourcesInfo[s],dataSourceJson:(null==u?void 0:u.getDataSourceJson())||i.appConfig.dataSources[a.mainDataSourceId],dataSourceSchema:(null==u?void 0:u.getSchema())||(null===(r=i.appConfig.dataSources[a.mainDataSourceId])||void 0===r?void 0:r.schema),rootDataSourceJson:(null==l?void 0:l.getDataSourceJson())||i.appConfig.dataSources[a.rootDataSourceId],dataSource:u,dataSourceManager:o,belongToDataSourceInfo:(null==u?void 0:u.isDataView)||(null==u?void 0:u.isLocal)?i.dataSourcesInfo[u.belongToDataSource.id]:null,belongToBelongToDataSourceInfo:(null==u?void 0:u.isLocal)&&(null===(n=u.belongToDataSource)||void 0===n?void 0:n.isDataView)?i.dataSourcesInfo[u.belongToDataSource.belongToDataSource.id]:null,appMode:i.appRuntimeInfo.appMode}}))(d_),f_=p_;class h_ extends k.PureComponent{constructor(){super(...arguments),this.handleDataSourceCreated=()=>{const{onDataSourceCreated:e=(()=>{})}=this.props;e(this.getDataSources())},this.handleDataSourceInfoChange=()=>{const{onDataSourceInfoChange:e=(()=>{})}=this.props;e(this.getDataSourcesInfo())},this.getDataSources=()=>{const{useDataSources:e=[]}=this.props,t={},r=Sb.getInstance();return e.forEach((e=>{t[e.dataSourceId]=r.getDataSource(e.dataSourceId)})),t},this.getDataSourcesInfo=()=>{const{useDataSources:e=[]}=this.props,t={};return e.forEach((e=>{t[e.dataSourceId]=this.props[e.dataSourceId]})),t},this.hasLoadedDataSources=()=>{const{useDataSources:e=[]}=this.props,t=this.getDataSources();return e.every((e=>!!t[e.dataSourceId]))},this.MemoDataSourceComponents=k.memo((({useDataSources:e,queries:t,widgetId:r,localId:n})=>e?k.createElement(k.Fragment,null,e.asMutable().map(((e,o)=>k.createElement(f_,{key:o,useDataSource:e,query:null==t?void 0:t[e.dataSourceId],widgetId:r,localId:n,onDataSourceCreated:this.handleDataSourceCreated,onDataSourceInfoChange:this.handleDataSourceInfoChange})))):null))}render(){const{useDataSources:e,queries:t,widgetId:r,localId:n,children:o}=this.props,i=this.MemoDataSourceComponents,a=k.createElement(i,{useDataSources:e,queries:t,widgetId:r,localId:n});return o?k.createElement(k.Fragment,null,a,"function"==typeof o?o(this.getDataSources(),this.getDataSourcesInfo()):o):a}}const g_=be(((e,t)=>{const r={},n=window.jimuConfig.isBuilder?e.appStateInBuilder:e;return t.useDataSources&&t.useDataSources.forEach((e=>{const o=fO(e,t.localId);Sb.getInstance().getDataSource(o)&&(r[o]=n.dataSourcesInfo[o])})),r}))(h_);var m_,v_=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.Failed="RESOLVE_FAILED",e.NotMatched="DATA_SOURCES_IN_EXPRESSION_CANNOT_MATCH_DATA_SOURCES_IN_USE"}(m_||(m_={}));class y_ extends k.PureComponent{constructor(e){super(e),this.dataSources=null,this.__unmount=!1,this.__resolveCount=1,this.getWhetherExpressionsAreSame=(e,t)=>Ad(e,t),this.getWhetherDsInfosAreSame=(e,t,r)=>{if(!r)return!0;if(e||t){if(e&&t){if(Object.keys(e).length!==Object.keys(t).length)return!1;{const n=this.getUseSelectionDsIdsFromExpression(r).map((e=>{var t;return null===(t=Sb.getInstance().getDataSource(e))||void 0===t?void 0:t.getMainDataSource()}));return!Object.keys(e).some((r=>{var o,i;const a=Sb.getInstance().getDataSource(r);return!(a&&n.some((e=>(null==e?void 0:e.id)===a.getMainDataSource().id))?Ad(e[r],t[r]):Ad(null===(o=e[r])||void 0===o?void 0:o.without("selectedIds"),null===(i=t[r])||void 0===i?void 0:i.without("selectedIds")))}))}}return!1}return!0},this.getUseSelectionDsIdsFromExpression=e=>{const t=this.getWhetherIsMultipleExpression(e);let r=[];if(!e)return r;if(t){const t=e;Object.keys(t).forEach((e=>{r=r.concat(this.getUseSelectionDsIdsFromSingleExpression(t[e]))}))}else r=r.concat(this.getUseSelectionDsIdsFromSingleExpression(e));return Array.from(new Set(r))},this.getUseSelectionDsIdsFromSingleExpression=e=>{let t=[];return e&&e.parts?(e.parts.forEach((e=>{bO(null==e?void 0:e.dataSourceId)&&(t=t.concat(e.dataSourceId))})),Array.from(new Set(t))):t},this.getWhetherUseDssAreSame=(e,t)=>!e&&!t||!(!e||!t)&&e.length===t.length&&!e.some(((r,n)=>{var o,i;return!Ad(null===(o=e[n])||void 0===o?void 0:o.without("fields"),null===(i=t[n])||void 0===i?void 0:i.without("fields"))})),this.getWhetherIsMultipleExpression=e=>!(!e||Object.keys(e).includes("name")&&Object.keys(e).includes("parts")&&Array.isArray(e.parts)),this.resolveExpressions=(e,t,r,n)=>v_(this,void 0,void 0,(function*(){if(!e)return yield Promise.resolve("");if(this.getWhetherIsMultipleExpression(e)){const o=e;Object.keys(o).forEach((e=>{this.resolveSingleExpression(o[e],t,r).then((t=>{const r=this.resultsCache;this.__unmount||n!==this.__resolveCount||(this.resultsCache=Object.assign(Object.assign({},r),{[e]:{isSuccessful:!0,value:t}}),this.setState({results:this.resultsCache}))})).catch((t=>{const r=this.resultsCache;this.__unmount||n!==this.__resolveCount||(this.resultsCache=Object.assign(Object.assign({},r),{[e]:{isSuccessful:!1,value:t}}),this.setState({results:this.resultsCache}))}))}))}else this.resolveSingleExpression(e,t,r).then((e=>{this.__unmount||n!==this.__resolveCount||(this.resultsCache={isSuccessful:!0,value:e},this.setState({results:this.resultsCache}))})).catch((e=>{this.__unmount||n!==this.__resolveCount||(this.resultsCache={isSuccessful:!1,value:e},this.setState({results:this.resultsCache}))}))})),this.resolveSingleExpression=(e,t,r)=>v_(this,void 0,void 0,(function*(){const n=this.getWhetherExpressionDssInUseDss(e,t),o=r&&this.getWhetherExpressioniDssInRecords(e,r);return n||o?yield qx(e,r,this.props.repeatedDataSource).catch((e=>v_(this,void 0,void 0,(function*(){return yield Promise.reject(m_.Failed)})))):yield Promise.reject(m_.NotMatched)})),this.onDataSourceCreated=e=>{if(this.dataSources=e,e){const t={};Object.keys(e).forEach((r=>{r&&e[r]&&(t[r]=e[r].getInfo())})),this.setState({infos:t})}},this.onDataSourceInfoChange=e=>{this.getWhetherDsInfosAreSame(e,this.state.infos,this.props.expression)||this.setState({infos:e})},this.getWhetherExpressionDssInUseDss=(e,t)=>!e||!e.parts||!e.parts.some((e=>e&&e.dataSourceId&&!this.getWhetherDsIdInUseDss(e.dataSourceId,t))),this.getWhetherDsIdInUseDss=(e,t)=>{if(!e)return!1;if(e.split("-").reverse()[0]===Nd){const r=e.replace(/-dataView_\d{1,}/,"").replace(`-${Nd}`,"");return null==t?void 0:t.some((e=>e.mainDataSourceId===r))}return null==t?void 0:t.some((t=>t.dataSourceId===e))},this.getWhetherExpressioniDssInRecords=(e,t)=>!e||!e.parts||!e.parts.some((e=>(null==e?void 0:e.dataSourceId)&&!(null==t?void 0:t[e.dataSourceId]))),this.getLocalDataSources=e=>{let t=Ae([]);return e&&0!==e.length?(e.forEach((e=>{const r=Sb.getInstance().getDataSource(e.dataSourceId);r&&r.getAllDerivedDataSources().forEach((e=>{var n;if((null==e?void 0:e.isLocal)&&(null===(n=null==e?void 0:e.id)||void 0===n?void 0:n.includes(`${r.id}-${Dx}`))){const r=e.getRootDataSource(),n=e.getMainDataSource();t=t.concat({dataSourceId:e.id,rootDataSourceId:r&&r.id,mainDataSourceId:n&&n.id,dataViewId:e.dataViewId})}}))})),t):t},this.getQueries=(e,t)=>{const r={};if(!e||!t)return r;const n=this.getWhetherIsMultipleExpression(t)?Object.values(t):[t];let o=[];return n.forEach((e=>{var t;(null===(t=null==e?void 0:e.parts)||void 0===t?void 0:t.length)>0&&(o=o.concat(Wx(e.parts)))})),e.filter((e=>!!e)).filter((e=>e.dataViewId!==Nd&&o.some((t=>t.dataSourceId===e.dataSourceId&&t.type===xx.Field&&!t.isFromRepeatedDataSourceContext)))).forEach((e=>{r[e.dataSourceId]={}})),r},this.state={results:null,infos:null,allUseDataSources:this.props.useDataSources&&this.getAllUseDataSources(this.props.useDataSources,this.props.expression),queries:this.props.useDataSources&&this.getQueries(this.props.useDataSources,this.props.expression)}}componentDidMount(){this.__unmount=!1,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.props.records,this.__resolveCount)}componentWillUnmount(){this.__unmount=!0}componentDidUpdate(e,t){this.state.infos===t.infos&&this.props.records===e.records&&this.getWhetherExpressionsAreSame(this.props.expression,e.expression)&&this.getWhetherUseDssAreSame(this.props.useDataSources,e.useDataSources)||(this.__resolveCount++,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.props.records,this.__resolveCount)),t.results!==this.state.results&&null!==this.state.results&&this.props.onChange&&this.props.onChange(this.state.results),this.props.useDataSources&&((this.getWhetherNewLocalDssCreated(t.results,this.state.results)||e.useDataSources!==this.props.useDataSources||e.expression!==this.props.expression)&&this.setState({allUseDataSources:this.getAllUseDataSources(this.props.useDataSources,this.props.expression)}),e.useDataSources===this.props.useDataSources&&e.expression===this.props.expression||this.setState({queries:this.getQueries(this.props.useDataSources,this.props.expression)}))}getWhetherNewLocalDssCreated(e,t){if(this.getWhetherIsMultipleExpression(this.props.expression)){const r=!e||Object.values(e).some((e=>"object"==typeof e&&!(null==e?void 0:e.isSuccessful))),n=t&&!Object.values(t).some((e=>"object"==typeof e&&!(null==e?void 0:e.isSuccessful)));return r&&n}{const r=!e||!e.isSuccessful,n=t&&t.isSuccessful;return r&&n}}getAllUseDataSources(e,t){const r=this.getLocalDataSources(e);let n=r.length>0?e.concat(r):e;if(this.getWhetherIsMultipleExpression(t)){const e=t;Object.keys(e).forEach((t=>{n=this.updateUseDssByExpression(n,e[t])}))}else n=this.updateUseDssByExpression(n,t);return n}updateUseDssByExpression(e,t){var r;if(!e||!t)return e;let n=e;return null===(r=t.parts)||void 0===r||r.forEach(((e,r)=>{var o,i;if(bO(e.dataSourceId)&&!n.some((t=>t.dataSourceId===e.dataSourceId))){const t=n.find((t=>t.mainDataSourceId===e.dataSourceId.replace(new RegExp(`-${Nd}$`),"")));t&&(n=n.concat(Ae(t).merge({dataSourceId:e.dataSourceId,dataViewId:Nd}).without("fields")))}if(e.type===xx.Function){const e=null===(o=t.parts[r+2])||void 0===o?void 0:o.dataSourceId,a=Sb.getInstance().getDataSource(e),s=null==a?void 0:a.getMainDataSource(),l=s&&n.some((e=>e.dataSourceId===s.id));s&&!l&&(n=n.concat(Ae({dataSourceId:s.id,mainDataSourceId:s.id,rootDataSourceId:null===(i=s.getRootDataSource())||void 0===i?void 0:i.id})))}})),n}getLocalLoadId(){return"EXPRESSION_RESOLVER"}render(){if(!this.props.expression||!this.props.useDataSources&&!this.props.records)return null;const e=()=>"function"==typeof this.props.children?this.props.children(this.state.results):this.props.children;return this.props.records?k.createElement("div",null,e()):k.createElement(g_,{useDataSources:this.state.allUseDataSources,onDataSourceCreated:this.onDataSourceCreated,onDataSourceInfoChange:this.onDataSourceInfoChange,queries:this.state.queries,widgetId:this.getLocalLoadId()},e)}}const S_=jh(_T(y_)),b_=function(){return uu.Date.now()};var w_=/\s/;var I_=/^\s+/;const E_=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&w_.test(e.charAt(t)););return t}(e)+1).replace(I_,""):e};var C_=/^[-+]0x[0-9a-f]+$/i,O_=/^0b[01]+$/i,x_=/^0o[0-7]+$/i,T_=parseInt;const A_=function(e){if("number"==typeof e)return e;if(Su(e))return NaN;if(Iu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Iu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=E_(e);var r=O_.test(e);return r||x_.test(e)?T_(e.slice(2),r?2:8):C_.test(e)?NaN:+e};var P_=Math.max,D_=Math.min;const R_=function(e,t,r){var n,o,i,a,s,l,u=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,i=o;return n=o=void 0,u=t,a=e.apply(i,r)}function h(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=i}function g(){var e=b_();if(h(e))return m(e);s=setTimeout(g,function(e){var r=t-(e-l);return d?D_(r,i-(e-u)):r}(e))}function m(e){return s=void 0,p&&n?f(e):(n=o=void 0,a)}function v(){var e=b_(),r=h(e);if(n=arguments,o=this,l=e,r){if(void 0===s)return function(e){return u=e,s=setTimeout(g,t),c?f(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=A_(t)||0,Iu(r)&&(c=!!r.leading,i=(d="maxWait"in r)?P_(A_(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=o=s=void 0},v.flush=function(){return void 0===s?a:m(b_())},v},__=(k_={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},function(e){return null==k_?void 0:k_[e]});var k_,L_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,N_=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var M_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var j_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var U_="\\ud800-\\udfff",F_="\\u2700-\\u27bf",B_="a-z\\xdf-\\xf6\\xf8-\\xff",$_="A-Z\\xc0-\\xd6\\xd8-\\xde",G_="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",W_="["+G_+"]",V_="\\d+",H_="["+F_+"]",z_="["+B_+"]",q_="[^"+U_+G_+V_+F_+B_+$_+"]",Y_="(?:\\ud83c[\\udde6-\\uddff]){2}",J_="[\\ud800-\\udbff][\\udc00-\\udfff]",K_="["+$_+"]",X_="(?:"+z_+"|"+q_+")",Q_="(?:"+K_+"|"+q_+")",Z_="(?:['’](?:d|ll|m|re|s|t|ve))?",ek="(?:['’](?:D|LL|M|RE|S|T|VE))?",tk="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rk="[\\ufe0e\\ufe0f]?",nk=rk+tk+"(?:\\u200d(?:"+["[^"+U_+"]",Y_,J_].join("|")+")"+rk+tk+")*",ok="(?:"+[H_,Y_,J_].join("|")+")"+nk,ik=RegExp([K_+"?"+z_+"+"+Z_+"(?="+[W_,K_,"$"].join("|")+")",Q_+"+"+ek+"(?="+[W_,K_+X_,"$"].join("|")+")",K_+"?"+X_+"+"+Z_,K_+"+"+ek,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",V_,ok].join("|"),"g");const ak=function(e,t,r){return e=ac(e),void 0===(t=r?void 0:t)?function(e){return j_.test(e)}(e)?function(e){return e.match(ik)||[]}(e):function(e){return e.match(M_)||[]}(e):e.match(t)||[]};var sk=RegExp("['’]","g");const lk=(uk=function(e,t,r){return e+(r?"-":"")+t.toLowerCase()},function(e){return function(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}(ak(function(e){return(e=ac(e))&&e.replace(L_,__).replace(N_,"")}(e).replace(sk,"")),uk,"")});var uk;const ck=Jy((function(e,t,r){return Fy(e,A_(t)||0,r)})),dk=function(e,t,r){(void 0!==r&&!Gu(e[t],r)||void 0===r&&!(t in e))&&vS(e,t,r)},pk=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e};var fk=Function.prototype,hk=Object.prototype,gk=fk.toString,mk=hk.hasOwnProperty,vk=gk.call(Object);const yk=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Sk=function(e,t,r,n,o,i,a){var s,l=yk(e,r),u=yk(t,r),c=a.get(u);if(c)dk(e,r,c);else{var d=i?i(l,u,r+"",e,t,a):void 0,p=void 0===d;if(p){var f=au(u),h=!f&&jc(u),g=!f&&!h&&Yc(u);d=u,f||h||g?au(l)?d=l:yu(s=l)&&rd(s)?d=PS(l):h?(p=!1,d=AS(u,!0)):g?(p=!1,d=US(u,!0)):d=[]:function(e){if(!yu(e)||"[object Object]"!=vu(e))return!1;var t=DS(e);if(null===t)return!0;var r=mk.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&gk.call(r)==vk}(u)||kc(u)?(d=l,kc(l)?d=function(e){return bS(e,ES(e))}(l):Iu(l)&&!Eu(l)||(d=GS(u))):p=!1}p&&(a.set(u,d),o(d,u,n,i,a),a.delete(u)),dk(e,r,d)}},bk=function e(t,r,n,o,i){t!==r&&pk(r,(function(a,s){if(i||(i=new dc),Iu(a))Sk(t,r,s,n,e,o,i);else{var l=o?o(yk(t,s),a,s+"",t,r,i):void 0;void 0===l&&(l=a),dk(t,s,l)}}),ES)},wk=HD((function(e,t,r){bk(e,t,r)}));var Ik=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ek=BP((function(e){return Ik.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Ck=function(e){return"theme"!==e},Ok=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Ek:Ck},xk=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},Tk=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return jP(t,r,n),rD((function(){return UP(t,r,n)})),null},Ak=function e(t,r){var n,o,i=t.__emotion_real===t,a=i&&t.__emotion_base||t;void 0!==r&&(n=r.label,o=r.target);var s=xk(t,r,i),l=s||Ok(a),u=!l("as");return function(){var c=arguments,d=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&d.push("label:"+n+";"),null==c[0]||void 0===c[0].raw)d.push.apply(d,c);else{d.push(c[0][0]);for(var p=c.length,f=1;f<p;f++)d.push(c[f],c[0][f])}var h=sD((function(e,t,r){var n=u&&e.as||a,i="",c=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=k.useContext(lD)}"string"==typeof e.className?i=MP(t.registered,c,e.className):null!=e.className&&(i=e.className+" ");var h=eD(d.concat(c),t.registered,p);i+=t.key+"-"+h.name,void 0!==o&&(i+=" "+o);var g=u&&void 0===s?Ok(n):l,m={};for(var v in e)u&&"as"===v||g(v)&&(m[v]=e[v]);return m.className=i,m.ref=r,k.createElement(k.Fragment,null,k.createElement(Tk,{cache:t,serialized:h,isStringTag:"string"==typeof n}),k.createElement(n,m))}));return h.displayName=void 0!==n?n:"Styled("+("string"==typeof a?a:a.displayName||a.name||"Component")+")",h.defaultProps=t.defaultProps,h.__emotion_real=h,h.__emotion_base=a,h.__emotion_styles=d,h.__emotion_forwardProp=s,Object.defineProperty(h,"toString",{value:function(){return"."+o}}),h.withComponent=function(t,n){return e(t,Q({},r,n,{shouldForwardProp:xk(h,n,!0)})).apply(void 0,d)},h}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Ak[e]=Ak(e)}));const Pk=lD,Dk=function(e){var t=k.useContext(lD);return e.theme!==t&&(t=uD(t)(e.theme)),k.createElement(lD.Provider,{value:t},e.children)},Rk=function(){return k.useContext(lD)},_k=function(e){var t,r,n=e.displayName||e.name||"Component",o=function(t,r){var n=k.useContext(lD);return k.createElement(e,Q({theme:n,ref:r},t))},i=k.forwardRef(o);return i.displayName="WithTheme("+n+")",t=i,r=e,te()(t,r)},kk=Ak,Lk=aD,Nk=hD,Mk=LP;var jk,Uk,Fk,Bk,$k,Gk,Wk;!function(e){e.Loading="LOADING",e.Loaded="LOADED",e.Failed="FAILED"}(jk||(jk={})),function(e){e.ArcGISIPS="ArcGIS IPS",e.ArcGISKnowledge="ArcGIS Knowledge",e.ArcGISParcelFabric="ArcGIS Parcel Fabric",e.ArcGISTraceNetwork="ArcGIS Trace Network",e.ArcGISUtilityNetwork="ArcGIS Utility Network",e.ArcGISWorkflowManager="ArcGIS Workflow Manager"}(Uk||(Uk={})),function(e){e.Display1="display1",e.Display2="display2",e.Display3="display3",e.Display4="display4",e.Display5="display5",e.Display6="display6",e.Body1="body1",e.Body2="body2",e.Caption1="caption1",e.Caption2="caption2"}(Fk||(Fk={})),function(e){e.White="white",e.Black="black",e.Transparent="transparent"}(Bk||(Bk={})),function(e){e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}($k||($k={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark"}(Gk||(Gk={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark",e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(Wk||(Wk={}));const Vk="exb_user_settings";var Hk,zk,qk;!function(e){e.Urlinfo="URLINFO"}(Hk||(Hk={})),function(e){e.Orginial="ORIGINAL",e.High="HIGH",e.Medium="MEDIUM",e.Low="LOW",e.Fuzzy="FUZZY"}(zk||(zk={})),function(e){e[e.Orginial=99.99]="Orginial",e[e.High=66.66]="High",e[e.Medium=33.33]="Medium",e[e.Low=0]="Low"}(qk||(qk={}));var Yk=s(1512),Jk=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class Kk extends dA{isSupported(e,t){return Jk(this,void 0,void 0,(function*(){if(!e.length)return!1;for(const r of e)if(yield this.isDataSetSupportExportItem(r,t))return!0;return!1}))}isDataSetSupportExportItem(e,t){return Jk(this,void 0,void 0,(function*(){if(null==e.dataSource)return!1;const r=e.dataSource,n=r.url||e.dataSource.itemId,o=t===uA.DataSource&&n,i=!!r.allowToExportData&&(yield r.allowToExportData()),a=yield this.checkRenderPrivilege();return!o&&i&&a}))}addItem(e,t,r={},n){return Jk(this,void 0,void 0,(function*(){return n?(0,Yk.Ae)(Object.assign(Object.assign({},r),{item:e,folderId:n,authentication:t})):(0,Yk.fC)(Object.assign(Object.assign({},r),{item:e,authentication:t}))}))}createItem(e,t){return Jk(this,void 0,void 0,(function*(){try{const r=rb.getInstance(),n=jy().getState().portalUrl,o=r.getSessionByUrl(n);return(yield this.addItem(e,o,null,t)).id}catch(e){console.error(e)}return null}))}createServiceItem(e,t,r){return Jk(this,void 0,void 0,(function*(){const{dataSource:n}=e,o={title:t,type:"Feature Service",url:n.url};if("function"==typeof n.getLayerDefinition){const e=n.getLayerDefinition(),t=e.extent;e.spatialReference&&(o.spatialReference=e.spatialReference),e.extent&&(o.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]])}return this.createItem(o,r)}))}getLayerForFeatureCollection(e,t,r,n=!0){var o,i,a,s,l;return Jk(this,void 0,void 0,(function*(){const{dataSource:u,fields:c}=e;let d;d=t===uA.Records?e.records:yield this.getAllFeatureCollection(u,c,n);const p=yield r.convertDataRecordSetToFeatureSet({dataSource:u,records:d,fields:c}),f=u.getSchema(),h=(null==c?void 0:c.length)?c:Object.keys(null==f?void 0:f.fields)||[],g=u.getGeometryType(),m={name:f.label||u.getLabel(),type:g?"Feature Layer":"Table",geometryType:g,fields:h.map((e=>{const t=f.fields[e];return{name:t.name,type:t.esriType,alias:t.alias,format:t.format}})),objectIdField:f.idField,spatialReference:p.spatialReference},v=null===(i=(o=u).getCurrentQueryParams)||void 0===i?void 0:i.call(o);(null==v?void 0:v.where)&&(m.definitionExpression=v.where,m.defaultVisibility=!0);const y=null===(s=(a=u).getPopupInfo)||void 0===s?void 0:s.call(a);return(null===(l=null==y?void 0:y.fieldInfos)||void 0===l?void 0:l.length)&&(null==c?void 0:c.length)&&(y.fieldInfos=y.fieldInfos.filter((e=>c.includes(e.fieldName)))),{popupInfo:y,layerDefinition:m,featureSet:p.toJSON()}}))}createFeatureCollectionItem(e,t,r,n,o=!0){return Jk(this,void 0,void 0,(function*(){const i=yield Promise.allSettled(e.map((e=>this.isDataSetSupportExportItem(e,t)))),a=e.filter(((e,t)=>!("fulfilled"!==i[t].status||!i[t].value))),{featureUtils:s}=yield ry("jimu-arcgis"),l=(yield Promise.allSettled(a.map((e=>this.getLayerForFeatureCollection(e,t,s,o))))).map((e=>"fulfilled"===e.status?e.value:null)).filter((e=>!!e)),u={layers:l},c=l.length>1?["Feature Collection"]:["Feature Collection","Singlelayer"];l.every((e=>{var t;return"Table"===(null===(t=null==e?void 0:e.layerDefinition)||void 0===t?void 0:t.type)}))&&c.push("Table");const d={title:r,type:"Feature Collection",typeKeywords:c,text:JSON.stringify(u)};return this.createItem(d,n)}))}checkPrivilege(){return Jk(this,void 0,void 0,(function*(){const e=rb.getInstance();if(!(yield e.getUserInfo()))try{yield e.signIn()}catch(e){return!1}const t=yield TI(),r=yield AI();return t&&r}))}checkRenderPrivilege(){return Jk(this,void 0,void 0,(function*(){const e=rb.getInstance();if(!(yield e.getUserInfo()))return!0;const t=yield TI(),r=yield AI();return t&&r}))}getAllFeatureCollection(e,t,r=!0){return Jk(this,void 0,void 0,(function*(){const n=e;if("function"==typeof n.queryCount){const e=(yield n.queryCount({})).count;return yield this.query(n,e,t,r)}return[]}))}query(e,t,r=null,n=!0){return Jk(this,void 0,void 0,(function*(){const o=Math.ceil(t/1e3);let i=[];for(let t=1;t<=o;t++){const o={page:t,pageSize:1e3,returnGeometry:n};null!=r&&(o.outFields=r);const a=yield e.query(o);i=i.concat(a.records)}return i}))}}var Xk=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class Qk extends Kk{constructor(e){super(e),this.icon=mA()}onExecute(e,t){return Xk(this,void 0,void 0,(function*(){if(!(yield this.checkPrivilege()))return!1;const{AddItemDialog:r}=yield ry("jimu-ui"),n=1===e.length?`${e[0].dataSource.getLabel()}-${Date.now()}`:`Feature collection-${Date.now()}`,o=document.querySelector(".active-data-action-item");return k.createElement(r,{defaultName:n,keepOpenAfterConfirm:!0,reference:o,onConfirm:(r,n)=>this.handleConfirm(e,t,r,n)})}))}handleConfirm(e,t,r,n){return Xk(this,void 0,void 0,(function*(){try{const o=yield this.createFeatureCollectionItem(e,t,r,n);if(o)return o}catch(e){console.error(e)}return""}))}}var Zk=s(7360),eL=s.n(Zk);const tL=["count","countEmpty","sum","min","max","avg","stddev"],rL=["count","sum","min","max","avg","stddev"];var nL=s(4539),oL=s.n(nL);const iL=e=>{const t=window.SVG,{className:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["className"]),o=(0,LI.classNames)("jimu-icon jimu-icon-component",r);return t?LI.React.createElement(t,Object.assign({className:o,src:oL()},n)):LI.React.createElement("svg",Object.assign({className:o},n))};var aL=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class sL extends dA{constructor(e){super(e),this.icon=eL()}loadModules(){return aL(this,void 0,void 0,(function*(){const{Popper:e,Label:t,Loading:r}=yield ry("jimu-ui");this._modules={Popper:e,Label:t,Loading:r}}))}isSupported(e,t){return aL(this,void 0,void 0,(function*(){const r=e.some((e=>fL(e,t)))&&1===e.length;return r&&!this._modules&&(yield this.loadModules()),r}))}onExecute(e,t){return aL(this,void 0,void 0,(function*(){this._version||(this._version=0);const r=Object.assign({version:this._version++,iconRef:document.querySelector(".active-data-action-item")||{getBoundingClientRect:()=>({width:0,height:0,left:document.body.clientWidth/2,top:document.body.clientHeight/2-uL.height/2}),isVirtualElement:!0},dataSets:e,dataLevel:t},this._modules);return fD(dL,Object.assign({},r))}))}}const lL={width:335,height:300},uL={width:350,height:320},cL=gD`
  .component-field-selector {
    .ds-name {
      padding: 0 !important;
      margin-bottom: 8px;
      .option-label {
        display: none;
      }
      .mt-2 {
        display: none;
      }
    }
  }
`,dL=e=>{const{Popper:t,Label:r,Loading:n,version:o,iconRef:i,dataSets:a,dataLevel:s}=e,l=pL(),u=k.useRef(null),[c,d]=k.useState(!1);k.useEffect((()=>{p()}),[]);const p=()=>aL(void 0,void 0,void 0,(function*(){const{FieldSelector:e}=yield ry("jimu-ui/advanced/data-source-selector");u.current=e,d(!0)})),[f,h]=k.useState(uL),[g,m]=k.useState(!0);k.useEffect((()=>{m(!0)}),[o]);const v=()=>{m(!1)},y=a.filter((e=>fL(e,s))).map((e=>e.dataSource)),S=Pe()([Rl.Number]),[b,w]=k.useState(Pe()([])),[I,E]=k.useState({}),[C,O]=k.useState(!1),x=lT(),T=k.useCallback(((e,t)=>aL(void 0,void 0,void 0,(function*(){var r,n;O(!0);try{let o;if(s===uA.DataSource)o=yield((e,t)=>{return r=void 0,n=void 0,i=function*(){var r,n;const o=rL.map((e=>({statisticType:e,onStatisticField:t,outStatisticFieldName:e}))),i=e.getRealQueryParams({},"query"),a=e.query({outStatistics:o,where:i.where}),s=e.queryCount({where:i.where}),[l,u]=yield Promise.all([a,s]),c=null==l?void 0:l.records,d=(null===(n=null===(r=null==c?void 0:c[0])||void 0===r?void 0:r.feature)||void 0===n?void 0:n.attributes)||{count:0};return d.count<u.count&&(d.countEmpty=u.count-d.count),d},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{l(i.next(e))}catch(e){t(e)}}function s(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}l((i=i.apply(r,n||[])).next())}));var r,n,o,i})(e,t);else if(s===uA.Records){const i=null!==(n=null===(r=a.find((t=>t.dataSource.id===e.id)))||void 0===r?void 0:r.records)&&void 0!==n?n:[];o=((e,t)=>{const r={count:0,countEmpty:null,sum:0,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,avg:0,stddev:0},n=[];return e.forEach((function(e){const o=e.getFieldValue(t);"number"==typeof o?(r.count++,r.sum+=o,r.min>o&&(r.min=o),r.max<o&&(r.max=o),n.push(o)):r.countEmpty=(r.countEmpty||0)+1})),0===r.count?(r.sum=null,r.min=null,r.max=null,r.avg=null,r.stddev=null):(r.avg=r.sum/r.count,r.stddev=(e=>{const t=e.length;if(t<=1)return 0;let r=0;e.forEach((function(e){r+=e}));const n=r/t;let o=0;return e.forEach((function(e){o+=Math.pow(e-n,2)})),Math.sqrt(1/(t-1)*o)})(n)),r})(i,t)}const i={};tL.forEach((e=>{const t=o[e];"number"==typeof t&&(i[e]=x.formatNumber(t))})),E(i)}catch(e){E(null)}finally{O(!1)}}))),[s,a,x]);k.useEffect((()=>{b.length>0&&(w(Pe()([])),E({}))}),[s,o]);const A=k.useCallback(((e,t)=>aL(void 0,void 0,void 0,(function*(){var r;const n=null===(r=null==e?void 0:e[0])||void 0===r?void 0:r.name;w(Pe()([n])),n&&T(t,n)}))),[T]),P=k.useMemo((()=>{let e;return e=1===a.length?[]:{},a.forEach((t=>{var r;const n=t.dataSource.id,o=t.fields||[];let i=[];o.length>0&&(i=Object.values((null===(r=t.dataSource.getSchema())||void 0===r?void 0:r.fields)||{}).map((e=>e.name)).filter((e=>!o.includes(e)))),1===a.length?e=i:e[n]=i})),Pe()(e)}),[a]),D=u.current;return fD(t,{version:o,floating:!0,open:g,headerTitle:l("dataAction_DataStatistics"),onHeaderClose:v,minSize:lL,onResize:e=>{h(e)},dragBounds:"body",defaultSize:f,reference:i,toggle:(e,t)=>{"clickOutside"!==t&&v()},className:"data-statistics-popper",css:cL},fD("div",{className:"h-100 p-4 position-relative overflow-auto"},c?fD(k.Fragment,null,1===y.length&&fD(r,{css:gD`
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          `,title:y[0].getLabel(),"aria-label":y[0].getLabel()},y[0].getLabel()),fD(D,{dataSources:y,types:S,selectedFields:b,hiddenFields:P,useDropdown:!0,isDataSourceDropDownHidden:1===y.length,placeholder:l("pleaseSelectAField"),className:"h-auto mb-4",onChange:A}),I&&!C&&fD("div",null,Object.keys(I).map((e=>fD(r,{className:"d-flex justify-content-between",key:e},fD("span",{css:gD`
              width: ${Pt(150)};
              flex-shrink: 0;
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
            `},l(`${e}Label`)),fD("span",{css:gD`
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
            `,title:I[e]},I[e]))))),!I&&!C&&fD(r,null,fD(iL,{color:"var(--danger)"}),fD("span",{className:"ml-2"},l("error"))),C&&fD(n,{type:Vl.Secondary})):fD(n,{type:Vl.Secondary})))},pL=()=>{const e=lT();return k.useCallback(((t,r)=>e.formatMessage({id:t,defaultMessage:gS[t]},r)),[e])},fL=(e,t)=>{var r;let n=[zl.FeatureLayer,zl.SceneLayer].includes(e.dataSource.type)&&e.dataSource.getStatus()!==Hl.NotReady;return(t===uA.Records&&e.records.length<=1||t===uA.DataSource&&"number"==typeof(null===(r=e.dataSource)||void 0===r?void 0:r.count)&&e.dataSource.count<=1)&&(n=!1),n};function hL(e,t){return t===Rl.Number?Number.isNaN(Number(e))?null:`${e}`:t===Rl.Date||t===Rl.String?`${e}`:void 0}function gL(e,t,r){if(t.type===Rl.Date){const n=e.map((e=>pC(t.jimuName,aE.DateOperatorIsOn,[{value:e,label:e+""}]))),o=fC(oE.Or,n);return hC(oE.Or,[o],r)}{let n;switch(t.type){case Rl.Number:n=aE.NumberOperatorIsAnyOf;break;case Rl.String:n=aE.StringOperatorIsAnyOf}const o=e.map((e=>({value:e,label:e+""}))),i=pC(t.jimuName,n,o);return hC(oE.Or,[i],r)}}class mL extends xD{constructor(){super(...arguments),this.name="filter data record action",this.actionQuerySQLExpression={},this.concatQuerySqlExpressionOfSameAction=(e,t)=>{var r;let n=null;const o=e.widgetId,i=Sb.getInstance().getDataSource(t),a=(null===(r=this.actionQuerySQLExpression)||void 0===r?void 0:r[t])||{};return Object.keys(a).forEach((e=>{const t=a[e];e!==o&&a&&(n=n?gC([n,t],i,oE.And):t)})),n},this.getQuerySqlExpressionWidthOtherQuery=(e,t,r,n)=>{const o=Sb.getInstance().getDataSource(t),i=this.concatQuerySqlExpressionOfSameAction(e,t);return n?i:(i&&(r=r?gC([r,i],o,oE.And):i),r)},this.getQueryWhenUseDataRelationShip=(e,t,r)=>{var n,o;const i=(null===(n=null==t?void 0:t.actionUseDataSource)||void 0===n?void 0:n.fields)||[],a=Sb.getInstance().getDataSource(t.messageUseDataSource.mainDataSourceId),s=t.actionUseDataSource.dataSourceId;let l,u=!1,c=!1,d=null,p=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=a.getSchema(),t=a.getIdField();d=null===(o=null==e?void 0:e.fields)||void 0===o?void 0:o[t],p=d}else{const e=t.messageUseDataSource.fields[0],n=t.actionUseDataSource.fields[0];d=a.getSchema().fields[e],p=r.getSchema().fields[n]}if(d&&p){const t=d.jimuName,n=d.type,o=p.type,i=e,a=[];for(let e=0;e<i.records.length;e++){const r=i.records[e].getData()[t];if(!a.includes(`${hL(r,o)}`)){const r=hL(i.records[e].getData()[t],o);null!==r&&a.push(`${r}`)}}n!==Rl.Number&&o===Rl.Number&&i.records.length>0&&0===a.length&&(u=!0),a.length>0?l=gL(a,p,r):c=!0}if(e.records.length>0){const e=t.sqlExprObj?UE(t.sqlExprObj,r).sqlExpression:null;e&&(l=l?gC([l,e],r,oE.And):e)}else c=!0;return pM.setValue(this.actionQuerySQLExpression,`${s}.${e.widgetId}`,l),l=this.getQuerySqlExpressionWidthOtherQuery(e,s,l,c),{outFields:i,where:u?"1 = 2":null==l?void 0:l.sql,returnGeometry:!0,sqlExpression:u?null:l}},this.getQueryWhenNotUseDataRelationShip=(e,t,r)=>{var n;const o=t.actionUseDataSource.dataSourceId,i=(null===(n=null==t?void 0:t.actionUseDataSource)||void 0===n?void 0:n.fields)||[];let a=null,s=!1;if(e.records.length>0){const e=t.sqlExprObj?UE(t.sqlExprObj,r).sqlExpression:null;e&&(a=e)}else s=!0;return pM.setValue(this.actionQuerySQLExpression,`${o}.${e.widgetId}`,a),a=this.getQuerySqlExpressionWidthOtherQuery(e,o,a,s),{outFields:i,where:null==a?void 0:a.sql,returnGeometry:!0,sqlExpression:a}}}filterMessageDescription(e){return e.messageType===JP.DataRecordsSelectionChange||e.messageType===JP.SelectDataRecord||e.messageType===JP.ExtentChange}filterMessage(e){return!0}getSettingComponentUri(e,t){return"filter-data-record-action"}onRemoveListen(e,t){if(this.lastMessage&&this.lastMessage.type===e&&this.lastMessage.widgetId===t){if(this.lastActionConfig&&this.lastActionConfig.actionUseDataSource&&this.lastActionConfig.actionUseDataSource.dataSourceId){const e=Sb.getInstance().getDataSource(this.lastActionConfig.actionUseDataSource.dataSourceId);e&&this.lastMessage.type===JP.DataRecordsSelectionChange&&e.updateQueryParams(null,this.id),e&&this.lastMessage.type===JP.ExtentChange&&this.lastMessage.stationary&&e.updateQueryParams(null,this.id),this.lastActionConfig=null}this.lastMessage=null}}onExecute(e,t){var r,n,o,i,a;return n=this,o=void 0,a=function*(){this.lastMessage=e,this.lastActionConfig=t;const n=(null===(r=null==t?void 0:t.actionUseDataSource)||void 0===r?void 0:r.fields)||[];switch(e.type){case JP.DataRecordsSelectionChange:let r=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const n=Sb.getInstance(),o=n.getDataSource(t.messageUseDataSource.mainDataSourceId),i=t.actionUseDataSource.dataSourceId;let a=n.getDataSource(i);a||(a=yield n.createDataSourceByUseDataSource(t.actionUseDataSource)),o&&a&&(r=t.enabledDataRelationShip?this.getQueryWhenUseDataRelationShip(e,t,a):this.getQueryWhenNotUseDataRelationShip(e,t,a),a.updateQueryParams(r,this.id))}return Promise.resolve(!0);case JP.ExtentChange:if(t&&e.stationary&&t.actionUseDataSource){const r=Sb.getInstance(),o=t.actionUseDataSource.dataSourceId;let i=r.getDataSource(o);i||(i=yield r.createDataSourceByUseDataSource(t.actionUseDataSource));let a=null;if(i){const r=null==e?void 0:e.extent;let s=null,l=!1;const u=t.sqlExprObj?UE(t.sqlExprObj,i).sqlExpression:null;u?s=u:l=!0;const c=t.enableQueryWithCurrentExtent?r.toJSON():{};pM.setValue(this.actionQuerySQLExpression,`${o}.${e.widgetId}`,s),s=this.getQuerySqlExpressionWidthOtherQuery(e,o,s,l),a={geometry:c,outFields:n,where:null==s?void 0:s.sql,returnGeometry:!0,sqlExpression:s},i.updateQueryParams(a,this.id)}}return Promise.resolve(!0)}},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{l(a.next(e))}catch(e){t(e)}}function s(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,s)}l((a=a.apply(n,o||[])).next())}))}}class vL extends xD{constructor(){super(...arguments),this.name="select data record action"}filterMessageDescription(e){return e.messageType===JP.DataRecordsSelectionChange||e.messageType===JP.SelectDataRecord}filterMessage(e){return!0}getSettingComponentUri(e,t){return"select-data-record-action"}onExecute(e,t){return r=this,n=void 0,i=function*(){const r=["*"],n=Sb.getInstance();if(e.type===JP.DataRecordsSelectionChange){let o=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId)return!0;if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const i=n.getDataSource(t.messageUseDataSource.mainDataSourceId);let a=!1,s=n.getDataSource(t.actionUseDataSource.mainDataSourceId);if(s||(yield n.createDataSourceByUseDataSource(t.actionUseDataSource),s=n.getDataSource(t.actionUseDataSource.mainDataSourceId)),0===e.records.length)return s&&s.selectRecordsByIds([]),yield Promise.resolve(!0);if(i&&s){if(t.enabledDataRelationShip){let n,l=null,u=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=i.getSchema(),t=e&&e.fields&&Object.keys(e.fields).find((t=>"esriFieldTypeOID"===e.fields[t].esriType));l=e&&e.fields&&e.fields[t],u=l}else{const e=t.messageUseDataSource.fields[0],r=t.actionUseDataSource.fields[0];l=i.getSchema().fields[e],u=s.getSchema().fields[r]}let c=!1;if(l&&u){const t=l.name,r=l.type,o=u.type,i=e,d=[];for(let e=0;e<i.records.length;e++){const r=i.records[e].getData()[t];if(!d.includes(`${hL(r,o)}`)){const r=hL(i.records[e].getData()[t],o);null!==r&&d.push(`${r}`)}}r!==Rl.Number&&o===Rl.Number&&0===d.length&&(a=!0),d.length>0?n=gL(d,u,s):c=!0}if(e.records.length>0){const e=t.sqlExprObj?UE(t.sqlExprObj,s).sqlExpression:null;e&&(n=n?gC([n,e],s,oE.And):e)}else c=!0;o={outFields:r,where:c?"":null==n?void 0:n.sql,returnGeometry:!0,sqlExpression:c?null:n,notAddFieldsToClient:!0}}else{let n=null,i=!1;if(e.records.length>0){const e=t.sqlExprObj?UE(t.sqlExprObj,s).sqlExpression:null;e&&(n=e)}else i=!0;o={outFields:r,where:i?"":null==n?void 0:n.sql,returnGeometry:!0,sqlExpression:i?null:n,notAddFieldsToClient:!0}}if(a)return s.clearSelection(),!0;s.query(o).then((e=>{const t=e&&e.records;if(t&&t.length>0){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e.push(n.getId())}setTimeout((()=>{s.selectRecordsByIds(e,t)}),200)}else s.clearSelection()}))}}return Promise.resolve(!0)}},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{l(i.next(e))}catch(e){t(e)}}function s(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}l((i=i.apply(r,n||[])).next())}));var r,n,o,i}}class yL{constructor(){this.id="jimu-core-ds-factory"}getFactoryUri(e){if(Object.keys(zl).map((e=>zl[e])).includes(e))return"jimu-core/data-source"}}var SL=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const bL=["en","ar","bg","bs","ca","cs","da","de","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw"],wL=My();function IL(){return SL(this,void 0,void 0,(function*(){const{queryObject:e,urlHashObject:t}=lA.getInstance().init(wL);return function(){const e=nb.getInstance();(0,qa.Tb)({fetch:function(t,r){const n=Object.assign({},r);let o;const{portalUrl:i,isWebTier:a}=jy().getState();return a&&fm(t,i)?(n.credentials="include",o=Promise.resolve()):o=e.isTrustedServer(t)?e.getSessionFromWebTierServer(t).then((e=>{e&&e.token&&(t=Av(t,"token",e.token))})):Promise.resolve(),o.then((()=>SL(this,void 0,void 0,(function*(){return yield fetch(t,n).then((e=>e))}))))}})}(),wL.subscribe((()=>{window._appState=jy().getState()})),window.addEventListener&&(window.addEventListener("online",(()=>wL.dispatch(Iw(!1)))),window.addEventListener("offline",(()=>wL.dispatch(Iw(!0)))),window.addEventListener("resize",R_(xL,100)),xL()),window.runtimeInfo={widgets:{},animationPlayId:0},Promise.allSettled||(Promise.allSettled=function(e){return SL(this,void 0,void 0,(function*(){const t=e.map((e=>SL(this,void 0,void 0,(function*(){return yield e.then((e=>({status:"fulfilled",value:e}))).catch((e=>({status:"rejected",reason:e})))}))));return Promise.all(t)}))}),YT.getInstance(),function(){return SL(this,void 0,void 0,(function*(){if(window.jimuConfig.isInBuilder){yield ry("jimu-layouts/layout-builder");const e=yield ry("jimu-for-builder",["appBuilderSync","loadI18nMessage"]);yield ry("jimu-for-builder/templates");const t=e.appBuilderSync;t.listenBuilderEvents(),t.publishAppIsLoadedToBuilder();const r=R_(t.publishAppStateChangeToBuilder,200);return Uy(((e,t)=>{e&&t&&r()})),Promise.resolve()}return Promise.resolve()}))}().then(OL).then(EL).then((t=>SL(this,void 0,void 0,(function*(){var r;const n=null===(r=function(e,t){return e.locale||t||zh(window.navigator)}(e,t))||void 0===r?void 0:r.toLowerCase(),o=qh(n,bL)||"en";return function(e){if(window.locale=e,"undefined"==typeof document)return;const t=document.getElementsByTagName("html")[0];t.setAttribute("lang",e),Kh(e)?(t.setAttribute("dir","rtl"),t.className+=" esriRtl jimu-rtl",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:"")):(t.setAttribute("dir","ltr"),t.className+=" esriLtr jimu-ltr",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:""))}(n),function(e,t){const r={isInPortal:window.jimuConfig.isInPortal,isInBuilder:window.jimuConfig.isInBuilder,isBuilder:window.jimuConfig.isBuilder,isSite:window.jimuConfig.isSite,locale:e,translatedLocale:t,isRTL:Kh(e),isTouchDevice:ug(),jimuConfig:window.jimuConfig};wL.dispatch(jb(r))}(n,o),function(){SL(this,void 0,void 0,(function*(){const{appId:e}=Lv();return!window.jimuConfig.isInBuilder&&e?yield lI(e).then((e=>(jy().dispatch(Ob(e)),e))):Promise.resolve({})}))}(),o})))).then((r=>SL(this,void 0,void 0,(function*(){wL.dispatch(Iw(!(window.navigator&&window.navigator.onLine))),function(e){const{appId:t}=Lv();t?wL.dispatch(xb(t)):e.config&&wL.dispatch(xb(e.config)),wL.dispatch(Pw({appMode:Ll.Run,activePagePart:Bl.Body,isPrintPreview:"true"===e.print_preview||"1"===e.print_preview}))}(e),function(e,t){const r=Dv(e,t);Object.keys(r).forEach((e=>{const t=r[e];"select_options"===t.selectionType?jy().dispatch(hw(e,t.selection)):"id"===t.selectionType&&jy().dispatch(hw(e,{widgetId:null,ids:t.selection})),t.query&&jy().dispatch(ew(e,"_filterInUrl",t.query)),t.gdbVersion&&jy().dispatch(Kb(e,t.gdbVersion))}))}(e,t),yield function(e){return SL(this,void 0,void 0,(function*(){return"en"===e?yield Promise.resolve(gS):(e=Hh(e,bL))?yield Jh("jimu-core/lib/translations",e).then((e=>e)):Promise.resolve(gS)}))}(r).then((e=>SL(this,void 0,void 0,(function*(){return e&&wL.dispatch(Ub("jimu-core",e)),function(e){eA.getInstance().registerAction({id:"export-json",name:"export",label:CL({id:"dataAction_ExportJson",defaultMessage:gS.dataAction_ExportJson},e),ActionClass:yA}).catch((e=>{console.error(e)})),eA.getInstance().registerAction({id:"export-csv",name:"export",label:CL({id:"dataAction_ExportCSV",defaultMessage:gS.dataAction_ExportCSV},e),ActionClass:CA}).catch((e=>{console.error(e)})),eA.getInstance().registerAction({id:"export-geojson",name:"export",label:CL({id:"dataAction_ExportGeoJson",defaultMessage:gS.dataAction_ExportGeoJson},e),ActionClass:kA}).catch((e=>{console.error(e)})),eA.getInstance().registerAction({id:"export-item",name:"export",label:CL({id:"dataAction_ExportItem",defaultMessage:gS.dataAction_ExportItem},e),ActionClass:Qk}).catch((e=>{console.error(e)})),eA.getInstance().registerAction({id:"set-filter",name:"setFilter",label:CL({id:"dataAction_SetFilter",defaultMessage:gS.dataAction_SetFilter},e),ActionClass:yR}).catch((e=>{console.error(e)})),eA.getInstance().registerAction({id:"data-statistics",name:"dataStatistics",label:CL({id:"dataAction_DataStatistics",defaultMessage:gS.dataAction_DataStatistics},e),ActionClass:sL}).catch((e=>{console.error(e)}))}(e),function(e){XT.getInstance().registerAction({id:"filter-data-record-action",label:CL({id:"messageAction_FilterDataRecord",defaultMessage:gS.messageAction_FilterDataRecord},e),ActionClass:mL}).catch((e=>{console.error(e)})),XT.getInstance().registerAction({id:"select-data-record-action",label:CL({id:"messageAction_SelectDataRecord",defaultMessage:gS.messageAction_SelectDataRecord},e),ActionClass:vL}).catch((e=>{console.error(e)}))}(e),fy.getInstance().registerExtension({epName:Zv.DataSourceFactoryUri,extension:new yL}),window.jimuConfig.isInBuilder?(jy().dispatch(Gb(Ll.Design)),yield ty("jimu-for-builder").loadI18nMessage(),yield ty("jimu-for-builder/templates").init(),Promise.resolve()):Promise.resolve()}))))}))))}))}function EL(){return SL(this,void 0,void 0,(function*(){return wL.getState().user?(kg($d)!==wL.getState().user.culture&&Lg($d,wL.getState().user.culture),yield Promise.resolve(wL.getState().user.culture)):nb.getInstance().getMainSession()?null!==kg($d)?"null"===kg($d)?Promise.resolve(""):(nb.getInstance().getUserInfo(),yield Promise.resolve(kg($d))):yield nb.getInstance().getUserInfo().then((e=>e.culture)):null}))}function CL(e,t){return t&&t[e.id]?t[e.id]:e.defaultMessage}function OL(){return SL(this,void 0,void 0,(function*(){return yield function(){return SL(this,void 0,void 0,(function*(){let e;if(window.jimuConfig.isInPortal)return e=cm(),Promise.resolve({portalUrl:e,clientId:"experienceBuilder"});if(window.jimuConfig.isOutOfExb)return yield Promise.resolve(null);const t=window.jimuConfig.hostEnv||"dev";if(!window.jimuConfig.isDevEdition){const e="arcgis.com";let r;switch(t){case"prod":r="www";break;case"dev":r="devext";break;case"qa":r="qaext"}return Promise.resolve({portalUrl:`https://${r}.${e}`,clientId:"experienceBuilder"})}const r=`${zv()}builder/setting.json`;return yield window.fetch(r).then((e=>SL(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>{const r=e.devEnv[t];return r&&(r.portalUrl=xm(r.portalUrl)),r}),(e=>SL(this,void 0,void 0,(function*(){return console.error("Get setting.json error.",e),yield Promise.resolve(null)}))))}))}().then((e=>SL(this,void 0,void 0,(function*(){return e?window.jimuConfig.isInBuilder?yield Promise.resolve(null):(jy().dispatch(pw({portalUrl:e.portalUrl,clientId:e.clientId,isWebTier:e.isWebTier})),void(yield nb.getInstance().initSession())):(console.warn("No portal info."),yield Promise.resolve(null))}))))}))}function xL(){if("undefined"==typeof document)return;const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=dg({width:e,height:t});jy().getState().browserSizeMode!==r&&jy().dispatch(yw(r));const n=.01*t,o=.01*e;document.documentElement.style.setProperty("--vh",`${n}px`),document.documentElement.style.setProperty("--vw",`${o}px`)}var TL=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class AL{static getInstance(){return AL.instance||(AL.instance=new AL),AL.instance}constructor(){this.initialize=e=>TL(this,void 0,void 0,(function*(){const t=!(!e||!e.enable);if(!t)return this.enable=t,void(yield Promise.resolve());yield Promise.all([this.initializeGtag(),this.createTracker(e)]).then((()=>{this.enable=t}),function(e){throw this.enable=!1,new Error(e)}.bind(this))})),this.initializeGtag=()=>TL(this,void 0,void 0,(function*(){this.gtag?yield Promise.resolve():yield ry("gtm").then((()=>{const e=window;e.dataLayer=e.dataLayer||[],this.gtag=function(){e.dataLayer.push(arguments)},this.gtag("js",new Date)}))})),this.compareGoogleAnalytics=(e=Ae({}))=>{if(!this.enable)return;const t=this.googleAnalytics||Ae({});e!==t&&(e.trackId!==t.trackId&&(t.trackId&&this.disableGaTrackForGtag(t.trackId,!0),e.trackId&&this.addGaTrackIdToGtag(e.trackId,e.anonymizeip)),e.dimensions!==t.dimensions&&this.updateGgTrackerDimensions(this.track,e.dimensions),e.metrics!==t.metrics&&this.updateGgTrackerMetrics(this.track,e.metrics),e.anonymizeip!==t.anonymizeip&&this.updateGgTrackerAnonymizeip(e.trackId,e.anonymizeip),this.googleAnalytics=e)},this.disableGaTrackForGtag=(e,t=!0)=>{e&&(window[`ga-disable-${e}`]=t)},this.addGaTrackIdToGtag=(e,t=!0)=>{this.gtag&&(this.disableGaTrackForGtag(e,!1),this.gtag("config",e,{anonymize_ip:t}))},this.updateGgTrackerDimensions=(e,t)=>{const r=this.getGgTracker(e);r&&(r.dimensions=t)},this.updateGgTrackerMetrics=(e,t)=>{const r=this.getGgTracker(e);r&&(r.metrics=t)},this.updateGgTrackerAnonymizeip=(e,t=!0)=>{this.gtag&&this.gtag("config",e,{anonymize_ip:t})},this.getGgTracker=e=>e&&e.trackers&&e.trackers.find((e=>"google"===e.name)),this.mutablePortalUser=()=>{const e=jy().getState().portalSelf.asMutable();return e.user=e.user.asMutable(),e},this.isTrackAvailable=()=>(this.enable,!!this.enable),Uy(this.onStoreChange.bind(this),["appConfig","analytics"])}onStoreChange(e=Ae({}),t=Ae({})){t.enable!==e.enable?this.initialize(t).then((()=>{this.compareGoogleAnalytics(t&&t.google)})):this.compareGoogleAnalytics(t&&t.google)}createTracker(e){return TL(this,void 0,void 0,(function*(){if(this.track)return yield Promise.resolve(this.track);const t={google:e&&e.google,portal:this.mutablePortalUser()};return yield ry("jimu-core/telemetry").then((e=>(this.track=new e(t),this.track)))}))}logPageView(e){this.isTrackAvailable()&&this.track.logPageView(e)}logEvent(e){this.isTrackAvailable()&&this.track.logEvent(e)}logError(e){this.isTrackAvailable()&&this.track.logError(e)}}function PL(e){return e.error?k.createElement("div",null,"Error! ",k.createElement("button",{onClick:e.retry},"Retry")):e.pastDelay?k.createElement("div",null,"Loading..."):null}var DL,RL,_L,kL,LL,NL,ML;function jL(e){e(xw(null))}function UL(){return e=this,t=void 0,n=function*(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",yield ry(e,["LayoutEntry"])},new((r=void 0)||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}!function(e){e.ScrollIntoView="SCROLL_IN",e.Manual="MANUAL"}(DL||(DL={})),function(e){e.None="NONE",e.Pulse="PULSE",e.RubberBand="RUBBER_BAND",e.FadeIn="FADE_IN",e.FadeOut="FADE_OUT",e.FlyIn="FLY_IN",e.ZoomIn="ZOOM_IN",e.WipeIn="WIPE_IN",e.SpinIn="SPIN_IN",e.FloatIn="FLOAT_IN"}(RL||(RL={})),function(e){e.Default="DEFAULT",e.Gentle="GENTLE",e.Wobbly="WOBBLY",e.Stiff="STIFF",e.Slow="SLOW",e.Molasses="MOLASSES"}(_L||(_L={})),function(e){e.Top="TOP",e.Bottom="BOTTOM",e.Left="LEFT",e.Right="RIGHT"}(kL||(kL={})),function(e){e.AsOne="AS_ONE",e.OneByOne="ONE_BY_ONE"}(LL||(LL={})),function(e){e.WithPrevious="WITH_PREVIOUS",e.AfterPrevious="AFTER_PREVIOUS"}(NL||(NL={})),function(e){e.OneByOne="ONE_BY_ONE",e.AllAtOnce="ALL_AT_ONCE"}(ML||(ML={}));const FL=k.createContext({delay:0,setting:null,playId:null,revert:!1,oid:""}),BL=k.createContext({monitor:!1}),$L={opacity:1,x:0,y:0,rotateZ:0,scaleX:1,scaleY:1,clipPath:"inset(0%)"};class GL{constructor(e,t){this.type=e,this.option=t}generateProps(e){return Object.assign({},$L,e)}getConfigType(){var e,t;return(null!==(t=null===(e=this.option)||void 0===e?void 0:e.configType)&&void 0!==t?t:_L.Default).toLowerCase()}propsOnXY(e,t){return null}hasMoveEffect(){return!1}}class WL extends GL{constructor(e){super(RL.FadeIn,e)}initProps(){return this.generateProps({opacity:0})}animateProps(){return{from:this.generateProps({opacity:0}),to:this.generateProps({opacity:1}),immediate:!1,config:mi[this.getConfigType()]}}}class VL extends GL{constructor(e){super(RL.FadeOut,e)}initProps(){return this.generateProps({opacity:1})}animateProps(){return{from:this.generateProps({opacity:1}),to:this.generateProps({opacity:0}),immediate:!0,config:void 0}}}class HL extends GL{constructor(e){var t;super(RL.FlyIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||kL.Top}initProps(){return this.generateProps({opacity:0,x:0,y:0})}from(){switch(this.direction){case kL.Bottom:return{x:0,y:window.innerHeight};case kL.Left:return{x:-window.innerWidth,y:0};case kL.Right:return{x:window.innerWidth,y:0};default:return{x:0,y:-window.innerHeight}}}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,x:0,y:0}),immediate:!1,config:mi[this.getConfigType()]}}}class zL extends GL{constructor(e){super(RL.ZoomIn,e)}initProps(){return this.generateProps({scaleX:1,scaleY:1,opacity:0,transformOrigin:"center"})}animateProps(){return{from:this.generateProps({scaleX:0,scaleY:0,opacity:0}),to:this.generateProps({scaleX:1,scaleY:1,opacity:1}),immediate:!1,config:mi[this.getConfigType()]}}}class qL extends GL{constructor(e){var t;super(RL.WipeIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||kL.Top}initProps(){return this.generateProps({clipPath:"inset(0%)"})}getClipProp(){switch(this.direction){case kL.Bottom:return"clipTop";case kL.Left:return"clipRight";case kL.Right:return"clipLeft";default:return"clipBottom"}}animateProps(){const e=this.getClipProp();return{from:this.generateProps({opacity:1,clipPath:`inset(${"clipTop"===e?100:0}% ${"clipRight"===e?100:0}% ${"clipBottom"===e?100:0}% ${"clipLeft"===e?100:0}%)`}),to:this.generateProps({opacity:1,clipPath:"inset(0% 0% 0% 0%)"}),immediate:!1,config:mi[this.getConfigType()]}}}class YL extends GL{constructor(e){super(RL.SpinIn,e)}initProps(){return this.generateProps({rotateZ:0,opacity:0})}animateProps(){return{from:this.generateProps({rotateZ:720,opacity:0}),to:this.generateProps({rotateZ:0,opacity:1}),immediate:!1,config:mi[this.getConfigType()]}}}class JL extends GL{constructor(e){var t;super(RL.FloatIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||kL.Top}initProps(){return this.generateProps({opacity:0,x:0,y:0})}from(){switch(this.direction){case kL.Bottom:return{x:0,y:100};case kL.Left:return{x:-100,y:0};case kL.Right:return{x:100,y:0};default:return{x:0,y:-100}}}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,x:0,y:0}),immediate:!1,config:mi[this.getConfigType()]}}}function KL(){var e,t,r,n;if(window.jimuConfig.isBuilder){if((null===(t=null===(e=window._appWindow)||void 0===e?void 0:e.runtimeInfo)||void 0===t?void 0:t.animationPlayId)>=0)return window._appWindow.runtimeInfo.animationPlayId+=1,window._appWindow.runtimeInfo.animationPlayId;null!=(null===(r=window._appWindow)||void 0===r?void 0:r.runtimeInfo)&&(window._appWindow.runtimeInfo.animationPlayId=0)}else{if((null===(n=window.runtimeInfo)||void 0===n?void 0:n.animationPlayId)>=0)return window.runtimeInfo.animationPlayId+=1,window.runtimeInfo.animationPlayId;null!=window.runtimeInfo&&(window.runtimeInfo.animationPlayId=0)}return 0}function XL(e,t){switch(e){case RL.FadeIn:return new WL(t);case RL.FadeOut:return new VL(t);case RL.FlyIn:return new HL(t);case RL.ZoomIn:return new zL(t);case RL.WipeIn:return new qL(t);case RL.SpinIn:return new YL(t);case RL.FloatIn:return new JL(t);default:return null}}var QL;!function(e){e.None="NONE",e.Skew="SKEW",e.Grow="GROW",e.Shrink="SHRINK",e.Float="FLOAT",e.Sink="SINK",e.Rotate="ROTATE",e.Spin="SPIN",e.Forward="FORWARD",e.Backward="BACKWARD",e.Opacity="OPACITY",e.Custom="CUSTOM"}(QL||(QL={}));const ZL={translateX:"0%",translateY:"0%",scaleX:1,scaleY:1,rotate:"0deg",skewX:"0deg",skewY:"0deg",opacity:1};class eN{constructor(e,t){this.type=e,this.option=t}generateProps(e){return Object.assign({},ZL,e)}}class tN extends eN{constructor(e){super(QL.Skew),this.x=(null==e?void 0:e.skewX)||0,this.y=(null==e?void 0:e.skewY)||0,0===this.x&&0===this.y&&(this.x=-20)}animateProps(){return{from:this.generateProps({skewX:"0deg",skewY:"0deg",transform:"perspective(1px) translateZ(0)",transformOrigin:"0% 100%"}),to:this.generateProps({skewX:`${this.x}deg`,skewY:`${this.y}deg`}),loop:{skewX:"0deg",skewY:"0deg",reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transform-origin: 0 100%;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) skew(${this.x}deg, ${this.y}deg);
      }
    `}}class rN extends eN{constructor(e){super(QL.Grow),this.x=(null==e?void 0:e.scaleX)||110,this.y=(null==e?void 0:e.scaleY)||110}animateProps(){return{from:this.generateProps({scaleX:1,scaleY:1,transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({scaleX:this.x/100,scaleY:this.y/100}),loop:{scaleX:1,scaleY:1,reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) scale(${this.x/100}, ${this.y/100});
      }
    `}}class nN extends eN{constructor(e){super(QL.Shrink),this.x=(null==e?void 0:e.scaleX)||90,this.y=(null==e?void 0:e.scaleY)||90}animateProps(){return{from:this.generateProps({scaleX:1,scaleY:1,transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({scaleX:this.x/100,scaleY:this.y/100}),loop:{scaleX:1,scaleY:1,reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) scale(${this.x/100}, ${this.y/100});
      }
    `}}class oN extends eN{constructor(e){super(QL.Float),this.x=(null==e?void 0:e.offsetX)||0,this.y=(null==e?void 0:e.offsetY)||10}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:-this.y+"%"}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transition-timing-function: ease-out;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${-this.y}%);
      }
    `}}class iN extends eN{constructor(e){super(QL.Sink),this.x=(null==e?void 0:e.offsetX)||0,this.y=(null==e?void 0:e.offsetY)||-10}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:-this.y+"%"}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transition-timing-function: ease-out;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${-this.y}%);
      }
    `}}class aN extends eN{constructor(e){super(QL.Rotate),this.rotate=(null==e?void 0:e.rotate)||3}animateProps(){return{from:this.generateProps({rotate:"0deg",transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({rotate:`${this.rotate}deg`}),loop:{rotate:"0deg",reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) rotate(${this.rotate}deg);
      }
    `}}class sN extends eN{constructor(e){super(QL.Spin),this.rotate=(null==e?void 0:e.rotate)||-720}animateProps(){return{from:this.generateProps({rotate:"0deg",transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({rotate:`${this.rotate}deg`}),loop:{rotate:"0deg",reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) rotate(${this.rotate}deg);
      }
    `}}class lN extends eN{constructor(e){super(QL.Forward),this.x=(null==e?void 0:e.offsetX)||10,this.y=(null==e?void 0:e.offsetY)||0}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:`${this.y}%`}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transition-timing-function: ease-out;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${this.y}%);
      }
    `}}class uN extends eN{constructor(e){super(QL.Backward),this.x=(null==e?void 0:e.offsetX)||-10,this.y=(null==e?void 0:e.offsetY)||0}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:`${this.y}%`}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return gD`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${this.y}%);
      }
    `}}class cN extends eN{constructor(e){super(QL.Opacity),this.opacity=(null==e?void 0:e.opacity)||50}animateProps(){return{from:this.generateProps({opacity:1}),to:this.generateProps({opacity:this.opacity/100}),loop:{opacity:1,reverse:!0}}}cssProps(){return gD`
      transition-duration: 0.3s;
      transition-property: opacity;
      opacity: 1;

      &:hover, &:focus, &:active {
        opacity: ${this.opacity/100};
      }
    `}}function dN(e,t){switch(e){case QL.Skew:return new tN(t);case QL.Grow:return new rN(t);case QL.Shrink:return new nN(t);case QL.Float:return new oN(t);case QL.Sink:return new iN(t);case QL.Rotate:return new aN(t);case QL.Spin:return new sN(t);case QL.Forward:return new lN(t);case QL.Backward:return new uN(t);case QL.Opacity:return new cN(t);default:return null}}function pN(e,t){const r=dN(e,t);return null==r?void 0:r.cssProps()}function fN(){const e=[0];for(let t=1;t<=100;t++)e.push(t/100);return e}function hN(e,t,r){const[n,o]=k.useState([0,!1]),i=k.useRef(n[0]),{layoutId:a}=k.useContext(BL),s=k.useMemo((()=>document.querySelector(`div.layout[data-layoutid="${a}"]`)),[a,e]),l=k.useRef(r),u=k.useRef(Number.NEGATIVE_INFINITY),c=k.useRef(0),d=k.useCallback((e=>{const t=e.boundingClientRect,r=e.intersectionRect;if(e.target.classList.contains("playing-scroll-animation"))return;const n=e=>{c.current=e.intersectionRatio,u.current=e.boundingClientRect.top};if(function(e,t){return e>t.boundingClientRect.top}(u.current,e)&&function(e,t){return e<t.intersectionRatio}(c.current,e)){if(e.intersectionRatio>=.95||r.height>300)return n(e),o([1,!1]),void(i.current=1);if(t.top+1<r.top)return n(e),o([1,!1]),void(i.current=1)}if(function(e,t){return e<t.boundingClientRect.top}(u.current,e)&&function(e,t){return e>t.intersectionRatio}(c.current,e)&&e.intersectionRatio<=.05)return n(e),o([-1,!1]),void(i.current=-1);n(e)}),[]),p=k.useMemo((()=>{if(t&&"function"==typeof IntersectionObserver)return new IntersectionObserver((e=>{d(e[0])}),{threshold:fN(),root:null!=s?s:document})}),[d,t,s]);return k.useEffect((()=>(e&&(null==p||p.observe(e)),()=>{null==p||p.disconnect()})),[p,e]),k.useEffect((()=>{r!==l.current&&(r&&t&&(!function(e,t){const r=e.getBoundingClientRect();let n;return n=t?t.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight},i=n,!((o=r).left>=i.left+i.width||o.top>=i.top+i.height);var o,i}(e,s)?(o([-1,!0]),i.current=-1):(o([1,!0]),i.current=1)),l.current=r)}),[t,r,s,e]),t&&r?n:[0,!1]}const gN=new VL;const mN=k.forwardRef(((e,t)=>{const{parentId:r,type:n,hoverEffect:o,revert:i,configType:a,direction:s,playId:l,hoverPlayId:u,delay:c,isLastChild:d,children:p,style:f,onAnimationStart:h,onAnimationEnd:g}=e,m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["parentId","type","hoverEffect","revert","configType","direction","playId","hoverPlayId","delay","isLastChild","children","style","onAnimationStart","onAnimationEnd"]),v=k.useRef(),y=t||v,S=X((e=>{var t;return(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===Ll.Design})),[b,w]=k.useState(),[I,E]=k.useState(!S),{monitor:C}=k.useContext(BL),{type:O,configType:x,direction:T,playId:A,revert:P,playMode:D,onContextAnimationEnd:R}=function(e){var t,r;const{setting:n,playId:o,revert:i,oid:a,playMode:s,onContextAnimationEnd:l}=k.useContext(FL);let u=null==n?void 0:n.type;return u=(e===a||Array.isArray(a)&&a.includes(e))&&u&&u!==RL.None?u:null,{playId:o,type:u,configType:null===(t=null==n?void 0:n.option)||void 0===t?void 0:t.configType,direction:null===(r=null==n?void 0:n.option)||void 0===r?void 0:r.direction,revert:i,playMode:s,onContextAnimationEnd:l}}(r),_=k.useMemo((()=>{if(null!=n){let e,t;return l>0?(e=l,t=i):A>0&&D!==LL.OneByOne&&(e=A,t=P),[n,a,s,e,t,null]}return null!=O?[O,x,T,A,P,R]:[null,null,null,null,null,null]}),[n,a,s,O,x,T,l,A,i,P,D,R]);k.useEffect((()=>{w(y.current)}),[]);const L=k.useCallback((()=>{null==h||h(),!S&&C&&E(!1)}),[h,S,C]),N=k.useCallback((()=>{null==h||h(),y.current.classList.add("playing-scroll-animation")}),[h,y]),M=k.useCallback((()=>{null==g||g(),d&&R&&R(),!S&&C&&Ky((()=>{E(!0)}))}),[g,d,R,S,C]),j=k.useCallback((()=>{null==g||g(),y.current.classList.remove("playing-scroll-animation")}),[g,y]),U=function(e){const{type:t,revert:r,configType:n,direction:o,delay:i,playId:a,onAnimationStart:s,onAnimationEnd:l}=e,u=k.useRef(0),c=k.useMemo((()=>new VL),[]),d=k.useMemo((()=>XL(t,{configType:n,direction:o})),[t,n,o]),[p,f]=ca((()=>d?d.initProps():$L),[d]),h=k.useCallback((()=>{d&&(f.stop(),f.start(Object.assign(Object.assign({},d.animateProps()),{delay:i,onStart:s,onRest:()=>{null==l||l()}})))}),[d,f,i,s,l]),g=k.useCallback((e=>{d&&(f.stop(),f.start(Object.assign(Object.assign({},c.animateProps()),{onRest:e})))}),[d,f,c]);return k.useEffect((()=>{d&&a>u.current&&(u.current=a,r?g():i>0?g(h):h())}),[d,a,r,i,g,h]),a>0&&null!=d?p:0}({type:_[0],configType:_[1],direction:_[2],playId:_[3],revert:_[4],delay:c,onAnimationStart:L,onAnimationEnd:M}),F=function(e){const{effect:t,playId:r}=e,n=k.useRef(0),o=k.useMemo((()=>dN(null==t?void 0:t.type,null==t?void 0:t.setting)),[t]),[i,a]=ca((()=>ZL),[]),s=k.useCallback((()=>{o&&(a.stop(),a.start(Object.assign(Object.assign({},o.animateProps()),{config:{duration:300}})))}),[o,a]);return k.useEffect((()=>{o&&r>n.current&&(n.current=r,s())}),[o,r,s]),r>0&&null!=o?i:null}({effect:o,playId:u}),B=function(e){const{type:t,configType:r,direction:n,ref:o,canMonitor:i,enableMonitor:a,onAnimationStart:s,onAnimationEnd:l}=e,u=k.useMemo((()=>XL(t,{configType:r,direction:n})),[t,r,n]),[c,d]=hN(o,null!=u&&i,a),p=k.useRef([c,d]),[f,h]=ca((()=>u?u.initProps():$L),[u]),g=k.useCallback((e=>{u&&(h.stop(),h.start(Object.assign(Object.assign({},u.animateProps()),{immediate:e,onStart:e?null:s,onRest:e?null:l})))}),[u,h,s,l]),m=k.useCallback((()=>{u&&(h.stop(),h.start(gN.animateProps()))}),[u,h]);return k.useEffect((()=>{c===p.current[0]&&d===p.current[1]||(c<0?m():c>0&&g(d),p.current=[c,d])}),[g,m,c,d]),i&&a&&0!==c&&null!=u?f:0}({type:_[0],configType:_[1],direction:_[2],ref:b,canMonitor:C,enableMonitor:!S&&I,onAnimationStart:N,onAnimationEnd:j}),$=U||F||B;let G=f;return $&&(G=Object.assign({},f,$)),k.createElement(Va.div,Object.assign({style:G,ref:y},m),p)}));var vN=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};function yN(e){const{children:t,style:r,oid:n,className:o=""}=e,i=vN(e,["children","style","oid","className"]),a=k.useRef();let s=k.useContext(FL);((null==s?void 0:s.oid)!==n||Array.isArray(null==s?void 0:s.oid)&&!s.oid.includes(n))&&(s={});const l="string"==typeof r?JSON.parse(r):Object.assign({},r),u=k.Children.count(e.children),c=u>0?k.Children.map(e.children,(e=>{var t;const r=e,{layoutId:n,layoutItemId:o}=null!==(t=null==r?void 0:r.props)&&void 0!==t?t:{};return null==n||null==o||function(e,t){var r,n,o;const i=null===(r=jy().getState().appConfig.layouts[e])||void 0===r?void 0:r.content[t],{effect:a}=null!==(n=null==i?void 0:i.setting)&&void 0!==n?n:{};let s=null===(o=null==a?void 0:a[DL.ScrollIntoView])||void 0===o?void 0:o.type;return s=s&&s!==RL.None?s:null,null!=s}(n,o)?null:o})).filter((e=>null!=e)):[];return k.createElement("div",Object.assign({className:`layout-animation ${o}`,style:l,ref:a},i),e.children&&k.Children.map(e.children,((e,t)=>{var r,n;if(e){const o=e,{layoutId:i,layoutItemId:a}=null!==(r=o.props)&&void 0!==r?r:{};let l=-1;null!=i&&null!=a&&(l=c.indexOf(a));const{setting:d}=s,p=(null===(n=null==d?void 0:d.option)||void 0===n?void 0:n.parentMode)===ML.AllAtOnce?0:250;return k.cloneElement(e,{playId:null!=d?s.playId:null,delay:l>=0?l*p:0,isLastChild:t===u-1})}return null})))}const SN="4px";function bN(e,t){return t.toFixed("px"===e?0:1)+e}function wN(e){return"object"==typeof e?`${e.distance}${e.unit}`:e}function IN(e){let t="unset";if(e&&e.image){switch(e.fillType){case"fit":t="contain";break;case"fill":t="cover";break;case"stretch":t="100% 100%";break;default:t="auto"}return t}return t}function EN(e){var t;const{dialogBackground:r,border:n,borderRadius:o,boxShadow:i}=e;let a="unset",s="unset";if(o){const e=o.number[0],t=void 0!==o.number[1]?o.number[1]:e,r=void 0!==o.number[2]?o.number[2]:e,n=void 0!==o.number[3]?o.number[3]:e;a=`${e}${o.unit} ${t}${o.unit}`,s=`${r}${o.unit} ${n}${o.unit}`}return{backgroundColor:r&&r.color?r.color:"transparent",backgroundImage:(null===(t=null==r?void 0:r.image)||void 0===t?void 0:t.url)?`url(${r.image.url})`:"unset",backgroundRepeat:r&&r.image&&"tile"===r.fillType?"repeat":"no-repeat",backgroundSize:IN(r),borderStyle:n&&n.color&&n.width?`${wN(n.width)} ${n.type} ${n.color}`:"none",borderRadiusTopStyle:a,borderRadiusBottomStyle:s,borderRadiusStyle:o?`${a} ${s}`:"unset",boxShadowStyle:i&&i.color?`${wN(i.offsetX)} ${wN(i.offsetY)}\n      ${wN(i.blur)} ${wN(i.spread)} ${i.color}`:"none"}}const CN={none:"shadow-none",small:"shadow-sm",default:"shadow",large:"shadow-lg"};function ON(e){var t;return(null===(t=e.boxShadow)||void 0===t?void 0:t.presetStyle)&&(e=e.set("boxShadow",function(e){if(e===CN.none)return null;const t={offsetX:"0px",offsetY:"0px",blur:"0px",spread:"0px",color:""};switch(e){case CN.small:t.blur="6px",t.spread="2px",t.color="rgba(0,0,0,0.15)";break;case CN.default:t.blur="10px",t.spread="4px",t.color="rgba(0,0,0,0.2)";break;case CN.large:t.blur="20px",t.spread="6px",t.color="rgba(39,60,70,0.2)"}return t}(e.boxShadow.presetStyle))),e}function xN(e){var t,r,n;const o=parseFloat(null===(t=e.spread)||void 0===t?void 0:t.split("px")[0])||0,i=parseFloat(null===(r=e.offsetX)||void 0===r?void 0:r.split("px")[0])||0,a=parseFloat(null===(n=e.offsetY)||void 0===n?void 0:n.split("px")[0])||0,s=Math.max(o-a,0),l=Math.max(o+a,0),u=Math.max(o-i,0);return{spread:o,offsetX:i,offsetY:a,shadowPadding:`${s}px ${Math.max(o+i,0)}px ${l}px ${u}px`}}function TN(e,t,r,n){var o;e=ON(e);const{borderRadius:i,interactionType:a}=e,s=EN(e),l=e.overlayColor||(e.isOpenerDlg?"var(--dark-900)":"transparent"),u=`app-dialog-wrap-${e.id}`,c=a===om.ButtonBlock?95:a===om.ButtonInline?64:59,d=a?`calc(100% - ${c}px)`:"100%";let p="0";(null===(o=e.boxShadow)||void 0===o?void 0:o.color)&&(p=xN(e.boxShadow).shadowPadding);let f="100%",h="unset";n.position===nm.Center&&(f="%"==(n.height.includes("%")?"%":"px")?r*parseFloat(n.height.split("%")[0])/100+"px":n.height,h=`calc(50% - ${parseFloat(f.split("px")[0])/2+"px"})`);const g=i&&a?`${s.borderRadiusTopStyle} 0 0`:s.borderRadiusStyle,m=i?`0 0 ${s.borderRadiusBottomStyle}`:"unset";return gD`
    body {

      @keyframes aBlink {
        from { background-color: var(--danger-700); }
        50% { background-color: var(--danger-700); }
        51%{background-color: transparent;}
        to { background-color: transparent; }
      }

      .app-dialog-wrap{

        &.${u}{
          display: ${t?"inherit":"none"};
          &.no-backdrop {
            pointer-events: none;
            .modal-content {
              pointer-events: auto;
            }
          }
          .app-dialog{
            margin: 0!important;
            max-width: 100vw;
            max-height: 100vh;

            .app-dialog-content{
              padding: ${p}; /* decided by shadow*/
              overflow-y: auto;

              border: none;
              box-shadow: unset;
              background-color: transparent;
              border-radius:  ${s.borderRadiusStyle};

              &.overflow-visible{
                overflow: visible;
              }

              .app-dialog-animation-content{
                flex-shrink: 0;
                /* height: ${f} !important; */
                height: ${f};

                border: ${s.borderStyle};
                border-radius:  ${s.borderRadiusStyle};
                box-shadow: ${s.boxShadowStyle};
                background-color: ${s.backgroundColor};
                background-image: ${s.backgroundImage};
                background-position: center center;
                background-repeat: ${s.backgroundRepeat};
                background-size: ${s.backgroundSize};

                .dialog-content{
                  padding: 0;
                  height: ${d};
                  border-radius:  ${g};
                }

                .dialog-footer{
                  overflow-x: auto;
                  border-radius:  ${m};
                  &.has-mask {
                    pointer-events: none;
                    user-select: none;
                  }

                  .cbx-animation{
                    margin-right: 0.5rem;
                    width: 16px;
                    height: 16px;
                    border: 2px solid var(--light-600);
                    animation: aBlink 500ms infinite;
                  }
                  .btn {
                    min-width: 6.25rem;
                  }
                }
              }

              .app-dialog-resize-container{
                touch-action: none;
                .app-dialog-resize-handlers{
                  &.resize-center{
                    top: ${h};
                    .dialog-resize-bottom{
                      top: calc(${f} - ${SN});
                    }
                    .dialog-resize-left, .dialog-resize-right{
                      height: ${f};
                    }
                  }
                }
              }

            }
          }
          .app-dialog-backdrop{
            background-color: ${l};
          }
        }
      }
    }
  `}function AN(e){let t;const r=e.width.includes("%")?"100%":e.width;switch(e.position){case nm.Left:t=gD`
        &.app-dialog{
          margin: 0px;
          width: ${e.width};
        }
        .app-dialog-content{
          height: 100vh;

          .app-dialog-resize-container{
            width: ${r};
            max-width: 100%;
            height: 100vh;
          }
        }
      `;break;case nm.Right:t=gD`
        &.app-dialog{
          margin: 0px;
          float: right;
          width: ${e.width};
        }
        .app-dialog-content{
          height: 100vh;

          .app-dialog-resize-container{
            width: ${r};
            max-width: 100%;
            height: 100vh;
          }
        }
      `;break;case nm.Top:t=gD`
        &.app-dialog{
          margin: 0px;
          height: 100%;
        }
        .app-dialog-content{
          width: 100vw;
          height: ${e.height};

          .app-dialog-resize-container{
            height: ${e.height.includes("%")?"100%":e.height};
            .app-dialog-resize-handlers{
              .dialog-resize-bottom{
                bottom: calc(100vh - ${e.height});
              }
            }
          }
        }
      `;break;case nm.Bottom:t=gD`
        &.app-dialog{
          position: absolute;
          bottom: 0px;
          margin: 0px;
          height: ${e.height};
        }
        .app-dialog-content{
          width: 100vw;
          height: 100%;

          .app-dialog-resize-container{
            height: ${e.height.includes("%")?"100%":e.height};
          }
        }
      `;break;case nm.Center:t=gD`
        &.app-dialog::before{
          height: 100vh;
        }
        .app-dialog-content{
          width: ${e.width};
          max-height: 100vh;
          margin: 0 auto;

          .app-dialog-resize-container{
            .app-dialog-resize-handlers{
              position: fixed;
              width: ${e.width}; /* Do not add height since it could be a mask */

              .resize-handler{
                position: absolute;
                &.dialog-resize-bottom{
                  width: ${r};
                }
                &.dialog-resize-top{
                  width: ${r};
                  top: 0;
                }
                &.dialog-resize-left{
                  left: 0;
                }
                &.dialog-resize-right{
                  left: calc(100% - ${SN});
                }
              }
            }
          }
        }
      `}return t}function PN(e,t){var r;const n=EN(e=ON(e)),o="transparent"===n.backgroundColor?"var(--light)":n.backgroundColor,i=null===(r=e.boxShadow)||void 0===r?void 0:r.color,a=e.border&&e.border.width&&e.border.color,s="0 0 10px 1px var(--light-600)",l="12px";let u=0,c=0,d="0 auto";if(i){const t=xN(e.boxShadow),{spread:r,offsetX:n,offsetY:o}=t;u=0===r?Math.abs(n):r>0?2*r:Math.min(Math.abs(n)+r,0),c=0===r?Math.abs(o):r>0?2*r:Math.min(Math.abs(o)+r,0),d=t.shadowPadding}const p=`calc(${t.width} - ${u}px)`,f=`calc(${t.height} - ${c}px)`;let h=null,g=null;return e.border&&e.border.width&&e.border.color&&(h=e.border.color,g=e.border.width),gD`
    &.app-dialog{
      /* margin: 0.5rem !important; */
      margin: 0 !important;
      border-radius:  ${n.borderRadiusStyle};
      background-color: transparent;
      border: none;
      box-shadow: unset;

      &.dialog-animation-playing{
        .jimu-popper--arrow{
          visibility: hidden !important;
        }

        .popper-box{
          overflow: visible !important; /*for animation is playing*/

          .app-dialog-container{
            box-shadow: ${i?n.boxShadowStyle:s};
          }
        }
      }
      &.dialog-animation-end{

        &[data-popper-placement^="top"] .jimu-popper--arrow{
          &::before{
            border-top-color: ${h};
          }
          &::after{
            border-top-color: ${o};
            bottom: ${g};
          }
        }

        &[data-popper-placement^="bottom"] .jimu-popper--arrow{
          &::before{
            border-bottom-color: ${h};
          }
          &::after{
            border-bottom-color: ${o};
            top: ${g};
          }
        }

        &[data-popper-placement^="left"] .jimu-popper--arrow{
          &::before{
            border-left-color: ${h};
          }
          &::after{
            border-left-color: ${o};
            right: ${g};
          }
        }

        &[data-popper-placement^="right"] .jimu-popper--arrow{
          &::before{
            border-right-color: ${h};
          }
          &::after{
            border-right-color: ${o};
            left: ${g};
          }
        }

        &[data-popper-placement^="left"],
        &[data-popper-placement^="right"],
        &[data-popper-placement^="top"],
        &[data-popper-placement^="bottom"]{
          .popper-box{
            box-shadow: ${i?"unset":s};
          }
        }
      }

      .popper-box{
        max-width: calc(100vw - ${l});
        max-height: calc(100vh - ${l});
        width: ${t.width};
        height: ${t.height};
        border-radius:  ${n.borderRadiusStyle};
      }

      .app-dialog-animation-content{
        height: 100%;

        .app-dialog-container{
          overflow-y: auto;
          margin: ${d};
          max-width: calc(100vw - ${l} - ${u+"px"});
          max-height: calc(100vh - ${l} - ${c+"px"});
          width: ${p};

          border: ${a?n.borderStyle:"none"};
          box-shadow: ${i?n.boxShadowStyle:"unset"};
          outline: ${i&&!a?"1px solid var(--light-600)":"unset"};
          border-radius:  ${n.borderRadiusStyle};

          .app-dialog-content{
            width: 100%;
            height: ${f};
            border-radius:  ${n.borderRadiusStyle};
            background-color: ${o} ;
            background-image: ${n.backgroundImage};
            background-position: center center;
            background-repeat: ${n.backgroundRepeat};
            background-size: ${n.backgroundSize};
          }
        }
      }

    }
  `}const{useEffect:DN,useState:RN,useRef:_N}=k,kN=function({dialogJson:e,isOpen:t,jimuUI:r,jimuLayout:n,loadingCallBack:o,messages:i,cbxAnimation:a,isChecked:s,setCbxState:l,closeDialog:u}){var c,d,p,f,h,g;const m=X((e=>e.appRuntimeInfo.currentPageId)),v=X((e=>e.appRuntimeInfo.appMode===Ll.Design)),y=X((t=>e.layout[t.browserSizeMode]||e.layout[t.appConfig.mainSizeMode])),S=_N(!1),b=_N(!1),[w,I]=RN(v?null:KL()),[E,C]=RN(v?null:KL()),O=X((t=>{var r;return(null===(r=t.appRuntimeInfo.animationPreview)||void 0===r?void 0:r.dialogId)===e.id?t.appRuntimeInfo.animationPreview:null}),he),x=_N(),T=Oe();function A(){var t;(null===(t=e.effect)||void 0===t?void 0:t.type)!==RL.None&&(b.current=!1,C(KL()))}function P(){var t;(null===(t=e.oneByOneEffect)||void 0===t?void 0:t.type)!==RL.None&&(S.current=!1,I(KL()))}DN((()=>(v||(A(),P()),()=>{})),[v,e.id,m]),DN((()=>{O&&(O.playMode!==LL.AsOne&&P(),O.playMode!==LL.OneByOne&&A())}),[O]);const D=k.useCallback((()=>{b.current&&(b.current=!1,o(!1),C(-1))}),[o]);let R=null,_=null,L=null;const N=b.current?null:(b.current=!0,E);(null===(c=e.effect)||void 0===c?void 0:c.type)!==RL.None&&N&&(R=null===(d=e.effect)||void 0===d?void 0:d.type,_=null===(f=null===(p=e.effect)||void 0===p?void 0:p.option)||void 0===f?void 0:f.configType,L=null===(g=null===(h=e.effect)||void 0===h?void 0:h.option)||void 0===g?void 0:g.direction);const{ModalBody:M,ModalFooter:j}=r,{LayoutEntry:U}=n;return fD(FL.Provider,{value:{setting:!t||v&&!(null==O?void 0:O.id)?null:e.oneByOneEffect,playId:S.current?null:(S.current=!0,w),oid:y}},fD(mN,{type:R,configType:_,direction:L,playId:N,parentId:null,ref:x,onAnimationEnd:D,className:"app-dialog-animation-content"},e.mode===rm.Fixed&&fD(M,{className:"dialog-content"},fD(U,{layouts:e.layout,className:"w-100 h-100"})),e.mode===rm.Fixed&&e.interactionType&&fD(j,{onClick:()=>{jL(T)},className:Re()("dialog-footer",{"d-block":e.interactionType===om.ButtonBlock,"has-mask":v})},fD("div",{className:"d-flex flex-grow-1 overflow-hidden text-nowrap"},fD(r.Label,{centric:!0,check:!0,className:"overflow-hidden mb-1",style:{fontSize:e.interactionStyles.textSize,textOverflow:"ellipsis",cursor:v?"inherit":"pointer"}},a?fD("div",{className:"cbx-animation"}):fD(r.Checkbox,{className:"mr-2",style:{cursor:"pointer"},onChange:e=>{l(e.target.checked)},checked:s}),fD("span",{className:"text-break overflow-hidden",style:{textOverflow:"ellipsis",width:"calc(100% - 16px)"}},e.interactionStyles.text||i(e.confirmBeforeClose?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText")))),e.interactionType!==om.NoButton&&fD("div",{className:"d-flex flex-row-reverse"},fD(r.Button,{icon:!0,type:"primary",disabled:e.interactionType&&e.confirmBeforeClose&&!s,onClick:e=>{u()},style:{fontSize:e.interactionStyles.buttonTextSize}},e.interactionStyles.buttonText||i("ok")))),e.mode===rm.Anchored&&fD("div",{className:"app-dialog-container"},fD("div",{className:"app-dialog-content"},fD(U,{layouts:e.layout,className:"w-100 h-100"})))))};const{useEffect:LN,useState:NN,useRef:MN}=k;let jN=null;function UN(e,t,r,n,o,i,a,s){var l,u;let c=!1;if(s===t.id&&!t.isSplash&&!r.isOpenByPage&&!t.confirmBeforeClose)return c;if(t.isSplash||r.isOpenByPage){const s=t.isSplash?t.id:`${e}-${t.id}`;if(r.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose)){const e=BN(s,n,o);c="true"===kg(e.newKey)||"true"===kg(e.oldKey),c&&FN(i,s,a),t.confirmBeforeClose||c||(c=null===(l=null==i?void 0:i[s])||void 0===l?void 0:l.isClosed)}else c=null===(u=null==i?void 0:i[s])||void 0===u?void 0:u.isClosed}return c}function FN(e,t,r){var n;(null===(n=null==e?void 0:e[t])||void 0===n?void 0:n.isClosed)||r(Ow(e=(e||Ae({})).setIn([t,"isClosed"],!0)))}const BN=(e,t,r)=>{const n=Eg();return{oldKey:`${n}-${"draft"===t?"draft":"release"}-${e}-${r}`,newKey:`${n}-${t}-${r}-${e}`}};function $N(){return e=this,t=void 0,n=function*(){return yield ry("jimu-ui",["Modal","ModalBody","ModalFooter","Checkbox","Button"])},new((r=void 0)||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}const GN=function(e){var t,{dialogJson:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["dialogJson"]);const[o,i]=NN(null),[a,s]=NN(null),[l,u]=NN(null),[c,d]=NN(null),p=X((e=>e.queryObject.disable_window_focus));null===jN&&(jN=p||"false");const f=X((e=>e.queryObject.draft))?"draft":"published",h=X((e=>e.appConfig.timestamp)),g=X((e=>e.appRuntimeInfo.currentPageId)),m=X((e=>e.appConfig.pages[g].autoOpenDialogId)),v=X((e=>e.appRuntimeInfo.currentDialogId)),y=X((e=>e.appRuntimeInfo.appMode===Ll.Design)),S=X((e=>{var t,r;return null===(r=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===r?void 0:r.lockLayout})),b=X((e=>e.browserSizeMode)),w=X((e=>{var t,r,n;return null===(n=null===(r=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===r?void 0:r.viewPortSize)||void 0===n?void 0:n[b]}))||kd[b][1],[I,E]=NN(window.innerHeight),C=window.jimuConfig.isInBuilder?w.height:I,O=Oe(),x=(()=>{const e=lT();return k.useCallback(((t,r)=>e.formatMessage({id:t,defaultMessage:gS[t]},r)),[e])})(),T=X((e=>Uv(e.queryObject.dlg,e.appConfig))),A=X((e=>e.appRuntimeInfo.dialogInfos)),P=X((e=>{var t;return r.isSplash?r.id:e.appConfig.dialogs&&(null===(t=e.appConfig.dialogs[Object.keys(e.appConfig.dialogs).find((t=>e.appConfig.dialogs[t].isSplash))])||void 0===t?void 0:t.id)}),he),[D,R]=NN(n.isOpenByPage&&v===P||r.id===T&&v!==T||v===r.id),_=n.isOpenByPage?g+"-"+r.id:r.id,[L,N]=NN(!(!A||!A[_])&&A[_].checked),[M,j]=NN(!0),U=r.sizeMode[b]||r.sizeMode[Dl.Large],F=U.position===nm.Center,B=MN(null),[$,G]=NN(null),[W,V]=NN(!0),[H,z]=NN(r.effect&&r.effect.type!==RL.None),[q,Y]=NN(!1),J=e=>{var t;return null===(t=null==A?void 0:A[e])||void 0===t?void 0:t.isClosed},K=()=>y&&!S&&window.jimuConfig.isInBuilder,Q=()=>{E(window.innerHeight)};LN((()=>{if(K()&&l&&c){const e=R_((()=>{if($&&$.unset(),B.current){const e=r.sizeMode[b]?b:Dl.Large;G(function(e,t,r,n,o,i){let a,s,l,u,c,d;const p=r.sizeMode[n],f=p.position,h=jy().getState().appContext.isRTL;let g;f===nm.Center?g={top:".dialog-resize-top",left:".dialog-resize-left",bottom:".dialog-resize-bottom",right:".dialog-resize-right"}:f===nm.Top?g={bottom:".dialog-resize-bottom"}:f===nm.Bottom?g={top:".dialog-resize-top"}:f===nm.Left?g={right:".dialog-resize-right"}:f===nm.Right&&(g={left:".dialog-resize-left"});const m=p.position!==nm.Top&&p.position!==nm.Bottom&&parseFloat(p.width.includes("%")?p.width.split("%")[0]:p.width.split("px")[0]),v=p.position!==nm.Left&&p.position!==nm.Right&&parseFloat(p.height.includes("%")?p.height.split("%")[0]:p.height.split("px")[0]),y=document.querySelector(`div[id="${r.id}"]`),S=y.querySelector("div.app-dialog-resize-handlers"),b=S.querySelector("span.dialog-resize-left"),w=S.querySelector("span.dialog-resize-right"),I=S.querySelector("span.dialog-resize-top"),E=S.querySelector("span.dialog-resize-bottom");return e(t).resizable({edges:g}).on("resizestart",(e=>{e.stopPropagation(),a=0,s=0;const r=t.getBoundingClientRect();c=r.width,d=r.height,t.style.minWidth="0px",t.style.minHeight="0px",i(!1)})).on("resizemove",(e=>{e.stopPropagation();const r=e.deltaRect;a+=r.width*(h?-1:1),s+=r.height,l=a,u=s;let n=m&&`${c+a}px`,o=v&&`${d+s}px`;if(p.position===nm.Center&&p.aspectRatio)if(0===s){const e=(c+a)/c*d;u=e-d,o=e+"px"}else{const e=(d+s)/d*c;l=e-c,n=e+"px"}t.style.width=n,t.style.height=o,p.position===nm.Left||p.position===nm.Right?y.style.width=n:p.position===nm.Bottom?y.style.height=o:p.position===nm.Center&&(y.querySelector("div.app-dialog-content").style.width=n,y.querySelector("div.app-dialog-animation-content").style.width=n,y.querySelector("div.app-dialog-animation-content").style.height=o,S.style.width=n,S.style.top=`calc(50% - ${(d+u)/2}px)`),I&&(I.style.width=n),E&&(E.style.width=n,E.style.top=`calc(${d+u}px - ${SN})`),b&&(b.style.height=o),w&&(w.style.height=o)})).on("resizeend",(e=>{e.stopPropagation(),i(!0),t.style.width=null,t.style.minWidth=null,t.style.height=null,t.style.minHeight=null,p.position===nm.Left||p.position===nm.Right?y.style.width=null:p.position===nm.Bottom?y.style.height=null:p.position===nm.Center&&(y.querySelector("div.app-dialog-content").style.width=null,y.querySelector("div.app-dialog-animation-content").style.width=null,y.querySelector("div.app-dialog-animation-content").style.height=null,S.style.width=null,S.style.top=null),I&&(I.style.width=null),E&&(E.style.width=null,E.style.top=null),b&&(b.style.height=null),w&&(w.style.height=null);let r=null,a=null;m&&(r=bN(p.width.includes("px")?"px":"%",m*(c+l)/c)),v&&(a=bN(p.height.includes("px")?"px":"%",v*(d+u)/d));const s=jy().getState().appConfig.dialogs[jy().getState().appRuntimeInfo.currentDialogId].setIn(["sizeMode",n,"width"],null!=r?r:p.width).setIn(["sizeMode",n,"height"],null!=a?a:p.height);o().editDialog(s).exec()}))}(c,B.current,r,e,l,j))}}),B.current?0:1e3);e()}}),[y,S,v,r.sizeMode[b],U.position,U.width,U.height,l,c]),LN((()=>{N(!1)}),[v]),LN((()=>{z(r.effect&&r.effect.type!==RL.None)}),[r.effect,v]),LN((()=>{var e;Promise.all([$N(),UL()]).then((e=>{i(e[0]),s(e[1])})),window.jimuConfig.isInBuilder?(l||ry("jimu-for-builder",["getAppConfigAction"]).then((e=>{u((()=>e.getAppConfigAction))})),c||ry("jimu-core/dnd").then((e=>{d((()=>e.interact))}))):window.jimuConfig.isBuilder||(null===(e=U.height)||void 0===e?void 0:e.includes("%"))&&window.addEventListener("resize",Q);const t=BN(P,f,h),o="true"===kg(t.newKey)||"true"===kg(t.oldKey);return(r.isSplash&&!J(P)&&(window.jimuConfig.isInBuilder||!o)||n.isOpenByPage&&(P&&(J(P)||window.jimuConfig.isInBuilder||o)||!P))&&!UN(g,r,n,f,h,A,O)&&r.id!==T&&r.id!==v&&(O(Cw(r.id)),O(_w(null))),()=>{var e;y&&$&&$.unset(),!window.jimuConfig.isBuilder&&(null===(e=U.height)||void 0===e?void 0:e.includes("%"))&&window.removeEventListener("resize",Q);const t=jy().getState(),r=t.appRuntimeInfo.dialogInfos;if(r){const e=r[te()];(null==e?void 0:e.canClose)&&ee(t)}}}),[]);const Z=null===(t=null==A?void 0:A[v])||void 0===t?void 0:t.alertVersion;LN((()=>{Z>=1&&(Y(!0),R_((()=>{Y(!1)}),800)())}),[Z]),LN((()=>{if(kg("exb-link-dialog"))return;let e=!1;(r.isSplash||n.isOpenByPage||v)&&(e=!UN(g,r,n,f,h,A,O,T)),e!==D&&R(e)}));const ee=e=>{var t,o,i;if(jN="false",r.isSplash||n.isOpenByPage){!function(e,t,r,n,o,i,a){var s;const l=t.isSplash?t.id:`${e}-${t.id}`;r.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose&&(null===(s=null==i?void 0:i[l])||void 0===s?void 0:s.checked))&&Lg(BN(l,n,o).newKey,"true"),FN(i,l,a)}(g,r,n,f,h,(null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.dialogInfos)||A,O);const i=re(e);if(O(Cw(i)),R(!1),i){const e=null===(o=document.getElementById(i))||void 0===o?void 0:o.parentNode;null==e||e.focus()}else Ex(null),O(_w(Bl.Body))}else FN((null===(i=null==e?void 0:e.appRuntimeInfo)||void 0===i?void 0:i.dialogInfos)||A,r.id,O),Ex(null),O(Cw(null)),O(_w(Bl.Body))},te=()=>n.isOpenByPage?g+"-"+r.id:r.id,re=e=>{var t,o,i,a,s,l,u;let c=T,d=v;if((r.isSplash||n.isOpenByPage)&&(c=null==e?void 0:e.queryObject.dlg,d=null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId,window.jimuConfig.isInBuilder)){if(r.isSplash){if(m&&!(null===(a=null===(i=e?null===(o=e.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos:A)||void 0===i?void 0:i[g+"-"+m])||void 0===a?void 0:a.isClosed))return m;if(r.isSplash&&c===r.id&&(null===(u=null===(l=null===(s=null==e?void 0:e.appRuntimeInfo)||void 0===s?void 0:s.dialogInfos)||void 0===l?void 0:l[r.id])||void 0===u?void 0:u.isClosed))return null}return c}let p=r.isSplash&&(m||c)||n.isOpenByPage&&d!==c&&c||null;return d===p&&(p=null),p};if(!o||!a)return null;const{Modal:ne}=o,oe=Vg().Global,ie=r.blockPage||r.isOpenerDlg;return fD(ne,{"aria-label":r.label,autoFocus:"true"!==jN,isOpen:D,fade:!1,disableActivateOverlay:!0,toggle:()=>{var e,t;if(y)jL(O);else if(r.interactionType&&r.confirmBeforeClose&&!L){const r=(A||Ae({})).set(te(),{canClose:!1,checked:!1,alertVersion:(null!==(t=null===(e=null==A?void 0:A[te()])||void 0===e?void 0:e.alertVersion)&&void 0!==t?t:0)+1,isClosed:!1});O(Ow(r))}else D&&r.closeWhenClickOverlay?ee():jL(O)},centered:F,css:AN(U),id:r.id,className:"app-dialog",wrapClassName:`app-dialog-wrap app-dialog-wrap-${r.id} ${!0===ie?"":"no-backdrop"}`,modalClassName:"app-dialog-modal",backdropClassName:"app-dialog-backdrop",backdrop:!0===ie,contentClassName:Re()("app-dialog-content",{"overflow-visible h-auto":!M||H}),onOpened:()=>{V(!1)}},fD(oe,{styles:TN(r,D,C,U)}),fD("div",{className:"app-dialog-resize-container",css:gD`
    .app-dialog-resize-handlers{
        max-width: 100vw;

      .resize-handler{
        width: 100%;
        height: 100%;
        position: fixed;
        z-index: 1;

        .resize-handler-icon {
          position: absolute;
          background-color: var(--black);
          border: 1px solid var(--white);
        }
        &.dialog-resize-top, &.dialog-resize-bottom {
          height: ${SN};
          cursor: ns-resize;
          .resize-handler-icon{
            left: min(50%, 50vw);
            width: ${38}px;
            margin-left: ${-19}px;
          }
        }
        &.dialog-resize-top{
          top: 0;
        }
        &.dialog-resize-left, &.dialog-resize-right{
          width: ${SN};
          top: 0;
          cursor: ew-resize;
          .resize-handler-icon{
            top: 50%;
            height: ${38}px;
            margin-top: ${-19}px;
          }
        }
        &.dialog-resize-left{
          left: 0;
        }
        &.dialog-resize-right{
          right: 0;
        }
      }
    }
  `,ref:e=>B.current=e},fD("div",{className:"w-100 h-100"},D&&!W&&fD(kN,{dialogJson:r,isOpen:D,jimuUI:o,jimuLayout:a,cbxAnimation:q,messages:x,isChecked:L,setCbxState:e=>{N(e);const t=!r.interactionType||!r.confirmBeforeClose||e,n=(A||Ae({})).set(te(),{canClose:t,checked:e,isClosed:!1});O(Ow(n))},closeDialog:ee,loadingCallBack:e=>{z(e)}})),K()&&fD("div",{className:Re()("app-dialog-resize-handlers",{"resize-center":U.position===nm.Center})},function(e,t,r){const n=[];return e&&(t.position!==nm.Bottom&&t.position!==nm.Center||n.push(fD("span",{key:"1",className:"resize-handler dialog-resize-top"},fD("div",{className:"resize-handler-icon h-100"}))),t.position!==nm.Top&&t.position!==nm.Center||n.push(fD("span",{key:"2",className:"resize-handler dialog-resize-bottom"},fD("div",{className:"resize-handler-icon h-100"}))),t.position!==nm.Right&&t.position!==nm.Center||n.push(fD("span",{key:"3",className:"resize-handler dialog-resize-left"},fD("div",{className:"resize-handler-icon w-100"}))),t.position!==nm.Left&&t.position!==nm.Center||n.push(fD("span",{key:"4",className:"resize-handler dialog-resize-right"},fD("div",{className:"resize-handler-icon w-100"})))),n}(y,U,o.Icon))))};const{useEffect:WN,useState:VN}=k;function HN(){return e=this,t=void 0,n=function*(){return yield ry("jimu-ui",["Popper"])},new((r=void 0)||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}const zN=function({dialogJson:e,opener:t,toggle:r}){const[n,o]=VN(null),[i,a]=VN(null),[s,l]=VN(e.effect&&e.effect.type!==RL.None),u=X((e=>e.appRuntimeInfo.appMode===Ll.Design)),c=X((e=>e.appRuntimeInfo.currentDialogId)),d=X((e=>e.browserSizeMode)),p=e.sizeMode[d]||e.sizeMode[Dl.Large],f=null==n?void 0:n.getFallbackPlacementsModifier,h=k.useMemo((()=>{const e=null==f?void 0:f(["top","right","left"]);return[{name:"preventOverflow",options:{altAxis:!0,padding:6}},Object.assign({},e)]}),[f]);if(WN((()=>{Promise.all([HN(),UL()]).then((e=>{o(e[0]),a(e[1])}))}),[]),WN((()=>{u&&c===e.id&&r()}),[u]),!n||!i)return null;const{Popper:g}=n;return fD(g,{open:!0,showArrow:!!t,toggle:r,reference:t,modifiers:h,css:PN(e,p),disableActivateOverlay:e.closeWhenClickOverlay,className:Re()("app-dialog",{"dialog-animation-playing":s,"dialog-animation-end":!s})},fD(kN,{dialogJson:e,isOpen:!0,jimuUI:n,jimuLayout:i,loadingCallBack:e=>{l(e)}}))},{useEffect:qN}=k;function YN(e){const t=X((e=>e.queryObject.draft))?"draft":"published",r=X((e=>e.appConfig.timestamp)),n=X((e=>e.appRuntimeInfo.currentPageId)),o=X((e=>e.appRuntimeInfo.appMode===Ll.Design)),i=X((e=>e.browserSizeMode)),a=e.dialogJson.sizeMode[i]?i:Dl.Large,s=Oe();if(qN((()=>{e.runtime&&function(e,t){const r=jy().getState().appConfig.dialogs,n=Object.keys(r).filter((e=>r[e])),o=Eg();_g().forEach((r=>{!r.includes(t)&&n.forEach((t=>{r.includes(t)&&("draft"===e?r.includes(`${o}-draft`):r.includes(`${o}-release`)||r.includes(`${o}-published`))&&Fg(r)}))}))}(t,r)}),[e.runtime,t,r]),qN((()=>{s(xw(null))}),[o,e.dialogJson.id,n]),e.dialogJson.mode===rm.Fixed)return fD(GN,Object.assign({},e));if(window.jimuConfig.isInBuilder&&!e.opener){const t=e.dialogJson.set("mode",rm.Fixed).set("isOpenerDlg",!0).setIn(["sizeMode",a,"position"],nm.Center);return fD(GN,{dialogJson:t,opener:e.opener,isOpenByPage:e.isOpenByPage})}return fD(zN,Object.assign({},e))}var JN,KN;!function(e){e.Horizontal="H",e.Vertical="V"}(JN||(JN={})),function(e){e.Cube="CUBE",e.Cover="COVER",e.Fade="FADE",e.Push="PUSH",e.Box="BOX",e.None="None"}(KN||(KN={}));const XN={rotateX:0,rotateY:0,x:"0",y:"0"};class QN{constructor(e=!1,t=JN.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{display:e?"block":"none",rotateX:0,rotateY:0,opacity:e?1:0,x:"0",y:"0",transformOrigin:"top"}}initRotate(){return this.direction===JN.Vertical?"rotateX(-90deg)":this.isRTL?"rotateY(90deg)":"rotateY(-90deg)"}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){const o=e===t||e===r,i=this.getDiscreteOrigin(e,t,r,n);if(!o)return{display:"none",transformOrigin:""};const a={},s=this.direction===JN.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>r||n?90:-90;a.from=Object.assign({},XN,{display:"block",rotateX:this.direction===JN.Horizontal?0:e*s,rotateY:this.direction===JN.Horizontal?-e*s:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},XN,{display:"block",rotateX:0,rotateY:0,opacity:1,x:"0",y:"0",transformOrigin:i})}else a.from=Object.assign({},XN,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},XN,{display:"block",rotateX:this.direction===JN.Horizontal?0:e>t&&!n?90:-90,rotateY:this.direction===JN.Horizontal?e>t&&!n?-90*s:90*s:0,opacity:1,x:"0",y:"0",transformOrigin:i});return a}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none",transformOrigin:""};let i,a=n-r;t===r&&(a=1),i=this.direction===JN.Vertical||this.isRTL?e===t?90*(1-a):-90*a:e===t?-90*(1-a):90*a;const s=Object.assign({},XN,{display:"block",rotateX:this.direction===JN.Horizontal?0:i,rotateY:this.direction===JN.Horizontal?i:0,opacity:1,x:"0",y:"0",transformOrigin:this.getOrigin(e,t,r)});if(e===t&&o){const n={};let o;return o=this.direction===JN.Vertical||this.isRTL?90:-90,n.from=Object.assign({},XN,{display:"block",rotateX:this.direction===JN.Horizontal?0:o,rotateY:this.direction===JN.Horizontal?o:0,opacity:1,transformOrigin:this.getOrigin(e,t,r)}),n.to=s,n}return s}getOrigin(e,t,r){return e===t?this.direction===JN.Vertical?"bottom":this.isRTL?"left":"right":e===r?this.direction===JN.Vertical?"top":this.isRTL?"right":"left":void 0}getDiscreteOrigin(e,t,r,n){if(this.direction===JN.Vertical){if(e===t)return t>r||n?"bottom":"top";if(e===r)return t>r||n?"top":"bottom"}if(this.isRTL){if(e===t)return t>r||n?"left":"right";if(e===r)return t>r||n?"right":"left"}else{if(e===t)return t>r||n?"right":"left";if(e===r)return t>r||n?"left":"right"}return""}transform(e,t,r,n,o){if(t!==r&&t!==n)return null;const{rotateX:i,rotateY:a}=e;return i&&a?"perspective(1000px)":null}}class ZN{constructor(e=!1,t=JN.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{x:"0",y:"0",opacity:e?1:0,display:e?"block":"none",zIndex:0}}initOffset(e,t,r,n){if(t!==r)return 0;let o=e-n;return r===n&&(o=1),this.direction===JN.Horizontal&&this.isRTL?100*(o-1):100*(1-o)}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){if(e!==t&&e!==r)return{display:"none"};const o={},i=this.direction===JN.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>r||n?100*i:-100*i;o.from=Object.assign({},XN,{x:this.direction===JN.Horizontal?`${e}%`:"0",y:this.direction===JN.Horizontal?"0":`${e}%`,opacity:1,display:"block",zIndex:1}),o.to=Object.assign({},XN,{x:"0",y:"0",opacity:1,display:"block",zIndex:1})}else e===r&&(o.from=Object.assign({},XN,{x:"0",y:"0",opacity:1,display:"block",zIndex:0}),o.to=Object.assign({},XN,{x:"0",y:"0",opacity:1,display:"block",zIndex:0}));return o}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none"};const i=this.initOffset(n,e,t,r),a=Object.assign({},XN,{display:"block",x:this.direction===JN.Horizontal?`${i}%`:"0",y:this.direction===JN.Horizontal?"0":`${i}%`,opacity:1,zIndex:1});if(e===t&&o){const e={};let t;return t=this.direction===JN.Horizontal&&this.isRTL?-100:100,e.from=Object.assign({},XN,{display:"block",x:this.direction===JN.Horizontal?`${t}%`:"0",y:this.direction===JN.Horizontal?"0":`${t}%`,opacity:1,zIndex:1}),e.to=a,e}return a}transform(e,t,r,n,o){return null}}class eM{getInitProps(e){return{opacity:e?1:0,zIndex:1,display:e?"block":"none"}}getTransitionProps(e,t,r,n,o){return o>=0?this.getContinuousTransitionProps(e,t,r,o):this.getDiscreteTransitionProps(e,t,r)}getDiscreteTransitionProps(e,t,r){if(e!==t&&e!==r)return{display:"none"};const n={};return e===t?(n.from=Object.assign({},XN,{opacity:0,zIndex:0,display:"block"}),n.to=Object.assign({},XN,{opacity:1,zIndex:1,display:"block"})):e===r&&(n.from=Object.assign({},XN,{opacity:1,zIndex:1,display:"block"}),n.to=Object.assign({},XN,{opacity:0,zIndex:0,display:"block"})),n}getContinuousTransitionProps(e,t,r,n=1){if(e!==t&&e!==r)return{display:"none"};let o=n-r;return t===r&&(o=1),Object.assign({},XN,{display:"block",opacity:e===t?o:1-o,zIndex:e===t?1:0})}transform(e,t,r,n,o){return""}}class tM{constructor(e=!1,t=JN.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{x:"0",y:"0",opacity:e?1:0,display:e?"block":"none"}}initOffset(e,t,r,n){let o=e-n;return r===n&&(o=1),t===r?this.direction===JN.Horizontal&&this.isRTL?100*(o-1):100*(1-o):this.direction===JN.Horizontal&&this.isRTL?100*o:-100*o}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){if(e!==t&&e!==r)return{display:"none"};const o={},i=this.direction===JN.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>r||n?100*i:-100*i;o.from=Object.assign({},XN,{x:this.direction===JN.Horizontal?`${e}%`:"0",y:this.direction===JN.Horizontal?"0":`${e}%`,opacity:1,display:"block"}),o.to=Object.assign({},XN,{x:"0",y:"0",opacity:1,display:"block"})}else if(e===r){const r=e>t&&!n?100*i:-100*i;o.from=Object.assign({},XN,{x:"0",y:"0",opacity:1,display:"block"}),o.to=Object.assign({},XN,{x:this.direction===JN.Horizontal?`${r}%`:"0",y:this.direction===JN.Horizontal?"0":`${r}%`,opacity:1,display:"block"})}return o}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none"};const i=this.initOffset(n,e,t,r),a=Object.assign({},XN,{display:"block",x:this.direction===JN.Horizontal?`${i}%`:"0",y:this.direction===JN.Horizontal?"0":`${i}%`,opacity:1});if(o&&e===t){let e;e=this.direction===JN.Horizontal&&this.isRTL?-100:100;const t={};return t.from=Object.assign({},XN,{display:"block",x:this.direction===JN.Horizontal?`${e}%`:"0",y:this.direction===JN.Horizontal?"0":`${e}%`,opacity:1}),t.to=a,t}return a}transform(e,t,r,n,o){return null}}class rM{constructor(e=!1,t=JN.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{rotateX:0,rotateY:0,x:"0",y:"0",opacity:e?1:0,display:e?"block":"none",zIndex:1,transformOrigin:"top"}}initState(e,t,r,n){let o=e-n;return r===n&&(o=1),t===r?[100*(1-o),60*(1-o)]:[-100*o,-60*o]}getContinuousOrigin(e,t,r){return this.direction===JN.Vertical?e===t?"top":"bottom":e===t?this.isRTL?"right":"left":this.isRTL?"left":"right"}getDiscreteOrigin(e,t,r,n){return this.direction===JN.Vertical?e===t?t>r||n?"top":"bottom":e<t||n?"bottom":"top":this.isRTL?e===t?t>r||n?"right":"left":e<t||n?"left":"right":e===t?t>r||n?"left":"right":e<t||n?"right":"left"}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){const o=e===t||e===r,i=this.getDiscreteOrigin(e,t,r,n);if(!o)return{display:"none",transformOrigin:i};const a=this.isRTL?-1:1,s={};if(e===t){const e=t>r||n?100:-100,o=t>r||n?60:-60;s.from=Object.assign({},XN,{rotateX:this.direction===JN.Horizontal?0:-o,rotateY:this.direction===JN.Horizontal?o*a:0,x:this.direction===JN.Horizontal?e*a+"%":"0",y:this.direction===JN.Horizontal?"0":`${e}%`,opacity:0,display:"block",zIndex:1,transformOrigin:i}),s.to=Object.assign({},XN,{rotateX:0,rotateY:0,x:"0",y:"0",opacity:1,display:"block",zIndex:1,transformOrigin:i})}else{const e=t>r||n?-100:100,o=t>r||n?-60:60;s.from=Object.assign({},XN,{rotateX:0,rotateY:0,x:"0",y:"0",opacity:1,display:"block",zIndex:0,transformOrigin:i}),s.to=Object.assign({},XN,{rotateX:this.direction===JN.Horizontal?0:-o,rotateY:this.direction===JN.Horizontal?o*a:0,x:this.direction===JN.Horizontal?e*a+"%":"0",y:this.direction===JN.Horizontal?"0":`${e}%`,opacity:0,display:"block",zIndex:0,transformOrigin:i})}return s}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none",transformOrigin:""};const[i,a]=this.initState(n,e,t,r);let s=n-r;t===r&&(s=1);const l=this.isRTL?-1:1;if(e===t){const n={},u=Object.assign({},XN,{display:"block",rotateX:this.direction===JN.Horizontal?0:-a,rotateY:this.direction===JN.Horizontal?a*l:0,x:this.direction===JN.Horizontal?i*l+"%":"0",y:this.direction===JN.Horizontal?"0":`${i}%`,opacity:s,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,r)});return o?(n.from=Object.assign({},XN,{display:"block",rotateX:this.direction===JN.Horizontal?0:-60,rotateY:this.direction===JN.Horizontal?60*l:0,x:this.direction===JN.Horizontal?100*l+"%":"0",y:this.direction===JN.Horizontal?"0":"100%",opacity:s,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,r)}),n.to=u,n):u}return Object.assign({},XN,{display:"block",rotateX:this.direction===JN.Horizontal?0:-a,rotateY:this.direction===JN.Horizontal?a*l:0,x:this.direction===JN.Horizontal?i*l+"%":"0",y:this.direction===JN.Horizontal?"0":`${i}%`,opacity:1-s,transformOrigin:this.getContinuousOrigin(e,t,r),zIndex:0})}transform(e,t,r,n,o){if(t!==r&&t!==n)return null;const{x:i,y:a}=e;return null==i||null==a?null:"perspective(1000px)"}}class nM{getInitProps(e){return{opacity:e?1:0,display:e?"block":"none"}}getTransitionProps(e,t,r,n,o=1){return Object.assign({},XN,{display:e===t?"block":"none",opacity:1,zIndex:e===t?1:0})}transform(e,t,r,n,o){return""}}function oM(){var e,t;return null!==(t=null===(e=jy().getState().appContext)||void 0===e?void 0:e.isRTL)&&void 0!==t&&t}function iM(e){return Math.abs(e-Math.round(e))<1e-7}function aM(e,t){let r,n;const o=sM(e,0,1)*(t-1),i=Math.floor(o);return n=i,n=iM(o)?Math.round(o)-1:i,r=n+1,r=sM(r,0,t-1),n=sM(n,0,t-1),{previousIndex:n,progress:o,currentIndex:r}}function sM(e,t,r){return Math.max(t,Math.min(e,r))}function lM(e,t=JN.Horizontal){switch(e){case KN.Cover:return new ZN(oM(),t);case KN.Cube:return new rM(oM(),t);case KN.Fade:return new eM;case KN.Push:return new tM(oM(),t);case KN.Box:return new QN(oM(),t);default:return new nM}}function uM(e){const{useProgress:t=!1,useStep:r,progress:n,currentIndex:o,previousIndex:i,direction:a,transitionType:s,children:l,playId:u,withOneByOne:c,loop:d}=e,p=k.useRef(),f=k.useRef(),h=k.useRef(0),g=k.useRef(0),m=k.useRef(),v=k.useRef(),[y,S]=k.useState(),b=k.Children.count(l),w=k.useContext(FL),{setting:I,playId:E}=w||{},C=k.useMemo((()=>lM(s,a)),[s,a]),[O,x]=k.useMemo((()=>{let e=n,r=!1,a=!1;if(t){const t=aM(n,b);e=t.progress,Math.round(100*m.current)!==Math.round(100*e)&&(r=!0,m.current=t.progress);let o=!0;p.current===t.currentIndex-1?a=!0:iM(n*(b-1))&&t.currentIndex===p.current-1&&(o=!1),o&&(p.current=t.currentIndex,f.current=t.previousIndex)}else p.current===o&&f.current===i||(r=p.current>=0,p.current=o,f.current=i);return v.current=r,[e,a]}),[t,n,b,o,i]),[T,A]=ua(b,(e=>C.getInitProps(e===p.current)),[C]),P=(e,t,r,n=!1,o=!1)=>{var i;A.stop();const a=(null===(i=jy().getState().appRuntimeInfo)||void 0===i?void 0:i.appMode)===Ll.Design;A.start((i=>Object.assign(Object.assign({},C.getTransitionProps(i,e,t,d,r,n)),{config:{duration:400},immediate:o,onStart:()=>{var t;I&&(null!=r||!c&&a||i!==e||((null===(t=I.option)||void 0===t?void 0:t.start)===NL.AfterPrevious?S({playId:KL(),revert:!0}):S({playId:KL(),revert:!1})))},onRest:()=>{var t;I&&(null!=r||!c&&a||i!==e||(null===(t=I.option)||void 0===t?void 0:t.start)===NL.AfterPrevious&&S({playId:KL(),revert:!1}))}})))};return k.useEffect((()=>{var e;if(u>h.current)return h.current=u,v.current=!1,void P(p.current,f.current,void 0);if(v.current){const n=(null===(e=jy().getState().appRuntimeInfo)||void 0===e?void 0:e.appMode)===Ll.Design;v.current=!1,P(p.current,f.current,O,x,t&&!r||n)}})),k.useEffect((()=>{g.current=E}),[E]),k.createElement(k.Fragment,null,k.Children.map(l,((e,r)=>{var n,o,i;let a;p.current!==f.current&&(a=C.transform(T[r],r,p.current,f.current,O));const s=r===p.current,l=null!==(o=null===(n=e.props)||void 0===n?void 0:n.oid)&&void 0!==o?o:function(e){var t;const r=jy().getState(),n=r.appConfig.views[e];return null===(t=null==n?void 0:n.layout)||void 0===t?void 0:t[r.browserSizeMode]}(null===(i=e.props)||void 0===i?void 0:i.viewId);return k.createElement(Va.div,{className:"w-100 h-100 view-content",key:r,style:Object.assign({position:"absolute",transform:a},T[r])},k.createElement(FL.Provider,{value:E>g.current?{setting:s?I:null,playId:E,revert:!1,oid:l}:{setting:t?null:s&&!v.current?I:null,playId:s&&!v.current?null==y?void 0:y.playId:null,revert:null==y?void 0:y.revert,oid:l}},e))})))}function cM(e){switch(e){case KN.Cover:case KN.Cube:case KN.Push:case KN.Box:return!0;default:return!1}}const dM=s(1981).exbVersion,pM={assign:qD,defer:Ky,debounce:R_,setValue:qT,getValue:uc,isDeepEqual:Ad,throttle:function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Iu(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),R_(e,t,{leading:n,maxWait:t,trailing:o})},kebabCase:lk,cloneDeep:QS,clone:function(e){return XS(e,4)},delay:ck,merge:wk},fM={restAuth:n,restFeatureLayer:o,restPortal:Ps,restRequest:As,Sanitizer:Ul},hM={rgba:Kt,parseToRgb:Gt,rem:Pt,readableColor:function(e,t,r,n){void 0===t&&(t=pr),void 0===r&&(r=fr),void 0===n&&(n=!0);var o,i,a,s=sr(e)>.179,l=s?t:r;return!n||(o=l,i=sr(e),a=sr(o),parseFloat((i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)).toFixed(2))>=4.5)?l:s?pr:fr},lighten:ur,darken:ar,ellipsis:function(e,t){void 0===t&&(t=1);var r={display:"inline-block",maxWidth:e||"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"};return t>1?Q({},r,{WebkitBoxOrient:"vertical",WebkitLineClamp:t,display:"-webkit-box",whiteSpace:"normal"}):r},mix:dr,stripUnit:xt,math:function(e,t){var r=Et(e),n=r.match(wt);if(n&&!n.every((function(e){return e===n[0]})))throw new bt(41);return""+function(e,t){var r,n=function(e){var t={};return t.symbols=e?Q({},St.symbols,e.symbols):Q({},St.symbols),t}(t),o=[n.symbols["("].prefix],i=[],a=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(n.symbols).map((function(e){return n.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");a.lastIndex=0;var s=!1;do{var l=(r=a.exec(e))||[")",void 0],u=l[0],c=l[1],d=n.symbols[u],p=d&&!d.prefix&&!d.func,f=!d||!d.postfix&&!d.infix;if(c||(s?f:p))throw new bt(37,r?r.index:e.length,e);if(s){var h=d.postfix||d.infix;do{var g=o[o.length-1];if((h.precedence-g.precedence||g.rightToLeft)>0)break}while(It(o,i));s="postfix"===h.notation,")"!==h.symbol&&(o.push(h),s&&It(o,i))}else if(d){if(o.push(d.prefix||d.func),d.func&&(!(r=a.exec(e))||"("!==r[0]))throw new bt(38,r?r.index:e.length,e)}else i.push(+u),s=!0}while(r&&o.length);if(o.length)throw new bt(39,r?r.index:e.length,e);if(r)throw new bt(40,r?r.index:e.length,e);return i.pop()}(Et(r.replace(wt,"")),t)+(n?Et(n[0]):"")},borderRadius:function(e,t){var r,n,o,i=(o=e).charAt(0).toUpperCase()+o.slice(1);if(!t&&0!==t)throw new bt(62);if("Top"===i||"Bottom"===i)return(r={})["border"+i+"RightRadius"]=t,r["border"+i+"LeftRadius"]=t,r;if("Left"===i||"Right"===i)return(n={})["borderTop"+i+"Radius"]=t,n["borderBottom"+i+"Radius"]=t,n;throw new bt(63)},getValueAndUnit:function(e){if("string"!=typeof e)return[e,""];var t=e.match(At);return t?[parseFloat(e),t[2]]:[e,void 0]},parseToHsl:Wt,shade:gr,tint:vr};window._jimuHistory=A})(),l})())}}}));