/*! For license information please see node_modules_arcgis_map-components_dist_esm_arcgis-version-management-version-item_2_entry_js.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["node_modules_arcgis_map-components_dist_esm_arcgis-version-management-version-item_2_entry_js"],{2231:(e,i,n)=>{n.r(i),n.d(i,{arcgis_version_management_version_item:()=>t,arcgis_version_management_version_list:()=>r});var s=n(9650);const t=class{constructor(e){(0,s.r)(this,e),this.arcgisManageVersion=(0,s.c)(this,"arcgisManageVersion",7),this.versionItemElementProps=void 0}render(){const{versionItemElementProps:{currentUser:e,currentVersionIdentifier:i,hasAdvEditingUte:n,isVersioningApiAvailable:t,serviceUrl:r,strings:{actions:o},versionInfo:a}}=this,c=a.versionIdentifier.name,l=c.substring(c.lastIndexOf(".")+1),d=c.substring(0,c.lastIndexOf(".")).toUpperCase(),h=a.versionIdentifier.guid,g=`actionSwitchToVersion_${h}`,f=d.toUpperCase()===e.toUpperCase()&&t&&n,p=i.guid===a.versionIdentifier.guid,v=(0,s.h)("calcite-action",{key:"14f7c8b59b3beb9a160b10a1f7252a9c490dd96b",disabled:p,id:g,icon:"code-branch",text:"",onClick:()=>{this.arcgisManageVersion.emit({actionType:"changeVersion",serviceUrl:r,versionInfo:a})},slot:"actions-start"}),u=p?void 0:(0,s.h)("calcite-tooltip",{"overlay-positioning":"fixed",referenceElement:g},(0,s.h)("span",null,o.switchToVersion));return(0,s.h)("calcite-list-item",{key:"a031cfd07866803ae8d06f53593288d3f17fa288",description:d,label:l,selected:!1,value:h},v,u,(0,s.h)("calcite-action-menu",{key:"fb64c8bdc470942f2348073d40c894be4a88fd93","overlay-positioning":"fixed",slot:"actions-end",label:""},(0,s.h)("calcite-action",{key:"1009f3d41a1b36d1d835f4b7fc36159baa4c1320",disabled:p,icon:"code-branch",onClick:()=>{this.arcgisManageVersion.emit({actionType:"changeVersion",serviceUrl:r,versionInfo:a})},scale:"s",text:o.switchToVersion,textEnabled:!0}),(0,s.h)("calcite-action",{key:"a7e7400c15dc6151a8b68075c509c30b2a75fcb6",disabled:!f||p,icon:"code-branch-edit",onClick:()=>{this.arcgisManageVersion.emit({actionType:"editVersion",serviceUrl:r,versionInfo:a})},scale:"s",text:o.editVersion,textEnabled:!0}),(0,s.h)("calcite-action",{key:"afafe0b02b45bc233a758ac5ab1f18a7aef77d8d",disabled:!f||f&&p,icon:"trash",onClick:()=>{this.arcgisManageVersion.emit({actionType:"deleteVersion",serviceUrl:r,versionInfo:a})},scale:"s",text:o.deleteVersion,textEnabled:!0})))}get el(){return(0,s.g)(this)}},r=class{constructor(e){(0,s.r)(this,e),this.arcgisNewVersion=(0,s.c)(this,"arcgisNewVersion",7),this.arcgisGetVersions=(0,s.c)(this,"arcgisGetVersions",7),this.arcgisManageVersion=(0,s.c)(this,"arcgisManageVersion",7),this._handleFilterChange=()=>{const{versionListElementProps:{versionInfos:e}}=this,i=this._filterInputElement.value.toUpperCase();this._filteredVersionInfos=""===i?e:e.filter((e=>e.versionIdentifier.name.toUpperCase().includes(i)||e.versionIdentifier.guid.toUpperCase().includes(i))),this._filteredVersionInfos.length&&(this.currentPage=1)},this._handleNoticeClosed=()=>{this.versionListElementProps={...this.versionListElementProps,executionError:void 0}},this._handlePaginationChange=e=>{this.currentPage=e.target.startItem},this.currentPage=1,this.versionListElementProps=void 0,this._filteredVersionInfos=void 0}propertiesChangeHandler(e,i){i.versionInfos!==e.versionInfos&&(this._filteredVersionInfos=this.versionListElementProps.versionInfos,this._filterInputElement&&this._handleFilterChange())}componentWillLoad(){this._filteredVersionInfos=this.versionListElementProps.versionInfos}componentDidRender(){this._filterInputElement?.setFocus()}render(){const{currentPage:e,versionListElementProps:{closable:i,currentUser:n,currentVersionIdentifier:t,executionError:r,hasAdvEditingUte:o,heading:a,isVersioningApiAvailable:c,pageSize:l,serviceName:d,serviceUrl:h,state:g,strings:{headers:f},strings:p,versionInfos:v}}=this,u=(0,s.h)("calcite-block",{heading:f.currentVersion,description:t.name,overlayPositioning:"fixed"}),m=(0,s.h)("calcite-action",{id:"actionRefreshVersions",icon:"refresh",text:"",onClick:()=>{this.arcgisGetVersions.emit({serviceUrl:h})},slot:"header-actions-end"},(0,s.h)("calcite-tooltip",{"overlay-positioning":"fixed",referenceElement:"actionRefreshVersions"},(0,s.h)("span",null,p.actions.refreshVersions)));this._paginatedVersionInfos=this._filteredVersionInfos.length>l?this._paginate(this._filteredVersionInfos,l,e):this._filteredVersionInfos;const V=this._filteredVersionInfos.length>l?(0,s.h)("calcite-pagination",{onCalcitePaginationChange:this._handlePaginationChange,pageSize:1,startItem:e,totalItems:Math.ceil(this._filteredVersionInfos.length/l)}):void 0,_=this._paginate(this._paginatedVersionInfos,l,1).map((e=>{const i={currentUser:n,currentVersionIdentifier:t,isCurrentVersionCard:!1,hasAdvEditingUte:o,isVersioningApiAvailable:c,serviceUrl:h,strings:p,versionInfo:e};return(0,s.h)("arcgis-version-management-version-item",{versionItemElementProps:i})})),b=v.length>l?(0,s.h)("calcite-block",{heading:"",open:!0},(0,s.h)("calcite-input-text",{ref:e=>{this._filterInputElement=e},clearable:!0,icon:"search",onCalciteInputTextInput:this._handleFilterChange,placeholder:p.actions.searchVersions})):void 0,I=(0,s.h)("calcite-list",null,_),E=c&&o?(0,s.h)("calcite-fab",{appearance:"outline-fill",slot:"fab",textEnabled:!0,text:p.actions.newVersion,onClick:()=>{this.arcgisNewVersion.emit({serviceUrl:h})}}):void 0,C=r?(0,s.h)("calcite-notice",{onCalciteNoticeClose:this._handleNoticeClosed,class:"notice",closable:!0,kind:"warning",open:!0,scale:"s",slot:"footer",width:"full"},(0,s.h)("div",{slot:"message"},this._getExecutionError(r))):void 0;return(0,s.h)("calcite-flow-item",{closable:i,description:d,heading:a},(0,s.h)("calcite-panel",{loading:"executing"===g},u,(0,s.h)("calcite-panel",{heading:this._filteredVersionInfos.length?`${p.headers.manageVersions} (${this._filteredVersionInfos.length})`:p.headers.manageVersions},m,b,I,E),V,C))}_getExecutionError(e){const{versionListElementProps:{strings:{executionErrors:i}}}=this;switch(e){case"no-advanced-editing-user-type-extension":return i.noAdvancedEditingUserTypeExtension;case"no-feature-service-found":return i.noFeatureServiceFound;case"no-valid-enterprise-version":return i.notValidEnterpriseVersion;case"no-valid-version-name":return i.invalidVersionName;default:return e}}_paginate(e,i,n){return e.slice((n-1)*i,n*i)}get el(){return(0,s.g)(this)}static get watchers(){return{versionListElementProps:["propertiesChangeHandler"]}}}}}]);