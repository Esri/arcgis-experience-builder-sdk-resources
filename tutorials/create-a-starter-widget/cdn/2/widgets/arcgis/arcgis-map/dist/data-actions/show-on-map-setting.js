System.register(["jimu-core","jimu-ui","jimu-ui/advanced/map","jimu-ui/advanced/setting-components","jimu-arcgis"],(function(e,t){var o={},l={},s={},n={},i={};return{setters:[function(e){o.FormattedMessage=e.FormattedMessage,o.Immutable=e.Immutable,o.React=e.React,o.injectIntl=e.injectIntl},function(e){l.Checkbox=e.Checkbox,l.Label=e.Label,l.Radio=e.Radio},function(e){s.JimuSymbolType=e.JimuSymbolType,s.SymbolSelector=e.SymbolSelector},function(e){n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection},function(e){i.featureUtils=e.featureUtils,i.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules}],execute:function(){e((()=>{"use strict";var e={62686:e=>{e.exports=i},79244:e=>{e.exports=o},14321:e=>{e.exports=l},48993:e=>{e.exports=s},79298:e=>{e.exports=n}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var m={};a.r(m),a.d(m,{default:()=>R});var r=a(79244),c=a(14321),y=a(48993),p=a(79298);const b="Point",u="Polyline",d="Polygon",S="Use layer-defined symbols",g="Use custom symbols",h="Set as operational layers";var f=a(62686);class C extends r.React.PureComponent{constructor(e){super(e),this.onOperationalLayerCheckboxChange=e=>{var t;const o=!!(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.checked),l=this.props.config.set("isOperationalLayer",o);this.props.onSettingChange(l)},this.handleIsUseCustomSymbolOption=e=>{this.props.onSettingChange(Object.assign({},this.props.config.set("isUseCustomSymbol",e).set("symbolOption",null)))},this.onSymbolCreated=(e,t)=>{this.defaultSymbolOption=this.defaultSymbolOption.set(t,null==e?void 0:e.toJSON()),!this.props.config.symbolOption&&this.defaultSymbolOption.pointSymbol&&this.defaultSymbolOption.polylineSymbol&&this.defaultSymbolOption.polygonSymbol&&this.props.onSettingChange(Object.assign({},this.props.config.set("symbolOption",this.defaultSymbolOption)))},this.onSymbolChanged=(e,t)=>{this.props.onSettingChange(Object.assign({},this.props.config.setIn(["symbolOption",t],e.toJSON())))},this.getInitSymbolFromConfig=e=>{let t;const o=this.props.config.symbolOption;return this.jsonUtils&&(e===y.JimuSymbolType.Point?t=(null==o?void 0:o.pointSymbol)?o.pointSymbol:f.featureUtils.getDefaultSymbol("point"):e===y.JimuSymbolType.Polyline?t=(null==o?void 0:o.polylineSymbol)?o.polylineSymbol:f.featureUtils.getDefaultSymbol("polyline"):e===y.JimuSymbolType.Polygon&&(t=(null==o?void 0:o.polygonSymbol)?o.polygonSymbol:f.featureUtils.getDefaultSymbol("polygon"))),t?this.jsonUtils.fromJSON(t):null},this.jsonUtils=null,this.defaultSymbolOption=(0,r.Immutable)({}),this.state={isModulesLoaded:!1}}componentDidMount(){(0,f.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then((e=>{[this.jsonUtils]=e,this.setState({isModulesLoaded:!0})}))}render(){var e;const t=!!(null===(e=this.props.config)||void 0===e?void 0:e.isOperationalLayer),o=this.props.intl.formatMessage({id:"mapAction_Point",defaultMessage:b}),l=this.props.intl.formatMessage({id:"mapAction_Polyline",defaultMessage:u}),s=this.props.intl.formatMessage({id:"mapAction_Polygon",defaultMessage:d});return r.React.createElement("div",{className:"w-100"},r.React.createElement(p.SettingSection,{title:this.props.intl.formatMessage({id:"symbol",defaultMessage:"symbol"}),className:"pt-0"},r.React.createElement(p.SettingRow,{className:"mt-0"},r.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},r.React.createElement("div",{className:"align-items-center d-flex"},r.React.createElement(c.Radio,{style:{cursor:"pointer"},checked:!this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!1)},"aria-labelledby":"useLayerDefinedLabel"}),r.React.createElement("label",{id:"useLayerDefinedLabel",className:"m-0 ml-2",style:{cursor:"pointer"}},this.props.intl.formatMessage({id:"mapAction_UseLayerDefinedSymbols",defaultMessage:S}))))),r.React.createElement(p.SettingRow,null,r.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},r.React.createElement("div",{className:"align-items-center d-flex"},r.React.createElement(c.Radio,{style:{cursor:"pointer"},checked:this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!0)},"aria-labelledby":"useCustomLabel"}),r.React.createElement("label",{id:"useCustomLabel",className:"m-0 ml-2",style:{cursor:"pointer"}},this.props.intl.formatMessage({id:"mapAction_UseCustomSymbols",defaultMessage:g}))))),this.props.config.isUseCustomSymbol&&this.jsonUtils&&r.React.createElement(p.SettingSection,{className:"pb-0"},r.React.createElement(p.SettingRow,{className:"d-flex justify-content-around"},r.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:o},r.React.createElement(y.SymbolSelector,{jimuSymbolType:y.JimuSymbolType.Point,symbol:this.getInitSymbolFromConfig(y.JimuSymbolType.Point),onCreated:e=>{this.onSymbolCreated(e.symbol,"pointSymbol")},onPointSymbolChanged:e=>{this.onSymbolChanged(e,"pointSymbol")}}),r.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},o)),r.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:l},r.React.createElement(y.SymbolSelector,{jimuSymbolType:y.JimuSymbolType.Polyline,symbol:this.getInitSymbolFromConfig(y.JimuSymbolType.Polyline),onCreated:e=>{this.onSymbolCreated(e.symbol,"polylineSymbol")},onPolylineSymbolChanged:e=>{this.onSymbolChanged(e,"polylineSymbol")}}),r.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},l)),r.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:s},r.React.createElement(y.SymbolSelector,{jimuSymbolType:y.JimuSymbolType.Polygon,symbol:this.getInitSymbolFromConfig(y.JimuSymbolType.Polygon),onCreated:e=>{this.onSymbolCreated(e.symbol,"polygonSymbol")},onPolygonSymbolChanged:e=>{this.onSymbolChanged(e,"polygonSymbol")}}),r.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},s))))),r.React.createElement(p.SettingSection,null,r.React.createElement(p.SettingRow,null,r.React.createElement(c.Label,null,r.React.createElement(c.Checkbox,{checked:t,className:"mr-1",onChange:this.onOperationalLayerCheckboxChange}),r.React.createElement(r.FormattedMessage,{id:"mapAction_OperationalLayer",defaultMessage:h})))))}}C.defaultProps={config:(0,r.Immutable)({isUseCustomSymbol:!0,isOperationalLayer:!0})};const R=(0,r.injectIntl)(C);return m})())}}}));