System.register(["esri/Graphic","esri/core/Handles","esri/core/reactiveUtils","esri/geometry/Point","esri/layers/GraphicsLayer","esri/request","esri/rest/geometryService","esri/rest/locator","esri/symbols/support/jsonUtils","esri/widgets/CoordinateConversion/CoordinateConversionViewModel","esri/widgets/CoordinateConversion/support/Conversion","esri/widgets/CoordinateConversion/support/Format","esri/widgets/CoordinateConversion/support/formatUtils","jimu-core","jimu-theme","jimu-ui"],(function(t,e){var s={},o={},i={},n={},a={},r={},l={},p={},d={},c={},u={},h={},m={},g={},f={},v={};return Object.defineProperty(p,"__esModule",{value:!0}),{setters:[function(t){s.default=t.default},function(t){o.default=t.default},function(t){i.whenOnce=t.whenOnce},function(t){n.default=t.default},function(t){a.default=t.default},function(t){r.default=t.default},function(t){l.fromGeoCoordinateString=t.fromGeoCoordinateString},function(t){Object.keys(t).forEach((function(e){p[e]=t[e]}))},function(t){d.fromJSON=t.fromJSON},function(t){c.default=t.default},function(t){u.default=t.default},function(t){h.default=t.default},function(t){m.default=t.default},function(t){g.React=t.React,g.classNames=t.classNames,g.css=t.css,g.focusElementInKeyboardMode=t.focusElementInKeyboardMode,g.getAppStore=t.getAppStore,g.injectIntl=t.injectIntl,g.jsx=t.jsx,g.utils=t.utils},function(t){f.registerStyles=t.registerStyles,f.withStyles=t.withStyles},function(t){v.AlertPopup=t.AlertPopup,v.Button=t.Button,v.Label=t.Label,v.ListGroup=t.ListGroup,v.ListGroupItem=t.ListGroupItem,v.Option=t.Option,v.Popper=t.Popper,v.Row=t.Row,v.Select=t.Select,v.TextArea=t.TextArea,v.TextInput=t.TextInput,v.defaultMessages=t.defaultMessages}],execute:function(){t((()=>{var t={21210:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13 6.133c0 .598-.28 1.46-.825 2.51-.53 1.02-1.247 2.102-1.981 3.102A46 46 0 0 1 8 14.492a48 48 0 0 1-2.194-2.747c-.734-1-1.451-2.081-1.98-3.102C3.28 7.593 3 6.731 3 6.133 3 3.277 5.26 1 8 1s5 2.277 5 5.133m1 0c0 2.685-3.768 7.311-5.332 9.115C8.258 15.722 8 16 8 16s-.258-.279-.668-.751C5.768 13.444 2 8.817 2 6.133 2 2.746 4.686 0 8 0s6 2.746 6 6.133M10 5.5a2 2 0 1 1-4 0 2 2 0 0 1 4 0m1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0" clip-rule="evenodd"></path></svg>'},93303:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},15483:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 1h4.5v1H2.707l3.647 3.646-.708.708L2 2.707V5.5H1zm14 14h-4.5v-1h2.793l-3.647-3.646.707-.708L14 13.293V10.5h1zM1 10.5V15h4.5v-1H2.707l3.647-3.646-.708-.708L2 13.293V10.5zM15 1v4.5h-1V2.707l-3.646 3.647-.708-.708L13.293 2H10.5V1zm-1 1" clip-rule="evenodd"></path></svg>'},62838:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},9869:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.5 11a.5.5 0 0 0 .5-.5V2h8.5a.5.5 0 0 0 0-1H2a1 1 0 0 0-1 1v8.5a.5.5 0 0 0 .5.5M5 4h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m0 1v9h9V5z" clip-rule="evenodd"></path></svg>'},29435:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8"></path></svg>'},22089:t=>{"use strict";t.exports=s},4312:t=>{"use strict";t.exports=o},62243:t=>{"use strict";t.exports=i},90422:t=>{"use strict";t.exports=n},59620:t=>{"use strict";t.exports=a},53640:t=>{"use strict";t.exports=r},68569:t=>{"use strict";t.exports=l},20320:t=>{"use strict";t.exports=p},8968:t=>{"use strict";t.exports=d},54e3:t=>{"use strict";t.exports=c},89744:t=>{"use strict";t.exports=u},56859:t=>{"use strict";t.exports=h},55848:t=>{"use strict";t.exports=m},79244:t=>{"use strict";t.exports=g},1888:t=>{"use strict";t.exports=f},14321:t=>{"use strict";t.exports=v}},e={};function y(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,y),i.exports}y.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return y.d(e,{a:e}),e},y.d=(t,e)=>{for(var s in e)y.o(e,s)&&!y.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},y.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),y.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var C={};return(()=>{"use strict";y.r(C),y.d(C,{CoordinateControl:()=>_});var t=y(1888),e=y(79244);var s=y(14321),o=y(56859),i=y(20320);const n=(t,e,s)=>{return(o=t,n=e,r=s,i.suggestLocations(o,{text:n,location:null},{query:{maxSuggestions:r}}).then((t=>t||[]),(t=>(console.error(t.message),[])))).then((t=>{let e=[];t.forEach(((t,s)=>{const o=t.text;if(o&&!function(t,e){return t.filter((t=>e===(null==t?void 0:t.suggestion))).length>0}(e,o)){const s={suggestion:o,magicKey:null==t?void 0:t.magicKey};e.push(s)}})),e=a(e,"suggestion");const o={suggestionItem:e.splice(0,s)};return Promise.resolve(o)})).catch((t=>Promise.reject(new Error(t))));var o,n,r};const a=(t,e)=>{const s=t[0]?[t[0]]:[];for(let o=1;o<t.length;o++){const i=t[o];let n=!1;for(let t=0;t<s.length;t++)if(i[e]===s[t][e]){n=!0;break}n||s.push(i)}return s};function r(t,e,s){return new o.default({name:"address",getConversionStrategy:()=>"server",conversionInfo:{convert:o=>new Promise(((n,a)=>{if(i)return i.locationToAddress(t,{location:o},{query:{}}).then((t=>{var i,a;let r="";(null==t?void 0:t.address)&&(r=t.address,s&&t.address===(null===(i=t.attributes)||void 0===i?void 0:i.PlaceName)&&(null===(a=t.attributes)||void 0===a?void 0:a.LongLabel)&&(r=t.attributes.LongLabel)),n({coordinate:(null==t?void 0:t.score)>=e?r:"",location:o})}),(()=>{n({coordinate:"",location:o})}));n({coordinate:"",location:o})})),reverseConvert:s=>new Promise(((o,n)=>{if(i)return i.addressToLocations(t,{address:{SingleLine:s}},{query:{}}).then((t=>{t&&t.length>0&&(t=(t=t.filter((t=>t.score>=e&&t.location))).sort(((t,e)=>e.score-t.score)),o(t[0])),o(null)}),(()=>{o(null)}));o(null)}))},coordinateSegments:[{alias:"L",description:"Address",searchPattern:/.*/}],defaultPattern:"L"})}function l(){return[{name:"dd",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\xb0\u02da\xba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\xb0\u02da\xba^~*]*)([EW\+\-\s])*)$/].map((function(t){return t.source})).join("")),notationType:"DDLatLongNotation",conversionType:"dd"},{name:"ddrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\xb0\u02da\xba^~*]*)([EW\+\-\s])*)/,/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\xb0\u02da\xba^~*]*)([NS\+\-\s])*)$/].map((function(t){return t.source})).join("")),notationType:"DDLongLatNotation",conversionType:"dd"},{name:"ddm",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\xb0\u02da\xba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\xb0\u02da\xba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DDMLatLongNotation",conversionType:"ddm"},{name:"ddmrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\xb0\u02da\xba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\xb0\u02da\xba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DDMLongLatNotation",conversionType:"ddm"},{name:"dms",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\xb0\u02da\xba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\xa8\u02dd\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\xb0\u02da\xba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\xa8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DMSLatLongNotation",conversionType:"dms"},{name:"dmsrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\xb0\u02da\xba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\xa8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\xb0\u02da\xba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\xa8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DMSLongLatNotation",conversionType:"dms"},{name:"mgrs",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map((function(t){return t.source})).join("")),notationType:"MGRSNotation",conversionType:"mgrs"},{name:"utm",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map((function(t){return t.source})).join("")),notationType:"UTMBandNotation",conversionType:"utm"}]}function p(t){const e=t;return new Promise(((t,s)=>{const o=l().filter((t=>t.pattern.test(e)));o.length>0?t(o):t([])}))}var d=y(4312),c=y(89744),u=y(54e3),h=y(90422),m=y(22089),g=y(59620),f=y(8968),v=y(55848),w=y(68569),b=y(62243),S=y(53640);var x=y(21210),O=y.n(x),P=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s};const j=t=>{const s=window.SVG,{className:o}=t,i=P(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:O()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var M=y(9869),I=y.n(M),N=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s};const A=t=>{const s=window.SVG,{className:o}=t,i=N(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:I()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var E=y(15483),L=y.n(E),R=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s};const T=t=>{const s=window.SVG,{className:o}=t,i=R(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:L()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var k=y(93303),V=y.n(k),F=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s};const U=t=>{const s=window.SVG,{className:o}=t,i=F(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:V()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var B=y(62838),W=y.n(B),G=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s};const H=t=>{const s=window.SVG,{className:o}=t,i=G(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:W()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var K=y(29435),D=y.n(K),Y=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s};const z=t=>{const s=window.SVG,{className:o}=t,i=Y(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:D()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var q=function(t,e,s,o){return new(s||(s=Promise))((function(i,n){function a(t){try{l(o.next(t))}catch(t){n(t)}}function r(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((o=o.apply(t,e||[])).next())}))};const Z="dd",Q=e.utils.getGeometryService(),J={type:"esriPMS",angle:0,xoffset:2,yoffset:8,contentType:"image/png",imageData:"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",url:"https://static.arcgis.com/images/Symbols/Basic/BlueShinyPin.png",height:24,width:24};class X extends e.React.PureComponent{constructor(t){var o;super(t),this._inputTextbox=e.React.createRef(),this._copyInputTextbox=e.React.createRef(),this.getSuggestionsTimer=null,this.componentDidMount=()=>{(0,e.focusElementInKeyboardMode)(this._inputTextbox.current,!0),this._isMounted=!0,this.state.coordinateVM||(this.validateGeocodeUrl(),this.createAPIWidget())},this.validateGeocodeUrl=()=>{this.validateGeocodeUrlForSuggestion(this.state.locatorUrl).then((t=>{this.setState({canSuggest:t})}))},this.validateGeocodeUrlForSuggestion=t=>q(this,void 0,void 0,(function*(){return new Promise((e=>{try{(0,S.default)(t,{query:{f:"json"},responseType:"json"}).then((t=>{var s;let o=!1;const i=t;(null===(s=null==i?void 0:i.data)||void 0===s?void 0:s.capabilities.includes("Suggest"))&&(o=!0),e(o)}),(t=>{console.error(t),e(!1)}))}catch(t){console.error(t),e(!1)}}))})),this.componentDidUpdate=(t,e)=>{var s,o,i,n,a;if(this.state.coordinateVM)if(t.jimuMapview&&null===this.props.jimuMapview||this.props.jimuMapview&&(null===(s=this.props.jimuMapview)||void 0===s?void 0:s.id)!==(null===(o=t.jimuMapview)||void 0===o?void 0:o.id))this.drawingLayer&&this.drawingLayer.removeAll(),null===(i=this.state.coordinateVM)||void 0===i||i.destroy(),null===(n=this.drawingLayer)||void 0===n||n.destroy(),null===(a=this._handles)||void 0===a||a.removeAll(),this.onClearInputClick(),this.setState({mapPointActive:!1,coordinateVM:null});else if(this.props.defaultCoordinate!==t.defaultCoordinate||this.props.defaultFormat!==t.defaultFormat){const t=this.props.defaultCoordinate?this.props.defaultCoordinate:Z,e=this.state.supportedFormats.find((e=>e.name===t));this.setState({defaultCoords:e.name,defFormat:this.props.defaultFormat?this.props.defaultFormat:e.defaultPattern},(()=>{this.onInputSettingsOkClicked()}))}else this.drawingLayer&&this.drawingLayer.graphics.length>0&&this.props.defaultPointSymbol!==t.defaultPointSymbol&&this.setState({defPointSymbol:this.props.defaultPointSymbol},(()=>{const t=this.drawingLayer.graphics.getItemAt(0),e=this.state.defPointSymbol;t.symbol=f.fromJSON(e)}));else this.createAPIWidget();if(t.locatorURL&&t.locatorURL!==this.props.locatorURL)this.onClearInputClick(),this.setState({locatorUrl:this.props.locatorURL},(()=>{var t;this.validateGeocodeUrl();const e=null===(t=this.state.coordinateVM)||void 0===t?void 0:t.conversions;if(e){const t=r(this.state.locatorUrl,this.state.minimumCandidateScore,this.state.displayFullAddress);e.forEach(((e,s)=>{"address"===e.format.name&&(e.format=t)}))}}));else if(t.maxSuggestions!==this.props.maxSuggestions){this.setState({maximumSuggestions:this.props.maxSuggestions});const t=this.getCleanInput(this.state.inputValue);this.displaySuggestionList(t)}(null==t?void 0:t.displayFullAddress)!==this.props.displayFullAddress&&this.setState({displayFullAddress:this.props.displayFullAddress},(()=>{var t;const e=null===(t=this.state.coordinateVM)||void 0===t?void 0:t.conversions;if(e){const t=r(this.state.locatorUrl,this.state.minimumCandidateScore,this.state.displayFullAddress);e.forEach(((e,s)=>{"address"===e.format.name&&(e.format=t)}))}""!==this.state.inputValue&&this.showConversion(this.location,!1)}))},this.componentWillUnmount=()=>{this._isMounted=!1,this.drawingLayer&&(this.drawingLayer.removeAll(),this.drawingLayer.destroy()),this._displayDefaultCursor()},this.createAPIWidget=()=>{if(this.state.locatorUrl&&(this.props.jimuMapview&&this.props.jimuMapview.view&&(this.drawingLayer=new g.default({listMode:"hide"}),this.props.jimuMapview.view.map.addMany([this.drawingLayer]),this._handles.add(this.props.jimuMapview.view.on("click",(t=>{this.state.mapPointActive&&(this.props.deactivateMapTool&&(this.setState({mapPointActive:!this.state.mapPointActive}),this._displayDefaultCursor()),this.drawingLayer.removeAll(),t.mapPoint&&this.showConversion(t.mapPoint,!1))}))),this._handles.add(this.props.jimuMapview.view.on("pointer-move",(t=>{this.state.mapPointActive&&this._isMounted&&this._displayMapPointCursor()})))),!this.state.coordinateVM)){const t=new u.default({view:this.props.jimuMapview?this.props.jimuMapview.view:null});t.watch("state",(()=>q(this,void 0,void 0,(function*(){yield b.whenOnce((()=>{"ready"===t.state&&t.pause()}))})))),t.watch("messages",(()=>{this._isMounted&&setTimeout((()=>{if(!this._isMounted)return;const e=v.default.generateDefaultFormats(t.messages);t.conversions.removeAll();const s=[],o={name:"address",label:this.nls("address"),defaultPattern:"",currentPattern:"",enabled:!0,isCustom:!0};s.push(o);const i=new c.default({format:r(this.state.locatorUrl,this.state.minimumCandidateScore,this.state.displayFullAddress)});t.conversions.add(i),e.forEach((e=>{if("basemap"!==e.name){const o=new c.default({format:e});t.conversions.add(o);const i={name:e.name,label:this.nls(e.name),defaultPattern:e.defaultPattern,currentPattern:e.currentPattern,enabled:!0,isCustom:!0};s.push(i)}})),s.sort(((t,e)=>t.label.localeCompare(e.label))),this.setState({coordinateVM:t,supportedFormats:s},(()=>{var t,e;(null===(t=this.props)||void 0===t?void 0:t.getSupportedFormats)&&(null===(e=this.props)||void 0===e||e.getSupportedFormats(this.state.supportedFormats))}))}),400)}))}},this.nls=t=>{const e=Object.assign({},s.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:e[t]?e[t]:t}):e[t]?e[t]:t},this.onMapPointClick=()=>{this.setState({mapPointActive:!this.state.mapPointActive,isAddressOptionsPopupOpen:!1},(()=>{this.state.mapPointActive?this._displayMapPointCursor():this._displayDefaultCursor()}))},this._displayMapPointCursor=()=>{this.props.jimuMapview&&this.props.jimuMapview.view&&this.props.jimuMapview.view&&this.props.jimuMapview.view.container&&"crosshair"!==this.props.jimuMapview.view.container.style.cursor&&(this.props.jimuMapview.view.container.style.cursor="crosshair")},this._displayDefaultCursor=()=>{this.props.jimuMapview&&this.props.jimuMapview.view&&this.props.jimuMapview.view&&this.props.jimuMapview.view.container&&null!==this.props.jimuMapview.view.container.style.cursor&&(this.props.jimuMapview.view.container.style.cursor="default")},this.onCopyClick=()=>{const t=this.props.inputLabelString?this.props.inputLabelString:"";window.getSelection&&window.getSelection().removeAllRanges();let e="("+this.nls(this.currentCoordinateFormat)+")\r\n"+this.state.inputValue;""!==t&&(e=t+e);const s=this.props.copyAllList?e+"\r\n\n"+this.props.copyAllList.join("\r\n\n"):e;this._copyInputTextbox.current.value=s,this._copyInputTextbox.current.select(),document.execCommand("copy"),this._copyInputTextbox.current.disabled=!0,this.setState({isCopyMessageOpen:!0}),setTimeout((()=>{window.getSelection&&window.getSelection().removeAllRanges(),this.setState({isCopyMessageOpen:!1}),this._copyInputTextbox.current.disabled=!1}),500)},this.onZoomClick=()=>{if(this.drawingLayer&&this.drawingLayer.graphics.length>0){const t=this.drawingLayer.graphics.getItemAt(0);this.props.jimuMapview.view.goTo({center:t.geometry,scale:this.props.zoomScale?this.props.zoomScale:5e4})}},this.onSettingsClick=()=>{this.setState({isInputSettingsPopupOpen:!this.state.isInputSettingsPopupOpen,isAddressOptionsPopupOpen:!1})},this.onInputSettingsOkClicked=()=>{"address"!==this.state.defaultCoords&&""===this.state.defFormat||(this.setState({isInputSettingsPopupOpen:!1}),this.currentCoordinateFormat=this.state.defaultCoords,this.state.coordinateVM.conversions.some((t=>{if(t.format.name===this.state.defaultCoords)return t.format.currentPattern=this.state.defFormat,!0})),""!==this.state.inputValue&&this.showConversion(this.location,!1))},this.onInputSettingsCancelClicked=()=>{let t="";this.state.coordinateVM.conversions.some((e=>{if(e.format.name===this.currentCoordinateFormat)return t=e.format.currentPattern,!0})),this.setState({isInputSettingsPopupOpen:!1,defaultCoords:this.currentCoordinateFormat,defFormat:t})},this.onInputCoordinateChange=t=>{t.target&&""===t.target.value.trim()?(this.setState({inputValue:"",disableCopyZoom:!0}),this.getSuggestionsTimer&&clearInterval(this.getSuggestionsTimer),setTimeout((()=>{this.state.isAddressOptionsPopupOpen&&this.setState({isAddressOptionsPopupOpen:!1})}),500)):this.setState({inputValue:t.target.value},(()=>{const t=this.getCleanInput(this.state.inputValue);this.displaySuggestionList(t)}))},this.displaySuggestionList=t=>{p(t).then((e=>{e&&e.length>0?this.state.isAddressOptionsPopupOpen&&this.setState({isAddressOptionsPopupOpen:!1}):(this.getSuggestionsTimer&&clearInterval(this.getSuggestionsTimer),this.getSuggestionsTimer=setTimeout((()=>{this.state.canSuggest&&n(this.state.locatorUrl,t,this.state.maximumSuggestions).then((t=>{const e=[];t.suggestionItem.forEach(((t,s)=>{const o={value:t.suggestion+s,label:t.suggestion,magicKey:t.magicKey,mapPoint:null};e.push(o)})),e.length>0?this.setState({selectedAddress:e.length>0?e[0].value:"",addressOptions:e,isAddressOptionsPopupOpen:!0}):this.setState({addressOptions:[],isAddressOptionsPopupOpen:!1})})).catch((t=>{console.log(t)}))}),300))}))},this.showParseCoordinateError=()=>{this.setState({disableCopyZoom:!0}),this.showMessage(this.nls("errorMsgTitle"),this.nls("parseCoordinatesError"))},this.onReverseConvertComplete=t=>{t&&this.showConversion(t,!0),this.props.processing&&this.props.processing(!1)},this.onErrorInReverseConvert=t=>{this.showParseCoordinateError(),console.error(t.message),this.props.processing&&this.props.processing(!1)},this.isValidNumber=t=>"number"==typeof t&&isFinite(t),this.isValidPoint=t=>t&&this.isValidNumber(t.x)&&this.isValidNumber(t.y),this.getFromGeoCoordinateString=t=>{const{coordinate:e,spatialReference:s,formatName:o}=t;return w.fromGeoCoordinateString(Q,{strings:[e],sr:s,conversionType:o}).then((t=>{const e=new h.default({x:t[0][0],y:t[0][1],spatialReference:s});if(!this.isValidPoint(e))throw new Error(t);return e})).catch((t=>{throw new Error(t)}))},this.reverseConvertInput=(t,e,s)=>{this.state.coordinateVM.conversions.some((o=>t===o.format.name&&(this.props.processing&&this.props.processing(!0),s?this.state.coordinateVM.reverseConvert(e,o.format).then(this.onReverseConvertComplete,this.onErrorInReverseConvert):this.getFromGeoCoordinateString({coordinate:e,spatialReference:o.format.spatialReference,formatName:o.format.name}).then(this.onReverseConvertComplete,this.onErrorInReverseConvert),!0)))},this.getCleanInput=t=>(t=(t=(t=t.split("\xb0\u200e").join("")).replace(/\n/g,"")).replace(/\s+/g," ").trim()).toUpperCase(),this.getProcessedTextInput=(t,e,s)=>{const o=function(t,e){const s=e.pattern.exec(t);let o,i,n,a,r,l,p,d,c,u,h=!1,m=e.name;switch(e.name){case"dd":o=s[2],i=s[7],n=s[10],a=s[16],r=s[3].replace(/[,:]/,"."),l=s[11].replace(/[,:]/,"."),m="dd";break;case"ddrev":o=s[11],i=s[16],n=s[2],a=s[8],r=s[12].replace(/[,:]/,"."),l=s[3].replace(/[,:]/,"."),m="dd";break;case"ddm":o=s[2],i=s[7],n=s[10],a=s[15],r=s[3],p=s[4].replace(/[,:]/,"."),l=s[11],d=s[12].replace(/[,:]/,"."),m="ddm";break;case"ddmrev":o=s[10],i=s[15],n=s[2],a=s[7],r=s[11],p=s[12].replace(/[,:]/,"."),l=s[3],d=s[4].replace(/[,:]/,"."),m="ddm";break;case"dms":o=s[2],i=s[8],n=s[11],a=s[17],r=s[3],p=s[4],c=s[5].replace(/[,:]/,"."),l=s[12],d=s[13],u=s[14].replace(/[,:]/,"."),m="dms";break;case"dmsrev":o=s[11],i=s[17],n=s[2],a=s[8],r=s[12],p=s[13],c=s[14].replace(/[,:]/,"."),l=s[3],d=s[4],u=s[5].replace(/[,:]/,"."),m="dms"}switch(o&&i?(h=!0,o=new RegExp(/[Ss-]/).test(o)?"-":"+"):o=o&&new RegExp(/[Ss-]/).test(o)||i&&new RegExp(/[Ss-]/).test(i)?"-":"+",n&&a?(h=!0,n=new RegExp(/[Ww-]/).test(n)?"-":"+"):n=n&&new RegExp(/[Ww-]/).test(n)||a&&new RegExp(/[Ww-]/).test(a)?"-":"+",m){case"dd":t=o+r+","+n+l;break;case"ddm":t=o+r+" "+p+","+n+l+" "+d;break;case"dms":t=o+r+" "+p+" "+c+","+n+l+" "+d+" "+u}return{prefixSuffixError:h,str:t}}(t,e);return o.prefixSuffixError&&!s&&this.showMessage("",this.nls("latLongWarningMessage")),o.str},this.getCurrentFormat=()=>{let t;return this.state.coordinateVM.conversions.some((e=>this.state.defaultCoords===e.format.name&&(t=e.format,!0))),t},this.tryParsingFormat=(t,e)=>q(this,void 0,void 0,(function*(){var s,o;try{const i=yield this.state.coordinateVM.reverseConvert(t,e.format);if(i){const n=yield this.state.coordinateVM.updateConversions([e],i);return(null==n?void 0:n.length)>0&&((null===(s=n[0])||void 0===s?void 0:s.displayCoordinate)===this.state.inputValue||(null===(o=n[0])||void 0===o?void 0:o.displayCoordinate)===t)?i:null}}catch(t){return null}})),this.onInputKeyDown=t=>{if("Enter"===t.key){this.getSuggestionsTimer&&clearInterval(this.getSuggestionsTimer);const t=this.getCleanInput(this.state.inputValue);p(t).then((e=>{if(e&&e.length>0)if(1===e.length){const s=e[0].conversionType,o=!("dd"===s||"ddm"===s||"dms"===s),i=this.getProcessedTextInput(t,e[0],!1);this.reverseConvertInput(s,i,o)}else this.confirmInputNotationFromUser(e);else this.props.processing&&this.props.processing(!0),(s=this.state.locatorUrl,o=t,n=this.state.minimumCandidateScore,i.addressToLocations(s,{address:{SingleLine:o}},{query:{}}).then((t=>(t=t.sort(((t,e)=>e.score-t.score))).filter((t=>t.score>=n&&t.location))),(t=>(console.error(t.message),[])))).then((e=>{if(e&&e.length>0)if(1===e.length)this.setState({addressOptions:[],isAddressOptionsPopupOpen:!1},(()=>{this.showConversion(e[0].location,!0)}));else{const t=[];e.forEach(((e,s)=>{const o={value:e.address+s,label:e.address,mapPoint:e.location};t.push(o)})),this.setState({selectedAddress:t.length>0?t[0].value:"",addressOptions:t,isAddressOptionsPopupOpen:!0})}else if("address"!==this.state.defaultCoords){const e=[];this.state.coordinateVM.conversions.forEach((s=>{"address"!==s.format.name&&e.push(this.tryParsingFormat(t,s))})),e.length>0?Promise.all(e).then((t=>{let e=!1;t.some((t=>!!t&&(e=!0,this.onReverseConvertComplete(t),!0))),e||this.showParseCoordinateError()}),(t=>{this.showParseCoordinateError()})):this.showParseCoordinateError()}else this.showParseCoordinateError();this.props.processing&&this.props.processing(!1)}));var s,o,n}))}},this.confirmInputNotationFromUser=t=>{const e=[];t.forEach((t=>{const s={value:t.name,label:this.nls(t.notationType),notation:t};e.push(s)})),this.setState({addressOptions:[],isAddressOptionsPopupOpen:!1,confirmedInputNotation:e[0].value,inputNotationOptions:e,inputNotationWarning:t.length+" "+this.nls("multipleNotationLabel"),isConfirmInputNotationPopupOpen:!0})},this.onSelectedAddressChange=t=>{this.setState({selectedAddress:t},(()=>{this.state.selectedAddress&&(this.state.addressOptions.some((e=>{if(e.value===this.state.selectedAddress)return e.magicKey?(s=this.state.locatorUrl,o=e.magicKey,n=t,a=this.state.minimumCandidateScore,i.addressToLocations(s,{address:{SingleLine:n},outFields:["*"],magicKey:o},{query:{}}).then((t=>(t=t.sort(((t,e)=>e.score-t.score))).filter((t=>t.score>=a&&t.location))),(t=>(console.error(t.message),[])))).then((t=>{this.setState({inputValue:e.label}),this.showConversion(t[0].location,!0)})):e.mapPoint&&this.showConversion(e.mapPoint,!0),!0;var s,o,n,a})),this.setState({selectedAddress:"",addressOptions:[],isAddressOptionsPopupOpen:!1}))}))},this.onInputNotationChange=t=>{this.setState({confirmedInputNotation:t.target.value})},this.onConfirmInputOkClicked=()=>{if(this.state.confirmedInputNotation){const t=this.getCleanInput(this.state.inputValue);let e;this.state.inputNotationOptions.some((t=>{if(t.value===this.state.confirmedInputNotation)return e=t.notation,!0}));const s=this.getProcessedTextInput(t,e,!1);this.reverseConvertInput(e.conversionType,s,!1),this.setState({confirmedInputNotation:"",inputNotationOptions:[],isConfirmInputNotationPopupOpen:!1})}},this.onConfirmInputCancelClicked=()=>{this.setState({confirmedInputNotation:"",inputNotationOptions:[],isConfirmInputNotationPopupOpen:!1})},this.onClearInputClick=()=>{this.drawingLayer&&this.drawingLayer.removeAll(),this.setState({inputValue:"",disableCopyZoom:!0,isAddressOptionsPopupOpen:!1},(()=>{this.props.onClear&&this.props.onClear(),(0,e.focusElementInKeyboardMode)(this._inputTextbox.current,!0)}))},this.onDefaultCoordsChange=t=>{this.setState({defaultCoords:t.target.value},(()=>{this.resetToDefaultPattern(this.state.defaultCoords)}))},this.onFormatChange=t=>{const e=t.target.value;this.setState({defFormat:e})},this.onFormatAcceptValue=t=>{this.setState({defFormat:t.trim()})},this.onResetButtonClick=()=>{const t=this.state.defaultCoords;this.resetToDefaultPattern(t)},this.resetToDefaultPattern=t=>{const e=this.state.supportedFormats.find((e=>e.name===t));e&&this.setState({defFormat:e.defaultPattern})},this.getProjectedLocation=(t,e)=>{const s=this.state.coordinateVM.formats.findIndex((t=>{if("dd"===t.name)return!0}));return new Promise(((o,i)=>{if(s>-1&&e){this.state.coordinateVM.formats.getItemAt(s)._project(t,e).then((t=>{o(t)}))}else o(t)}))},this.showLocationOnMap=(t,e)=>{this.drawingLayer&&this.props.jimuMapview&&this.props.jimuMapview.view&&this.getProjectedLocation(t,this.props.jimuMapview.view.spatialReference).then((t=>{this.drawingLayer.removeAll();const s=new m.default({geometry:t,symbol:f.fromJSON(this.state.defPointSymbol)});this.drawingLayer.add(s),e&&this.props.jimuMapview.view.set({center:t})}))},this.showConversion=(t,e)=>{if(this.location=t,this.showLocationOnMap(t,e),this.state.coordinateVM){this.setState({disableCopyZoom:!1});const e=this.state.coordinateVM.conversions.filter((t=>t.format.name===this.currentCoordinateFormat||"dd"===t.format.name));this.state.coordinateVM.updateConversions(e.toArray(),t).then((e=>{let s=null,o="";e.forEach((t=>{"dd"===t.format.name&&(s=t.position.location),t.format.name===this.currentCoordinateFormat&&(o=t.displayCoordinate?t.displayCoordinate:"","address"===this.currentCoordinateFormat&&""===o&&(o=this.nls("noAddressFoundMsg")))})),this.setState({inputValue:o},(()=>{const e={formattedCoordinateText:o,mapCoordinate:t,ddCoordinate:s};this.props.onConversionComplete(e)}))}),(t=>{console.log(t.message)}))}},this.onAddConversion=()=>{this.setState({isAddConversionPopupOpen:!0})},this.onAddPopperClose=()=>{this.setState({isAddConversionPopupOpen:!1})},this.showMessage=(t,e)=>{this.setState({isErrorMsgPopupOpen:!0,errorMsgPopupTitle:t,errorMsg:e})},this.hideMessage=()=>{this.setState({isErrorMsgPopupOpen:!1,errorMsgPopupTitle:"",errorMsg:""})},this.formatDisplayCoordinate=t=>this.isRTL&&this.currentCoordinateFormat&&"xy"===this.currentCoordinateFormat&&t&&"-"===t.charAt(0)?t.substr(1)+t.substr(0,1):t,this.getClearIcon=t=>t.length>0&&(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("clear"),title:this.nls("clear"),type:"tertiary",className:"p-0",icon:!0,size:"sm",onClick:this.onClearInputClick.bind(this)},(0,e.jsx)(H,{width:14,height:14,className:"search-clear"})),this.overrideInputWidthStyle=()=>{var t;const s=!!(null===(t=this.props.jimuMapview)||void 0===t?void 0:t.view);let o=29;return s&&(o+=29),this.props.showCopy&&(o+=29),this.props.showZoom&&s&&(o+=29),e.css`
    .cc-search-input {
      width: calc( 100% -  ${o}px);
    }
    `},this.isRTL=!1;const a=(0,e.getAppStore)().getState();this.isRTL=null===(o=null==a?void 0:a.appContext)||void 0===o?void 0:o.isRTL,this.state={mapPointActive:!1,isInputSettingsPopupOpen:!1,isAddConversionPopupOpen:!1,isCopyMessageOpen:!1,defaultCoords:this.props.defaultCoordinate?this.props.defaultCoordinate:Z,defFormat:this.props.defaultFormat?this.props.defaultFormat:"Y\xb0N, X\xb0E",locatorUrl:this.props.locatorURL?this.props.locatorURL:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",minimumCandidateScore:this.props.minCandidateScore?this.props.minCandidateScore:100,maximumSuggestions:this.props.maxSuggestions||0===this.props.maxSuggestions?this.props.maxSuggestions:6,displayFullAddress:!!this.props.displayFullAddress&&this.props.displayFullAddress,defPointSymbol:this.props.defaultPointSymbol?this.props.defaultPointSymbol:J,disableCopyZoom:!0,inputValue:"",coordinateVM:null,supportedFormats:null,isConfirmInputNotationPopupOpen:!1,inputNotationOptions:[],confirmedInputNotation:"",inputNotationWarning:"",addressOptions:[],selectedAddress:"",isAddressOptionsPopupOpen:!1,isErrorMsgPopupOpen:!1,errorMsgPopupTitle:"",errorMsg:"",canSuggest:!0},this.currentCoordinateFormat=this.props.defaultCoordinate?this.props.defaultCoordinate:Z,this._handles=new d.default,this.location=new h.default,this._isMounted=!1}render(){var t,o;const i=(0,e.classNames)(this.props.className,"jimu-coordinate-control"),n=this.props.inputLabelString?this.props.inputLabelString:"";return(0,e.jsx)("div",{className:i},(0,e.jsx)(s.Row,{flow:"wrap","aria-label":n+"  ("+this.nls(this.state.defaultCoords)+")",className:"pl-4 pr-5"},(0,e.jsx)("label",{title:n+"  ("+this.nls(this.state.defaultCoords)+")",className:"jimu-widget-setting--row-label justify-content-start flex-grow-1 text-break title3 hint-default w-100 mr-0"},n+"  ("+this.nls(this.state.defaultCoords)+")"),(0,e.jsx)("div",{className:"adjust-buttons w-100 align-items-center",css:this.overrideInputWidthStyle()},(0,e.jsx)("div",{className:"cc-search-input"},(0,e.jsx)(s.TextInput,{role:"textbox","aria-label":n+"  ("+this.nls(this.state.defaultCoords)+")",size:"sm",placeholder:this.nls("inputPlaceHolder"),onKeyDown:this.onInputKeyDown,id:"textInput"+this.props.parentWidgetId,ref:this._inputTextbox,onChange:this.onInputCoordinateChange.bind(this),className:"search-input",value:this.formatDisplayCoordinate(this.state.inputValue),suffix:this.getClearIcon(this.formatDisplayCoordinate(this.state.inputValue))}),this.state.isAddressOptionsPopupOpen&&(0,e.jsx)("div",{ref:"textInput"+this.props.parentWidgetId},(0,e.jsx)(s.ListGroup,{className:"addressListGroup p-2 shadow"},this.state.addressOptions&&this.state.addressOptions.map(((t,o)=>(0,e.jsx)(s.ListGroupItem,{tabIndex:0,className:"listItem",key:o,onKeyPress:e=>{"Enter"!==e.key&&" "!==e.key||this.onSelectedAddressChange(t.value)},onClick:()=>{this.onSelectedAddressChange(t.value)}},t.label))))),(0,e.jsx)(s.TextArea,{tabIndex:-1,className:"hidden-copy-input",ref:this._copyInputTextbox})),(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("mapPoint"),title:this.nls("mapPoint"),className:(null===(t=this.props.jimuMapview)||void 0===t?void 0:t.view)?"actionButton":"hidden",type:"tertiary",icon:!0,size:"sm",variant:this.state.mapPointActive?"contained":"text",color:this.state.mapPointActive?"primary":"default",onClick:this.onMapPointClick.bind(this)},(0,e.jsx)(j,{size:"17"})),this.props.showCopy&&(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("copyAll"),"aria-disabled":this.state.disableCopyZoom,title:this.nls("copyAll"),className:"actionButton",type:"tertiary",icon:!0,size:"sm",variant:this.state.isCopyMessageOpen?"contained":"text",color:this.state.isCopyMessageOpen?"primary":"default",id:"refCopy"+this.props.parentWidgetId,disabled:this.state.disableCopyZoom,onClick:this.onCopyClick.bind(this)},(0,e.jsx)(A,{size:"17"})),this.props.jimuMapview&&this.props.showZoom&&(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("ZoomLabel"),"aria-disabled":this.state.disableCopyZoom,title:this.nls("ZoomLabel"),className:(null===(o=this.props.jimuMapview)||void 0===o?void 0:o.view)?"actionButton":"hidden",type:"tertiary",icon:!0,size:"sm",disabled:this.state.disableCopyZoom,onClick:this.onZoomClick.bind(this)},(0,e.jsx)(T,{size:"17"})),(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("inputSettingsTitle"),"aria-haspopup":"dialog",title:this.nls("inputSettingsTitle"),className:"actionButton",type:"tertiary",icon:!0,size:"sm",variant:this.state.isInputSettingsPopupOpen?"contained":"text",color:this.state.isInputSettingsPopupOpen?"primary":"default",onClick:this.onSettingsClick.bind(this)},(0,e.jsx)(U,{size:"17"})))),(0,e.jsx)(s.AlertPopup,{className:i,"aria-expanded":this.state.isInputSettingsPopupOpen,isOpen:this.state.isInputSettingsPopupOpen,onClickOk:this.onInputSettingsOkClicked.bind(this),onClickClose:this.onInputSettingsCancelClicked.bind(this),title:this.nls("inputSettingsTitle")},(0,e.jsx)("table",{cellPadding:10},(0,e.jsx)("tbody",null,(0,e.jsx)("tr",null,(0,e.jsx)("td",{className:"labelDimension"},(0,e.jsx)(s.Label,null,this.nls("defaultCoordinate"))),(0,e.jsx)("td",null,(0,e.jsx)(s.Select,{"aria-label":this.nls("defaultCoordinate"),name:"defaultCoords",size:"sm",value:this.state.defaultCoords,onChange:this.onDefaultCoordsChange},this.state.supportedFormats&&this.state.supportedFormats.map(((t,o)=>(0,e.jsx)(s.Option,{tabIndex:0,role:"option","aria-label":t.label,key:o,value:t.name},t.label)))))),(0,e.jsx)("tr",{className:"address"===this.state.defaultCoords?"hidden":""},(0,e.jsx)("td",{className:"labelDimension"},(0,e.jsx)(s.Label,null,this.nls("coordinateFormat"))),(0,e.jsx)("td",null,(0,e.jsx)(s.TextInput,{role:"textbox","aria-label":this.nls("coordinateFormat"),value:this.state.defFormat,onAcceptValue:this.onFormatAcceptValue,onChange:this.onFormatChange,size:"sm",className:""===this.state.defFormat?"invalid-value":""})),(0,e.jsx)("td",null,(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("resetFormat"),title:this.nls("resetFormat"),className:"ml-2",icon:!0,type:"tertiary",size:"sm",onClick:this.onResetButtonClick.bind(this)},(0,e.jsx)(z,{size:"16"}))))))),this.state.isConfirmInputNotationPopupOpen&&(0,e.jsx)(s.AlertPopup,{"aria-expanded":this.state.isConfirmInputNotationPopupOpen,isOpen:this.state.isConfirmInputNotationPopupOpen,onClickOk:this.onConfirmInputOkClicked.bind(this),onClickClose:this.onConfirmInputCancelClicked.bind(this),title:this.nls("confirmInputNotation")},(0,e.jsx)("div",{className:"p-2"},(0,e.jsx)(s.Label,null,this.state.inputNotationWarning),(0,e.jsx)("br",null),(0,e.jsx)(s.Select,{"aria-label":this.state.inputNotationWarning,name:"confirmedInputNotation",size:"sm",value:this.state.confirmedInputNotation,onChange:this.onInputNotationChange},this.state.inputNotationOptions&&this.state.inputNotationOptions.map(((t,o)=>(0,e.jsx)(s.Option,{tabIndex:0,role:"option","aria-label":t.label,key:o,value:t.value},t.label)))))),this.state.isErrorMsgPopupOpen&&(0,e.jsx)(s.AlertPopup,{"aria-expanded":this.state.isErrorMsgPopupOpen,hideCancel:!0,isOpen:this.state.isErrorMsgPopupOpen,onClickOk:this.hideMessage.bind(this),onClickClose:this.hideMessage.bind(this),title:this.state.errorMsgPopupTitle},(0,e.jsx)("div",{className:"p-2"},this.state.errorMsg)),this.state.isCopyMessageOpen&&(0,e.jsx)(s.Popper,{open:this.state.isCopyMessageOpen,placement:"bottom",arrowOptions:!0,reference:"refCopy"+this.props.parentWidgetId},(0,e.jsx)("div",{className:"p-2"},this.nls("copySuccessMessage"))))}}const _=(0,t.withStyles)((0,e.injectIntl)(X),"CoordinateControl");(0,t.registerStyles)("jimu-ui/advanced/coordinate-control",{CoordinateControl:function(t){const s=t.theme;return e.css`
  .adjust-buttons {
    display: flex;
    flex-flow: row wrap;
  }

  .actionButton {
    margin: 2px 0px 0px 2px;
  }

  .actionButton:disabled{
    cursor: default;
  }

  .hidden {
    display: none;
  }

  .addressListGroup {
    position: absolute;
    max-height: 10rem;
    overflow-y: auto;
    z-index: 1;
    width: 100%;
    border: 1px solid ${s.sys.color.divider.primary};
  }

  .listItem {
    padding: 5px 10px;
    border: none;
    cursor: pointer;
    margin: -7px -8px 6px -8px;
  }

  .listItem:hover {
    background-color: ${s.sys.color.primary.light};
  }

  .cc-search-input {
    position: relative;
    min-width: 100px;

      .search-clear {
        cursor: pointer;
      }

      .search-input {
        padding-right: 0.25rem;
      }

      .search-input::-ms-clear {
        display: none;
      }
  }

  .hidden-copy-input {
    opacity: 0.01;
    height:0;
    position:absolute;
    z-index: -1;
  }

  .labelDimension {
    width: 36%
  }

  .hidden {
    display: none;
  }

  .invalid-value {
    border: 1px solid ${s.sys.color.error.main};
    box-shadow: 0 0 5px ${s.sys.color.error.main};
  }

  `}})})(),C})())}}}));