"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-b251eb"],{7027:(e,t,n)=>{n.d(t,{a:()=>f,b:()=>h,c:()=>o,g:()=>d,i:()=>p,m:()=>m});var i=n(92123),r=n(27703);function s(e){return new Date(Number(e)).toISOString().replace("Z","")}function a(e,t){return e.map((e=>e[t]))}let l;function o(e){l={1:e.esriMonthJanuary,2:e.esriMonthFebruary,3:e.esriMonthMarch,4:e.esriMonthApril,5:e.esriMonthMay,6:e.esriMonthJune,7:e.esriMonthJuly,8:e.esriMonthAugust,9:e.esriMonthSeptember,10:e.esriMonthOctober,11:e.esriMonthNovember,12:e.esriMonthDecember}}function c(e){const{multiDimensionalData:t,selectedVariables:n=[]}=e;return t.variables.filter((e=>{const t=n.some((t=>t===e.name));return!(n.length>0)||t}))}function u(e){const{variables:t=[],selectedDimension:n=""}=e;return t.reduce(((e,t)=>{const r=t.dimensions.filter((e=>!!(0,i.m)(n)||e.name===n));return r.length?[...e,...r]:e}),[])}function g(e){const t=[];return e.forEach((function(e){const n=e.hasRanges,i=e.recurring;let a;e.values.forEach((function(o){let c=(0,r.k)(o);n||(c=[c]),"StdTime"===e.name&&(c=c.map((t=>i?function(e,t,n){const i=e=>l[e],r=(t,n)=>`${e} (${i(t)} - ${i(n)})`;if(n&&""===n)return e.toString();const s="Months"===n,a="Quarters"===n;if(!s&&!a)return e.toString();if(1==t&&s)return`${e} (${i(+e)})`;switch(+e){case 1:return r(1,3);case 2:return r(4,6);case 3:case 7:return r(7,9);case 4:return a?r(10,12):r(4,6);case 10:return r(10,12)}return e.toString()}(t,e.interval,e.intervalUnit):s(Number(t)))));const u=n?c.join(" — "):c.join("");var g;a={label:u,key:i?n?o.join(" — "):o.toString():u},g=a,t.some((e=>e.label===g.label))||t.push(a)}))})),t}function f(e,t){return a(u({variables:c({multiDimensionalData:e,selectedVariables:t})}),"name").filter((function(e,t,n){return n.indexOf(e)===t}))}function h(e,t,n){return g(u({variables:c({multiDimensionalData:e,selectedVariables:t}),selectedDimension:n}))}function d(e,t,n){const i=u({variables:c({multiDimensionalData:e,selectedVariables:t}),selectedDimension:n}),s=g(i);let a,l;const o=function(e){let t=!1;return e.length>0&&(t=e[0].hasRanges),t}(i);if(o){const e=function(e){const t=[],n=[];return e.forEach((e=>{const i=e.label.split(" — ");t.push({label:i[0],key:i[0]}),n.push({label:i[1],key:i[1]})})),{min:t,max:n}}(s);a=e.min,l=e.max}else a=(0,r.k)(s),l=(0,r.k)(s);return{startValueOptions:a,endValueOptions:l}}function m(e,t){if(["BY_ITERATION"].includes(e.definitionType))return!1;if((0,i.m)(t))return!1;const n=e.dimensions;if(!n)return function(e,t){const n=e?.variables,i=n?.find((e=>t===e.name));if(!i)return!1;const r=i.dimensions.reduce(((e,t)=>(e[t.name]=t.values.length,e)),{});return Object.values(r).every((e=>1===e))}(t,e.variables[0]);if(!n.every((function(e,t,n){return!(n.indexOf(e,t+1)>=0)})))return!1;const r=c({multiDimensionalData:t,selectedVariables:e.variables}),l=a(u({variables:r}),"name").every((e=>{return t=e,n.indexOf(t)>=0;var t}));if(!l)return!1;if("BY_RANGES"!==e.definitionType)return l;const o=e.maxValues,g=e.minValues;return o.every(((e,t)=>{const i=n[t],a=u({variables:r,selectedDimension:i}),l=a.length>0?a[0]:void 0;return l&&l.hasRanges?e===function(e,t){const n="StdTime"===e.name,i=n&&"string"==typeof t?new Date(t+"Z").getTime():t,r=e.values.find((e=>e[0]===i));return"object"==typeof r&&n?r.map((e=>s(Number(e)))):r}(l,g[t])[1]:g[t]===e}))}function p(e,t){return e.some((function(e){if(e.key===t)return!0}))}},90369:(e,t,n)=>{n.r(t),n.d(t,{rfx_cte_dimensionless_editor:()=>c});var i=n(14947),r=(n(34319),n(92123)),s=n(90949),a=(n(46574),n(46717),n(55139),n(57098),n(74656),n(91123),n(78979),n(46869),n(27703)),l=(n(99248),n(16888),n(95323),n(43278),n(86944),n(83345),n(7027));const o="inputArgHelpClickHandler",c=class{constructor(e){(0,i.r)(this,e),this.rfxArgumentChange=(0,i.c)(this,"rfxArgumentChange",7),this.showDimensionLessCheckbox=!0,this.helpActionClickEventHandlers=new Map,this.evaluateFilterTriggerArg=async e=>{const t=await this.isMultidimensionalDefinitionAppliedSingleSlice(e);this.mdimDefLeadsToSingleSlice=void 0,this.mdimDefLeadsToSingleSlice=t},this.evaluateRasterTriggerArg=async()=>{const e=this.widgetArgs.triggerArgs.Raster,t=e?.input,n=await t.getSelectedLayer();if(n){const e=this.checkIfRasterIsSingleSlice(n);this.isRasterSingleSlice=e}else this.mdimDefLeadsToSingleSlice=!1},this.isRasterSingleSlice=!1,this.mdimDefLeadsToSingleSlice=!1,this.widgetArgs=void 0}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){await this.setupInitialState(this.widgetArgs)}componentWillRender(){const e=this.isRasterSingleSlice||this.mdimDefLeadsToSingleSlice,t=this.widgetArgs.triggerArgs.Raster?.input,n=!1===Boolean(t?.value)||e;this.showDimensionLessCheckbox=n}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach((t=>{const n=e[t];this.inputArg=n,n.input=this.hostElement}));const n=t.Raster;n?.input?.addEventListener("rfxArgumentChange",(()=>{this.evaluateRasterTriggerArg()}));const i=t.Filter;i?.input?.addEventListener("rfxArgumentChange",(({detail:{value:e}})=>{this.evaluateFilterTriggerArg(e)}))}async setupInitialState({triggerArgs:e}){const t=e.Raster?.input;if(!t||!t.value)return this.isRasterSingleSlice=!1,void(this.mdimDefLeadsToSingleSlice=!1);await this.evaluateRasterTriggerArg();const n=e.Filter?.input,i=n.value||e.Filter.value;n&&i?this.evaluateFilterTriggerArg(i):this.mdimDefLeadsToSingleSlice=!1}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}checkIfRasterIsSingleSlice(e){const t=e.multidimensionalInfo,n=t&&t.variables;return!(!t||!n||1!==n.length)&&n[0].dimensions.every((e=>{const t=e&&e.values;return t&&1===t.length}))}async isMultidimensionalDefinitionAppliedSingleSlice(e){"string"==typeof e&&(e=JSON.parse(e));const t=this.widgetArgs.triggerArgs.Raster?.input;if(!t.value)return!1;const n=await t.getSelectedLayer();if((0,r.m)(n))return;const i="imagery-tile"===n.type?n.rasterInfo.multidimensionalInfo:n.multidimensionalInfo;return(0,l.m)(e,(0,a.c)(i))}render(){return(0,i.h)("div",null,this.showDimensionLessCheckbox?(0,i.h)("calcite-label",{alignment:"start",scale:s.U.Scale,layout:"inline-space-between",ref:e=>{this.widgetContainer=e}},(0,i.h)("calcite-checkbox",{checked:this.inputArg.value,onCalciteCheckboxChange:e=>{const t=e.target.checked;this.inputArg.value=t}}),(0,i.h)("rfx-label",{label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()})):null)}get hostElement(){return(0,i.a)(this)}};c.style="",n(25829)},92123:(e,t,n)=>{n.d(t,{A:()=>u,C:()=>h,D:()=>f,F:()=>g,R:()=>l,T:()=>o,a:()=>c,b:()=>m,c:()=>p,e:()=>b,f:()=>v,g:()=>y,i:()=>d,k:()=>A,l:()=>D,m:()=>k});var i=n(25829),r="[object Map]",s="[object Set]",a=Object.prototype.hasOwnProperty;const l="RasterFunctionTemplate",o="type",c="RasterFunctionVariable",u="arguments",g="function",f="distanceLegacy",h={MIN_VALUE:"minValue",MAX_VALUE:"maxValue",LESS_THAN:"lessThan",GREATER_THAN:"greaterThan"};function d(e){return!!e&&null!=e._object_ref_id}function m(e){return""!==(e=String(e).trim())&&/^[+-]?(\d+)?(\.\d+)?$/.test(e)}function p(e){return e=String(e).trim(),["true","false"].indexOf(e)>=0}function b(e){return e.type&&e.type.toLowerCase().indexOf("recordset")>=0}function v(e){if(!e)return!1;const t=e.type;return[l,c].indexOf(t)>=0||!(!(n=e)||!(n.type&&n.type.toLowerCase().indexOf("colorramp")>=0||n.value&&n.value.type&&n.value.type.toLowerCase().indexOf("colorramp")>=0))||b(e);var n}function y(e){return"feature"===e.type}function S(e){return"imagery-tile"===e.type&&e.sourceJSON.capabilities.toLowerCase().indexOf("tilesonly")<0}function A(e){return"imagery"===e.type||S(e)}function D(e){return"imagery-tile"===e.type&&!S(e)}function k(e){return null==e||"string"==typeof e&&""===e||(0,i.h)(e)&&function(e){if(null==e)return!0;if((0,i.i)(e)&&((0,i.a)(e)||"string"==typeof e||"function"==typeof e.splice||(0,i.b)(e)||(0,i.c)(e)||(0,i.d)(e)))return!e.length;var t=(0,i.g)(e);if(t==r||t==s)return!e.size;if((0,i.e)(e))return!(0,i.f)(e).length;for(var n in e)if(a.call(e,n))return!1;return!0}(e)||Array.isArray(e)&&e.length<1||"object"==typeof e&&!1===(0,i.a)(e)&&function(e){let t=!0;if("object"==typeof e&&!1===(0,i.a)(e))for(const n in e){const i=e?.[n];if(!0===e.hasOwnProperty(n)&&null!=i&&""!==i){t=!1;break}}return t}(e)}},90949:(e,t,n)=>{n.d(t,{C:()=>r,U:()=>i,a:()=>s});const i={Scale:"s",PopoverTimer:60},r={s:"s",m:"m",l:"l"},s={absolute:"absolute",fixed:"fixed"}}}]);