/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-47d5c2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-47d5c2"],{64307:(e,t,i)=>{i.d(t,{a:()=>u,b:()=>l,c:()=>d,d:()=>g,e:()=>n,f:()=>y,g:()=>c,h:()=>b,i:()=>A,j:()=>h,q:()=>m,u:()=>w});var r=i(66913),s=i(70392),o=i(46710);const a='owner:"esri" AND title:"AppSwitcher Config" AND type: "Application Configuration"';async function n(e){const t=(0,s.g)(e);if(!t)return;const i=`${t}portals/self/settings`;return(0,r.f)((()=>f(i)),"portalSettings",t)}async function p(e){const t=(0,s.g)();if(t&&e)return f(`${t}content/items/${e}/data`)}async function c(){var e;const{portal:t,user:i}=o.c;if(!(null==t?void 0:t.id)||!i)return;const r=await async function(){const e=(0,s.g)();if(e)return f(`${e}search`,{num:1,start:0,sortField:"title",sortOrder:"asc",q:a})}(),n=null===(e=null==r?void 0:r.results)||void 0===e?void 0:e[0];if(!n)return;const c=n.id;return await p(c)}async function l(){const{user:e}=o.c;return f(`${(0,s.g)()}community/users/${e.username}/properties`)}async function d(){const{portal:e}=o.c;return f(`${(0,s.g)()}portals/${e.id}/approvedApps`,{returnAllApps:!1})}async function h(e,t,i="results"){let r,s,o,a,n=1,p=[];t.start=n,t.num||(t.num=100);try{const c=await f(e,t);if(!(null==c?void 0:c[i]))return p;for(p=[...p,...c[i]],n=c.nextStart,r=c.total-p.length,s=Math.ceil(r/100),o=[],a=0;a<s;a++)t.start=n+100*a,o.push(f(e,t));try{return(await Promise.all(o)).forEach((e=>{p=[...p,...e[i]]})),p}catch(e){return p}}catch(e){return p}}async function u(){const{user:e}=o.c;return h(`${(0,s.g)()}community/users/${e.username}/provisionedListings`,{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")}async function g(){const e=`${(0,s.g)()}portals/self/subscriptionInfo`;try{const t=await f(e);return(null==t?void 0:t.orgCapabilities)||[]}catch(e){return[]}}async function m(e,t){if(t&&(null==e?void 0:e.length))return f(`${(0,s.g)()}search`,{num:100,q:`id:(${e.map((e=>`"${e.itemId}"`)).join(" OR ")})`})}const v='owner:"esri" AND title:"BlockedApps Config" AND type: "Application Configuration"';async function b(){var e,t;const i=`${(0,s.g)()}search`;try{const r=await f(i,{num:10,start:0,sortField:"title",sortOrder:"asc",q:v});if(!r)return[];const s=(null===(t=null===(e=r.results)||void 0===e?void 0:e[0])||void 0===t?void 0:t.id)||"",o=await p(s);return(null==o?void 0:o.blockedApps)||[]}catch(e){return[]}}async function A(){const e=`${(0,s.g)()}portals/self/servers`,t=await f(e);return(null==t?void 0:t.servers)||[]}async function y(){const e=`${(0,s.g)()}portals/self/signinSettings`;return await f(e)}async function f(e,t){t||(t={}),t.f="json";const i=(0,r.g)();i&&(t.token=i);const s=new URL(e);Object.keys(t).forEach((e=>s.searchParams.append(e,t[e])));const o=await fetch(s);return await o.json()}async function w(e){const{user:t}=o.c,i=function(e){let t=(0,s.g)();return"/"!==t.slice(-1)&&(t+="/"),`${t}${e}`}(`community/users/${t.username}/setProperties`),a=new FormData;return a.append("properties",JSON.stringify(e)),async function(e,t){t.append("f","json");const i=(0,r.g)();i&&t.append("token",i),fetch(e,{method:"POST",body:t})}(i,a)}},17156:(e,t,i)=>{i.r(t),i.d(t,{arcgis_app_switcher:()=>m,arcgis_app_switcher_link:()=>b});var r=i(35110),s=i(80462),o=i(1984),a=i(46710),n=i(64307),p=i(66913),c=i(70392),l=i(22250),d=i(86587),h=i(91659);i(63280),i(23505),i(21104),i(73838),i(56086);const u={};function g(e){var t;return(null===(t=u[e.toLowerCase()])||void 0===t?void 0:t.valid)||!1}const m=class{constructor(e){(0,r.r)(this,e),this.arcgisAppSwitcherToggle=(0,r.c)(this,"arcgisAppSwitcherToggle",7),this.willQueryForItems=!0,this.blockedApps=[],this.servers=[],this.orgCapabilities=[],this.updateAppsProperties=async()=>{const e=this.getIdsFromDOM(this.primaryContainer),t=this.getAppsByIds(e),i=this.convertToAppData(t),r=this.getIdsFromDOM(this.secondaryContainer),s=this.getAppsByIds(r),o=this.convertToAppData(s),a=Object.assign({},this.userProperties);a.appLauncher={primary:i,secondary:o},await(0,n.u)(a),this.userProperties=a;const p=this.secondaryApps.length;this.primaryApps=t,this.secondaryApps=s,p>0&&!this.secondaryApps.length&&(this.hoveringOverSecondary=!1)},this.handleToggle=()=>{this.isExpanded=!this.isExpanded,this.arcgisAppSwitcherToggle.emit(this.isExpanded)},this.handleShowMore=()=>{this.secondaryExpanded=!0},this.handleDismissIntro=()=>{this.updateAppsProperties(),this.displayIntro=!1},this.keydownHandler=e=>{var t;"Escape"===e.key&&this.isExpanded&&(this.handleToggle(),null===(t=this.toggleButton)||void 0===t||t.focus())},this.api=void 0,this.portal=void 0,this.user=void 0,this.newMapViewerEnabled=!0,this.notebookServerEnabled=!0,this.trackViewerEnabled=!0,this.shouldExpand=!1,this.displayIntro=!1,this.primaryApps=[],this.secondaryApps=[],this.isExpanded=!1,this.hoveringOverSecondary=!1,this.secondaryExpanded=!1,this.sorting=!1,this.focusItemId=void 0,this.dragging=!1}handleLinkClick(){this.isExpanded=!1,this.arcgisAppSwitcherToggle.emit(this.isExpanded)}handleLinkActivated(){this.secondaryExpanded=!0}async handleLinkMove(e){const{uid:t,keyCode:i,index:r}=e.detail;this.focusItemId=t;const s=this.primaryApps.length,o=this.secondaryApps.length,a=r<s;let p;p=a?r<3*Math.ceil(s/3)-3||"ArrowLeft"===i||"ArrowUp"===i||"ArrowRight"===i&&r<s-1:!(r>=s+3||"ArrowRight"===i||"ArrowDown"===i||"ArrowLeft"===i&&r>s);let c,l=-1;if(a&&p||!a&&!p?"ArrowUp"===i?l=r-3:"ArrowRight"===i?l=r+1:"ArrowDown"===i?l=r+3:"ArrowLeft"===i&&(l=r-1):a?"ArrowRight"===i?l=s:"ArrowDown"===i&&(l=r%3+s):l=s,c=a?this.primaryApps.splice(r,1)[0]:this.secondaryApps.splice(r-s,1)[0],p)this.primaryApps.splice(l,0,c);else{const e=l-s;this.secondaryApps.splice(e,0,c)}const d=this.convertToAppData(this.primaryApps),h=this.convertToAppData(this.secondaryApps),u=Object.assign({},this.userProperties);u.appLauncher={primary:d,secondary:h},await(0,n.u)(u),this.userProperties=u,o>0&&!this.secondaryApps.length&&(this.hoveringOverSecondary=!1),window.setTimeout((()=>{this.focusItemId=""}),100)}async handleLinkRemove(e){const t=e.detail,i=Object.assign({},this.userProperties);let{primary:r,secondary:s}=i.appLauncher;r=r.filter((e=>e.uid!==t)),s=s.filter((e=>e.uid!==t)),i.appLauncher={primary:r,secondary:s},await(0,n.u)(i),this.userProperties=i,this.primaryApps=this.primaryApps.filter((e=>(e.itemId||e.title)!==t)),this.secondaryApps=this.secondaryApps.filter((e=>(e.itemId||e.title)!==t))}handleShouldExpandChange(e){this.isExpanded=e}componentDidLoad(){[/Android/i,/webOS/i,/iPhone/i,/iPad/i].some((e=>navigator.userAgent.match(e)))||(s.S.create(this.primaryContainer,{animation:150,group:"apps",filter:".secondary-drag-text",dragClass:"app-item--dragging",onUpdate:this.updateAppsProperties,onAdd:this.updateAppsProperties,onMove:e=>{this.hoveringOverSecondary="secondary-target"===e.to.className},onStart:()=>{this.dragging=!0},onEnd:()=>{this.dragging=!1}}),s.S.create(this.secondaryContainer,{animation:150,group:"apps",filter:".secondary-drag-text",dragClass:"app-item--dragging",onUpdate:this.updateAppsProperties,onAdd:this.updateAppsProperties}))}componentDidRender(){this.primaryContainer.contains(this.secondaryDragText)&&this.secondaryContainer.appendChild(this.secondaryDragText)}async componentWillLoad(){var e,t;const i=await(0,o.g)(this.el);if(this.strings=i[0],this.willQueryForItems=function(){const e=(0,l.c)("APSW-query",!0);if((null==e?void 0:e.expires)>(new Date).setHours((new Date).getHours()))return!0;const t={expires:(new Date).setHours((new Date).getHours()+5)};return(0,l.d)("APSW-query",t,{path:"/",domain:document.domain,sameSite:"Strict"},!0),!1}(),this.initializeConfig(),!(null===(e=a.c.portal)||void 0===e?void 0:e.id)||!a.c.user)return;const[r,s,p,c,d,h]=await Promise.all([(0,n.g)(),(0,n.a)(),(0,n.b)(),(0,n.c)(),(0,n.d)(),(0,n.e)()]);this.portalSettings=h,this.orgCapabilities=d,this.userProperties=(null==p?void 0:p.properties)||{},this.userApps=null==r?void 0:r.appSwitcher,a.c.portal.isPortal||this.userApps.apps.unshift(this.getAgoApp()),this.approvedApps=(null===(t=c.approvedApps)||void 0===t?void 0:t.filter((e=>!e.hideForNonPrivilegedMember)))||[],this.userProperties.appLauncher||(this.willQueryForItems=!1,this.displayIntro=!0),this.provisionedListings=s||[],this.provisionedListings.forEach((e=>{var t;const i=null===(t=e.clientId)||void 0===t?void 0:t.toLowerCase();i&&(u[i]={valid:!0,itemId:e.itemId,clientId:e.clientId})})),null==d||d.forEach((e=>{var t;const i=null===(t=e.id)||void 0===t?void 0:t.toLowerCase();i&&(u[i]={valid:!0,clientId:e.id})})),await this.init(),this.primaryApps.forEach((e=>{e.fontSize=this.calcFontSize(e)}))}convertToAppData(e){return e.map((e=>({label:e.label,uid:e.itemId||e.title})))}getAppsByIds(e){const t=[...this.primaryApps,...this.secondaryApps];return e.map((e=>t.find((t=>t.itemId===e||t.title===e))))}getIdsFromDOM(e){const t=[];return e.querySelectorAll(".app-item").forEach((e=>{t.push(e.dataset.id)})),t}getTextWidth(e){const t=document.createElement("canvas").getContext("2d");return t.font="avenir",t.measureText(e).width}calcFontSize(e){if(!e.abbr)return;const t=[0,32,24,20,18,16,14,12,10,8,6];let i=Math.ceil(this.getTextWidth(e.abbr)/5);return i>t.length-1&&(i=t.length-1),`${t[i]}px`}async getBlockedApps(){const[e,t]=await Promise.all([(0,n.f)(),(0,n.h)()]),i=(null==e?void 0:e.blockedApps)||[];return(i.length||e.blockBetaApps)&&(null==t?void 0:t.length)?(e.blockBetaApps&&t.forEach((e=>{e.isBeta&&!i.includes(e.clientid)&&i.push(e.clientid)})),i.forEach((e=>{const i=t.find((t=>t.clientid===e));i&&this.blockedApps.push(i)})),this.blockedApps):[]}filterBlockedApps(e){return e.filter((e=>{var t;return!(null===(t=this.blockedApps)||void 0===t?void 0:t.some((t=>e.itemId&&e.itemId===t.itemid||e.title&&e.title===t.title)))}))}populateAppIdentifiers(e,t){let i=Object.keys(this.appDictionary).map((e=>this.appDictionary[e])).filter((e=>e.itemId===t.uid||e.title===t.uid)).shift();return i&&!this.appDictionary[t.uid]&&(t.uid=i.itemId||i.title),(null==i?void 0:i.hasBeenPopulated)||(i?((t.hasChanged||i.hasChanged||!i.canAccess&&!i.ignoreNoAccess)&&this.isAdmin()&&(this.appDictionary[t.uid].hasChanged=!0,this.appDictionary[t.uid].ignoreNoAccess=t.ignoreNoAccess),t.isNew&&(this.appDictionary[t.uid].isNew=!0),delete this.newAppDictionary[t.uid]):(i=t,i.canAccess=!1,i.itemId=t.uid,this.appDictionary[t.uid]=i),this.appDictionary[t.uid].hasBeenPopulated=!0,e.push(i)),e}getAppExceptions(){const{portal:e,user:t}=a.c;return{"Open Data":{hasAccess:()=>function(e){return!!(!(null==e?void 0:e.portalProperties)||e.portalProperties.openData&&e.portalProperties.openData.enabled)&&g("HubforArcGIS")}(e)},AppStudio:{hasAccess:()=>g("arcgisWebApps")},"ArcGIS Velocity":{hasAccess:()=>function(e){const t=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],i=((null==e?void 0:e.privileges)||[]).some((e=>t.indexOf(e)>-1)),r=g("velocity");return i&&r}(t)},"ArcGIS Hub":{hasAccess:()=>g("HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:()=>g("HubforArcGIS")},"ArcGIS QuickCapture Web Designer":{hasAccess:()=>g("arcgisWebApps")},"ArcGIS Dashboards":{hasAccess:()=>g("dashboards")},"Map Viewer":{hasAccess:()=>function(e,t){var i;const r=e.isPortal&&!1===(null===(i=e.portalProperties)||void 0===i?void 0:i.newMapViewerEnabled);return t&&!r&&g("arcgisWebApps")}(e,this.newMapViewerEnabled)},"Map Viewer Classic":{hasAccess:()=>g("arcgisWebApps")},"Operations Dashboard for ArcGIS":{hasAccess:()=>g("opsdashboard")},"ArcGIS Dashboards Classic":{hasAccess:()=>g("opsdashboard")},"Ortho Maker":{hasAccess:()=>function(e){var t;return!!(null===(t=e.helperServices)||void 0===t?void 0:t.rasterAnalytics)&&!!e.helperServices.orthoMapping}(e)},Notebook:{hasAccess:()=>function(e,t,i){var r;const s=i&&(!e.isPortal||e.supportsHostedNotebooks),o=!!(null===(r=null==t?void 0:t.privileges)||void 0===r?void 0:r.length)&&t.privileges.some((e=>"premium:publisher:createNotebooks"===e));return s&&o}(e,t,this.notebookServerEnabled)},"Scene Viewer":{hasAccess:()=>g("arcgisWebApps")},"Story Maps":{hasAccess:()=>g("arcgisWebApps")},Survey123:{hasAccess:()=>g("survey123")},"Track Viewer":{hasAccess:()=>function(e,t){var i;return!!(null===(i=e.helperServices)||void 0===i?void 0:i.locationTracking)&&t}(e,this.trackViewerEnabled)},"Instant Apps":{hasAccess:()=>g("arcgisWebApps")},"ArcGIS Maps for Adobe Creative Cloud":{hasAccess:()=>g("arcgisWebApps")&&!a.c.portal.isPortal},"Web Editor":{hasAccess:()=>{var e,t;return!!(null===(t=null===(e=this.portalSettings)||void 0===e?void 0:e.portalConfigProperties)||void 0===t?void 0:t.webEditorEnabled)}}}}getExcludedProvisionedListings(){let e={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1,mapsForCreativeCloud:1,indoorsweb:1,indoorskiosk:1,indoorsspaceplanner:1};const{portal:t}=a.c;return t.isPortal&&(e=Object.assign(Object.assign({},e),{arcgisonline:1,arcgisUrban:1,arcgisinstantapps:1})),e}getImagePath(e){return(0,r.a)(`./assets/${(null==e?void 0:e.image)?e.image:""}`)}modifyWebAppForView(e){var t,i;return(null===(t=e.appSwitcher)||void 0===t?void 0:t.image)||e.icon?e.image=this.getWebMappingAppImgPath(e):e.placeHolderIcon=`${this.getImagePath()}svg-app-circle.svg`,e.abbr=(null===(i=e.appSwitcher)||void 0===i?void 0:i.abbr)||e.abbreviation,delete e.abbreviation,delete e.appSwitcher,delete e.approvedApp,delete e.webMappingApp,e}modifySystemAppForView(e,t){var i;const{portal:r}=a.c;if(e.image?e.image=this.getImagePath(e):e.placeHolderIcon=`${this.getImagePath()}svg-app-icon.svg`,0===(null===(i=e.url)||void 0===i?void 0:i.indexOf("../"))){const t=r.urlKey?`${r.urlKey}.${r.customBaseUrl}`:r.portalHostname;e.url=`${location.protocol}//${t}${e.url.substring(2,e.url.length)}`}return delete e.isLicensed,delete e.privileges,e.itemId=t,e}getWebMappingAppImgPath(e){const{portal:t}=a.c,i=(0,p.g)(t);return e.icon?`${(0,c.g)()}portals/self/resources/${e.icon}?token=${i}`:`${(0,c.g)()}content/items/${e.itemId}/resources/${e.appSwitcher.image}?token=${i}`}modifyPartnerAppForView(e){var t,i,r;e.appSwitcher=null===(t=e.properties)||void 0===t?void 0:t.appSwitcher;const s=(null===(i=e.appSwitcher)||void 0===i?void 0:i.image)||e.icon;return{abbr:(null===(r=e.appSwitcher)||void 0===r?void 0:r.abbr)||e.abbreviation,itemId:e.itemId,canAccess:!0,webMappingApp:!0,image:s?this.getWebMappingAppImgPath(e):null,label:e.title||e.label,url:e.url,placeHolderIcon:e.placeHolderIcon||`${this.getImagePath()}svg-app-circle.svg`}}async getLicensedApps(){var e,t,i,r,s,o,n,p,c;const{portal:l,user:d}=a.c,h={},u={},g=this.getAppExceptions(),m=this.getExcludedProvisionedListings(),v=[],b=this.userApps.apps.length;for(let a=0;a<b;a++){const m=this.userApps.apps[a],b=m.itemId||m.title;let A=!0;const y=null===(e=this.blockedApps)||void 0===e?void 0:e.some((e=>m.itemId&&m.itemId===e.itemid||m.title&&m.title===e.title));if(h[b]=1,u[b]=m,y)continue;if("ArcGISEnterpriseOnKubernetes"===(l.portalDeploymentType||(null===(t=l.sourceJSON)||void 0===t?void 0:t.portalDeploymentType))&&!1===m.supportsKubernetes)continue;if(g[m.title]&&!g[m.title].hasAccess(m.title))continue;const f=l.subscriptionInfo||(null===(i=l.sourceJSON)||void 0===i?void 0:i.subscriptionInfo);if(m.subscriptionType)(null==f?void 0:f.type)===m.subscriptionType&&(u[b].canAccess=!0,v.push(this.modifySystemAppForView(m,b)));else if(m.orgCapabilities)(null===(r=this.orgCapabilities)||void 0===r?void 0:r.length)&&this.orgCapabilities.some((e=>m.orgCapabilities.includes(e.id)))&&(u[b].canAccess=!0,v.push(this.modifySystemAppForView(m,b)));else if((null===(s=m.privileges)||void 0===s?void 0:s.length)||m.isLicensed||m.serverFunction)if("storytellerut"===(null===(n=(null==d?void 0:d.userLicenseTypeId)||(null===(o=null==d?void 0:d.sourceJSON)||void 0===o?void 0:o.userLicenseTypeId))||void 0===n?void 0:n.toLowerCase())&&"storymaps"===(null===(p=m.label)||void 0===p?void 0:p.toLowerCase()))u[b].canAccess=!0,v.push(this.modifySystemAppForView(m,b));else{if((null===(c=m.privileges)||void 0===c?void 0:c.length)>0&&(null==d?void 0:d.privileges)){for(let e=0;e<m.privileges.length;e++)if(d.privileges.indexOf(m.privileges[e])<0){A=!1;break}if(!m.isLicensed&&A){u[b].canAccess=!0,v.push(this.modifySystemAppForView(m,b));continue}}if(m.isLicensed&&A)for(let e=0;e<this.provisionedListings.length;e++)if(b===this.provisionedListings[e].itemId||b===this.provisionedListings[e].title){u[b].canAccess=!0,v.push(this.modifySystemAppForView(m,b));break}m.serverFunction&&A&&this.servers.some((e=>{var t;return((null===(t=e.serverFunction)||void 0===t?void 0:t.split(","))||[]).includes(m.serverFunction)}))&&(u[b].canAccess=!0,v.push(this.modifySystemAppForView(m,b)))}else u[b].canAccess=!0,v.push(this.modifySystemAppForView(m,b))}return this.provisionedListings.forEach((e=>{if("Web Mapping Application"===e.type&&!m[e.clientId]&&!h[e.itemId]&&e.url&&e.title&&!h[e.title]&&e.typeKeywords.indexOf("hideFromAppSwitcher")<0){const t=this.modifyPartnerAppForView(e);u[e.itemId]=t,v.push(t)}})),{apps:[...this.approvedApps.map((e=>{const t=Object.assign(Object.assign({},e.appProperties),{itemId:e.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!this.willQueryForItems});return u[e.itemId]=t,this.modifyWebAppForView(t)})),...v],appDictionary:u}}isAdmin(){const{user:e}=a.c;return!!e&&("org_admin"===e.role||"account_admin"===e.role)}mapAppTitles(e){const{portal:t}=a.c;e.forEach((e=>{"Map Viewer Beta"===e.uid&&(e.uid="Map Viewer"),t.isPortal&&("Operations Dashboard for ArcGIS"===e.uid?e.uid="ArcGIS Dashboards Classic":"Workforce for ArcGIS"===e.uid&&(e.uid="ArcGIS Workforce"))}))}async init(){var e;a.c.portal.isPortal&&(this.servers=await(0,n.i)()),await this.getBlockedApps();const{apps:t,appDictionary:i}=await this.getLicensedApps();if(this.appDictionary=i,this.userProperties.appLauncher&&(this.userProperties.appLauncher.primary&&this.mapAppTitles(this.userProperties.appLauncher.primary),this.userProperties.appLauncher.secondary&&this.mapAppTitles(this.userProperties.appLauncher.secondary)),!(this.userProperties.appLauncher&&this.userProperties.appLauncher.primary&&this.userProperties.appLauncher.secondary))return this.primaryApps=t.slice().sort(((e,t)=>e.label<t.label?-1:1)),this.primaryApps=this.filterBlockedApps(this.primaryApps),void(this.secondaryApps=[]);{const t=await(0,n.q)(this.approvedApps,this.willQueryForItems);(null===(e=null==t?void 0:t.results)||void 0===e?void 0:e.length)>0&&t.results.forEach((e=>{const t=this.appDictionary[e.id];t.canAccess=!0,t.hasChanged=t.url!==e.url&&!!e.url})),this.newAppDictionary=Object.assign({},this.appDictionary),this.userProperties.appLauncher.primary.forEach((e=>{"Map Viewer"===e.label&&(e.uid="Map Viewer")})),this.primaryApps=this.userProperties.appLauncher.primary.reduce(this.populateAppIdentifiers.bind(this),[])||[],this.secondaryApps=this.userProperties.appLauncher.secondary.reduce(this.populateAppIdentifiers.bind(this),[])||[],this.primaryApps=this.filterBlockedApps(this.primaryApps),this.secondaryApps=this.filterBlockedApps(this.secondaryApps);for(const e in this.newAppDictionary)this.newAppDictionary[e].canAccess&&(this.newAppDictionary[e].isNew=!0,this.appDictionary[e]=this.newAppDictionary[e],this.primaryApps.push(this.newAppDictionary[e]))}}getAgoApp(){const{portal:e,user:t}=a.c,i=`${location.protocol}//${e.urlKey?`${e.urlKey}.${e.customBaseUrl}`:e.portalHostname}/home/`,{landingPage:r}=this.userProperties;return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:`${i}${(null==r?void 0:r.url)?r.url:(0,h.f)(t)?"organization.html":"index.html"}`}}initializeConfig(){a.c.api=this.api,a.c.user=this.user,a.c.portal=this.portal}render(){const e=this.primaryApps.length+this.secondaryApps.length,t="rtl"===(0,d.g)(this.el);return(0,r.h)(r.H,{onKeyDown:this.keydownHandler},(0,r.h)("calcite-button",{appearance:"transparent",kind:"neutral",class:{"toggle-button":!0,"toggle-button--expanded":this.isExpanded},"aria-label":this.strings.appLauncher,onClick:this.handleToggle,ref:e=>this.toggleButton=e,"aria-expanded":this.isExpanded},(0,r.h)("calcite-icon",{class:"toggle-button__icon",icon:"app-launcher",scale:"m"})),(0,r.h)("div",{class:"apps-content-container"},(0,r.h)("div",{class:{"apps-content":!0,"apps-content--rtl":t,"apps-content--expanded":this.isExpanded,"apps-content--dragging":this.dragging},"aria-hidden":"false"},(0,r.h)("nav",{class:"dropdown-menu dropdown-right",role:"menu"},this.displayIntro&&(0,r.h)("div",{class:"intro-container"},(0,r.h)("p",{class:"drag-and-drop-intro intro-text"},this.strings.dragDrop),(0,r.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",onClick:this.handleDismissIntro},this.strings.gotIt)),(0,r.h)("ul",{class:"apps-list",ref:e=>this.primaryContainer=e},this.primaryApps.map(((t,i)=>(0,r.h)("li",{"data-id":t.itemId||t.title,key:t.itemId,class:{"app-item":!0,"app-item--missing":!t.canAccess}},(0,r.h)("arcgis-app-switcher-link",{app:t,index:i,total:e,focusItemId:this.focusItemId,openText:this.strings.openWindow}))))),!this.secondaryExpanded&&(0,r.h)("button",{class:"show-more",onClick:this.handleShowMore},this.strings.showMore," ",(0,r.h)("calcite-icon",{icon:"chevron-down",scale:"s"})),(0,r.h)("div",{class:{"secondary-container":!0,"secondary-container--hidden":!this.secondaryExpanded},"aria-expanded":"true"},(0,r.h)("ul",{class:{"secondary-target":0===this.secondaryApps.length,"secondary-list":0!==this.secondaryApps.length,"secondary-target--hover":this.hoveringOverSecondary&&0===this.secondaryApps.length},ref:e=>this.secondaryContainer=e},0===this.secondaryApps.length&&!this.hoveringOverSecondary&&(0,r.h)("p",{class:"secondary-drag-text",ref:e=>this.secondaryDragText=e},this.strings.dragSecondary),this.secondaryApps.map(((t,i)=>(0,r.h)("li",{"data-id":t.itemId,key:t.itemId,class:{"app-item":!0,"app-item--missing":!t.canAccess}},(0,r.h)("arcgis-app-switcher-link",{app:t,index:this.primaryApps.length+i,total:e,focusItemId:this.focusItemId,openText:this.strings.openWindow}))))))))))}static get assetsDirs(){return["assets"]}get el(){return(0,r.d)(this)}static get watchers(){return{shouldExpand:["handleShouldExpandChange"]}}};m.style=".apps-content-container{position:relative}.toggle-button{margin:0px;display:block;cursor:pointer;overflow:visible;border-width:0px;padding:0px;-webkit-appearance:button;background-color:transparent;height:3.5rem;width:3.5rem}.toggle-button:not(.toggle-button--expanded):hover{box-shadow:inset 0 -3px 0 0 rgba(0, 121, 193, 0.5)}.toggle-button--expanded{box-shadow:inset 0 -3px 0 0 var(--calcite-color-brand)}.toggle-button__icon{display:block;height:1.5rem;width:1.5rem}:host{position:relative;color:var(--calcite-color-text-2)}.apps-content{position:absolute;right:0px;display:none}.apps-content--rtl{left:0px;right:auto}.apps-content--expanded{display:block}.apps-content ::-webkit-scrollbar{width:0.5rem}.apps-content ::-webkit-scrollbar-thumb{border-radius:var(--calcite-border-radius);background-color:rgba(0, 0, 0, 0.5);box-shadow:0 0 1px rgba(255, 255, 255, 0.5)}.dropdown-menu{top:0px;cursor:default;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-background);border-top:1px solid var(--calcite-color-border-1);max-height:85vh;max-width:480px;min-width:475px}.intro-container{background-color:var(--calcite-color-background);text-align:center}.intro-text{margin:0px;background-color:var(--calcite-color-background);padding-left:4rem;padding-right:4rem;padding-top:1rem;padding-bottom:0.75rem;font-size:0.875rem;color:var(--calcite-color-text-3)}.apps-list{margin-top:0px;margin-bottom:0px;list-style-type:none;flex-direction:row;flex-wrap:wrap;overflow:hidden;background-color:var(--calcite-color-background);padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.5rem;padding-right:0.5rem;text-align:left}.apps-list .secondary-drag-text{display:none}.app-item{position:relative;float:none;margin:0px;box-sizing:border-box;display:inline-block;cursor:pointer;overflow-wrap:break-word;text-align:left;vertical-align:top;font-size:0.875rem;height:110px;width:150px}@-moz-document url-prefix(){.app-item{width:146px}}.apps-content:not(.apps-content--dragging) .app-item:not(.app-item--missing):hover{color:var(--calcite-color-text-1);outline:1px solid var(--calcite-color-brand)}.app-item--dragging{outline-offset:-1px}.app-item--missing{padding-top:0.5rem}.show-more{display:flex;width:100%;cursor:pointer;align-items:center;justify-content:center;border-style:none;background-color:var(--calcite-color-foreground-3);padding:0.25rem;font-size:0.875rem;color:var(--calcite-color-text-3)}.secondary-container{background-color:var(--calcite-color-foreground-2);padding-top:0.25rem;padding-bottom:0.25rem;border-top:1px solid var(--calcite-color-border-3)}.secondary-container--hidden{display:none}.secondary-target{margin-top:0.75rem;margin-bottom:0.75rem;margin-left:1.5rem;margin-right:1.5rem;overflow:hidden;padding-left:2rem;padding-right:2rem;text-align:center;font-size:0.875rem;border:2px dashed var(--calcite-color-border-2);letter-spacing:normal;height:100px}.secondary-target--hover{border-color:var(--calcite-color-brand)}.secondary-list{margin:0px;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:0.5rem;padding-right:0.5rem;text-align:left}";const v=({index:e,total:t,active:i})=>{const s=0===e,o=e<=2,a=e===t-1,n=e>=3*Math.ceil(t/3)-3;return(0,r.h)("span",{class:{"arrow--hidden":!i}},!s&&(0,r.h)("div",{class:"arrow arrow--left"}),!a&&(0,r.h)("div",{class:"arrow arrow--right"}),!o&&(0,r.h)("div",{class:"arrow arrow--top"}),!n&&(0,r.h)("div",{class:"arrow arrow--bottom"}))},b=class{constructor(e){(0,r.r)(this,e),this.arcgisAppSwitcherLinkActivated=(0,r.c)(this,"arcgisAppSwitcherLinkActivated",7),this.arcgisAppSwitcherLinkMove=(0,r.c)(this,"arcgisAppSwitcherLinkMove",7),this.arcgisAppSwitcherLinkRemove=(0,r.c)(this,"arcgisAppSwitcherLinkRemove",7),this.arcgisAppSwitcherLinkClick=(0,r.c)(this,"arcgisAppSwitcherLinkClick",7),this.isFirstRow=!1,this.isLastRow=!1,this.moveElement=e=>{this.arcgisAppSwitcherLinkMove.emit({uid:this.app.itemId||this.app.title,index:this.index,keyCode:e})},this.handleKey=e=>{let t=!0;switch(e.code){case"Space":this.sortingActive=!this.sortingActive,this.arcgisAppSwitcherLinkActivated.emit();break;case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":this.sortingActive&&this.moveElement(e.code);break;default:t=!1}t&&(e.preventDefault(),e.stopPropagation())},this.handleBlur=()=>{this.sortingActive=!1},this.handleRemove=()=>{this.arcgisAppSwitcherLinkRemove.emit(this.app.itemId||this.app.title)},this.handleRemoveKeydown=e=>{switch(e.code){case"Space":case"Enter":this.handleRemove(),e.preventDefault()}},this.handleClick=()=>{this.arcgisAppSwitcherLinkClick.emit()},this.app=void 0,this.index=void 0,this.total=void 0,this.focusItemId=void 0,this.openText=void 0,this.sortingActive=!1}componentDidRender(){var e,t;!this.focusItemId||this.focusItemId!==this.app.itemId&&this.focusItemId!==this.app.title||(this.sortingActive=!0,this.app.canAccess?null===(e=this.linkElement)||void 0===e||e.focus():this.app.canAccess||null===(t=this.missingElement)||void 0===t||t.focus())}render(){var e;const t="rtl"===(0,d.g)(this.el);return(0,r.h)(r.H,null,(null===(e=this.app)||void 0===e?void 0:e.canAccess)&&(0,r.h)("a",{ref:e=>this.linkElement=e,href:this.app.url,class:"app-link",onKeyDown:this.handleKey,onBlur:this.handleBlur,onClick:this.handleClick,draggable:!1,target:"_blank",role:"menuitem"},(0,r.h)("span",{class:"icon-wrapper"},(0,r.h)(v,{active:this.sortingActive,index:this.index,total:this.total}),!this.app.image&&this.app.abbr&&(0,r.h)("span",{style:{fontSize:this.app.fontSize||"20px"},class:"avenir icon-abbr"},this.app.abbr),!this.app.image&&this.app.abbr&&this.app.placeHolderIcon&&(0,r.h)("img",{src:this.app.placeHolderIcon,alt:""}),this.app.image&&(0,r.h)("img",{src:this.app.image,class:"icon-img",alt:""})),this.app.isNew&&(0,r.h)("span",{class:{indicator:!0,"indicator--new":!0,"indicator--new-rtl":t}}),(0,r.h)("span",{class:"label-text"},this.app.label),(0,r.h)("span",{class:"screen-readers"},this.openText)),this.app&&!this.app.canAccess&&(0,r.h)(r.F,null,(0,r.h)("div",{class:{indicator:!0,"indicator--remove":!0,"indicator--remove-rtl":t},tabIndex:0,onClick:this.handleRemove,onKeyDown:this.handleRemoveKeydown},(0,r.h)("calcite-icon",{scale:"s",icon:"x"})),(0,r.h)("div",{ref:e=>this.missingElement=e,class:"missing-icon",tabIndex:0,onKeyDown:this.handleKey,onBlur:this.handleBlur},(0,r.h)(v,{active:this.sortingActive,index:this.index,total:this.total})),(0,r.h)("p",{class:"label-text"},this.app.label)))}get el(){return(0,r.d)(this)}};b.style=":host{display:block;height:93%}.app-link{position:relative;display:block;height:100%;-webkit-user-select:text;-moz-user-select:text;user-select:text;padding-left:0.5rem;padding-right:0.5rem;padding-top:0.5rem;text-decoration-line:none;color:inherit}.app-link:focus{outline:1px solid var(--calcite-color-brand)}.arrow{position:absolute;height:0px;width:0px}.arrow--hidden{visibility:hidden}.arrow--left{border-right:5px solid var(--calcite-color-brand);border-bottom:5px solid transparent;border-top:5px solid transparent;left:38px;top:27px}.arrow--right{border-left:5px solid var(--calcite-color-brand);border-bottom:5px solid transparent;border-top:5px solid transparent;right:38px;top:27px}.arrow--top{border-bottom:5px solid var(--calcite-color-brand);border-left:5px solid transparent;border-right:5px solid transparent;top:0;right:70px}.arrow--bottom{border-top:5px solid var(--calcite-color-brand);border-left:5px solid transparent;border-right:5px solid transparent;top:59px;right:70px}.missing-icon .arrow--top{top:-4px}.icon-wrapper{margin-top:0px;margin-bottom:0px;margin-left:auto;margin-right:auto;margin-bottom:0.5rem;display:block;height:3rem;width:3rem;background-size:contain;background-repeat:no-repeat;text-align:center;font-size:1.125rem;color:var(--calcite-color-text-2)}.icon-abbr{position:absolute;width:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:1.25rem;font-weight:700;color:var(--calcite-color-foreground-1);line-height:3rem;text-shadow:0 1px 8px var(--calcite-color-text-3);transform:translateZ(0)}.icon-img{pointer-events:none;height:3rem;width:3rem}.indicator{position:absolute;clear:both;box-sizing:border-box;height:1rem;width:1rem;border-radius:50%;border:2px solid var(--calcite-color-foreground-1);z-index:50}.indicator--new{background-color:var(--calcite-color-status-success);top:4px;right:46px}.indicator--new-rtl{right:auto;left:46px}.indicator--remove{display:flex;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);line-height:2px;padding:1px;right:42px;top:2px}.indicator--remove-rtl{right:auto;left:42px}.indicator--remove:hover,.indicator--remove:focus{outline:2px solid transparent;outline-offset:2px;border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger)}.missing-icon{margin-top:0px;margin-bottom:0px;margin-left:auto;margin-right:auto;margin-bottom:0.5rem;box-sizing:border-box;display:block;height:3rem;width:3rem;cursor:pointer;background-color:var(--calcite-color-foreground-3);text-align:center;border:1px dashed var(--calcite-color-inverse);border-radius:6px;outline-color:var(--calcite-color-brand)}.label-text{margin-top:0px;margin-bottom:0px;margin-left:auto;margin-right:auto;display:block;text-align:center;line-height:17px;width:128px}.screen-readers{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}"},22250:(e,t,i)=>{i.d(t,{a:()=>c,b:()=>l,c:()=>o,d:()=>s,g:()=>n,r:()=>p,s:()=>a});var r=i(88703);function s(e,t,i,r){!function(e,t,i){let r=null==(i=i||{})?void 0:i.expires;if("number"==typeof r){const e=new Date,t=24*r*60*60*1e3;e.setTime(Date.now()+t),r=i.expires=e}"string"!=typeof r&&(null==r?void 0:r.toUTCString)&&(i.expires=r.toUTCString());let s,o=`${e}=${encodeURIComponent(t)}`;for(s in i){o+=`; ${s}`;const e=i[s];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,r?JSON.stringify(t):t,i)}function o(e,t){const i=function(e){const t=document.cookie,i=new RegExp(`(?:^|; )${(0,r.e)(e)}=([^;]*)`),s=t.match(i);return s?decodeURIComponent(s[1]):void 0}(e);return i&&t?JSON.parse(i):i}function a(e,t,i){window.localStorage.setItem(e,i?JSON.stringify(t):t)}function n(e,t){const i=window.localStorage.getItem(e);return i&&t?JSON.parse(i):i}function p(e){window.localStorage.removeItem(e)}function c(e,t,i){window.sessionStorage.setItem(e,i?JSON.stringify(t):t)}function l(e,t){const i=window.sessionStorage.getItem(e);return i&&t?JSON.parse(i):i}}}]);