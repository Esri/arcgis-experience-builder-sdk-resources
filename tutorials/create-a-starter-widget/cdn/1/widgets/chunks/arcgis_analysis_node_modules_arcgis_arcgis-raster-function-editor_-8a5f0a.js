"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-8a5f0a"],{59498:(e,t,n)=>{n.d(t,{D:()=>o,S:()=>a,a:()=>l,b:()=>h,f:()=>u,g:()=>d});const a={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Hindi:"hi",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},i=["ar","de","es","fr","it","ja","ko","ru","pl","pt-br","zh-cn"],s={"ar-BH":"ar","en-AU":"en","en-CA":"en","en-GB":"en","en-US":"en","es-ES":"es","es-MX":"es","de-CH":"de","de-AT":"de","de-DE":"de","fr-CA":"fr","fr-CH":"fr","fr-FR":"fr","it-CH":"it","it-IT":"it",ind:"id",ukr:"uk"},r=[a.Arabic,a.Hebrew],o=a.English;function l(e){return!0===e?"rtl":"ltr"}function d(e=document.documentElement){const t=("[lang]",function e(t){let n;return n=void 0===t||t===document||t===window?null:t.closest("[lang]")||e(t.getRootNode().host),n}(e));const n=t?.lang??window.navigator.language,i=Object.values(a),l=o,d=function(e,t){const n=o;let a=e?.toLowerCase();if(void 0!==a&&-1!==a.indexOf("-")){const[e,t]=a.split("-");a=`${e}-${t.toUpperCase()}`}return a?!0===Object.keys(s).includes(a)?t[a]:a:n}(n,s);return{locale:i.includes(d)?d:l,rtl:r.includes(n)}}async function h(e,t){const n=e.tagName.toLowerCase(),{locale:a,rtl:i}=d(e),s=await async function(e){const{path:t,locale:n,baseURL:a}=e;let i={};try{const e=await fetch(`${a}t9n/${t}.t9n.${n}.json`);i=await e.json()}catch(e){const n=await fetch(`${a}t9n/${t}.t9n.${o}.json`);i=await n.json()}return i}({path:n,locale:a,baseURL:t});return{strings:s,dir:l(i),locale:a}}function u(e,t,n="en"){let a=n;!0===Object.keys(s).includes(n)&&(a=s[n]);const r=a.toLocaleLowerCase();return!0===i.includes(r)&&(t=t.replace(/^https?:\/\/[^/]+\/en/,(e=>e.replace("en",r)))),`${t}analyze/${e}`}},22621:(e,t,n)=>{n.r(t),n.d(t,{rfx_cte_band_combination_editor:()=>h});var a=n(14947),i=(n(34319),n(59498)),s=n(92123),r=n(90949);n(46574),n(46717),n(55139),n(57098),n(74656),n(91123),n(78979),n(46869),n(83345),n(99248),n(16888),n(95323),n(43278),n(86944);const o="methodHelpClickHandler",l="bandHelpClickHandler",d="combinationHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.helpActionClickEventHandlers=new Map,this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method)},this.onBandChange=e=>{const t=e.target.value,n=this.bandCombinationElement.value?.trim(),a=(0,s.m)(n)?[]:n.indexOf(",")>0?n.split(","):n.split(" ");a.push(t),this._updateBandValues(this._getBandComboFormatedValue(a))},this.onBandCombinationChange=()=>{const e=this._getBandCombinationValue();this._updateBandValues(e)},this.bandProperties=void 0,this.method=void 0,this.widgetArgs=void 0}connectedCallback(){this.widgetArgs?.rasterArgs&&(this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",(()=>{this.updateRasterArg()})))}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,i.b)(this.hostElement,(0,a.g)("."))),this.updateRasterArg(),this.setMethodValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}setMethodValue(){this.method=this.widgetArgs.inputArgs?.Method?.value??this.widgetArgs.rasterFunctionEnums[0].key}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Method?.displayName,referenceElement:this.bandCombinationMethodContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_method}),t=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandNames?.displayName,referenceElement:this.bandCombinationBandContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_band}),n=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandWavelengths?.displayName,referenceElement:this.bandCombinationCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_combination});this.helpActionClickEventHandlers.set(o,e),this.helpActionClickEventHandlers.set(l,t),this.helpActionClickEventHandlers.set(d,n)}getMethodOptions(){return this.widgetArgs.rasterFunctionEnums.bandComboMethods.map((e=>({key:e.key.toString(),label:e.label})))}getBandOptions(e){return this.bandProperties?this.bandProperties[e].map((e=>({key:e.label.toString(),label:e.label}))):[]}_getBandCombinationValue(){const e=this.bandCombinationElement.value?.trim();if((0,s.m)(e))return[];const t=e.indexOf(",")>0?e.split(","):e.split(" ");return this._getBandComboFormatedValue(t)}_getBandComboFormatedValue(e){return e.map((e=>{let t;return t=1===this.method?parseFloat(e):2===this.method?parseInt(e,10)-1:e.trim(),t}))}_updateBandValues(e){const t=this.widgetArgs.inputArgs;t&&(0===this.method&&t.BandNames?t.BandNames.value=e:1===this.method&&t.BandWavelengths?t.BandWavelengths.value=e:2===this.method&&t.BandIds&&(t.BandIds.value=e)),this.widgetArgs={...this.widgetArgs,inputArgs:t}}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),this.updateBands()}updateBands(){this.layer&&(this.layer.loaded?this.updateBandsOnLayerLoad():this.layer.when((()=>{this.updateBandsOnLayerLoad(),this._setupValues()})))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}updateBandsOnLayerLoad(){let e=[],t=[];const n=this.layer?.rasterInfo,a=n?.keyProperties;if(a?.BandProperties?.forEach(((n,a)=>{e.push({label:String(a+1)}),t.push({label:n.BandName??`Band_${a+1}`})})),!a.BandProperties||a.BandProperties&&!a.BandProperties.length){const a=this._getDefaultBandProperties(n.bandCount);t=a.bandNames,e=a.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelengths:[{label:"200"},{label:"400"},{label:"600"}]}}_getDefaultBandProperties(e){const t=[],n=[];for(let a=1;a<=e;a++)t.push({label:String(a)}),n.push({label:`Band_${a}`});return{bandNames:n,bandIds:t}}getBandCombinationValue(){const e=this.widgetArgs.inputArgs;return 0===this.method&&e.BandNames&&e.BandNames.value&&e.BandNames.value.length?e.BandNames.value.join(" "):1===this.method&&e.BandWavelengths&&e.BandWavelengths.value&&e.BandWavelengths.value.length?e.BandWavelengths.value.join(" "):2===this.method&&e.BandIds&&e.BandIds.value&&e.BandIds.value.length?e.BandIds.value.map((function(e){return+e+1})).join(" "):void 0}render(){const e=this.getMethodOptions(),t=this.getBandCombinationValue(),n=0===this.method?"bandNames":1===this.method?"bandWavelengths":"bandIds",i=this.getBandOptions(n);return(0,a.h)("div",null,(0,a.h)("calcite-label",{alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.bandCombinationMethodContainer=e}},(0,a.h)("rfx-label",{label:this.strings.method,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dtex-common-select",{mode:this.widgetArgs.mode,options:e,value:this.method.toString(),onRfxArgumentChange:this.onMethodChange})),(0,a.h)("calcite-label",{alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.bandCombinationBandContainer=e}},(0,a.h)("rfx-label",{label:this.strings.band,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("rfx-dtex-common-select",{mode:this.widgetArgs.mode,options:i,onRfxArgumentChange:this.onBandChange,value:void 0})),(0,a.h)("calcite-label",{alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.bandCombinationCombinationContainer=e}},(0,a.h)("rfx-label",{label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(d)()}),(0,a.h)("calcite-input-text",{scale:r.U.Scale,dir:this.direction,status:"idle",alignment:"start","prefix-text":"","suffix-text":"",value:t,onCalciteInputTextChange:this.onBandCombinationChange,ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};n(25829)},92123:(e,t,n)=>{n.d(t,{A:()=>h,C:()=>g,D:()=>c,F:()=>u,R:()=>o,T:()=>l,a:()=>d,b:()=>m,c:()=>b,e:()=>f,f:()=>C,g:()=>A,i:()=>p,k:()=>B,l:()=>y,m:()=>w});var a=n(25829),i="[object Map]",s="[object Set]",r=Object.prototype.hasOwnProperty;const o="RasterFunctionTemplate",l="type",d="RasterFunctionVariable",h="arguments",u="function",c="distanceLegacy",g={MIN_VALUE:"minValue",MAX_VALUE:"maxValue",LESS_THAN:"lessThan",GREATER_THAN:"greaterThan"};function p(e){return!!e&&null!=e._object_ref_id}function m(e){return""!==(e=String(e).trim())&&/^[+-]?(\d+)?(\.\d+)?$/.test(e)}function b(e){return e=String(e).trim(),["true","false"].indexOf(e)>=0}function f(e){return e.type&&e.type.toLowerCase().indexOf("recordset")>=0}function C(e){if(!e)return!1;const t=e.type;return[o,d].indexOf(t)>=0||!(!(n=e)||!(n.type&&n.type.toLowerCase().indexOf("colorramp")>=0||n.value&&n.value.type&&n.value.type.toLowerCase().indexOf("colorramp")>=0))||f(e);var n}function A(e){return"feature"===e.type}function v(e){return"imagery-tile"===e.type&&e.sourceJSON.capabilities.toLowerCase().indexOf("tilesonly")<0}function B(e){return"imagery"===e.type||v(e)}function y(e){return"imagery-tile"===e.type&&!v(e)}function w(e){return null==e||"string"==typeof e&&""===e||(0,a.h)(e)&&function(e){if(null==e)return!0;if((0,a.i)(e)&&((0,a.a)(e)||"string"==typeof e||"function"==typeof e.splice||(0,a.b)(e)||(0,a.c)(e)||(0,a.d)(e)))return!e.length;var t=(0,a.g)(e);if(t==i||t==s)return!e.size;if((0,a.e)(e))return!(0,a.f)(e).length;for(var n in e)if(r.call(e,n))return!1;return!0}(e)||Array.isArray(e)&&e.length<1||"object"==typeof e&&!1===(0,a.a)(e)&&function(e){let t=!0;if("object"==typeof e&&!1===(0,a.a)(e))for(const n in e){const a=e?.[n];if(!0===e.hasOwnProperty(n)&&null!=a&&""!==a){t=!1;break}}return t}(e)}},90949:(e,t,n)=>{n.d(t,{C:()=>i,U:()=>a,a:()=>s});const a={Scale:"s",PopoverTimer:60},i={s:"s",m:"m",l:"l"},s={absolute:"absolute",fixed:"fixed"}}}]);