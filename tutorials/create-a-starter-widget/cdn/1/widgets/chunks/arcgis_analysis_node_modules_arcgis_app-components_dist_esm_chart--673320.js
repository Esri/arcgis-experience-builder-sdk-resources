/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_chart--673320.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_chart--673320"],{51627:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r});var l=n(59503),a=(n(21104),n(89393));function r(e){var i;const{layer:n,useFeatureReduction:r,mapView:o,selectedFields:s,modules:u}=l.s,d=n;e=e||{};const f=(0,l.p)((0,l.j)(d)),c=!!(0,a.i)(e.includeSizeVariable)&&e.includeSizeVariable;return u.PieChartCreator.createRenderer({layer:d,view:o,attributes:t(e.fieldInfos),pieChartScheme:e.pieChartScheme||(0,l._)(),includeSizeVariable:c,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!(!(0,l.u)(d)||!c),sizeOptimizationEnabled:!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled,legendOptions:e.legendOptions,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&r}).then((e=>{(0,l.o)(f,e.renderer,{notOpacity:!0});const i=(0,l.g)();if(["chart","chart-size"].indexOf(i)>-1){const i=(0,l.h)(d),n=s.map((e=>e.field)),a=i.map((e=>e.field)),r=n.toString()===a.toString(),o=u.esriLang.clone(n),t=u.esriLang.clone(a);o.sort(),t.sort(),o.toString()===t.toString()&&(e.renderer.attributes=(0,l.j)(d).attributes,r||e.renderer.attributes.sort(((e,i)=>n.indexOf(e.field)-n.indexOf(i.field))),e.renderer.othersCategory=(0,l.j)(d).othersCategory,e.renderer.holePercentage=(0,l.j)(d).holePercentage)}return Promise.resolve(e)}),(e=>Promise.reject(e)))}function o(e){var i,n;const{layer:r,useFeatureReduction:o,mapView:s,modules:u}=l.s,d=r;e=e||{};const f=(0,l.j)(d),c=(0,l.a)(f,"size"),m=(0,l.t)(f,"size"),p=(0,l.p)(f);let b,y=e.fieldInfos?e.fieldInfos:f.attributes.map((e=>({field:e.field,simpleFieldType:l.z.NUMBER}))),z=!0;if(e.fieldInfos&&(f.attributes.forEach(((i,n)=>{i.field!==e.fieldInfos[n].field&&(z=!1)})),z&&(delete e.fieldInfos,(0,l.S)(e)))){const e=f.clone();return Promise.resolve({renderer:e})}z&&(b=f.attributes.map((e=>e.field)));const g=(0,l.j)(d),h=(null===(i=g.attributes)||void 0===i?void 0:i.length)?g.attributes[0].color:null,V=f.backgroundFillSymbol;let v=!1;c&&(v=c.minSize.stops?c.minSize.stops[0].size>c.maxSize.stops[0].size:c.minSize>c.maxSize);const I=y[0];return y[0]=y[1],y[1]=I,u.PieChartCreator.createRenderer({layer:d,view:s,attributes:t(y),pieChartScheme:e.pieChartScheme||(0,l._)(),includeSizeVariable:(0,a.i)(e.includeSizeVariable)?e.includeSizeVariable:!!c,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!p.sizeOutlineVisVar,sizeOptimizationEnabled:(0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!p.sizeAutoVisVar,legendOptions:void 0,forBinning:"binning"===(null===(n=d.featureReduction)||void 0===n?void 0:n.type)&&o}).then((i=>{var n;if(!e.fieldInfos&&c){const e=(0,l.a)(i.renderer,"size");if(e.minDataValue=c.minDataValue,e.maxDataValue=c.maxDataValue,m){const e=(0,l.t)(i.renderer,"size");e.minSliderValue=m.minSliderValue,e.maxSliderValue=m.maxSliderValue}}if(z&&p.opacityVisVar&&p.authOpacityVisVar&&(i.renderer.visualVariables=(0,l.q)(i.renderer,"opacity"),i.renderer.authoringInfo.visualVariables=(0,l.r)(i.renderer,"opacity"),i.renderer.visualVariables.push(p.opacityVisVar),i.renderer.authoringInfo.visualVariables=i.renderer.authoringInfo.visualVariables||[],i.renderer.authoringInfo.visualVariables.push(p.authOpacityVisVar)),(0,l.o)(p,i.renderer,{notOpacity:!0}),b&&i.renderer.attributes.sort(((e,i)=>{const n=b.indexOf(e.field),l=b.indexOf(i.field);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),z&&i.renderer.attributes.forEach(((e,i)=>{e.label=f.attributes[i].label})),i.renderer.size=f.size,i.renderer.holePercentage=f.holePercentage,i.renderer.othersCategory=f.othersCategory,h&&(null===(n=i.renderer.attributes)||void 0===n?void 0:n.length)&&i.renderer.attributes.map(((e,i)=>{z&&(e.color=f.attributes[i].color)})),V&&(i.renderer.backgroundFillSymbol=V),v){const e=(0,l.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){return e.map((e=>({field:e.field,label:s(e.field)})))}function s(e){const i=l.s.fields.filter((i=>i.layerField.name===e));return i.length?i[0].label:""}},38277:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r,g:()=>t});var l=n(59503),a=(n(21104),n(89393));function r(e){var i;const{layer:n,useFeatureReduction:r,mapView:o,selectedFields:t,modules:u}=l.s,d=n;e=e||{};const f=(0,l.p)((0,l.j)(d));return u.PredominanceCreator.createRenderer({layer:d,view:o,fields:s(e.fieldInfos),predominanceScheme:e.predominanceScheme||(0,l.X)(),includeOpacityVariable:!(0,a.i)(e.includeOpacityVariable)||(0,a.i)(e.includeOpacityVariable),includeSizeVariable:!!(0,a.i)(e.includeSizeVariable)&&e.includeSizeVariable,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,l.u)(d),sizeOptimizationEnabled:!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled,legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&r}).then((i=>{(0,l.o)(f,i.renderer,{notOpacity:!0});const n=(0,l.g)();if(!(0,a.i)(e.includeOpacityVariable)&&["predominance","predominance-size"].indexOf(n)>-1){const n=(0,l.h)(d),a=t.map((e=>e.field)).sort(),r=n.map((e=>e.field)).sort();if(a.toString()===r.toString()){const n=(0,l.a)((0,l.j)(d),"opacity"),a=(0,l.t)((0,l.j)(d),"opacity");i.renderer.visualVariables=(0,l.q)(i.renderer,"opacity")||[],n&&i.renderer.visualVariables.push(n),i.renderer.authoringInfo.visualVariables=(0,l.r)(i.renderer,"opacity")||[],a&&i.renderer.authoringInfo.visualVariables.push(a);const r=i.renderer.uniqueValueInfos[0].symbol.clone();i.renderer.uniqueValueInfos=(0,l.j)(d).uniqueValueInfos,(0,l.u)(d)&&("predominance-size"===(0,l.g)()&&!0!==e.includeSizeVariable?(0,l.Y)(i.renderer,r):"predominance"===(0,l.g)()&&!0===e.includeSizeVariable&&(0,l.Z)(i.renderer,r))}}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function o(e){var i;const{layer:n,useFeatureReduction:r,mapView:o,modules:t}=l.s,u=n;e=e||{};const d=(0,l.j)(u),f=(0,l.a)(d,"size"),c=(0,l.t)(d,"size"),m=(0,l.p)(d);let p,b,y=e.fieldInfos?e.fieldInfos:d.uniqueValueGroups[0].classes.map((e=>({field:e.values[0].value,simpleFieldType:l.z.NUMBER}))),z=!0;if(e.fieldInfos&&(d.uniqueValueGroups[0].classes.forEach(((i,n)=>{i.values[0].value!==e.fieldInfos[n].field&&(z=!1)})),z&&(delete e.fieldInfos,(0,l.S)(e)))){const e=d.clone();return Promise.resolve({renderer:e})}z&&(p=d.uniqueValueInfos.map((e=>e.value)));const g=(0,l.j)(u);b=g.uniqueValueInfos&&g.uniqueValueInfos.length?g.uniqueValueInfos[0].symbol:null;const h=d.defaultSymbol,V=d.defaultLabel,v=d.backgroundFillSymbol;let I=!1;f&&(I=f.minSize.stops?f.minSize.stops[0].size>f.maxSize.stops[0].size:f.minSize>f.maxSize);const O=y[0];return y[0]=y[1],y[1]=O,t.PredominanceCreator.createRenderer({layer:u,view:o,fields:s(y),predominanceScheme:e.predominanceScheme||(0,l.X)(),includeOpacityVariable:(0,a.i)(e.includeOpacityVariable)?e.includeOpacityVariable:!!m.opacityVisVar,includeSizeVariable:(0,a.i)(e.includeSizeVariable)?e.includeSizeVariable:!!f,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!m.sizeOutlineVisVar,sizeOptimizationEnabled:(0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!m.sizeAutoVisVar,legendOptions:void 0,defaultSymbolEnabled:(0,a.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!h,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&r}).then((i=>{if(!e.fieldInfos&&f){const e=(0,l.a)(i.renderer,"size");if(e.minDataValue=f.minDataValue,e.maxDataValue=f.maxDataValue,c){const e=(0,l.t)(i.renderer,"size");e.minSliderValue=c.minSliderValue,e.maxSliderValue=c.maxSliderValue}}if(!(0,a.i)(e.includeOpacityVariable)&&z&&m.opacityVisVar&&m.authOpacityVisVar&&(i.renderer.visualVariables=(0,l.q)(i.renderer,"opacity"),i.renderer.authoringInfo.visualVariables=(0,l.r)(i.renderer,"opacity"),i.renderer.visualVariables.push(m.opacityVisVar),i.renderer.authoringInfo.visualVariables=i.renderer.authoringInfo.visualVariables||[],i.renderer.authoringInfo.visualVariables.push(m.authOpacityVisVar)),(0,l.o)(m,i.renderer,{notOpacity:!0}),p&&i.renderer.uniqueValueInfos.sort(((e,i)=>{const n=p.indexOf(e.value),l=p.indexOf(i.value);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),z&&i.renderer.uniqueValueInfos.forEach(((e,i)=>{e.label=d.uniqueValueInfos[i].label})),b&&i.renderer.uniqueValueInfos&&i.renderer.uniqueValueInfos.length){const e=i.renderer.uniqueValueInfos.slice();e.map(((e,i)=>{let n;z?n=d.uniqueValueInfos[i].symbol:(n=b.clone(),(0,l.v)(n,(0,l.w)(e.symbol))),e.symbol=n})),i.renderer.uniqueValueInfos=e}if(h&&(i.renderer.defaultSymbol=h,i.renderer.defaultLabel=V),v&&(i.renderer.backgroundFillSymbol=v),I){const e=(0,l.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){var i;const{layer:n,useFeatureReduction:a,mapView:r,modules:o}=l.s,t=n;return e=e||{},o.predominantCategories({layer:t,view:r,fields:e.fieldInfos.map((e=>e.field)),forBinning:"binning"===(null===(i=t.featureReduction)||void 0===i?void 0:i.type)&&a})}function s(e){return e.map((e=>({name:e.field,label:u(e.field)})))}function u(e){const i=l.s.fields.filter((i=>i.layerField.name===e));return i.length?i[0].label:""}},41565:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r,u:()=>t});var l=n(59503),a=(n(21104),n(89393));function r(e){var i,n;const{layer:r,useFeatureReduction:o,mapImageSublayer:t,mapView:s,modules:u}=l.s,d=r,f=(0,l.g)();let c=e.relationshipScheme;if(!c&&["relationship","relationship-size"].indexOf(f)>-1&&(c=(0,l.a1)()),e=e||{},"relationship-size"===f){const n=(0,l.j)(d).clone(),a=n.authoringInfo;if(a&&(null===(i=e.fieldInfos)||void 0===i?void 0:i.length)>1&&e.fieldInfos[0].field==a.field1.field&&e.fieldInfos[1].field==a.field2.field){if(n.visualVariables=(0,l.q)(n,"size"),n.authoringInfo.visualVariables=(0,l.r)(n,"size"),(0,l.u)(d)){const e=(0,l.T)(d,s),i=n.uniqueValueInfos.slice();i.map((i=>{const n=(0,l.w)(i.symbol);i.symbol=e.clone(),(0,l.v)(i.symbol,n)})),n.uniqueValueInfos=i}return Promise.resolve({renderer:n})}}const m=(0,l.p)((0,l.j)(d)),p={layer:d,view:s,field1:{field:e.fieldInfos[0].field},field2:{field:e.fieldInfos[1].field},classificationMethod:"quantile",numClasses:3,focus:"HH",relationshipScheme:c,outlineOptimizationEnabled:!t&&(!(0,a.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!t&&(!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=d.featureReduction)||void 0===n?void 0:n.type)&&o};return u.RelationshipCreator.createRenderer(p).then((e=>((0,l.o)(m,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function o(e){var i;const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:t,modules:s}=l.s,u=n;e=e||{};const d=(0,l.j)(u),f=(0,l.g)(),c=d.authoringInfo,m=(0,l.a)(d,"size");if(e.fieldInfos&&e.fieldInfos.length>1&&e.fieldInfos[0].field==c.field1.field&&e.normalizationField1===c.field1.normalizationField&&e.fieldInfos[1].field==c.field2.field&&e.normalizationField2===c.field2.normalizationField&&(delete e.fieldInfos,delete e.normalizationField1,delete e.normalizationField2,(0,l.S)(e)&&!m))return Promise.resolve({renderer:d.clone()});let p=e.relationshipScheme;!p&&["relationship","relationship-size"].indexOf(f)>-1&&(p=(0,l.a1)());const b=(0,l.p)(d);let y=e.fieldInfos?e.fieldInfos[0]:{field:c.field1.field,simpleFieldType:l.z.NUMBER},z=e.fieldInfos?e.fieldInfos[1]:{field:c.field2.field,simpleFieldType:l.z.NUMBER};const g=void 0!==e.normalizationField1?e.normalizationField1:c.field1.normalizationField,h=void 0!==e.normalizationField2?e.normalizationField2:c.field2.normalizationField,V=d.uniqueValueInfos&&d.uniqueValueInfos.length?d.uniqueValueInfos[0].symbol:null,v=d.defaultSymbol,I=d.defaultLabel,O=e.numClasses?e.numClasses:c.numClasses;return s.RelationshipCreator.createRenderer({layer:u,view:t,field1:{field:y?y.field:d.field,normalizationField:g},field2:{field:z?z.field:d.field,normalizationField:h},classificationMethod:e.classificationMethod?e.classificationMethod:"manual"!==c.classificationMethod?c.classificationMethod:"quantile",numClasses:O,focus:e.focus?e.focus:c.focus,relationshipScheme:p,outlineOptimizationEnabled:!o&&((0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!b.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&((0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!b.sizeAutoVisVar),legendOptions:e.legendOptions?e.legendOptions:d.legendOptions,defaultSymbolEnabled:(0,a.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!d.defaultSymbol,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&r}).then((e=>((0,l.o)(b,e.renderer),V&&e.renderer.uniqueValueInfos.forEach((e=>{const i=V.clone();(0,l.v)(i,(0,l.w)(e.symbol)),e.symbol=i})),(0,l.j)(u).uniqueValueInfos.forEach((i=>{const n=e.renderer.uniqueValueInfos.find((e=>i.value===e.value));n&&(n.label=i.label)})),v&&(e.renderer.defaultSymbol=v,e.renderer.defaultLabel=I),Promise.resolve(e))),(e=>Promise.reject(e)))}function t(e){const{layer:i,modules:n}=l.s;e=e||{};const a=(0,l.j)(i),r=a.authoringInfo;return n.RelationshipCreator.updateRenderer({field1:r.field1,field2:r.field2,numClasses:e.numClasses?e.numClasses:r.numClasses,focus:e.focus?"none"===e.focus?null:e.focus:r.focus,colors:e.colors,renderer:a})}},47362:(e,i,n)=>{n.d(i,{a:()=>o,b:()=>u,c:()=>r,d:()=>f,e:()=>s,f:()=>m,g:()=>d,s:()=>c});var l=n(59503),a=(n(21104),n(89393));function r(e){var i;const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:t,modules:s}=l.s,u=n;e=e||{};const d=(0,l.p)((0,l.j)(u)),f=e.fieldInfos[0];return s.TypeCreator.createRenderer({layer:u,view:t,field:f.field,valueExpression:f.expression,valueExpressionTitle:f.expressionTitle,numTypes:e.numTypes||10,sortBy:e.sortBy||"count",typeScheme:e.typeScheme||(0,l.$)(),returnAllCodedValues:!0,outlineOptimizationEnabled:!o&&(!(0,a.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!o&&(!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!0,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&r}).then((i=>{if(i.excludedUniqueValueInfos.length||(i.renderer.defaultLabel=null,i.renderer.defaultSymbol=null),c(e)){const e=(0,l.j)(u).clone(),n=(0,l.a)(e,"size","auto"),a=(0,l.a)(e,"size","outline");if(i.renderer.visualVariables=[],n&&(i.renderer.visualVariables=i.renderer.visualVariables||[],i.renderer.visualVariables.push(n)),a&&(i.renderer.visualVariables=i.renderer.visualVariables||[],i.renderer.visualVariables.push(a)),i.renderer.uniqueValueInfos=e.uniqueValueInfos,i.renderer.field2=e.field2,i.renderer.field3=e.field3,(0,l.u)(u)&&"type-size"===(0,l.g)()){const e=(0,l.T)(u,t),n=i.renderer.uniqueValueInfos.slice();n.map((i=>{const n=(0,l.w)(i.symbol);i.symbol=e.clone(),(0,l.v)(i.symbol,n)})),i.renderer.uniqueValueInfos=n}}return(0,l.o)(d,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function o(e){var i;const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:t,modules:s}=l.s,u=n;let d=(e=e||[]).fieldInfos?e.fieldInfos[0]:null;const f=(0,l.j)(u),c=(0,l.p)(f),m=f.uniqueValueInfos&&f.uniqueValueInfos.length?f.uniqueValueInfos[0].symbol:null,p=f.defaultSymbol,b=f.defaultLabel,y=d&&(d.field!=f.field||d.expression!=f.valueExpression);return e=e||{},s.TypeCreator.createRenderer({layer:u,view:t,field:d?d.field:f.field,valueExpression:d?d.expression:f.valueExpression,valueExpressionTitle:d?d.expressionTitle:f.valueExpressionTitle,numTypes:e.numTypes||(y?10:f.uniqueValueInfos.length),sortBy:e.sortBy||"count",typeScheme:(0,l.$)(),outlineOptimizationEnabled:!o&&((0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!c.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&((0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!c.sizeAutoVisVar),legendOptions:e.legendOptions||f.legendOptions,defaultSymbolEnabled:(0,a.i)(e.defaultSymbolEnabled)||!!f.defaultSymbol,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&r}).then((e=>{if((0,l.o)(c,e.renderer),m&&e.renderer.uniqueValueInfos&&e.renderer.uniqueValueInfos.length){const i=e.renderer.uniqueValueInfos.slice();i.map((e=>{const i=m.clone();(0,l.v)(i,(0,l.w)(e.symbol)),e.symbol=i})),e.renderer.uniqueValueInfos=i}return p&&(e.renderer.defaultSymbol=p,e.renderer.defaultLabel=b),Promise.resolve(e)}),(e=>Promise.reject(e)))}const t={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};function s(e,i){const{allUniqueValues:n,locale:a,mapView:r,modules:o}=l.s;if(o.intl.setLocale(a),(null==i?void 0:i.simpleFieldType)===l.z.DATE){const i=n&&o.rendererSupportUtils.calculateDateFormatInterval(n.map((e=>e.value)));let l=new Date(e);if("unknown"===r.timeZone)return o.intl.formatDate(l,Object.assign(Object.assign({},o.intl.convertDateFormatToIntlOptions(i?t[i]:"long-month-day-year")),{timeZone:"utc",timeZoneName:"shortOffset"}));{const e=new Date(l.getTime()+6e4*l.getTimezoneOffset());return o.intl.formatDate(e,Object.assign(Object.assign({},o.intl.convertDateFormatToIntlOptions(i?t[i]:"long-month-day-year")),{timeZone:r.timeZone}))}}return o.intl.formatDateOnly(e,o.intl.convertDateFormatToIntlOptions("long-month-day-year"))}function u(){const{allUniqueValues:e,layer:i,modules:n}=l.s,r=(0,l.j)(i);if(!(null==e?void 0:e.length)||!(0,a.i)(e[0].count))return[];let o=[];return r.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push(`${e.value}`))))),o=o.concat(i)})),e.filter((e=>-1===o.indexOf(`${e.value}`))).map((e=>new n.UniqueValueClass({label:e.label,symbol:e.symbol,values:[{value:e.value}]})))}function d(){const{allUniqueValues:e,layer:i}=l.s,n=(0,l.j)(i);if(!(null==e?void 0:e.length)||!(0,a.i)(e[0].count))return[];let r=[];return n.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push(`${e.value}`))))),r=r.concat(i)})),e.filter((e=>-1===r.indexOf(`${e.value}`)))}function f(e){const{strings:i}=l.s;let n=1,a=i.panels.type.defaultGroupName.replace("${number}",n.toString());for(;e.find((e=>e.heading===a));)a=i.panels.type.defaultGroupName.replace("${number}",(++n).toString());return a}function c(e){const{layer:i}=l.s;if(["type","type-size"].indexOf((0,l.g)())>-1){const n=(0,l.j)(i),a={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle};if((0,l.A)(e.fieldInfos[0],a))return!0}return!1}function m(e,i){const{layer:n,mapView:a,modules:r}=l.s,o=(0,l.j)(n),t=(0,l.x)(o.field),u=t&&["small-integer","integer","big-integer","long"].indexOf((0,l.C)(t.layerField))>-1,d=(null==t?void 0:t.simpleFieldType)===l.z.DATE,f="date-only"===(0,l.C)(t.layerField),c=[],m=(0,l.$)();let p=0;e.classes.forEach(((o,b)=>{var y;if(1===o.values.length||i&&-1===i.indexOf(b))c.push(o),p++;else if(!i||i.indexOf(b)>-1){const i=["simple-marker","simple-line","simple-fill","cim"].indexOf(null===(y=o.symbol)||void 0===y?void 0:y.type)>-1?o.symbol:(0,l.T)(n,a,(0,l.g)());o.values.forEach(((n,a)=>{const o=r.esriLang.clone(i);if(a>0)if(m){const i=m.colors[(e.classes.length+p)%m.colors.length];i&&(0,l.v)(o,i)}else{const i=(0,l.a0)().colors,n=new r.esriColor(i[(e.classes.length+p)%10]);n&&(0,l.v)(o,n)}const b=d||f?s(n.value,t):(null==t?void 0:t.simpleFieldType)===l.z.NUMBER?r.intl.formatNumber(u?parseInt(n.value):parseFloat(n.value)):n.value;c.push(new r.UniqueValueClass({values:[new r.UniqueValue({value:n.value})],label:b,symbol:o})),p++}))}})),e.classes=c}},96686:(e,i,n)=>{n.d(i,{a:()=>t,b:()=>u,c:()=>o,d:()=>s});var l=n(59503),a=(n(21104),n(2137),n(6216)),r=n(47362);function o(e){const{layer:i}=l.s,n=(0,l.g)(),r=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return(0,a.s)({fieldInfos:[r]})&&["color-size","type-size"].indexOf(n)>-1&&(0,l.a)((0,l.j)(i),"size")&&(0,l.j)(i).authoringInfo?d((0,l.j)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):(0,a.c)(Object.assign(Object.assign({},e),{fieldInfos:[e.fieldInfos[1]]})).then((i=>d(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function t(e){const{layer:i}=l.s,n=(0,l.g)(),r=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return(0,a.s)({fieldInfos:[r]})&&["color-size-age","type-size-age"].indexOf(n)>-1&&(0,l.a)((0,l.j)(i),"size")&&(0,l.j)(i).authoringInfo?d((0,l.j)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):(0,a.a)(Object.assign(Object.assign({},e),{fieldInfos:[e.fieldInfos[1]]})).then((i=>d(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function s(e,i){const{layer:n}=l.s;return e=e||{},(0,a.f)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[1]]:null})).then((a=>(0,r.a)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(f(e.renderer,a.renderer),e.backgroundFillSymbol=(0,l.j)(n).backgroundFillSymbol,"size"===i&&(e.statistics=a.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function u(e,i){const{layer:n,modules:o}=l.s;return e=e||{},(0,a.g)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[1]]:null})).then((a=>{if(delete e.units,delete e.startTime,delete e.endTime,(0,l.S)(e)){const e=(0,l.j)(n).clone();e.visualVariables=(0,l.q)(e,"size")||[];const i=(0,l.a)(a.renderer,"size");e.visualVariables.push(i),e.authoringInfo=e.authoringInfo||new o.AuthoringInfo({}),e.authoringInfo.visualVariables=(0,l.r)(e,"size")||[];const r=(0,l.t)(a.renderer,"size");return e.authoringInfo.visualVariables.push(r),Promise.resolve({renderer:e})}return(0,r.a)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(f(e.renderer,a.renderer),e.backgroundFillSymbol=(0,l.j)(n).backgroundFillSymbol,"size"===i&&(e.statistics=a.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))}),(e=>Promise.reject(e)))}function d(e,i){const{layer:n}=l.s,a=(0,l.g)();if((0,r.s)(i)&&["type","type-size","type-size-age"].indexOf(a)>-1){const i=(0,l.j)(n).clone();return f(i,e),Promise.resolve({renderer:i})}return(0,r.c)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(f(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function f(e,i){const{layer:n,mapView:a,modules:r}=l.s;e.visualVariables=(0,l.q)(e,"size")||[],e.visualVariables=(0,l.q)(e,"size","auto")||[];const o=(0,l.a)(i,"size");e.visualVariables.push(o),e.authoringInfo=e.authoringInfo||new r.AuthoringInfo({}),e.authoringInfo.visualVariables=(0,l.r)(e,"size")||[];const t=(0,l.t)(i,"size");if(e.authoringInfo.visualVariables.push(t),(0,l.u)(n)){const r=i.classBreakInfos&&i.classBreakInfos.length?i.classBreakInfos[0].symbol:i.uniqueValueInfos&&i.uniqueValueInfos.length?i.uniqueValueInfos[0].symbol:(0,l.T)(n,a,"type-size"),o=e.uniqueValueInfos.slice();o.map((e=>{const i=(0,l.w)(e.symbol);e.symbol=r.clone(),(0,l.v)(e.symbol,i)})),e.uniqueValueInfos=o,e.backgroundFillSymbol=i.backgroundFillSymbol;const t=(0,l.a)(i,"size","outline");t&&e.visualVariables.push(t)}}}}]);