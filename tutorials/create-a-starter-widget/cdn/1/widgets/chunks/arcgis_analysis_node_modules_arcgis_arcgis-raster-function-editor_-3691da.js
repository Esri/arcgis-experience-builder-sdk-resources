"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-3691da"],{60764:(t,e,i)=>{i.d(e,{R:()=>r});const r={CORE:"CORE",STANDARD:"STANDARD"}},35168:(t,e,i)=>{i.r(e),i.d(e,{rfx_functions_list:()=>l,rfx_list_view:()=>h,rfx_search:()=>d});var r=i(14947),s=i(59498),o=(i(34319),i(90949)),a=(i(46574),i(46717),i(55139),i(57098),i(74656),i(91123),i(78979),i(46869),i(27703)),c=(i(99248),i(16888),i(95323),i(43278),i(86944),i(83345),i(60764)),n=i(86578);i(25829),i(22760),i(92123);const l=class{constructor(t){(0,r.r)(this,t),this.triggerChangePanel=(0,r.c)(this,"triggerChangePanel",7),this.triggerSelectTool=(0,r.c)(this,"triggerSelectTool",7),this.openCategoriesChange=(0,r.c)(this,"openCategoriesChange",7),this.modifyPanelState=t=>{this.triggerSelectTool.emit(t),this.triggerChangePanel.emit(1)},this.getRfxFunctionIcon=t=>{let e="";return e="raster-analysis",t.icon??"raster-analysis"},this.displayResults=()=>{const t=Array.from(this.rfxFunctionsMap.keys());return this.searchIsActive?(0,r.h)("calcite-list",{selectionAppearance:"border"},this.renderFunctionSearchList(t)):this.renderRfxFunctionsCategoriesList(t)},this.renderFunctionSearchList=t=>{const e=[];return t.map((t=>{const i=this.rfxFunctionsMap.get(t);void 0!==i&&i.length>0&&e.push(...this.renderRfxFunctions(t))})),e},this.renderRfxFunctionsCategoriesList=t=>t.map(((t,e)=>{const i=this.rfxFunctionsMap.get(t);if(void 0!==i&&i.length>0)return(0,r.h)("calcite-block",{class:"tool-category-wrapper",dir:this.dir,heading:this.rfxFunctionsMap.get(t)[0].categoryTitle,collapsible:!0,open:this.openCategories.has(e),onCalciteBlockToggle:()=>this.openCategoriesChange.emit(e)},(0,r.h)("calcite-list",{selectionAppearance:"border"},this.renderRfxFunctions(t)))})),this.renderNoResults=()=>(0,r.h)("div",{class:"no-results-container"},(0,r.h)("calcite-icon",{class:"no-results-icon",icon:"search",scale:"m"}),(0,r.h)("p",null,this.strings.noResults)),this.createRfxFunctionCategoryHelp=()=>{this.rfxFunctionHelpTooltip=document.createElement("calcite-tooltip"),document.body.appendChild(this.rfxFunctionHelpTooltip)},this.showRfxFunctionTooltip=(t,e,i)=>{this.removeHelpTooltip();const r=t.target;this.createRfxFunctionCategoryHelp(),void 0!==this.rfxFunctionHelpTooltip&&void 0!==r&&(this.rfxFunctionHelpTooltip.referenceElement=r,this.rfxFunctionHelpTooltip.placement="left",this.rfxFunctionHelpTooltip.innerText=i??(0,a.f)(this.strings.defaultToolDescription,{toolTitle:e}),this.hoverTimer=setTimeout((()=>{void 0!==this.rfxFunctionHelpTooltip&&(this.rfxFunctionHelpTooltip.open=!0)}),500))},this.removeHelpTooltip=()=>{clearTimeout(this.hoverTimer),void 0!==this.rfxFunctionHelpTooltip&&(this.rfxFunctionHelpTooltip?.remove(),this.rfxFunctionHelpTooltip.open=!1)},this.renderRfxFunctions=t=>this.rfxFunctionsMap.get(t)?.map((e=>(0,r.h)("calcite-list-item",{class:"tools-list-item",label:e.title,description:!0===this.showFunctionDescription?e.description:"",onClick:()=>this.isEmbeddedInCoreApp?null:this.modifyPanelState(e),onMouseOver:t=>this.showRfxFunctionTooltip(t,e.title,e.description),onMouseOut:this.removeHelpTooltip,value:`${t}_${e.toolName}`,key:`${t}_${e.toolName}`,scale:this.scale},(0,r.h)("calcite-icon",{icon:this.getRfxFunctionIcon(e),slot:"content-start",scale:this.scale}),this.isEmbeddedInCoreApp?(0,r.h)(r.F,null,(0,r.h)("calcite-icon",{id:"add-tool",icon:"plus-circle",slot:"content-end",scale:this.scale,onClick:()=>this.modifyPanelState(e)})):null)))??[],this.categories=void 0,this.mode=c.R.STANDARD,this.rfxFunctionsArray=[],this.searchIsActive=void 0,this.scale=o.U.Scale,this.showFunctionDescription=void 0,this.openCategories=new Set([0]),this.rfxFunctionsMap=new Map}onBuildRfxFunctionsMap(){const t=new Map;for(let e=0;e<this.categories?.length;e+=1)t.set(this.categories[e],this.rfxFunctionsArray.filter((t=>t.categoryName===this.categories[e])));this.rfxFunctionsMap=t}get isEmbeddedInCoreApp(){return this.mode===c.R.CORE}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,s.b)(this.hostElement,(0,r.g)("."))),this.onBuildRfxFunctionsMap()}disconnectedCallback(){this.removeHelpTooltip(),this.rfxFunctionHelpTooltip?.remove()}render(){return(0,r.h)(r.H,null,this.rfxFunctionsArray.length>0?this.displayResults():this.renderNoResults())}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.a)(this)}static get watchers(){return{categories:["onBuildRfxFunctionsMap"],rfxFunctionsArray:["onBuildRfxFunctionsMap"]}}};l.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}:host{display:flex;flex-direction:column;flex-wrap:wrap}.tool-category-wrapper{width:100%}.no-results-container{justify-content:center;display:flex;flex-direction:column;width:100%;align-items:center;color:var(--calcite-color-text-3)}.no-results-icon{margin-top:1.5rem}";const h=class{constructor(t){(0,r.r)(this,t),this.triggerSelectFunction=(0,r.c)(this,"triggerSelectFunction",7),this.searchValue="",this.filterValue=[],this.searchCallback=t=>{this.searchValue=t.detail.searchValue,this.functionsList=[...t.detail.rfxFunctions],this.filterValue=[...t.detail.filterValue]},this.handleTriggerPanelChange=t=>{},this.handleTriggerSelectTool=t=>{const e=t.detail;this.triggerSelectFunction.emit(e.toolName)},this.handleOpenCategoryChange=t=>{const e=t.detail;this.openCategories.has(e)?this.openCategories.delete(e):this.openCategories.add(e)},this.functionsList=[],this.mode=void 0,this.openCategories=new Set([0]),this.showToolDescription=void 0,this.scale=o.U.Scale}async connectedCallback(){const{rfxFunctions:t,rfxCategories:e}=await(0,n.a)();this.rfxFunctionsArray=t.map((t=>({analysisEngine:"raster",categoryName:t.category,categoryTitle:t.categoryTitle,description:t.snippet,icon:"raster-function",title:t.title,toolName:t.name,analysisType:"rft"}))),this.rfxFunctionsArray?.length>-1&&(this.rfxCategories=e,this.functionsList=[...this.rfxFunctionsArray])}render(){return(0,r.h)("div",null,(0,r.h)("rfx-search",{rfxFunctionsArray:this.rfxFunctionsArray??[],onAnalysisStudioSearchUpdate:this.searchCallback,searchValue:this.searchValue,filterValue:this.filterValue,hideFilter:!0}),(0,r.h)("rfx-functions-list",{rfxFunctionsArray:this.functionsList,categories:this.rfxCategories,searchIsActive:""!==this.searchValue,showFunctionDescription:!1,mode:this.mode,scale:this.scale,onTriggerChangePanel:this.handleTriggerPanelChange,onTriggerSelectTool:this.handleTriggerSelectTool,openCategories:this.openCategories,onOpenCategoriesChange:this.handleOpenCategoryChange}))}},d=class{constructor(t){(0,r.r)(this,t),this.analysisStudioSearchUpdate=(0,r.c)(this,"analysisStudioSearchUpdate",7),this.filterList=(t,e)=>t.filter((()=>0===e.length)),this.getSearchableFunctionsList=t=>(t??this.rfxFunctionsArray).map((t=>({title:t.title,toolName:t.toolName,keys:t.keys}))),this.getToolsListFromSearchList=t=>t.map((t=>this.rfxFunctionsArray.filter((e=>t.title===e.title&&t.toolName===e.toolName))[0])),this.onAnalysisStudioSearchUpdate=()=>{if(this.calciteFilter.value!==this.searchValue){const t=this.calciteFilter.filteredItems,e=this.filterList(this.getToolsListFromSearchList(t),this.filterValue);this.rfxFunctionItems=[...e],this.analysisStudioSearchUpdate.emit({rfxFunctions:this.rfxFunctionItems,searchValue:this.calciteFilter.value??"",filterValue:this.filterValue})}},this.handleFilterItemSelection=t=>{const e=!1===this.filterValue.includes(t)?[...this.filterValue,t]:this.filterValue.filter((e=>e!==t)),i=""===this.calciteFilter.value?this.rfxFunctionsArray:this.getToolsListFromSearchList(this.calciteFilter.filteredItems);this.rfxFunctionItems=this.filterList(i,e),this.analysisStudioSearchUpdate.emit({rfxFunctions:this.rfxFunctionItems,searchValue:this.searchValue??"",filterValue:e})},this.open=!1,this.rfxFunctionItems=void 0,this.rfxFunctionsArray=void 0,this.searchValue=void 0,this.filterValue=void 0,this.placeholderText=void 0,this.hideFilter=!1}onDataChange(t){this.getSearchableFunctionsList(t)}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,s.b)(this.hostElement,(0,r.g)("."))),this.searchKeys={},this.rfxFunctionsArray.forEach((t=>(t.keys=(t.keys??[]).map((t=>{const e=t.replace("$","");return this.searchKeys?.[e]})),t))),this.rfxFunctionItems=[...this.rfxFunctionsArray]}componentDidLoad(){this.calciteFilter.items=[...this.calciteFilter.items]}render(){return(0,r.h)(r.H,{class:{"analysis--rtl":"rtl"===this.dir}},(0,r.h)("calcite-filter",{placeholder:this.placeholderText??this.strings.defaultSearchPlaceholder,items:this.getSearchableFunctionsList(this.rfxFunctionsArray),onCalciteFilterChange:this.onAnalysisStudioSearchUpdate,value:this.searchValue,ref:t=>{this.calciteFilter=t},dir:this.dir}))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.a)(this)}static get watchers(){return{rfxFunctionItems:["onDataChange"]}}};d.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}:host{display:flex;background-color:var(--calcite-color-foreground-1);border-bottom:1px solid var(--calcite-color-border-3)}.action-padding{padding-right:var(--analysis-half-spacing);padding-left:0rem}:host(.analysis--rtl) .action-padding{padding-left:var(--analysis-half-spacing);padding-right:0rem}"},90949:(t,e,i)=>{i.d(e,{C:()=>s,U:()=>r,a:()=>o});const r={Scale:"s",PopoverTimer:60},s={s:"s",m:"m",l:"l"},o={absolute:"absolute",fixed:"fixed"}}}]);