/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-999fce.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-999fce"],{41657:(e,o,r)=>{r.d(o,{a:()=>n,g:()=>s,n:()=>t});var l=r(59503);function s(){var e,o;const{layer:r}=l.s,s=r;switch(null===(e=null==s?void 0:s.renderer)||void 0===e?void 0:e.type){case"flow":return"raster-flow";case"vector-field":return"raster-vector-field";case"class-breaks":return"raster-class-breaks";case"unique-value":return"raster-unique-value";case"raster-stretch":return(0,l.n)(s)?"raster-rgb":"raster-stretch";case"raster-shaded-relief":return"raster-shaded-relief";default:return null===(o=s.renderer)||void 0===o?void 0:o.type}}function n(e,o){"renderer"in o&&(o.renderer=e)}function t(e){const{modules:o}=l.s;if(!e)return[new o.esriColor([0,0,0,1]),new o.esriColor([50,50,50,1]),new o.esriColor([73,73,73,1]),new o.esriColor([140,140,140,1]),new o.esriColor([255,255,255,1])];if("multipart"!==(null==e?void 0:e.type))return[e.fromColor,e.toColor];const r=e.colorRamps,s=r.map((e=>e.fromColor));return s.push(r[r.length-1].toColor),s}r(21104),r(2137)},79340:(e,o,r)=>{r.d(o,{a:()=>h,b:()=>f,c:()=>w,d:()=>C,e:()=>y,f:()=>m,g:()=>p,h:()=>d});var l=r(59503),s=(r(21104),r(2137),r(41657));let n;const t="polygon";function a(){const{modules:e}=l.s;return[new e.esriColor("#ff4040"),new e.esriColor("#ff8200"),new e.esriColor("#faa83f"),new e.esriColor("#ffd159"),new e.esriColor("#74b566"),new e.esriColor("#008977"),new e.esriColor("#33e3c8"),new e.esriColor("#43abeb"),new e.esriColor("#4c64c9"),new e.esriColor("#9868ed"),new e.esriColor("#b155e6"),new e.esriColor("#db5181"),new e.esriColor("#e03b99"),new e.esriColor("#2b2b2b"),new e.esriColor("#bdbdbd"),new e.esriColor("#ffffff")]}async function i(e){const o=document.createElement("arcgis-symbol-styler");return o.initialSourceId=n,o.style="max-height: max(calc(100vh - 200px), 300px)",o.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:l.s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await e.getPopoverRefElement()},o.addEventListener("arcgisSymbolStylerSourceIdChange",(({detail:e})=>n=e)),o}function c(e,o,r){return document.URL.indexOf("debug=true")>-1&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify(Object.assign(Object.assign({},r),{portal:"..."})))),e.edit(o,r)}function u(e,o){const{symbol:r,info:{marker:l,stroke:s,fill:n}}=o.detail;document.URL.indexOf("debug=true")>-1&&(console.log("onStylerEdit - symbol:",JSON.stringify(null==r?void 0:r.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(s)),console.log("onStylerEdit - info.fill:",JSON.stringify(n))),e(o)}async function d(e){const{layer:o,mapView:r,modules:s,portal:n,strings:d}=l.s,p=o,m=p.renderer,{onChange:f,popoverNode:y}=e,g=(0,l.a)(m,"color"),C=await i(y);let h,w;if(g){const e=g.stops.map((e=>e.color)),o=s.colorSchemes.getSchemes({basemapTheme:await s.colorUtils.getBackgroundColorTheme(r),geometryType:t,theme:"high-to-low"});let a=(0,l.aa)(o,0);a=a.filter((e=>{var o;return(null===(o=e.colors)||void 0===o?void 0:o.length)===g.stops.length}));const i=a.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})));h=({detail:e})=>{const o=p.renderer;(0,l.a)(o,"color").stops.reverse().forEach(((o,r)=>{o.color=e.info.fill.color[r]})),f()},w=c(C,(0,l.T)(p,r),{portal:n,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRamps:i}},fill:{color:e.reverse()}}),C.stringOverrides={fillColor:d.styler.color,fillTransparency:d.styler.transparency}}else{const e=a;h=({detail:e})=>{p.renderer.color=e.symbol.color,f()},w=c(C,(0,l.T)(p,r),{portal:n,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",optional:!1,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:e}},fill:{color:m.color||e[1]},fillEnabled:!0}),C.stringOverrides={fillColor:d.styler.color,fillTransparency:d.styler.transparency}}C.addEventListener("arcgisSymbolStylerEdit",u.bind(null,h)),y.addStyler(C),await w}async function p(e){const{layer:o,modules:r,strings:s}=l.s,n=o,t=n.renderer,{onChange:a,popoverNode:c}=e,u=await i(c);e.defaultColors=t.colorRamp?g(t.colorRamp).map((e=>new r.esriColor(e))):null;const d=u.edit(new r.SimpleMarkerSymbol,v(e));u.stringOverrides={fillColor:s.styler.color},u.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const o=r.esriLang.clone(e.color);n.renderer.colorRamp=w(o.reverse()),a()})),c.addStyler(u),await d}async function m(e){const{layer:o,modules:r,strings:s}=l.s,n=o,t=n.renderer,{onChange:a,popoverNode:c}=e,u=await i(c);e.defaultColors=t.colorRamp?g(t.colorRamp).map((e=>new r.esriColor(e))):null;const d=u.edit(new r.SimpleMarkerSymbol,v(e));u.stringOverrides={fillColor:s.styler.color},u.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const o=r.esriLang.clone(e.color);n.renderer.colorRamp=w(o.reverse()),a()})),c.addStyler(u),await d}async function f(e){var o;const{layer:r,mapView:s,classedSymbolSelectedIdx:n,portal:t,modules:d,strings:p}=l.s,m=r,f=m.renderer,{onChange:y,popoverNode:g}=e,C=(0,l.g)();let h=(null===(o=f.classBreakInfos)||void 0===o?void 0:o.length)?d.esriLang.clone(f.classBreakInfos[n].symbol):(0,l.T)(m,s,C);const w="picture-marker"!==h.type&&!!h.color,v=(0,l.a6)(h),b=a();let S;if("simple-fill"===h.type){const e=h;e.outline&&(S={color:e.outline.color||new d.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style})}const k=await i(g),R=c(k,d.esriLang.clone(h),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a7)(h),suggestedColors:b,parts:{transparency:!1}}},fill:{color:(0,l.w)(h)},stroke:S,fillEnabled:w,strokeEnabled:v});k.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency},k.addEventListener("arcgisSymbolStylerEdit",u.bind(null,(({detail:{symbol:e}})=>{e.outline&&(e.outline.width=0);const o=(0,l.j)(m),r=o.classBreakInfos.slice();r[n].symbol=e,o.classBreakInfos=r,y()}))),g.addStyler(k),await R}async function y(e){var o;const{layer:r,modules:s,strings:n}=l.s,t=r.renderer,{onChange:a,popoverNode:c}=e;let u=S(t.authoringInfo.colorRamp,t.classBreakInfos.length).map((e=>new s.esriColor(e.slice(1))));t.classBreakInfos&&(u=t.classBreakInfos.map((e=>e.symbol.color)));const d=await i(c);e.defaultColors=((null===(o=t.authoringInfo)||void 0===o?void 0:o.colorRamp)?u:[[0,0,255],[0,255,255],[255,255,0],[255,0,0]]).map((e=>new s.esriColor(e))),k(e.defaultColors);const p=d.edit(new s.SimpleMarkerSymbol,v(e));d.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency},d.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const o=s.esriLang.clone(e.color),{layer:r}=l.s;let n=r.renderer;const t=s.esriLang.clone(o).reverse();n.classBreakInfos.map(((e,o)=>e.symbol.color=new s.esriColor(t[o])));const i=function(e){var o;const{layer:r,modules:s}=l.s,n=r.renderer,t=b(),a=s.esriLang.clone(t);a.forEach((e=>{e.stops=S(w(e.stops),n.classBreakInfos.length).map((e=>new s.esriColor(e.slice(1)))).reverse()}));const i=a.filter((o=>{const r=JSON.stringify(o.stops)===JSON.stringify(e),l=JSON.stringify(s.esriLang.clone(o.stops).reverse())===JSON.stringify(e);return r||l}));return i.length?w(null===(o=t.filter((e=>e.name===i[0].name))[0])||void 0===o?void 0:o.stops):null}(o);i&&(n.authoringInfo.colorRamp=i),a()})),c.addStyler(d),await p}function g(e){if("multipart"===(null==e?void 0:e.type)){const o=e.colorRamps,r=o.map((e=>e.fromColor));return r.push(o[o.length-1].toColor),r}return[e.fromColor,e.toColor]}async function C(e){var o,r,s,n,a;const{layer:c,mapView:u,modules:d}=l.s,p=c,m=p.renderer,{onChange:f,popoverNode:y}=e,C=m.uniqueValueInfos,h=await i(y),b=d.typeSchemes.getSchemes({basemap:u.map.basemap,geometryType:(0,l.G)(p)||t}),R=[],O=(0,l.aa)(b,Math.min(C.length,10)),I=O[0].colors;R.push(...(null==C?void 0:C.length)?m.uniqueValueInfos.map(((e,o)=>(0,l.w)(e.symbol)||new d.esriColor(I[o%I.length]))):[]);const E=O.map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name})));if(!(null===(o=m.authoringInfo)||void 0===o?void 0:o.colorRamp)&&R||!function(e){const{modules:o}=l.s;return!!o.rasterColorRampUtils.getColorRampName(e)}(null===(r=m.authoringInfo)||void 0===r?void 0:r.colorRamp)&&!function(e){if(!(null==e?void 0:e.colorRamps))return!1;const{layer:o,mapView:r,modules:s}=l.s,n=o,a=n.renderer.uniqueValueInfos,i=s.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.G)(n)||t}),c=(0,l.aa)(i,Math.min(a.length,10)).filter((o=>o.colors.length===e.colorRamps.length+1)),u=[];u.push(e.colorRamps[0].fromColor),e.colorRamps.forEach((e=>{u.push(e.toColor)}));return c.filter((e=>{const o=JSON.stringify(e.colors)===JSON.stringify(u),r=JSON.stringify(s.esriLang.clone(e.colors).reverse())===JSON.stringify(u);return o||r})).length>0}(null===(s=m.authoringInfo)||void 0===s?void 0:s.colorRamp))e.defaultColors=R.reverse()||null;else{const o=S(null===(n=m.authoringInfo)||void 0===n?void 0:n.colorRamp,m.uniqueValueInfos.length).map((e=>e.slice(1)));JSON.stringify(o)!==JSON.stringify(R)&&(e.defaultColors=R.reverse()||null)}e.extraColorRamps=E,e.defaultColors||(e.defaultColors=(null===(a=m.authoringInfo)||void 0===a?void 0:a.colorRamp)?g(m.authoringInfo.colorRamp).reverse().map((e=>new d.esriColor(e))):R.reverse()||null),k(e.defaultColors);const N=h.edit(new d.SimpleMarkerSymbol,v(e));h.stringOverrides={fillColor:""},h.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const o=w(d.esriLang.clone(e.color)),r=p.renderer,s=r.authoringInfo||{};s.colorRamp=o,r.authoringInfo=s;const n=S(o,r.uniqueValueInfos.length).map((e=>e.slice(1))),t=[];r.uniqueValueInfos.forEach(((e,o)=>{e=e.clone(),t.push(e),(0,l.v)(e.symbol,new d.esriColor(n[o]))})),r.uniqueValueInfos=t,f()})),y.addStyler(h),await N}async function h(e){const{layer:o,mapView:r,selectedValue:n,lastDefault:t,portal:a,modules:d}=l.s,p=o,m=p.renderer,f=(0,s.g)(),{onChange:y,popoverNode:g}=e,C=(0,l.u)(p);let h=-1===n?m.defaultSymbol||t.defaultSymbol:m.uniqueValueInfos[n].symbol;(function(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].indexOf(null==e?void 0:e.type)>-1})(h)||(h=(0,l.T)(p,r,f),-1!==n||m.defaultSymbol||(t.defaultSymbol=h));const w="picture-marker"!==h.type&&!!h.color,v=(0,l.a6)(h);let b,S;if(-1===n)b=function(){const{modules:e}=l.s;return[new e.esriColor([255,255,255]),new e.esriColor([178,178,178]),new e.esriColor([128,128,128]),new e.esriColor([92,92,92]),new e.esriColor([77,77,77]),new e.esriColor([51,51,51]),new e.esriColor([26,26,26])]}();else{const e=d.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.G)(p)});b=(0,l.a8)(e).slice(0,16)}const k=h;S=k.outline?{color:k.outline.color?k.outline.color:new d.esriColor([0,0,0,.5]),size:k.outline.width,style:k.outline.style,autoAdjusted:!1}:{color:new d.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!1};const R=await i(g);let O;var I,E;O=c(R,d.esriLang.clone(h),{portal:a,symbolFilter:C&&!(0,l.a9)()?"simple":void 0,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,parts:{transparency:!1}}},fill:{color:(0,l.w)(h)||(I=b[n],E=.85,I&&(I.a=E),I)},stroke:S,fillEnabled:w,strokeEnabled:v}),R.addEventListener("arcgisSymbolStylerEdit",u.bind(null,(({detail:{symbol:e}})=>{e.outline&&(e.outline.width=0);const o=(0,l.j)(p);if(-1===n)o.defaultSymbol=e;else{const r=o.uniqueValueInfos.slice();r[n].symbol=e,o.uniqueValueInfos=r}y()}))),g.addStyler(R),await O}function w(e){const{modules:o}=l.s,r=[];for(let l=0;l<e.length-1;l++)r[l]=new o.AlgorithmicColorRamp({algorithm:"hsv",fromColor:e[l],toColor:e[l+1]||new o.esriColor({r:255,g:255,b:255,a:1})});return e.length>2?new o.MultipartColorRamp({colorRamps:r}):r[0]}function v(e){const{layer:o,modules:r,portal:s}=l.s,n=o,t=n.renderer,{defaultColors:a,extraColorRamps:i}=e,c={color:(null==a?void 0:a.reverse())||[new r.esriColor([255,255,255,1]),new r.esriColor([0,0,0,1])]},u={color:new r.esriColor([0,0,0,.5]),size:1,style:"solid"},d=b();return i&&d.push(...i),d.sort((e=>e.tags.indexOf("raster")>-1?-1:1)),"class-breaks"===t.type?d.forEach((e=>{e.stops=S(w(e.stops),t.classBreakInfos.length).map((e=>new r.esriColor(e.slice(1)))).reverse()})):"unique-value"===t.type&&d.forEach((e=>e.stops.reverse())),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"class-breaks"===t.type?"discrete":"continuous",colorRamps:d,open:!0,colorRampsOpen:!0,parts:{colorRamps:!0,transparency:"imagery-tile"===n.type&&"unique-value"!==t.type},extraParts:{autoStrokeAdjust:!1,width:!0}}},stroke:Object.assign(Object.assign({},u),{color:[new r.esriColor([13,38,68,1]),new r.esriColor([56,98,122,1]),new r.esriColor([98,158,176,1]),new r.esriColor([177,205,194,1]),new r.esriColor([255,252,212,1])]}),fill:c}}function b(){const{modules:e}=l.s;return e.rasterColorRampUtils.all().map((({name:e,colors:o})=>({name:e,stops:o,tags:["raster"]})))}function S(e,o){const{modules:r}=l.s;return r.rasterColorRampUtils.convertColorRampToColormap(e,{numColors:o,interpolateAlpha:!0})}function k(e){const{modules:o}=l.s;null==e||e.forEach(((r,l)=>{0===r.r&&0===r.g&&0===r.b&&0===r.a&&(e[l]=new o.esriColor([255,255,255,0]))}))}}}]);