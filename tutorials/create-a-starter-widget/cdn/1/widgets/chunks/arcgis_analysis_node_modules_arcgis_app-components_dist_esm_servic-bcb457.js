/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_servic-bcb457.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_servic-bcb457"],{51287:(e,r,t)=>{t.d(r,{a:()=>i,i:()=>n});const i={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service"},n=e=>!!Object.values(i).includes(e)},65267:(e,r,t)=>{t.d(r,{a:()=>v,f:()=>m,s:()=>p});var i=t(70392),n=t(66913),o=t(46710),s=t(20982);function c(e,r,t){var i,n;return{description:e.description,fieldAliases:null===(i=e.fields)||void 0===i?void 0:i.map((e=>e.alias)),fields:e.fields,geometryType:t?"table":e.geometryType,id:e.id,title:e.name,type:e.type,matched:null===(n=null==r?void 0:r.find((r=>r.id===e.id)))||void 0===n?void 0:n.matched}}function a(e,r){const{config:t}=o.c,i=(0,s.a)(e),c=Object.assign(Object.assign({useProxy:!1,timeout:!1===t.isMultiTenant?6e4:5e3,addSSL:i},r?{}:{addTokenManually:!1}),{usePost:!0,disableIdentityLookup:!0});return(0,n.r)(e,{},c,"post")}function l(e){var r,t;return(null==e?void 0:e.code)||(null===(t=null===(r=null==e?void 0:e.details)||void 0===r?void 0:r.raw)||void 0===t?void 0:t.code)}function d(e){const r=l(e);return[404,500].includes(r)||"Invalid URL"===(null==e?void 0:e.message)}function u(e,r){const t=l(r);return!e&&(499===t&&"Token Required"===(null==r?void 0:r.message)||403===t)&&!!o.c.user}async function v(e,r,t,i){const n={error:{code:"unhandledError"}};try{try{return{result:await a(`${t}/${r}`,i)}}catch(o){return u(i,o)?v(e,r,t,!0):(d(o)&&(n.error.code="serviceNotExist"),n)}}catch(e){return n}}function f(e,r,t,i){var n,o;const s=null==t?void 0:t.tables,a=(null===(n=null==t?void 0:t.layers)||void 0===n?void 0:n.length)>0||s,l=[...((null==t?void 0:t.layers)||[]).map((e=>e.id)),...null===(o=(null==t?void 0:t.tables)||[])||void 0===o?void 0:o.map((e=>e.id))];return(e||[]).filter((({id:e,type:r})=>!a||"Table"===r&&!s||l.includes(e))).map((e=>c(e,r,i)))}function p(e,r){return e.map((e=>{var t;return Object.assign(Object.assign({},e),{matched:null===(t=null==r?void 0:r.find((r=>r.id===e.id)))||void 0===t?void 0:t.matched})}))}async function m({item:e,portal:r,layers:t,isSecure:o,data:s,retry:l}){var v;const p={error:{code:"unhandledError"}};try{if(!s&&!l)try{const t=(0,n.g)(r),o=t?`&token=${t}`:"",c=`${(0,i.g)(r)}content/items/${e.id}/data?f=json${o}`,a=await fetch(c),l=await a.text();if(l&&(s=JSON.parse(l)),(null==s?void 0:s.error)&&403===s.error.code&&"SB_0006"===(null===(v=s.error)||void 0===v?void 0:v.messageCode))return p.error.code="serviceNotExist",p}catch(e){s=null}if("Feature Collection"===e.type&&(null==s?void 0:s.layers))return{result:s.layers.map((({layerDefinition:e},r)=>{var t;return{description:"",fields:e.fields,fieldAliases:null===(t=e.fields)||void 0===t?void 0:t.map((e=>e.alias)),geometryType:e.geometryType,type:e.type,id:r,matched:!1,title:e.name}}))};try{const{url:r}=e;return async function({serviceInfo:e,item:r,layers:t,isSecure:i,data:n}){var o,s;const{url:l}=r;if(!(null===(o=e.layers)||void 0===o?void 0:o.length)&&!(null===(s=e.tables)||void 0===s?void 0:s.length)&&(null==e?void 0:e.fields))return{result:[c(e,t)]};try{const{layers:e,tables:r}=await a(`${l}/layers`,i);return{result:[...f(e,t,n),...f(r,t,n,!0)].sort(((e,r)=>e.id-r.id))}}catch(e){return{error:{code:"unhandledError"}}}}({serviceInfo:await a(r,o),item:e,layers:t,isSecure:o,data:s})}catch(i){return u(o,i)?m({item:e,portal:r,layers:t,data:s,isSecure:!0}):(d(i)&&(p.error.code="serviceNotExist"),p)}}catch(e){return p}}},22250:(e,r,t)=>{t.d(r,{a:()=>l,b:()=>d,c:()=>o,d:()=>n,g:()=>c,r:()=>a,s:()=>s});var i=t(88703);function n(e,r,t,i){!function(e,r,t){let i=null==(t=t||{})?void 0:t.expires;if("number"==typeof i){const e=new Date,r=24*i*60*60*1e3;e.setTime(Date.now()+r),i=t.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(t.expires=i.toUTCString());let n,o=`${e}=${encodeURIComponent(r)}`;for(n in t){o+=`; ${n}`;const e=t[n];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,i?JSON.stringify(r):r,t)}function o(e,r){const t=function(e){const r=document.cookie,t=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),n=r.match(t);return n?decodeURIComponent(n[1]):void 0}(e);return t&&r?JSON.parse(t):t}function s(e,r,t){window.localStorage.setItem(e,t?JSON.stringify(r):r)}function c(e,r){const t=window.localStorage.getItem(e);return t&&r?JSON.parse(t):t}function a(e){window.localStorage.removeItem(e)}function l(e,r,t){window.sessionStorage.setItem(e,t?JSON.stringify(r):r)}function d(e,r){const t=window.sessionStorage.getItem(e);return t&&r?JSON.parse(t):t}},20982:(e,r,t)=>{t.d(r,{a:()=>f,b:()=>v,c:()=>l,d:()=>m,e:()=>p,f:()=>S,g:()=>g,i:()=>y,r:()=>a,s:()=>u,u:()=>d});var i=t(70392),n=t(46710),o=t(21104),s=t(22250),c=t(51287);function a(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}async function l(e){var r;const t=null!==(r=null===n.c||void 0===n.c?void 0:n.c.api)&&void 0!==r?r:4,[i]=await(0,o.l)([4===t?"esri/core/urlUtils":"esri/urlUtils"]);let s=i.urlToObject(e);s.query=s.query||{};for(let e in s.query||{})s.query.hasOwnProperty(e)&&(Array.isArray(s.query[e])||(s.query[e]=s.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return s}function d(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function u(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS"].includes(e)}function v(e){const{config:r,portal:t}=n.c;let i=!1;if(!e)return!1;if((r.httpsDomains||[]).forEach((r=>{(e.indexOf(`.${r}/`)>-1||e.indexOf(`/${r}/`)>-1)&&(i=!0)})),!i){let r=t.portalHostname;r.indexOf("/")>-1&&(r=r.substring(0,r.indexOf("/"))),e.indexOf(r)>-1&&(i=!0)}return i}function f(e){if(!e)return!1;const{config:r,portal:t}=n.c,o=(0,i.g)(t),s=new URL(o).hostname,c=!1===r.isMultiTenant,a=-1!==e.indexOf(".arcgis.com/"),l=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),d=t.supportsHostedServices&&-1!==e.indexOf(s)&&!c;return a&&l||!a&&d}function p(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const r=(0,s.c)("esri_auth",!0);return"web"!==(null===(e=null==r?void 0:r.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function m(e){let r=e.toLowerCase();-1==r.indexOf("http://")&&-1==r.indexOf("https://")&&(r=(e="https://"+e).toLowerCase());let t=r.indexOf("//");t=r.indexOf("/",t+2),-1==t?r=(e+="/arcgis/rest/services").toLowerCase():t==r.length-1&&(r=(e+="arcgis/rest/services").toLowerCase());let i=r.indexOf("/arcgis",t);i==r.length-7?r=(e+="/rest/services").toLowerCase():i==r.length-8&&(r=(e+="rest/services").toLowerCase()),i=r.indexOf("/server",t),r.endsWith("/server")?r=(e+="/rest/services").toLowerCase():r.endsWith("/server/")&&(r=(e+="rest/services").toLowerCase());const n=r.indexOf("/rest/services",t),o=r.indexOf("/services",t),s=r.indexOf("/rest",t);return-1==n&&o>-1?r=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==n&&s>-1&&(r=(e=`${e.substring(0,s)}/rest/services${e.substring(s+5)}`).toLowerCase()),r.indexOf("/rest/services"),e}const S=(e,r=!1)=>(e=a(e),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!r&&"https:"!==location.protocol||!f(e)&&!v(e)||(e=e.replace("http:/","https:/")),e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),g=(e,r=!1)=>{var t,n,o;if(!e)return{error:{code:"invalidUrl"}};if(y(e,r))return{error:{code:"httpWarning"}};const s=decodeURIComponent(e),a=s.replace(i.v,"").match(/((\.|\/)*(kml|kmz))/gi),l=s.replace(i.v,"").match(/((\/|\=)(wmts|wms|wfs))/gi),d=s.replace(i.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),u=s.replace(i.v,"").match(/((\.|\/)*(rss))/gi),v=null===(t=s.replace(i.v,"").match(i.r))||void 0===t?void 0:t[1],f=s.replace(i.v,"").match(i.f),p=s.replace(i.v,"").match(/((\.|\/)*(csv))/gi),m=s.replace(i.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let S=null;if(s.match(i.e))S="GeoJson";else if(!d||l||v)if(v&&!l)S=c.a[v];else if(f)S="Map Service";else if(l){const e="/"===(null==l?void 0:l[0].charAt(0))?"/":"=";S=null===(o=null===(n=null==l?void 0:l[0])||void 0===n?void 0:n.split(e)[1])||void 0===o?void 0:o.toUpperCase()}else a?S="KML":u?S="GeoRSS":p?S="CSV":m?S="Tile Layer":s.endsWith("KnowledgeGraphServer")&&(S="Knowledge Graph");else S="OGCFeatureServer";return{result:S}},y=(e,r)=>!r&&e.includes("http://")}}]);