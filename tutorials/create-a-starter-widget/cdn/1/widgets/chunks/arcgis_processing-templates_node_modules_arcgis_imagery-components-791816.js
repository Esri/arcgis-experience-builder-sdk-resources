/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components-791816.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components-791816"],{95319:(e,t,i)=>{i.r(t),i.d(t,{arcgis_imagery_item_details_popover:()=>o,arcgis_imagery_item_filters_popover:()=>c,arcgis_imagery_item_list_settings_popover:()=>d,arcgis_imagery_item_sort_popover:()=>h});var a=i(41126),s=i(14886),r=i(12839),l=i(5482),n=i(18936);const o=class{constructor(e){(0,a.r)(this,e),this.arcgisImageItemInspectPopoverClose=(0,a.c)(this,"arcgisImageItemInspectPopoverClose",7),this.arcgisZoomToInspectingImageItem=(0,a.c)(this,"arcgisZoomToInspectingImageItem",7),this.arcgisAddInspectingImageItemToLayer=(0,a.c)(this,"arcgisAddInspectingImageItemToLayer",7),this.arcgisImageItemToInspectChange=(0,a.c)(this,"arcgisImageItemToInspectChange",7),this.manager=(0,s.u)(this),this.layer=void 0,this.view=void 0,this.messages=void 0,this.referenceElement=void 0,this.open=void 0,this.imageItemInfo=void 0,this.imageItemFeatureGraphic=void 0}render(){const{messages:e,open:t,imageItemInfo:i,referenceElement:r}=this,l="rtl"===(0,s.g)(this.el);return(0,a.h)(a.H,{key:"fa40c1cd91df1dd6d594471c8c3eb0f09d2dcc27",class:"js-app-flyout"},(0,a.h)("calcite-popover",{key:"3f2a620fc7a8c27fd3b16d5fe7d9b6dda64bce03",label:e.imageDetails,heading:e.imageDetails,referenceElement:r,placement:"leading-start",overlayPositioning:"fixed",pointerDisabled:!0,triggerDisabled:!0,offsetDistance:10,open:t,closable:!0,onCalcitePopoverClose:()=>{this.arcgisImageItemInspectPopoverClose.emit()}},(0,a.h)("calcite-panel",{key:"fd6a542bf1a2a9c77e5af09921e90d76585b54cc",class:"image-details-panel"},this.renderImageItemDisplayTitle(),this.renderImageItemPreviewView(),i&&this.renderImageItemInfoTables(),(0,a.h)("calcite-button",{key:"b88a8f3382625c6a1f5fdfdb84c5a32a74c4f8e6",style:{"padding-inline-end":"5px"},width:"half",slot:"footer",appearance:"outline",kind:"neutral",iconStart:l?"chevron-right":"chevron-left",onClick:()=>this.arcgisImageItemToInspectChange.emit("previous")},e.previous),(0,a.h)("calcite-button",{key:"9710c6a8398950f05207f52a44ccb337f1b60e24",style:{"padding-inline-start":"5px"},width:"half",slot:"footer",appearance:"outline",kind:"neutral",iconEnd:l?"chevron-left":"chevron-right",onClick:()=>this.arcgisImageItemToInspectChange.emit("next")},e.next))))}renderImageItemPreviewView(){const{messages:e,layer:t,imageItemFeatureGraphic:i}=this;return(0,a.h)("calcite-block",{collapsible:!0,open:!0,heading:e.preview},(0,a.h)("div",{class:"image-item-preview-wrapper"},(0,a.h)("arcgis-imagery-item-preview",{previewLayerUrl:t.url,previewImageItemGraphic:i})))}renderImageItemInfoTables(){const{imageItemInfo:e}=this,{extent:t,statistics:i}=e??{};return(0,a.h)("div",null,e?this.renderImageItemInspectButtonGroup():null,e?this.renderImageItemRasterInformationTable():null,e?this.renderImageItemRasterMetadataTable():null,t?this.renderImageItemExtentInfoTable():null,e?this.renderImageItemSpatialReferenceTable():null,i?this.renderImageItemStatisticsInfoTable():null)}renderImageItemRasterInformationTable(){const{messages:e,imageItemInfo:t}=this,i=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],{bandCount:s,height:r,width:l,pixelType:n,pixelSize:o,dataType:c,colormap:d}=t,h=[{property:e.columns,value:l},{property:e.rows,value:r},{property:e.bandNumber,value:s},{property:e.cellSizeX,value:o?.x},{property:e.cellSizeY,value:o?.y},{property:e.sourceType,value:c},{property:e.pixelType,value:this.getFormattedPixelType(n)},{property:e.colormap,value:d}].filter((e=>!!e.value));return h.length>0&&(0,a.h)("calcite-block",{collapsible:!0,open:!0,heading:e.rasterInformation},(0,a.h)("div",{class:"image-item-info-table-wrapper"},(0,a.h)("arcgis-imagery-item-info-table",{columns:i,data:h})))}renderImageItemRasterMetadataTable(){const{messages:e,imageItemInfo:t}=this,i=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],{SensorName:s,ProductName:r,CloudCover:l,AcquisitionDate:n,SunAzimuth:o,SunElevation:c,ELLIPSOID:d}=t.keyProperties||{},h=n?`${new Date(n).toLocaleDateString()} ${new Date(n).toLocaleTimeString()}`:null,u=[{property:e.sensorName,value:s},{property:e.productName,value:r},{property:e.acquisitionDate,value:h},{property:e.cloudCover,value:l},{property:e.sunAzimuth,value:o},{property:e.sunElevation,value:c},{property:e.spheroid,value:d}].filter((e=>!!e.value));return u.length>0&&(0,a.h)("calcite-block",{collapsible:!0,open:!0,heading:e.rasterMetadata},(0,a.h)("div",{class:"image-item-info-table-wrapper"},(0,a.h)("arcgis-imagery-item-info-table",{columns:i,data:u})))}renderImageItemExtentInfoTable(){const{messages:e,imageItemInfo:t}=this,i=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],{extent:s}=t,{xmin:r,xmax:l,ymin:n,ymax:o}=s,c=[{property:e.top,value:o},{property:e.bottom,value:n},{property:e.left,value:r},{property:e.right,value:l}].filter((e=>!!e.value));return c.length>0&&(0,a.h)("calcite-block",{collapsible:!0,open:!0,heading:e.extent},(0,a.h)("arcgis-imagery-item-info-table",{columns:i,data:c}))}renderImageItemStatisticsInfoTable(){const{messages:e,imageItemInfo:t}=this,i=[{accessor:"bandName",header:e.bandName},{accessor:"min",header:e.min},{accessor:"max",header:e.max},{accessor:"avg",header:e.mean},{accessor:"stddev",header:e.std}],{bandInfos:s,statistics:r}=t,l=s.map(((e,t)=>{const i=r[t];return{bandName:e.name,...i}}));return l.length>0&&(0,a.h)("calcite-block",{collapsible:!0,open:!0,heading:e.statistics},(0,a.h)("div",{class:"image-item-info-table-wrapper"},(0,a.h)("arcgis-imagery-item-info-table",{columns:i,data:l})))}renderImageItemSpatialReferenceTable(){const{messages:e,imageItemInfo:t}=this,i=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],{keyProperties:s,spatialReference:r}=t,l=[{property:e.projectedCoordinateSystem,value:""},{property:e.projection,value:""},{property:e.wkid,value:r?.wkid},{property:e.datum,value:s?.DATUM},{property:e.spheroid,value:s?.ELLIPSOID}].filter((e=>!!e.value));return l.length>0&&(0,a.h)("calcite-block",{collapsible:!0,open:!0,heading:e.spatialReference},(0,a.h)("div",{class:"image-item-info-table-wrapper"},(0,a.h)("arcgis-imagery-item-info-table",{columns:i,data:l})))}renderImageItemInspectButtonGroup(){const{messages:e}=this;return(0,a.h)("div",{class:"image-item-inspect-button-group"},(0,a.h)("calcite-button",{label:e.addImageToMap,appearance:"transparent","icon-start":"add-layer",kind:"neutral",scale:"s",title:e.addImageToMap,onClick:()=>this.arcgisAddInspectingImageItemToLayer.emit()}),(0,a.h)("calcite-button",{label:e.zoomToImage,appearance:"transparent","icon-start":"layer-zoom-to",kind:"neutral",scale:"s",title:e.zoomToImage,onClick:()=>this.arcgisZoomToInspectingImageItem.emit()}))}renderImageItemDisplayTitle(){const{imageItemFeatureGraphic:e,layer:t}=this,{attributes:i}=e??{},s=i?.Name||i?.name,r=i?.[t.objectIdField];return(0,a.h)("div",{class:"image-item-name-wrapper"},`${r}: ${s}`)}getFormattedPixelType(e){const{messages:t}=this;switch(e){case"s8":return t.s8;case"s16":return t.s16;case"s32":return t.s32;case"u1":return t.u1;case"u2":return t.u2;case"u4":return t.u4;case"u8":return t.u8;case"u16":return t.u16;case"u32":return t.u32;case"f32":return t.f32;case"f64":return t.f64;case"c64":return t.c64;case"c128":return t.c128;default:return t.unknown}}get el(){return(0,a.g)(this)}};o.style=".image-details-panel{width:320px;height:calc(100vh - 48px)}.image-item-preview-wrapper{width:100%;height:300px}.image-item-info-table-wrapper{display:block;overflow-x:auto}.image-item-name-wrapper{display:flex;overflow-wrap:break-word;font-weight:600;justify-content:center;padding-top:5px}";const c=class{constructor(e){(0,a.r)(this,e),this.arcgisImageItemFiltersPopoverClose=(0,a.c)(this,"arcgisImageItemFiltersPopoverClose",7),this.arcgisImageItemFilterApply=(0,a.c)(this,"arcgisImageItemFilterApply",7),this.manager=(0,s.u)(this),this.reactiveUtils=(0,s.l)(r.g),this.handleImageItemQueryApply=()=>{const{view:e,activeQueryField:t,isOverviewsIncluded:i,isRangeValueModeSelected:a,selectedAOI:s,selectedQueryFieldValues:r}=this;let o=[];o=(0,l.e)(t.type)||"date"===t.type?a?r:[r[1]]:r;const c=(0,n.g)(e),d={selectedAOI:s,queryField:t,queryValues:o,isIncludeOverviews:i,displayExtent:s===l.A.DISPLAY_EXTENT?c:null,isRangeModeEnabled:this.isRangeValueModeSelected,dropdownVals:this.fieldValuesForInput,sliderMinMaxVals:this.fieldMinMaxValuesForInput};this.arcgisImageItemFilterApply.emit(d)},this.getLayerAttributeValues=async e=>{const{layer:t,view:i,selectedAOI:a,fetchAbortController:s,locale:r}=this;s&&s.abort();try{this.fetchAbortController=new AbortController,this.isQueryingFieldValues=!0,this.fieldValuesForInput=[],this.selectedQueryFieldValues=[];const s=(0,n.g)(i);if((0,l.i)(e)||!(0,l.e)(e.type)&&"date"!==e.type){const i=(await(0,n.m)(t,e,a===l.A.DISPLAY_EXTENT?s:null,this.fetchAbortController?.signal)).sort(((e,t)=>(0,l.c)(e,t,r)));this.fieldValuesForInput=i,i.length>0&&(this.selectedQueryFieldValues=this.currentFilterDetail?.queryValues&&this.currentFilterDetail.queryValues?.length>0&&this.currentFilterDetail.queryValues[0]&&i.includes(this.currentFilterDetail.queryValues[0])?[this.currentFilterDetail.queryValues[0]]:[i[0]])}else{const[i,r]=await(0,n.k)(t,e.name,a===l.A.DISPLAY_EXTENT||a===l.A.VISIBLE?s:null,this.fetchAbortController?.signal);if(this.fieldMinMaxValuesForInput=[i,r],this.selectedQueryFieldValues=[i,r],2===this.currentFilterDetail?.queryValues?.length){const[e,t]=this.currentFilterDetail.queryValues;e&&e>=i&&t&&t<=r&&(this.selectedQueryFieldValues=[e,t])}}this.isQueryingFieldValues=!1}catch(e){this.isQueryingFieldValues=(0,l.b)(e)}},this.layer=void 0,this.messages=void 0,this.locale=void 0,this.open=void 0,this.view=void 0,this.currentFilterDetail=void 0,this.referenceElement=void 0,this.activeQueryField=void 0,this.selectedAOI=l.A.DISPLAY_EXTENT,this.isOverviewsIncluded=!1,this.isQueryingImageItems=!1,this.isQueryingFieldValues=!1,this.selectedQueryFieldValues=[],this.fieldValuesForInput=[],this.fieldMinMaxValuesForInput=[],this.isRangeValueModeSelected=!0,this.isShowingIncludeOverviewTooltip=!1,this.isShowingRangeModeTooltip=!1}async componentWillLoad(){this.currentMapExtent=this.view.extent;const e=(0,n.h)(this.layer?.fields),t=(0,n.i)(e);this.activeQueryField=this.activeQueryField??t,this.activeQueryField&&!this.currentFilterDetail?.queryValues&&this.getLayerAttributeValues(this.activeQueryField),this.watchExtentChangeHandler=this.reactiveUtils.watch((()=>[this.view.stationary,this.view.extent]),(0,s.d)((()=>{!this.view.stationary||this.selectedAOI!==l.A.DISPLAY_EXTENT&&this.selectedAOI!==l.A.VISIBLE||(0,n.j)(this.currentMapExtent,this.view)||(this.getLayerAttributeValues(this.activeQueryField),this.currentMapExtent=this.view.extent)}),300))}updateModal(e){if(e&&this.currentFilterDetail){const{selectedAOI:e,queryField:t,queryValues:i,isIncludeOverviews:a,isRangeModeEnabled:s,sliderMinMaxVals:r,dropdownVals:l}=this.currentFilterDetail;this.selectedAOI=e,this.activeQueryField=this.layer.fields.find((e=>e.name===t?.name))??this.activeQueryField,this.isOverviewsIncluded=a,this.isRangeValueModeSelected=s??!0,Array.isArray(r)&&(this.fieldMinMaxValuesForInput=r),Array.isArray(l)&&(this.fieldValuesForInput=l),i&&i.length>0&&(i&&2===i.length&&(this.selectedQueryFieldValues=i),i.length<2&&(r&&r.length>0?this.selectedQueryFieldValues=[r[0],i[0]]:l&&l.length>0?this.selectedQueryFieldValues=[l[0],i[0]]:this.selectedQueryFieldValues=[null,i[0]]))}}disconnectedCallback(){this.watchExtentChangeHandler?.remove()}render(){const{messages:e,open:t}=this;return(0,a.h)(a.H,{key:"ffd214195cb1abd1883d10f86a13588d6ac96262",class:"js-app-flyout"},(0,a.h)("calcite-popover",{key:"4d03acd996b2c3b997582e3a0c5bfcfaa6aee7dc",open:t,label:e.filters,referenceElement:this.referenceElement,closable:!0,heading:e.filters,placement:"leading-start",overlayPositioning:"fixed",pointerDisabled:!0,triggerDisabled:!0,offsetDistance:10,offsetSkidding:50,onCalcitePopoverClose:()=>this.arcgisImageItemFiltersPopoverClose.emit()},(0,a.h)("calcite-panel",{key:"7062649226b68ffbd7ddf8d6b13798acf4edb5d6"},this.renderFilterInput())))}renderFilterInput(){return(0,a.h)("div",{class:"filter-wrapper"},this.renderAOISelectDropdown(),this.renderAttributeSelectDropdown(),this.renderAttributeInputField(),this.renderIncludeOverviewSwitchButton(),this.renderApplyButton())}renderAOISelectDropdown(){const{messages:e,selectedAOI:t}=this,i=[{name:l.A.DISPLAY_EXTENT,label:e.displayExtent,description:e.displayExtentDesc},{name:l.A.VISIBLE,label:e.visible,description:e.visibleDesc},{name:l.A.ALL,label:e.all,description:e.allDesc}],s=i.find((e=>e.name===t)),r=i.map((e=>(0,a.h)("calcite-dropdown-item",{"data-value":e.name,selected:e.name===s?.name},(0,a.h)("strong",null,e.label),(0,a.h)("div",null,e.description))));return(0,a.h)("calcite-label",null,e.areaOfInterest,(0,a.h)("calcite-dropdown",{widthScale:"m",placement:"bottom",onCalciteDropdownSelect:e=>{const t=e.currentTarget,i=t?.selectedItems?.[0]?.getAttribute("data-value");this.selectedAOI=i,this.activeQueryField&&this.getLayerAttributeValues(this.activeQueryField)}},(0,a.h)("calcite-button",{class:"aoi-select-button",slot:"trigger",alignment:"space-between","icon-end":"chevron-down",appearance:"transparent",kind:"neutral",width:"full"},s?.label),(0,a.h)("calcite-dropdown-group",null,r)))}renderAttributeSelectDropdown(){const{messages:e,activeQueryField:t,layer:i}=this,s=(0,n.h)(i?.fields),r=s.map((e=>(0,a.h)("calcite-option",{value:e.name,label:e.alias??"",selected:e.name===t.name})));return(0,a.h)("calcite-label",null,e.attribute,(0,a.h)("calcite-select",{label:e.attribute,onCalciteSelectChange:e=>{const i=e.currentTarget.selectedOption.value;if(i!==t.name){const e=s.find((e=>e.name===i));this.selectedQueryFieldValues=[],this.activeQueryField=e,this.getLayerAttributeValues(this.activeQueryField)}}},r))}renderAttributeInputField(){const{messages:e,activeQueryField:t,isQueryingFieldValues:i}=this,s=t.type;return i?(0,a.h)("calcite-loader",{label:e.loading,scale:"s",inline:!0}):(0,l.i)(t)||!(0,l.e)(s)&&"date"!==s?this.renderAttributeDropdownInput():this.renderAttributeSliderInput()}renderSliderSelectedVals(){const{selectedQueryFieldValues:e,activeQueryField:t,isRangeValueModeSelected:i}=this;if(2!==e?.length)return(0,a.h)(a.F,null);let s=null,r=null;return[s,r]=e,"date"===t.type&&(s=(0,l.g)(s),r=(0,l.g)(r)),(0,a.h)("div",{class:"slider-value-container"},i&&null!==s&&""!==s&&(0,a.h)("div",{class:"slider-value-box"},s),null!==r&&""!==r&&(0,a.h)("div",{class:"slider-value-box"},r))}renderAttributeSliderInput(){const{messages:e,fieldMinMaxValuesForInput:t,isRangeValueModeSelected:i,selectedQueryFieldValues:s,activeQueryField:r,isQueryingFieldValues:n}=this,o=t.filter((e=>"number"==typeof e)),c=2===o.length&&o[0]!==o[1];if(2===o.length&&o[0]===o[1]){const[t]=o;return(0,a.h)("calcite-select",{label:e.select,onCalciteSelectChange:e=>{const t=e.currentTarget.selectedOption.value;this.selectedQueryFieldValues=[t]}},(0,a.h)("calcite-option",{value:t,label:"date"===r.type?(0,l.g)(t)??"":t.toString(),selected:this.selectedQueryFieldValues?.length>0&&t.toString()===this.selectedQueryFieldValues[0]?.toString()}))}if(c){const e=o[0],t=o[1];return(0,a.h)("div",null,this.renderRangeModeSwitchButton(),this.renderSliderSelectedVals(),i?(0,a.h)("calcite-slider",{key:"range-value-slider",minValue:s[0],maxValue:s[1],min:e,max:t,snap:!0,precise:!0,onCalciteSliderInput:e=>{const t=e.target;this.selectedQueryFieldValues=t.value}}):(0,a.h)("calcite-slider",{key:"single-value-slider",value:s[1],min:e,max:t,snap:!0,precise:!0,onCalciteSliderInput:e=>{const t=e.target;this.selectedQueryFieldValues=[Math.min(s[0],t.value),Math.max(s[0],t.value)]}}))}return n?(0,a.h)(a.F,null):this.renderEmptyAttributeValueErrorMessage()}renderAttributeDropdownInput(){const{messages:e,activeQueryField:t,fieldValuesForInput:i,isQueryingFieldValues:s}=this;if(i.length>0){const r=(0,l.i)(t),n=i.map((e=>{if(!e)return(0,a.h)(a.F,null);const i=r?t.domain.getName(e):e.toString();return(0,a.h)("calcite-option",{value:e,label:i,selected:this.selectedQueryFieldValues?.length>0&&e.toString()===this.selectedQueryFieldValues[0]?.toString()})}));return(0,a.h)("calcite-select",{label:e.select,disabled:s,width:"full",onCalciteSelectChange:e=>{const t=e.currentTarget.selectedOption.value;this.selectedQueryFieldValues=[t]}},n)}return s?(0,a.h)(a.F,null):this.renderEmptyAttributeValueErrorMessage()}renderEmptyAttributeValueErrorMessage(){const{messages:e}=this;return(0,a.h)("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},e.noFieldAttributesErrorMessage)}renderRangeModeSwitchButton(){const{messages:e,isRangeValueModeSelected:t,isShowingRangeModeTooltip:i}=this;return(0,a.h)("calcite-label",{layout:"inline"},e.rangeMode,(0,a.h)("calcite-action",{icon:"information",scale:"s",text:e.rangeMode,ref:e=>this.rangeModeHelpIconActionEl=e,onMouseOver:()=>{this.isShowingRangeModeTooltip=!0},onMouseOut:()=>{this.isShowingRangeModeTooltip=!1},onClick:e=>{e.stopPropagation()}}),(0,a.h)("calcite-tooltip",{open:i,referenceElement:this.rangeModeHelpIconActionEl},e.rangeModelHelpMessage),(0,a.h)("calcite-switch",{style:{marginInlineStart:"auto"},checked:t,onCalciteSwitchChange:e=>{const t=e.target.checked;this.isRangeValueModeSelected=t}}))}renderIncludeOverviewSwitchButton(){const{messages:e,isOverviewsIncluded:t,isShowingIncludeOverviewTooltip:i}=this;return(0,a.h)("calcite-label",{layout:"inline"},e.includeOverviews,(0,a.h)("calcite-action",{icon:"information",scale:"s",text:e.includeOverviewsHelpMessage,ref:e=>this.isIncludeOverviewsHelpIconActionEl=e,onMouseOver:()=>{this.isShowingIncludeOverviewTooltip=!0},onMouseOut:()=>{this.isShowingIncludeOverviewTooltip=!1},onClick:e=>{e.stopPropagation()}}),(0,a.h)("calcite-tooltip",{open:i,referenceElement:this.isIncludeOverviewsHelpIconActionEl},e.includeOverviewsHelpMessage),(0,a.h)("div",{style:{marginInlineStart:"auto"}},(0,a.h)("calcite-switch",{checked:t,scale:"m",onCalciteSwitchChange:e=>{const t=e.target.checked;this.isOverviewsIncluded=t}})))}renderApplyButton(){const{messages:e,isQueryingFieldValues:t,isQueryingImageItems:i}=this;return(0,a.h)("calcite-button",{label:e.apply,onClick:this.handleImageItemQueryApply,appearance:"solid",width:"full",disabled:t||i},e.apply)}get el(){return(0,a.g)(this)}static get watchers(){return{open:["updateModal"]}}};c.style=".aoi-select-button{border:1px solid var(--calcite-color-border-input)}.dropdown-container{display:flex;justify-content:space-between;gap:1rem}.slider-value-container{display:flex;gap:1rem}.slider-value-box{border:0.8px solid var(--calcite-color-border-input);display:flex;width:50%;height:16px;padding:7px 12px;cursor:default;align-items:center}.filter-wrapper{padding:1rem;min-width:320px;background-color:var(--calcite-color-foreground-1)}";const d=class{constructor(e){(0,a.r)(this,e),this.arcgisImageItemListSettingsSave=(0,a.c)(this,"arcgisImageItemListSettingsSave",7),this.arcgisImageItemListSettingsPopoverClose=(0,a.c)(this,"arcgisImageItemListSettingsPopoverClose",7),this.manager=(0,s.u)(this),this.renderTitleAndSelectedDisplayFieldsInfo=()=>{const{messages:e,fields:t,selectedFields:i}=this,s=t.length,r=i.length,l=e.selectedDisplayFieldCountInfo.replace("${totalCount}",`${s}`).replace("${selectedCount}",`${r}`);return(0,a.h)("div",{class:"title-wrapper"},e.displayFields,(0,a.h)("calcite-chip",{label:l,appearance:"outline",kind:"neutral"},l))},this.renderDisplayFieldList=()=>{const{fields:e,selectedFields:t}=this,i=e.map((e=>{const i=t.some((t=>t.name===e.name)),s=t.length>=4&&!i;return(0,a.h)("calcite-list-item",{label:e.name,value:e,selected:i,disabled:s})}));return(0,a.h)("calcite-list",{label:this.messages.displayFields,"selection-mode":"multiple",class:"display-field-list-wrapper",onCalciteListChange:e=>{const t=e.target.selectedItems.map((e=>e.value));this.selectedFields=t}},i)},this.handleListSettingsSave=()=>{const{selectedFields:e,isShowThumbnailsChecked:t}=this;this.arcgisImageItemListSettingsSave.emit({selectedFields:e,isShowingThumbnails:t}),this.arcgisImageItemListSettingsPopoverClose.emit()},this.referenceElement=void 0,this.messages=void 0,this.fields=[],this.preselectedFields=void 0,this.isShowingThumbnails=void 0,this.open=void 0,this.selectedFields=[],this.isShowThumbnailsChecked=void 0}updateModal(e){e&&(Array.isArray(this.preselectedFields)&&(this.selectedFields=this.preselectedFields),this.isShowThumbnailsChecked=this.isShowingThumbnails)}render(){const{messages:e,isShowThumbnailsChecked:t,open:i}=this;return(0,a.h)(a.H,{key:"a54014d2ef239e863e82cba135c8b5d614a8f0ca",class:"js-app-flyout"},(0,a.h)("calcite-popover",{key:"29af8be99d737c1725a08d8dfcc18de1207d3c37",autoClose:!0,label:e.listSettings,referenceElement:this.referenceElement,closable:!0,heading:e.listSettings,placement:"leading-start",overlayPositioning:"fixed",pointerDisabled:!0,triggerDisabled:!0,offsetDistance:10,offsetSkidding:50,open:i,onCalcitePopoverClose:()=>{this.arcgisImageItemListSettingsPopoverClose.emit()}},(0,a.h)("calcite-panel",{key:"b15c9ea0f8a521be59eb1e9bc4ed1c38df102eae",class:"list-settings-popover-wrapper"},this.renderTitleAndSelectedDisplayFieldsInfo(),this.renderDisplayFieldList(),(0,a.h)("div",{key:"b5c0145a370126c45b714315936a159ab740448c",class:"button-wrapper"},(0,a.h)("calcite-label",{key:"72cc9ee2fb1abccd324cb3961284db4425807613",layout:"inline-space-between"},e.showThumbnails,(0,a.h)("calcite-switch",{key:"a82ed8763ca038abaf5609bd35a2cd45fe88c60b",checked:t,scale:"m",onCalciteSwitchChange:e=>{const t=e.target.checked;this.isShowThumbnailsChecked=t}})),(0,a.h)("calcite-button",{key:"ed89b18527fa01942f1758c523ab35ed7d4def83",width:"full",onClick:this.handleListSettingsSave},e.done)))))}get el(){return(0,a.g)(this)}static get watchers(){return{open:["updateModal"]}}};d.style=".title-wrapper{display:flex;justify-content:space-between;align-items:center;padding-bottom:1rem;background-color:var(--calcite-color-foreground-1)}.list-settings-popover-wrapper{display:flex;padding:1rem;min-width:320px;max-height:50vh}.display-field-list-wrapper{overflow-y:auto}.button-wrapper{padding:1rem 0.25rem 0.25rem;background-color:var(--calcite-color-foreground-1)}";const h=class{constructor(e){(0,a.r)(this,e),this.arcgisImageItemSortChangeSave=(0,a.c)(this,"arcgisImageItemSortChangeSave",7),this.arcgisImageItemSortPopoverClose=(0,a.c)(this,"arcgisImageItemSortPopoverClose",7),this.manager=(0,s.u)(this),this.renderSortFieldList=()=>{const{fields:e,selectedSortField:t}=this,i=(0,n.h)(e).map((e=>(0,a.h)("calcite-list-item",{label:e.name,value:e,selected:e.name===t?.name})));return(0,a.h)("calcite-list",{label:this.messages.sortByField,"selection-mode":"single-persist",class:"field-list-wrapper",onCalciteListChange:e=>{const t=e.target.selectedItems.map((e=>e.value));this.selectedSortField=t[0]}},i)},this.renderSortOrderChipGroup=()=>{const{messages:e,selectedSortField:t,selectedSortOrder:i}=this,{type:s}=t||{};let r=null;"string"===s?r=[{displayText:e.alphabetical,sortOrder:l.S.ASC},{displayText:e.reverseAlphabetical,sortOrder:l.S.DESC}]:"date"===s?r=[{displayText:e.mostRecent,sortOrder:l.S.DESC},{displayText:e.leastRecent,sortOrder:l.S.ASC}]:(0,l.e)(s)&&(r=[{displayText:e.highestValue,sortOrder:l.S.DESC},{displayText:e.lowestValue,sortOrder:l.S.ASC}]);const n=r?.map((e=>{const{displayText:t,sortOrder:s}=e;return(0,a.h)("calcite-chip",{label:s,selected:i===s,appearance:"outline",kind:"neutral"},t)}));return n&&n.length>0?(0,a.h)("calcite-chip-group",{class:"sort-order-chip-group",label:e.sortOrder,"selection-mode":"single-persist",onCalciteChipGroupSelect:e=>{const t=e.target.selectedItems.map((e=>e.label));this.selectedSortOrder=t[0]}},n):null},this.handleSortChangeSave=()=>{const{selectedSortField:e,selectedSortOrder:t}=this;this.arcgisImageItemSortChangeSave.emit({sortField:e,sortOrder:t}),this.arcgisImageItemSortPopoverClose.emit()},this.referenceElement=void 0,this.messages=void 0,this.fields=[],this.preselectedSortField=void 0,this.preselectedSortOrder=void 0,this.open=void 0,this.selectedSortField=void 0,this.selectedSortOrder=void 0}updateModal(e){e&&(this.selectedSortField=this.preselectedSortField,this.selectedSortOrder=this.preselectedSortOrder)}render(){const{messages:e,open:t}=this;return(0,a.h)(a.H,{key:"bb1f71bc63e117dd4551c4fc3d42a6ca58222144",class:"js-app-flyout"},(0,a.h)("calcite-popover",{key:"5351ccf03fb286ff4a33931b9075156bd6c03c1f",autoClose:!0,label:e.sort,referenceElement:this.referenceElement,closable:!0,heading:e.sort,placement:"leading-start",overlayPositioning:"fixed",pointerDisabled:!0,triggerDisabled:!0,offsetDistance:10,offsetSkidding:50,open:t,onCalcitePopoverClose:()=>{this.arcgisImageItemSortPopoverClose.emit()}},(0,a.h)("calcite-panel",{key:"3858cc53c13b6f2f0663093a3260f51a8bcfd0d2",class:"sort-popover-wrapper"},(0,a.h)("calcite-label",{key:"fdac46dce9608585478ec92bca348f1510a60300",class:"label-wrapper"},e.sortByField),this.renderSortFieldList(),(0,a.h)("calcite-label",{key:"2f65d99f9656b91f8c066d643af49947c1256140",class:"label-wrapper"},e.sortOrder),this.renderSortOrderChipGroup(),(0,a.h)("div",{key:"2991310b2c7ffb699f0df94595fd89ba961293b2",class:"button-wrapper"},(0,a.h)("calcite-button",{key:"64fa5c4078c0924340ea54a46728701470af9fb2",width:"full",onClick:this.handleSortChangeSave},e.done)))))}get el(){return(0,a.g)(this)}static get watchers(){return{open:["updateModal"]}}};h.style=".sort-popover-wrapper{display:flex;padding:1rem;min-width:320px;max-height:50vh;background-color:var(--calcite-color-foreground-1) !important}.label-wrapper{background-color:var(--calcite-color-foreground-1);padding-top:0.5rem}.field-list-wrapper{overflow-y:auto}.sort-order-chip-group{padding:0 0.5rem 0.5rem;background-color:var(--calcite-color-foreground-1)}.button-wrapper{padding:1rem 0.25rem 0.25rem;background-color:var(--calcite-color-foreground-1)}"}}]);