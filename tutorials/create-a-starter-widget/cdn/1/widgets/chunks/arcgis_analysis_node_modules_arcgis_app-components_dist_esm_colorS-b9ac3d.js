/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-b9ac3d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-b9ac3d"],{6216:(e,i,n)=>{n.d(i,{a:()=>r,b:()=>v,c:()=>a,d:()=>z,e:()=>b,f:()=>t,g:()=>d,h:()=>g,i:()=>I,j:()=>p,k:()=>u,l:()=>m,m:()=>c,s:()=>f});var s=n(59503),l=(n(21104),n(2137),n(28642)),o=n(89393);function a(e){var i,n;const{layer:l,useFeatureReduction:a,mapImageSublayer:r,mapView:t,supportsArcade:d,modules:u}=s.s,m=l;if(r&&!d)return function(e){var i,n;const{layer:l,useFeatureReduction:a,mapImageSublayer:r,mapView:t,modules:d}=s.s,u=l;e=e||{};const f=(0,s.p)((0,s.j)(u)),m=null===(i=e.fieldInfos)||void 0===i?void 0:i[0];return d.SizeCreator.createClassBreaksRenderer({layer:u,view:t,field:null==m?void 0:m.field,valueExpression:null==m?void 0:m.expression,valueExpressionTitle:null==m?void 0:m.expressionTitle,normalizationField:void 0,classificationMethod:e.classificationMethod?e.classificationMethod:"natural-breaks",standardDeviationInterval:"standard-deviation"===e.classificationMethod?e.standardDeviationInterval?e.standardDeviationInterval:1:void 0,numClasses:e.numClasses?e.numClasses:4,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.u)(u)),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)&&a}).then((e=>((0,s.o)(f,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}(e);const c=(0,s.j)(m).authoringInfo,v=(0,s.g)();e=e||{};const z=(0,s.p)((0,s.j)(m)),b=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],p=e.theme?e.theme:"high-to-low",g={layer:m,view:t,field:null==b?void 0:b.field,theme:p,valueExpression:null==b?void 0:b.expression,valueExpressionTitle:null==b?void 0:b.expressionTitle,normalizationField:e.normalizationField,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.u)(m)),sizeOptimizationEnabled:!r&&(!(0,o.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=m.featureReduction)||void 0===n?void 0:n.type)&&a};return u.SizeCreator.createContinuousRenderer(g).then((i=>{if(!e.noReuse&&f(e)&&["size","color-size","type-size","relationship-size"].indexOf(v)>-1&&c&&"above-and-below"!==c.univariateTheme){const e=(0,s.j)(m).clone(),n=(0,s.a)(e,"size"),l=(0,s.t)(e,"size"),o=(0,s.a)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[l],(0,s.R)(i.renderer)}return(0,s.o)(z,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function r(e){var i;const{layer:n,mapImageSublayer:l,mapView:a,modules:r}=s.s,t=n,d=(0,s.j)(t).authoringInfo,u=(0,s.g)();e=e||{};const m=(0,s.p)((0,s.j)(t)),c=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],v=e.theme?e.theme:"high-to-low",z={layer:t,view:a,startTime:null==c?void 0:c.field,endTime:new Date,theme:v,unit:void 0,outlineOptimizationEnabled:!l&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.u)(t)),sizeOptimizationEnabled:!0,legendOptions:e.legendOptions,defaultSymbolEnabled:!1};return r.SizeCreator.createAgeRenderer(z).then((i=>{if(f(e)&&["size-age","color-size-age","type-size-age"].indexOf(u)>-1&&d&&"above-and-below"!==(null==d?void 0:d.univariateTheme)){const e=(0,s.j)(t).clone(),n=(0,s.a)(e,"size"),l=(0,s.t)(e,"size"),o=(0,s.a)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[l],(0,s.R)(i.renderer)}return(0,s.o)(m,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){var i,n,l,a;const{layer:r,useFeatureReduction:t,mapImageSublayer:d,mapView:f,supportsArcade:m,modules:c}=s.s,v=r;if(d&&!m)return u(e);e=e||{};const z=(0,s.j)(v),b=z.authoringInfo||{},p=(0,s.g)(),g=(0,s.a)(z,"size"),I=(0,s.t)(z,"size"),h=(0,s.p)(z);let y;if(["type-size","relationship-size"].indexOf(p)>-1){const e=(0,s.j)(v);y=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.T)(v,f,p)}else y=z.classBreakInfos&&z.classBreakInfos.length?z.classBreakInfos[z.classBreakInfos.length-1].symbol:(0,s.T)(v,f,p);const x=z.defaultSymbol,S=z.defaultLabel,V=z.backgroundFillSymbol,O=e.theme?e.theme:I?I.theme:"high-to-low";let j=!1;if(g)O===g.theme&&(j=g.minSize.stops?g.minSize.stops[0].size>g.maxSize.stops[0].size:g.minSize>g.maxSize);else{const e=z.classBreakInfos[0].symbol,i=z.classBreakInfos[z.classBreakInfos.length-1].symbol,n=(0,s.U)(e),l=(0,s.U)(i);j=n>l}if(e.fieldInfos&&e.fieldInfos[0]&&g&&e.fieldInfos[0].field===g.field&&e.fieldInfos[0].expression===g.valueExpression&&e.normalizationField===g.normalizationField&&(delete e.fieldInfos,(0,s.S)(e))){const e=z.clone();return e.visualVariables=(0,s.q)(z,"color"),Promise.resolve({renderer:e})}const E=e.fieldInfos&&e.fieldInfos[0]?e.fieldInfos[0]:g?{field:g.field,expression:g.valueExpression,expressionTitle:g.valueExpressionTitle,simpleFieldType:s.z.NUMBER}:{field:z.field,expression:z.valueExpression,expressionTitle:z.valueExpressionTitle,simpleFieldType:s.z.NUMBER},k=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:g?g.normalizationField:z.normalizationField;let T=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfos&&e.fieldInfos[0]||"manual"===b.classificationMethod&&!e.theme||"equal-interval"===b.classificationMethod)&&(T=!0);const B=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:T?void 0:g?null==I?void 0:I.minSliderValue:z.classBreakInfos[0].minValue,P=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:T?void 0:g?null==I?void 0:I.maxSliderValue:z.classBreakInfos[z.classBreakInfos.length-1].maxValue,F={layer:v,view:f,theme:O,field:E.field,valueExpression:E.expression,valueExpressionTitle:E.expressionTitle,normalizationField:k,minValue:B,maxValue:P,outlineOptimizationEnabled:!d&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!h.sizeOutlineVisVar),sizeOptimizationEnabled:!d&&(!g||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof g.minSize)),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==g?void 0:g.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(l=z.legendOptions)||void 0===l?void 0:l.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!z.defaultSymbol,forBinning:"binning"===(null===(a=v.featureReduction)||void 0===a?void 0:a.type)&&t};return c.SizeCreator.createContinuousRenderer(F).then((i=>{var n;if(e.discardMinMax){const e=(0,s.a)(z,"size"),n=(0,s.a)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if(!e.fieldInfos&&void 0===e.normalizationField&&g&&O===(null==g?void 0:g.theme)){const e=(0,s.a)(i.renderer,"size");e.minDataValue=g.minDataValue,e.maxDataValue=g.maxDataValue}if(["color-size","color-age-size","color-size-age","type-size","type-size-age","relationship-size","predominance-size"].indexOf(p)>-1){z.visualVariables=(0,s.q)(z,"size")||[],z.visualVariables=(0,s.q)(z,"size","outline")||[],z.authoringInfo.visualVariables=(0,s.r)(z,"size")||[];const e=(0,s.a)(i.renderer,"size");z.visualVariables.push(e);const n=(0,s.t)(i.renderer,"size");z.authoringInfo.visualVariables.push(n);const l=(0,s.a)(i.renderer,"size","outline");return l&&z.visualVariables.push(l),(0,s.R)(z),i.renderer=z.clone(),Promise.resolve(i)}if((0,s.o)(h,i.renderer),y&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=y),x&&(i.renderer.defaultSymbol=x,i.renderer.defaultLabel=S),V&&(i.renderer.backgroundFillSymbol=V),j){const e=(0,s.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function d(e){var i,n,l;const{layer:a,mapImageSublayer:r,mapView:t,modules:d}=s.s,u=a;e=e||{};const f=(0,s.j)(u),m=(0,s.g)(),c=(0,s.a)(f,"size"),v=(0,s.t)(f,"size"),z=(0,s.p)(f),b=e.startTime?e.startTime:v.startTime,p=e.endTime?e.endTime:v.endTime;let g;if(["type-size-age"].indexOf(m)>-1){const e=(0,s.j)(u);g=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.T)(u,t,m)}else g=f.classBreakInfos&&f.classBreakInfos.length?f.classBreakInfos[0].symbol:(0,s.T)(u,t,m);const I=f.defaultSymbol,h=f.defaultLabel,y=f.backgroundFillSymbol;let x=!1;if(c)x=c.minSize.stops?c.minSize.stops[0].size>c.maxSize.stops[0].size:c.minSize>c.maxSize,"below"===v.theme&&(x=!x);else{const e=f.classBreakInfos[0].symbol,i=f.classBreakInfos[f.classBreakInfos.length-1].symbol,n=(0,s.U)(e),l=(0,s.U)(i);x=n>l}if(e.fieldInfos&&e.fieldInfos[0]&&c&&e.fieldInfos[0].field===c.field&&(delete e.fieldInfos,(0,s.S)(e))){const e=f.clone();return e.visualVariables=(0,s.q)(f,"color"),Promise.resolve({renderer:e})}let S=!1;(e.startTime||e.endTime||e.units||e.fieldInfo||e.theme)&&(S=!0);const V=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:S?void 0:v?v.minSliderValue:f.classBreakInfos[0].minValue,O=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:S?void 0:v?v.maxSliderValue:f.classBreakInfos[f.classBreakInfos.length-1].maxValue,j={layer:u,view:t,theme:e.theme?e.theme:v?v.theme:"high-to-low",startTime:b,endTime:p,unit:e.units?e.units:v.units,minValue:V,maxValue:O,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!z.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&(!c||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof c.minSize)),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==c?void 0:c.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(l=f.legendOptions)||void 0===l?void 0:l.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!f.defaultSymbol};return d.SizeCreator.createAgeRenderer(j).then((i=>{var n;if(e.discardMinMax){const e=(0,s.a)(f,"size"),n=(0,s.a)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if((0,s.t)(i.renderer,"size").field=v.field,!S){const e=(0,s.a)(i.renderer,"size");e.minDataValue=c.minDataValue,e.maxDataValue=c.maxDataValue}if(["color-size-age"].indexOf(m)>-1){f.visualVariables=(0,s.q)(f,"size")||[],f.visualVariables=(0,s.q)(f,"size","outline")||[],f.authoringInfo.visualVariables=(0,s.r)(f,"size")||[];const e=(0,s.a)(i.renderer,"size");f.visualVariables.push(e);const n=(0,s.t)(i.renderer,"size");f.authoringInfo.visualVariables.push(n);const l=(0,s.a)(i.renderer,"size","outline");return l&&f.visualVariables.push(l),(0,s.R)(f),i.renderer=f.clone(),Promise.resolve(i)}if((0,s.o)(z,i.renderer),g&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=g),I&&(i.renderer.defaultSymbol=I,i.renderer.defaultLabel=h),y&&(i.renderer.backgroundFillSymbol=y),x){const e=(0,s.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function u(e){var i;const{layer:n,useFeatureReduction:l,mapImageSublayer:a,mapView:r,modules:t}=s.s,d=n;e=e||{};const u=(0,s.j)(d),f=(0,s.g)(),m=u.authoringInfo,c=(0,s.a)(u,"size"),v=(0,s.t)(u,"size"),z=(0,s.p)(u),b={field:u.field,expression:u.valueExpression,expressionTitle:u.valueExpressionTitle,simpleFieldType:s.z.NUMBER};let p=e.fieldInfos?e.fieldInfos[0]:c?{field:c.field,expression:c.valueExpression,expressionTitle:c.valueExpressionTitle,simpleFieldType:s.z.NUMBER}:b;const g=void 0!==e.normalizationField?e.normalizationField:c?c.normalizationField:u.normalizationField;let I;if(["type-size"].indexOf(f)>-1){const e=(0,s.j)(d);I=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.T)(d,r,f)}else I=u.classBreakInfos&&u.classBreakInfos.length?u.classBreakInfos[0].symbol:(0,s.T)(d,r,f);const h=u.defaultSymbol,y=u.defaultLabel,x=u.backgroundFillSymbol;let S=!1;if(u.classBreakInfos.length>1){const e=u.classBreakInfos[0].symbol,i=u.classBreakInfos[1].symbol,n=(0,s.U)(e)||0,l=(0,s.U)(i)||0;S=n>l}if(!c&&m&&(0,s.A)(p,b)&&g===u.normalizationField&&(delete e.fieldInfos,(0,s.S)(e))){const e=u.clone();return e.visualVariables=(0,s.q)(u,"color"),Promise.resolve({renderer:e})}const V=e.classificationMethod?e.classificationMethod:(null==m?void 0:m.classificationMethod)&&"manual"!==m.classificationMethod?m.classificationMethod:"equal-interval",O="standard-deviation"===V?e.standardDeviationInterval?e.standardDeviationInterval:m.standardDeviationInterval?m.standardDeviationInterval:1:void 0;let j=!0;!e.classificationMethod||e.classificationMethod===(null==m?void 0:m.classificationMethod)||"standard-deviation"!==e.classificationMethod&&"standard-deviation"!==(null==m?void 0:m.classificationMethod)||(j=!1);let E=!1;(void 0!==e.normalizationField||!(0,s.A)(p,b)||"equal-interval"!==V||(null==v?void 0:v.minSliderValue)||(null==v?void 0:v.maxSliderValue))&&(E=!0);const k=(0,o.i)(e.min)?e.min:E?void 0:v?v.minSliderValue:u.classBreakInfos[0].minValue,T=(0,o.i)(e.max)?e.max:E?void 0:v?v.maxSliderValue:u.classBreakInfos[u.classBreakInfos.length-1].maxValue;return t.SizeCreator.createClassBreaksRenderer({layer:d,view:r,field:p.field,valueExpression:p.expression,valueExpressionTitle:p.expressionTitle,normalizationField:g,classificationMethod:V,standardDeviationInterval:O,numClasses:(0,o.i)(e.numClasses)?e.numClasses:c||!j?4:u.classBreakInfos.length,minValue:k,maxValue:T,outlineOptimizationEnabled:!a&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!z.sizeOutlineVisVar),legendOptions:e.legendOptions||u.legendOptions,defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&l}).then((e=>{if((0,s.o)(z,e.renderer),I&&e.renderer.classBreakInfos&&e.renderer.classBreakInfos.map((e=>{const i=I.clone();(0,s.V)(i,(0,s.U)(e.symbol)),e.symbol=i})),h&&(e.renderer.defaultSymbol=h,e.renderer.defaultLabel=y),x&&(e.renderer.backgroundFillSymbol=x),S){const i=(0,s.a)(e.renderer,"size"),n=i.minSize;i.minSize=i.maxSize,i.maxSize=n}return Promise.resolve(e)}),(e=>Promise.reject(e)))}function f(e){var i;const{layer:n}=s.s,l=(0,s.j)(n).clone(),o=(0,s.g)();if(["size","size-age","color-size","color-size-age","color-age-size","type-size","type-size-age","relationship-size"].indexOf(o)>-1&&void 0===e.normalizationField){let n;const a=(0,s.a)(l,"size");if(n=a?["size-age","color-size-age","type-size-age"].indexOf(o)>-1?{field:(0,s.t)(l,"size").field}:{field:a.field,expression:a.valueExpression,expressionTitle:a.valueExpressionTitle}:{field:l.field,expression:l.valueExpression,expressionTitle:l.valueExpressionTitle},(0,s.A)(null===(i=e.fieldInfos)||void 0===i?void 0:i[0],n))return!0}return!1}function m(){const{layer:e,mapView:i,modules:n}=s.s,l=(0,s.j)(e),o=(0,s.a)(l,"size"),a=i.scale,{minSize:r,maxSize:t,minDataValue:d,maxDataValue:u}=o;let f;if(o.stops)f=n.esriLang.clone(o.stops);else{let e,i;if("number"==typeof r)e=r,i=t;else{const n=r.stops.length-1;a>r.stops[n].value?(e=r.stops[n].size,i=t.stops[n].size):r.stops.forEach(((n,s)=>{a<=n.value&&(e=n.size,i=t.stops[s].size)}))}f=[new n.SizeStop({value:d,size:e}),new n.SizeStop({value:u,size:i})]}return f}function c(){const{layer:e}=s.s;return(0,s.j)(e).classBreakInfos.map((e=>{const i=e.symbol;return{min:e.minValue,max:e.maxValue,size:(0,s.U)(i)}}))}function v(e){const{layer:i}=s.s,n=(0,s.j)(i).authoringInfo,l=(0,s.g)(),o=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return f({fieldInfos:[o]})&&["color-size","color-age-size","type-size"].indexOf(l)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)&&(0,s.a)((0,s.j)(i),"size")?h((0,s.j)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):a(Object.assign(Object.assign({},e),{fieldInfos:[o]})).then((i=>h(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function z(e){const{layer:i}=s.s,n=(0,s.j)(i).authoringInfo,l=(0,s.g)(),o=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return f({fieldInfos:[o]})&&["color-size","color-age-size","type-size"].indexOf(l)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)&&(0,s.a)((0,s.j)(i),"size")?y((0,s.j)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):a(Object.assign(Object.assign({},e),{fieldInfos:[o]})).then((i=>y(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function b(e){const{layer:i}=s.s,n=(0,s.j)(i).authoringInfo,l=(0,s.g)(),o=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return f({fieldInfos:[o]})&&["color-size-age","type-size-age"].indexOf(l)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)&&(0,s.a)((0,s.j)(i),"size")?h((0,s.j)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):r(Object.assign(Object.assign({},e),{fieldInfos:[o]})).then((i=>h(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function p(e,i){const{layer:n}=s.s;return e=e||{},t(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((o=>(0,l.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(x(e.renderer,o.renderer),e.backgroundFillSymbol=(0,s.j)(n).backgroundFillSymbol,"size"===i&&(e.statistics=o.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function g(e,i){const{layer:n}=s.s;return e=e||{},t(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((o=>(0,l.d)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(x(e.renderer,o.renderer),e.backgroundFillSymbol=(0,s.j)(n).backgroundFillSymbol,"size"===i&&(e.statistics=o.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function I(e,i){const{layer:n}=s.s;return e=e||{},d(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((o=>(0,l.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(x(e.renderer,o.renderer),e.backgroundFillSymbol=(0,s.j)(n).backgroundFillSymbol,"size"===i&&(e.statistics=o.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function h(e,i){const{layer:n}=s.s,o=(0,s.j)(n),a=o.authoringInfo,r=(0,s.g)(),t=(0,s.t)(o,"color");if((0,l.s)(i)&&["color","color-size","color-size-age"].indexOf(r)>-1&&a&&"above-and-below"!==(null==a?void 0:a.univariateTheme)&&-1===["centered-on","extremes"].indexOf(t.theme)){const l=(0,s.j)(n).clone();if(x(l,e),2===i.fieldInfos.length){const e=l.authoringInfo;e.type=null,e.univariateTheme=null,e.univariateSymbolStyle=null}return Promise.resolve({renderer:l})}return(0,l.c)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(x(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function y(e,i){const{layer:n}=s.s,o=(0,s.j)(n).authoringInfo,a=(0,s.g)();if((0,l.s)(i)&&["color-age","color-age-size"].indexOf(a)>-1&&o&&"above-and-below"!==(null==o?void 0:o.univariateTheme)){const i=(0,s.j)(n).clone();return x(i,e),Promise.resolve({renderer:i})}return(0,l.a)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(x(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function x(e,i){var n;const{layer:l,mapView:o}=s.s;if(!e.authoringInfo)return;e.visualVariables=(0,s.q)(e,"size")||[],e.visualVariables=(0,s.q)(e,"size","auto")||[];const a=(0,s.a)(i,"size");e.visualVariables.push(a),e.authoringInfo.visualVariables=(0,s.r)(e,"size")||[];const r=(0,s.t)(i,"size");e.authoringInfo.visualVariables.push(r);const t=(null===(n=i.classBreakInfos)||void 0===n?void 0:n.length)?i.classBreakInfos:i.uniqueValueInfos;let d=(null==t?void 0:t.length)?t[0].symbol:(0,s.T)(l,o,"color-size");if("picture-marker"===d.type&&(d=(0,s.T)(l,o,"color-size")),(0,s.u)(l)){e.classBreakInfos.map((e=>{const i=(0,s.w)(e.symbol);e.symbol=d.clone(),(0,s.v)(e.symbol,i)})),e.backgroundFillSymbol=i.backgroundFillSymbol;const n=(0,s.a)(i,"size","outline");n&&e.visualVariables.push(n)}!function(e){const{modules:i}=s.s;"simple-line"===e.type?(e.color=[0,0,0,.5],e.width=1):"cim"===e.type?((0,s.v)(e,new i.esriColor([0,0,0,.5])),(0,s.V)(e,4)):(e.color=null,e.outline.color=[0,0,0,.5],(0,s.V)(e,4))}(d)}}}]);