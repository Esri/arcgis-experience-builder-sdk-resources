/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b3ef3d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b3ef3d"],{60812:(e,s,a)=>{a.r(s),a.d(s,{arcgis_smart_mapping_class_breaks_color_slider:()=>n});var l=a(35110),r=a(59503),i=(a(21104),a(77419)),o=(a(2137),a(28642));a(86587),a(63280),a(1984),a(23505),a(89393),a(73838);const n=class{constructor(e){(0,l.r)(this,e),this.arcgisSmartMappingClassBreaksColorSliderChange=(0,l.c)(this,"arcgisSmartMappingClassBreaksColorSliderChange",7),this.arcgisSmartMappingClassBreaksColorSliderError=(0,l.c)(this,"arcgisSmartMappingClassBreaksColorSliderError",7),this.styleSheetStatus="not-loaded"}render(){const{config:e}=r.s;return(0,l.h)(l.H,null,(0,l.h)("link",{rel:"stylesheet",href:`${e.jsapiUrl}/themes/light/main.css`,onLoad:()=>{this.styleSheetStatus="loaded",(0,l.f)(this.hostElement)},onError:()=>{this.styleSheetStatus="failed",(0,l.f)(this.hostElement)}}),"loaded"===this.styleSheetStatus?this.renderClassBreaksColorSlider():"not-loaded"===this.styleSheetStatus?this.renderClassBreaksColorSliderLoading():null)}renderClassBreaksColorSlider(){const{layer:e,strings:s}=r.s;if(1!==e.renderer.classBreakInfos.length)return(this.prepareClassBreaksColorSlider()||this.classBreaksColorSlider)&&this.classBreaksColorSlider.min!==this.classBreaksColorSlider.max?(0,l.h)("div",{class:"slider-box"},(0,l.h)("calcite-label",null,s.panels.classBreaks.dataRange),(0,l.h)("div",{class:"slider-box-buttons-front"},this.renderInvertButton()),(0,l.h)("div",{ref:e=>{e&&this.afterClassBreaksColorSliderCreate(e)}})):this.classBreaksColorSlider&&this.classBreaksColorSlider.min===this.classBreaksColorSlider.max?null:this.renderClassBreaksColorSliderLoading();this.classBreaksColorSlider&&(this.classBreaksColorSlider.destroy(),this.classBreaksColorSlider=void 0)}renderInvertButton(){const{strings:e}=r.s;return(0,l.h)("arcgis-smart-mapping-action",{text:e.panels.classBreaks.invertSlider,icon:"arrowUpDown",onClick:()=>this.handleInvertSlider()})}renderClassBreaksColorSliderLoading(){const{strings:e}=r.s;return(0,l.h)("div",{class:"slider-box"},(0,l.h)("calcite-loader",{label:e.loading}))}prepareClassBreaksColorSlider(){const{layer:e,modules:s}=r.s,a=e.renderer;let l,n;l=a.classBreakInfos[0].minValue,n=a.classBreakInfos[a.classBreakInfos.length-1].maxValue,({min:l,max:n}=(0,r.ad)({min:l,max:n}));const t=(0,o.g)(),h={min:l,max:n,breaks:t,precision:(0,i.g)(t)};return this.classBreaksColorSlider?this.classBreaksColorSlider.set(h):(this.classBreaksColorSlider=new s.ClassedColorSlider(h),this.classBreaksColorSlider.min===this.classBreaksColorSlider.max&&this.classBreaksColorSlider.set(h),this.createclassBreaksColorSliderChangeEvents()),(0,r.ac)(this.classBreaksColorSlider)}afterClassBreaksColorSliderCreate(e){if(this.classBreaksColorSlider.container)e.append(this.classBreaksColorSlider.container);else{const s=document.createElement("div");e.append(s),this.classBreaksColorSlider.container=s}}createclassBreaksColorSliderChangeEvents(){const{layer:e}=r.s,s=e;this.classBreaksColorSlider&&(this.classBreaksColorSlider.on("min-change",(e=>{const a=s.renderer.classBreakInfos;e.value>a[0].maxValue?this.handleMinMaxChange(a[0].maxValue,a[a.length-1].maxValue):this.handleMinMaxChange(e.value,a[a.length-1].maxValue)})),this.classBreaksColorSlider.on("max-change",(e=>{const a=s.renderer.classBreakInfos;e.value<a[a.length-1].minValue?this.handleMinMaxChange(a[0].minValue,a[a.length-1].minValue):this.handleMinMaxChange(a[0].minValue,e.value)})),this.classBreaksColorSlider.on("thumb-change",(()=>this.updateRendererBreaks(this.classBreaksColorSlider.breaks))),this.classBreaksColorSlider.on("thumb-drag",(()=>this.updateRendererBreaks(this.classBreaksColorSlider.breaks))))}handleInvertSlider(){const{layer:e,modules:s}=r.s,a=e.renderer;let l=a.classBreakInfos.map((e=>(0,r.w)(e.symbol)||new s.esriColor({r:64,g:64,b:64,a:1})));l=l.reverse(),a.classBreakInfos.map(((e,s)=>{(0,r.w)(e.symbol)&&(0,r.v)(e.symbol,l[s])})),(0,r.ab)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({invertColors:!0})}handleMinMaxChange(e,s){const{layer:a}=r.s,l=a.renderer;let i=l.classBreakInfos[0],o=l.classBreakInfos[l.classBreakInfos.length-1];i.minValue=e,i.label=(0,r.aC)(i,this.classBreaksColorSlider.precision),o.maxValue=s,o.label=(0,r.aC)(o,this.classBreaksColorSlider.precision),(0,r.ab)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}updateRendererBreaks(e){const{layer:s}=r.s;s.renderer.classBreakInfos.forEach(((s,a)=>{s.minValue===e[a].min&&s.maxValue===e[a].max||(s.minValue=e[a].min,s.maxValue=e[a].max,s.label=(0,r.aC)(s,this.classBreaksColorSlider.precision))})),(0,r.ab)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}get hostElement(){return(0,l.d)(this)}};n.style=".slider-box{height:320px}.slider-box .esri-classed-color-slider{min-width:200px}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__content{height:175px}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__label,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__min,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__max{text-decoration:underline}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__label:hover,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__min:hover,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__max:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}.slider-box-buttons-front{display:flex}"},77419:(e,s,a)=>{a.d(s,{a:()=>n,b:()=>o,g:()=>d,u:()=>i});var l=a(59503),r=(a(21104),a(89393));function i(e){const{layer:s,modules:a}=l.s,i=(0,l.j)(s),o=a.esriLang.clone(i.classBreakInfos);i.classBreakInfos=[],o.forEach(((s,a)=>{s=function(e,s,a,i){if((0,r.i)(s))if(0===s);else if(s<1){const r=Math.round(1/s);e.minValue="first"===i?Math.floor(e.minValue/s)/r:Math.round(e.minValue/s)/r,e.maxValue="last"===i?Math.ceil(e.maxValue/s)/r:Math.round(e.maxValue/s)/r,e.label=`${a>0?"> ":""}${e.minValue.toLocaleString(l.s.fullLocale,{maximumSignificantDigits:15})} - ${e.maxValue.toLocaleString(l.s.fullLocale,{maximumSignificantDigits:15})}`}else e.minValue="first"===i?Math.floor(e.minValue/s)*s:Math.round(e.minValue/s)*s,e.maxValue="last"===i?Math.ceil(e.maxValue/s)*s:Math.round(e.maxValue/s)*s,e.label=(a>0?"> ":"")+e.minValue.toLocaleString()+" - "+e.maxValue.toLocaleString();return e}(s,e,a,0===a?"first":a===o.length-1?"last":void 0),i.addClassBreakInfo({minValue:s.minValue,maxValue:s.maxValue,symbol:s.symbol,label:s.label})}))}function o(e){const{layer:s}=l.s,a=(0,l.j)(s).classBreakInfos;let r=e,i=1/0;a.forEach((e=>{r||(r=Math.max(t(e.minValue),t(e.maxValue))),i=Math.min(i,e.maxValue-e.minValue)}));const o=[];return i>1e7?(o.push(1e7),o.push(1e6),o.push(1e5),o.push(1e4),o.push(1e3),o.push(100),o.push(10),r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01)):i>1e6?(o.push(1e6),o.push(1e5),o.push(1e4),o.push(1e3),o.push(100),o.push(10),r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01)):i>1e5?(o.push(1e5),o.push(1e4),o.push(1e3),o.push(100),o.push(10),r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01)):i>1e4?(o.push(1e4),o.push(1e3),o.push(100),o.push(10),r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01)):i>1e3?(o.push(1e3),o.push(100),o.push(10),r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01),r>3&&o.push(.001)):i>100?(o.push(100),o.push(10),r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01),r>3&&o.push(.001),r>4&&o.push(1e-4),r>5&&o.push(1e-5)):i>10?(o.push(10),r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01),r>3&&o.push(.001),r>4&&o.push(1e-4),r>5&&o.push(1e-5),r>6&&o.push(1e-6)):i>1?(r>0&&o.push(1),r>1&&o.push(.1),r>2&&o.push(.01),r>3&&o.push(.001),r>4&&o.push(1e-4),r>5&&o.push(1e-5),r>6&&o.push(1e-6)):i>.1?(r>1&&o.push(.1),r>2&&o.push(.01),r>3&&o.push(.001),r>4&&o.push(1e-4),r>5&&o.push(1e-5),r>6&&o.push(1e-6)):i>.01?(r>2&&o.push(.01),r>3&&o.push(.001),r>4&&o.push(1e-4),r>5&&o.push(1e-5),r>6&&o.push(1e-6)):i>.001?(r>3&&o.push(.001),r>4&&o.push(1e-4),r>5&&o.push(1e-5),r>6&&o.push(1e-6),r>7&&o.push(1e-7)):i>1e-4?(r>4&&o.push(1e-4),r>5&&o.push(1e-5),r>6&&o.push(1e-6),r>7&&o.push(1e-7),r>8&&o.push(1e-8)):i>1e-5&&(r>5&&o.push(1e-5),r>6&&o.push(1e-6),r>7&&o.push(1e-7),r>8&&o.push(1e-8),r>9&&o.push(1e-9)),o}function n(){const{layer:e}=l.s,s=(0,l.j)(e);let a=1e10;return s.classBreakInfos.forEach((e=>{a=Math.min(a,h(e.minValue)),a=Math.min(a,h(e.maxValue))})),a}function t(e){let s=1;for(;Math.round(e*s)/s!==e;)s*=10;return Math.log(s)/Math.LN10}function h(e){let s=1e-8;for(;u(Math.round(e/s)*s)===e;)s*=10;return s/10}function u(e){return parseFloat(e.toPrecision(12))}function d(e){var s,a,l,i,o,n,h,d;let c=0;e.forEach((e=>{(0,r.i)(e.value)?c=Math.max(t(u(e.value)),c):((0,r.i)(e.minValue)&&(c=Math.max(t(u(e.minValue)),c)),(0,r.i)(e.maxValue)&&(c=Math.max(t(u(e.maxValue)),c)),(0,r.i)(e.min)&&(c=Math.max(t(u(e.min)),c)),(0,r.i)(e.max)&&(c=Math.max(t(u(e.max)),c)))})),c=Math.min(c,3);const p=e[0],m=e[e.length-1],C=Math.min(null!==(a=null!==(s=p.minValue)&&void 0!==s?s:p.min)&&void 0!==a?a:p.value,null!==(i=null!==(l=m.minValue)&&void 0!==l?l:m.min)&&void 0!==i?i:m.value),g=Math.max(null!==(n=null!==(o=p.maxValue)&&void 0!==o?o:p.max)&&void 0!==n?n:p.value,null!==(d=null!==(h=m.maxValue)&&void 0!==h?h:m.max)&&void 0!==d?d:m.value)-C;return g/e.length<2e-7?c=8:g/e.length<2e-6?c=7:g/e.length<2e-5?c=6:g/e.length<2e-4?c=5:g/e.length<.002?c=4:g/e.length<.02?c=3:g/e.length<.2?c=Math.max(c,2):g/e.length<2&&(c=Math.max(c,1)),Math.round(c)}}}]);