/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-401e00.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-401e00"],{70467:(e,s,o)=>{o.d(s,{a:()=>a,c:()=>r,g:()=>t});var l=o(59503),n=(o(21104),o(89393)),i=o(28642);function r(e){var s;const{layer:o,useFeatureReduction:r,mapImageSublayer:a,mapView:t,modules:d}=l.s,m=o;e=e||{};const c=(0,l.g)(),u=(0,l.p)((0,l.j)(m)),f=e.fieldInfos?e.fieldInfos[0]:null,b=e.theme?e.theme:"high-to-low",v={layer:m,view:t,field:f.field,valueExpression:f.expression,valueExpressionTitle:f.expressionTitle,normalizationField:e.normalizationField,theme:b,legendOptions:e.legendOptions,colorOptions:{colorScheme:e.colorScheme||(0,l.Q)(b),isContinuous:!!(0,n.i)(e.isContinuous)&&e.isContinuous},symbolOptions:(0,l.E)(m)?void 0:{symbolStyle:e.symbolOptions||"caret"},symbols:e.symbols||void 0,minValue:e.min,maxValue:e.max,sizeOptimizationEnabled:!a&&"above-and-below"!==b&&(!(0,n.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),defaultSymbolEnabled:!1,forBinning:"binning"===(null===(s=m.featureReduction)||void 0===s?void 0:s.type)&&r};return d.UnivariateColorSizeCreator.createContinuousRenderer(v).then((s=>{if(!e.noReuse&&["color","color-size","color-size-age"].indexOf(c)>-1&&(0,i.s)(e)){const e=(0,l.a)((0,l.j)(m),"color"),o=(0,l.t)((0,l.j)(m),"color");e&&o&&b===o.univariateTheme&&(s.renderer.visualVariables=[e],u.sizeOutlineVisVar&&s.renderer.visualVariables.push(u.sizeOutlineVisVar),s.renderer.authoringInfo.visualVariables=[o],(0,l.R)(s.renderer))}return(0,l.o)(u,s.renderer),Promise.resolve(s)}),(e=>Promise.reject(e)))}function a(e){var s,o,i,r,a,t,d,m;const{layer:c,useFeatureReduction:u,mapImageSublayer:f,mapView:b,modules:v}=l.s,y=c;e=e||{};const p=(0,l.j)(y),I=(0,l.a)(p,"color");if(I&&e.fieldInfos&&e.fieldInfos[0]&&e.fieldInfos[0].field==I.field&&e.fieldInfos[0].expression==I.valueExpression&&e.normalizationField===I.normalizationField&&(delete e.fieldInfos,(0,l.S)(e)))return Promise.resolve({renderer:p.clone()});const z=(0,l.p)(p),k=(0,l.a)(p,"size"),g=p.authoringInfo,h=(0,l.t)(p,"size");let B=e.fieldInfos?e.fieldInfos[0]:I?{field:I.field,expression:I.valueExpression,expressionTitle:I.valueExpressionTitle,simpleFieldType:(null===(s=(0,l.x)(I.field))||void 0===s?void 0:s.simpleFieldType)||l.z.NUMBER}:{field:p.field,expression:p.valueExpression,expressionTitle:p.valueExpressionTitle,simpleFieldType:(null===(o=(0,l.x)(p.field))||void 0===o?void 0:o.simpleFieldType)||l.z.NUMBER};const S=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:I?I.normalizationField:p.normalizationField,x=e.theme?e.theme:g?g.univariateTheme:"high-to-low",w="above-and-below"===g.univariateTheme,E="above-and-below"===x,V="custom"===g.univariateSymbolStyle;"custom"!==e.symbolStyle||e.symbols||(1===p.classBreakInfos.length?e.symbols=[v.esriLang.clone(p.classBreakInfos[0].symbol),v.esriLang.clone(p.classBreakInfos[0].symbol)]:e.symbols=[v.esriLang.clone(p.classBreakInfos[0].symbol),v.esriLang.clone(p.classBreakInfos[1].symbol)]);const F=(0,n.i)(e.isContinuous)?e.isContinuous:!(!w&&E||!I),O="picture-marker"===(null===(i=p.classBreakInfos[0].symbol)||void 0===i?void 0:i.type)||"picture-marker"===(null===(r=p.classBreakInfos[2===p.classBreakInfos.length?1:0].symbol)||void 0===r?void 0:r.type),T=!w&&E||O&&F?"caret":E?e.symbolStyle?["single","custom"].indexOf(e.symbolStyle)>-1?void 0:e.symbolStyle:e.symbols?void 0:"custom"!==g.univariateSymbolStyle?g.univariateSymbolStyle:void 0:void 0,C=!(O&&F)&&("custom"===e.symbolStyle||!e.symbolStyle&&V);let L=E&&!(0,l.E)(y)?{symbolStyle:T,symbols:T?void 0:2===(null===(a=e.symbols)||void 0===a?void 0:a.length)?{below:e.symbols[0],above:e.symbols[1]}:1===(null===(t=e.symbols)||void 0===t?void 0:t.length)?void 0:C?{below:p.classBreakInfos[0].symbol,above:p.classBreakInfos[2===p.classBreakInfos.length?1:0].symbol}:void 0}:void 0;(null==L?void 0:L.symbolStyle)||(null==L?void 0:L.symbols)||(L=void 0),F&&(null==L?void 0:L.symbols)&&((0,l.v)(null==L?void 0:L.symbols.below,new v.esriColor([0,0,0,.5])),(0,l.v)(null==L?void 0:L.symbols.above,new v.esriColor([0,0,0,.5])));const _=p.defaultSymbol,R=p.defaultLabel,j=p.backgroundFillSymbol;let M=!1;x===(null==g?void 0:g.univariateTheme)&&(0,n.i)(k.minSize)&&(M=k.minSize.stops?k.minSize.stops[0].size>k.maxSize.stops[0].size:k.minSize>k.maxSize);let P=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfos&&e.fieldInfos[0])&&(P=!0);const D=E&&!w||!E&&w,U=e.discardMinMax?void 0:(0,n.i)(e.min)?e.min:P?void 0:h?h.minSliderValue:void 0,N=e.discardMinMax?void 0:(0,n.i)(e.max)?e.max:P?void 0:h?h.maxSliderValue:void 0,Q="below"===g.univariateTheme,q="below"===x,A=q&&!Q||!q&&Q,G=e.colorScheme||!D&&(0,l.Q)(x),H={layer:y,view:b,field:B.field,valueExpression:B.expression,valueExpressionTitle:B.expressionTitle,theme:x,legendOptions:e.legendOptions||k.legendOptions,colorOptions:{colorScheme:G,isContinuous:F},symbolOptions:L,normalizationField:S,minValue:U,maxValue:N,sizeOptimizationEnabled:!f&&"above-and-below"!==x&&((0,n.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!(0,n.i)(null===(d=k.minSize)||void 0===d?void 0:d.stops)),defaultSymbolEnabled:(0,n.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!p.defaultSymbol,forBinning:"binning"===(null===(m=y.featureReduction)||void 0===m?void 0:m.type)&&u};return v.UnivariateColorSizeCreator.createContinuousRenderer(H).then((s=>{var o,n,i,r,a;if(e.discardMinMax){const e=(0,l.a)(p,"color"),n=(0,l.a)(s.renderer,"color");null==e||e.stops.forEach(((e,s)=>e.value=null==n?void 0:n.stops[s].value));const i=(0,l.a)(p,"size"),r=(0,l.a)(s.renderer,"size");"above-and-below"===g.univariateTheme?null===(o=i.stops)||void 0===o||o.forEach(((e,s)=>{r.stops&&(e.value=r.stops[s].value)})):(i.minDataValue=r.minDataValue,i.maxDataValue=r.maxDataValue)}if((0,l.o)(z,s.renderer),E){const o=(0,l.w)(s.renderer.classBreakInfos[0].symbol),r=s.renderer.classBreakInfos[1]?(0,l.w)(s.renderer.classBreakInfos[1].symbol):o;if(!T)if(1===(null===(n=e.symbols)||void 0===n?void 0:n.length)&&1===s.renderer.classBreakInfos.length)s.renderer.classBreakInfos[0].symbol=e.symbols[0];else if(2===(null===(i=e.symbols)||void 0===i?void 0:i.length)&&1===s.renderer.classBreakInfos.length){const e=v.esriLang.clone(p.classBreakInfos[0].symbol);s.renderer.classBreakInfos[0].symbol=e}else if("single"===e.symbolStyle&&2===s.renderer.classBreakInfos.length){let e=v.esriLang.clone(p.classBreakInfos[0].symbol);s.renderer.classBreakInfos[0].symbol=e.clone(),(0,l.v)(e,(0,l.w)(s.renderer.classBreakInfos[1].symbol)),s.renderer.classBreakInfos[1].symbol=e,s.renderer.authoringInfo.univariateSymbolStyle=void 0}else{let e=v.esriLang.clone(p.classBreakInfos[0].symbol);s.renderer.classBreakInfos[0].symbol=e,s.renderer.classBreakInfos[1]&&(e=p.classBreakInfos[1]?v.esriLang.clone(p.classBreakInfos[1].symbol):v.esriLang.clone(p.classBreakInfos[0].symbol),s.renderer.classBreakInfos[1].symbol=e)}const a=(0,l.a)(s.renderer,"color");if(a){const e=new v.esriColor([0,0,0,.5]);(0,l.v)(s.renderer.classBreakInfos[0].symbol,e),s.renderer.classBreakInfos[1]&&(0,l.v)(s.renderer.classBreakInfos[1].symbol,e)}else I||a?((0,l.v)(s.renderer.classBreakInfos[0].symbol,o),s.renderer.classBreakInfos[1]&&(0,l.v)(s.renderer.classBreakInfos[1].symbol,r)):((0,l.v)(s.renderer.classBreakInfos[0].symbol,(0,l.w)(p.classBreakInfos[0].symbol)),(0,l.v)(s.renderer.classBreakInfos[1].symbol,(0,l.w)(p.classBreakInfos[1].symbol)))}else E||(1===(null===(r=e.symbols)||void 0===r?void 0:r.length)?s.renderer.classBreakInfos[0].symbol=e.symbols[0]:1===(null===(a=p.classBreakInfos)||void 0===a?void 0:a.length)&&(s.renderer.classBreakInfos[0].symbol=p.classBreakInfos[0].symbol));if(w&&E&&!P){const e=(0,l.a)(s.renderer,"size"),o=(0,l.a)(s.renderer,"color");e.stops=v.esriLang.clone(k.stops),o&&o.stops.forEach(((e,s)=>{e.value=k.stops[s].value})),2==s.renderer.classBreakInfos.length&&(s.renderer.classBreakInfos[0].maxValue=k.stops[2].value,s.renderer.classBreakInfos[1].minValue=k.stops[2].value)}if(A&&G&&I){const e=(0,l.a)(s.renderer,"color"),o=I.stops.length-1;e.stops.forEach(((e,s)=>{e.color=I.stops[o-s].color}))}if(_&&(s.renderer.defaultSymbol=_,s.renderer.defaultLabel=R),s.renderer.backgroundFillSymbol=j||void 0,M){const e=(0,l.a)(s.renderer,"size"),o=e.minSize;e.minSize=e.maxSize,e.maxSize=o}return Promise.resolve(s)}),(e=>Promise.reject(e)))}function t(){const{layer:e,mapView:s}=l.s,o=(0,l.j)(e),n=(0,l.a)(o,"color"),i=(0,l.a)(o,"size"),r=s.scale,{minSize:a,maxSize:t}=i;let d;if(i.stops)d=n.stops.map(((e,s)=>{const o=i.stops[s];return{color:e.color,size:o.size,value:o.value}}));else{const e=n.stops.length-1;if("number"==typeof a)d=n.stops.map(((s,o)=>({color:s.color,value:s.value,size:0===o?a:o===e?t:null})));else{let s,o;const l=a.stops.length-1;r>a.stops[l].value?(s=a.stops[l].size,o=t.stops[l].size):a.stops.forEach(((e,l)=>{r<=e.value&&(s=e.size,o=t.stops[l].size)}));const m=i.minDataValue,c=i.maxDataValue,u=(c-m)/4;d=n.stops.map(((l,n)=>({color:l.color,value:0===n?m:n===e?c:m+n*u,size:0===n?s:n===e?o:void 0})))}}return d}},61886:(e,s,o)=>{let l,n;function i(e){e.loading=!1}function r(e,s){return function(e){e.loading=!0,n=!1,l&&clearTimeout(l),l=setTimeout((()=>{i(e),n=!0}),6e4)}(s),e.then((e=>(i(s),n?Promise.reject(new Error("timeout")):Promise.resolve(e)))).catch((e=>(i(s),Promise.reject(e))))}o.d(s,{r:()=>r})}}]);