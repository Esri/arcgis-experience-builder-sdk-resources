System.register(["jimu-core","jimu-ui","jimu-ui/advanced/map","jimu-ui/advanced/setting-components","jimu-arcgis"],(function(e,t){var o={},l={},s={},n={},i={};return{setters:[function(e){o.FormattedMessage=e.FormattedMessage,o.Immutable=e.Immutable,o.React=e.React,o.injectIntl=e.injectIntl},function(e){l.Checkbox=e.Checkbox,l.Label=e.Label,l.Radio=e.Radio},function(e){s.JimuSymbolType=e.JimuSymbolType,s.SymbolSelector=e.SymbolSelector},function(e){n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection},function(e){i.featureUtils=e.featureUtils,i.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules}],execute:function(){e((()=>{var e={62686:e=>{"use strict";e.exports=i},79244:e=>{"use strict";e.exports=o},14321:e=>{"use strict";e.exports=l},48993:e=>{"use strict";e.exports=s},79298:e=>{"use strict";e.exports=n}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var m={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(m),a.d(m,{default:()=>b});var e=a(79244),t=a(14321),o=a(48993),l=a(79298);const s="Point",n="Polyline",i="Polygon",r="Use layer-defined symbols",c="Use custom symbols",y="Set as operational layers";var p=a(62686);class u extends e.React.PureComponent{constructor(t){super(t),this.onOperationalLayerCheckboxChange=e=>{var t;const o=!!(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.checked),l=this.props.config.set("isOperationalLayer",o);this.props.onSettingChange(l)},this.handleIsUseCustomSymbolOption=e=>{this.props.onSettingChange(Object.assign({},this.props.config.set("isUseCustomSymbol",e).set("symbolOption",null)))},this.onSymbolCreated=(e,t)=>{this.defaultSymbolOption=this.defaultSymbolOption.set(t,null==e?void 0:e.toJSON()),!this.props.config.symbolOption&&this.defaultSymbolOption.pointSymbol&&this.defaultSymbolOption.polylineSymbol&&this.defaultSymbolOption.polygonSymbol&&this.props.onSettingChange(Object.assign({},this.props.config.set("symbolOption",this.defaultSymbolOption)))},this.onSymbolChanged=(e,t)=>{this.props.onSettingChange(Object.assign({},this.props.config.setIn(["symbolOption",t],e.toJSON())))},this.getInitSymbolFromConfig=e=>{let t;const l=this.props.config.symbolOption;return this.jsonUtils&&(e===o.JimuSymbolType.Point?t=(null==l?void 0:l.pointSymbol)?l.pointSymbol:p.featureUtils.getDefaultSymbol("point"):e===o.JimuSymbolType.Polyline?t=(null==l?void 0:l.polylineSymbol)?l.polylineSymbol:p.featureUtils.getDefaultSymbol("polyline"):e===o.JimuSymbolType.Polygon&&(t=(null==l?void 0:l.polygonSymbol)?l.polygonSymbol:p.featureUtils.getDefaultSymbol("polygon"))),t?this.jsonUtils.fromJSON(t):null},this.jsonUtils=null,this.defaultSymbolOption=(0,e.Immutable)({}),this.state={isModulesLoaded:!1}}componentDidMount(){(0,p.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then((e=>{[this.jsonUtils]=e,this.setState({isModulesLoaded:!0})}))}render(){var a;const m=!!(null===(a=this.props.config)||void 0===a?void 0:a.isOperationalLayer),p=this.props.intl.formatMessage({id:"mapAction_Point",defaultMessage:s}),u=this.props.intl.formatMessage({id:"mapAction_Polyline",defaultMessage:n}),b=this.props.intl.formatMessage({id:"mapAction_Polygon",defaultMessage:i});return e.React.createElement("div",{className:"w-100"},e.React.createElement(l.SettingSection,{title:this.props.intl.formatMessage({id:"symbol",defaultMessage:"symbol"}),className:"pt-0"},e.React.createElement(l.SettingRow,{className:"mt-0"},e.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},e.React.createElement("div",{className:"align-items-center d-flex"},e.React.createElement(t.Radio,{style:{cursor:"pointer"},checked:!this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!1)},"aria-labelledby":"useLayerDefinedLabel"}),e.React.createElement("label",{id:"useLayerDefinedLabel",className:"m-0 ml-2",style:{cursor:"pointer"}},this.props.intl.formatMessage({id:"mapAction_UseLayerDefinedSymbols",defaultMessage:r}))))),e.React.createElement(l.SettingRow,null,e.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},e.React.createElement("div",{className:"align-items-center d-flex"},e.React.createElement(t.Radio,{style:{cursor:"pointer"},checked:this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!0)},"aria-labelledby":"useCustomLabel"}),e.React.createElement("label",{id:"useCustomLabel",className:"m-0 ml-2",style:{cursor:"pointer"}},this.props.intl.formatMessage({id:"mapAction_UseCustomSymbols",defaultMessage:c}))))),this.props.config.isUseCustomSymbol&&this.jsonUtils&&e.React.createElement(l.SettingSection,{className:"pb-0"},e.React.createElement(l.SettingRow,{className:"d-flex justify-content-around"},e.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:p},e.React.createElement(o.SymbolSelector,{jimuSymbolType:o.JimuSymbolType.Point,symbol:this.getInitSymbolFromConfig(o.JimuSymbolType.Point),onCreated:e=>{this.onSymbolCreated(e.symbol,"pointSymbol")},onPointSymbolChanged:e=>{this.onSymbolChanged(e,"pointSymbol")}}),e.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},p)),e.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:u},e.React.createElement(o.SymbolSelector,{jimuSymbolType:o.JimuSymbolType.Polyline,symbol:this.getInitSymbolFromConfig(o.JimuSymbolType.Polyline),onCreated:e=>{this.onSymbolCreated(e.symbol,"polylineSymbol")},onPolylineSymbolChanged:e=>{this.onSymbolChanged(e,"polylineSymbol")}}),e.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},u)),e.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:b},e.React.createElement(o.SymbolSelector,{jimuSymbolType:o.JimuSymbolType.Polygon,symbol:this.getInitSymbolFromConfig(o.JimuSymbolType.Polygon),onCreated:e=>{this.onSymbolCreated(e.symbol,"polygonSymbol")},onPolygonSymbolChanged:e=>{this.onSymbolChanged(e,"polygonSymbol")}}),e.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},b))))),e.React.createElement(l.SettingSection,null,e.React.createElement(l.SettingRow,null,e.React.createElement(t.Label,null,e.React.createElement(t.Checkbox,{checked:m,className:"mr-1",onChange:this.onOperationalLayerCheckboxChange}),e.React.createElement(e.FormattedMessage,{id:"mapAction_OperationalLayer",defaultMessage:y})))))}}u.defaultProps={config:(0,e.Immutable)({isUseCustomSymbol:!0,isOperationalLayer:!0})};const b=(0,e.injectIntl)(u)})(),m})())}}}));