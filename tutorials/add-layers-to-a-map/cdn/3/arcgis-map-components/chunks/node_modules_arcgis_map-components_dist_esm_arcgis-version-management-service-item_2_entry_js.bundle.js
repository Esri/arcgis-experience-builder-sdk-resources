/*! For license information please see node_modules_arcgis_map-components_dist_esm_arcgis-version-management-service-item_2_entry_js.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["node_modules_arcgis_map-components_dist_esm_arcgis-version-management-service-item_2_entry_js"],{8378:(e,i,s)=>{s.r(i),s.d(i,{arcgis_version_management_service_item:()=>a,arcgis_version_management_version_properties:()=>r});var t=s(9650);const a=class{constructor(e){(0,t.r)(this,e),this.arcgisFlowItemBack=(0,t.c)(this,"arcgisFlowItemBack",7),this.arcgisFlowItemClose=(0,t.c)(this,"arcgisFlowItemClose",7),this.arcgisGetVersions=(0,t.c)(this,"arcgisGetVersions",7),this.arcgisManageVersion=(0,t.c)(this,"arcgisManageVersion",7),this.arcgisNewVersion=(0,t.c)(this,"arcgisNewVersion",7),this._versionListEventListeners=new Map,this._arcgisGetVersions=e=>{this.arcgisGetVersions.emit(e.detail)},this._arcgisManageVersion=e=>{this.arcgisManageVersion.emit(e.detail)},this._arcgisNewVersion=e=>{this.arcgisNewVersion.emit(e.detail)},this.serviceItemElementProps=void 0}disconnectedCallback(){this._versionList&&this._removeVersionListEventListeners(this._versionList)}render(){const{serviceItemElementProps:{allowEditing:e,closable:i,currentUser:s,executionError:a,currentVersionIdentifier:r,flowElement:n,hasAdvEditingUte:c,heading:o,isVersioningApiAvailable:l,pageSize:h,serviceName:d,serviceUrl:m,state:g,strings:v,versionInfos:f}}=this;let{_versionList:b}=this;const p=(0,t.h)("calcite-combobox",{key:"55e20d6e5f51b908ad71384612d1832aa6b1bf31",clearDisabled:!0,label:d,maxItems:5,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:e=>{const i=e.target,s=f.find((e=>e.versionIdentifier.guid===i.value));this.arcgisManageVersion.emit({actionType:"changeVersion",serviceUrl:m,versionInfo:s})}},f?f.map((e=>(0,t.h)("calcite-combobox-item",{selected:r.guid===e.versionIdentifier.guid&&r.name===e.versionIdentifier.name,textLabel:e.versionIdentifier.name,value:e.versionIdentifier.guid}))):void 0);let _,u;return e&&(_=(0,t.h)("calcite-action",{key:"5d130fb6308283a8405d5d786ccc5deed2a65b1d",id:`actionManageVersions_${d}`,icon:"list",scale:"s",slot:"control",text:"",onClick:async()=>{b=document.createElement("arcgis-version-management-version-list"),b.versionListElementProps={closable:i,currentUser:s,currentVersionIdentifier:r,executionError:a,hasAdvEditingUte:c,heading:o,isVersioningApiAvailable:l,pageSize:h,serviceName:d,serviceUrl:m,state:g,strings:v,versionInfos:f},b.addEventListener("calciteFlowItemBack",(e=>{e.preventDefault(),this.arcgisFlowItemBack.emit()})),b.addEventListener("calciteFlowItemClose",(()=>{this.arcgisFlowItemClose.emit()})),this._addVersionListEventListeners(b),n.append(b)}}),u=(0,t.h)("calcite-tooltip",{key:"522b0802ecd431e4f9a1069e20f65c3256fb6e0c",overlayPositioning:"fixed",referenceElement:`actionManageVersions_${d}`},(0,t.h)("span",{key:"15b78ec25223344535c237f5cd35f39c19007fa3"},v.headers.manageVersions))),(0,t.h)("calcite-block",{key:"ce0894bbfcadf673e7a72fc51d3fc73caa383189",open:!0,heading:d},p,_,u)}_addVersionListEventListeners(e){e.addEventListener("arcgisGetVersions",this._arcgisGetVersions),this._versionListEventListeners.set("arcgisGetVersions",this._arcgisGetVersions),e.addEventListener("arcgisManageVersion",this._arcgisManageVersion),this._versionListEventListeners.set("arcgisManageVersion",this._arcgisManageVersion),e.addEventListener("arcgisNewVersion",this._arcgisNewVersion),this._versionListEventListeners.set("arcgisNewVersion",this._arcgisNewVersion)}_removeVersionListEventListeners(e){for(const[i,s]of this._versionListEventListeners)e.removeEventListener(i,s)}get el(){return(0,t.g)(this)}},r=class{constructor(e){(0,t.r)(this,e),this.arcgisAlterVersion=(0,t.c)(this,"arcgisAlterVersion",7),this.arcgisCreateVersion=(0,t.c)(this,"arcgisCreateVersion",7),this.arcgisFlowItemBack=(0,t.c)(this,"arcgisFlowItemBack",7),this.arcgisFlowItemClose=(0,t.c)(this,"arcgisFlowItemClose",7),this._switchToVersion=!0,this._handleCancel=()=>{this.arcgisFlowItemBack.emit()},this._handleChange=e=>{const{_mode:i,_ownerName:s,_versionName:t,versionPropertiesElementProps:{currentUser:a,serviceUrl:r,versionInfo:n}}=this;let{_alterVersionParameters:c,_createVersionParameters:o}=this;switch("create"===i&&(o||(o={access:"public",description:"",featureServerUrl:r,ownerName:a.toUpperCase(),versionName:""})),"edit"===i&&(c||(c={featureServerUrl:r,versionIdentifier:n.versionIdentifier,ownerName:s,versionName:t,access:n.access,description:n.description})),e.type){case"calciteChipGroupSelect":{const s=e.target.label,t=e.target.selectedItems[0].value;"create"===i&&(o={...o,[s]:t}),"edit"===i&&(c={...c,[s]:t});break}case"calciteInputTextInput":{const s=e.target.name,t=e.target.value;"create"===i&&(o={...o,[s]:t}),"edit"===i&&(c={...c,[s]:t});break}case"calciteTextAreaInput":{const s=e.target.name,t=e.target.value;"create"===i&&(o={...o,[s]:t}),"edit"===i&&(c={...c,[s]:t});break}}"create"===i&&("public"!==o.access&&a.toUpperCase()!==o.ownerName?.toUpperCase()?(this.switchToVersionCheckboxElement.checked=!1,this.switchToVersionCheckboxElement.disabled=!0):this.switchToVersionCheckboxElement.disabled=!1,this._createVersionParameters=o),"edit"===i&&(this._alterVersionParameters=c)},this._handleClose=()=>{this.arcgisFlowItemClose.emit()},this._handleSave=()=>{const{_alterVersionParameters:e,_createVersionParameters:i,_mode:s,_switchToVersion:t}=this;"create"===s&&this.arcgisCreateVersion.emit({createVersionParameters:i,switchToVersion:t}),"edit"===s&&this.arcgisAlterVersion.emit({alterVersionParameters:e})},this._handleSwitchToVersionChange=e=>{this._switchToVersion=e.target.checked},this.versionPropertiesElementProps=void 0}async componentWillLoad(){const{versionPropertiesElementProps:{versionInfo:e}}=this;e?(this._mode="edit",this._fullVersionName=e.versionIdentifier.name,this._ownerName=this._fullVersionName.substring(0,this._fullVersionName.lastIndexOf(".")).toUpperCase(),this._versionName=this._fullVersionName.substring(this._fullVersionName.lastIndexOf(".")+1)):this._mode="create"}componentDidRender(){"create"===this._mode&&this.versionNameInputElement?.setFocus()}render(){const{versionPropertiesElementProps:{closable:e,currentUser:i,hasAdvEditingUte:s,state:a,strings:r,versionInfo:n},_mode:c,_ownerName:o,_versionName:l}=this,h=(0,t.h)("div",{key:"4e99683b73d48620d257c6eef9dc8bec44670f86"},(0,t.h)("calcite-button",{key:"6f313add53b98c3246ed6a368e452e3b8ebcfb0f",appearance:"outline",slot:"footer",width:"half",onClick:this._handleCancel},r.actions.cancelSave),(0,t.h)("calcite-button",{key:"44d4708c675f58e53bdbf40a6cb52001122ecb0e",slot:"footer",width:"half",onClick:this._handleSave},r.actions.saveVersion)),d=(0,t.h)("calcite-label",{key:"03460347514da9101cc618a122dc52a7d3610048"},r.input.versionAccess,(0,t.h)("calcite-chip-group",{key:"7a394d87442486c4ec8e7a59335e6c242b95dc85",label:"access",onCalciteChipGroupSelect:this._handleChange,selectionMode:"single-persist"},(0,t.h)("calcite-chip",{key:"f7cdaf6069006437d6cfdfb05bf5f04330bcdcb7",selected:"edit"===c&&"public"===n.access||"create"===c,value:"public"},r.accessLevels.public),(0,t.h)("calcite-chip",{key:"2a7ccc29721fff575e1083407a6aa9f1bebb0f93",selected:"edit"===c&&"protected"===n.access,value:"protected"},r.accessLevels.protected),(0,t.h)("calcite-chip",{key:"24a6ed16765556542b491ecaf764a9c5efb8cdc6",selected:"edit"===c&&"private"===n.access,value:"private"},r.accessLevels.private))),m=(0,t.h)("calcite-label",{key:"8bef26f80caf771d61f259b69051a4c2d2614e8f"},r.input.versionDescription,(0,t.h)("calcite-text-area",{key:"295736fed7212ee5bf845b76a59ba23a9472474b",name:"description",onCalciteTextAreaInput:this._handleChange,resize:"vertical",value:"edit"===c?n.description:""})),g=(0,t.h)("calcite-label",{key:"0d98dee41473433fad40a8944e341943bce8c9e6"},r.input.versionName,(0,t.h)("calcite-input-text",{key:"53647af8f8b0383733caf725ae928618517527a9",ref:e=>{this.versionNameInputElement=e},name:"versionName",onCalciteInputTextInput:this._handleChange,maxLength:62,value:"edit"===c?l:""})),v=(0,t.h)("calcite-label",{key:"dab16d84730f2a28f7c7c58210fba5cf0d18868a"},r.input.versionOwner,(0,t.h)("calcite-input-text",{key:"cb8317e35c5b5c8a4a97c414411fba39e1aeca3e",name:"ownerName",onCalciteInputTextInput:this._handleChange,disabled:!s,value:"edit"===c?o:i.toUpperCase()})),f="create"===c?(0,t.h)("calcite-label",{layout:"inline"},(0,t.h)("calcite-checkbox",{ref:e=>{this.switchToVersionCheckboxElement=e},checked:!0,name:"switchToVersion",onCalciteCheckboxChange:this._handleSwitchToVersionChange}),r.actions.switchToVersion):void 0;return(0,t.h)("calcite-flow-item",{key:"331bac8a5fda0fa38f78d0ae4cf843b694f9385a",closable:e,description:n?n.versionIdentifier.name:"",heading:n?r.actions.editVersion:r.actions.newVersion,onCalciteFlowItemClose:this._handleClose},(0,t.h)("calcite-panel",{key:"fadaf572a4e872e4b894a8b250cf7db4a572c604",loading:"executing"===a},(0,t.h)("calcite-block",{key:"4c9f807cb52444ca935e6d9fec2ac21c195e9b13",heading:"",open:!0},g,m,d,v,f,h)))}get el(){return(0,t.g)(this)}}}}]);