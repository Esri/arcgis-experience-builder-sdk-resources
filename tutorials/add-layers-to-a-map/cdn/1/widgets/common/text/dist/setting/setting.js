System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/expression-builder","jimu-ui/advanced/rich-text-editor"],(function(e,t){var o={},n={},a={},l={},r={},i={};return{setters:[function(e){o.AllDataSourceTypes=e.AllDataSourceTypes,o.Immutable=e.Immutable,o.React=e.React,o.ReactRedux=e.ReactRedux,o.classNames=e.classNames,o.css=e.css,o.getAppStore=e.getAppStore,o.hooks=e.hooks,o.jsx=e.jsx,o.lodash=e.lodash},function(e){n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection},function(e){a.Button=e.Button,a.Switch=e.Switch,a.TextArea=e.TextArea,a.defaultMessages=e.defaultMessages,a.richTextUtils=e.richTextUtils},function(e){l.DataSourceSelector=e.DataSourceSelector},function(e){r.ExpressionInput=e.ExpressionInput,r.ExpressionInputType=e.ExpressionInputType},function(e){i.RichTextFormats=e.RichTextFormats,i.richTextEditorUtils=e.richTextEditorUtils,i.useEditorSelectionFormats=e.useEditorSelectionFormats}],execute:function(){e((()=>{var e={28716:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.5 2a.5.5 0 0 0 0 1H7l-1.868 8.406a.488.488 0 0 0 .953.212L8 3h3.5a.5.5 0 0 0 0-1zm-1 11a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm6.64-3.86a.477.477 0 0 1 .674 0l1.686 1.686 1.686-1.686a.477.477 0 1 1 .674.674L12.174 11.5l1.686 1.686a.477.477 0 1 1-.674.674L11.5 12.174 9.814 13.86a.477.477 0 1 1-.674-.674l1.686-1.686L9.14 9.814a.477.477 0 0 1 0-.674" clip-rule="evenodd"></path></svg>'},48891:e=>{"use strict";e.exports=o},30726:e=>{"use strict";e.exports=a},338:e=>{"use strict";e.exports=l},39342:e=>{"use strict";e.exports=r},65492:e=>{"use strict";e.exports=i},77756:e=>{"use strict";e.exports=n}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var c={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(c),s.d(c,{__set_webpack_public_path__:()=>b,default:()=>x});var e=s(48891),t=s(77756),o=s(30726),n=s(338);const a={verticalAlignment:"Vertical alignment"};var l=s(39342),r=s(28716),i=s.n(r);const u=t=>{const o=window.SVG,{className:n}=t,a=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]])}return o}(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",n);return o?e.React.createElement(o,Object.assign({className:l,src:i()},a)):e.React.createElement("svg",Object.assign({className:l},a))};var p=s(65492);const d=e.css`
  > * {
    user-select: none;
  }
`,m=t=>{const{editor:n,onChange:a}=t,l=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]])}return o}(t,["editor","onChange"]),[,r]=(0,p.useEditorSelectionFormats)(n,!0),i=e.hooks.useTranslation(o.defaultMessages);return(0,e.jsx)(o.Button,Object.assign({css:d},l,{icon:!0,type:"tertiary",size:"sm",onClick:()=>{p.richTextEditorUtils.clearFormats(n,r),null==a||a(null==n?void 0:n.root.innerHTML)},title:i("clearAllFormats"),"aria-label":i("clearAllFormats")}),(0,e.jsx)(u,null))};const g=t=>{const{editor:o}=t,n=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]])}return o}(t,["editor"]),[a,l]=(0,p.useEditorSelectionFormats)(o,!0),r=e.React.useMemo((()=>{var t;let o=a;return null!=(null===(t=null==o?void 0:o.link)||void 0===t?void 0:t.link)&&(o=e.lodash.assign({},o,{link:o.link.link})),o}),[a]);return e.React.createElement(p.RichTextFormats,Object.assign({editor:o,formats:r,selection:l},n))},S=(0,e.Immutable)([e.AllDataSourceTypes.FeatureLayer,e.AllDataSourceTypes.SceneLayer]),v=(0,e.Immutable)([l.ExpressionInputType.Static,l.ExpressionInputType.Attribute,l.ExpressionInputType.Statistics,l.ExpressionInputType.Expression]),f=(0,e.Immutable)([]),x=r=>{var i,s,c,u,p,d,x,b;const{id:y,config:w,useDataSources:h,useDataSourcesEnabled:E,onSettingChange:R}=r,O="Web Experience Template"===(null===(s=null===(i=(0,e.getAppStore)().getState().appStateInBuilder)||void 0===i?void 0:i.appInfo)||void 0===s?void 0:s.type),T=null===(u=null===(c=null==w?void 0:w.style)||void 0===c?void 0:c.wrap)||void 0===u||u,j=null==w?void 0:w.text,I=null==w?void 0:w.placeholder,D=e.React.useMemo((()=>{var e;return null!==(e=o.richTextUtils.getHTMLTextContent(I))&&void 0!==e?e:""}),[I]),M=null==w?void 0:w.tooltip,P=e.ReactRedux.useSelector((e=>e.appStateInBuilder)),A=null===(d=null===(p=null==P?void 0:P.widgetsMutableStateVersion)||void 0===p?void 0:p[y])||void 0===d?void 0:d.editor,k=null===(b=null===(x=null==P?void 0:P.widgetsRuntimeInfo)||void 0===x?void 0:x[y])||void 0===b?void 0:b.isInlineEditing,F=E&&(null==h?void 0:h.length)>0,[_,C]=e.React.useState(null),[U,L]=e.React.useState(!1);e.React.useEffect((()=>{var e;const t=window._appWindow._mutableStoreManager,o=null!==(e=null==t?void 0:t.getStateValue([y,"editor"]))&&void 0!==e?e:null;C(o)}),[A,y]);const N=e.hooks.useTranslation(a,o.defaultMessages),B=e=>{const t=o.richTextUtils.isBlankRichText(j)&&!!I,n=!k&&t?"placeholder":"text";R({id:y,config:w.set(n,e)})},V=e.React.useMemo((()=>F?v:(0,e.Immutable)([l.ExpressionInputType.Static])),[F]);return e.React.createElement("div",{className:"widget-setting-text jimu-widget-setting"},e.React.createElement(t.SettingSection,null,e.React.createElement(t.SettingRow,null,e.React.createElement(n.DataSourceSelector,{isMultiple:!0,types:S,useDataSources:h,useDataSourcesEnabled:E,onToggleUseDataEnabled:()=>{const e=!E;R(M&&!e?{id:y,config:w.without("tooltip"),useDataSourcesEnabled:e}:{id:y,useDataSourcesEnabled:e})},onChange:e=>{null!=e&&R({id:y,useDataSources:e})},widgetId:y}))),e.React.createElement(t.SettingSection,null,e.React.createElement(t.SettingRow,{flow:"no-wrap",label:N("wrap")},e.React.createElement(o.Switch,{checked:T,onChange:()=>{R({id:y,config:w.setIn(["style","wrap"],!T)})},"aria-label":N("wrap")})),e.React.createElement(t.SettingRow,{label:N("tooltip"),flow:"wrap",role:"group","aria-label":N("tooltip")},e.React.createElement("div",{className:"w-100"},e.React.createElement(l.ExpressionInput,{"aria-label":N("tooltip"),autoHide:!0,useDataSources:F?h:f,onChange:e=>{null!=e&&(R({id:y,config:w.set("tooltip",e)}),L(!1))},openExpPopup:()=>{L(!0)},expression:"object"==typeof M?M:null,isExpPopupOpen:U,closeExpPopup:()=>{L(!1)},types:V,widgetId:y}))),O&&e.React.createElement(t.SettingRow,{flow:"wrap",label:N("placeholder")},e.React.createElement(o.TextArea,{"aria-label":N("placeholder"),defaultValue:D,onAcceptValue:e=>{e=e.replace(/\n/gm,"");const t=((e,t)=>{const n=o.richTextUtils.getHTMLTextContent(e);return e.replace(null==n?void 0:n.trim(),t)})(I,e);R({id:y,config:w.set("placeholder",t)})}}))),null!=_&&e.React.createElement(t.SettingSection,null,e.React.createElement(t.SettingRow,{flow:"no-wrap",label:N("textFormat"),role:"group","aria-label":N("textFormat")},e.React.createElement(m,{editor:_,onChange:B})),e.React.createElement(t.SettingRow,null,e.React.createElement(g,{editor:_,useDataSources:h,widgetId:y,onChange:B}))))};function b(e){s.p=e}})(),c})())}}}));