/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-919c06.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-919c06"],{73838:(e,t,n)=>{n.d(t,{a:()=>r,c:()=>o,g:()=>i});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}},82669:(e,t,n)=>{n.d(t,{a:()=>i,b:()=>s,c:()=>o,d:()=>r});const r=(0,n(23505).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),i=r.state,o=r.state,s=r.state},99418:(e,t,n)=>{n.r(t),n.d(t,{arcgis_new_item_pages_home:()=>g});var r=n(35110),i=n(46710),o=n(37526),s=n(91659),l=n(91306),a=n(12856),c=n(82669),u=n(84873),d=n(27669),p=n(17752),f=n(84121),m=n(31522);n(23505),n(56086),n(66913),n(21104),n(73838),n(70392);const g=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.allowedFileTypes=null,this.fileSelectHandler=async(e,t)=>{const{user:n,portal:r,config:{helpMap:a,helpBase:d},telemetry:p}=i.c,f=t?"your device":"drag drop",g={eventType:"new item click",pageName:"my content",category:"new item",label:f};null==p||p.logEvent(g),u.u.telemetryDetails=f;const{title:h,fileName:v,extension:w}=(0,o.s)(e);l.i.title=h,c.a.file=e,c.a.fileName=v,c.a.newItemMode="file",c.a.extension=w,c.a.selectedFields=void 0;const y=(0,m.f)(w),b="map"===u.u.workflow;if(1===y.length){const t=y[0].type;if("GeoJson"===t&&b&&!await(0,s.h)(n,t,r)&&(0,m.i)(e.size))return void(this.error={description:u.u.i18n.publishSelect.bigGeoJsonHintPublicAccount,linkText:u.u.i18n.common.learnMore,link:`${d}${a[120003923]}`});c.a.type=t,["Microsoft Excel","CSV","GeoJson"].includes(t)&&(c.a.id=null,c.a.analyzeResults=null,c.a.selectedFields=null,"GeoJson"!==t&&(c.a.selectedSheet=null)),c.a.tileLayerPublishType="3DTiles Package"===t?"3dTiles":void 0;const o=y[0].nextStep,l=["CSV","Microsoft Excel"];b&&!await(0,s.h)(n,t,r)&&l.includes(t)||"3DTiles Package"===t?(c.a.enablePublishing=!1,this.newItemUpdatePage.emit("publishSelect")):!await(0,s.h)(n,t,r)||!i.c.allowPublish&&"publishSelect"===o?(c.a.enablePublishing=!1,this.newItemUpdatePage.emit("itemProperties")):this.newItemUpdatePage.emit(o)}else"zip"===w&&(this.newItemUpdatePage.emit("zipSelect"),c.a.applicationFile=null)},this.managedFocus=!0,this.error=void 0}async componentWillLoad(){(0,d.a)();const{allowedItemTypes:e,user:t,portal:n}=i.c;if(e){const e=["CSV","GeoJson","KML"],r=[];await Promise.all(i.c.allowedItemTypes.map((async i=>{(!(0,p.i)(i)||e.includes(i))&&t&&(e.includes(i)||!(0,s.d)(t)&&await(0,s.h)(t,i,n))&&r.push(i)}))),this.allowedFileTypes=r;const o=u.u.i18n;this.browserHelpText=(0,f.r)(o.common.supportFileTypes,this.allowedFileTypes.map((e=>{var t;return null!==(t=o.itemTypeInfo.lowercaseDisplayName[e])&&void 0!==t?t:e})).join(", "),"typeList")}"map"!==u.u.workflow||c.a.existingItem||this.removeExistingFile()}onTransitionComplete(){var e;null===(e=this.fileBrowserRef)||void 0===e||e.focusMainInput()}async removeExistingFile(){const e=c.a.id;e&&(c.a.id=null,await(0,a.d)(e,{permanentDelete:!0}))}render(){const e="map"===u.u.workflow,{allowedFileTypes:t,error:n,fileSelectHandler:o}=this,{portal:s,config:l,user:a,userLicensedItems:d}=i.c;return(0,r.h)(r.H,null,i.c.allowedModes.includes("file")&&(0,r.h)("arcgis-file-browser",{ref:e=>this.fileBrowserRef=e,class:{"full-height":e},allowedExtensions:t?(0,m.m)(t):void 0,helpText:this.browserHelpText,fullHeight:e,portal:s,config:l,user:a,userLicensedItems:d,onCloudDriveConnected:e=>{var t;const n=e.detail,r={eventType:"new item click",pageName:"my content",category:"new item",label:n};null===(t=i.c.telemetry)||void 0===t||t.logEvent(r),u.u.telemetryDetails=n,c.a.cloudProvider=n,this.newItemUpdatePage.emit("cloud")},onFileSelect:({detail:{file:e,source:t}})=>{o(e,"local-device"===t)}}),!e&&(0,r.h)("arcgis-new-item-create-layers-list",null),(0,r.h)("arcgis-new-item-alert",{description:null==n?void 0:n.description,link:{href:null==n?void 0:n.link,title:null==n?void 0:n.linkText},active:!!n,onAlertDismiss:()=>this.error=null}))}}},37526:(e,t,n)=>{n.d(t,{a:()=>o,f:()=>c,g:()=>a,s:()=>s,v:()=>l});var r=n(17752),i=n(15059);function o(e,t){const n=/(?:\.([^.]+))?$/;let r=e.replace(/^.*(\\|\/|:)/,""),o=r&&n.exec(r)[1]?n.exec(r)[1].toLowerCase():"",s="";if(r.indexOf(".rft.")>-1){const[e,t]=r.split(".rft.");o=`rft.${t}`,s=e}return r&&!s&&(s=-1===r.lastIndexOf(".")?r:r.substring(0,r.lastIndexOf("."))),s=s.replace(/\.|-/g,"_"),t&&(s=function(e){return`${e}_${(0,i.g)()}`}(s),r=`${s}.${o}`),{title:s,fileName:r,extension:o}}function s(e,t){return o(e.name,!!t)}function l(e,t){let n=e;const r=e.lastIndexOf("\\");return r>-1&&(n=n.substring(r+1,n.length)),n.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function a(e){return r.a[e]?r.a[e]:r.a[Object.keys(r.a).find((t=>r.a[t].type===e))]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},64209:(e,t,n)=>{n.d(t,{a:()=>i,f:()=>o,s:()=>l});var r=n(88703);const i=e=>(null==e?void 0:e.replace(/(\s+|:)/g,"_"))||"",o=e=>{const t=e=>e.split(",").map((e=>e.trim())).filter((e=>e));return e?"string"==typeof e?(0,r.b)(t(e)):(0,r.b)(e.flatMap((e=>[...t(e)]))):[]},s=async e=>new Promise(((t,n)=>{for(let r=0;r<e.length;r++)e[r].then((n=>{const i=[...e];i.splice(r,1),t({remainingPromises:i,result:n})})).catch(n)}));async function l(e,t){var n,r;const i=[],{getBatchSize:o,onPromiseCompleted:l,onPromiseThrow:a,shouldContinue:c}=null!=t?t:{};let u=[];for(let t=0;t<(null!==(n=null==o?void 0:o())&&void 0!==n?n:1);t++)try{const t=e();t&&u.push(t)}catch(e){null==a||a(e)}let d=null;for(;u.length>0&&(!c||c(d));)try{const{remainingPromises:t,result:n}=await s(u);u=t,d=n,n&&i.push(n),null==l||l(n);const a=null!==(r=null==o?void 0:o())&&void 0!==r?r:1;for(;u.length<a;){const t=e();if(t&&u.push(t),null==t)break}}catch(e){null==a||a(e)}return i}},15059:(e,t,n)=>{n.d(t,{g:()=>r});const r=()=>[2,1,1,1,3].map((e=>{let t="";for(let n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},84121:(e,t,n)=>{n.d(t,{r:()=>i});const r={fileName:/\$\{fileName\}/g,fileType:/\$\{type\}/g,typeList:/\$\{typeList\}/g,missingFields:/\$\{\missingFields\}/g},i=(e,t,n)=>{const i=new RegExp(r[n]);return null==e?void 0:e.replace(i,t)}},91306:(e,t,n)=>{n.d(t,{a:()=>r,i:()=>i});const r=(0,n(23505).c)({title:"",snippet:"",tags:[],categories:[]}),i=r.state},31522:(e,t,n)=>{n.d(t,{a:()=>a,f:()=>o,i:()=>l,m:()=>s});var r=n(88703),i=n(17752);function o(e,t){let n;n=t?t.map((e=>e.type)):Object.keys(i.a);let r=[];return n.forEach((t=>{var n;(null===(n=i.a[t].fileExt)||void 0===n?void 0:n.indexOf(e))>=0&&r.push(i.a[t])})),r}function s(e){return e?(0,r.b)(e.flatMap((e=>{var t;return null===(t=i.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const l=e=>e/1024/1024>50,a=e=>e/1024/1024>20},21104:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(73838),i=(0,r.c)((function(e,t){r.a,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},n="4.24",r="next";function i(e){if(e.toLowerCase()===r)return r;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=n),"https://js.arcgis.com/".concat(e,"/")}function s(e){return!e||i(e)?function(e){void 0===e&&(e=n);var t=o(e),s=i(e);if(s!==r&&3===s.major){var l=s.minor<=10?"js/":"";return"".concat(t).concat(l,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function l(e,t){var n=s(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(n);return r||function(e,t){if(t){var n=document.querySelector(t);n.parentNode.insertBefore(e,n)}else document.head.appendChild(e)}(r=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(n),t),r}var a={};function c(e,t,n){var r;n&&(r=function(e,t){var n=function(r){t(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",n,!1)};return e.addEventListener("error",n,!1),n}(e,n));var i=function(){t(e),e.removeEventListener("load",i,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",i,!1)}function u(){return document.querySelector("script[data-esri-loader]")}function d(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var n={};[a,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}));var r=n.version,i=n.url||o(r);return new t.Promise((function(e,t){var o=u();if(o){var s=o.getAttribute("src");s!==i?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):d()?e(o):c(o,e,t)}else if(d())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=n.css;a&&l(!0===a?r:a,n.insertCssBefore),c(o=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(i),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),t),document.body.appendChild(o)}}))}function f(e){return new t.Promise((function(t,n){var r=window.require.on("error",n);window.require(e,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),d())return f(e);var n=u(),r=n&&n.getAttribute("src");return!t.url&&r&&(t.url=r),p(t).then((function(){return f(e)}))},e.getScript=u,e.isLoaded=d,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),a=e},e.loadCss=l,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const o=async(e,t)=>(await i.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},12856:(e,t,n)=>{n.d(t,{a:()=>v,b:()=>T,c:()=>j,d:()=>b,e:()=>w,f:()=>p,g:()=>h,h:()=>f,i:()=>m,j:()=>I,k:()=>g,l:()=>P,m:()=>y,n:()=>$,s:()=>S,u:()=>x});var r=n(70392),i=n(46710),o=n(91659),s=n(66913),l=n(91306),a=n(82669),c=n(84873),u=n(64209),d=n(17752);function p({title:e,snippet:t,tags:n}){return{title:e,snippet:t,tags:(0,u.f)(n).join(",")}}const f=(e,t,n)=>{var r,i;const{file:o,type:s,extension:l,dataUrl:a,properties:c,typeKeywords:u,existingItem:f}=t,m=p(e);if(n){const e=f;m.title=(null===(r=null==e?void 0:e.sourceData)||void 0===r?void 0:r.title)||e.title||m.title||""}const g=[...null===(i=d.a[s])||void 0===i?void 0:i.typeKeywords,...u?[u]:[],l].join(", "),h=Object.assign({type:s,extension:l},c?{properties:JSON.stringify(c)}:{}),v=o?{file:o}:{dataUrl:a.includes('httpHeaders={"Authorization"')?a:encodeURI(a)};return Object.assign(Object.assign(Object.assign(Object.assign({},h),v),m),{typeKeywords:g})},m=(e,t,n)=>{const r=!!n,i=!!t.addAsUniqueFile,o=f(e,t,r),s=new FormData;return s.append("f","json"),s.append("async","true"),Object.keys(o).forEach((e=>{if(i&&"file"===e){const n=t.fileName;s.append(e,o[e],n)}else s.append(e,o[e])})),s},g=(e,t)=>{const n=(null==t?void 0:t.id)&&!function(e){return["all","recycle"].includes(e.id)||e.id===e.username}(t)?`/${t.id}`:"";return`${e.userContentUrl}${n}/addItem`},h=(e,t)=>`${(0,r.g)(t)}content/items/${e}`,v=async(e,t)=>{try{const n=h(e,t);return{result:await(0,s.r)(n)}}catch(e){return console.warn("error getting item",e),{error:{code:"unhandledError"}}}},w=async(e,t)=>{const n=new FormData;switch(t.type){case"base64":n.append("data",t.data);break;case"url":n.append("url",t.url);break;case"file":n.append("file",t.file)}return n.append("f","json"),n.append("token",(0,s.g)(i.c.portal)),await(0,s.a)(`${(0,r.g)()}content/users/${i.c.user.username}/items/${e}/updateThumbnail`,n,{},"post")};async function y(e,t){const n=`${i.c.user.userContentUrl}/moveItems`;return await(0,s.r)(n,{items:e,folder:t},{},"post")}async function b(e,{permanentDelete:t=!1}={}){const n=`${i.c.user.userContentUrl}/items/${e}/delete`;return await(0,s.r)(n,{permanentDelete:t},{},"post")}async function x(e,t,n){var r;const o=null!==(r=null!=n?n:i.c.user)&&void 0!==r?r:i.c.portal.user,l=`${"append"===c.u.workflow?a.a.existingItem.itemOwner.userContentUrl:o.userContentUrl}/items/${e}/update`;return(0,s.r)(l,t,{},"post")}const $=(e,t)=>{const n=`${(0,r.g)(t)}content/items/${e}/data`;return(0,s.r)(n)},I=async(e,t,n)=>{const r=`${i.c.user.userContentUrl}/items/${e}/commit`,o=m(l.i,t,!!n);return o.delete("file"),await(0,s.a)(r,o,{},"post")},P=async e=>{const t=`${i.c.user.userContentUrl}/items/${e}/cancel`;return await(0,s.r)(t,{},{},"post")},T=async e=>{const t=g(i.c.user,l.i.folder),n=p(l.i),r=Object.assign({},e);return delete r.initialFolders,delete r.initialTitle,delete r.newItemMode,delete r.serviceInfo,delete r.allowStoredAuth,delete r.isSecured,delete r.checkAuth,delete r.agsType,delete r.developerCredentialsType,delete r.applicationEnvironment,delete r.apiKeyReferrerUrls,delete r.developerCredentialsRedirectUrls,delete r.developerPrivileges,await(0,s.r)(t,Object.assign(Object.assign(Object.assign(Object.assign({},r),(e=>e.url&&!!e.serviceInfo)(e)?{serviceInfo:JSON.stringify(e.serviceInfo)}:{}),{typeKeywords:JSON.stringify(e.typeKeywords)}),n),{},"post")};async function S(e,t,n,l,a,c){null!=a||(a=i.c.user),null!=c||(c=i.c.portal);const u=n&&n.id!==a.username?n.id:"root",d=e.replace(`.${l}`,"");if("featurecollection"===l||"Microsoft Excel"===t)return null;const p=[`title: "${d}"`,`type: "${t}"`,`owner: "${a.username}"`,`ownerfolder: "${u}"`],f=await(0,s.r)(`${(0,r.g)(c)}search`,{filter:p.join(" AND "),num:1});return(null==f?void 0:f.total)>0?{num:f.num,itemURLList:f.results.map((e=>(0,o.g)(e.id,i.c.config.baseUrl)))}:null}async function j(e,t){const n=(0,u.a)(e),{user:a,config:c,portal:d}=i.c,{folder:p}=l.i,f=p&&p.id!==a.username?p.id:"root",m=[`owner: "${a.username}"`,`ownerfolder: "${f}"`];t&&m.push(`type: "${t}"`);let g,h=1;for(let e=0;e<10&&!g&&h>-1;e++){const{nextStart:e,results:t}=await(0,s.r)(`${(0,r.g)()}search`,{[d.isPortal?"q":"filter"]:m.join(" AND "),num:100,start:h});g=t.find((e=>e.name===n)),h=e}return g?(0,o.g)(g.id,c.baseUrl):null}},84873:(e,t,n)=>{n.d(t,{a:()=>r,u:()=>i});const r=(0,n(23505).c)({nextText:"next",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),i=r.state},27669:(e,t,n)=>{n.d(t,{a:()=>l,r:()=>s});var r=n(91306),i=n(82669),o=n(84873);function s(){i.d.reset(),r.a.reset()}const l=()=>{if(i.a.existingItem||"register"===o.u.workflow)return;i.d.reset();const e=r.i.folder;r.a.reset(),r.i.folder=e}}}]);