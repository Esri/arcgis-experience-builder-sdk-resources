/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8d355f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8d355f"],{30728:(e,a,i)=>{i.r(a),i.d(a,{arcgis_smart_mapping_panels_predominance:()=>d});var n=i(35110),t=i(59503),l=i(37192),r=(i(21104),i(2137),i(34448)),s=i(38277),o=i(86587);i(1984),i(63280),i(23505),i(89393),i(73838),i(50478);const d=class{constructor(e){(0,n.r)(this,e),this.smartMappingCompleteClose=(0,n.c)(this,"smartMappingCompleteClose",7),this.arcgisSmartMappingPanelsPredominanceBackClick=(0,n.c)(this,"arcgisSmartMappingPanelsPredominanceBackClick",7),this.arcgisSmartMappingPanelsPredominanceClose=(0,n.c)(this,"arcgisSmartMappingPanelsPredominanceClose",7),this.arcgisSmartMappingPanelsPredominanceError=(0,n.c)(this,"arcgisSmartMappingPanelsPredominanceError",7),this.valueSymbolNodes=[],this.labelNodes=[],this.inputNodes=[],this.maxCountOtherValues=200,this.popoverSettings={index:null,popoverNode:null},this.handleDone=()=>{(0,t.l)(),this.arcgisSmartMappingPanelsPredominanceClose.emit("save")},this.hideRotation=!1,this.hideTransparency=!1,this.menuOpen=void 0,this.showBackButton=void 0,this.beforeBack=void 0,this.visualizationOpen=!1}async setFocus(){var e;null===(e=this.flowItemNode)||void 0===e||e.setFocus()}componentWillLoad(){const{mapView:e,modules:a,strings:i}=t.s,n=t.s.layer,l=(0,t.j)(n);return t.s.lastDefault={defaultSymbol:l.defaultSymbol||(0,t.T)(n,e),defaultLabel:l.defaultLabel||i.panels.predominance.other},this.originalRendererJSON=l.toJSON(),this.originalFeatureReduction="featureReduction"in n&&n.featureReduction?a.esriLang.clone(n.featureReduction):void 0,this.originalOrderBy=n.orderBy,this.visualizationOpen=!0,new Promise(((e,a)=>{(0,s.g)({fieldInfos:l.uniqueValueGroups[0].classes.map((e=>({field:e.values[0].value,simpleFieldType:t.z.NUMBER})))}).then((a=>{this.predominantCategoryInfos=a.predominantCategoryInfos,e(a.predominantCategoryInfos)})).catch((e=>{this.arcgisSmartMappingPanelsPredominanceError.emit({message:e,type:"error"}),a(e)}))}))}componentDidLoad(){requestAnimationFrame((()=>{var e;return null===(e=this.flowItemNode)||void 0===e?void 0:e.setFocus()})),this.scaleHandle=(0,l.w)(this.flowItemNode,(()=>this.smartMappingCompleteClose.emit("cancel")))}disconnectedCallback(){var e;t.s.lastDefault=void 0,t.s.selectedValue=void 0,null===(e=this.scaleHandle)||void 0===e||e.remove()}render(){var e;const{hideLayerTitle:a,isRTL:i,layer:l,mapImageSublayer:r,strings:s}=t.s,d=a?void 0:null!==(e=null==r?void 0:r.title)&&void 0!==e?e:l.title;return(0,n.h)(n.H,{class:"calcite-match-height"},(0,n.h)("calcite-flow-item",{class:{"flow-item":!0,[o.C.rtl]:i},heading:s.panels.predominance.styleOptions,description:d,closable:(0,t.H)(this.hostElement),menuOpen:this.menuOpen,beforeBack:this.beforeBack,showBackButton:this.showBackButton,onCalciteFlowItemClose:this.handleDone,onCalciteFlowItemBack:()=>this.arcgisSmartMappingPanelsPredominanceBackClick.emit(),ref:e=>this.flowItemNode=e},this.renderVisualization(),this.renderTransparency(),this.renderRotation(),this.renderDone(),this.renderCancel()))}renderVisualization(){const{strings:e}=t.s,a=!this.hideTransparency||!this.hideRotation;return(0,n.h)("calcite-block",{class:"predominance-block",heading:e.panels.predominance.predominanceStyle,collapsible:a,open:this.visualizationOpen,onCalciteBlockOpen:()=>this.visualizationOpen=!0,onCalciteBlockClose:()=>this.visualizationOpen=!1},this.renderPredominanceSymbol(),this.renderDrawingOrder(),this.renderValues(),this.renderMsg(),this.renderBackgroundStyle())}renderPredominanceSymbol(){const{layer:e,mapView:a,modules:i}=t.s,l=(0,t.j)(e).uniqueValueGroups[0].classes,r=i.predominanceSchemes.getSchemes({basemap:a.map.basemap,geometryType:(0,t.G)(e),numColors:l.length}),s=(0,t.aa)(r,Math.min(l.length,10))[0].colors;let o=(null==l?void 0:l.length)?l.slice(0,10).map(((e,a)=>(0,t.w)(e.symbol)||new i.esriColor(s[a%s.length]))):[];return(0,n.h)("arcgis-smart-mapping-symbol-button",{type:"predominance-ramp",colors:o,rampType:"discrete",popoverReferenceElement:this.flowItemNode,onArcgisSmartMappingSymbolButtonSymbolChange:()=>{(0,n.f)(this.hostElement),this.rotationNode&&(0,n.f)(this.rotationNode)}})}renderDrawingOrder(){const{layer:e,mapImageSublayer:a,strings:i}=t.s;if(a)return null;const l=(0,t.j)(e);return(0,n.h)("calcite-label",{layout:"inline-space-between"},i.panels.predominance.drawingOrder,(0,n.h)("calcite-switch",{scale:"s",checked:l.orderByClassesEnabled,onCalciteSwitchChange:e=>{const a=e.target;(0,t.l)();const i=t.s.layer;(0,t.j)(i).orderByClassesEnabled=a.checked,a.checked?i.orderBy=null:i.orderBy=this.originalOrderBy,(0,t.ab)()}}))}renderValues(){const{layer:e,strings:a}=t.s,i=(0,t.j)(e);return(0,n.h)(n.F,null,(0,n.h)("calcite-label",null,a.panels.predominance.fieldName),(0,n.h)("calcite-list",{class:"top-grey-border","drag-enabled":!0,onCalciteListOrderChange:e=>{let a=Array.from(e.target.children);this.handleSortValues(a)}},i.uniqueValueGroups[0].classes.map(((e,a)=>this.renderValue(e,a)))),(0,n.h)("calcite-list",null,this.renderDefaultValue()))}renderValue(e,a){return(0,n.h)("calcite-list-item",{value:e.values[0].value,key:`values-${e.values[0].value}`,"sort-values":e.values[0].value},this.renderSymbolNode(e,a),this.renderTextNode(e,a),this.renderCountNode(e))}renderSymbolNode(e,a){const{selectedValue:i,strings:l}=t.s,r={symbol:!0,"symbol-is-white":(0,t.aq)(e.symbol)};return(0,n.h)("div",{class:r,slot:"content-start",onClick:()=>this.handleValueSymbolClick(a),role:"button",tabIndex:0,"aria-label":l.panels.predominance.accessibility.editSymbolFor.replace("${value}",e.label),"aria-haspopup":"true","aria-expanded":i===a,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.handleValueSymbolClick(a))},ref:e=>{a>-1?this.valueSymbolNodes[a]=e:this.defaultSymbolNode=e,this.createValueSymbol(a,e)}})}renderTextNode(e,a){const{strings:i}=t.s;return(0,n.h)(n.F,null,(0,n.h)("div",{"aria-label":i.panels.predominance.accessibility.editLabelFor.replace("${fieldName}",e.label),class:"label text-wrap",slot:"content",tabIndex:0,onClick:e=>{t.s.selectedValue=a,e.target.classList.add("hidden");let i=-1===a?this.defaultInputNode:this.inputNodes[a];i.classList.remove("hidden"),i.setFocus()},onKeyDown:e=>{if(" "===e.key||"Enter"===e.key){e.preventDefault(),e.stopPropagation(),t.s.selectedValue=a,e.target.classList.add("hidden");let i=-1===a?this.defaultInputNode:this.inputNodes[a];i.classList.remove("hidden"),i.setFocus()}},ref:e=>{a>-1?this.labelNodes[a]=e:this.defaultLabelNode=e}},e.label),(0,n.h)("calcite-input",{class:"hidden",slot:"content",tabIndex:0,value:e.label,onFocusout:e=>{const i=e.target;this.handleValueTextChange(a,i.value)},onKeyDown:e=>{if(e.stopPropagation(),"Escape"===e.key||"Enter"===e.key){e.preventDefault();const i=e.currentTarget;this.handleValueTextChange(a,i.value)}},ref:e=>{a>-1?this.inputNodes[a]=e:this.defaultInputNode=e}}))}renderCountNode(e){const{strings:a}=t.s,i=this.getPredominantCategoryValue(e.values[0].value);return i&&(0,t.ac)(i.count)?(0,n.h)("div",{slot:"content-end",class:"value-count","aria-label":a.panels.predominance.accessibility.countFor.replace("${value}",e.label)},`${i.count}`):null}renderDefaultValue(){const{layer:e,lastDefault:a,strings:i}=t.s,l=(0,t.j)(e),r=l.defaultSymbol||a.defaultSymbol,s=l.defaultLabel||a.defaultLabel,o=this.getPredominantCategoryValue(void 0);return(0,n.h)("calcite-list-item",{class:"top-grey-border"},(0,n.h)("calcite-checkbox",{class:"checkbox",scale:"s",tabIndex:0,slot:"actions-start",checked:!!l.defaultSymbol,onClick:()=>{l.defaultSymbol?(l.defaultSymbol=void 0,l.defaultLabel=void 0):(l.defaultSymbol=a.defaultSymbol,l.defaultLabel=a.defaultLabel),(0,t.ab)(),(0,n.f)(this.hostElement)}}),this.renderSymbolNode(s,-1),this.renderTextNode({symbol:r,label:s},-1),(0,n.h)("div",{slot:"content-end","aria-label":i.panels.predominance.accessibility.countFor.replace("${value}",s)},""+(o&&(0,t.ac)(o.count)?o.count:0)))}renderMsg(){const{layer:e,lastDefault:a,strings:i}=t.s,l=(0,t.j)(e);return l.uniqueValueGroups[0].classes&&l.uniqueValueGroups[0].classes.length>this.maxCountOtherValues?(0,n.h)("div",null,i.panels.predominance.tooManyValues.replace("${count}",this.maxCountOtherValues.toString())):l.uniqueValueGroups[0].classes.length?null:(0,n.h)("div",null,i.panels.predominance.noFeatures.replace("${other}",a.defaultLabel))}renderBackgroundStyle(){const{mapImageSublayer:e}=t.s;return"predominance-size"!==(0,t.g)()||e?null:(0,n.h)("arcgis-smart-mapping-background-symbol",null)}renderTransparency(){if(this.hideTransparency)return null;const{layer:e}=t.s,a=(0,t.a)((0,t.j)(e),"opacity");return(0,n.h)("arcgis-smart-mapping-transparency",{open:!!a,onArcgisSmartMappingSymbolTransparencyError:({detail:e})=>this.arcgisSmartMappingPanelsPredominanceError.emit(e)})}renderRotation(){if(this.hideRotation)return null;const{layer:e}=t.s,a=(0,t.a)((0,t.j)(e),"opacity"),i=(0,t.a)((0,t.j)(e),"rotation");return(0,n.h)("arcgis-smart-mapping-rotation",{open:!a&&!!i,onArcgisSmartMappingRotationError:({detail:e})=>this.arcgisSmartMappingPanelsPredominanceError.emit(e),ref:e=>this.rotationNode=e})}renderDone(){const{strings:e}=t.s;return(0,n.h)("calcite-button",{slot:"footer",label:e.done,onClick:this.handleDone,appearance:"solid",width:"half"},e.done)}renderCancel(){const{strings:e}=t.s;return(0,n.h)("calcite-button",{slot:"footer",label:e.cancel,onClick:()=>{const{originalRendererJSON:e,originalFeatureReduction:a,originalOrderBy:i}=this;t.s.layer.orderBy=i,(0,t.l)(),(0,t.k)(e,a),this.arcgisSmartMappingPanelsPredominanceClose.emit("cancel")},appearance:"outline-fill",width:"half"},e.cancel)}async createValueSymbol(e,a){var i;const{layer:n,lastDefault:l,modules:r}=t.s,s=(0,t.j)(n);let o;for(o=-1===e?s.defaultSymbol||l.defaultSymbol:s.uniqueValueGroups[0].classes[e].symbol.clone();null===(i=null==a?void 0:a.childNodes)||void 0===i?void 0:i.length;)a.removeChild(a.childNodes[0]);if(o){const e=await r.symbolUtils.renderPreviewHTML(o,{size:(0,t.ar)(o),symbolConfig:"cim"===o.type&&"CIMPolygonSymbol"===o.data.symbol.type?{isSquareFill:!0}:void 0});a.appendChild(e)}}getPredominantCategoryValue(e){if(!this.predominantCategoryInfos)return;const a=this.predominantCategoryInfos.filter((a=>a.value==e));return(null==a?void 0:a.length)?a[0]:void 0}handleSortValues(e){const{layer:a,modules:i}=t.s;(0,t.l)();const l=e.map((e=>e.value)),r=(0,t.j)(a),s=r.uniqueValueGroups[0].classes.filter((e=>l.indexOf(`${e.values[0].value}`)>-1)).map((e=>i.esriLang.clone(e)));s.sort(((e,a)=>l.indexOf(e.values[0].value)-l.indexOf(a.values[0].value))),r.uniqueValueGroups[0].classes=s,(0,t.ab)(),(0,n.f)(this.hostElement)}handleValueSymbolClick(e){var a;(null===(a=this.popoverSettings)||void 0===a?void 0:a.popoverNode)?((-1===e?this.defaultSymbolNode:this.valueSymbolNodes[e]).classList.remove("selected"),this.popoverSettings.index===e?((0,t.l)(),this.popoverSettings.popoverNode=null,this.popoverSettings.index=null):(this.popoverSettings.index=e,this.openSymbolStylerForValue(e))):(this.popoverSettings.index=e,this.openSymbolStylerForValue(e))}handleValueTextChange(e,a){const{layer:i,modules:n,strings:l}=t.s,r=(0,t.j)(i),s=n.rendererJsonUtils.fromJSON(this.originalRendererJSON);a.length||(a=-1===e?s.defaultLabel||l.panels.predominance.other:s.uniqueValueGroups[0].classes.find((a=>a.values[0].value===r.uniqueValueGroups[0].classes[e].values[0].value)).label),-1===e?r.defaultSymbol&&(r.defaultLabel=a):r.uniqueValueGroups[0].classes[e].label=a,(0,t.ab)();let o=-1===e?this.defaultInputNode:this.inputNodes[e];o.classList.add("hidden");let d=-1===e?this.defaultLabelNode:this.labelNodes[e];d.classList.remove("hidden"),d.innerHTML=a,o.value=a,setTimeout((()=>{e===t.s.selectedValue&&(d.focus(),t.s.selectedValue=void 0)}),300)}openSymbolStylerForValue(e){(0,t.l)();const a=-1===e?this.defaultSymbolNode:this.valueSymbolNodes[e];this.popoverSettings.popoverNode=(0,r.c)({referenceElement:this.flowItemNode,heading:t.s.strings.styler.symbolStyle}),this.popoverSettings.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverClose",(()=>{(0,r.r)(this.popoverSettings.popoverNode),this.popoverSettings.popoverNode=null,setTimeout((()=>a.focus()),300),a.classList.remove("selected")})),this.popoverSettings.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverDisconnected",(()=>{(0,r.r)(this.popoverSettings.popoverNode),this.popoverSettings.popoverNode=null,a.classList.remove("selected")})),t.s.selectedValue=e,(0,r.d)({popoverNode:this.popoverSettings.popoverNode,onChange:()=>{(0,t.ab)(),(0,n.f)(this.hostElement),this.rotationNode&&(0,n.f)(this.rotationNode)}}),a.classList.add("selected")}get hostElement(){return(0,n.d)(this)}};d.style=":host{width:100%}.flow-item{height:100%}.predominance-block{overflow-x:hidden}.checkbox{margin:0 6.5px}.hidden{display:none}.label{font-size:var(--calcite-font-size--1);padding-top:5px;padding-bottom:5px}.label:focus,.symbol:focus{outline:2px solid var(--calcite-color-brand)}.selected{outline:1px solid var(--calcite-color-brand)}.symbol{min-width:26px;display:flex}.symbol div{margin:auto}.symbol-is-white{background-color:#f3f3f3}.text-wrap{overflow-wrap:anywhere}.top-grey-border{border-top:1px solid #e0e0e0}.list-item-top-grey-border{border-top:1.5px solid #e0e0e0}"},37192:(e,a,i)=>{i.d(a,{w:()=>t});var n=i(59503);function t(e,a){const{layer:i,mapView:t,useFeatureReduction:r}=n.s;if(!r||!("featureReduction"in i)||"binning"!==i.featureReduction.type)return;const s=n.s.modules.reactiveUtils.watch((()=>t.scale),(()=>{const r=i.featureReduction;t.scale<=r.maxScale&&!e.disabled?((0,n.l)(),function(e,a){const i=document.createElement("arcgis-smart-mapping-scale-alert-popover");i.refElement=e,i.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",(()=>{l(),a()})),document.body.append(i)}(e,a),(0,n.m)(e,!0)):t.scale>r.maxScale&&e.disabled&&(l(),(0,n.m)(e,!1),e.setFocus())}));return s}function l(){document.querySelectorAll("arcgis-smart-mapping-scale-alert-popover").forEach((e=>{var a;null===(a=e.parentElement)||void 0===a||a.removeChild(e),e=null}))}i(21104),i(2137)},38277:(e,a,i)=>{i.d(a,{a:()=>r,c:()=>l,g:()=>s});var n=i(59503),t=(i(21104),i(89393));function l(e){var a;const{layer:i,useFeatureReduction:l,mapView:r,selectedFields:s,modules:d}=n.s,u=i;e=e||{};const c=(0,n.p)((0,n.j)(u));return d.PredominanceCreator.createRenderer({layer:u,view:r,fields:o(e.fieldInfos),predominanceScheme:e.predominanceScheme||(0,n.X)(),includeOpacityVariable:!(0,t.i)(e.includeOpacityVariable)||(0,t.i)(e.includeOpacityVariable),includeSizeVariable:!!(0,t.i)(e.includeSizeVariable)&&e.includeSizeVariable,outlineOptimizationEnabled:(0,t.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,n.u)(u),sizeOptimizationEnabled:!(0,t.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled,legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(a=u.featureReduction)||void 0===a?void 0:a.type)&&l}).then((a=>{(0,n.o)(c,a.renderer,{notOpacity:!0});const i=(0,n.g)();if(!(0,t.i)(e.includeOpacityVariable)&&["predominance","predominance-size"].indexOf(i)>-1){const i=(0,n.h)(u),t=s.map((e=>e.field)).sort(),l=i.map((e=>e.field)).sort();if(t.toString()===l.toString()){const i=(0,n.a)((0,n.j)(u),"opacity"),t=(0,n.t)((0,n.j)(u),"opacity");a.renderer.visualVariables=(0,n.q)(a.renderer,"opacity")||[],i&&a.renderer.visualVariables.push(i),a.renderer.authoringInfo.visualVariables=(0,n.r)(a.renderer,"opacity")||[],t&&a.renderer.authoringInfo.visualVariables.push(t);const l=a.renderer.uniqueValueInfos[0].symbol.clone();a.renderer.uniqueValueInfos=(0,n.j)(u).uniqueValueInfos,(0,n.u)(u)&&("predominance-size"===(0,n.g)()&&!0!==e.includeSizeVariable?(0,n.Y)(a.renderer,l):"predominance"===(0,n.g)()&&!0===e.includeSizeVariable&&(0,n.Z)(a.renderer,l))}}return Promise.resolve(a)}),(e=>Promise.reject(e)))}function r(e){var a;const{layer:i,useFeatureReduction:l,mapView:r,modules:s}=n.s,d=i;e=e||{};const u=(0,n.j)(d),c=(0,n.a)(u,"size"),p=(0,n.t)(u,"size"),m=(0,n.p)(u);let h,b,f=e.fieldInfos?e.fieldInfos:u.uniqueValueGroups[0].classes.map((e=>({field:e.values[0].value,simpleFieldType:n.z.NUMBER}))),g=!0;if(e.fieldInfos&&(u.uniqueValueGroups[0].classes.forEach(((a,i)=>{a.values[0].value!==e.fieldInfos[i].field&&(g=!1)})),g&&(delete e.fieldInfos,(0,n.S)(e)))){const e=u.clone();return Promise.resolve({renderer:e})}g&&(h=u.uniqueValueInfos.map((e=>e.value)));const y=(0,n.j)(d);b=y.uniqueValueInfos&&y.uniqueValueInfos.length?y.uniqueValueInfos[0].symbol:null;const v=u.defaultSymbol,S=u.defaultLabel,V=u.backgroundFillSymbol;let C=!1;c&&(C=c.minSize.stops?c.minSize.stops[0].size>c.maxSize.stops[0].size:c.minSize>c.maxSize);const N=f[0];return f[0]=f[1],f[1]=N,s.PredominanceCreator.createRenderer({layer:d,view:r,fields:o(f),predominanceScheme:e.predominanceScheme||(0,n.X)(),includeOpacityVariable:(0,t.i)(e.includeOpacityVariable)?e.includeOpacityVariable:!!m.opacityVisVar,includeSizeVariable:(0,t.i)(e.includeSizeVariable)?e.includeSizeVariable:!!c,outlineOptimizationEnabled:(0,t.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!m.sizeOutlineVisVar,sizeOptimizationEnabled:(0,t.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!m.sizeAutoVisVar,legendOptions:void 0,defaultSymbolEnabled:(0,t.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!v,forBinning:"binning"===(null===(a=d.featureReduction)||void 0===a?void 0:a.type)&&l}).then((a=>{if(!e.fieldInfos&&c){const e=(0,n.a)(a.renderer,"size");if(e.minDataValue=c.minDataValue,e.maxDataValue=c.maxDataValue,p){const e=(0,n.t)(a.renderer,"size");e.minSliderValue=p.minSliderValue,e.maxSliderValue=p.maxSliderValue}}if(!(0,t.i)(e.includeOpacityVariable)&&g&&m.opacityVisVar&&m.authOpacityVisVar&&(a.renderer.visualVariables=(0,n.q)(a.renderer,"opacity"),a.renderer.authoringInfo.visualVariables=(0,n.r)(a.renderer,"opacity"),a.renderer.visualVariables.push(m.opacityVisVar),a.renderer.authoringInfo.visualVariables=a.renderer.authoringInfo.visualVariables||[],a.renderer.authoringInfo.visualVariables.push(m.authOpacityVisVar)),(0,n.o)(m,a.renderer,{notOpacity:!0}),h&&a.renderer.uniqueValueInfos.sort(((e,a)=>{const i=h.indexOf(e.value),n=h.indexOf(a.value);return i>-1&&n>-1&&i<n?-1:i>-1&&n>-1&&i>n?1:i>-1?-1:n>-1?1:0})),g&&a.renderer.uniqueValueInfos.forEach(((e,a)=>{e.label=u.uniqueValueInfos[a].label})),b&&a.renderer.uniqueValueInfos&&a.renderer.uniqueValueInfos.length){const e=a.renderer.uniqueValueInfos.slice();e.map(((e,a)=>{let i;g?i=u.uniqueValueInfos[a].symbol:(i=b.clone(),(0,n.v)(i,(0,n.w)(e.symbol))),e.symbol=i})),a.renderer.uniqueValueInfos=e}if(v&&(a.renderer.defaultSymbol=v,a.renderer.defaultLabel=S),V&&(a.renderer.backgroundFillSymbol=V),C){const e=(0,n.a)(a.renderer,"size"),i=e.minSize;e.minSize=e.maxSize,e.maxSize=i}return Promise.resolve(a)}),(e=>Promise.reject(e)))}function s(e){var a;const{layer:i,useFeatureReduction:t,mapView:l,modules:r}=n.s,s=i;return e=e||{},r.predominantCategories({layer:s,view:l,fields:e.fieldInfos.map((e=>e.field)),forBinning:"binning"===(null===(a=s.featureReduction)||void 0===a?void 0:a.type)&&t})}function o(e){return e.map((e=>({name:e.field,label:d(e.field)})))}function d(e){const a=n.s.fields.filter((a=>a.layerField.name===e));return a.length?a[0].label:""}}}]);