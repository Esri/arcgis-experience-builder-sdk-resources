/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-980945.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-980945"],{73838:(e,t,r)=>{r.d(t,{a:()=>n,c:()=>i,g:()=>s});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}},24646:(e,t,r)=>{r.r(t),r.d(t,{arcgis_delete_items_recycle_disabled:()=>l,arcgis_delete_items_recycle_enabled:()=>c,arcgis_items_summary:()=>d,arcgis_items_summary_bucket:()=>u});var n=r(35110),s=r(63280),i=r(74484);r(46710),r(23505),r(21104),r(73838),r(67148),r(66913),r(70392),r(91659),r(56086);const o=new Map;function a(e){return function(e,t){const r=o.get(e);if(r)return r;const n=(0,s.c)(e,"arcgis-delete-items");return n?(o.set(e,n.store),n.store):null}(e)}const l=class{constructor(e){(0,n.r)(this,e),this.renderProtectedItem=e=>{const{item:t}=e;return(0,n.h)("div",{class:"protected-item",key:t.id},(0,n.h)("arcgis-item-type",{item:t,showText:!1,showHosted:!0,class:"protected-item__icon"}),(0,n.h)("calcite-link",{href:`./item.html?id=${t.id}`,class:"protected-item__link",target:"_blank"},t.title))},this.renderRecycle=()=>{const{unprotectedItems:e,protectedItems:t}=this.buckets;switch(this.mode){case"PROTECTED":case"PROTECTED_UNPROTECTED":return(0,n.h)(n.F,null,(0,n.h)("span",null,this.i18n.cantDelete),t.map(this.renderProtectedItem),e.length>0&&(0,n.h)("span",null,this.i18n.proceed));default:return(0,n.h)("span",null,this.i18n.areYouSure[this.buckets.unprotectedItems.length>1?"multiple":"single"])}},this.buckets=void 0,this.mode=void 0}async componentWillLoad(){this.store=a(this.el),this.i18n=this.store.state.i18n}render(){return(0,n.h)(n.H,null,this.renderRecycle())}get el(){return(0,n.d)(this)}};l.style=":host{display:flex;flex-direction:column;font-size:var(--calcite-font-size--1)}.protected-item{display:flex;align-items:center;padding-left:0px;padding-right:0px;padding-top:0.5rem;padding-bottom:0.5rem}.protected-item__link{min-width:0px;overflow-wrap:break-word}.protected-item__icon{margin-inline-end:0.5rem;flex-grow:0}";const c=class{constructor(e){(0,n.r)(this,e),this.arcgisDeleteItemsPermanentlyDeleteOverride=(0,n.c)(this,"arcgisDeleteItemsPermanentlyDeleteOverride",7),this.arcgisDeleteItemsPermanentlyDeleteBucketToggle=(0,n.c)(this,"arcgisDeleteItemsPermanentlyDeleteBucketToggle",7),this.getUnrecyclableMessage=()=>{const{i18n:e,notSupportedItems:t,distributedCollabFeatureLayer:r}=this,n=r.length>0&&0===t.length,s=t.length>0&&r.length>0;let i;return i=n?e.summary.permanentDelete.unsynchronized:s?e.summary.permanentDelete.notSupportedAndUnsynchronized:e.summary.permanentDelete.notSupported[this.buckets.unrecyclableItems.length>1?"multiple":"single"],i},this.renderUnrecyclableBucket=()=>{const{i18n:e,getUnrecyclableMessage:t,isPermanentlyDeleteBucketDisabled:r,help:s}=this,{protectedItems:i,unprotectedItems:o,unrecyclableItems:a}=this.buckets,l=`${s.base}${s.map[120004692]||""}`;return(0,n.h)(n.F,null,(0,n.h)("arcgis-items-summary",{icon:"trash",disabled:r},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.permanentlyDelete),(0,n.h)("arcgis-items-summary-bucket",{popoverId:"unrecyclable-bucket",summaryGroups:[{items:a,heading:e.summary.permanentDelete.group.notSupported}]})),(0,n.h)("div",{slot:"description",innerHTML:t()}),(0,n.h)("div",{slot:"link"},(0,n.h)("calcite-link",{"icon-end":"launch",href:l,target:"_blank"},e.learnMore)),!(0===o.length&&0===i.length)&&(0,n.h)("div",{slot:"actions",class:"enabled"},(0,n.h)("calcite-button",{scale:"s",appearance:"outline",onClick:()=>{this.isPermanentlyDeleteBucketDisabled=!r,this.arcgisDeleteItemsPermanentlyDeleteBucketToggle.emit(!r)}},r?e.summary.select:e.summary.deselect))),(o.length>0||i.length>0)&&(0,n.h)("hr",{class:"divider"}))},this.renderUnprotectedBucket=()=>{const{i18n:e,items:t}=this,{unprotectedItems:r}=this.buckets;return(0,n.h)("arcgis-items-summary",{icon:"recycle-bin"},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.willBeRecycled),(0,n.h)("arcgis-items-summary-bucket",{popoverId:"unprotected-bucket",summaryGroups:[{items:r}]})),(0,n.h)("div",{slot:"description"},e.summary.canBeRecovered[1===t.length?"single":"multiple"].replace("${days}",`${i.D}`)))},this.renderProtectedBucket=()=>{const{i18n:e}=this,{protectedItems:t}=this.buckets;return(0,n.h)("arcgis-items-summary",{icon:"security"},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.cannotBeDeleted),(0,n.h)("arcgis-items-summary-bucket",{popoverId:"protected-bucket",summaryGroups:[{items:t,heading:e.summary.protectedGroup.deleteProtected}]})),(0,n.h)("div",{slot:"description"},e.summary.cannotDelete.all))},this.renderPermanentlyDeleteAllOverride=()=>{const{i18n:e}=this,{unprotectedItems:t,unrecyclableItems:r}=this.buckets,s=[...t,...r];return(0,n.h)("div",{class:"override"},(0,n.h)("span",{class:"override__description"},e.deleteOverride[s.length>0?"multiple":"single"]),(0,n.h)("arcgis-items-summary",{icon:"trash"},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.permanentlyDelete),(0,n.h)("arcgis-items-summary-bucket",{label:e.summary.permanentlyDelete,popoverId:"permanently-delete-override-bucket",summaryGroups:[{items:s}]}))))},this.renderMoreOptions=()=>{const{i18n:e,isMoreOptionsExpanded:t,isAllSameDeleteMode:r,buckets:s,items:i,mode:o,primaryAction:a,arcgisDeleteItemsPermanentlyDeleteOverride:l}=this,{unprotectedItems:c,unrecyclableItems:d}=s;return"PROTECTED"===o||"PERMANENTLY_DELETE"===a?null:(0,n.h)("div",{class:"more-options__container"},(0,n.h)("calcite-button",{class:"more-options__button",scale:"s",iconEnd:t?"minus":"plus",appearance:"transparent",onClick:()=>{this.isMoreOptionsExpanded=!t},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(this.isMoreOptionsExpanded=!t)}},t?e.hideOptions:e.moreOptions),t&&(0,n.h)("calcite-button",{kind:"danger",scale:"s",appearance:"transparent",iconStart:"trash",onClick:()=>{this.permanentlyDeleteOverridden=!0,l.emit()}},r?e.deletePermanently:e.summary.deleteXPermanently.replace("${subset}",`${c.length+d.length}`).replace("${total}",`${i.length}`)))},this.items=void 0,this.buckets=void 0,this.mode=void 0,this.primaryAction=void 0,this.permanentlyDeleteOverridden=void 0,this.showSelectedItemsCount=!0,this.isPermanentlyDeleteBucketDisabled=void 0,this.isMoreOptionsExpanded=void 0,this.distributedCollabFeatureLayer=[],this.notSupportedItems=[]}async componentWillLoad(){this.store=a(this.el),this.i18n=this.store.state.i18n;const{portal:e,locale:t}=this.store.state;this.help={base:e.sourceJSON.helpBase,map:await(0,i.g)(e,t)},this.isAllSameDeleteMode=["PROTECTED","UNPROTECTED","UNRECYCLABLE"].includes(this.mode),this.analyzeUnrecyclableItems()}analyzeUnrecyclableItems(){const{unrecyclableItems:e}=this.buckets;this.notSupportedItems=e.filter((e=>!(0,i.i)(e))),this.distributedCollabFeatureLayer=e.filter((e=>(0,i.i)(e)))}render(){const{i18n:e,items:t,isPermanentlyDeleteBucketDisabled:r,permanentlyDeleteOverridden:s,isAllSameDeleteMode:i,showSelectedItemsCount:o,renderPermanentlyDeleteAllOverride:a,renderUnrecyclableBucket:l,renderUnprotectedBucket:c,renderProtectedBucket:d,renderMoreOptions:u}=this,{protectedItems:m,unprotectedItems:p,unrecyclableItems:h}=this.buckets;return(0,n.h)(n.H,null,s?a():(0,n.h)(n.F,null,o&&!i&&(0,n.h)("span",{class:"selected-items"},`${e.summary.selectedItems} ${t.length-(r?h.length:0)}`),h.length>0&&l(),p.length>0&&c(),m.length>0&&d(),u()))}get el(){return(0,n.d)(this)}static get watchers(){return{bucket:["analyzeUnrecyclableItems"]}}};c.style=":host{display:flex;flex-direction:column;font-size:var(--calcite-font-size--1)}.selected-items{margin-bottom:2rem;font-size:var(--calcite-font-size-0)}.divider{margin-left:0px;margin-right:0px;margin-top:1rem;margin-bottom:0px;border-style:none;border-top:1px solid #ccc}.more-options__container{display:flex;flex-direction:column;align-items:flex-start}.more-options__button{margin-top:2rem;margin-bottom:1rem}.override{display:flex;flex-direction:column}.override__description{margin-bottom:1rem}arcgis-items-summary:not(:first-of-type){margin-top:2rem}";const d=class{constructor(e){(0,n.r)(this,e),this.icon=void 0,this.disabled=!1}render(){const{icon:e,disabled:t}=this;return(0,n.h)("div",{class:"summary-container"},!!e&&(0,n.h)("calcite-icon",{class:{"summary-icon":!0,disabled:t},scale:"l",icon:e}),(0,n.h)("div",{class:"summary-content"},(0,n.h)("div",{class:`${this.disabled&&"disabled"}`},(0,n.h)("slot",{name:"title"}),(0,n.h)("slot",{name:"description"}),(0,n.h)("slot",{name:"link"})),(0,n.h)("slot",{name:"actions"})))}get el(){return(0,n.d)(this)}};d.style=".summary-container{display:flex}.summary-icon{padding-inline-end:0.5rem}.disabled{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none;opacity:var(--calcite-opacity-disabled)}::slotted([slot=title]){font-weight:500}::slotted([slot=actions]){margin-top:0.75rem}";const u=class{constructor(e){(0,n.r)(this,e),this.arcgisDeleteItemsSummaryItemClick=(0,n.c)(this,"arcgisDeleteItemsSummaryItemClick",7),this.renderSingleItemLink=()=>{const{item:e}=this.singleItem;return this.disableLinks?(0,n.h)("span",null,(0,n.h)("arcgis-item-type",{showText:!1,item:e})," ",e.title):(0,n.h)("calcite-link",{href:`item.html?id=${e.id}`,target:"_blank"},(0,n.h)("arcgis-item-type",{showText:!1,item:e})," ",(0,n.h)("span",{class:"break-word"},e.title))},this.popoverId=void 0,this.label=void 0,this.summaryGroups=void 0,this.disableLinks=void 0}async componentWillLoad(){var e;this.singleItem=null!==(e=1===this.summaryGroups.length&&1===this.summaryGroups[0].items.length&&this.summaryGroups[0].items[0])&&void 0!==e?e:null}render(){const{popoverId:e,label:t,summaryGroups:r,disableLinks:s}=this;return(0,n.h)(n.H,null,this.singleItem?this.renderSingleItemLink():(0,n.h)("arcgis-items-summary-popover",{disableLinks:s,label:t,popoverId:e,summaryGroups:r}))}get el(){return(0,n.d)(this)}};u.style=":host{padding-inline-start:0.5rem}.break-word{word-break:break-word}"},74484:(e,t,r)=>{r.d(t,{D:()=>d,a:()=>l,b:()=>u,c:()=>m,d:()=>a,e:()=>p,g:()=>c,i:()=>g}),r(46710),r(21104);var n=r(78635),s=r(67148),i=r(91659),o=r(66913);const a=async(e,t,r=!1)=>{const n=`${(0,i.A)(e.owner,t)}/items/${e.id}/delete`;return(0,o.r)(n,{permanentDelete:r},{},"post")},l=async(e,t,r=!1)=>{const n=(0,i.z)(e),s=[];for(const e in n){const a={items:n[e].join(","),permanentDelete:r},l=`${(0,i.A)(e,t)}/deleteItems`;s.push((0,o.r)(l,a,{},"post"))}return{results:(await Promise.all(s)).flatMap((e=>e.results))}};async function c(e,t){const r=await(0,o.r)(`${e.restUrl}/portals/helpmap?culture=${t}`);return null==r?void 0:r.helpMap.m}const d=14,u=async(e,t,r=!1)=>{const a=[],l=[],c=[];return await Promise.all(e.map((async d=>{var u,m;try{const m=await(async(e,t)=>{const r=t.sourceJSON.recycleBinEnabled?"/canRecycle":"/canDelete",n=`${(0,i.A)(e.owner,t)}/items/${e.id}${r}`;return await(0,o.r)(n)})(d,t);if(m.success){const i=await(async(e,t)=>{const{type:r,typeKeywords:n}=e,i=["Scene Service","Map Service","WFS","OGCFeatureServer","Vector Tile Service","3DTiles Service"].includes(r),o=["Map Service","Vector Tile Service"].includes(r);let a,l=i?"Service2Service":e.typeKeywords.includes("Route Layer")?"Service2Route":"Service2Data",c="Service2Service"===l||"Service2Route"===l?"reverse":"forward";n.indexOf("Bulk Published Service")>-1&&(l="DataStore2BPService",c="reverse");try{const r=await(0,s.g)(e.id,t,{relationshipType:l,direction:c});if(a=(null==r?void 0:r.total)?r.relatedItems.shift():null,i){if(o&&!(e=>e&&e.typeKeywords.includes("View Service")||!1)(a)||!a){const r=await(0,s.g)(e.id,t,{relationshipType:"Service2Data",direction:"forward"});return(null==r?void 0:r.total)?r.relatedItems.shift():a}return a}return a}catch(e){console.error(e)}})(d,t),o=await(async(e,t)=>{const{type:r,typeKeywords:i}=e,o=(0,n.i)(i,r)?"Service2Service":"Service2Data",a="Service2Service"===o&&"Feed"!==r?"forward":"reverse",l=await(0,s.g)(e.id,t,{relationshipType:o,direction:a});return l.total>0&&l.relatedItems})(d,t),c=await(async(e,t,r)=>{const{typeKeywords:s,type:i}=e;return!t&&(null==r?void 0:r.length)&&!(0,n.i)(s,i)})(d,i,o),m=!(c||!o||y(d,o)||v(d,o)),p=null!==(u=r&&1===e.length&&c&&{item:d,error:{message:"Delete discouraged"}})&&void 0!==u?u:null;p?l.push(p):c&&!h(e,o)?a.push({item:d,error:{message:"Delete discouraged"}}):m&&!h(e,o)?a.push({item:d,error:{messageCode:"CONT_00481",offendingItems:o}}):l.push({item:d})}else d.protected?a.push({item:d,error:{messageCode:"CONT_0048"}}):c.push({item:d})}catch(t){const r=(null===(m=null==t?void 0:t.details)||void 0===m?void 0:m.raw)||Object.assign({},t);switch(t.messageCode||r.messageCode){case"CONT_00481":{const{offendingItems:t}=r;h(e,t)?l.push({item:d}):a.push({item:d,error:r});break}case"CONT_0048":default:a.push({item:d,error:r});break;case"CONT_0298":c.push({item:d})}}}))),Promise.resolve({protectedItems:a,unprotectedItems:l,unrecyclableItems:c})},m=e=>{const{protectedItems:t,unrecyclableItems:r,unprotectedItems:n}=e,s=[];return t.length>0&&s.push("PROTECTED"),r.length>0&&s.push("UNRECYCLABLE"),n.length>0&&s.push("UNPROTECTED"),s.join("_")},p=e=>{let t="DELETE";switch(e){case"PROTECTED":t="NONE";break;case"UNRECYCLABLE":case"PROTECTED_UNRECYCLABLE":t="PERMANENTLY_DELETE"}return t},h=(e,t)=>{var r;const n=null!==(r=null==t?void 0:t.map((e=>{var t;return null!==(t=e.itemId)&&void 0!==t?t:e.id})))&&void 0!==r?r:[],s=e.filter((e=>n.includes(e.id))),i=n.every((t=>e.some((e=>e.id===t)))),o=s.every((e=>!e.protected));return i&&o},y=(e,t)=>{const{typeKeywords:r,type:s}=e;return"Feed"===e.type&&(0,n.i)(r,s)&&1===(null==t?void 0:t.length)&&"Feature Service"===t[0].type&&t[0].typeKeywords.includes("Hosted Service")},v=(e,t)=>{const{typeKeywords:r,type:s}=e;return"Feature Service"===e.type&&(0,n.i)(r,s)&&1===(null==t?void 0:t.length)&&"Feed"===t[0].type&&t[0].typeKeywords.includes("Hosted Service")},g=({item:e})=>{var t,r;const{typeKeywords:s,type:i}=e;return(0,n.i)(s,i)&&"Feature Service"===e.type&&!!(null!==(r=null===(t=e.sourceJSON)||void 0===t?void 0:t.origin)&&void 0!==r?r:null==e?void 0:e.origin)}},67148:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>c,g:()=>l,r:()=>o});var n=r(66913),s=r(70392),i=r(46710);const o=async(e,t,r={})=>{const{body:s,usePost:o,addTokenManually:a,api:l=(null===i.c||void 0===i.c?void 0:i.c.api),customToken:c}=r,d=new URLSearchParams;s&&Object.entries(s).forEach((([e,t])=>{void 0!==t&&d.append(e,t)}));const u=new URL(e);if(u.searchParams.append("f","json"),c)u.searchParams.append("token",c);else{const e=!1===a?null:await(0,n.b)(t,l);e&&u.searchParams.append("token",e)}const m=await fetch(u.toString(),{body:o?d:void 0,method:o?"POST":"GET"}),p=await m.json(),h=p.error;if(h)throw"string"==typeof h?new Error(h):h;return p},a=async(e,t)=>{var r;try{return{result:await o(e,t,{addTokenManually:!1})}}catch(e){const t="token required";return(null===(r=null==e?void 0:e.message)||void 0===r?void 0:r.toLowerCase().includes(t))?{error:{code:"tokenRequired"}}:(console.error(e),{error:{code:"unhandledError"}})}};async function l(e,t,{relationshipType:r,direction:i}){const o=`${(0,s.g)(t)}content/items/${e}/relatedItems`;return await(0,n.r)(o,{relationshipType:r,direction:i})}const c=async(e,t)=>{try{return{result:(await(0,n.r)(`${(0,s.g)(t)}/search`,{filter:`id:(${e.join(" OR ")})`,num:100})).results}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}},21104:(e,t,r)=>{r.d(t,{l:()=>i});var n=r(73838),s=(0,n.c)((function(e,t){n.a,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",n="next";function s(e){if(e.toLowerCase()===n)return n;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function i(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function o(e){return!e||s(e)?function(e){void 0===e&&(e=r);var t=i(e),o=s(e);if(o!==n&&3===o.major){var a=o.minor<=10?"js/":"";return"".concat(t).concat(a,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function a(e,t){var r=o(e),n=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(r);return n||function(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}(n=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(r),t),n}var l={};function c(e,t,r){var n;r&&(n=function(e,t){var r=function(n){t(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}(e,r));var s=function(){t(e),e.removeEventListener("load",s,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",s,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function m(e){void 0===e&&(e={});var r={};[l,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var n=r.version,s=r.url||i(n);return new t.Promise((function(e,t){var i=d();if(i){var o=i.getAttribute("src");o!==s?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):u()?e(i):c(i,e,t)}else if(u())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=r.css;l&&a(!0===l?n:l,r.insertCssBefore),c(i=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(s),(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),t),document.body.appendChild(i)}}))}function p(e){return new t.Promise((function(t,r){var n=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),u())return p(e);var r=d(),n=r&&r.getAttribute("src");return!t.url&&n&&(t.url=n),m(t).then((function(){return p(e)}))},e.getScript=d,e.isLoaded=u,e.loadScript=m,e.setDefaultOptions=function(e){void 0===e&&(e={}),l=e},e.loadCss=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const i=async(e,t)=>(await s.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},78635:(e,t,r)=>{r.d(t,{i:()=>n});const n=(e,t)=>"Feature Service"===t&&e.includes("Hosted Service")}}]);