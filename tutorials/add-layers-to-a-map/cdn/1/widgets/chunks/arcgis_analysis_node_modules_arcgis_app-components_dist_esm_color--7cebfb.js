/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_color--7cebfb.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_color--7cebfb"],{28642:(e,i,n)=>{n.d(i,{a:()=>r,b:()=>s,c:()=>a,d:()=>t,e:()=>d,g:()=>u,s:()=>m});var l=n(59503),o=(n(21104),n(89393));function a(e){var i;const{layer:n,useFeatureReduction:a,mapImageSublayer:r,mapView:s,supportsArcade:t,modules:d}=l.s,u=n;if(r&&!t)return function(e){var i;const{layer:n,useFeatureReduction:a,mapImageSublayer:r,mapView:s,modules:t}=l.s,d=n;e=e||{};const u=(0,l.p)((0,l.j)(d)),m=e.fieldInfos?e.fieldInfos[0]:null;return t.ColorCreator.createClassBreaksRenderer({layer:d,view:s,field:m.field,valueExpression:m.expression,valueExpressionTitle:m.expressionTitle,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod?e.classificationMethod:"natural-breaks",standardDeviationInterval:"standard-deviation"===e.classificationMethod?e.standardDeviationInterval?e.standardDeviationInterval:1:void 0,numClasses:e.numClasses?e.numClasses:4,minValue:e.min,maxValue:e.max,colorScheme:e.colorScheme||(0,l.Q)(),outlineOptimizationEnabled:!r&&(!(0,o.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&a}).then((e=>((0,l.o)(u,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}(e);const c=(0,l.j)(u),f=c.authoringInfo,p=(0,l.t)(c,"color");e=e||{};const v=(0,l.g)(),b=(0,l.p)((0,l.j)(u)),h=e.fieldInfos?e.fieldInfos[0]:null,z=e.theme?e.theme:"high-to-low";return d.ColorCreator.createContinuousRenderer({layer:u,view:s,field:h.field,valueExpression:h.expression,valueExpressionTitle:h.expressionTitle,theme:z,colorScheme:e.colorScheme||(0,l.Q)(z),normalizationField:e.normalizationField,minValue:e.min,maxValue:e.max,outlineOptimizationEnabled:!r&&(!(0,o.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!r&&(!(0,o.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&a}).then((i=>{if(!e.noReuse&&["color","color-size","color-size-age"].indexOf(v)>-1&&m(e)&&f&&"above-and-below"!==(null==f?void 0:f.univariateTheme)&&-1===["centered-on","extremes"].indexOf(p.theme)){const e=(0,l.a)((0,l.j)(u),"color"),n=(0,l.t)((0,l.j)(u),"color");i.renderer.visualVariables=(0,l.q)(i.renderer,"color")||[],i.renderer.visualVariables.push(e),b.sizeOutlineVisVar&&(i.renderer.visualVariables=(0,l.q)(i.renderer,"size","outline"),i.renderer.visualVariables.push(b.sizeOutlineVisVar)),i.renderer.authoringInfo.visualVariables=(0,l.r)(i.renderer,"color")||[],i.renderer.authoringInfo.visualVariables.push(n),(0,l.R)(i.renderer)}return(0,l.o)(b,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function r(e){const{layer:i,mapImageSublayer:n,mapView:a,modules:r}=l.s,s=i,t=(0,l.j)(s).authoringInfo;e=e||{};const d=(0,l.g)(),u=(0,l.p)((0,l.j)(s)),c=e.fieldInfos?e.fieldInfos[0]:null,f=e.theme?e.theme:"high-to-low";return r.ColorCreator.createAgeRenderer({layer:s,view:a,startTime:c.field,endTime:new Date,theme:f,colorScheme:e.colorScheme||(0,l.Q)(f),unit:void 0,outlineOptimizationEnabled:!n&&(!(0,o.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!n&&(!(0,o.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1}).then((i=>{if(["color-age","color-age-size"].indexOf(d)>-1&&m(e)&&t&&"above-and-below"!==(null==t?void 0:t.univariateTheme)){const e=(0,l.a)((0,l.j)(s),"color"),n=(0,l.t)((0,l.j)(s),"color");i.renderer.visualVariables=[e],u.sizeOutlineVisVar&&i.renderer.visualVariables.push(u.sizeOutlineVisVar),i.renderer.authoringInfo.visualVariables=[n],(0,l.R)(i.renderer)}return(0,l.o)(u,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function s(e){var i,n,a,r;const{layer:s,useFeatureReduction:t,mapImageSublayer:u,mapView:m,supportsArcade:c,modules:f}=l.s,p=s;if(u&&!c)return d(e);e=e||{};const v=(0,l.j)(p),b=v.authoringInfo||{},h=(0,l.g)(),z=(0,l.a)(v,"color");if(z&&e.fieldInfos&&e.fieldInfos[0]&&e.fieldInfos[0].field==z.field&&e.fieldInfos[0].expression==z.valueExpression&&e.normalizationField===z.normalizationField&&(delete e.fieldInfos,(0,l.S)(e)))return Promise.resolve({renderer:v.clone()});const x=(0,l.p)(v),I=(0,l.t)(v,"color");let g=e.fieldInfos?e.fieldInfos[0]:z?{field:z.field,expression:z.valueExpression,expressionTitle:z.valueExpressionTitle,simpleFieldType:l.z.NUMBER}:{field:v.field,expression:v.valueExpression,expressionTitle:v.valueExpressionTitle,simpleFieldType:l.z.NUMBER};const E=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:z?z.normalizationField:v.normalizationField;let O=v.classBreakInfos&&v.classBreakInfos.length?v.classBreakInfos[0].symbol:(0,l.T)(p,m,h);"picture-marker"===O.type&&(O=(0,l.T)(p,m,h));const V=v.defaultSymbol,y=v.defaultLabel;let S=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfo||"manual"===b.classificationMethod&&!e.theme||"equal-interval"===b.classificationMethod)&&(S=!0);const T=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:S?void 0:z?null==I?void 0:I.minSliderValue:v.classBreakInfos[0].minValue,k=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:S?void 0:z?null==I?void 0:I.maxSliderValue:v.classBreakInfos[v.classBreakInfos.length-1].maxValue,B=e.theme?e.theme:I?I.theme:"high-to-low",M="below"===(null==I?void 0:I.theme),F="below"===B,w=F&&!M||!F&&M;let C=e.colorScheme||(0,l.Q)(B);const R={layer:p,view:m,field:g.field,valueExpression:g.expression,valueExpressionTitle:g.expressionTitle,theme:B,colorScheme:C,normalizationField:E,minValue:T,maxValue:k,outlineOptimizationEnabled:!u&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!x.sizeOutlineVisVar),sizeOptimizationEnabled:!u&&((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!x.sizeAutoVisVar),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==z?void 0:z.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(a=v.legendOptions)||void 0===a?void 0:a.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!v.defaultSymbol,forBinning:"binning"===(null===(r=p.featureReduction)||void 0===r?void 0:r.type)&&t};return f.ColorCreator.createContinuousRenderer(R).then((i=>{if(e.discardMinMax){const e=(0,l.a)(v,"color"),n=(0,l.a)(i.renderer,"color");e.stops.forEach(((e,i)=>e.value=n.stops[i].value))}if((0,l.o)(x,i.renderer),O&&i.renderer.classBreakInfos&&i.renderer.classBreakInfos.length&&(i.renderer.classBreakInfos[0].symbol=O),V&&(i.renderer.defaultSymbol=V,i.renderer.defaultLabel=y),w&&C&&z){const e=(0,l.a)(i.renderer,"color"),n=z.stops.length-1;e.stops.forEach(((e,i)=>e.color=z.stops[n-i].color))}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){var i,n;const{layer:a,mapImageSublayer:r,mapView:s,modules:t}=l.s,d=a;e=e||{};const u=(0,l.j)(d),m=(0,l.g)(),c=(0,l.a)(u,"color");if(c&&e.fieldInfos&&e.fieldInfos[0]&&e.fieldInfos[0].field==c.field&&(delete e.fieldInfos,(0,l.S)(e)))return Promise.resolve({renderer:u.clone()});const f=(0,l.p)(u),p=(0,l.t)(u,"color"),v=e.startTime?e.startTime:p.startTime,b=e.endTime?e.endTime:p.endTime,h=u.classBreakInfos&&u.classBreakInfos.length?u.classBreakInfos[0].symbol:(0,l.T)(d,s,m),z=u.defaultSymbol,x=u.defaultLabel;let I=!1;(e.startTime||e.endTime||e.units||e.fieldInfo)&&(I=!0);const g=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:I?void 0:p?p.minSliderValue:u.classBreakInfos[0].minValue,E=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:I?void 0:p?p.maxSliderValue:u.classBreakInfos[u.classBreakInfos.length-1].maxValue,O=e.theme?e.theme:p?p.theme:"high-to-low",V={layer:d,view:s,startTime:v,endTime:b,unit:e.units?e.units:p.units,theme:O,colorScheme:e.colorScheme||(0,l.Q)(O),minValue:g,maxValue:E,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!f.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!f.sizeAutoVisVar),legendOptions:e.legendOptions?e.legendOptions.toJSON():I?void 0:(null===(i=null==c?void 0:c.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=u.legendOptions)||void 0===n?void 0:n.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!u.defaultSymbol};return t.ColorCreator.createAgeRenderer(V).then((i=>{if(e.discardMinMax){const e=(0,l.a)(u,"color"),n=(0,l.a)(i.renderer,"color");e.stops.forEach(((e,i)=>e.value=n.stops[i].value))}return(0,l.t)(i.renderer,"color").field=p.field,(0,l.o)(f,i.renderer),h&&i.renderer.classBreakInfos&&i.renderer.classBreakInfos.length&&(i.renderer.classBreakInfos[0].symbol=h),z&&(i.renderer.defaultSymbol=z,i.renderer.defaultLabel=x),Promise.resolve(i)}),(e=>Promise.reject(e)))}function d(e){var i;const{layer:n,useFeatureReduction:a,mapImageSublayer:r,mapView:s,modules:t}=l.s,d=n;e=e||{};const u=(0,l.j)(d),m=u.authoringInfo||{},c=(0,l.a)(u,"color");if(!c&&e.fieldInfo&&e.fieldInfo.field==u.field&&e.fieldInfo.expression==u.valueExpression&&e.normalizationField===u.normalizationField&&(delete e.fieldInfo,(0,l.S)(e)))return Promise.resolve({renderer:u.clone()});const f=(0,l.t)(u,"color"),p=(0,l.p)(u),v={field:u.field,expression:u.valueExpression,expressionTitle:u.valueExpressionTitle,simpleFieldType:l.z.NUMBER};let b=e.fieldInfos?e.fieldInfos[0]:c?{field:c.field,expression:c.valueExpression,expressionTitle:c.valueExpressionTitle,simpleFieldType:l.z.NUMBER}:v;const h=void 0!==e.normalizationField?e.normalizationField:c?c.normalizationField:u.normalizationField;let z;if(u.classBreakInfos&&u.classBreakInfos.length){const e=u.classBreakInfos[0].symbol;["simple-fill","simple-marker","simple-line","cim"].indexOf(e.type)>-1&&(z=e)}const x=u.defaultSymbol,I=u.defaultLabel,g=e.classificationMethod?e.classificationMethod:m.classificationMethod&&"manual"!==m.classificationMethod?m.classificationMethod:"natural-breaks",E="standard-deviation"===g?e.standardDeviationInterval?e.standardDeviationInterval:m.standardDeviationInterval?m.standardDeviationInterval:1:void 0;let O=!0;!e.classificationMethod||e.classificationMethod===m.classificationMethod||"standard-deviation"!==e.classificationMethod&&"standard-deviation"!==m.classificationMethod||(O=!1);let V=!1;void 0===e.normalizationField&&(0,l.A)(b,v)&&"equal-interval"===g||(V=!0);const y=(0,o.i)(e.min)?e.min:V?void 0:f?f.minSliderValue:u.classBreakInfos[0].minValue,S=(0,o.i)(e.max)?e.max:V?void 0:f?f.maxSliderValue:u.classBreakInfos[u.classBreakInfos.length-1].maxValue;let T=e.colorScheme||(0,l.Q)();return T||(T=(0,l.Q)("above-and-below")),t.ColorCreator.createClassBreaksRenderer({layer:d,view:s,field:b.field,valueExpression:b.expression,valueExpressionTitle:b.expressionTitle,normalizationField:h,classificationMethod:g,standardDeviationInterval:E,numClasses:(0,o.i)(e.numClasses)?e.numClasses:c||!O?4:u.classBreakInfos.length,minValue:y,maxValue:S,colorScheme:T,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!p.sizeOutlineVisVar),legendOptions:e.legendOptions||u.legendOptions,defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&a}).then((e=>((0,l.o)(p,e.renderer),p.sizeAutoVisVar&&(e.renderer.visualVariables=e.renderer.visualVariables||[],e.renderer.visualVariables.push(p.sizeAutoVisVar)),z&&e.renderer.classBreakInfos&&e.renderer.classBreakInfos.map((e=>{const i=z.clone();(0,l.v)(i,(0,l.w)(e.symbol)),e.symbol=i})),x&&(e.renderer.defaultSymbol=x,e.renderer.defaultLabel=I),Promise.resolve(e))),(e=>Promise.reject(e)))}function u(){const{layer:e,modules:i}=l.s;return(0,l.j)(e).classBreakInfos.map((e=>({min:e.minValue,max:e.maxValue,color:(0,l.w)(e.symbol)?(0,l.w)(e.symbol).clone():new i.esriColor({r:255,g:255,b:255,a:1})})))}function m(e){const{layer:i}=l.s,n=(0,l.j)(i).clone(),o=(0,l.g)();if(["color","color-size","color-size-age","color-age","color-age-size"].indexOf(o)>-1&&void 0===e.normalizationField){let i;const a=(0,l.a)(n,"color");if(i=a?["color-age","color-age-size"].indexOf(o)>-1?{field:(0,l.t)(n,"color").field}:{field:a.field,expression:a.valueExpression,expressionTitle:a.valueExpressionTitle}:{field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle},(0,l.A)(e.fieldInfos[0],i))return!0}return!1}}}]);