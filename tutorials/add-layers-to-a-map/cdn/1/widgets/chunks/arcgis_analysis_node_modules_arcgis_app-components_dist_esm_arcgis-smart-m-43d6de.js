/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-43d6de.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-43d6de"],{82152:(e,t,s)=>{s.r(t),s.d(t,{arcgis_smart_mapping_gamma_slider:()=>o,arcgis_smart_mapping_stretch_type_button:()=>a});var n=s(35110),r=s(59503),i=(s(21104),s(2137),s(88703));s(86587),s(63280),s(1984),s(23505),s(89393),s(73838);const o=class{constructor(e){(0,n.r)(this,e),this.watchHandles=[],this.gamma=void 0,this.rendererType=void 0}componentDidLoad(){const{config:e}=r.s;this.hostElement.shadowRoot.firstElementChild.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${e.jsapiUrl}/themes/light/main.css" />`)}render(){var e;const{modules:t}=r.s;if(!this.slider){const s={min:-1e3,max:1e3,values:[this.parseGammaValue(this.gamma.toString())],visibleElements:{labels:!0,rangeLabels:!0},rangeLabelInputsEnabled:!1,precision:3,labelInputsEnabled:!0};s.labelFormatFunction=e=>this.formatGammaValue(e),s.inputFormatFunction=e=>this.formatGammaValue(e),s.inputParseFunction=e=>this.parseGammaValue(e),null===(e=this.watchHandles[0])||void 0===e||e.remove(),this.watchHandles[0]=void 0,this.slider=new t.Slider(s)}return(0,n.h)("div",{class:"slider slider-bottom-label",ref:e=>{e&&this.afterGammaSliderCreate(e)}})}afterGammaSliderCreate(e){if(this.slider.container)e.append(this.slider.container);else{const t=document.createElement("div");e.append(t),this.slider.container=t}this.createGammaSliderChangeEvents()}createGammaSliderChangeEvents(){var e;null===(e=this.watchHandles[0])||void 0===e||e.remove(),this.watchHandles[0]=void 0,this.watchHandles.push(this.slider.watch("values",(0,i.d)((()=>this.handleGammaSliderValueChange()),300)))}handleGammaSliderValueChange(){const{layer:e}=r.s,t=e.renderer,s=this.formatGammaValue(this.slider.values[0]);t.gamma="raster-stretch"===this.rendererType?[s]:new Array(3).fill(s),t.useGamma=!0,(0,r.ab)()}formatGammaValue(e){return parseFloat(Math.exp(e/1e3*Math.log(10)).toFixed(2))}parseGammaValue(e){const t=parseFloat(e);return Math.log(t)/Math.log(10)*1e3}get hostElement(){return(0,n.d)(this)}};o.style=".slider{height:60px;background-color:transparent;position:relative;width:90%;margin:0 auto 0 auto}.esri-slider__content{margin-bottom:30px}.slider-bottom-label .esri-slider__max,.slider-bottom-label .esri-slider__min{width:-moz-fit-content;width:fit-content;position:absolute;bottom:0}.slider-bottom-label .esri-slider__max{right:-9px;text-align:right}.slider-bottom-label .esri-slider__min{left:-9px;text-align:left}";const a=class{constructor(e){(0,n.r)(this,e),this.arcgisSmartMappingStretchTypeButtonChange=(0,n.c)(this,"arcgisSmartMappingStretchTypeButtonChange",7),this.arcgisSmartMappingStretchTypeButtonBeforeOpen=(0,n.c)(this,"arcgisSmartMappingStretchTypeButtonBeforeOpen",7),this.stretchTypeInfos=[],this.open=!1}async setFocus(){this.buttonNode.focus()}componentWillLoad(){this.populateStretchTypeInfo(),this.setSelection()}componentWillUpdate(){const{layer:e}=r.s,t=e.renderer,{stretchType:s}=t;this.selectedStretchTypeInfo.value!==s&&this.setSelection()}render(){const{strings:e}=r.s;return(0,n.h)(n.H,null,(0,n.h)("calcite-label",null,e.stretchTypeButton.stretchType,(0,n.h)("div",{class:"stretch-type-button",role:"button",tabindex:"0","aria-haspopup":"true","aria-label":e.stretchTypeButton.stretchType,ref:e=>this.buttonNode=e,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.openStretchTypeDropdown())},onClick:()=>this.openStretchTypeDropdown()},(0,n.h)("div",{class:"stretch-type-content"},(0,n.h)("div",{class:"stretch-type-button-text"},(0,n.h)("div",{class:"stretch-type-button-title"},this.selectedStretchTypeInfo.title),(0,n.h)("div",{class:"stretch-type-button-msg"},this.selectedStretchTypeInfo.msg)),(0,n.h)("div",null,(0,n.h)("calcite-icon",{scale:"s",icon:"chevron-down"}))))))}populateStretchTypeInfo(){const{strings:e}=r.s,t=e.stretchTypeButton.stretchTypeOptions,s=e.stretchTypeButton.stretchTypeOptionDescriptions;this.stretchTypeInfos.push({value:"none",title:t.none,msg:s.none,iconPath:null,selected:!1}),this.stretchTypeInfos.push({value:"min-max",title:t.minimumMaximum,msg:s.minimumMaximum,iconPath:null,selected:!1}),this.stretchTypeInfos.push({value:"percent-clip",title:t.percentClip,msg:s.percentClip,iconPath:null,selected:!1}),this.stretchTypeInfos.push({value:"standard-deviation",title:t.standardDeviation,msg:s.standardDeviation,iconPath:null,selected:!1})}setSelection(){const{layer:e}=r.s,t=e.renderer;this.selectedStretchTypeInfo=this.stretchTypeInfos.find((e=>e.value===t.stretchType)),this.stretchTypeInfos.forEach((e=>{e.selected=e.value===this.selectedStretchTypeInfo.value}))}closePopover(){var e;this.open=!1,this.dropdownNode&&(null===(e=this.dropdownNode.parentNode)||void 0===e||e.removeChild(this.dropdownNode),this.dropdownNode=null,this.buttonNode.classList.remove("active"))}openStretchTypeDropdown(){if(this.open)this.open=!1;else{this.arcgisSmartMappingStretchTypeButtonBeforeOpen.emit();const e=document.createElement("arcgis-smart-mapping-dropdown");e.buttonNode=this.buttonNode,e.infos=this.stretchTypeInfos,this.dropdownNode=e,e.addEventListener("arcgisSmartMappingDropdownClose",(e=>{this.closePopover(),"Escape"===e.detail&&this.setFocus()})),e.addEventListener("arcgisSmartMappingDropdownChange",(e=>this.setStretchType(e.detail))),this.buttonNode.classList.add("active"),document.body.appendChild(e),this.open=!0}}setStretchType(e){const{layer:t}=r.s,s=t.renderer,{stretchType:n}=s,i=e.value;if(i===n)return this.closePopover(),void setTimeout((()=>this.setFocus()),300);this.stretchTypeInfos.forEach((e=>{e.selected=e.value===i})),this.selectedStretchTypeInfo=e,this.arcgisSmartMappingStretchTypeButtonChange.emit(this.selectedStretchTypeInfo.value),this.closePopover(),setTimeout((()=>this.setFocus()),300)}get hostElement(){return(0,n.d)(this)}};a.style=".stretch-type-button{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.stretch-type-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.stretch-type-button:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.stretch-type-button:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.stretch-type-button.active{outline:1px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.stretch-type-content{display:flex;align-items:center;justify-content:space-between;width:100%}.stretch-type-button-text{display:inline-block;padding:0 10px}.stretch-type-button-title{font-weight:bold}.stretch-type-button-msg{font-size:80%;line-height:16px}"},88703:(e,t,s)=>{s.d(t,{a:()=>c,b:()=>p,c:()=>r,d:()=>n,e:()=>i,f:()=>h,g:()=>u,i:()=>o,m:()=>a,t:()=>l,u:()=>d});const n=(e,t)=>{let s,n="idle";const r=(...r)=>new Promise((i=>{switch(n){case"flushed":n="idle",s?(clearTimeout(s),i(e(...r))):i(null);break;case"invoked":clearTimeout(s),n="idle",i(e(...r));break;case"cancelled":clearTimeout(s),n="idle",i(null);break;default:s&&clearTimeout(s),n="pending",s=setTimeout((()=>(n="idle",i(e(...r)))),t)}}));return r.flush=function(...e){return n="flushed",r(...e)},r.invoke=function(...e){return n="invoked",r(...e)},r.cancel=function(...e){return n="cancelled",r(...e)},r.getStatus=function(){return n},r},r=(e,t)=>{let s;return(...n)=>new Promise((r=>{s||(s=setTimeout((()=>{clearTimeout(s),s=void 0,r(e(...n))}),t))}))};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function a(e,t){return await Promise.all([e,l(t)]),e}function l(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:s,data:n}=t(e);return[s,n]}))),h=(e,t)=>e.length===t.length&&e.reduce(((e,s)=>e&&t.indexOf(s)>-1),!0);function d(e,t){const s=[],n={};return e.forEach((e=>{const r=t(e);null==n[r]&&(n[r]=e,s.push(e))})),s}function p(e){const t={boolean:{},number:{},string:{}},s=[];return e.filter((e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(s.indexOf(e)>=0)&&s.push(e)}))}const u=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((s,n)=>e.slice(t*n,t+t*n)))}}]);