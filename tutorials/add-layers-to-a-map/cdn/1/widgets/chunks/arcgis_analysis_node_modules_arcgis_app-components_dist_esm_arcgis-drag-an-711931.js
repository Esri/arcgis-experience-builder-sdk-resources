/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-drag-an-711931.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-drag-an-711931"],{13545:(e,t,i)=>{i.r(t),i.d(t,{arcgis_drag_and_drop:()=>d});var r=i(35110),s=i(1984),l=i(37526),n=i(91659),a=i(31522);i(63280),i(86587),i(21104),i(73838),i(17752),i(56086),i(66913),i(46710),i(23505),i(70392);const o={append:120001300,default:120000456},d=class{constructor(e){(0,r.r)(this,e),this.arcgisDropSuccess=(0,r.c)(this,"arcgisDropSuccess",7),this.arcgisAlertActive=(0,r.c)(this,"arcgisAlertActive",7),this.arcgisDragOver=(0,r.c)(this,"arcgisDragOver",7),this.config=void 0,this.user=void 0,this.active=!0,this.alertMessage={title:""},this.alertActive=!1,this.error=!1,this.files=void 0,this.allowedExtensions=null,this.validTypes=null,this.dragOverNoticeMessage=void 0,this.insideModal=void 0,this.fullHeight=void 0,this.showHelpLinkOnError=!0,this.maxFileSize=void 0,this.helpIdType="default",this.isFolder=!1,this.dragOver=void 0}handleAlertChange(){var e,t;const{alertActive:i}=this;i?(window.dispatchEvent(new CustomEvent("calciteInternalAlertSync",{detail:{queue:[]}})),null===(e=this.el.shadowRoot.querySelector("#new-item-alert"))||void 0===e||e.setAttribute("active","")):null===(t=this.el.shadowRoot.querySelector("#new-item-alert"))||void 0===t||t.removeAttribute("active"),this.arcgisAlertActive.emit(i)}handleFileUpdate(){const{files:e,i18n:t,isFolder:i,user:r,config:s,validTypes:d,helpIdType:c}=this,{success:h,errorMessage:g}=function(e,t,i,r,s){var d,c;const{helpBase:h,helpMap:g,i18n:p,helpIdType:u}=s,{extension:v}=(0,l.s)(e[0]),{maxFileSize:f,allowedExtensions:m}=r;let x,w=!1;const y=null===(d=null==m?void 0:m.includes(v))||void 0===d||d,b=Object.keys(e).some((t=>{const{extension:i}=(0,l.s)(e[t]);return["shp","shx","dbf","prj"].includes(i)})),_=null!==(c=r.validationTypes)&&void 0!==c?c:null,k=(0,a.f)((0,l.s)(e[0]).extension,_)[0],O=k&&(k.appendUploadFormat||k.allowAddDirect||!k.orgOnly||!(0,n.d)(i));if(b)x={title:p.error.shapefileErrorTitle,message:p.error.shapefileErrorMessage,link:{text:p.error.shapefileErrorLink,path:`${h}${g[120002804]}`}};else if(e.length>1)x={title:p.error.multipleFilesErrorTitle,message:p.error.multipleFilesErrorMessage};else if(null!=f&&e[0].size>f){const e=f/1e6;x={message:p.error.maxSize.replace("${size}",e.toString())}}else if(O&&y)w=!0;else{const e=o[u];x=t?{message:p.error.folderError}:{title:p.error.unsupportedFileTypeTitle,link:{text:p.error.unsupportedFileTypeMessage,path:`${h}${g[e]}`}}}return{success:w,errorMessage:x}}(e,i,r,{allowedExtensions:this.allowedExtensions,maxFileSize:this.maxFileSize,validationTypes:d},{helpIdType:c,i18n:t,helpBase:s.helpBase,helpMap:s.helpMap});h?this.arcgisDropSuccess.emit(e[0]):(this.alertMessage=g,this.alertActive=!0)}handleDragOver(e){if(e.dataTransfer.types.includes("Files")){if(this.wellRef){const e=window.innerHeight,{y:t,bottom:i}=this.wellRef.getBoundingClientRect(),r=Math.max(t,0),s=Math.min(e,i);this.noticeRef.style.height=s-r+"px";const l=-Math.min(0,t);this.noticeRef.style.top=`${l}px`}e.preventDefault(),this.dragOver=!0,this.arcgisDragOver.emit(this.dragOver)}return!1}async componentWillLoad(){const e=await(0,s.g)(this.el);this.i18n=e[0]}render(){const{title:e,message:t,link:i}=this.alertMessage,{text:s,path:l}=Object.assign({},i),{active:n,dragOverNoticeMessage:a,dragOver:o,insideModal:d,fullHeight:c,showHelpLinkOnError:h}=this;return(0,r.h)("div",{ref:e=>this.wellRef=e,class:{hide:!n,"drag-and-drop-well":!0,dragging:this.dragOver,"full-height":c},onDragOver:n&&this.handleDragOver.bind(this),onDragLeave:()=>{this.dragOver=!1},onDrop:e=>{var t,i,r,s;if(!n)return;e.preventDefault(),this.alertActive=!1,this.dragOver=!1;const{files:l,items:a}=e.dataTransfer,o=null==a?void 0:a[0];this.isFolder=(null===(s=null!==(i=null===(t=o.webkitGetAsEntry)||void 0===t?void 0:t.call(o))&&void 0!==i?i:null===(r=null==o?void 0:o.getAsEntry)||void 0===r?void 0:r.call(o))||void 0===s?void 0:s.isDirectory)||!1,this.files=l}},(0,r.h)("slot",null),d?(0,r.h)("arcgis-new-item-alert",{id:"new-item-alert",kind:"danger",onAlertDismiss:()=>{this.alertActive=!1},active:!!this.alertActive,heading:e,description:t,link:{href:null==i?void 0:i.path,title:null==i?void 0:i.text}}):(0,r.h)("calcite-alert",{label:"",id:"new-item-alert",icon:"exclamation-mark-triangle",kind:"danger",onCalciteAlertClose:()=>{this.alertActive=!1},open:!!this.alertActive,tabIndex:this.alertActive?null:-1,ref:e=>{const t=e.shadowRoot.querySelector(".alert-queue-count");t&&(t.style.display="none")}},e&&(0,r.h)("div",{slot:"title"},e),t&&(0,r.h)("div",{slot:"message",class:"alert__message"},t),h&&i&&(0,r.h)("calcite-link",{slot:"link",target:"_blank",href:l,class:"alert__link"},s)),(0,r.h)("div",{class:"notice-container",ref:e=>this.noticeRef=e},a&&(0,r.h)("calcite-notice",{icon:"upload-to",open:o,scale:"m",width:"auto"},(0,r.h)("div",{slot:"message"},a))))}get el(){return(0,r.d)(this)}static get watchers(){return{alertActive:["handleAlertChange"],files:["handleFileUpdate"]}}};d.style='.drag-and-drop-well{position:relative}.drag-and-drop-well ::slotted(*){transition:all 200ms ease-in-out;position:relative}.drag-and-drop-well ::slotted(*):before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background-color:rgba(0, 121, 193, 0) !important;pointer-events:none;transition:background-color 200ms ease-in-out !important;z-index:2}.dragging ::slotted(*){border-color:#007ac2 !important}.dragging ::slotted(*):before{border-color:#007ac2 !important;background-color:rgba(0, 121, 193, 0.05) !important}.notice-container{display:flex;align-items:center;justify-content:center;position:absolute;top:0px;left:0px;right:0px;pointer-events:none;z-index:10}.alert__message{display:block;line-height:1.375}.alert__link{display:inline}.full-height{height:100%}'},37526:(e,t,i)=>{i.d(t,{a:()=>l,f:()=>d,g:()=>o,s:()=>n,v:()=>a});var r=i(17752),s=i(15059);function l(e,t){const i=/(?:\.([^.]+))?$/;let r=e.replace(/^.*(\\|\/|:)/,""),l=r&&i.exec(r)[1]?i.exec(r)[1].toLowerCase():"",n="";if(r.indexOf(".rft.")>-1){const[e,t]=r.split(".rft.");l=`rft.${t}`,n=e}return r&&!n&&(n=-1===r.lastIndexOf(".")?r:r.substring(0,r.lastIndexOf("."))),n=n.replace(/\.|-/g,"_"),t&&(n=function(e){return`${e}_${(0,s.g)()}`}(n),r=`${n}.${l}`),{title:n,fileName:r,extension:l}}function n(e,t){return l(e.name,!!t)}function a(e,t){let i=e;const r=e.lastIndexOf("\\");return r>-1&&(i=i.substring(r+1,i.length)),i.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function o(e){return r.a[e]?r.a[e]:r.a[Object.keys(r.a).find((t=>r.a[t].type===e))]}function d(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},15059:(e,t,i)=>{i.d(t,{g:()=>r});const r=()=>[2,1,1,1,3].map((e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},31522:(e,t,i)=>{i.d(t,{a:()=>o,f:()=>l,i:()=>a,m:()=>n});var r=i(88703),s=i(17752);function l(e,t){let i;i=t?t.map((e=>e.type)):Object.keys(s.a);let r=[];return i.forEach((t=>{var i;(null===(i=s.a[t].fileExt)||void 0===i?void 0:i.indexOf(e))>=0&&r.push(s.a[t])})),r}function n(e){return e?(0,r.b)(e.flatMap((e=>{var t;return null===(t=s.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const a=e=>e/1024/1024>50,o=e=>e/1024/1024>20}}]);