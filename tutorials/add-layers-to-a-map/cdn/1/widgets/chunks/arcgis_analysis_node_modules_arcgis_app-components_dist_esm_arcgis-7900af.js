/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-7900af.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-7900af"],{41525:(e,t,i)=>{i.r(t),i.d(t,{arcgis_sketch_actions_popover:()=>h,arcgis_sketch_features:()=>g});var s=i(35110),o=i(23505),n=i(21104),c=i(1984),a=i(22250),r=i(88703);i(73838),i(63280),i(86587);const l=(0,o.c)({strings:null,snappingOptions:null,snappingSessionStorageIds:null}).state,h=class{constructor(e){(0,s.r)(this,e),this.arcgisSketchActionsBulkEdit=(0,s.c)(this,"arcgisSketchActionsBulkEdit",7),this.arcgisSketchActionsBulkDuplicate=(0,s.c)(this,"arcgisSketchActionsBulkDuplicate",7),this.arcgisSketchActionsCopyToNewSketchLayer=(0,s.c)(this,"arcgisSketchActionsCopyToNewSketchLayer",7),this.arcgisSketchActionsBulkDelete=(0,s.c)(this,"arcgisSketchActionsBulkDelete",7),this.arcgisSketchActionsPopoverClose=(0,s.c)(this,"arcgisSketchActionsPopoverClose",7),this.referenceElement=void 0,this.selectedGraphics=void 0}async componentWillLoad(){this.strings=l.strings}async setFocus(){setTimeout((()=>{var e;return null===(e=this.editNode)||void 0===e?void 0:e.setFocus()}),300)}render(){var e;const{strings:t}=this;return(null===(e=this.selectedGraphics)||void 0===e?void 0:e.length)?(0,s.h)(s.H,null,(0,s.h)("calcite-popover",{class:"js-app-flyout",placement:"leading-start",offsetDistance:10,offsetSkidding:80,pointerDisabled:!0,label:t.edit,triggerDisabled:!0,referenceElement:this.referenceElement,open:!0,onCalcitePopoverClose:()=>this.arcgisSketchActionsPopoverClose.emit()},(0,s.h)("calcite-panel",{heading:t.actions},(0,s.h)("calcite-action",{label:t.edit,text:t.edit,textEnabled:!0,onClick:()=>this.arcgisSketchActionsBulkEdit.emit({graphics:this.selectedGraphics}),ref:e=>this.editNode=e}),(0,s.h)("calcite-action",{label:t.duplicate,text:t.duplicate,textEnabled:!0,onClick:()=>this.arcgisSketchActionsBulkDuplicate.emit()}),(0,s.h)("calcite-action",{label:t.copyToNewSketchLayer,text:t.copyToNewSketchLayer,textEnabled:!0,onClick:()=>this.arcgisSketchActionsCopyToNewSketchLayer.emit()}),(0,s.h)("calcite-action",{label:t.delete,text:t.delete,textEnabled:!0,onClick:()=>this.arcgisSketchActionsBulkDelete.emit()})))):null}get hostElement(){return(0,s.d)(this)}};class d{constructor(e,t,i,s,o){this.mapNotesLayer=e,this.mapView=t,this.sketchViewModelPoint=new i({layer:this.mapNotesLayer.pointLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:s}),this.sketchViewModelPoint.on("update",(e=>o(e))),this.sketchViewModelLine=new i({layer:this.mapNotesLayer.polylineLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:s}),this.sketchViewModelLine.on("update",(e=>o(e))),this.sketchViewModelPolygon=new i({layer:this.mapNotesLayer.polygonLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:s}),this.sketchViewModelPolygon.on("update",(e=>o(e))),this.sketchViewModelText=new i({layer:this.mapNotesLayer.textLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:s}),this.sketchViewModelText.on("update",(e=>o(e)))}cancel(){this.cancelPoint(),this.cancelLine(),this.cancelPolygon(),this.cancelText()}delete(){this.deletePoint(),this.deleteLine(),this.deletePolygon(),this.deleteText()}duplicate(){this.duplicatePoint(),this.duplicateLine(),this.duplicatePolygon(),this.duplicateText()}destroy(){this.destroyPoint(),this.destroyLine(),this.destroyPolygon(),this.destroyText()}updatePoint(e){this.sketchViewModelPoint.update(e)}cancelPoint(){this.sketchViewModelPoint.cancel()}deletePoint(){this.sketchViewModelPoint.delete()}duplicatePoint(){this.sketchViewModelPoint.duplicate()}destroyPoint(){this.sketchViewModelPoint.destroy()}updateLine(e){this.sketchViewModelLine.update(e)}cancelLine(){this.sketchViewModelLine.cancel()}deleteLine(){this.sketchViewModelLine.delete()}duplicateLine(){this.sketchViewModelLine.duplicate()}destroyLine(){this.sketchViewModelLine.destroy()}updatePolygon(e){this.sketchViewModelPolygon.update(e)}cancelPolygon(){this.sketchViewModelPolygon.cancel()}deletePolygon(){this.sketchViewModelPolygon.delete()}duplicatePolygon(){this.sketchViewModelPolygon.duplicate()}destroyPolygon(){this.sketchViewModelPolygon.destroy()}updateText(e){this.sketchViewModelText.update(e)}cancelText(){this.sketchViewModelText.cancel()}deleteText(){this.sketchViewModelText.delete()}duplicateText(){this.sketchViewModelText.duplicate()}destroyText(){this.sketchViewModelText.destroy()}}function p(e){var t,i;switch(null===(t=null==e?void 0:e.geometry)||void 0===t?void 0:t.type){case"point":return"text"===(null===(i=null==e?void 0:e.symbol)||void 0===i?void 0:i.type)?"text":"point";case"polyline":return"polyline";default:return"polygon"}}const u=async(e,t)=>{const i=await async function(e){const[t]=await(0,n.l)(["esri/core/CollectionFlattener"]),{map:i}=e,{allLayers:s}=i,o=new t({getCollections:()=>[s],getChildrenFunction:e=>"layers"in e?e.layers:"sublayers"in e?e.sublayers:null,itemFilterFunction:e=>!e.isTable});return[...new Set(o.toArray())]}(e);return i.filter((e=>t.includes(e.id))).map((e=>({layer:e,enabled:!0})))},g=class{constructor(e){(0,s.r)(this,e),this.arcgisSketchFeaturesAddSketch=(0,s.c)(this,"arcgisSketchFeaturesAddSketch",7),this.arcgisSketchFeaturesEditFeature=(0,s.c)(this,"arcgisSketchFeaturesEditFeature",7),this.arcgisSketchFeaturesEditMultipleFeatures=(0,s.c)(this,"arcgisSketchFeaturesEditMultipleFeatures",7),this.arcgisSketchFeaturesCopyToNewSketchLayer=(0,s.c)(this,"arcgisSketchFeaturesCopyToNewSketchLayer",7),this.arcgisSketchFeaturesUpdated=(0,s.c)(this,"arcgisSketchFeaturesUpdated",7),this.graphicChange=[],this.graphicUpdate=[],this.listItemNodes=[],this.selectedGraphics=[],this.duplicatedGraphicIndices=[],this.graphicsListUpdate=!1,this.numberOfActiveSVMs=0,this.currentlyRenderingSymbolPreviews=!1,this.onGraphicUpdate=e=>{if(this.listItemNodes=this.listItemNodes.slice(0,this.graphics.length),"start"===e.state)if(this.graphicsListUpdate||this.numberOfActiveSVMs)this.listItemNodes.forEach(((e,t)=>this.listItemNodes[t].selected=(0,r.i)(this.selectedGraphics.find((e=>e.index===t))))),this.graphicsListUpdate=!1,this.numberOfActiveSVMs-=1;else{let t=!1;this.selectedGraphics=[],this.graphics.forEach(((i,s)=>{t||JSON.stringify(i.toJSON())!==JSON.stringify(e.graphics[0].toJSON())?this.listItemNodes[s]&&(this.listItemNodes[s].selected=!1):(t=!0,this.selectedGraphics.push({index:s,graphic:i}),this.listItemNodes[s]&&(this.listItemNodes[s].selected=!0),this.addActionsPopover())}))}"complete"===e.state&&this.arcgisSketchFeaturesUpdated.emit()},this.pickListItem=(e,t)=>{var i;return(0,s.h)("calcite-list-item",{id:`graphic-${t}`,label:(null===(i=null==e?void 0:e.attributes)||void 0===i?void 0:i.title)||this.getStringFromType(e),onClick:()=>this.handleSelection(),onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.handleSelection())},ref:e=>this.listItemNodes.push(e)},(0,s.h)("div",{slot:"content-start",id:`image-${t}`}),this.showEditFeature?(0,s.h)("calcite-action",{slot:"actions-end",text:this.strings.edit,title:this.strings.edit,scale:"s",icon:"pencil",onClick:i=>{i.preventDefault(),i.stopPropagation(),this.selectedGraphics.push({index:t,graphic:e}),this.arcgisSketchFeaturesEditFeature.emit({layer:this.layer,feature:e})}}):null)},this.layer=void 0,this.mapView=void 0,this.showAddSketch=!0,this.showEditFeature=!0,this.snappingSessionStorageIds=void 0,this.open=!0,this.graphics=void 0}sketchUpdatedHandler(e){e.stopPropagation(),(0,s.f)(this.hostElement)}async componentWillLoad(){[this.strings]=await(0,c.g)(this.hostElement),await this.loadAllModules(),this.snappingOptions=await(async(e,t,i,s)=>{const o=(e=>e&&((0,a.b)(e.webmap,!0)||(0,a.b)(e.current,!0))||null)(e)||{enabled:!0,selfEnabled:!0,featureEnabled:!0,featureSourcesIds:[t.id]};return new s({enabled:o.enabled,selfEnabled:o.selfEnabled,featureEnabled:o.featureEnabled,featureSources:await u(i,o.featureSourcesIds)})})(this.snappingSessionStorageIds,this.layer,this.mapView,this.SnappingOptions),this.svModel=new d(this.layer,this.mapView,this.SketchViewModel,this.snappingOptions,this.onGraphicUpdate),this.combineMapNotesGraphics(),l.strings=this.strings,l.snappingOptions=this.snappingOptions,l.snappingSessionStorageIds=this.snappingSessionStorageIds}componentDidLoad(){this.watchForChangesToMapNotesLayer(),this.watchForGraphicSelectionOnClick()}async componentDidRender(){var e,t,i;if(!this.currentlyRenderingSymbolPreviews){this.currentlyRenderingSymbolPreviews=!0;for(let s=0;s<this.graphics.length;s++){const o=this.hostElement.shadowRoot.getElementById(`image-${s}`);o.textContent="",await this.symbolUtils.renderPreviewHTML(this.graphics[s].symbol,Object.assign({node:o,scale:!0,maxSize:20,size:{width:20,height:"polyline"===this.graphics[s].geometry.type?6:20}},"text"===(null===(e=this.graphics[s].symbol)||void 0===e?void 0:e.type)&&{overrideText:(null===(i=null===(t=this.graphics[s].symbol)||void 0===t?void 0:t.text)||void 0===i?void 0:i[0])||this.strings.textPreview}))}this.currentlyRenderingSymbolPreviews=!1}}componentDidUpdate(){this.duplicatedGraphicIndices.length&&(this.listItemNodes.forEach(((e,t)=>this.listItemNodes[t].selected=this.duplicatedGraphicIndices.includes(t))),this.selectedGraphics=[],this.listItemNodes.forEach(((e,t)=>{e.selected&&this.selectedGraphics.push({index:t,graphic:this.graphics[t]})})),this.duplicatedGraphicIndices=[])}disconnectedCallback(){var e;this.graphicChange.forEach((e=>null==e?void 0:e.remove())),this.graphicUpdate.forEach((e=>null==e?void 0:e.remove())),this.unselectAllGraphics(),null===(e=this.hitTestHandle)||void 0===e||e.remove(),this.hitTestHandle=void 0,this.svModel.cancel(),this.svModel.destroy()}async setFocus(){this.addFeatureNode.setFocus()}async done(){var e;(null===(e=this.snappingSessionStorageIds)||void 0===e?void 0:e.current)&&((e,t)=>{const i=[...new Set([...e.featureSources.filter((e=>e.enabled)).map((e=>e.layer.id))])],s={enabled:e.enabled,selfEnabled:e.selfEnabled,featureEnabled:e.featureEnabled,featureSourcesIds:i};(0,a.a)(t,s,!0)})(this.snappingOptions,this.snappingSessionStorageIds.current),this.svModel.destroy(),this.mapView.popupEnabled=!0}async loadAllModules(){[this.reactiveUtils,this.symbolUtils,this.SketchViewModel,this.SnappingOptions,this.drawUtils]=await(0,n.l)(["esri/core/reactiveUtils","esri/symbols/support/symbolUtils","esri/widgets/Sketch/SketchViewModel","esri/views/interactive/snapping/SnappingOptions","esri/views/draw/support/drawUtils"])}watchForChangesToMapNotesLayer(){for(const e of[this.layer.pointLayer,this.layer.polylineLayer,this.layer.polygonLayer,this.layer.textLayer]){const t=this.reactiveUtils.on((()=>e.graphics),"change",(()=>{this.graphicsListUpdate||this.combineMapNotesGraphics()}));this.graphicChange.push(t);const i=this.reactiveUtils.on((()=>e),"graphic-update",(e=>{"geometry"!==(null==e?void 0:e.property)&&this.combineMapNotesGraphics()}));this.graphicUpdate.push(i)}}combineMapNotesGraphics(){this.graphics=[...this.layer.pointLayer.graphics,...this.layer.polylineLayer.graphics,...this.layer.polygonLayer.graphics,...this.layer.textLayer.graphics]}getStringFromType(e){var t,i;switch(null===(t=null==e?void 0:e.geometry)||void 0===t?void 0:t.type){case"point":return"text"===(null===(i=null==e?void 0:e.symbol)||void 0===i?void 0:i.type)?this.strings.text:this.strings.point;case"polyline":return this.strings.line;case"polygon":return this.strings.polygon;default:return this.strings.point}}addActionsPopover(){this.actionsPopoverNode||(this.actionsPopoverNode=document.createElement("arcgis-sketch-actions-popover"),this.actionsPopoverNode.referenceElement=this.blockNode,this.actionsPopoverNode.selectedGraphics=this.selectedGraphics,this.actionsPopoverNode.addEventListener("arcgisSketchActionsBulkEdit",(e=>{this.removeActionsPopover(),this.unselectAllGraphics();const t=e.detail.graphics.map((e=>e.graphic));this.arcgisSketchFeaturesEditMultipleFeatures.emit({features:t})})),this.actionsPopoverNode.addEventListener("arcgisSketchActionsBulkDuplicate",(()=>{this.svModel.duplicate(),this.offsetDuplicatedFeatures(),this.combineMapNotesGraphics();const e=this.selectedGraphics.map((e=>e.graphic));this.duplicatedGraphicIndices=[],e.forEach((e=>{let t=!1;this.graphics.forEach(((i,s)=>{t||JSON.stringify(i.toJSON())!==JSON.stringify(e.toJSON())||this.duplicatedGraphicIndices.includes(s)||(this.duplicatedGraphicIndices.push(s),t=!0)}))}))})),this.actionsPopoverNode.addEventListener("arcgisSketchActionsCopyToNewSketchLayer",(()=>{const e=this.selectedGraphics.map((e=>e.graphic));this.arcgisSketchFeaturesCopyToNewSketchLayer.emit({features:e})})),this.actionsPopoverNode.addEventListener("arcgisSketchActionsBulkDelete",(()=>{this.removeActionsPopover(),this.unselectAllGraphics(),this.svModel.delete(),this.combineMapNotesGraphics(),this.graphicsListUpdate=!1,this.numberOfActiveSVMs=0})),this.actionsPopoverNode.addEventListener("arcgisSketchActionsPopoverClose",(()=>{this.removeActionsPopover(),this.svModel.cancel(),this.unselectAllGraphics(),this.graphicsListUpdate=!1,this.numberOfActiveSVMs=0})),document.body.appendChild(this.actionsPopoverNode)),this.actionsPopoverNode.setFocus()}removeActionsPopover(){var e,t;null===(t=null===(e=this.actionsPopoverNode)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeChild(this.actionsPopoverNode),this.actionsPopoverNode=null}unselectAllGraphics(e){this.selectedGraphics=[],this.listItemNodes.forEach((e=>{e&&(e.selected=!1)})),e||this.removeActionsPopover()}selectSingleGraphic(e){var t;switch(e.layer){case this.layer.pointLayer:this.svModel.updatePoint([e]);break;case this.layer.textLayer:this.svModel.updateText([e]);break;case this.layer.polylineLayer:this.svModel.updateLine([e]);break;case this.layer.polygonLayer:this.svModel.updatePolygon([e]);default:return}null===(t=this.graphics)||void 0===t||t.forEach(((t,i)=>{JSON.stringify(t.toJSON())===JSON.stringify(e.toJSON())&&(this.selectedGraphics.find((t=>JSON.stringify(t.graphic.toJSON())===JSON.stringify(e.toJSON())))||(this.selectedGraphics.push({index:i,graphic:t}),this.listItemNodes[i].selected=!0))})),this.addActionsPopover()}watchForGraphicSelectionOnClick(){var e;null===(e=this.hitTestHandle)||void 0===e||e.remove(),this.hitTestHandle=this.mapView.on("click",(async e=>{var t;const i=(await this.mapView.hitTest(e,{include:this.layer})).results;if(i.length){const e=["point","polyline","polygon"];i.sort((function(t,i){return e.indexOf(t.graphic.geometry.type)-e.indexOf(i.graphic.geometry.type)}));const t=i[0].graphic;this.unselectAllGraphics(!0),this.selectSingleGraphic(t)}else null===(t=this.listItemNodes)||void 0===t||t.forEach((e=>{e&&(e.selected=!1)})),this.removeActionsPopover(),this.unselectAllGraphics(),this.svModel.cancel(),this.graphicsListUpdate=!1,this.numberOfActiveSVMs=0}))}offsetDuplicatedFeatures(){this.selectedGraphics.forEach((e=>this.drawUtils.move(e.graphic.geometry,15*this.mapView.resolution,15*this.mapView.resolution)));let e=[],t=[],i=[],s=[];this.selectedGraphics.forEach((o=>{switch(p(o.graphic)){case"polyline":t=[...t,o.graphic];break;case"polygon":i=[...i,o.graphic];break;case"text":s=[...s,o.graphic];break;default:e=[...e,o.graphic]}}));const o=[e,t,i,s].filter((e=>e.length));this.numberOfActiveSVMs=o.length,this.graphicsListUpdate=!0,e.length&&this.svModel.updatePoint(e),t.length&&this.svModel.updateLine(t),i.length&&this.svModel.updatePolygon(i),s.length&&this.svModel.updateText(s)}render(){return this.listItemNodes=[],(0,s.h)(s.H,null,(0,s.h)("calcite-block",{ref:e=>this.blockNode=e,heading:this.strings.sketches,open:this.open,collapsible:!0,onCalciteBlockOpen:()=>{this.selectedGraphics.length&&this.addActionsPopover()},onCalciteBlockClose:()=>this.removeActionsPopover()},(0,s.h)("calcite-list",{selectionMode:"multiple",ref:e=>this.listNode=e},this.graphics.map(((e,t)=>this.pickListItem(e,t)))),this.showAddSketch?(0,s.h)("calcite-button",{ref:e=>this.addFeatureNode=e,iconStart:"pencil-mark",appearance:"transparent",width:"full",onClick:()=>{this.removeActionsPopover(),this.unselectAllGraphics(),this.svModel.cancel(),this.arcgisSketchFeaturesAddSketch.emit({layer:this.layer})}},this.strings.addSketch):null))}handleSelection(){this.listItemNodes=this.listItemNodes.filter((e=>(0,r.i)(e))),this.listItemNodes.forEach((e=>{const t=parseInt(e.id.split("-")[1]);e.selected?(this.graphicsListUpdate=!0,this.selectedGraphics.find((e=>e.index===t))||this.selectedGraphics.push({index:t,graphic:this.graphics[t]})):this.selectedGraphics=this.selectedGraphics.filter((e=>e.index!==t))})),this.selectedGraphics.length?(this.addActionsPopover(),this.actionsPopoverNode.selectedGraphics=this.selectedGraphics,(0,s.f)(this.actionsPopoverNode)):this.removeActionsPopover();let e=[],t=[],i=[],o=[];this.selectedGraphics.forEach((s=>{switch(p(s.graphic)){case"polyline":t=[...t,s.graphic];break;case"polygon":i=[...i,s.graphic];break;case"text":o=[...o,s.graphic];break;default:e=[...e,s.graphic]}}));const n=[e,t,i,o].filter((e=>e.length));this.numberOfActiveSVMs=n.length,this.graphicsListUpdate=!0,e.length?this.svModel.updatePoint(e):this.svModel.cancelPoint(),t.length?this.svModel.updateLine(t):this.svModel.cancelLine(),i.length?this.svModel.updatePolygon(i):this.svModel.cancelPolygon(),o.length?this.svModel.updateText(o):this.svModel.cancelText(),this.watchForGraphicSelectionOnClick(),this.selectedGraphics.length||(this.svModel.cancel(),this.combineMapNotesGraphics(),this.graphicsListUpdate=!1,this.numberOfActiveSVMs=0)}get hostElement(){return(0,s.d)(this)}};g.style=".actions-start-padding{padding:8px}"},88703:(e,t,i)=>{i.d(t,{a:()=>l,b:()=>p,c:()=>o,d:()=>s,e:()=>n,f:()=>h,g:()=>u,i:()=>c,m:()=>a,t:()=>r,u:()=>d});const s=(e,t)=>{let i,s="idle";const o=(...o)=>new Promise((n=>{switch(s){case"flushed":s="idle",i?(clearTimeout(i),n(e(...o))):n(null);break;case"invoked":clearTimeout(i),s="idle",n(e(...o));break;case"cancelled":clearTimeout(i),s="idle",n(null);break;default:i&&clearTimeout(i),s="pending",i=setTimeout((()=>(s="idle",n(e(...o)))),t)}}));return o.flush=function(...e){return s="flushed",o(...e)},o.invoke=function(...e){return s="invoked",o(...e)},o.cancel=function(...e){return s="cancelled",o(...e)},o.getStatus=function(){return s},o},o=(e,t)=>{let i;return(...s)=>new Promise((o=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,o(e(...s))}),t))}))};function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){return null!=e}async function a(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise((t=>setTimeout(t,e)))}const l=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:s}=t(e);return[i,s]}))),h=(e,t)=>e.length===t.length&&e.reduce(((e,i)=>e&&t.indexOf(i)>-1),!0);function d(e,t){const i=[],s={};return e.forEach((e=>{const o=t(e);null==s[o]&&(s[o]=e,i.push(e))})),i}function p(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let s=typeof e;return s in t?!t[s].hasOwnProperty(e)&&(t[s][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const u=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((i,s)=>e.slice(t*s,t+t*s)))},23505:(e,t,i)=>{i.d(t,{c:()=>a});var s=i(35110);const o=e=>!("isConnected"in e)||e.isConnected,n=((e,t)=>{let i;return(...e)=>{i&&clearTimeout(i),i=setTimeout((()=>{i=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(o))})(...e)}),2e3)}})(),c=e=>"function"==typeof e?e():e,a=(e,t)=>{const i=((e,t=((e,t)=>e!==t))=>{const i=c(e);let s=new Map(Object.entries(null!=i?i:{}));const o={dispose:[],get:[],set:[],reset:[]},n=()=>{var t;s=new Map(Object.entries(null!==(t=c(e))&&void 0!==t?t:{})),o.reset.forEach((e=>e()))},a=e=>(o.get.forEach((t=>t(e))),s.get(e)),r=(e,i)=>{const n=s.get(e);t(i,n,e)&&(s.set(e,i),o.set.forEach((t=>t(e,i,n))))},l="undefined"==typeof Proxy?{}:new Proxy(i,{get:(e,t)=>a(t),ownKeys:e=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>s.has(t),set:(e,t,i)=>(r(t,i),!0)}),h=(e,t)=>(o[e].push(t),()=>{((e,t)=>{const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.length--)})(o[e],t)});return{state:l,get:a,set:r,on:h,onChange:(t,i)=>{const s=h("set",((e,s)=>{e===t&&i(s)})),o=h("reset",(()=>i(c(e)[t])));return()=>{s(),o()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(h("set",t.set)),t.get&&e.push(h("get",t.get)),t.reset&&e.push(h("reset",t.reset)),t.dispose&&e.push(h("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{o.dispose.forEach((e=>e())),n()},reset:n,forceUpdate:e=>{const t=s.get(e);o.set.forEach((i=>i(e,t,t)))}}})(e,t);return i.use((()=>{if("function"!=typeof s.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const i=(0,s.g)();i&&((e,t,i)=>{const s=e.get(t);s?s.includes(i)||s.push(i):e.set(t,[i])})(e,t,i)},set:t=>{const i=e.get(t);i&&e.set(t,i.filter(s.f)),n(e)},reset:()=>{e.forEach((e=>e.forEach(s.f))),n(e)}}})()),i}},22250:(e,t,i)=>{i.d(t,{a:()=>l,b:()=>h,c:()=>n,d:()=>o,g:()=>a,r:()=>r,s:()=>c});var s=i(88703);function o(e,t,i,s){!function(e,t,i){let s=null==(i=i||{})?void 0:i.expires;if("number"==typeof s){const e=new Date,t=24*s*60*60*1e3;e.setTime(Date.now()+t),s=i.expires=e}"string"!=typeof s&&(null==s?void 0:s.toUTCString)&&(i.expires=s.toUTCString());let o,n=`${e}=${encodeURIComponent(t)}`;for(o in i){n+=`; ${o}`;const e=i[o];!0!==e&&(n+=`=${e}`)}document.cookie=n}(e,s?JSON.stringify(t):t,i)}function n(e,t){const i=function(e){const t=document.cookie,i=new RegExp(`(?:^|; )${(0,s.e)(e)}=([^;]*)`),o=t.match(i);return o?decodeURIComponent(o[1]):void 0}(e);return i&&t?JSON.parse(i):i}function c(e,t,i){window.localStorage.setItem(e,i?JSON.stringify(t):t)}function a(e,t){const i=window.localStorage.getItem(e);return i&&t?JSON.parse(i):i}function r(e){window.localStorage.removeItem(e)}function l(e,t,i){window.sessionStorage.setItem(e,i?JSON.stringify(t):t)}function h(e,t){const i=window.sessionStorage.getItem(e);return i&&t?JSON.parse(i):i}}}]);