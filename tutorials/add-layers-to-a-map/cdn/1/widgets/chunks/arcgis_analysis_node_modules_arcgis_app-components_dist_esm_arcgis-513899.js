/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899"],{96868:(e,t,r)=>{r.r(t),r.d(t,{arcgis_user_picker:()=>u});var i=r(35110),o=r(1984),s=r(15059),a=r(88703),n=r(70392),l=r(66913),c=r(51772),d=r(46710);r(63280),r(86587),r(21104),r(73838),r(58144),r(23505);const u=class{constructor(e){(0,i.r)(this,e),this.arcgisUserPickerSelect=(0,i.c)(this,"arcgisUserPickerSelect",7),this.arcgisUserPickerUpdate=(0,i.c)(this,"arcgisUserPickerUpdate",7),this.uniqueId=(0,s.g)(),this.scrollToActiveItem=()=>{var e;const t=null===(e=this.list)||void 0===e?void 0:e.querySelector(`li#${this.getActiveDescendantId()}`);if(!t||!this.list)return;const r=this.list.parentElement;(t.offsetTop<r.scrollTop||t.offsetTop+t.offsetHeight>r.offsetTop+r.offsetHeight)&&t.scrollIntoView({behavior:"smooth"})},this.keydownHandler=e=>{const{key:t}=e;switch(t){case"ArrowUp":e.preventDefault(),this.shiftActiveItemIndex(-1);break;case"ArrowDown":e.preventDefault(),this.shiftActiveItemIndex(1);break;case"Home":e.preventDefault(),this.activeItemIndex=0,this.scrollToActiveItem();break;case"End":if(!this.open)return;e.preventDefault(),this.activeItemIndex=this.getResultsLength()-1,this.scrollToActiveItem();break;case"Escape":this.reset(),e.preventDefault(),this.waitAndFocusButton();break;case"Enter":const t=this.getActiveUser();t&&(this.selectedUser=t,this.arcgisUserPickerSelect.emit(t),e.preventDefault(),this.reset(),this.waitAndFocusButton())}},this.searchUsers=async()=>{const{portal:e,query:t,search:r,group:i}=this,o=await async function({portal:e,query:t,searchTerm:r,group:i,config:o}){const s=r?`(${r}) `:"",a=`${(0,n.g)(e)}portals/self/users/search`,c=e.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav":"",d=((null==o?void 0:o.systemUsers)||[]).reduce(((e,t)=>`${e} -username: ${t}`),""),u=(null==a?void 0:a.includes("www.arcgis.com"))&&e.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,l.r)(a,Object.assign({num:100,sortField:"relevance"},function(e){return"enterprise"===(null==e?void 0:e.provider)&&!!(null==e?void 0:e.providerGroupName)}(i)?{name:s}:{q:`${s} ${null!=t?t:""} ${c} ${d}`}),u)}({portal:e,query:t,searchTerm:r,group:i});this.searchResults=o,this.arcgisUserPickerUpdate.emit(o),this.loading=!1,this.activeItemIndex=0,this.open=!0},this.inputHandler=(0,a.d)(this.searchUsers,300),this.renderUser=(e,t)=>{const{portal:r,selectedUser:o,activeItemIndex:s}=this,a=this.formatUniqueUserId(e);return(0,i.h)("li",{"aria-selected":(null==o?void 0:o.username)===e.username,key:a,id:a,role:"option",tabindex:"-1",class:{"list-item":!0,"list-item--active":s===t},onClick:()=>{this.selectedUser=e,this.arcgisUserPickerSelect.emit(e),this.reset()}},(0,i.h)("arcgis-user-avatar",{class:"user-avatar",user:e,scale:"m",portal:r,showName:!0,description:e.username}))},this.portal=void 0,this.query="",this.group=void 0,this.config=void 0,this.selectedUser=void 0,this.selection="single",this.status="idle",this.search="",this.activeItemIndex=0,this.searchResults=void 0,this.open=!1,this.loading=!0}async componentWillLoad(){var e;const t=await(0,o.g)(this.el);this.i18n=t[0],this.lang=t[1],null!==(e=this.config)&&void 0!==e||(this.config=null===d.c||void 0===d.c?void 0:d.c.config)}async setFocus(){var e;null===(e=this.input)||void 0===e||e.focus()}reset(){this.search="",this.activeItemIndex=0,this.open=!1,this.loading=!0}getResultsLength(){var e,t;return(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)||0}getActiveUser(){var e,t;return null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t[this.activeItemIndex]}getActiveDescendantId(){const e=this.getActiveUser();return this.formatUniqueUserId(e)}formatUniqueUserId(e){return(null==e?void 0:e.username)?`${e.username.replace(".","")}-${this.uniqueId}`:""}shiftActiveItemIndex(e){const t=this.getResultsLength(),r=(this.activeItemIndex+t+e)%t;this.activeItemIndex=r,this.scrollToActiveItem()}async waitAndFocusButton(){var e;await(0,a.t)(200),null===(e=this.button)||void 0===e||e.focus()}render(){var e;const{i18n:t,portal:r,selectedUser:o,referenceElement:s,uniqueId:n,open:l,loading:d,lang:u,status:h}=this;return(0,i.h)(i.H,null,(0,i.h)("div",{class:"wrapper"},l||!o?(0,i.h)("div",{class:"search-wrapper"},(0,i.h)("calcite-icon",{icon:"search",scale:"s",class:"search"}),(0,i.h)("label",{class:"screen-readers-only",htmlFor:`input-${n}`,id:`label-${n}`},t.selectUser),(0,i.h)("input",{ref:e=>this.input=e,class:"input",id:`input-${n}`,role:"combobox","aria-autocomplete":"none","aria-expanded":"false","aria-controls":`listbox-${n}`,"aria-activedescendant":this.getActiveDescendantId(),onInput:e=>{this.search=e.currentTarget.value,this.loading=!0,this.open=!0,this.inputHandler()},onBlur:async()=>{await(0,a.t)(300),this.open=!1},onFocus:()=>{!this.search&&this.searchResults||this.searchUsers()},onKeyDown:this.keydownHandler,placeholder:this.i18n.searchMembers,type:"text",value:this.search,onClick:e=>e.stopPropagation()}),!!this.search&&(0,i.h)("button",{class:"x","aria-label":this.i18n.clear,onClick:()=>{this.search="",this.searchUsers()},tabIndex:-1},(0,i.h)("calcite-icon",{icon:"x",scale:"m",class:"x--icon"}))):(0,i.h)("button",{class:{edit:!0,invalid:"invalid"===h},onClick:()=>{this.open=!0,this.searchUsers(),setTimeout((()=>{var e;null===(e=this.input)||void 0===e||e.focus()}),200)},"aria-label":o?t.editSelection.replace("${name}",(0,c.g)(o,u)):t.selectUser,ref:e=>this.button=e},o?(0,i.h)(i.F,null,(0,i.h)("arcgis-user-avatar",{class:"user-avatar",user:o,scale:"m",portal:r,showName:!0,description:o.username}),(0,i.h)("calcite-icon",{icon:"pencil",scale:"s"})):(0,i.h)(i.F,null,t.searchMembers,(0,i.h)("calcite-icon",{icon:"chevron-down",scale:"s"}))),(0,i.h)("div",{class:"reference-element",ref:e=>this.referenceElement=e}),(0,i.h)("slot",{name:"input-message"})),(0,i.h)("calcite-popover",{class:"popover",label:t.selectUser,pointerDisabled:!0,referenceElement:s,placement:"bottom-start",open:l&&(d||!!this.getResultsLength()),focusTrapDisabled:!0,offsetDistance:2},(0,i.h)("div",{class:"list-wrapper"},d?(0,i.h)("calcite-loader",{label:"Loading",class:"loader"}):(0,i.h)("ul",{ref:e=>this.list=e,"aria-label":t.members,"aria-multiselectable":"false",class:"list",id:`listbox-${n}`,role:"listbox",tabIndex:-1},null===(e=this.searchResults)||void 0===e?void 0:e.results.map(this.renderUser)))))}get el(){return(0,i.d)(this)}};u.style=":host{position:relative;display:block;width:100%}.edit{border:1px solid var(--calcite-color-border-input);font-family:inherit;margin-bottom:0.75rem;box-sizing:border-box;display:flex;width:100%;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;justify-content:space-between;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.edit:hover{background-color:var(--calcite-color-background)}.edit:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.invalid{border-color:var(--calcite-color-status-danger)}.invalid:focus{outline-color:var(--calcite-color-status-danger)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.search-wrapper{position:relative;display:block;width:100%}.search{pointer-events:none;position:absolute;z-index:10;margin-top:1rem;font-size:0.875rem;color:var(--calcite-color-text-3);inset-inline-start:0.75rem}.x{position:absolute;top:0px;z-index:10;margin-top:0.25rem;cursor:pointer;border-style:none;padding:0.5rem;color:var(--calcite-color-text-1);outline:2px solid transparent;outline-offset:2px;inset-inline-end:0.25rem;background:transparent}.input{position:relative;z-index:0;box-sizing:border-box;display:block;height:3rem;width:100%;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:2.5rem;padding-right:2.5rem;font-size:0.875rem;color:var(--calcite-color-text-1);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border:1px solid var(--calcite-color-border-input);background-color:transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.popover{z-index:20;width:100%}.loader{padding-top:6rem;padding-bottom:6rem}.list-wrapper{height:auto;overflow:auto;max-height:16rem}.list{margin:0px;width:100%;list-style-type:none;padding:0px}.list-item{box-sizing:border-box;display:block;height:3rem;width:100%;cursor:pointer;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:2.5rem;padding-right:2.5rem;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border-bottom:1px solid var(--calcite-color-border-3)}.list-item:hover{background-color:var(--calcite-color-background)}.list-item:last-child{border-bottom-width:0px}.list-item--active{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}"},15059:(e,t,r)=>{r.d(t,{g:()=>i});const i=()=>[2,1,1,1,3].map((e=>{let t="";for(let r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},58832:(e,t,r)=>{r.d(t,{H:()=>i});const i='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")'},51772:(e,t,r)=>{r.d(t,{a:()=>c,b:()=>h,c:()=>d,d:()=>u,f:()=>l,g:()=>p});var i=r(70392),o=r(58832),s=r(66913),a=r(63280),n=r(58144);async function l(e,t,r){const o=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),a=`${null!=o?o:(0,i.g)(t)}community/users/${e}`,n=(null==a?void 0:a.includes("www.arcgis.com"))&&t.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,s.f)((async()=>{try{return await(0,s.r)(a,{},n)}catch(t){return{username:e}}}),"user",a)}async function c(e,t,r,i){var o,s;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(o=e.sourceJSON)||void 0===o?void 0:o.contentStatus)){const o=await(0,n.f)(e,r,t,i);if(!o)return l(e.owner,t,i);const{description:c,name:d,thumbnail:u,url:h}=o;return{description:c?(0,a.s)(c):"",fullName:d,username:e.owner,thumbnail:u,id:e.orgId||(null===(s=e.portal)||void 0===s?void 0:s.id),url:h}}return l(e.owner,t,i)}async function d(e,t,r){const o=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),a=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,s.f)((async()=>(0,s.r)(`${o}community/groups`,{q:`(owner:"${e}")`,num:100},a)),"userGroups",e)}async function u(e,t,r){const a=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),n=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,s.f)((async()=>(await(0,s.r)(`${a}search`,{q:`(owner:"${e}") ${o.H}`,num:1},n)).total),"userItemsTotal",e)}function h(e,t,r=!1){if(e.thumbnailUrl)return e.thumbnailUrl;if(!e.thumbnail)return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const o=(0,s.g)(t);return`${(0,i.g)(t)}community/users/${e.username}/info/${e.thumbnail}${o&&!r?`?token=${o}`:""}`}function p(e,t){const{fullName:r,firstName:i,lastName:o,username:s}=e;return r||(i&&o?"ja"===t?`${o} ${i}`:`${i} ${o}`:s)}},58144:(e,t,r)=>{r.d(t,{f:()=>s});var i=r(66913),o=r(63280);async function s(e,t,r,s){var a,n,l;const c=null!==(l=null!==(a=e.orgId)&&void 0!==a?a:null===(n=e.portal)||void 0===n?void 0:n.id)&&void 0!==l?l:null==r?void 0:r.id;return(0,i.f)((()=>async function(e,t,r,s,a){var n,l;const c=(null===(n=e.portal)||void 0===n?void 0:n.portalHostname)||(null==s?void 0:s.portalHostname)||(null===(l=null==s?void 0:s.restUrl)||void 0===l?void 0:l.replace("/sharing/rest","")),d=a?`https://www.arcgis.com/sharing/rest/portals/${t}`:`https://${c}/sharing/rest/portals/${t}`;if(!c&&!a)return null;const u=a?{disableIdentityLookup:!0,addTokenManually:!1}:{},h=await(0,i.r)(d,{},u),{urlKey:p,thumbnail:m,customBaseUrl:v}=h,g=`https://${p}.${v}/`,f=m?`${g}sharing/rest/portals/self/resources/${m}`:null;let b,w;try{const e=await(0,i.r)(`${d}/resources/localizedOrgProperties`,{start:1,num:100},u);if(e){const t=e[r]||e.default;b=t.name,w=t.description||e.description}}catch(e){}return{name:b||h.name,description:(0,o.a)(w||h.description),url:`${g}home/`,thumbnail:f}}(e,c,t,r,s)),"verified",c)}}}]);