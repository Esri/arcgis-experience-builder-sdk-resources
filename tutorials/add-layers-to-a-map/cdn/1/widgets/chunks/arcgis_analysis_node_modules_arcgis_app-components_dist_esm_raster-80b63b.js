/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-80b63b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-80b63b"],{23505:(e,i,t)=>{t.d(i,{c:()=>s});var n=t(35110);const o=e=>!("isConnected"in e)||e.isConnected,r=((e,i)=>{let t;return(...e)=>{t&&clearTimeout(t),t=setTimeout((()=>{t=0,(e=>{for(let i of e.keys())e.set(i,e.get(i).filter(o))})(...e)}),2e3)}})(),l=e=>"function"==typeof e?e():e,s=(e,i)=>{const t=((e,i=((e,i)=>e!==i))=>{const t=l(e);let n=new Map(Object.entries(null!=t?t:{}));const o={dispose:[],get:[],set:[],reset:[]},r=()=>{var i;n=new Map(Object.entries(null!==(i=l(e))&&void 0!==i?i:{})),o.reset.forEach((e=>e()))},s=e=>(o.get.forEach((i=>i(e))),n.get(e)),a=(e,t)=>{const r=n.get(e);i(t,r,e)&&(n.set(e,t),o.set.forEach((i=>i(e,t,r))))},c="undefined"==typeof Proxy?{}:new Proxy(t,{get:(e,i)=>s(i),ownKeys:e=>Array.from(n.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,i)=>n.has(i),set:(e,i,t)=>(a(i,t),!0)}),u=(e,i)=>(o[e].push(i),()=>{((e,i)=>{const t=e.indexOf(i);t>=0&&(e[t]=e[e.length-1],e.length--)})(o[e],i)});return{state:c,get:s,set:a,on:u,onChange:(i,t)=>{const n=u("set",((e,n)=>{e===i&&t(n)})),o=u("reset",(()=>t(l(e)[i])));return()=>{n(),o()}},use:(...e)=>{const i=e.reduce(((e,i)=>(i.set&&e.push(u("set",i.set)),i.get&&e.push(u("get",i.get)),i.reset&&e.push(u("reset",i.reset)),i.dispose&&e.push(u("dispose",i.dispose)),e)),[]);return()=>i.forEach((e=>e()))},dispose:()=>{o.dispose.forEach((e=>e())),r()},reset:r,forceUpdate:e=>{const i=n.get(e);o.set.forEach((t=>t(e,i,i)))}}})(e,i);return t.use((()=>{if("function"!=typeof n.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:i=>{const t=(0,n.g)();t&&((e,i,t)=>{const n=e.get(i);n?n.includes(t)||n.push(t):e.set(i,[t])})(e,i,t)},set:i=>{const t=e.get(i);t&&e.set(i,t.filter(n.f)),r(e)},reset:()=>{e.forEach((e=>e.forEach(n.f))),r(e)}}})()),t}},59503:(e,i,t)=>{t.d(i,{$:()=>fe,A:()=>B,B:()=>P,C:()=>q,D:()=>S,E:()=>I,F:()=>k,G:()=>b,H:()=>m,I:()=>$,J:()=>H,K:()=>V,L:()=>ce,M:()=>D,N:()=>j,O:()=>J,P:()=>A,Q:()=>pe,R:()=>ee,S:()=>c,T:()=>Fe,U:()=>ze,V:()=>_e,W:()=>ve,X:()=>ye,Y:()=>Le,Z:()=>Be,_:()=>ge,a:()=>Xe,a0:()=>be,a1:()=>me,a2:()=>pi,a3:()=>oi,a4:()=>ui,a5:()=>Se,a6:()=>Ae,a7:()=>Je,a8:()=>Ie,a9:()=>qe,aA:()=>fi,aB:()=>mi,aC:()=>N,aD:()=>oe,aE:()=>te,aF:()=>Ne,aG:()=>f,aH:()=>v,aI:()=>U,aJ:()=>x,aK:()=>z,aL:()=>F,aa:()=>Te,ab:()=>re,ac:()=>E,ad:()=>h,ae:()=>g,af:()=>y,ag:()=>_,ah:()=>xe,ai:()=>Ge,aj:()=>Ce,ak:()=>Ue,al:()=>Pe,am:()=>We,an:()=>He,ao:()=>Me,ap:()=>ke,aq:()=>we,ar:()=>je,as:()=>si,at:()=>C,au:()=>ri,av:()=>ti,aw:()=>ni,ax:()=>ci,ay:()=>di,az:()=>ai,b:()=>n,c:()=>X,d:()=>R,e:()=>le,f:()=>d,g:()=>Q,h:()=>ie,i:()=>G,j:()=>ae,k:()=>se,l:()=>u,m:()=>p,n:()=>li,o:()=>ii,p:()=>ei,q:()=>Qe,r:()=>Ze,s:()=>K,t:()=>Ye,u:()=>T,v:()=>Oe,w:()=>Re,x:()=>M,y:()=>L,z:()=>o});var n,o,r=t(86587),l=t(1984),s=(t(21104),t(2137),t(23505)),a=t(89393);function c(e){return 0===Object.keys(e).length&&e.constructor===Object}function u(){document.querySelectorAll("calcite-popover").forEach((e=>{let i=!1;if(e.classList.forEach((e=>{e.startsWith("smart-mapping-")&&e.endsWith("-popover")&&(i=!0)})),i){e.setAttribute("open","false");const i=e.parentNode;null==i||i.removeChild(e)}})),document.querySelectorAll("arcgis-smart-mapping-styler-popover, arcgis-smart-mapping-info-popover, arcgis-smart-mapping-symbol-pair-popover, arcgis-smart-mapping-dropdown").forEach((e=>{var i;null===(i=e.parentNode)||void 0===i||i.removeChild(e)}))}function d(e,i,t){if(i&&(null==e?void 0:e.tagName)===i.toUpperCase()||t&&(null==e?void 0:e.classList.contains(t)))return e;{let n=null==e?void 0:e.parentElement;for(;n;){if(i&&n.tagName===i.toUpperCase()||t&&n.classList.contains(t))return n;if("BODY"===n.tagName)break;n=n.parentElement}}}function p(e,i){const t=function(e){if("CALCITE-PANEL"===(null==e?void 0:e.tagName))return e;if("CALCITE-FLOW-ITEM"===(null==e?void 0:e.tagName))return e;{let i=null==e?void 0:e.parentElement;for(;i;){if("CALCITE-PANEL"===i.tagName)return i;if("CALCITE-FLOW-ITEM"===i.tagName)return i;i=i.parentElement}}}(e);t&&(t.disabled=i)}function m(e){let i=null==e?void 0:e.parentElement;if("CALCITE-FLOW"===(null==i?void 0:i.tagName)){let t=0;return i.childNodes.forEach(((i,n)=>{i===e&&(t=n)})),0===t}return!1}function f(e,i,t,n=!0){let o=document.getElementById(t);(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o);const r=document.createElement("calcite-tooltip");r.className="smart-mapping-tooltip",r.id=t,r.placement="auto",r.referenceElement=e,r.open=n,r.innerHTML=i,document.body.append(r)}function y(e,i,t=!0){const n=document.createElement("calcite-tooltip");n.className="smart-mapping-tooltip",n.referenceElement=e,n.open=t,n.innerHTML=i,document.body.append(n)}function g(){document.querySelectorAll(".smart-mapping-tooltip").forEach((e=>{var i;null===(i=e.parentNode)||void 0===i||i.removeChild(e)}))}function v(e){const i=document.getElementById(e);"smart-mapping-tooltip"===(null==i?void 0:i.className)&&(null==i?void 0:i.parentNode)&&i.parentNode.removeChild(i)}function h(e){return e.min===e.max&&E(e.min)&&(e.min>0?(e.min=0,e.max=2*e.max):e.min<0?(e.min=2*e.min,e.max=0):(e.min=-10,e.max=10)),e}function b(e){var i;const{useFeatureReduction:t}=K;return"featureReduction"in e&&"binning"===(null===(i=e.featureReduction)||void 0===i?void 0:i.type)&&t||"imagery"===e.type||"imagery-tile"===e.type?"polygon":"geo-rss"===e.type?"point":e.geometryType}function S(e){return"stream"===e.type||"point"===b(e)||"multipoint"===b(e)}function T(e){return!("stream"===e.type)&&"polygon"===b(e)}function I(e){return!("stream"===e.type)&&"polyline"===b(e)}function E(e){return null!=e}function F(e){if(e.simpleFieldType===o.DATE){const e=(new Date).getFullYear();return[new Date(`1/1/${e}`).getTime(),new Date(`12/31/${e}`).getTime()]}return[0,100]}function x(e){setTimeout((()=>{e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),setTimeout((()=>{var e;const i=null===(e=document.getElementsByTagName("calcite-shell"))||void 0===e?void 0:e[0];i&&(i.scrollTop=0)}),100)}),100)}function C(e){const i=(0,l.a)(e),t=(0,r.g)(e),n=new Intl.NumberFormat(i,{style:"percent"}).format(0);return"rtl"===t?n.endsWith("%"):n.startsWith("%")}function N(e,i){return e.minValue<.001&&e.maxValue<.001?`${e.minValue.toFixed(i).toLocaleString()} - ${e.maxValue.toFixed(i).toLocaleString()}`:`${e.minValue.toLocaleString()} - ${e.maxValue.toLocaleString()}`}!function(e){e.MISSING="missing",e.IN_PROGRESS="inProgress",e.SUCCESS="success",e.FAILED="failed"}(n||(n={})),function(e){e.NUMBER="number",e.STRING="string",e.DATE="date",e.OID="oid",e.GUID="guid",e.UNKNOWN="unknown"}(o||(o={}));let w=["id","fips","fid","objectid","_objectid","__objectid","x","y","lat","long","latitude","longitude","shape","shape_length","shape_leng","shape_area","perimeter","stretched_value","fnode_","tnode_","lpoly_","rpoly_","poly_","subclass","rings_ok","rings_nok","st_length(shape)","st_area(shape)"];function R(){const{layer:e,mapImageSublayer:i}=K;let{layerFields:t}=K;return!e||t?Promise.resolve():(K.layerFields=function(e){var i;const{useFeatureReduction:t,modules:n}=K;if("feature"===e.type&&"binning"===(null===(i=e.featureReduction)||void 0===i?void 0:i.type)&&t){const i=e.featureReduction.fields,t=[];return i.forEach((i=>{const o=e.fields.find((e=>e.name===i.onStatisticField));i.onStatisticField&&!o||t.push(new n.Field({name:i.name,alias:i.alias||i.name,type:q(i)}))})),t}return"fields"in e&&e.fields}(e),i&&i.layer.portalItem&&i.layer.url.indexOf("https://demographics")>-1&&i.layer.url.indexOf(".arcgis.com")>-1?i.layer.portalItem.fetchData().then((e=>{if(null==e?void 0:e.thematicGroup){const i=e.thematicGroup.fieldNames;i&&(t=t.filter((e=>i.indexOf(e.name)>-1)))}return O(),Promise.resolve()})).catch((()=>(O(),Promise.resolve()))):(O(),Promise.resolve()))}function O(){var e,i;const{layer:t,mapImageSublayer:n,layerFields:r,supportsArcade:l}=K,s=t.hasOwnProperty("capabilities")&&(null===(i=null===(e=t.capabilities)||void 0===e?void 0:e.query)||void 0===i?void 0:i.supportsSqlExpression);K.fields=[],K.stringFieldsCount=0,K.dateFieldsCount=0,K.numberFieldsCount=0;const a="popupTemplate"in t&&t.popupTemplate?t.popupTemplate.fieldInfos:[],c=ie(t).filter((e=>!!e.field)).map((e=>e.field.toLowerCase()));(null==c?void 0:c.length)&&(w=w.filter((e=>-1===c.indexOf(e)))),r.forEach((e=>{if(w.indexOf(e.name.toLowerCase())>-1)return;if(["date","date-only"].indexOf(e.type)>-1&&(n&&!l||"stream"!==t.type&&!s))return;const i=a?a.filter((i=>i.fieldName===e.name)):null,r=i&&i.length?i[0].label:null,u={layerField:e,label:r||e.alias||e.name};!function(e,i){switch(q(e.layerField)){case"string":case"date-only":e.simpleFieldType=o.STRING,K.stringFieldsCount++;break;case"date":e.simpleFieldType=o.DATE,K.dateFieldsCount++;break;case"oid":i.indexOf(e.layerField.name.toLowerCase())>-1&&(e.simpleFieldType=o.OID);break;case"guid":i.indexOf(e.layerField.name.toLowerCase())>-1&&(e.simpleFieldType=o.GUID);break;case"small-integer":case"big-integer":case"integer":case"single":case"double":case"long":e.simpleFieldType=o.NUMBER,K.numberFieldsCount++}}(u,c),u.simpleFieldType&&K.fields.push(u)}))}function M(e){const{layer:i}=K;if(G(i)){const i=fi().filter((i=>i.name===e));if(i.length){const e=i[0];return{label:e.alias,layerField:e,simpleFieldType:o.STRING}}}else{const i=K.fields.filter((i=>i.layerField.name===e));if(i.length)return i[0]}}function z(){const e=K.fields.filter((e=>e.simpleFieldType===o.NUMBER));if(e.length)return e[0]}function _(){return K.numberFieldsCount>0}function k(){const{selectedFields:e}=K,i={string:0,number:0,date:0,unknown:0,expression:0};return e.forEach((e=>{let t;if(i.expression+=e.expression?1:0,e.field){const i=M(e.field);t=i?i.simpleFieldType:o.UNKNOWN}else t=e.simpleFieldType;switch(t){case o.NUMBER:case o.OID:case o.GUID:i.number++;break;case o.STRING:i.string++;break;case o.DATE:i.date++;break;case o.UNKNOWN:i.unknown++}})),i}function V(e){const{fields:i}=K,t={string:0,number:0,date:0,expression:0};return(e=e||i).forEach((e=>{switch(e.simpleFieldType){case o.NUMBER:case o.OID:case o.GUID:t.number++;break;case o.STRING:t.string++;break;case o.DATE:t.date++}})),t}function D(e){const{layer:i}=K;"featureReduction"in i&&i.featureReduction&&"binning"===i.featureReduction.type||A(e)}function A(e){const{layer:i}=K;"geojson"!==i.type&&"wfs"!==i.type&&"feature"!==i.type||(i.outFields=e)}function L(e,i){let t=!0;return e.length===i.length&&(e.forEach(((e,n)=>{t&&!B(e,i[n])&&(t=!1)})),t)}function B(e,i){return!(!e||!i||e.field!=i.field||e.expression!=i.expression||e.expressionTitle!=i.expressionTitle)}function U(e){return e.simpleFieldType===o.DATE}function P(e){const i=e.layerField;switch(q(i)){case"small-integer":case"big-integer":case"integer":case"single":case"double":if("domain"in i&&i.domain)return"string";switch("valueType"in i&&i.valueType){case"name-or-title":case"type-or-category":case"description":case"location-or-place-name":case"ordered-or-ranked":case"binary":case"unique-identifier":case"date-and-time":return"string";case"count-or-amount":return"integer";default:return"double"}case"string":case"date-only":return"string";case"date":return"date";default:return"string"}}function q(e){const{layer:i}=K;if(e&&"fields"in i){if("type"in e)return e.type;if("statisticType"in e){const t=i.fields.find((i=>i.name===e.onStatisticField));if(!e.onStatisticField||t){if("count"===e.statisticType)return"integer";if("avg"===e.statisticType)return"double";if(["min","max","sum","mode"].indexOf(e.statisticType)-1)return(null==t?void 0:t.type)||"integer"}}}}function G(e){return["imagery","imagery-tile"].indexOf(e.type)>-1}var J,j;!function(e){e.ARCGIS_COMPONENT_NOTIFICATIONS="arcgisComponent_notifications"}(J||(J={})),function(e){e.SMART_MAPPING_TIP1_DISMISSED="arcgis_smart_mapping_tip1_dismissed",e.SMART_MAPPING_TIP2_DISMISSED="arcgis_smart_mapping_tip2_dismissed"}(j||(j={}));const W=e=>{const i=(e=>localStorage.getItem(e))(e);return i?JSON.parse(i):{}},H=(e,i)=>{const t=W(e);t[i.key]=i.value,((e,i)=>{localStorage.setItem(e,i)})(e,JSON.stringify(t))},$=(e,i)=>{const t=W(e);return(null==t?void 0:t.hasOwnProperty(i))?t[i]:null},K=(0,s.c)({selectedFields:[],hideLayerTitle:!1,supportsArcade:!1,stringFieldsCount:-1,dateFieldsCount:-1,numberFieldsCount:-1,isRTL:!1,oneFeatureResponseStatus:n.MISSING}).state;function X(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.oneFeatureResponseStatus=n.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0}const Y="polygon";function Q(){const{layer:e}=K;return Z(ae(e))}function Z(e){var i;const{layer:t}=K,n=Ke(e,"size"),o=Ke(e,"color"),r=Xe(e,"color"),l=Ye(e,"color"),s=Ye(e,"size");let a="unknown";if(e.normalizationType&&"field"!==e.normalizationType)return"unknown";if("simple"===e.type)a="simple";else if("dot-density"===e.type)a="dot-density";else if("heatmap"===e.type)a="heatmap";else if("class-breaks"===e.type){const c=e;if(o)a=c.valueExpression&&!l?"color":n?s&&s.units?"color-size-age":l&&l.units?"color-age-size":"color-size":l&&l.style&&r.normalizationField?"compare":l&&l.units?n?"color-age-size":"color-age":"color";else if(n)a="univariate-color-size"===(null===(i=c.authoringInfo)||void 0===i?void 0:i.type)?"color-size":c.valueExpression&&!s?"size":s&&s.units?"size-age":"size";else{const i=e,n=i.authoringInfo;a=n?"class-breaks-color"===n.type?"color":"class-breaks-size"===n.type||ue(i.classBreakInfos)?"size":"color":T(t)?i.valueExpression?ue(i.classBreakInfos)?"size":"color":i.backgroundFillSymbol?"size":"color":ue(i.classBreakInfos)?"size":"color"}}else"unique-value"===e.type?a=e.valueExpression?e.authoringInfo&&"predominance"===e.authoringInfo.type||"Predominant category"===e.valueExpressionTitle?Ke(e,"size")?"predominance-size":"predominance":e.authoringInfo&&"relationship"===e.authoringInfo.type?Ke(e,"size")?"relationship-size":"relationship":Ke(e,"size")?"type-size":"type":n?s&&s.units?"type-size-age":"type-size":"type":"pie-chart"===e.type&&(a=Ke(e,"size")?"chart-size":"chart");return a}function ee(e){const i=Xe(e,"color"),t=Xe(e,"size"),n=Z(e);(null==i?void 0:i.normalizationField)?(e.normalizationField=i.normalizationField,e.normalizationType="field"):["color-size","color-age-size","color-size-age"].indexOf(n)>-1&&i?(e.normalizationField=void 0,e.normalizationType=void 0):"size"===n&&(null==t?void 0:t.normalizationField)&&(e.normalizationField=t.normalizationField,e.normalizationType="field")}function ie(e){var i;let t=ae(e),n=[];switch(Q()){case"relationship":case"relationship-size":{n=[{field:t.authoringInfo.field1.field,simpleFieldType:o.NUMBER},{field:t.authoringInfo.field2.field,simpleFieldType:o.NUMBER}];const e=Xe(t,"size");if(e){const i=M(e.field);n.push({field:e.field,expression:e.valueExpression,expressionTitle:e.valueExpressionTitle,simpleFieldType:e.field&&i?i.simpleFieldType:o.NUMBER})}break}case"predominance":case"predominance-size":n=t.uniqueValueInfos.map((e=>{var i;return{field:""+e.value,simpleFieldType:(null===(i=M(""+e.value))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}}));break;case"chart":case"chart-size":n=t.attributes.map((e=>{const i=M(e.field);return{field:e.field,expression:e.valueExpression,expressionTitle:e.valueExpressionTitle,simpleFieldType:e.field&&i?i.simpleFieldType:o.NUMBER}}))}if(n.length)return n;switch(t.type){case"dot-density":n=t.attributes.map((e=>{var i;return{field:e.field,simpleFieldType:(null===(i=M(e.field))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}}));break;case"heatmap":{const e=t;n=e.field?[{field:e.field,simpleFieldType:(null===(i=M(e.field))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}]:[];break}case"class-breaks":{const e=t,i=M(e.field);n=[{field:e.field,expression:i?void 0:e.valueExpression,expressionTitle:i?void 0:e.valueExpressionTitle,simpleFieldType:e.field&&i?i.simpleFieldType:o.NUMBER}];const r=Xe(t,"color"),l=Xe(t,"size"),s=Ye(t,"color"),a=Ye(t,"size");if(r&&l)if(r.field===l.field&&r.valueExpression===l.valueExpression&&r.valueExpressionTitle===l.valueExpressionTitle){const e=M(r.field);n=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}else{if(s&&s.units)n=[{field:s.field,simpleFieldType:o.DATE}];else{const e=M(r.field);n=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}if(a&&a.units)n.push({field:a.field,simpleFieldType:o.DATE});else{const e=M(l.field);n.push({field:l.field,expression:e?void 0:l.valueExpression,expressionTitle:e?void 0:l.valueExpressionTitle,simpleFieldType:l.field&&e?e.simpleFieldType:o.NUMBER})}}else if(r)if(s&&s.units)n=[{field:s.field,simpleFieldType:o.DATE}];else{const e=M(r.field);n=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}else if(l)if(a&&a.units)n=[{field:a.field,simpleFieldType:o.DATE}];else{const e=M(l.field);n=[{field:l.field,expression:e?void 0:l.valueExpression,expressionTitle:e?void 0:l.valueExpressionTitle,simpleFieldType:l.field&&e?e.simpleFieldType:o.NUMBER}]}if(s&&s.style&&r.normalizationField){const e=M(r.field),i=M(r.normalizationField);n=[{field:r.field,simpleFieldType:e?e.simpleFieldType:o.NUMBER},{field:r.normalizationField,simpleFieldType:i?i.simpleFieldType:o.NUMBER}]}break}case"unique-value":if(t.authoringInfo&&"predominance"===t.authoringInfo.type)n=t.uniqueValueInfos.map((e=>{const i=M(""+e.value);return{field:""+e.value,simpleFieldType:i?i.simpleFieldType:o.NUMBER}}));else if(t.authoringInfo&&"chart"===t.authoringInfo.type)n=t.uniqueValueInfos.map((e=>{const i=M(""+e.value);return{field:""+e.value,simpleFieldType:i?i.simpleFieldType:o.NUMBER}}));else if(t.authoringInfo&&"relationship"===t.authoringInfo.type){const e=M(t.authoringInfo.field1.field),i=M(t.authoringInfo.field2.field);n=[{field:t.authoringInfo.field1.field,simpleFieldType:e?e.simpleFieldType:o.NUMBER},{field:t.authoringInfo.field2.field,simpleFieldType:i?i.simpleFieldType:o.NUMBER}]}else{const e=t,i=M(e.field);let r=o.NUMBER;e.field&&i?r=i.simpleFieldType:e.valueExpression&&e.uniqueValueInfos&&e.uniqueValueInfos[0]&&"string"==typeof e.uniqueValueInfos[0].value&&(r=o.STRING),n=[{field:e.field,expression:i?void 0:e.valueExpression,expressionTitle:i?void 0:e.valueExpressionTitle,simpleFieldType:r}];const l=Xe(t,"size");if(l){let e=l.field;e||(e=(Ye(t,"size")||{}).field);const i=M(e);n.push({field:e,expression:i?void 0:l.valueExpression,expressionTitle:i?void 0:l.valueExpressionTitle,simpleFieldType:e&&i?i.simpleFieldType:o.NUMBER})}}}return n}function te(e,i,t=!1){if(i&&5!==i.length)return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!1,visibleElements:{interactiveTrack:!0}};switch(e){case"high-to-low":case"above":case"below":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!1,visibleElements:{interactiveTrack:!0}};case"above-and-below":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!0,syncedSegmentsEnabled:!t,visibleElements:{interactiveTrack:!t}};case"centered-on":case"extremes":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!0,syncedSegmentsEnabled:!0,visibleElements:{interactiveTrack:!0}}}}function ne(e){const i=e.map.basemap.baseLayers.getItemAt(0);if(!i.url)return"esri.layers.OpenStreetMapLayer"===i.declaredClass?"osm":"topo";const t=i.url.toLowerCase();return t.indexOf("arcgis/rest/services/World_Street_Map".toLowerCase())>-1?"streets":t.indexOf("ArcGIS/rest/services/Canvas/World_Light_Gray_Base".toLowerCase())>-1?"gray":t.indexOf("arcgis/rest/services/World_Topo_Map".toLowerCase())>-1||t.indexOf("arcgis/rest/services/USGSTopo".toLowerCase())>-1?"topo":t.indexOf("ArcGIS/rest/services/World_Terrain_Base".toLowerCase())>-1?"terrain":t.indexOf("arcgis/rest/services/NatGeo_World_Map".toLowerCase())>-1?"national-geographic":t.indexOf("arcgis/rest/services/Ocean/World_Ocean_Base".toLowerCase())>-1?"oceans":t.indexOf("arcgis/rest/services/World_Imagery".toLowerCase())>-1?"satellite":t.indexOf("ArcGIS/rest/services/Reference/World_Boundaries_and_Places".toLowerCase())>-1?"hybrid":t.indexOf("arcgis/rest/services/Canvas/World_Dark_Gray_Base".toLowerCase())>-1?"dark-gray":"topo"}function oe(e,i,t){if(!(0,a.i)(i)||!(0,a.i)(t))return null;const n=e[0].value,o=e[e.length-1].value,r=.3*(o-n);return{min:n-r>i?n-r:null,max:o+r<t?o+r:null,minMaxSame:n===o}}function re(){const{layer:e,mapImageSublayer:i}=K;if("esri.layers.GeoRSSLayer"===e.declaredClass){const i=e;i.pointSymbol=i.pointSymbol.clone(),i.lineSymbol=i.lineSymbol.clone(),i.polygonSymbol=i.polygonSymbol.clone()}else le(ae(e).clone(),e),i&&(i.renderer=ae(e).clone())}function le(e,i){var t;const{useFeatureReduction:n}=K;"featureReduction"in i&&"binning"===(null===(t=i.featureReduction)||void 0===t?void 0:t.type)&&n?i.featureReduction.renderer=e:"renderer"in i&&(i.renderer=e)}function se(e,i){const{layer:t,mapImageSublayer:n,modules:o}=K;i&&"featureReduction"in t&&(t.featureReduction=null),le(o.rendererJsonUtils.fromJSON(e),t),i&&"featureReduction"in t&&(t.featureReduction=i),n&&(n.renderer=o.rendererJsonUtils.fromJSON(e))}function ae(e){var i;const{useFeatureReduction:t}=K;return"featureReduction"in e&&"binning"===(null===(i=e.featureReduction)||void 0===i?void 0:i.type)&&t?e.featureReduction.renderer:"renderer"in e&&e.renderer}function ce(e){const{layer:i}=K,t=ae(i),n="authoringInfo"in t&&t.authoringInfo,o=Ye(ae(i),"color"),r=Ye(ae(i),"size");return("color"===e?null==o?void 0:o.theme:"size"===e?null==r?void 0:r.theme:(null==n?void 0:n.univariateTheme)||(null==o?void 0:o.theme)||(null==r?void 0:r.theme))||""}function ue(e){let i,t;for(i=0;i<e.length;i++){const n=e[i].symbol;for(t=0;t<e.length;t++){const o=e[t].symbol;if(i!==t&&de(n,o))return!0}}return!1}function de(e,i){return"picture-marker"!=e.type&&("cross"===e.style||"x"===e.style?"cross"===i.style||"x"===i.style?!e.outline.color&&!i.outline.color||e.outline.color&&i.outline.color&&e.outline.color.toString()===i.outline.color.toString():!e.outline.color&&!i.color||e.outline.color&&i.color&&e.outline.color.toString()===i.color.toString():"cross"===i.style||"x"===i.style?!e.color&&!i.outline.color||e.color&&i.outline.color&&e.color.toString()===i.outline.color.toString():!e.color&&!i.color||e.color&&i.color&&e.color.toString()===i.color.toString())}function pe(e){const{layer:i,modules:t}=K,n=ae(i),o=Q();if(["unique-size","unique-size-age"].indexOf(o)>-1)return null;let r;const l=Xe(n,"color"),s=n.classBreakInfos?n.classBreakInfos:n.uniqueValueInfos;let a;return l?(a=l.stops.map((e=>e.color)),r=t.colorSchemes.getMatchingSchemes({theme:e||"high-to-low",colors:a,geometryType:b(i)||Y})):s&&s.length>=1&&(a=s?s.map((e=>Re(e.symbol))).filter((e=>e)):null,a&&a.length&&(a.length>10&&(a=a.slice(0,9)),r=function(e,i){const{layer:t,modules:n}=K;let o=n.colorSchemes.getMatchingSchemes({theme:i||"high-to-low",colors:e,geometryType:b(t)||Y});return!i||o&&o.length||(o=n.colorSchemes.getMatchingSchemes({theme:"high-to-low",colors:e,geometryType:b(t)||Y})),o&&o.length||(o=n.colorSchemes.getMatchingSchemes({theme:"above-and-below",colors:e,geometryType:b(t)||Y})),o}(a,e))),r&&r.length?r[0]:null}function me(){const{layer:e,mapView:i,modules:t}=K,n=ae(e).uniqueValueInfos;if(!n||n.length<2)return null;const o=Math.sqrt(n.length),r=t.relationshipSchemes.getSchemes({basemap:i.map.basemap||"topo",geometryType:b(e)}),l=[r.primaryScheme].concat(r.secondarySchemes),s=[];return l.forEach((e=>{let i=[];e.colorsForClassBreaks[o-2].colors.forEach((e=>{i=i.concat(t.esriLang.clone(e))})),n.some((e=>{const t=Re(e.symbol);return!!t&&!i.find((e=>Se(e,t)))}))||s.push(e)})),s.length?s[0]:null}function fe(){const{layer:e,mapView:i,modules:t}=K,n=ae(e);return!n.uniqueValueInfos||n.uniqueValueInfos.length<2?null:he(t.typeSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e)||Y}))}function ye(){const{layer:e,mapView:i,modules:t}=K,n=ae(e);return!n.uniqueValueInfos||n.uniqueValueInfos.length<2?null:he(t.predominanceSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e),numColors:10}))}function ge(){const{layer:e,mapView:i,modules:t}=K,n=ae(e);return!n.attributes||n.attributes.length<2?null:he(t.pieChartSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e),numColors:10}))}function ve(){const{layer:e,mapView:i,modules:t}=K,n=ae(e);let o;o=n.colorStops.filter(((e,i)=>i>=3)).map((e=>e.color));const r=t.heatmapSchemes.getSchemes({basemap:i.map.basemap||"topo"}),l=[r.primaryScheme].concat(r.secondarySchemes),s=[];return l.forEach((e=>{o.some(((i,t)=>!Se(e.colors[t],i)))||s.push(e)})),s.length?s[0]:null}function he(e){const{layer:i}=K,t=ae(i).uniqueValueInfos;if(!t||t.length<2)return null;const n=Te(e,Math.min(t.length,10)),o=[];return n.forEach((e=>{t.filter(((e,i)=>i<10)).some(((i,t)=>{const n=Re(i.symbol);return!!n&&!Se(e.colors[t],n)}))||o.push(e.scheme)})),o.length?o[0]:null}function be(){const{layer:e,mapView:i,modules:t}=K;return t.typeSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e)||Y}).primaryScheme}function Se(e,i){return e.r===i.r&&e.g===i.g&&e.b===i.b}function Te(e,i){const t=Ee(e),n=[];return t.forEach((e=>{const t=i>0,o=!!e.colorsForClassBreaks;let r;r=t&&o?function(e,i){const t=e.length;let n=[];for(let o=0;o<t;o++){const t=e[o];if(i<t.numClasses)break;n=t.colors}return n}(e.colorsForClassBreaks,i):e.colors,n.push({colors:r,scheme:e})})),n}function Ie(e){const i=Ee(e);let t=[];return i.forEach((function(e){e.colors&&(t=t.concat(e.colors))})),function(e){const i={};return e.filter((function(e){const t=!i[e.toHex()];return t&&(i[e.toHex()]=1),t}))}(t)}function Ee(e){return[e.primaryScheme].concat(e.secondarySchemes)}function Fe(e,i,t){const{modules:n}=K,o=n.typeSchemes.getSchemes({theme:"default",basemap:ne(i),geometryType:b(e)}).primaryScheme;let r;if(S(e)||t&&["size","color-size","color-age-size","color-size-age","color-age-size-age","type-size","predominance-size","chart-size","relationship-size"].indexOf(t)>-1){const e=new n.SimpleLineSymbol({style:"solid",color:new n.esriColor(o.outline.color),width:o.outline.width});r=new n.SimpleMarkerSymbol({style:"circle",size:o.size,outline:e,color:o.noDataColor})}else if(T(e)){const e=new n.SimpleLineSymbol({style:"solid",color:new n.esriColor(o.outline.color),width:o.outline.width});r=new n.SimpleFillSymbol({style:"solid",outline:e,color:o.noDataColor})}else I(e)&&(r=new n.SimpleLineSymbol({style:"solid",color:new n.esriColor(o.noDataColor),width:o.width}));return r}function xe(e,i){const{modules:t}=K,n=t.typeSchemes.getSchemes({theme:"default",basemap:ne(e),geometryType:"line"===i?"polyline":i}).primaryScheme;let o;if("point"===i){const e=new t.SimpleLineSymbol({style:"solid",color:new t.esriColor(n.outline.color),width:n.outline.width});o=new t.SimpleMarkerSymbol({style:"circle",size:n.size,outline:e,color:n.noDataColor})}else if("polygon"===i){const e=new t.SimpleLineSymbol({style:"solid",color:new t.esriColor(n.outline.color),width:n.outline.width});o=new t.SimpleFillSymbol({style:"solid",outline:e,color:n.noDataColor})}else"line"===i&&(o=new t.SimpleLineSymbol({style:"solid",color:new t.esriColor(n.noDataColor),width:n.width}));return o}function Ce(){const{modules:e}=K;return new e.SimpleFillSymbol({color:[184,184,184,1],style:"solid",outline:{color:"white",width:1}})}function Ne(e){if(!e)return!1;let i=!1;const t=Re(e);if(e&&"esri.symbols.SimpleFillSymbol"===e.declaredClass){const n=e.outline;t&&0!==t.a||n&&n.color&&0!==n.color.a||(i=!0)}else if(e&&"esri.symbols.SimpleLineSymbol"===e.declaredClass)t&&0!==t.a||(i=!0);else if(e&&"esri.symbols.SimpleMarkerSymbol"===e.declaredClass){const n=e.outline;t&&0!==t.a||n&&n.color&&0!==n.color.a||(i=!0)}return i}function we(e){const{modules:i}=K;return!!e&&"dark"===i.previewSymbol2D.getContrastingBackgroundTheme(e,245)}function Re(e){var i,t;const{modules:n}=K;return"cim"===(null==e?void 0:e.type)?n.esriColor.fromJSON(null===(i=n.cimSymbolUtils.getCIMSymbolColor(e))||void 0===i?void 0:i.toJSON()):"simple-marker"===(null==e?void 0:e.type)&&["x","cross"].indexOf(null==e?void 0:e.style)>-1?null===(t=null==e?void 0:e.outline)||void 0===t?void 0:t.color:null==e?void 0:e.color}function Oe(e,i){const{modules:t}=K;"picture-marker"!==e.type&&("cim"===e.type?t.cimSymbolUtils.applyCIMSymbolColor(e,i):"simple-marker"===e.type&&e.style&&["cross","x"].indexOf(e.style)>-1?(e.outline||(e.outline=new __esri.SimpleLineSymbol),e.outline.color=i):e.color=i)}function Me(e,i){return e&&(e.a=i),e}function ze(e){const{modules:i}=K;return"cim"===e.type?i.cimSymbolUtils.getCIMSymbolSize(e):e.size?e.size:e.width}function _e(e,i){const{modules:t}=K;if("cim"===e.type)t.cimSymbolUtils.scaleCIMSymbolTo(e,i);else if((0,a.i)(e.size))e.size=i;else{const t=e.height/e.width;e.width=i,e.height=e.width*t}}function ke(e){var i,t;const n=null===(i=e.data.symbol.symbolLayers)||void 0===i?void 0:i.find((e=>["CIMSolidStroke","CIMPictureStroke"].indexOf(e.type)>-1));return null!==(t=null==n?void 0:n.width)&&void 0!==t?t:0}function Ve(e){const{modules:i}=K;return"cim"===e.type?i.cimSymbolUtils.getCIMSymbolRotation(e,!0):["simple-marker","picture-marker"].indexOf(e.type)>-1?e.angle:void 0}function De(e,i){const{modules:t}=K;null!=i&&("cim"===e.type?t.cimSymbolUtils.applyCIMSymbolRotation(e,i,!0):["simple-marker","picture-marker"].indexOf(e.type)>-1&&(e.angle=i))}function Ae(e){var i;return"picture-marker"!==e.type&&("cim"===e.type?["CIMPolygonSymbol"].indexOf(e.data.symbol.type)>-1&&!!Pe(e):!!(null===(i=e.outline)||void 0===i?void 0:i.color))}function Le(e,i){var t,n;if(null===(t=e.uniqueValueInfos)||void 0===t?void 0:t.length){const t=e.uniqueValueInfos.slice();t.map((e=>{const t=i.clone();Oe(t,Re(e.symbol)),e.symbol=t})),e.uniqueValueInfos=t}else if(null===(n=e.classBreakInfos)||void 0===n?void 0:n.length){const t=e.classBreakInfos.slice();t.map((e=>{const t=i.clone();Oe(t,Re(e.symbol)),e.symbol=t})),e.classBreakInfos=t}else if(e.symbol){const t=i.clone();Oe(t,Re(e.symbol)),e.symbol=t}}function Be(e,i){var t,n;if(null===(t=e.uniqueValueInfos)||void 0===t?void 0:t.length){const t=e.uniqueValueInfos.slice();t.map((e=>{const t=i.clone();Oe(t,Re(e.symbol)),e.symbol=t})),e.uniqueValueInfos=t}else if(null===(n=e.classBreakInfos)||void 0===n?void 0:n.length){const t=e.classBreakInfos.slice();t.map((e=>{const t=i.clone();Oe(t,Re(e.symbol)),e.symbol=t})),e.classBreakInfos=t}else if(e.symbol){const t=i.clone();Oe(t,Re(e.symbol)),e.symbol=t}}function Ue(e){var i;return"cim"===e.type&&"CIMLineSymbol"===(null===(i=e.data.symbol)||void 0===i?void 0:i.type)}function Pe(e){var i,t,n;if("CIMPointSymbol"!==(null===(i=e.data.symbol)||void 0===i?void 0:i.type))return"CIMLineSymbol"===(null===(t=e.data.symbol)||void 0===t?void 0:t.type)?function(e){return e.data.symbol.symbolLayers[0]}(e):"CIMPolygonSymbol"===(null===(n=e.data.symbol)||void 0===n?void 0:n.type)?function(e){return e.data.symbol.symbolLayers.find((e=>"CIMSolidStroke"===e.type))}(e):void 0}function qe(){var e;const{mapImageSublayer:i,layer:t}=K;return!i||!!(null===(e=t.sourceJSON)||void 0===e?void 0:e.cimVersion)}function Ge(e){return!!(e.style&&["cross","x"].indexOf(e.style)>-1)}function Je(e){return"picture-marker"===e.type||"cim"===e.type&&!function(e){const{modules:i}=K;return!!i.cimSymbolUtils.getCIMSymbolColor(e)}(e)}function je(e){return"simple-line"===e.type?{width:12,height:3}:"cim"===e.type&&"CIMLineSymbol"===e.data.symbol.type?void 0:"simple-fill"===e.type?14:"cim"===e.type&&"CIMPolygonSymbol"===e.data.symbol.type?void 0:"cim"===e.type?20:14}function We(e,i){var t,n,o,r;if(e.type!==i.type)return{hasOtherChanges:!0,any:!0};const l=Ve(e)!==Ve(i),s=Math.abs(ze(e)-ze(i))>.01,a=JSON.stringify(null===(t=Re(e))||void 0===t?void 0:t.toJSON())!==JSON.stringify(null===(n=Re(i))||void 0===n?void 0:n.toJSON()),c=["simple-marker","simple-fill"].indexOf(e.type)>-1&&JSON.stringify(null===(o=e.outline)||void 0===o?void 0:o.toJSON())!==JSON.stringify(null===(r=i.outline)||void 0===r?void 0:r.toJSON()),u=e.clone();_e(u,ze(i)),Oe(u,Re(i)),["simple-marker","simple-fill"].indexOf(e.type)>-1&&(u.outline=i.outline.clone()),De(u,Ve(i));const d=(p=u,m=i,!(JSON.stringify(p.toJSON())===JSON.stringify(m.toJSON())||"cim"===p.type&&"cim"===m.type&&$e(p.toJSON().symbol,m.toJSON().symbol)));var p,m;return{rotation:l&&!s&&!a&&!c&&!d,size:s&&!l&&!a&&!c&&!d,outline:c&&!l&&!s&&!a&&!d,color:a&&!l&&!s&&!c&&!d,other:d,any:l||s||c||a||d}}function He(e,i,t,n){var o;return n.rotation?De(e,Ve(i)):n.size?_e(e,ze(i)):n.color?("picture-marker"===e.type&&(e=i.clone()),Oe(e,t)):n.outline?"picture-marker"===e.type?e=i.clone():e.outline=null===(o=i.outline)||void 0===o?void 0:o.clone():Oe(e=i.clone(),t),e}function $e(e,i){const t=Object.keys,n=typeof e;return e&&i&&"object"===n&&n===typeof i?t(e).length===t(i).length&&t(e).every((t=>"size"===t||"width"===t?Math.abs(e[t]-i[t])<.01:$e(e[t],i[t]))):e===i}function Ke(e,i,t){const n=e&&e.visualVariables;return!!n&&n.some((e=>{const n=e.target,o="$view.scale"===e.valueExpression;return e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)&&!o||n===t||"auto"===t&&o)}))}function Xe(e,i,t){const n=e&&e.visualVariables;if(n){const e=n.filter((e=>{const n=e.target,o="$view.scale"===e.valueExpression;return e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)&&!o||n===t||"auto"===t&&o&&!n)}));if(e.length)return e[0]}}function Ye(e,i,t){if(!e.authoringInfo)return;const n=e&&e.authoringInfo&&e.authoringInfo.visualVariables;if(n){const e=n.filter((e=>{const n=e.target;return e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)||n===t)}));if(e.length)return e[0]}}function Qe(e,i,t){const n=e&&e.visualVariables;if(n){const e=n.filter((e=>{const n=e.target,o="$view.scale"===e.valueExpression;return!(e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)&&!o||n===t||"auto"===t&&o))}));if(e.length)return e}}function Ze(e,i,t){if(!("authoringInfo"in e)||!e.authoringInfo)return;const n=e&&e.authoringInfo.visualVariables&&e.authoringInfo.visualVariables;if(n){const e=n.filter((e=>{const n=e.target;return!(e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)||n===t))}));if(e.length)return e}}function ei(e){const i=Z(e),t=Xe(e,"size","outline"),n=Xe(e,"size","auto"),o=Xe(e,"rotation");let r,l;return-1===["predominance","predominance-size"].indexOf(i)&&(r=Xe(e,"opacity"),l=Ye(e,"opacity")),{sizeOutlineVisVar:t,sizeAutoVisVar:n,opacityVisVar:r,authOpacityVisVar:l,rotationVisVar:o}}function ii(e,i,t){const{sizeOutlineVisVar:n,opacityVisVar:o,authOpacityVisVar:r,rotationVisVar:l}=e;n&&(i.visualVariables=Qe(i,"size","outline")||[],i.visualVariables.push(n)),!o||!r||t&&t.notOpacity||(i.visualVariables=Qe(i,"opacity")||[],i.visualVariables.push(o),i.authoringInfo=i.authoringInfo||{},i.authoringInfo.visualVariables=Ze(i,"opacity")||[],i.authoringInfo.visualVariables.push(r)),l&&(i.visualVariables=i.visualVariables||[],i.visualVariables.push(l))}var ti;!function(e){e.NONE="none",e.MINIMUM_MAXIMUM="min-max",e.PERCENT_CLIP="percent-clip",e.STANDARD_DEVIATION="standard-deviation"}(ti||(ti={}));const ni={STD_DEV:2,MIN_PERCENT:2,MAX_PERCENT:2,GAMMA:1,STRETCH_TYPE:ti.NONE};async function oi(){const{layer:e,modules:i}=K,t=e,n="imagery"===t.type?t.rasterFunction:void 0;return t.bandIds=await si(t),i.RasterRGBCreator.createRenderer({layer:t,rasterFunction:n,rgbBandIds:t.bandIds}).then((e=>(t.effect=void 0,t.renderer=e.renderer,Promise.resolve(e))),(e=>Promise.reject(e)))}function ri(e){const{layer:i,modules:t}=K,n=i,o=n.renderer,r="imagery"===n.type?n.rasterFunction:void 0;return e=e||{},t.RasterRGBCreator.createRenderer({layer:n,rasterFunction:r,rgbBandIds:n.bandIds,stretchType:e.stretchType||o.stretchType}).then((e=>(e.renderer.dynamicRangeAdjustment=o.dynamicRangeAdjustment,e.renderer.colorRamp=o.colorRamp,e.renderer.statistics=o.statistics,E(e.renderer.numberOfStandardDeviations)&&0!==e.renderer.numberOfStandardDeviations||(e.renderer.numberOfStandardDeviations=ni.STD_DEV),Promise.resolve(e))),(e=>Promise.reject(e)))}function li(e){var i,t,n,o;const r="raster-stretch"===(null===(i=e.renderer)||void 0===i?void 0:i.type);if(!r)return!1;const l=(null===(t=e.bandIds)||void 0===t?void 0:t.length)>1,s=(null===(n=e.rasterInfo)||void 0===n?void 0:n.bandCount)>1,a=(null===(o=e.renderer.gamma)||void 0===o?void 0:o.length)>1;return r&&(l||s&&a)}async function si(e){var i;const{modules:t}=K,{rasterInfo:n}=e,{bandCount:o}=n;let r=await t.RasterRendererUtils.getDefaultBandCombination({layer:e});const l=r.length;return l!==o&&r.push(...new Array(3-l).fill(o-1)),3!==(null===(i=e.bandIds)||void 0===i?void 0:i.length)&&(e.bandIds=r),e.bandIds}var ai;!function(e){e.NONE="none",e.MINIMUM_MAXIMUM="min-max",e.PERCENT_CLIP="percent-clip",e.STANDARD_DEVIATION="standard-deviation"}(ai||(ai={}));const ci={STD_DEV:2,MIN_PERCENT:2,MAX_PERCENT:2,GAMMA:1,BAND_INDEX:0,STRETCH_TYPE:ai.NONE};function ui(){const{layer:e,modules:i}=K,t=e,n="imagery"===t.type?t.rasterFunction:void 0;return t.bandIds=[0],i.RasterStretchCreator.createRenderer({layer:t,rasterFunction:n}).then((e=>{t.effect=void 0;const i=e.renderer.statistics;return Array.isArray(i)&&i.length>1&&(e.renderer.statistics=[{min:i[0],max:i[1],avg:i[2],stddev:i[3]}]),t.renderer=e.renderer,Promise.resolve(e)}),(e=>Promise.reject(e)))}function di(e){const{layer:i,modules:t}=K,n=i,o=n.renderer,r="imagery"===n.type?n.rasterFunction:void 0;return e=e||{},t.RasterStretchCreator.createRenderer({layer:n,rasterFunction:r,stretchType:e.stretchType||o.stretchType}).then((e=>(e.renderer.dynamicRangeAdjustment=o.dynamicRangeAdjustment,e.renderer.colorRamp=o.colorRamp,e.renderer.statistics=o.statistics,E(e.renderer.numberOfStandardDeviations)&&0!==e.renderer.numberOfStandardDeviations||(e.renderer.numberOfStandardDeviations=ci.STD_DEV),Promise.resolve(e))),(e=>Promise.reject(e)))}async function pi(){const{layer:e,modules:i}=K,t=e,n="imagery"===t.type?t.rasterFunction:void 0;return i.RasterUniqueValueCreator.createRenderer({layer:t,rasterFunction:n})}function mi(e){var i;const{layer:t,modules:n}=K,o=t,r=o.renderer,l="imagery"===o.type?o.rasterFunction:void 0;return e=e||{},n.RasterUniqueValueCreator.createRenderer({layer:o,rasterFunction:l,classFieldName:e.field||r.field,colorRamp:null!==(i=e.colorRamp)&&void 0!==i?i:null}).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}function fi(){var e;const{layer:i,modules:t,strings:n}=K,o=i;let r;const{rasterInfo:l}=o,s=null===(e=null==l?void 0:l.attributeTable)||void 0===e?void 0:e.fields;return r=s?s.filter((e=>"oid"!==e.type)):[new t.Field({name:"value",alias:n.panels.uniqueValue.value})],r}}}]);