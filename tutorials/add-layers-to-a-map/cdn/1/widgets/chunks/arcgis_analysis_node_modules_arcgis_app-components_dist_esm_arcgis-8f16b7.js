/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8f16b7.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8f16b7"],{73838:(e,r,l)=>{l.d(r,{a:()=>t,c:()=>n,g:()=>a});var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==l.g?l.g:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,r,l){return e(l={path:r,exports:{},require:function(e,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},l.exports),l.exports}},33944:(e,r,l)=>{l.r(r),l.d(r,{arcgis_new_item_pages_tile_layer_from_existing:()=>p});var t=l(35110),a=l(67148),n=l(46710),i=l(70392),o=l(52299),s=l(70566),c=l(82669),u=l(84873),d=l(73208),v=l(28709);l(66913),l(21104),l(73838),l(23505),l(91306),l(12856),l(91659),l(56086),l(17752),l(51287),l(20982),l(37526),l(7803),l(38477),l(35105),l(16082),l(79233),l(64307),l(76743),l(63280),l(9657),l(53040);const p=class{constructor(e){(0,t.r)(this,e),this.newItemUpdatePage=(0,t.c)(this,"newItemUpdatePage",7),this.selectedItem=void 0,this.error=void 0,this.isProcessing=!1}async handleNext(){var e;if("3dTiles"===c.a.tileLayerPublishType)return;this.error=null;const{selectedItem:r}=this;if(!r)return(0,v.f)("No layer selected"),void(this.error="noLayerSelected");const{id:l,url:t,title:u}=r;try{const v=c.a.tileLayerPublishType;this.isProcessing=!0;const p=n.c.portal,[{layers:f,tables:m,serviceInfo:y},{total:g,relatedItems:b}]=await Promise.all([(0,o.n)(t,(0,i.g)(p),!0),(0,a.g)(l,p,{relationshipType:"Service2Service"})]),{result:h}=await(0,s.f)({itemId:l,itemUrl:t,publishType:"vectorTiles"===c.a.tileLayerPublishType?"vector":"raster",portal:p,fullLayers:f});if(g>0&&("vectorTiles"===v&&b.some((e=>"Vector Tile Service"===e.type))||"tiles"===v&&b.some((e=>"Map Service"===e.type))))return void(this.error="tileLayerAlreadyExist");const w=e=>(null!=e?e:[]).some((e=>{var r,l;const{drawingInfo:t,fields:a,layerDefinition:n}=e,i=null==n?void 0:n.drawingInfo,o=null!==(r=null==i?void 0:i.renderer)&&void 0!==r?r:null==t?void 0:t.renderer;return o&&a?!(0,s.c)(o,e.geometryType,a)||(0,s.l)(e):null!==(l=(0,s.l)(e))&&void 0!==l&&l}));if(w(f)||w(h.layers))return void(this.error="badRenderer");const S=e=>(0,s.a)(e,!0);if(!f.some(S)||(null===(e=null==h?void 0:h.layers)||void 0===e?void 0:e.length)>0&&!h.layers.some(S))return void(this.error="badLayer");c.a.sourceTitle=u,(0,d.s)(r),c.a.tileAutoCreation=!0,c.a.tileLayerBasemapType="standard",c.a.tileLayerBasemapUrl="",c.a.tileLayerFromFeatureLayer=!0,c.a.tileLayerLayers=f,c.a.tileLayerTables=m,c.a.tileLayerServiceInfo=y,c.a.tileLayerData=h,c.a.item=r,this.isProcessing=!1,this.newItemUpdatePage.emit("tileLayerSettings")}catch(e){console.error(e)}}onError(){this.isProcessing=!1}componentWillLoad(){c.a.serviceInfo=null,c.a.selectedServiceInfoLayersNames=null,this.i18n=u.u.i18n.tileLayerFromExisting}render(){var e,r;const{error:l,i18n:a,isProcessing:n}=this;return(0,t.h)(t.H,null,(0,t.h)("arcgis-new-item-loader",{active:n}),(0,t.h)("arcgis-new-item-feature-layer-browser",{itemBrowserBucket:["my"],onItemSelected:({detail:e})=>this.selectedItem=e,query:'type:"Feature Service" AND typekeywords:"Hosted Service" NOT typekeywords:"Spatiotemporal"'}),(0,t.h)("arcgis-new-item-alert",{heading:"badLayer"===l?a.error.tileLayerAlreadyExist.title:null===(e=a.error[l])||void 0===e?void 0:e.title,description:"badLayer"===l||null===(r=a.error[l])||void 0===r?void 0:r.description,active:null!=l,onAlertDismiss:()=>{this.error=null}}))}static get watchers(){return{error:["onError"]}}}},28709:(e,r,l)=>{l.d(r,{a:()=>v,b:()=>u,c:()=>d,e:()=>s,f:()=>p,i:()=>c});var t=l(46710),a=l(82669);const n="create feature layer",i="my content",o=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},s=e=>{const r=t.c.telemetry;null==r||r.stepWorkflow(n,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:n,attribute:o(a.a.addFeatureLayerType),pageName:i})},c=e=>{const r=t.c.telemetry;null==r||r.stepWorkflow(n,`expand ${e} details`,{category:n,attribute:o(a.a.addFeatureLayerType),pageName:i})},u=()=>{const e=t.c.telemetry;null==e||e.stepWorkflow(n,"filter",{category:n,attribute:o(a.a.addFeatureLayerType),pageName:i})},d=e=>{const r=o(e),l=t.c.telemetry;null==l||l.stepWorkflow(n,"from option",{category:n,attribute:r,pageName:i})},v=()=>{const{addFeatureLayerType:e,serviceInfo:r}=a.a,l=r,s=t.c.telemetry;null==s||s.endWorkflow(n,{category:n,attribute:o(e),pageName:i,count:l.layers.length,number:l.tables.length})},p=e=>{var r;null===(r=t.c.telemetry)||void 0===r||r.logError({category:n,error:e})}},21104:(e,r,l)=>{l.d(r,{l:()=>n});var t=l(73838),a=(0,t.c)((function(e,r){t.a,function(e){var r={Promise:"undefined"!=typeof window?window.Promise:void 0},l="4.24",t="next";function a(e){if(e.toLowerCase()===t)return t;var r=e&&e.match(/^(\d)\.(\d+)/);return r&&{major:parseInt(r[1],10),minor:parseInt(r[2],10)}}function n(e){return void 0===e&&(e=l),"https://js.arcgis.com/".concat(e,"/")}function i(e){return!e||a(e)?function(e){void 0===e&&(e=l);var r=n(e),i=a(e);if(i!==t&&3===i.major){var o=i.minor<=10?"js/":"";return"".concat(r).concat(o,"esri/css/esri.css")}return"".concat(r,"esri/themes/light/main.css")}(e):e}function o(e,r){var l=i(e),t=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(l);return t||function(e,r){if(r){var l=document.querySelector(r);l.parentNode.insertBefore(e,l)}else document.head.appendChild(e)}(t=function(e){var r=document.createElement("link");return r.rel="stylesheet",r.href=e,r}(l),r),t}var s={};function c(e,r,l){var t;l&&(t=function(e,r){var l=function(t){r(t.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",l,!1)};return e.addEventListener("error",l,!1),l}(e,l));var a=function(){r(e),e.removeEventListener("load",a,!1),t&&e.removeEventListener("error",t,!1)};e.addEventListener("load",a,!1)}function u(){return document.querySelector("script[data-esri-loader]")}function d(){var e=window.require;return e&&e.on}function v(e){void 0===e&&(e={});var l={};[s,e].forEach((function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(l[r]=e[r])}));var t=l.version,a=l.url||n(t);return new r.Promise((function(e,r){var n=u();if(n){var i=n.getAttribute("src");i!==a?r(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):d()?e(n):c(n,e,r)}else if(d())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=l.css;s&&o(!0===s?t:s,l.insertCssBefore),c(n=function(e){var r=document.createElement("script");return r.type="text/javascript",r.src=e,r.setAttribute("data-esri-loader","loading"),r}(a),(function(){n.setAttribute("data-esri-loader","loaded"),e(n)}),r),document.body.appendChild(n)}}))}function p(e){return new r.Promise((function(r,l){var t=window.require.on("error",l);window.require(e,(function(){for(var e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];t.remove(),r(e)}))}))}e.utils=r,e.loadModules=function(e,r){if(void 0===r&&(r={}),d())return p(e);var l=u(),t=l&&l.getAttribute("src");return!r.url&&t&&(r.url=t),v(r).then((function(){return p(e)}))},e.getScript=u,e.isLoaded=d,e.loadScript=v,e.setDefaultOptions=function(e){void 0===e&&(e={}),s=e},e.loadCss=o,Object.defineProperty(e,"__esModule",{value:!0})}(r)}));const n=async(e,r)=>(await a.loadModules(e,r)).map((e=>e.__esModule&&e.default?e.default:e))},70566:(e,r,l)=>{l.d(r,{a:()=>v,b:()=>y,c:()=>f,d:()=>m,e:()=>g,f:()=>w,g:()=>h,h:()=>d,l:()=>p,p:()=>b});var t=l(46710),a=l(21104),n=l(70392),i=l(38477),o=l(52299),s=l(64209),c=l(12856),u=l(66913);const d=(e,r)=>{let l=!1;return r&&(null==e?void 0:e.length)>0&&(l=!e.some((e=>{return!("Feature Layer"===(r=e).type&&r.drawingInfo&&v(r,!1));var r}))),l};function v(e,r){var l,t;if("esriGeometryMultiPatch"===e.geometryType)return!1;const a=null===(l=e.drawingInfo)||void 0===l?void 0:l.renderer,n=null===(t=e.drawingInfo)||void 0===t?void 0:t.labelingInfo,i=e.fields;return!(p(e)||a&&e.geometryType&&(null==i?void 0:i.length)>0&&!f(a,e.geometryType,i)||!r&&(null==n?void 0:n.length))}const p=e=>{var r,l;const t=null!==(r=e.featureReduction)&&void 0!==r?r:null===(l=e.layerDefinition)||void 0===l?void 0:l.featureReduction;return!!t&&Object.keys(t).length>0},f=(e,r,l)=>{var t;if("heatmap"===e.type)return!1;if("esriGeometryPolygon"===r&&e.uniqueValueInfos&&e.visualVariables&&e.visualVariables.some((e=>{if("sizeInfo"===e.type&&!e.target)return!0})))return!1;const a=l.filter((e=>"esriFieldTypeDate"===e.type)).map((e=>e.name));if(a.length){if(a.indexOf(e.field)>-1||a.indexOf(e.field1)>-1)return!1;if(null===(t=e.visualVariables)||void 0===t?void 0:t.some((e=>a.indexOf(e.field)>-1)))return!1}return!0},m=(e,r,l)=>{const{publishType:t,cacheOnDemand:a,tileInfo:n,cacheOnDemandMinScale:o,scale:c,layers:u}=r,{maxScale:d,minScale:v}=c,p={storageFormat:l||"vectorTiles"===r.publishType?"esriMapCacheStorageModeCompactV2":"esriMapCacheStorageModeExploded",packetSize:128},f=Object.assign(Object.assign({},"vectorTiles"===t?i.p:i.a),n);f.dpi&&!f.preciseDpi&&(f.preciseDpi=f.dpi),f.lods=f.lods.map((e=>function(e,r){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(l[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(l[t[a]]=e[t[a]])}return l}(e,["label"])));const m="vectorTiles"===t?Object.assign({},i.b):Object.assign({},i.c);let y={name:(0,s.a)(e.title),tilingSchema:{tileCacheInfo:f,tileImageInfo:m,cacheStorageInfo:p},minScale:v,maxScale:d};return u&&(y.layers=u.map((({layerDefinition:e,id:r,drawingInfo:l})=>(null==e?void 0:e.drawingInfo)?{id:r,drawingInfo:Object.assign(Object.assign({},l),e.drawingInfo)}:{id:r,drawingInfo:l}))),"vectorTiles"!==t&&(y.cacheOnDemand=a,a&&(y=Object.assign(Object.assign({},y),{capabilities:"Map,ChangeTracking",cacheOnDemandMinScale:o}))),{publishContent:{itemId:e.id,filetype:"featureService",outputType:t,publishParameters:JSON.stringify(y),buildInitialCache:!1},publishParameters:y}},y=async(e,r)=>{if(!e.includes(r?"/VectorTileServer":"/MapServer"))return{error:{code:"invalidUrl"}};try{const t=await(0,u.r)(e,{},{addTokenManually:!1});return t&&t.singleFusedMapCache&&t.tileInfo?{result:(l=t.tileInfo,Object.assign(Object.assign({},l),{lods:(l.lods||[]).map((e=>Object.assign(Object.assign({},e),{label:`1:${Math.round(e.scale).toLocaleString("en-EN",{maximumFractionDigits:0})}`})))}))}:t&&r&&t.tileInfo?{result:t.tileInfo}:{error:{code:"noTilingSchemeFound"}}}catch(e){return console.error(e),{error:{code:"mapServiceError",message:JSON.stringify(e)}}}var l},g=async(e,r,l,t)=>{let n=null,o=i.T;const s={constraints:e,minScale:e.minScale,maxScale:e.maxScale||18055.954822};if(!t)return{maxSupportedMinScale:n,cacheOnDemandMinScale:o,calculatedScale:s};try{const c=await Promise.allSettled(l.map((({id:e})=>(async e=>{try{const[r]=await(0,a.l)(["esri/layers/FeatureLayer"]),l=new r(e),t=await l.addPlugin("esri/plugins/FeatureLayerStatistics");return{result:await t.target.statisticsPlugin.getSuggestedScaleRange({sampleSize:100,forPublishingTiles:!0})}}catch(e){return"string"==typeof e&&e.toLowerCase().includes("sampling returned 0 features")?{result:null,error:null}:(console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)}})}})(`${t}/${e}`))));let u=0,d=1/0;c.forEach((e=>{if("rejected"===e.status)return;const r=e.value.result;if(!r)return;const{maxScale:l,minScale:t}=r;u=null==t||t<=u?u:t,d=null==l||l>=d?d:l,o=null==t||t>=o?o:t})),n=e.minScale||i.T,o||(o=u),s.minScale=o||e.minScale,s.maxScale=d||s.maxScale,s.minScale>e.minScale&&e.minScale>0&&(s.minScale=e.minScale),s.maxScale>=s.minScale&&s.minScale>0&&(s.maxScale=((e,r,l)=>{var t,a;if(e<=r&&(null==l?void 0:l.length)>0){let n=-1;for(let r=l.length-1;r>=0;r--)if(e<l[r].scale){n=r+2;break}return n=n>l.length-1?l.length-1:n,null!==(a=null===(t=l[n])||void 0===t?void 0:t.scale)&&void 0!==a?a:r}return r})(s.minScale,s.maxScale,r))}catch(r){console.error(r),s.minScale=e.minScale}return{maxSupportedMinScale:n,cacheOnDemandMinScale:o,calculatedScale:s}},b=async(e,r,l)=>{var a;const{publishType:n,user:i,folder:d,title:v,tags:p,snippet:f,categories:m}=r;let y=Object.assign({},e);if(v){const e=JSON.parse(y.publishParameters);e.name=(0,s.a)(v),y.publishParameters=JSON.stringify(e)}const g=`${i.userContentUrl}/publish`,{services:b}=await(0,u.r)(g,y,{},"post"),{jobId:h,serviceItemId:w,serviceurl:S,error:I,type:O}=b[0]||{};if(I)throw console.error(I),I;return await(0,o.v)(w,{jobId:h,success:!0}),"scenes"!==n&&await(0,c.u)(w,{title:v,tags:p,snippet:f,categories:m}),l&&await(0,c.u)(w,{text:JSON.stringify(l)}),d.id!==(null===(a=t.c.initialFolder)||void 0===a?void 0:a.id)&&await(0,c.m)(w,(0,o.o)(d)?"/":d.id),{id:w,jobId:h,serviceType:O,serviceUrl:S}},h=async e=>{const r=t.c.portal,l=`${(0,n.g)(r)}portals/${r.id}/datastores/getServers`,a={datastoreId:e,f:"json"};try{return{result:(await(0,u.r)(l,a,{},"post")).servers}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)}}}},w=async({itemId:e,itemUrl:r,portal:l,publishType:t,fullLayers:a})=>{try{const n=await(0,c.n)(e,l),i=((null==n?void 0:n.layers)||[]).map(((l,n)=>{var i,o,s,c;if(!l)return null;const u=null!==(i=l.id)&&void 0!==i?i:n;let d=Object.assign(Object.assign({},l),{id:u,layerUrl:`${r}/${u}`,layerItemId:e,layerDefinition:l.layerDefinition});"vector"===t&&delete d.popupInfo,l.popupInfo&&(d=Object.assign(Object.assign({},d),{popupInfo:l.popupInfo})),null!=l.showLegend&&(d=Object.assign(Object.assign({},d),{showLegend:l.showLegend}));const v=a.find((e=>e.id===u));return d=Object.assign(Object.assign({},d),{drawingInfo:Object.assign(Object.assign(Object.assign({},null==v?void 0:v.drawingInfo),l.drawingInfo),{renderer:null!==(s=null===(o=l.drawingInfo)||void 0===o?void 0:o.renderer)&&void 0!==s?s:null===(c=null==v?void 0:v.drawingInfo)||void 0===c?void 0:c.renderer})}),d})).filter((e=>null!=e));return{result:Object.assign(Object.assign({},n),{layers:i})}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)}}}}},38477:(e,r,l)=>{l.d(r,{D:()=>n,T:()=>o,a:()=>u,b:()=>v,c:()=>p,d:()=>i,e:()=>s,f:()=>t,g:()=>c,p:()=>d,t:()=>a});const t=["standard","custom"],a=["IntegratedMesh","3DObject"],n=a[0],i=["vector","raster","3dTiles"],o=147914382,s=0,c=[{level:0,label:"1:591,657,528",scale:591657527.591555},{level:1,label:"1:295,828,764",scale:295828763.795777},{level:2,label:"1:147,914,382",scale:147914381.897889},{level:3,label:"1:73,957,191",scale:73957190.948944},{level:4,label:"1:36,978,595",scale:36978595.474472},{level:5,label:"1:18,489,298",scale:18489297.737236},{level:6,label:"1:9,244,649",scale:9244648.868618},{level:7,label:"1:4,622,324",scale:4622324.434309},{level:8,label:"1:2,311,162",scale:2311162.217155},{level:9,label:"1:1,155,581",scale:1155581.108577},{level:10,label:"1:577,791",scale:577790.554289},{level:11,label:"1:288,895",scale:288895.277144},{level:12,label:"1:144,448",scale:144447.638572},{level:13,label:"1:72,224",scale:72223.819286},{level:14,label:"1:36,112",scale:36111.909643},{level:15,label:"1:18,056",scale:18055.954822},{level:16,label:"1:9,028",scale:9027.977411},{level:17,label:"1:4,514",scale:4513.988705},{level:18,label:"1:2,257",scale:2256.994353},{level:19,label:"1:1,128",scale:1128.497176},{level:20,label:"1:564",scale:564.248588},{level:21,label:"1:282",scale:282.124294},{level:22,label:"1:141",scale:141.062147}],u={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:256,cols:256,dpi:96,preciseDpi:96,lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147}]},d={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:512,cols:512,dpi:96,preciseDpi:96,lods:[{level:0,resolution:78271.51696399994,scale:295828763.795777},{level:1,resolution:39135.75848200009,scale:147914381.897889},{level:2,resolution:19567.87924099992,scale:73957190.948944},{level:3,resolution:9783.93962049996,scale:36978595.474472},{level:4,resolution:4891.96981024998,scale:18489297.737236},{level:5,resolution:2445.98490512499,scale:9244648.868618},{level:6,resolution:1222.992452562495,scale:4622324.434309},{level:7,resolution:611.4962262813797,scale:2311162.217155},{level:8,resolution:305.74811314055756,scale:1155581.108577},{level:9,resolution:152.87405657041106,scale:577790.554289},{level:10,resolution:76.43702828507324,scale:288895.277144},{level:11,resolution:38.21851414253662,scale:144447.638572},{level:12,resolution:19.10925707126831,scale:72223.819286},{level:13,resolution:9.554628535634155,scale:36111.909643},{level:14,resolution:4.77731426794937,scale:18055.954822},{level:15,resolution:2.388657133974685,scale:9027.977411},{level:16,resolution:1.1943285668550503,scale:4513.988705},{level:17,resolution:.5971642835598172,scale:2256.994353},{level:18,resolution:.29858214164761665,scale:1128.497176},{level:19,resolution:.14929107082380833,scale:564.248588},{level:20,resolution:.07464553541190416,scale:282.124294},{level:21,resolution:.03732276770595208,scale:141.062147},{level:22,resolution:.01866138385297604,scale:70.5310735},{level:23,resolution:.009330691929342804,scale:35.265536760789715}]},v={format:"indexedVector",compressionQuality:0,antialiasing:!1},p={format:"PNG32",compressionQuality:0,antialiasing:!0}}}]);