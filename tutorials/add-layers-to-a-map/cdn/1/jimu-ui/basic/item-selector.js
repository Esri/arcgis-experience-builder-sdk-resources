System.register(["jimu-core","jimu-core/data-source","jimu-theme","jimu-ui"],(function(e,t){var s={},i={},a={},o={};return{setters:[function(e){s.DataSourceTypes=e.DataSourceTypes,s.Immutable=e.Immutable,s.React=e.React,s.SessionManager=e.SessionManager,s.SupportedItemTypes=e.SupportedItemTypes,s.classNames=e.classNames,s.css=e.css,s.dataSourceUtils=e.dataSourceUtils,s.defaultMessages=e.defaultMessages,s.esri=e.esri,s.getAppStore=e.getAppStore,s.injectIntl=e.injectIntl,s.jsx=e.jsx,s.lodash=e.lodash,s.moduleLoader=e.moduleLoader,s.polished=e.polished,s.portalUrlUtils=e.portalUrlUtils,s.proxyUtils=e.proxyUtils,s.requestUtils=e.requestUtils},function(e){i.dataSourceJsonCreator=e.dataSourceJsonCreator},function(e){a.registerStyles=e.registerStyles,a.withStyles=e.withStyles},function(e){o.AdvancedSelect=e.AdvancedSelect,o.Button=e.Button,o.Icon=e.Icon,o.Link=e.Link,o.Loading=e.Loading,o.LoadingType=e.LoadingType,o.Nav=e.Nav,o.NavItem=e.NavItem,o.NavLink=e.NavLink,o.PanelHeader=e.PanelHeader,o.Popper=e.Popper,o.Select=e.Select,o.TextInput=e.TextInput,o.defaultMessages=e.defaultMessages}],execute:function(){e((()=>{var e={42957:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 2.443 5.851 14 0 8.115l1.45-1.538 4.31 4.334L14.463 1z" clip-rule="evenodd"></path></svg>'},11167:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2V4a2 2 0 0 1 2-2h8a2 2 0 0 0-2-2z"></path><path fill="#000" fill-rule="evenodd" d="M6 4a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm5.489 2.938c-.786-.786-1.728-1.078-2.829-.876a.402.402 0 0 0-.212.68l1.619 1.618a.402.402 0 0 1 0 .569l-1.138 1.138a.402.402 0 0 1-.569 0L6.742 8.448a.402.402 0 0 0-.68.212c-.202 1.1.09 2.043.876 2.829a3.22 3.22 0 0 0 3.532.688l1.588 1.587a.805.805 0 0 0 1.137 0l.57-.569a.805.805 0 0 0 0-1.137l-1.588-1.588a3.22 3.22 0 0 0-.688-3.532" clip-rule="evenodd"></path></svg>'},13372:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4.751a2 2 0 0 0-.495-1.317L12.098.683A2 2 0 0 0 10.592 0zm3.325 3.077c1.376-.252 2.554.114 3.536 1.095a4.024 4.024 0 0 1 .86 4.416l1.985 1.984c.392.393.392 1.03 0 1.422l-.712.712a1.006 1.006 0 0 1-1.422 0L8.588 10.72a4.024 4.024 0 0 1-4.416-.86c-.981-.982-1.347-2.16-1.095-3.536a.503.503 0 0 1 .85-.265L5.95 8.083a.503.503 0 0 0 .711 0l1.422-1.422a.503.503 0 0 0 0-.71L6.06 3.926a.503.503 0 0 1 .265-.85" clip-rule="evenodd"></path></svg>'},73982:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062m-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643zM6.244 10.6zH5.43zM.961 9.8h4.88c.211 0 .359.19.359.4a1.8 1.8 0 0 0 3.555.4h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755c.03-.129.045-.263.045-.4 0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356z" clip-rule="evenodd"></path></svg>'},93898:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m5.003 4.404.778.778a.5.5 0 1 0 .707-.707l-2.12-2.122a.5.5 0 0 0-.708.708l.63.63A4.481 4.481 0 0 0 3.307 6.5c0 .515.087 1.01.246 1.47a9.794 9.794 0 0 0 1.014-.144 3.49 3.49 0 0 1-.26-1.326c0-.786.26-1.512.697-2.096M7.806 3c-.396 0-.778.066-1.134.188l-.767-.768A4.483 4.483 0 0 1 7.806 2c1.477 0 2.787.711 3.608 1.81-.23.26-.465.507-.702.738A3.497 3.497 0 0 0 7.806 3m-1.76 6.525c-.443.126-.87.223-1.276.296a4.483 4.483 0 0 0 2.536 1.152V13h-1.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-1.5v-2.027a4.5 4.5 0 0 0 3.952-5.14 14.98 14.98 0 0 1-.958.881 3.5 3.5 0 0 1-5.255 2.811m7.348-6.307a.49.49 0 0 1 .123.691c-3.456 4.73-8.25 5.903-10.712 5.872a.47.47 0 0 1-.453-.523.537.537 0 0 1 .544-.476c2.197.003 6.592-1.072 9.796-5.438a.514.514 0 0 1 .702-.126" clip-rule="evenodd"></path></svg>'},46530:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13 4s-2.267-.168-3-.5c-.385-.174-.628-.478-.86-.767C8.837 2.353 8.554 2 8 2c-.554 0-.837.353-1.14.733-.232.289-.475.593-.86.767-.734.332-3 .5-3 .5s.077 3.846 1 6c.87 2.03 4 4 4 4s.288-.181.713-.49a3.5 3.5 0 0 0 3.916-5.788C12.963 5.862 13 4 13 4m-1.299 3.212c.061-.38.11-.761.151-1.128.048-.44.081-.845.103-1.18a16.064 16.064 0 0 1-1.371-.204c-.326-.065-.701-.155-.996-.289-.626-.283-1.032-.8-1.25-1.078a5.88 5.88 0 0 0-.078-.1c-.214-.26-.248-.24-.258-.234L8 3l-.002-.001c-.01-.006-.044-.025-.258.235l-.079.1c-.217.276-.623.794-1.249 1.077-.295.134-.67.224-.996.288a16.061 16.061 0 0 1-1.371.204c.022.336.055.74.103 1.18.133 1.217.372 2.591.771 3.523.336.783 1.174 1.656 2.05 2.389.241.202.475.385.685.543a3.5 3.5 0 0 1 4.047-5.327M13 10.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0" clip-rule="evenodd"></path></svg>'},97472:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13 4s-2.267-.168-3-.5c-.385-.174-.628-.478-.86-.767C8.837 2.353 8.554 2 8 2c-.554 0-.837.353-1.14.733-.232.289-.475.593-.86.767-.734.332-3 .5-3 .5s.077 3.846 1 6c.87 2.03 4 4 4 4s3.13-1.97 4-4c.923-2.154 1-6 1-6m-5 8.791a16.97 16.97 0 0 0 1.032-.796c.875-.733 1.713-1.606 2.049-2.389.4-.932.638-2.306.771-3.522.048-.44.081-.845.103-1.18a16.064 16.064 0 0 1-1.371-.204c-.326-.065-.701-.155-.996-.289-.626-.283-1.032-.8-1.25-1.078a5.88 5.88 0 0 0-.078-.1c-.214-.26-.248-.24-.258-.234L8 3l-.002-.001c-.01-.006-.044-.025-.258.235a5.88 5.88 0 0 0-.079.1c-.217.276-.623.794-1.249 1.077-.295.134-.67.224-.996.288a16.061 16.061 0 0 1-1.371.204c.022.336.055.74.103 1.18.133 1.217.372 2.591.771 3.523.336.783 1.174 1.656 2.05 2.389.384.322.749.595 1.031.796" clip-rule="evenodd"></path></svg>'},2534:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 3.5v9c0 1.933-3.134 3.5-7 3.5s-7-1.567-7-3.5v-9C1 1.567 4.134 0 8 0s7 1.567 7 3.5M2 5.304V6.5C2 7.692 4.615 9 8 9s6-1.308 6-2.5V5.304C12.775 6.32 10.546 7 8 7s-4.775-.68-6-1.696M8 10c2.546 0 4.775-.68 6-1.696V9.5c0 1.192-2.615 2.5-6 2.5s-6-1.308-6-2.5V8.304C3.225 9.32 5.454 10 8 10m6 1.304C12.775 12.32 10.546 13 8 13s-4.775-.68-6-1.696V12.5C2 13.692 4.615 15 8 15s6-1.308 6-2.5zM14 3.5C14 4.692 11.385 6 8 6S2 4.692 2 3.5 4.615 1 8 1s6 1.308 6 2.5" clip-rule="evenodd"></path></svg>'},33869:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.522.522 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.508.508 0 0 1-.73 0L1 7.5l4.743-4.846a.508.508 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},58959:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1.5 3a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zM1 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M1.5 9a.5.5 0 0 0 0 1h10a.5.5 0 0 0 0-1zM1.5 12a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},99820:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1.5 13a.5.5 0 0 1 0-1h4a.5.5 0 0 1 0 1zM1 9.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5M1.5 7a.5.5 0 0 1 0-1h10a.5.5 0 0 1 0 1zM1.5 4a.5.5 0 0 1 0-1h13a.5.5 0 0 1 0 1z"></path></svg>'},30224:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},24632:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#181818" d="M1.998 8.5V16h1V8.5h1v-1h-1V0h-1v7.5h-1v1zM7.998 0v3.5h-1v1h1V16h1V4.5h1v-1h-1V0zM13.998 11.5V0h1v11.5h1v1h-1V16h-1v-3.5h-1v-1z"></path></svg>'},88866:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},50342:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m7 11.5 5.354-5.354-.708-.707L7 10.086 4.354 7.439l-.708.707z"></path><path fill="#000" fill-rule="evenodd" d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m15 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0" clip-rule="evenodd"></path></svg>'},48891:e=>{"use strict";e.exports=s},11840:e=>{"use strict";e.exports=i},34796:e=>{"use strict";e.exports=a},30726:e=>{"use strict";e.exports=o}},t={};function r(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{"use strict";r.r(l),r.d(l,{DataBadge:()=>O,ItemCategory:()=>L,ItemDetail:()=>T,ItemList:()=>ne,ItemSelector:()=>Ie,ItemSelectorMode:()=>P,ItemTypes:()=>s.SupportedItemTypes,SortField:()=>D,SortOrder:()=>E,_ItemSelector:()=>xe});var e={};r.r(e),r.d(e,{DataBadge:()=>n,ItemDetail:()=>o,ItemList:()=>i,ItemSelector:()=>a});var t=r(34796),s=r(48891);function i(e){const t=e.theme;return s.css`
    .modal-dialog{
      max-width: auto;
    }

    .two-line-truncate{
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      word-break: break-all;
      word-wrap: break-word;
    }

    .loading-container{
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
    }

    .empty-placeholder{
      padding: ${s.polished.rem(16)};
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      .empty-placeholder-text, .empty-placeholder-icon{
        display: table;
        margin: 0 auto;
      }
      .empty-placeholder-text{
        color: ${t.colors.palette.dark[400]};
        font-size: ${s.polished.rem(14)};
        margin-top: 16px;
        text-align: center;
      }
      .empty-placeholder-icon{
        color: ${t.colors.palette.secondary[800]};
      }
    }

    .mt13{
      margin-top: ${s.polished.rem(13)};
    }

    .mt10{
      margin-top: ${s.polished.rem(10)};
    }

    .ds-thumbnail{
      width:  ${s.polished.rem(18)};
      height:  ${s.polished.rem(18)};
      background-color: #0095DB;
      .ds-thumbnail-icon {
        color: #FFFFFF;
      }
    }

    .ds-type{
      font-size: ${s.polished.rem(13)};
      color: ${t.colors.palette.dark[800]};
      max-width: ${s.polished.rem(168)};
    }

    .component-item-list{
      width: 100%;
      height: 100%;
      padding: 0;
      position: relative;

      .detail-reference {
        width: 0;
        height: 100%;
        display: inline;
      }

      .list-container{
        overflow-x: hidden;
        overflow-y: auto;
        padding-top: 0.25rem;
      }

      .item-card-container{
        &:hover{
          border-color: transparent !important;
        }
      }

      .item-card-container.item-border-transparent{
        border: ${s.polished.rem(1)} solid transparent;
      }

      .item-badge-container{
        position: absolute;
        top: ${s.polished.rem(8)};
        left: ${s.polished.rem(8)};
      }

      .item-active-icon, .item-part-active-icon{
        position: absolute;
        top: -2px;
        right: -2px;

        .item-active-icon-container, .item-part-active-icon-container{
          width: ${s.polished.rem(26)};
          height: ${s.polished.rem(26)};
          line-height: ${s.polished.rem(26)};
          color: ${t.colors.secondary};
          background-color: ${t.colors.palette.primary[600]};
        }

        .item-part-active-icon-container{
          padding: ${s.polished.rem(3)};
        }

      }

      .item-part-active-icon-container{
        .item-part-active-icon-innerbox{
          width: ${s.polished.rem(18)};
          height: ${s.polished.rem(18)};
          background-color: ${t.colors.palette.secondary[300]};
          >div{
            width: ${s.polished.rem(10)};
            height: ${s.polished.rem(10)};
            border-radius: ${s.polished.rem(1)};
            background-color: ${t.colors.palette.primary[700]};
          }
        }
      }

      &.all-mode{
        @media only screen and (max-width: 1210px){
          .item-list{
            width: 540px;
          }
        }

        @media only screen and (min-width: 1210px){
          .item-list{
            width: 810px;
          }
        }

        @media only screen and (min-width: 1480px){
          .item-list{
            width: 1080px;
          }
        }

        @media only screen and (min-width: 1750px){
          .item-list{
            width: 1350px;
          }
        }

        @media only screen and (min-width: 2020px){
          .item-list{
            width: 1620px;
          }
        }

        @media only screen and (min-width: 2290px){
          .item-list{
            width: 1890px;
          }
        }

        @media only screen and (min-width: 2560px){
          .item-list{
              width: 2160px;
          }
        }

        @media only screen and (min-width: 2830px){
          .item-list{
              width: 2430px;
          }
        }

        @media only screen and (min-width: 3100px){
          .item-list{
              width: 2700px;
          }
        }

        .item-list{
          display: flex;
          flex-wrap: wrap;
          margin-left: -0.5rem;
          margin-right: -0.5rem;
          overflow: visible;
          min-width: ${s.polished.rem(540)};

          .item{
            width: ${s.polished.rem(240)};
            margin: 0 ${s.polished.rem(15)} ${s.polished.rem(30)} ${s.polished.rem(15)};

            .item-border-color-transparent{
              border: 2px solid transparent;
              .item-card{
                border: 0;
              }
              &:hover{
                border-color: ${t.colors.palette.primary[600]};
                .item-card{
                  border-color: transparent !important;
                }
              }
            }
            .item-border-color-selected{
              border: 2px solid ${t.colors.palette.primary[600]};
              .item-card{
                border-color: transparent !important;
              }
            }
            .item-border-color-disabled{
              border: 2px solid ${t.colors.palette.dark[500]};
              &:hover{
                border-color: ${t.colors.palette.dark[500]};
              }
            }
            .item-background-color-disabled{
              background-color: ${t.colors.palette.dark[500]};
            }

            .item-card-container{
              padding-bottom: 122%;
              position: relative;
              overflow: hidden;

              .item-card{
                position: absolute;
                background-color: ${t.colors.secondary};

                .item-info-container{
                  padding: ${s.polished.rem(12)};
                }

                .item-info-icon{
                  cursor: pointer;
                  margin-right: -4px;
                }

                .item-sub-label{
                  width: calc(100% - 30px);
                  font-size: ${s.polished.rem(13)};
                  color: ${t.colors.palette.dark[600]};
                }

                .item-label{
                  font-size: ${s.polished.rem(16)};
                  line-height: ${s.polished.rem(20)};
                  color: ${t.colors.palette.dark[800]};
                  height: ${s.polished.rem(40)};
                }

                .item-thumbnail{
                  background-size: 100% 100%;
                  background-position: top center;
                  cursor: pointer;
                  height: 56%;
                }
              }
            }
          }
        }
      }

      &.simple-mode{
        .item-list, .item{
          width: 100%;
        }

        .item-border-color-transparent{
          border: 1px solid transparent;
          .item-card{
            border: 0;
          }
          &:hover{
            border-color: ${t.colors.palette.primary[600]};
            .item-card{
              border-color: transparent !important;
            }
          }
        }
        .item-border-color-selected{
          border: 1px solid ${t.colors.palette.primary[600]};
          .item-card{
            border-color: transparent !important;
          }
        }
        .item-border-color-disabled{
          border-color: ${t.colors.palette.dark[500]};
          &:hover{
            border-color: ${t.colors.palette.dark[500]};
          }
        }

        .component-item-detail{
          border: 0 !important;
        }
        .item-detail-page-container{
          height: 100%;
          width: 100%;
          position: absolute;
          top: 0;
          background-color: ${t.colors.palette.light[300]};
          .item-detail-container {
            height: calc(100% - 100px);
          }
          .add-btn {
            background-color: ${t.colors.palette.light[500]};
            box-shadow: 0px -4px 4px rgba(0, 0, 0, 0.25);
            height: 64px;
            position: absolute;
            bottom: 0;
          }
        }
        .item-card{
          position: relative;
          background-color: ${t.colors.secondary};
          padding: 0;
          .item-line-1{
            padding: 7px;
          }
          .item-line-2 {
            padding: 3px 7px;
            border-top: 1px solid ${t.colors.palette.light[600]};
            .item-line-2-1 {
              width: calc(100% - 30px)
            }
          }
          .item-badge-container{
            position: absolute;
            top: ${s.polished.rem(8)};
            left: ${s.polished.rem(8)};
          }
          .item-active-icon{
            position: absolute;
            top: -1px;
            right: -1px;
            .item-active-icon-container{
              width: 0;
              height: 0;
              border-top: ${s.polished.rem(12)} ${t.colors.palette.primary[700]} solid;
              border-left: ${s.polished.rem(12)} transparent solid;
              background-color: transparent;
            }
            .item-active-icon-container.item-active-icon-diabled{
              border-top-color: ${t.colors.palette.dark[500]};
            }
          }
          .item-thumbnail{
            width: 40px;
            height: 40px;
            background-size: cover;
            background-position: center;
          }
          .item-label{
            width: calc(100% - 40px);
            font-size: ${s.polished.rem(14)};
            color: ${t.colors.palette.dark[800]};
          }
          .item-sub-label{
            width: calc(100% - 20px);
            font-size: ${s.polished.rem(13)};
            color: ${t.colors.palette.dark[600]};
          }
        }
      }

    }

  `}function a(e){const t=e.theme;return s.css`
    .component-item-selector{
      .item-selector-search{
        .search-input::-ms-clear{
          display: none;
        }
      }

      &.all-mode{
        .item-list-container{
          height: calc(100% - 55px);
        }

        .category-container{
          height: calc(100% - 60px);
        }

        .item-selector-search{
          position: relative;
          margin-left: ${s.polished.rem(50)};
        }

        .search-input{
          min-width: ${s.polished.rem(120)};
          input {
            height: 32px;
            line-height: 32px;
          }
        }

        @media only screen and (max-width: 1490px){
          &,.search-input{
            width: 100%;
          }
        }

        @media only screen and (min-width: 1490px){
          &{
            width: auto;
          }
          .search-input{
            width: ${s.polished.rem(400)};
          }
        }

        @media only screen and (max-width: 1000px){
          margin-left: ${s.polished.rem(20)};
        }
      }

      &.simple-mode{
        .item-list-container{
          height: 100%;
        }
        .category-container{
          height: calc(100% - 116px);
        }
        .category-container-with-group-select {
          height: calc(100% - 144px);
        }
        .category-container-without-select{
          height: 100%;
          overflow: hidden;
        }
        .item-selector-search-container {
          width: 100%;
          margin-top: ${s.polished.rem(8)};
          margin-bottom: ${s.polished.rem(16)};
        }
        .item-selector-search {
          overflow: hidden;
          .search-input {
            font-size: ${s.polished.rem(13)};
          }
        }
      }

      .category-nav{
        .nav-item{
          .nav-link{
            .jimu-nav-link-wrapper{
              font-size: ${s.polished.rem(16)};
            }
          }
        }
        .nav-item.active-tab{
          .nav-link{
            border-bottom: 3px solid ${t.colors.palette.primary[600]};
            padding: 0;
            .jimu-nav-link-wrapper{
              color: ${t.colors.black};
              font-weight: 500;
            }
          }
        }
      }

      .url-input-hint-label{
        font-size: ${s.polished.rem(12)};
        color: ${t.colors.palette.dark[400]};
      }

      .font-size-12{
        font-size: ${s.polished.rem(12)};
      }

      .mt-30{
        margin-top: ${s.polished.rem(30)};
      }

      .mb-20{
        margin-bottom: ${s.polished.rem(20)};
      }

      .nav.nav-underline{
        border: 0;
        .nav-item:not(:last-child){
          @media only screen and (max-width: 1100px){
            &{
              margin-right: ${s.polished.rem(10)};
            }
          }
          @media only screen and (min-width: 1100px){
            &{
              margin-right: ${s.polished.rem(25)};
            }
          }
          @media only screen and (min-width: 1300px){
            &{
              margin-right: ${s.polished.rem(40)};
            }
          }
        }
      }

      .item-selector-sort{
        margin-right: -${s.polished.rem(16)};
        .item-selector-sort-by{
          color: ${t.colors.palette.dark[400]};
          font-size: ${s.polished.rem(13)};
          height: ${s.polished.rem(32)};
          .item-selector-sort-select{
            width: ${s.polished.rem(140)};
            padding: 2px 6px;
            font-size: ${s.polished.rem(13)};
            height: ${s.polished.rem(26)};
          }
        }
      }
    }

  `}function o(e){const t=e.theme;return s.css`
  .component-item-detail{
    background: ${t.colors.palette.light[300]};
    overflow: auto;
    padding: 0 16px 16px 16px;
    border-left: 1px solid ${t.colors.palette.light[800]};
    border-right: 1px solid ${t.colors.palette.light[800]};
    .ml-12{
      margin-left: ${s.polished.rem(12)};
    }
    .container-fluid{
      padding: 0 !important;
    }
    z-index: 3;
    font-size: ${s.polished.rem(14)};
    .small-text{
      font-size: ${s.polished.rem(13)};
    }
    .html-container{
      *{
        color: ${t.colors.black} !important;
        font-size: ${s.polished.rem(14)} !important;
        font-weight: normal !important;
        font-family: inherit !important;
        background: ${t.colors.palette.light[300]} !important;
      }
    }
    .item-header{
      height: 41px;
      border-bottom: 1px solid ${t.colors.palette.light[800]};
      height: ${s.polished.rem(45)};
      margin-left: -16px;
      margin-right: -16px;
      .item-header-title{
        font-size: 16px;
        line-height: 41px;
      }
    }
    .item-close{
      cursor: pointer;
      margin-right: -4px;
    }
    .item-img{
      img{
        width: 100%;
      }
    }
    .item-line{
      width: 100%;
      height: 1px;
      border-bottom: 1px solid ${t.colors.palette.light[800]};
    }
    .item-detial-title, .item-detial-title:hover, .item-detial-title:focus, .item-detial-title:active{
      outline: none;
      box-shadow: 0 0 0 !important;
      border: 0 !important;
      font-size: 16px;
      white-space: normal !important;
      color: ${t.colors.black};
      .item-detial-title-text{
        max-width: 290px;
      }
    }

    .ds-thumbnail{
      width:  ${s.polished.rem(18)};
      height:  ${s.polished.rem(18)};
      background-color: ${t.colors.palette.info[400]};
    }

    .ds-type{
      font-size: ${s.polished.rem(13)};
      color: ${t.colors.palette.dark[800]};
      max-width: ${s.polished.rem(168)};
    }
  }

  `}function n(e){const t=e.theme;return s.css`
    .badge{
      width: ${s.polished.rem(18)};
      height: ${s.polished.rem(18)};
      border-radius: ${s.polished.rem(9)};
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 2px;
      svg{
        color: ${t.colors.black};
      }
    }

    .auth{
      background-color: ${t.colors.palette.success[300]};
    }

    .living-atlas, .primium, .subscriber{
      background-color: ${t.colors.palette.info[500]};
    }

  `}var c=r(30726),p=r(11840),d=r(50342),m=r.n(d);const h=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:m()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var u=r(93898),g=r.n(u);const v=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:g()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var y=r(97472),f=r.n(y);const b=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:f()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var S=r(46530),w=r.n(S);const x=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:w()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var I=function(e,t,s,i){return new(s||(s=Promise))((function(a,o){function r(e){try{n(i.next(e))}catch(e){o(e)}}function l(e){try{n(i.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}n((i=i.apply(e,t||[])).next())}))};const N={};class j extends s.React.PureComponent{constructor(e){super(e),this.__unmounted=!1,this.fetchItemInfo=(e,t,i=!0)=>I(this,void 0,void 0,(function*(){if(!e||!t)return yield Promise.reject();const a=this.getCachePromiseId(e,t);return i&&N[a]||(N[a]=s.requestUtils.requestWrapper(t,(i=>I(this,void 0,void 0,(function*(){return yield s.esri.restPortal.getItem(e,{portal:s.portalUrlUtils.getPortalRestUrl(t),authentication:i})}))))),yield N[a]})),this.getCachePromiseId=(e,t)=>`${t}-${e}`,this.state={item:null}}componentDidMount(){this.__unmounted=!1,!this.props.item&&this.props.itemId&&this.props.portalUrl&&this.fetchItemInfo(this.props.itemId,this.props.portalUrl).then((e=>{this.__unmounted||this.setState({item:e})}))}componentDidUpdate(e,t){this.props.item||e.portalUrl===this.props.portalUrl&&e.itemId===this.props.itemId||this.fetchItemInfo(this.props.itemId,this.props.portalUrl,!1).then((e=>{this.__unmounted||this.setState({item:e})}),(()=>{this.__unmounted||this.setState({item:null})})),this.props.item&&this.setState({item:null})}componentWillUnmount(){this.__unmounted=!0}render(){var e,t;if(!this.props.item&&!this.props.url&&!this.state.item)return null;const i=this.props.item||this.state.item,a=s.proxyUtils.isPremium(i,this.props.url),o=s.proxyUtils.isSubscriber(i,this.props.url),r=(null===(t=null===(e=null==i?void 0:i.contentStatus)||void 0===e?void 0:e.toLowerCase())||void 0===t?void 0:t.indexOf("authoritative"))>-1||o,l="livingatlas"===(null==i?void 0:i.groupDesignations)||o,n=this.props.intl.formatMessage({id:"authoritativeBadgeTooltip",defaultMessage:c.defaultMessages.authoritativeBadgeTooltip}),p=this.props.intl.formatMessage({id:"livingAtlasBadgeTooltip",defaultMessage:c.defaultMessages.livingAtlasBadgeTooltip}),d=this.props.intl.formatMessage({id:"premiumBadgeTooltip",defaultMessage:c.defaultMessages.premiumBadgeTooltip}),m=this.props.intl.formatMessage({id:"subscriberBadgeTooltip",defaultMessage:c.defaultMessages.subscriberBadgeTooltip});return(0,s.jsx)("div",{className:(0,s.classNames)("h-100 d-flex justify-content-center align-items-center",{[this.props.className]:!!this.props.className}),id:this.props.id},r&&(0,s.jsx)("div",{className:"auth badge"},(0,s.jsx)(h,{className:"auth-icon",size:"s",title:n,role:"img"})),l&&(0,s.jsx)("div",{className:"living-atlas badge"},(0,s.jsx)(v,{className:"living-atlas-icon",size:"s",title:p,role:"img"})),a&&(0,s.jsx)("div",{className:"primium badge"},(0,s.jsx)(x,{className:"primium-icon",size:"s",title:d,role:"img"})),o&&!a&&(0,s.jsx)("div",{className:"subscriber badge"},(0,s.jsx)(b,{className:"subscriber-icon",size:"s",title:m,role:"img"})))}}const M=(0,t.withStyles)((0,s.injectIntl)(j),"DataBadge"),O=M,$=[s.SupportedItemTypes.GeocodingService,s.SupportedItemTypes.GeometryService,s.SupportedItemTypes.GeoprocessingService,s.SupportedItemTypes.NetworkAnalysisService];function C(e){var t,s;return $.includes(null==e?void 0:e.type)?(null===(s=null===(t=e.url)||void 0===t?void 0:t.replace(/\//g,""))||void 0===s?void 0:s.endsWith("GPServer"))?r(11167):r(13372):r(2534)}const R=new(0,s.esri.Sanitizer);class k extends s.React.PureComponent{constructor(){super(...arguments),this.__unmount=!1,this.closeBtnRef=s.React.createRef(),this.onKeyDown=e=>{var t,s,i;"Esc"!==e.key&&"Escape"!==e.key||(e.target===this.closeBtnRef.current?null===(s=(t=this.props).onClose)||void 0===s||s.call(t):null===(i=this.closeBtnRef.current)||void 0===i||i.focus())}}render(){if(!this.props.item)return null;const e=s.SessionManager.getInstance().getSessionByUrl(this.props.portalUrl),t=this.props.item.thumbnail&&this.props.portalUrl?(null==e?void 0:e.token)?`${this.props.portalUrl.replace(/\/$/,"")}/sharing/rest/content/items/${this.props.item.id}/info/${this.props.item.thumbnail}?token=${e.token}`:`${this.props.portalUrl.replace(/\/$/,"")}/sharing/rest/content/items/${this.props.item.id}/info/${this.props.item.thumbnail}`:"Web Scene"===this.props.item.type?"https://static.arcgis.com/images/scene.png":"https://static.arcgis.com/images/desktopapp.png",i=this.props.item.id&&this.props.portalUrl?`${this.props.portalUrl.replace(/\/sharing\/rest/,"").replace(/\/$/,"")}/home/item.html?id=${this.props.item.id}`:null,{title:a,owner:o,modified:r,description:l,snippet:n}=this.props.item,d=R.sanitize(l),m=R.sanitize(n),h=this.props.item.id,u=p.dataSourceJsonCreator.createDataSourceJsonByItemInfo(h,this.props.item,this.props.portalUrl),g=s.dataSourceUtils.getDsTypeString(null==u?void 0:u.type,this.props.intl),v=`${h}-desc`;return(0,s.jsx)("div",{className:(0,s.classNames)("h-100",{[this.props.className]:!!this.props.className}),onKeyDown:this.onKeyDown},(0,s.jsx)("div",{className:"h-100 component-item-detail",style:this.props.style},!this.props.hideHeader&&(0,s.jsx)("div",{className:"item-header d-flex justify-content-between"},(0,s.jsx)(c.PanelHeader,{level:1,className:"p-4",showClose:!!this.props.onClose,onClose:this.props.onClose,closeButtonRef:this.closeBtnRef,title:this.props.intl.formatMessage({id:"details",defaultMessage:c.defaultMessages.details})})),(0,s.jsx)("div",{className:"container-fluid"},(0,s.jsx)(c.Link,{to:i,className:"col item-detial-title p-0 text-left mt-4",target:"_blank","aria-label":a,"aria-describedby":v},(0,s.jsx)("div",{className:"item-img"},(0,s.jsx)("img",{src:t,alt:a})),(0,s.jsx)("div",{className:"mt-2 mb-2"},(0,s.jsx)("h5",{className:"w-100 text-truncate item-detial-title",title:a},a))),(0,s.jsx)("div",{className:"container-fluid",id:v},(0,s.jsx)("div",{className:"d-flex align-items-center w-100 mt-1",title:g},(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail"},(0,s.jsx)(c.Icon,{icon:u?s.dataSourceUtils.getDsIcon(u):C(this.props.item),className:"text-dark",size:"12"})),(0,s.jsx)("div",{className:"flex-grow-1 text-truncate pl-2 ds-type"},(0,s.jsx)("div",{className:"text-truncate ds-type-name"},g))),(0,s.jsx)("div",{className:"row mt-2 mb-2"},(0,s.jsx)("div",{className:"col small-text"},this.props.intl.formatMessage({id:"ownerIs",defaultMessage:c.defaultMessages.ownerIs},{ownerName:o||""}))),(0,s.jsx)("div",{className:"row mt-2 mb-2"},(0,s.jsx)("div",{className:"col small-text"},this.props.intl.formatMessage({id:"updatedOn",defaultMessage:c.defaultMessages.updatedOn},{updatedDate:"number"==typeof r?this.props.intl.formatDate(new Date(r)):""}))),(0,s.jsx)("div",{className:"row mt-2 mb-2"},(0,s.jsx)("div",{className:"ml-12"},(0,s.jsx)(M,{item:this.props.item}))),(0,s.jsx)("div",{className:"row mt-2 mb-2"},(0,s.jsx)("div",{className:"col item-line"})),n&&(0,s.jsx)("div",{className:"row mt-2 mb-2"},(0,s.jsx)("p",{className:"col html-container",dangerouslySetInnerHTML:{__html:m}})),(0,s.jsx)("div",{className:"row mt-2 mb-2"},(0,s.jsx)("h6",{className:"col"},this.props.intl.formatMessage({id:"description",defaultMessage:c.defaultMessages.description}))),(0,s.jsx)("div",{className:"row mt-2 mb-2"},(0,s.jsx)("div",{className:"col html-container",dangerouslySetInnerHTML:{__html:d}}))))))}}const T=(0,s.injectIntl)((0,t.withStyles)(k,"ItemDetail"));var L,D,E,P,A;!function(e){e.MyContent="MY_CONTENT",e.MyGroup="MY_GROUP",e.MyOrganization="MY_ORGANIZATION",e.Public="PUBLIC",e.LivingAtlas="LIVING_ATLAS",e.Curated="CURATED"}(L||(L={})),function(e){e.Modified="modified",e.Title="title",e.Views="numViews"}(D||(D={})),function(e){e.Desc="desc",e.Asc="asc"}(E||(E={})),function(e){e.Simple="SIMPLE",e.All="ALL"}(P||(P={})),function(e){e.FeatureLayer="Feature Layer",e.TileLayer="Tile Layer",e.MapImageLayer="Map Image Layer",e.ImageryLayer="Imagery Layer",e.SceneLayer="Scene Layer",e.TiledImageryLayer="Tiled Imagery Layer",e.ElevationLayer="Elevation Layer",e.Table="Table",e.LayerFiles="Layer Files",e.WebMap="Web Map",e.Scenes="Scenes",e.GeometricOperations="Geometric Operations",e.Locator="Locator",e.GeoprocessingTasks="Geoprocessing Tasks",e.NetworkAnalysis="Network Analysis",e.GroupLayer="Group Layer"}(A||(A={}));var G=r(88866),z=r.n(G);const U=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:z()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var F=r(42957),B=r.n(F);const V=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:B()},a)):s.React.createElement("svg",Object.assign({className:o},a))};let _=null;class W extends s.React.PureComponent{constructor(e){super(e),this.__unmount=!1,this.onItemClicked=e=>{return t=this,s=void 0,a=function*(){if(this.props.selected||this.props.partSelected)this.props.onRemove(e,this.props.item);else if(!this.state.isLoading)if(this.setState({isLoading:!0}),this.props.isSelectable){let t;try{t=yield this.props.isSelectable(this.props.item),t&&this.props.onAdd(e,this.props.item).finally((()=>{this.setState({isLoading:!1})}))}catch(e){console.warn("Failed to check whether item is selectable ",e)}t||this.setState({isLoading:!1})}else this.props.onAdd(e,this.props.item).finally((()=>{this.setState({isLoading:!1})}))},new((i=void 0)||(i=Promise))((function(e,o){function r(e){try{n(a.next(e))}catch(e){o(e)}}function l(e){try{n(a.throw(e))}catch(e){o(e)}}function n(t){var s;t.done?e(t.value):(s=t.value,s instanceof i?s:new i((function(e){e(s)}))).then(r,l)}n((a=a.apply(t,s||[])).next())}));var t,s,i,a},this.onItemKeyDown=e=>{e.target!==e.currentTarget||"Enter"!==e.key&&" "!==e.key||this.onItemClicked(e)},this.onToggleDetail=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.onToggleDetail(e,this.props.item)},this.state={dataComponentsUtils:null,isLoading:!1}}componentDidMount(){_||(_=s.moduleLoader.loadModule("jimu-ui/advanced/data-source-selector")),_.then((e=>{const{dataComponentsUtils:t}=e;this.__unmount||this.setState({dataComponentsUtils:t})}))}componentWillUnmount(){this.__unmount=!0}render(){if(!this.props.item||!this.state.dataComponentsUtils)return null;const e=this.props.item.id,t=p.dataSourceJsonCreator.createDataSourceJsonByItemInfo(e,this.props.item,this.props.portalUrl);if(this.props.hideSingleLayer&&((null==t?void 0:t.type)===s.DataSourceTypes.FeatureLayer||(null==t?void 0:t.type)===s.DataSourceTypes.SceneLayer))return null;const i=q(this.props.item),a=K(this.props.item),o=Y(this.props.item);return s.React.createElement("div",{className:"item",onClick:this.onItemClicked,onKeyDown:this.onItemKeyDown,role:"option",tabIndex:0,"aria-label":this.props.item.title,"aria-describedby":`${i} ${a} ${o}`,"aria-checked":!!this.props.selected||!!this.props.partSelected&&"mixed"},this.props.mode===P.Simple?s.React.createElement(J,{item:this.props.item,portalUrl:this.props.portalUrl,selected:this.props.selected,partSelected:this.props.partSelected,disableRemove:this.props.disableRemove,disableDetailPopper:this.props.disableDetailPopper,intl:this.props.intl,dsJson:t,onToggleDetail:this.onToggleDetail,ref:this.props.infoBtnRef,isLoading:this.state.isLoading||this.props.loading}):s.React.createElement(H,{item:this.props.item,portalUrl:this.props.portalUrl,selected:this.props.selected,partSelected:this.props.partSelected,disableRemove:this.props.disableRemove,disableDetailPopper:this.props.disableDetailPopper,intl:this.props.intl,dsJson:t,onToggleDetail:this.onToggleDetail,ref:this.props.infoBtnRef,isLoading:this.state.isLoading||this.props.loading}))}}const H=s.React.forwardRef((({item:e,portalUrl:t,selected:i,partSelected:a,isLoading:o,disableRemove:r,intl:l,dsJson:n,onToggleDetail:p,disableDetailPopper:d},m)=>{var h;const u=s.SessionManager.getInstance().getSessionByUrl(t),g=e.thumbnail&&t?(null==u?void 0:u.token)?`${t.replace(/\/$/,"")}/sharing/rest/content/items/${e.id}/info/${e.thumbnail}?token=${u.token}`:`${t.replace(/\/$/,"")}/sharing/rest/content/items/${e.id}/info/${e.thumbnail}`:"Web Scene"===e.type?"https://static.arcgis.com/images/scene.png":"https://static.arcgis.com/images/desktopapp.png",v=e.id&&t?`${t.replace(/\/sharing\/rest/,"").replace(/\/$/,"")}/home/item.html?id=${e.id}`:null,y=s.dataSourceUtils.getDsTypeString(null==n?void 0:n.type,l),f=q(e),b=K(e),S=Y(e);return s.React.createElement("div",{className:(0,s.classNames)("all-mode-item item-border-color-transparent",{"item-border-color-selected":i||a,"item-border-color-disabled":r})},s.React.createElement("div",{className:"item-card-container"},s.React.createElement("div",{className:(0,s.classNames)("h-100 w-100 item-card",{"surface-1":!(null===(h=window.jimuConfig)||void 0===h?void 0:h.isBuilder)})},o&&s.React.createElement("div",{className:"loading-container"},s.React.createElement(c.Loading,{type:c.LoadingType.Bar})),s.React.createElement("div",{className:"item-badge-container"},s.React.createElement(M,{item:e,id:S})),s.React.createElement("div",{className:(0,s.classNames)({"item-active-icon":i},{"d-none":!i})},s.React.createElement("div",{className:(0,s.classNames)("text-center item-active-icon-container",{"item-background-color-disabled":r})},s.React.createElement(V,{size:"m"}))),s.React.createElement("div",{className:(0,s.classNames)({"item-part-active-icon":a},{"d-none":!a})},s.React.createElement("div",{className:(0,s.classNames)("item-part-active-icon-container",{"item-background-color-disabled":r})},s.React.createElement("div",{className:"item-part-active-icon-innerbox d-flex justify-content-center align-items-center"},s.React.createElement("div",{className:(0,s.classNames)({"item-background-color-disabled":r})})))),s.React.createElement("div",{className:"w-100 item-thumbnail",style:{backgroundImage:`url(${g})`}}),s.React.createElement("div",{className:"w-100 nav flex-column item-info-container"},s.React.createElement("div",{className:"two-line-truncate item-label",title:e.title},e.title),s.React.createElement("div",{className:"d-flex align-items-center w-100 mt13",title:y},s.React.createElement("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail"},s.React.createElement(c.Icon,{icon:n?s.dataSourceUtils.getDsIcon(n):C(e),className:"ds-thumbnail-icon",size:"12"})),s.React.createElement("div",{className:"flex-grow-1 text-truncate pl-2 ds-type"},s.React.createElement("div",{className:"text-truncate ds-type-name",id:f},y))),s.React.createElement("div",{className:"d-flex justify-content-between align-items-center mt10"},s.React.createElement("div",{className:"text-truncate item-sub-label",title:e.owner||""},e.owner||"",s.React.createElement("span",{className:"sr-only",id:b},l.formatMessage({id:"ownerIs",defaultMessage:c.defaultMessages.ownerIs},{ownerName:e.owner||""}))),s.React.createElement("div",{className:"mw-50 d-flex align-items-top justify-content-end item-info-icon",title:l.formatMessage({id:"details",defaultMessage:c.defaultMessages.details})},!d&&s.React.createElement(c.Button,{type:"tertiary",size:"sm",icon:!0,onClick:p,ref:m},s.React.createElement(U,null)),d&&s.React.createElement(c.Link,{type:"tertiary",size:"sm",icon:!0,onClick:Q,to:v,target:"_blank",ref:m},s.React.createElement(U,null))))))))})),J=s.React.forwardRef((({item:e,portalUrl:t,selected:i,partSelected:a,isLoading:o,disableRemove:r,intl:l,dsJson:n,onToggleDetail:p,disableDetailPopper:d},m)=>{var h;const u=s.SessionManager.getInstance().getSessionByUrl(t),g=e.thumbnail&&t?(null==u?void 0:u.token)?`${t.replace(/\/$/,"")}/sharing/rest/content/items/${e.id}/info/${e.thumbnail}?token=${u.token}`:`${t.replace(/\/$/,"")}/sharing/rest/content/items/${e.id}/info/${e.thumbnail}`:"Web Scene"===e.type?"https://static.arcgis.com/images/scene.png":"https://static.arcgis.com/images/desktopapp.png",v=e.id&&t?`${t.replace(/\/sharing\/rest/,"").replace(/\/$/,"")}/home/item.html?id=${e.id}`:null,y=s.dataSourceUtils.getDsTypeString(null==n?void 0:n.type,l),f=i||a,b=K(e);return s.React.createElement("div",{className:(0,s.classNames)("w-100 simple-mode-item mb-2 item-border-color-transparent",{"item-border-color-selected":f,"item-border-color-disabled":r})},s.React.createElement("div",{className:(0,s.classNames)("w-100 item-card",{"surface-1":!(null===(h=window.jimuConfig)||void 0===h?void 0:h.isBuilder)})},o&&s.React.createElement("div",{className:"loading-container"},s.React.createElement(c.Loading,{type:c.LoadingType.Bar})),s.React.createElement("div",{className:(0,s.classNames)({"item-active-icon":f},{"d-none":!f})},s.React.createElement("div",{className:(0,s.classNames)("text-center item-active-icon-container",{"item-active-icon-diabled":r})})),s.React.createElement("div",{className:"item-line-1 d-flex justify-content-between align-items-center"},s.React.createElement("div",{className:"item-thumbnail d-flex justify-content-between align-items-center mr-2",style:{backgroundImage:`url(${g})`}}),s.React.createElement("div",{className:"two-line-truncate item-label",title:e.title},e.title)),s.React.createElement("div",{className:"item-line-2 d-flex justify-content-between align-items-center"},s.React.createElement("div",{className:"item-line-2-1 d-flex justify-content-start align-items-center"},s.React.createElement("div",{className:"ds-thumbnail d-flex justify-content-center align-items-center flex-shrink-0 mr-1",title:y},s.React.createElement(c.Icon,{icon:n?s.dataSourceUtils.getDsIcon(n):C(e),className:"ds-thumbnail-icon",size:"12"})),s.React.createElement("div",{className:"text-truncate item-sub-label",title:e.owner||""},e.owner||"",s.React.createElement("span",{className:"sr-only",id:b},l.formatMessage({id:"ownerIs",defaultMessage:c.defaultMessages.ownerIs},{ownerName:e.owner||""})))),s.React.createElement("div",{title:l.formatMessage({id:"details",defaultMessage:c.defaultMessages.details})},!d&&s.React.createElement(c.Button,{type:"tertiary",size:"sm",icon:!0,onClick:p,ref:m},s.React.createElement(U,null)),d&&s.React.createElement(c.Link,{type:"tertiary",size:"sm",icon:!0,onClick:Q,to:v,target:"_blank",ref:m},s.React.createElement(U,null))))))}));function q(e){return`${null==e?void 0:e.id}-type-desc`}function K(e){return`${null==e?void 0:e.id}-owner-desc`}function Y(e){return`${null==e?void 0:e.id}-badge-desc`}function Q(e){var t;e.stopPropagation(),null===(t=e.nativeEvent)||void 0===t||t.stopImmediatePropagation()}var Z=r(33869),X=r.n(Z);const ee=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:X()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var te=r(73982),se=r.n(te);const ie=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:se()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var ae=function(e,t,s,i){return new(s||(s=Promise))((function(a,o){function r(e){try{n(i.next(e))}catch(e){o(e)}}function l(e){try{n(i.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}n((i=i.apply(e,t||[])).next())}))};let oe=null;class re extends s.React.PureComponent{constructor(e){super(e),this.__unmount=!1,this.pageStart=0,this.pageSize=document?Math.max(3,Math.min(10,Math.ceil((document.body.clientWidth-440)/240)))*Math.ceil((document.body.clientHeight-180)/290):60,this.itemCache=[],this.setItems=(e,t,i,a,o,r,l,n)=>{this.fetchLivingAtlasGroupId().then((c=>{const p=this.getSearchRequestOptions(e,t,i,a,c,o,r,l,n);if(!p)return void this.setState({loaded:!0,items:[]});const d=this.getPortalUrl();s.esri.restPortal.searchItems(p).then((e=>{var t;if(!this.__unmount){const s=null===(t=e.results)||void 0===t?void 0:t.map((e=>Object.assign(Object.assign({},e),{portalUrl:d})));this.setState({loaded:!0,items:n?this.state.items.concat(s):s})}}),(e=>{this.__unmount||this.setState({loaded:!0,items:[]}),console.error(e)}))}))},this.getSearchRequestOptions=(e,t,i,a,o,r,l,n,c)=>{let p=n?`(${n}) AND`:"";Array.isArray(e)?e.forEach(((t,i)=>{let a="";t===s.SupportedItemTypes.FeatureCollection?a+=' AND -typekeywords:("Map Notes" OR "Route Layer")':t!==s.SupportedItemTypes.SceneService||this.props.allowAllSceneService||(a+=' AND typekeywords:("3DObject" OR "Point")'),p+=0===i?` ((type: "${t}"${a})`:` OR (type: "${t}"${a})`,i===e.length-1&&(p+=")")})):p+=` type:"${e}"`,t&&(Array.isArray(t)?t.forEach(((e,s)=>{p+=0===s?` AND ((${ce[e]})`:` OR (${ce[e]})`,s===t.length-1&&(p+=")")})):p+=` AND ${ce[t]}`);const d=i;c&&(this.pageStart=this.state.items.length+1);const m=(0,s.getAppStore)().getState(),h=m&&m.user;h&&this.props.category===L.MyContent?(p+=` AND owner:${h.username}`,l&&(p+=` AND ownerfolder: ${l}`)):h&&this.props.category===L.MyOrganization?p+=` AND orgid:${h.orgId}`:h&&this.props.category===L.MyGroup?(null==r?void 0:r.length)>0?p+=` AND (access:shared OR access:public OR access:org) AND (group:(${r.reduce(((e,t,s)=>0===s?t:`${e} OR ${t}`),"")}))`:p=null:this.props.category===L.LivingAtlas?o?p+=` AND group:${o}`:p=null:this.props.category===L.Curated&&this.props.curatedFilter&&(p+=` AND ${this.props.curatedFilter}`);const u=this.getPortalUrl();return p?{q:p+' AND -type:"Web Mapping Application"',sortField:d,sortOrder:a||"desc",num:this.pageSize,start:this.pageStart,authentication:s.SessionManager.getInstance().getSessionByUrl(u),portal:s.portalUrlUtils.getPortalRestUrl(u)}:null},this.getPortalUrl=()=>{var e,t;return this.props.category===L.Public&&(null===(t=null===(e=(0,s.getAppStore)().getState())||void 0===e?void 0:e.portalSelf)||void 0===t?void 0:t.isPortal)?"https://www.arcgis.com":this.props.portalUrl},this.fetchLivingAtlasGroupId=()=>ae(this,void 0,void 0,(function*(){if(oe)return yield oe;const e=(0,s.getAppStore)().getState().portalSelf,t=null==e?void 0:e.livingAtlasGroupQuery;if(t){const e={num:1,start:0,sortField:"title",sortOrder:"asc",q:t,authentication:s.SessionManager.getInstance().getSessionByUrl(this.getPortalUrl())};oe=s.esri.restPortal.searchGroups(e).then((e=>{var t;return null===(t=null==e?void 0:e.results[0])||void 0===t?void 0:t.id}))}else oe=Promise.resolve(null);return oe})),this.getWhetherItemSelected=e=>this.props.selectedItems&&this.props.selectedItems.some((t=>t===(null==e?void 0:e.id))),this.getWhetherItemPartSelected=e=>this.props.partSelectedItems&&this.props.partSelectedItems.some((t=>t===(null==e?void 0:e.id))),this.getWhetherItemLoading=e=>this.props.loadingItems&&this.props.loadingItems.some((t=>t===(null==e?void 0:e.id))),this.onScroll=e=>{const t=e.target.clientHeight,s=e.target.scrollHeight-(t+e.target.scrollTop)<=10;this.state.loaded&&s&&(this.setState({loaded:!1}),this.setItems(this.props.itemType,this.props.itemTypeCategory,this.props.sortField,this.props.sortOrder,this.getRealGroupIds(),this.props.folderId,this.props.searchValue,!0))},this.onToggleDetail=(e,t)=>{var s;this.setState({showDetailItem:(null===(s=this.state.showDetailItem)||void 0===s?void 0:s.id)===(null==t?void 0:t.id)?null:t})},this.onToggleDetailPage=e=>{this.setState({showDetailItem:null})},this.onCloseDetailClicked=()=>{var e,t;null===(t=null===(e=this.showDetailItemRef.current)||void 0===e?void 0:e.focus)||void 0===t||t.call(e),this.setState({showDetailItem:null})},this.onDetailItemAdd=(e,t)=>ae(this,void 0,void 0,(function*(){if(!this.state.isLoading)if(this.props.isSelectable){let s;this.setState({isLoading:!0});try{s=yield this.props.isSelectable(t),s&&this.onAdd(e,t).finally((()=>{this.setState({isLoading:!1})}))}catch(e){console.warn("Failed to check whether item is selectable ",e)}s||this.setState({isLoading:!1})}else this.onAdd(e,t).finally((()=>{this.setState({isLoading:!1})}))})),this.onAdd=(e,t)=>ae(this,void 0,void 0,(function*(){let e;return e=this.props.isMultiple?(yield this.getItemsByIds(this.props.selectedItems)).concat(t):[t],this.props.onSelect&&this.props.onSelect(e,t)})),this.onRemove=(e,t)=>ae(this,void 0,void 0,(function*(){if(this.disableRemove(null==t?void 0:t.id))return;let e;e=this.props.isMultiple?(yield this.getItemsByIds(this.props.selectedItems)).filter((e=>e.id!==t.id)):[],this.props.onRemove&&this.props.onRemove(e,t)})),this.getItemsByIds=e=>ae(this,void 0,void 0,(function*(){if(!e)return[];const t=e.asMutable().map((e=>this.state.items.concat(this.itemCache).find((t=>(null==t?void 0:t.id)===e)))).filter((e=>!!e));if(t.length===e.length)return t;const i=e.filter((e=>!t.some((t=>(null==t?void 0:t.id)===e))));let a="";i.forEach(((e,t)=>{a+=0===t?e:` OR ${e}`}));const o=this.getPortalUrl(),r=yield s.esri.restPortal.searchItems({q:a,authentication:s.SessionManager.getInstance().getSessionByUrl(o)}).then((e=>{var t;return null===(t=e.results)||void 0===t?void 0:t.map((e=>Object.assign(Object.assign({},e),{portalUrl:o})))}));return this.itemCache=this.itemCache.concat(r),t.concat(r)})),this.showDetailDrillInPage=()=>this.state.showDetailItem&&this.props.mode===P.Simple,this.disableRemove=e=>this.props.disableRemoveItemsSelectedOnMount&&this.selectedItemsOnMount.includes(e),this.showDetailItemRef=s.React.createRef(),this.state={loaded:!1,items:[],showDetailItem:null,isLoading:!1}}componentDidMount(){this.__unmount=!1,this.selectedItemsOnMount=this.props.selectedItems||(0,s.Immutable)([]),this.setItems(this.props.itemType,this.props.itemTypeCategory,this.props.sortField,this.props.sortOrder,this.getRealGroupIds(),this.props.folderId,this.props.searchValue)}componentDidUpdate(e,t){e.portalUrl===this.props.portalUrl&&e.category===this.props.category&&e.isMultiple===this.props.isMultiple&&this.isItemTypeSame(e.itemType,this.props.itemType)&&e.sortField===this.props.sortField&&e.searchValue===this.props.searchValue&&e.sortOrder===this.props.sortOrder&&e.folderId===this.props.folderId&&e.groupId===this.props.groupId&&e.itemTypeCategory===this.props.itemTypeCategory&&e.curatedFilter===this.props.curatedFilter||(this.setState({loaded:!1}),this.pageStart=0,this.contentNode&&(this.contentNode.scrollTop=0),this.setItems(this.props.itemType,this.props.itemTypeCategory,this.props.sortField,this.props.sortOrder,this.getRealGroupIds(),this.props.folderId,this.props.searchValue)),this.state.showDetailItem!==t.showDetailItem&&this.props.afterToggleItemDetail&&this.props.afterToggleItemDetail(this.state.showDetailItem)}componentWillUnmount(){this.__unmount=!0,this.contentNode&&this.contentNode.removeEventListener("scroll",this.onScroll)}isItemTypeSame(e,t){const s=Array.isArray(e),i=Array.isArray(t);return s&&i?e.length===t.length&&e.every((e=>t.some((t=>t===e)))):e===t}getRealGroupIds(){return this.props.groupId?[this.props.groupId]:this.getAllGroupIds()}getAllGroupIds(){var e,t;const i=null===(t=null===(e=(0,s.getAppStore)())||void 0===e?void 0:e.getState())||void 0===t?void 0:t.user;return((null==i?void 0:i.groups)||[]).map((e=>e.id))}render(){var e;if(!this.props.itemType||!this.props.portalUrl)return null;const t=(0,s.jsx)("div",{className:"item-list"},this.state.items&&this.state.items.map(((e,t)=>{var i;return(0,s.jsx)(W,{selected:this.getWhetherItemSelected(e),partSelected:this.getWhetherItemPartSelected(e),loading:this.getWhetherItemLoading(e),key:t,item:e,portalUrl:this.getPortalUrl(),onAdd:this.onAdd,intl:this.props.intl,infoBtnRef:(null===(i=this.state.showDetailItem)||void 0===i?void 0:i.id)===(null==e?void 0:e.id)&&this.showDetailItemRef,onRemove:this.onRemove,onToggleDetail:this.onToggleDetail,hideSingleLayer:this.props.hideSingleLayer,mode:this.props.mode,disableRemove:this.disableRemove(null==e?void 0:e.id),isSelectable:this.props.isSelectable,disableDetailPopper:this.props.disableDetailPopper})}))),i=(0,s.jsx)(T,{hideHeader:this.props.mode===P.Simple,item:this.state.showDetailItem,portalUrl:this.getPortalUrl(),onClose:this.props.mode!==P.Simple?this.onCloseDetailClicked:void 0}),a=this.getWhetherItemSelected(this.state.showDetailItem),o=this.getWhetherItemPartSelected(this.state.showDetailItem);return(0,s.jsx)("div",{className:(0,s.classNames)("w-100 h-100",{[this.props.className]:!!this.props.className})},(0,s.jsx)("div",{className:(0,s.classNames)("component-item-list",{"all-mode":this.props.mode!==P.Simple,"simple-mode":this.props.mode===P.Simple})},(0,s.jsx)("div",{className:"detail-reference",ref:e=>{this.detailReference=e}}),(0,s.jsx)("div",{role:"listbox",className:(0,s.classNames)("w-100 h-100 d-flex flex-wrap justify-content-center align-items-start list-container",{"px-4":this.props.mode===P.Simple}),onScroll:this.onScroll,ref:e=>{this.contentNode=e}},t,!this.state.loaded||this.state.items&&0!==this.state.items.length?null:(0,s.jsx)("div",{className:"empty-placeholder w-100"},(0,s.jsx)("div",{className:"empty-placeholder-icon"},(0,s.jsx)(ie,{size:48})),(0,s.jsx)("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:this.props.intl.formatMessage({id:"noItemFoundWarning",defaultMessage:c.defaultMessages.noItemFoundWarning})}}))),this.props.mode!==P.Simple?(0,s.jsx)(c.Popper,{open:!!this.state.showDetailItem,disablePortal:!this.props.detailReference,reference:this.props.detailReference||this.detailReference,placement:"right-start",offset:[0,0],className:"h-100",style:{width:"260px"},zIndex:99999,disableOverlayManager:!0},i):(0,s.jsx)("div",null,this.showDetailDrillInPage()&&(0,s.jsx)("div",{className:"item-detail-page-container"},(0,s.jsx)(c.Button,{type:"tertiary",size:"sm",onClick:this.onToggleDetailPage,className:"pt-4 pb-0 d-flex"},(0,s.jsx)(ee,{autoFlip:!0}),(0,s.jsx)("div",{className:"ml-2"},this.props.intl.formatMessage({id:"back",defaultMessage:c.defaultMessages.back}))),(0,s.jsx)("div",{className:"item-detail-container"},i),(0,s.jsx)("div",{className:"w-100 d-flex justify-content-center align-items-center p-4 add-btn"},this.state.isLoading&&(0,s.jsx)("div",{className:"loading-container"},(0,s.jsx)(c.Loading,{type:c.LoadingType.Bar})),(0,s.jsx)(c.Button,{type:"primary",className:"w-100 h-100",onClick:a||o?e=>this.onRemove(e,this.state.showDetailItem):e=>this.onDetailItemAdd(e,this.state.showDetailItem),disabled:this.state.isLoading||this.disableRemove(null===(e=this.state.showDetailItem)||void 0===e?void 0:e.id)},a||o?this.props.intl.formatMessage({id:"remove",defaultMessage:c.defaultMessages.remove}):this.props.intl.formatMessage({id:"add",defaultMessage:c.defaultMessages.add}))))),!this.state.loaded&&(0,s.jsx)(c.Loading,{type:c.LoadingType.Primary,width:this.props.mode===P.Simple&&30,height:this.props.mode===P.Simple&&28})))}}const le=(0,t.withStyles)((0,s.injectIntl)(re),"ItemList"),ne=le,ce={[A.FeatureLayer]:'type:("Feature Collection" OR "Feature Service" OR "WFS") -typekeywords:"Table"',[A.TileLayer]:'type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled")',[A.MapImageLayer]:'type:("Map Service" OR "WMS") -typekeywords:("Hosted" OR "Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile")',[A.ImageryLayer]:'type:"Image Service" -typekeywords:"Elevation 3D Layer" -typekeywords:"Tiled Imagery"',[A.SceneLayer]:'type:"Scene Service"',[A.TiledImageryLayer]:'type:"Image Service" typekeywords:"Tiled Imagery"',[A.ElevationLayer]:'type:"Image Service" typekeywords:"Elevation 3D Layer"',[A.Table]:'typekeywords:"Table"',[A.LayerFiles]:'type:("CSV" OR "Shapefile" OR "GeoJson") -type:("Explorer Maps" OR "Map Documents")',[A.WebMap]:'type:"Web Map" -type:"Web Mapping Application"',[A.Scenes]:'type:"Web Scene" -type:"CityEngine Web Scene"',[A.GeometricOperations]:'type:"Geometry Service"',[A.Locator]:'type:"Geocoding Service"',[A.GeoprocessingTasks]:'type:"Geoprocessing Service"',[A.NetworkAnalysis]:'type:"Network Analysis Service"',[A.GroupLayer]:'type:("Group Layer" OR "Feature Collection") -typekeywords:"Singlelayer"'};var pe=r(30224),de=r.n(pe);const me=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:de()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var he=r(99820),ue=r.n(he);const ge=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:ue()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var ve=r(58959),ye=r.n(ve);const fe=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:ye()},a)):s.React.createElement("svg",Object.assign({className:o},a))};var be=r(24632),Se=r.n(be);const we=e=>{const t=window.SVG,{className:i}=e,a=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?s.React.createElement(t,Object.assign({className:o,src:Se()},a)):s.React.createElement("svg",Object.assign({className:o},a))};class xe extends s.React.PureComponent{constructor(e){var t,i;super(e),this.__unmount=!1,this.itemCategories={[L.MyContent]:this.props.intl.formatMessage({id:"myContent",defaultMessage:c.defaultMessages.myContent}),[L.MyGroup]:this.props.intl.formatMessage({id:"myGroup",defaultMessage:c.defaultMessages.myGroup}),[L.MyOrganization]:this.props.intl.formatMessage({id:"myOrganization",defaultMessage:c.defaultMessages.myOrganization}),[L.Public]:this.props.intl.formatMessage({id:"public",defaultMessage:c.defaultMessages.public}),[L.LivingAtlas]:this.props.intl.formatMessage({id:"livingAtlas",defaultMessage:c.defaultMessages.livingAtlas}),[L.Curated]:this.props.intl.formatMessage({id:"curated",defaultMessage:c.defaultMessages.curated})},this.defaultDisplayedItemCategories=[L.MyContent,L.MyGroup,L.MyOrganization,L.Public,L.LivingAtlas],this.sortFields={[D.Modified]:this.props.intl.formatMessage({id:"modified",defaultMessage:c.defaultMessages.modified}),[D.Title]:this.props.intl.formatMessage({id:"title",defaultMessage:c.defaultMessages.title}),[D.Views]:this.props.intl.formatMessage({id:"numViews",defaultMessage:c.defaultMessages.numViews})},this.itemTypeCategories=Object.keys(A).map((e=>({value:A[e],label:A[e]}))),this.defaultSelectedFolder={id:null,title:this.props.intl.formatMessage({id:"allMyContent",defaultMessage:c.defaultMessages.allMyContent})},this.rootFolder={id:"root",title:(null===(i=null===(t=(0,s.getAppStore)().getState())||void 0===t?void 0:t.user)||void 0===i?void 0:i.username)||this.props.intl.formatMessage({id:"rootFolder",defaultMessage:c.defaultMessages.rootFolder})},this.defaultFolders=[this.defaultSelectedFolder,this.rootFolder],this.defaultSelectedGroup={id:null,title:this.props.intl.formatMessage({id:"allMyGroupsContent",defaultMessage:c.defaultMessages.allMyGroupsContent})},this.onCategoryIdChange=e=>{this.setState({selectedCategoryId:e})},this.onSearchInputKeyDown=e=>{"Enter"===e.key?this.enterOrSearchIsClicked():this.enterOrSearchIsUnclicked()},this.enterOrSearchIsClicked=()=>{this.setState({isEnterOrSearchIconClicked:!0})},this.enterOrSearchIsUnclicked=()=>{this.setState({isEnterOrSearchIconClicked:!1})},this.setDebounceSearchValue=e=>{this.setState({deferredSearchValue:e})},this.onSearchChange=e=>{this.debounceSetSearchValue(e.target.value),this.setState({searchValue:e.target.value})},this.onSortFieldChange=e=>{const t=e.target.value;this.setState({selectedSortField:t})},this.onFolderChange=e=>{const t=e.target.value,s=this.state.folders.find((e=>e.id===t))||this.defaultSelectedFolder;this.setState({selectedFolder:s})},this.onGroupChange=e=>{const t=e.target.value,s=this.state.groups.find((e=>e.id===t))||this.defaultSelectedGroup;this.setState({selectedGroup:s})},this.onSortOrderChange=()=>{this.setState({selectedSortOrder:this.state.selectedSortOrder===E.Desc?E.Asc:E.Desc})},this.onSelectedItemTypeCategoriesChange=e=>{this.setState({selectedItemTypeCategories:(null==e?void 0:e.length)>0?(0,s.Immutable)(null==e?void 0:e.map((e=>e.value))):null})},this.onItemAdded=(e,t)=>this.props.onSelect(e,t),this.onItemRemoved=(e,t)=>{this.props.onRemove(e,t)},this.afterToggleItemDetail=e=>{var t,s;null===(s=(t=this.props).afterToggleItemDetail)||void 0===s||s.call(t,e),this.props.mode===P.Simple&&this.setState({onlyShowItemDetail:e})},this.GroupSelect=({size:e,groups:t,selectedGroup:i,onGroupChange:a})=>(0,s.jsx)(c.Select,{value:`${i.id}`,title:i.title,onChange:a,className:"d-inline-block item-selector-sort-select",autoWidth:!0,buttonProps:{className:"text-truncate"},size:e},t.map((e=>(0,s.jsx)("option",{key:e.id,value:`${e.id}`},(0,s.jsx)("div",{className:"w-100 text-truncate",title:e.title},e.title))))),this.customDropdownButtonContent=e=>(0,s.jsx)(we,{color:(null==e?void 0:e.length)>0?"var(--white)":"var(--dark-800)"}),this.getValidItemTypeCategories=()=>this.itemTypeCategories.filter((e=>this.isItemTypeCategoryValid(e.value))),this.isItemTypeCategoryValid=e=>{var t;return null===(t=Ne[e])||void 0===t?void 0:t.some((e=>{var t;return null===(t=this.props.itemType)||void 0===t?void 0:t.includes(e)}))},this.getItemCategoryCustomLabel=e=>(null==e?void 0:e.customLabel)||this.itemCategories[null==e?void 0:e.type],this.debounceSetSearchValue=s.lodash.debounce((e=>{this.setDebounceSearchValue(e)}),500),this.state={searchValue:"",deferredSearchValue:"",selectedSortField:D.Modified,selectedSortOrder:E.Desc,isEnterOrSearchIconClicked:!1,selectedCategoryId:"",selectedItemTypeCategories:null,selectedFolder:this.defaultSelectedFolder,selectedGroup:this.defaultSelectedGroup,appServices:null,folders:this.defaultFolders,groups:[this.defaultSelectedGroup],onlyShowItemDetail:null}}componentDidMount(){this.__unmount=!1,this.setState({groups:this.getGroups()}),s.moduleLoader.loadModule("jimu-for-builder/service").then((e=>{this.__unmount||this.setState({appServices:e.appServices},(()=>{this.getFolders().then((e=>{!this.__unmount&&this.setState({folders:e})}))}))}))}componentDidUpdate(){var e;const t=this.getShouldBeDisplayedItemCategories();t.find((e=>e.id===this.state.selectedCategoryId))||this.setState({selectedCategoryId:(null===(e=t[0])||void 0===e?void 0:e.id)||""})}componentWillUnmount(){this.__unmount=!0}getShouldBeDisplayedItemCategories(){const e=(0,s.getAppStore)().getState().portalSelf,t=this.props.itemCategoriesInfo||this.defaultDisplayedItemCategories.map((e=>({type:e,customLabel:"",id:e}))),i=new Map;(null==e?void 0:e.livingAtlasGroupQuery)||i.set(L.LivingAtlas,!0);const a=(0,s.getAppStore)().getState(),o=a&&a.user;return(null==o?void 0:o.username)||i.set(L.MyContent,!0),(null==o?void 0:o.groups)||i.set(L.MyGroup,!0),(null==o?void 0:o.orgId)||i.set(L.MyOrganization,!0),t.filter((e=>!i.get(e.type)))}getGroups(){var e,t;const i=null===(t=null===(e=(0,s.getAppStore)())||void 0===e?void 0:e.getState())||void 0===t?void 0:t.user;return(null==i?void 0:i.groups)?[this.defaultSelectedGroup].concat(i.groups.asMutable({deep:!0})):[this.defaultSelectedGroup]}getFolders(){var e,t,s,i,a,o;return s=this,i=void 0,o=function*(){let s=this.defaultFolders;return(null===(t=null===(e=this.state)||void 0===e?void 0:e.appServices)||void 0===t?void 0:t.getFolders)?this.state.appServices.getFolders({num:1}).then((e=>(s=e?s.concat(e):s,s)),(e=>(console.log("Getting user content failed: ",e),s))):Promise.resolve(s)},new((a=void 0)||(a=Promise))((function(e,t){function r(e){try{n(o.next(e))}catch(e){t(e)}}function l(e){try{n(o.throw(e))}catch(e){t(e)}}function n(t){var s;t.done?e(t.value):(s=t.value,s instanceof a?s:new a((function(e){e(s)}))).then(r,l)}n((o=o.apply(s,i||[])).next())}))}render(){var e,t,i;const a=this.props.intl.formatMessage({id:"search",defaultMessage:s.defaultMessages.search}),o=this.props.intl.formatMessage({id:"sortBy",defaultMessage:c.defaultMessages.sortBy}),r=this.props.intl.formatMessage({id:"decending",defaultMessage:c.defaultMessages.decending}),l=this.props.intl.formatMessage({id:"ascending",defaultMessage:c.defaultMessages.ascending}),n=this.getShouldBeDisplayedItemCategories(),p=n.find((e=>e.id===this.state.selectedCategoryId))||n[0],{type:d,id:m}=p||{},h=this.props,{className:u}=h,g=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s}(h,["className"]),v=this.GroupSelect;return(0,s.jsx)("div",{className:(0,s.classNames)("h-100 w-100",{[u]:!!u})},(0,s.jsx)("div",{className:(0,s.classNames)("component-item-selector w-100 h-100",{"all-mode":this.props.mode!==P.Simple,"simple-mode":this.props.mode===P.Simple})},!this.state.onlyShowItemDetail&&(0,s.jsx)("div",{className:(0,s.classNames)("w-100",{"category-nav d-flex justify-content-between align-items-end":this.props.mode!==P.Simple,"px-4 pt-4":this.props.mode===P.Simple})},this.props.mode===P.Simple?(0,s.jsx)(c.Select,{size:"sm",autoWidth:!0,value:m,title:this.getItemCategoryCustomLabel(p),onChange:e=>{this.onCategoryIdChange(e.target.value)},buttonProps:{className:"text-truncate"}},n.map((e=>(0,s.jsx)("option",{key:e.id,value:e.id},(0,s.jsx)("div",{className:"w-100 text-truncate",title:this.getItemCategoryCustomLabel(e)},this.getItemCategoryCustomLabel(e)))))):(0,s.jsx)(c.Nav,{underline:!0},n.map(((e,t)=>(0,s.jsx)(c.NavItem,{key:e.type,title:this.getItemCategoryCustomLabel(e),className:(0,s.classNames)({"active-tab":m===e.id})},(0,s.jsx)(c.NavLink,{tag:"button",onClick:()=>{this.onCategoryIdChange(e.id)},active:m===e.id,className:"w-100 text-truncate"},this.getItemCategoryCustomLabel(e)))))),!this.state.onlyShowItemDetail&&this.props.mode===P.Simple&&d===L.MyGroup&&(0,s.jsx)("div",{className:"pt-2"},(0,s.jsx)(v,{size:"sm",groups:this.state.groups,selectedGroup:this.state.selectedGroup,onGroupChange:this.onGroupChange})),(0,s.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end item-selector-search-container"},(0,s.jsx)("div",{className:(0,s.classNames)("item-selector-search",{"flex-grow-1":this.props.showItemTypeCategoryFilter,"w-100":this.props.mode===P.Simple&&!this.props.showItemTypeCategoryFilter})},(0,s.jsx)(c.TextInput,{prefix:(0,s.jsx)(me,{size:"m",className:"text-dark-600 ml-2"}),onKeyDown:this.onSearchInputKeyDown,placeholder:a,size:this.props.mode===P.Simple?"sm":"default",onChange:this.onSearchChange,className:"search-input",value:this.state.searchValue,allowClear:!0})),this.props.showItemTypeCategoryFilter&&(0,s.jsx)("div",{className:"ml-1"},(0,s.jsx)(c.AdvancedSelect,{fluid:!0,size:this.props.mode===P.Simple?"sm":"default",sortValuesByLabel:!1,isMultiple:!0,hideSearchInput:!0,isEmptyOptionHidden:!0,buttonProps:{arrow:!1,icon:!0,type:(null===(e=this.state.selectedItemTypeCategories)||void 0===e?void 0:e.length)>0?"primary":"default"},title:this.props.intl.formatMessage({id:"type",defaultMessage:c.defaultMessages.type}),staticValues:this.getValidItemTypeCategories(),selectedValues:null===(i=null===(t=this.state.selectedItemTypeCategories)||void 0===t?void 0:t.asMutable())||void 0===i?void 0:i.map((e=>({value:e,label:e}))),onChange:this.onSelectedItemTypeCategoriesChange,customDropdownButtonContent:this.customDropdownButtonContent})))),n.map(((e,t)=>{var i,a;return(0,s.jsx)("div",{className:(0,s.classNames)("w-100",{"d-none":e.id!==m,"category-container":!this.state.onlyShowItemDetail,"category-container-without-select":this.state.onlyShowItemDetail,"category-container-with-group-select":e.type===L.MyGroup}),key:e.id},!this.state.onlyShowItemDetail&&this.props.mode!==P.Simple&&(0,s.jsx)("div",{className:"d-flex justify-content-between mt-30 mb-20"},(0,s.jsx)("div",null,d===L.MyContent&&(0,s.jsx)(c.Select,{value:`${this.state.selectedFolder.id}`,title:this.state.selectedFolder.title,onChange:this.onFolderChange,className:"d-inline-block item-selector-sort-select",autoWidth:!0,buttonProps:{className:"text-truncate"}},this.state.folders.map((e=>(0,s.jsx)("option",{key:e.id,value:`${e.id}`},(0,s.jsx)("div",{className:"w-100 text-truncate",title:e.title},e.title))))),d===L.MyGroup&&(0,s.jsx)(v,{size:"default",groups:this.state.groups,selectedGroup:this.state.selectedGroup,onGroupChange:this.onGroupChange})),(0,s.jsx)("div",{className:"d-flex justify-content-between align-items-center item-selector-sort"},(0,s.jsx)("div",{className:"item-selector-sort-by",role:"group","aria-label":o},(0,s.jsx)("div",{className:"d-inline-block mr-2"},o),(0,s.jsx)(c.Select,{value:this.state.selectedSortField,title:this.sortFields[D[this.state.selectedSortField]],onChange:this.onSortFieldChange,className:"d-inline-block item-selector-sort-select",autoWidth:!0,buttonProps:{className:"text-truncate"}},Object.keys(D).map((e=>(0,s.jsx)("option",{key:D[e],value:D[e]},this.sortFields[D[e]]))))),(0,s.jsx)("div",{className:"item-selector-sort-order"},this.state.selectedSortOrder===E.Desc?(0,s.jsx)(c.Button,{type:"tertiary",onClick:this.onSortOrderChange,title:r,"aria-label":r},(0,s.jsx)(ge,{size:"m"})):(0,s.jsx)(c.Button,{type:"tertiary",onClick:this.onSortOrderChange,title:l,"aria-label":l},(0,s.jsx)(fe,{size:"m"}))))),(0,s.jsx)("div",{className:"w-100 item-list-container"},(0,s.jsx)(le,Object.assign({},g,{category:e.type,groupId:null===(i=this.state.selectedGroup)||void 0===i?void 0:i.id,sortField:this.state.selectedSortField,sortOrder:this.state.selectedSortOrder,folderId:null===(a=this.state.selectedFolder)||void 0===a?void 0:a.id,searchValue:this.state.deferredSearchValue.length>2||0===this.state.deferredSearchValue.length||this.state.isEnterOrSearchIconClicked?this.state.deferredSearchValue:"",onSelect:this.onItemAdded,onRemove:this.onItemRemoved,afterToggleItemDetail:this.afterToggleItemDetail,itemTypeCategory:this.state.selectedItemTypeCategories,curatedFilter:null==p?void 0:p.curatedFilter}))))}))))}}const Ie=(0,s.injectIntl)((0,t.withStyles)(xe,"ItemSelector")),Ne={[A.FeatureLayer]:[s.SupportedItemTypes.FeatureService,s.SupportedItemTypes.FeatureCollection,s.SupportedItemTypes.WFS],[A.TileLayer]:[s.SupportedItemTypes.WMTS,s.SupportedItemTypes.MapService,s.SupportedItemTypes.VectorTileService],[A.MapImageLayer]:[s.SupportedItemTypes.MapService,s.SupportedItemTypes.WMS],[A.ImageryLayer]:[s.SupportedItemTypes.ImageService],[A.SceneLayer]:[s.SupportedItemTypes.SceneService],[A.TiledImageryLayer]:[s.SupportedItemTypes.ImageService],[A.ElevationLayer]:[s.SupportedItemTypes.ImageService],[A.Table]:[s.SupportedItemTypes.FeatureService,s.SupportedItemTypes.FeatureCollection,s.SupportedItemTypes.MapService,s.SupportedItemTypes.CSV],[A.LayerFiles]:[s.SupportedItemTypes.CSV,s.SupportedItemTypes.GeoJSON],[A.WebMap]:[s.SupportedItemTypes.WebMap],[A.Scenes]:[s.SupportedItemTypes.WebScene],[A.GeometricOperations]:[s.SupportedItemTypes.GeometryService],[A.Locator]:[s.SupportedItemTypes.GeocodingService],[A.GeoprocessingTasks]:[s.SupportedItemTypes.GeoprocessingService],[A.NetworkAnalysis]:[s.SupportedItemTypes.NetworkAnalysisService],[A.GroupLayer]:[s.SupportedItemTypes.GroupLayer]};(0,t.registerStyles)("jimu-ui/basic/item-components/",e)})(),l})())}}}));