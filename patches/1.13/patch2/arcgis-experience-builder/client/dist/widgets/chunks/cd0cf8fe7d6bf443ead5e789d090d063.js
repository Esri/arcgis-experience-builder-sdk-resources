/*! For license information please see cd0cf8fe7d6bf443ead5e789d090d063.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[69612],{69612:(t,e,i)=>{i.r(e),i.d(e,{arcgis_un_ntc_pick_list:()=>a,arcgis_un_ntc_pick_list_info:()=>d});var s,n=i(28384),r=i(66716),o=i(62727);i(18869),i(81068),function(t){t.default="default",t.title="title",t.type="type",t.description="description"}(s||(s={}));const a=class{constructor(t){(0,n.r)(this,t),this.arcgisNtcPickListChange=(0,n.c)(this,"arcgisNtcPickListChange",7),this.arcgisNtcPickListDismissed=(0,n.c)(this,"arcgisNtcPickListDismissed",7),this.arcgisNtcPickListSortByChange=(0,n.c)(this,"arcgisNtcPickListSortByChange",7),this.errorMessage="",this.namedTraceConfigurationsInfo=[],this.calciteValueList=t=>(0,n.h)("calcite-pick-list-item",{key:t.id,label:t.title,description:t.description,value:t.id,selected:this.selectedNTCs.indexOf(t.id)>-1,metadata:{id:t.id,title:t.title}},(0,n.h)("calcite-action",{slot:"actions-end",text:this.strings.info,title:this.strings.info,scale:"s",icon:"information",onClick:e=>{e.stopPropagation();const i=document.createElement("calcite-flow-item");i.heading=t.title,i.description=t.description;const s=document.createElement("arcgis-un-ntc-pick-list-info");s.utilityNetwork=this.utilityNetwork,s.ntcId=t.id,s.strings=this.strings,s.classList.add("content"),i.appendChild(s),this.flowElement.appendChild(i),i.setFocus()}})),this.filterPlaceholderText=void 0,this.multiple=!0,this.popoverProps=void 0,this.selectedNTCs=[],this.showFilterLength=10,this.showSort=!0,this.sortBy=s.default,this.utilityNetwork=void 0,this.lastSortyBy=s.default,this.filterNTCs=null,this.isOpen=!1}async componentWillLoad(){await this.loadAllModules();const t=await(0,o.g)(this.hostElement);this.strings=t[0],this.currentLanguage=t[1],this.lastSortyBy=this.sortBy||this.lastSortyBy;try{this.namedTraceConfigurations=await this.utilityNetwork.queryNamedTraceConfigurations(),this.namedTraceConfigurations.forEach((t=>{this.namedTraceConfigurationsInfo.push({id:t.globalId,creationDate:t.creationDate,creator:t.creator,description:t.description,minStartingPoints:t.minStartingPoints,resultTypes:t.resultTypes,tags:t.tags,title:t.title,type:t.traceType})})),this.utilityNetwork.sharedNamedTraceConfigurations.forEach((t=>{this.selectedNTCs.push(t.globalId)}))}catch(t){this.errorMessage=t.message}}componentDidLoad(){this.isOpen=!0}calciteFilterChangeHandler(t){var e,i;t.stopPropagation();const s=null===(e=null==t?void 0:t.path)||void 0===e?void 0:e.find((t=>"CALCITE-FILTER"===t.nodeName));this.filterNTCs=null===(i=null==s?void 0:s.filteredItems)||void 0===i?void 0:i.map((t=>t.value))}async reposition(){var t;null===(t=this.popoverNode)||void 0===t||t.reposition()}getSortedList(){const t=[...this.namedTraceConfigurationsInfo];return this.lastSortyBy===s.title?t.sort(((t,e)=>t.title.localeCompare(e.title))):this.lastSortyBy===s.description&&t.sort(((t,e)=>t.description.localeCompare(e.description))),this.lastSortyBy===s.type&&t.sort(((t,e)=>t.type.localeCompare(e.type))),t}selectDeselect(){var t;return(null===(t=this.filterNTCs)||void 0===t?void 0:t.length)?this.filterContainsAll():this.selectedNTCs.length===this.namedTraceConfigurationsInfo.length}filterContainsAll(){return this.filterNTCs.every((t=>this.selectedNTCs.some((e=>e===t))))}async loadAllModules(){const[t]=await(0,r.l)(["esri/networks/support/NamedTraceConfiguration"]);this.NamedTraceConfiguration=t}render(){var t;const{NamedTraceConfiguration:e}=this,i=(0,n.h)("calcite-dropdown",{slot:"menu-actions",placement:"bottom-end"},(0,n.h)("calcite-action",{slot:"trigger",text:this.strings.sort,title:this.strings.sort},(0,n.h)("calcite-icon",{scale:"s",icon:"sortDescending"})),(0,n.h)("calcite-dropdown-group",null,(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.default,onClick:()=>{this.lastSortyBy=s.default,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.default),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.title,onClick:()=>{this.lastSortyBy=s.title,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.name),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.type,onClick:()=>{this.lastSortyBy=s.type,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.type),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortyBy===s.description,onClick:()=>{this.lastSortyBy=s.description,this.arcgisNtcPickListSortByChange.emit(this.lastSortyBy)}},this.strings.description))),r=(0,n.h)("div",{class:"selection-button-div"},(0,n.h)("calcite-button",{appearance:"transparent",scale:"s",width:"full",onClick:()=>{var t,e;this.selectDeselect()?this.selectedNTCs=(null===(t=this.filterNTCs)||void 0===t?void 0:t.length)?this.selectedNTCs.filter((t=>!this.filterNTCs.includes(t))):[]:this.selectedNTCs=(null===(e=this.filterNTCs)||void 0===e?void 0:e.length)?[...new Set([...this.selectedNTCs,...this.filterNTCs])]:this.namedTraceConfigurationsInfo.map((t=>t.id))}},this.selectDeselect()?this.strings.deselectAll:this.strings.selectAll)),o=(0,n.h)("calcite-label",{class:"label"},this.errorMessage),a=(0,n.h)("calcite-pick-list",{multiple:this.multiple,ref:t=>{this.pickListNode=t},filterEnabled:this.namedTraceConfigurationsInfo.length>=this.showFilterLength,filterPlaceholder:null!==(t=this.filterPlaceholderText)&&void 0!==t?t:this.strings.filter,onCalciteListChange:async()=>{const t=await this.pickListNode.getSelectedItems();this.selectedNTCs=[...new Set([...this.selectedNTCs.filter((e=>t.has(e))),...t.keys()])],this.utilityNetwork.sharedNamedTraceConfigurations=[],this.selectedNTCs.forEach((t=>{let i=this.namedTraceConfigurations.find((e=>e.globalId===t));this.utilityNetwork.sharedNamedTraceConfigurations.push(new e({globalId:i.globalId,title:i.title}))})),this.arcgisNtcPickListChange.emit(this.utilityNetwork.sharedNamedTraceConfigurations)}},this.namedTraceConfigurationsInfo.length>=this.showFilterLength&&this.showSort&&i,r,[...this.getSortedList()].map((t=>this.calciteValueList(t))));return(0,n.h)(n.H,{class:"js-app-flyout"},(0,n.h)("calcite-popover",{class:"popover",placement:this.popoverProps.placement||"leading-start",open:this.isOpen,pointerDisabled:!0,referenceElement:this.popoverProps.refElement,offsetDistance:this.popoverProps.offsetDistance||-Math.round(this.popoverProps.refElement.getBoundingClientRect().width),offsetSkidding:this.popoverProps.offsetSkidding||0,label:this.strings.headerSelect,ref:t=>this.popoverNode=t},(0,n.h)("calcite-flow",{ref:t=>{this.flowElement=t},style:{width:`${this.popoverProps.popoverWidth||this.popoverProps.refElement.getBoundingClientRect().width}px`}},(0,n.h)("calcite-flow-item",{ref:t=>this.flowItemElement=t,class:"panel",heading:this.strings.headerSelect,closable:!0,onCalciteFlowItemClose:()=>this.arcgisNtcPickListDismissed.emit()},""!==this.errorMessage?o:a))))}get hostElement(){return(0,n.d)(this)}};a.style=".popover{z-index:100}.panel{min-height:300px}.label{height:-webkit-fill-available;width:-webkit-fill-available;padding:10px}.selection-button-div{padding:4px 10px}.content{max-height:60vh}";const l="section",c="title",d=class{constructor(t){(0,n.r)(this,t),this._getResultTypes=t=>{if(0===t.length)return this.strings.ntcNoResultTypes;{let e=[];return t.forEach((t=>{e.push(t.type)})),e.join(", ")}},this._getTags=t=>0===t.length?this.strings.ntcNoTags:t.join(", "),this.utilityNetwork=void 0,this.ntcId=void 0,this.strings=void 0}async componentWillLoad(){const{utilityNetwork:t,ntcId:e}=this;this.props={utilityNetwork:t,ntcId:e};const[i]=await(0,r.l)(["esri/intl"]);this.intl=i,this.props.ntcInfo=await async function(t){const{utilityNetwork:e,ntcId:i}=t;let s;return(await e.queryNamedTraceConfigurations()).filter((t=>t.globalId===i)).forEach((t=>{const e={title:t.title,description:t.description,creator:t.creator,creationDate:t.creationDate,traceType:t.traceType,minimumPoints:t.minStartingPoints,resultTypes:t.resultTypes,tags:t.tags};s=e})),s}(this.props)}render(){const{props:t}=this,{ntcInfo:e}=t;return e?(0,n.h)(n.H,null,(0,n.h)("div",{class:"container"},this.renderNtcCreator(),this.renderNtcCreationDate(),this.renderNtcTraceType(),this.renderNtcMinimumPoints(),this.renderNtcResultTypes(),this.renderNtcTags())):null}renderNtcCreator(){const{props:t}=this,{ntcInfo:e}=t;return(0,n.h)("div",{class:l},(0,n.h)("div",{class:c},this.strings.ntcCreator),(0,n.h)("div",null,e.creator))}renderNtcCreationDate(){const{intl:t,props:e}=this,{ntcInfo:i}=e;return(0,n.h)("div",{class:l},(0,n.h)("div",{class:c},this.strings.ntcCreationDate),(0,n.h)("div",null,t.formatDate(i.creationDate,{dateStyle:"full"})))}renderNtcTraceType(){const{props:t}=this,{ntcInfo:e}=t;return(0,n.h)("div",{class:l},(0,n.h)("div",{class:c},this.strings.ntcTraceType),(0,n.h)("div",null,e.traceType))}renderNtcMinimumPoints(){const{props:t}=this,{ntcInfo:e}=t;return(0,n.h)("div",{class:l},(0,n.h)("div",{class:c},this.strings.ntcMinPoints),(0,n.h)("div",null,e.minimumPoints))}renderNtcResultTypes(){const{props:t}=this,{ntcInfo:e}=t;return(0,n.h)("div",{class:l},(0,n.h)("div",{class:c},this.strings.ntcResultTypes),(0,n.h)("div",null,this._getResultTypes(e.resultTypes)))}renderNtcTags(){const{props:t}=this,{ntcInfo:e}=t;return(0,n.h)("div",{class:l},(0,n.h)("div",{class:c},this.strings.ntcTags),(0,n.h)("div",null,this._getTags(e.tags)))}get hostElement(){return(0,n.d)(this)}};d.style=":host{height:100%}.container{padding:6px;background-color:white}.title{font-weight:bold;padding:5px 0}.section{padding:6px 0}"},81068:(t,e,i)=>{i.d(e,{C:()=>a,a:()=>d,f:()=>l,g:()=>o,l:()=>r});var s=i(66716),n=i(18869);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(t){return function(t,e,i){const s=(0,n.c)(t,"[dir]");return s?s.getAttribute("dir"):"ltr"}(t)}const a={rtl:"arcgis--rtl"};async function l(t,e){const{api:i,type:n,places:r}=e||{};if(4===i){const[e]=await(0,s.l)(["esri/intl"]),i=e.convertNumberFormatToIntlOptions({places:r,style:n,digitSeparator:!0});return e.formatNumber(t,Object.assign(Object.assign({},i),{style:n}))}const[o]=await(0,s.l)(["dojo/number"]);return o.format(t,{type:n,places:r,pattern:null==e?void 0:e.pattern})}const c={};function d(t){const e=document.documentElement.lang;return c[e]||(c[e]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[e].format(t)}},66716:(t,e,i)=>{i.d(e,{a:()=>s,c:()=>r,e:()=>o,g:()=>n,l:()=>a});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var o=r((function(t,e){!function(t){var e={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",s="next";function n(t){if(t.toLowerCase()===s)return s;var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function r(t){return void 0===t&&(t=i),"https://js.arcgis.com/".concat(t,"/")}function o(t){return!t||n(t)?function(t){void 0===t&&(t=i);var e=r(t),o=n(t);if(o!==s&&3===o.major){var a=o.minor<=10?"js/":"";return"".concat(e).concat(a,"esri/css/esri.css")}return"".concat(e,"esri/themes/light/main.css")}(t):t}function a(t,e){var i=o(t),s=function(t){return document.querySelector('link[href*="'.concat(t,'"]'))}(i);return s||function(t,e){if(e){var i=document.querySelector(e);i.parentNode.insertBefore(t,i)}else document.head.appendChild(t)}(s=function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}(i),e),s}var l={};function c(t,e,i){var s;i&&(s=function(t,e){var i=function(s){e(s.error||new Error("There was an error attempting to load ".concat(t.src))),t.removeEventListener("error",i,!1)};return t.addEventListener("error",i,!1),i}(t,i));var n=function(){e(t),t.removeEventListener("load",n,!1),s&&t.removeEventListener("error",s,!1)};t.addEventListener("load",n,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function h(){var t=window.require;return t&&t.on}function u(t){void 0===t&&(t={});var i={};[l,t].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}));var s=i.version,n=i.url||r(s);return new e.Promise((function(t,e){var r=d();if(r){var o=r.getAttribute("src");o!==n?e(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):h()?t(r):c(r,t,e)}else if(h())e(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=i.css;l&&a(!0===l?s:l,i.insertCssBefore),c(r=function(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}(n),(function(){r.setAttribute("data-esri-loader","loaded"),t(r)}),e),document.body.appendChild(r)}}))}function p(t){return new e.Promise((function(e,i){var s=window.require.on("error",i);window.require(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];s.remove(),e(t)}))}))}t.utils=e,t.loadModules=function(t,e){if(void 0===e&&(e={}),h())return p(t);var i=d(),s=i&&i.getAttribute("src");return!e.url&&s&&(e.url=s),u(e).then((function(){return p(t)}))},t.getScript=d,t.isLoaded=h,t.loadScript=u,t.setDefaultOptions=function(t){void 0===t&&(t={}),l=t},t.loadCss=a,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));const a=async(t,e)=>(await o.loadModules(t,e)).map((t=>t.__esModule&&t.default?t.default:t))},62727:(t,e,i)=>{i.d(e,{a:()=>o,g:()=>c});var s=i(18869),n=i(81068),r=i(28384);function o(t){var e,i,r;const o=null!==(e=(0,s.c)(t,"[lang]"))&&void 0!==e?e:null===(r=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(a)?n.l.get(a):n.l.has(a.slice(0,2))?n.l.get(a.slice(0,2)):"en"}const a={};function l(t,e){const i=`${t}${e}`;return a[i]||(a[i]=function(t,e){return new Promise(((i,s)=>{fetch((0,r.a)(`../arcgis-app-assets/i18n/${t}.i18n.${e}.json`)).then((t=>{t.ok?i(t.json()):s()}),(()=>s()))}))}(t,e)),a[i]}async function c(t,e){const i=e||t.tagName.toLowerCase(),r=o(t),a=function(t){var e,i,r;const o=null!==(e=(0,s.c)(t,"[lang]"))&&void 0!==e?e:null===(r=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(a)?n.l.get(a):n.l.has(a.slice(0,2))?a:"en"}(t);let c;try{c=await l(i,r)}catch(t){console.warn(`no locale for ${i} (${r}) loading default locale en.`),c=await l(i,"en")}return[c,r,a]}}}]);