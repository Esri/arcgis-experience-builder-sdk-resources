/*! For license information please see 2419eade9ce96a4ac91ad875c465bb7e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[49942],{49942:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_feature_layer_from_existing:()=>g});var a=r(28384),s=r(41171),l=r(76134),i=r(83129),n=r(58892),o=r(54871),c=r(24552),u=r(71120);r(66716),r(62381),r(27010),r(65508),r(86739),r(31546),r(82463),r(48507),r(48333),r(86274),r(85142),r(72022),r(96729),r(58728),r(83397),r(18869),r(46220);const g=class{constructor(e){(0,a.r)(this,e),this.newItemUpdatePage=(0,a.c)(this,"newItemUpdatePage",7),this.selectedItem=void 0,this.errorMessage=null}async handleNext(){const{selectedItem:e,i18n:t}=this;if(!e)return(0,u.f)("No layer selected"),void(this.errorMessage={title:t.noLayerError.title,message:t.noLayerError.description});try{const r=e.url,{error:a}=(0,c.g)(r);if("invalidFeatureLayerUrl"===(null==a?void 0:a.code))return void(this.errorMessage={title:t.invalidUrl.title,message:t.invalidUrl.description});const{layers:o,tables:u,serviceInfo:g}=await(0,i.g)(r,(0,s.g)(l.c.portal),!0);n.a.serviceInfo=Object.assign(Object.assign({},g),{layers:o,tables:u}),n.a.sourceTitle=e.title,(0,c.s)(e),this.newItemUpdatePage.emit("featureLayerSummary")}catch(e){console.error(e),this.errorMessage={title:o.u.i18n.itemProperties.errorTitle,message:o.u.i18n.url.errorMessage}}}componentWillLoad(){n.a.serviceInfo=null,n.a.selectedServiceInfoLayersNames=null,this.i18n=o.u.i18n.featureLayerFromExisting}render(){const{errorMessage:e}=this;return(0,a.h)(a.H,null,(0,a.h)("arcgis-new-item-feature-layer-browser",{onItemSelected:({detail:e})=>{this.selectedItem=e,this.errorMessage=null},itemBrowserBucket:l.c.portal.isPortal?["my","org"]:["my","org","living atlas","all"]}),(0,a.h)("arcgis-new-item-alert",{heading:null==e?void 0:e.title,description:null==e?void 0:e.message,active:!!e,onAlertDismiss:()=>{this.errorMessage=null}}))}}},71120:(e,t,r)=>{r.d(t,{a:()=>m,b:()=>u,c:()=>g,e:()=>o,f:()=>d,i:()=>c});var a=r(76134),s=r(58892);const l="create feature layer",i="my content",n=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},o=e=>{const t=a.c.telemetry;null==t||t.stepWorkflow(l,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:l,attribute:n(s.a.addFeatureLayerType),pageName:i})},c=e=>{const t=a.c.telemetry;null==t||t.stepWorkflow(l,`expand ${e} details`,{category:l,attribute:n(s.a.addFeatureLayerType),pageName:i})},u=()=>{const e=a.c.telemetry;null==e||e.stepWorkflow(l,"filter",{category:l,attribute:n(s.a.addFeatureLayerType),pageName:i})},g=e=>{const t=n(e),r=a.c.telemetry;null==r||r.stepWorkflow(l,"from option",{category:l,attribute:t,pageName:i})},m=()=>{const{addFeatureLayerType:e,serviceInfo:t}=s.a,r=t,o=a.c.telemetry;null==o||o.endWorkflow(l,{category:l,attribute:n(e),pageName:i,count:r.layers.length,number:r.tables.length})},d=e=>{var t;null===(t=a.c.telemetry)||void 0===t||t.logError({category:l,error:e})}}}]);