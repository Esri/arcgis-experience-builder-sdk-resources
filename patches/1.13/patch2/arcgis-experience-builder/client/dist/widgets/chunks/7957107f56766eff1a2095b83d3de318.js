/*! For license information please see 7957107f56766eff1a2095b83d3de318.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[47092],{47092:(e,t,i)=>{i.r(t),i.d(t,{arcgis_lazy_loading_select:()=>n});var s=i(28384);const n=class{constructor(e){(0,s.r)(this,e),this.arcgisLazyLoadingSelectChange=(0,s.c)(this,"arcgisLazyLoadingSelectChange",7),this.handleOutsideClick=e=>{if(this.open){if(this.list.length>1){const t=e.composedPath();if(t.includes(this.hostElement)||t.includes(this.menuPopOver))return}this.closeMenuPopOverAndDisconnectHandles()}},this.handleResize=()=>this.open&&this.closeMenuPopOverAndDisconnectHandles(),this.list=void 0,this.selectedIndex=0,this.containerTop=0,this.containerBottom=void 0,this.pageSize=500,this.accumulatePages=!0,this.strings=void 0,this.ariaLabeledBy=void 0,this.showFilterLength=20,this.pageId=0,this.open=!1}watchSelectedIndex(e){this.menuPopOver&&(this.menuPopOver.selectedIndex=e)}watchPageSize(e){this.menuPopOver&&(this.menuPopOver.pageSize=e)}disconnectedCallback(){this.closeMenuPopOverAndDisconnectHandles()}render(){var e;const{selectedIndex:t,list:i}=this,n=t>=i.length?i[0]:i[t];return(0,s.h)("calcite-button",{scale:"s",width:"full",appearance:"outline-fill",kind:this.open?"brand":"neutral",class:this.open?void 0:"lazy-select-button",alignment:"icon-end-space-between",iconEnd:this.open?"chevron-up":"chevron-down","aria-haspopup":"true","aria-expanded":this.open?"true":"false","aria-label":this.ariaLabeledBy||null===(e=this.strings)||void 0===e?void 0:e.selectLabel,"aria-labelledby":this.ariaLabeledBy||void 0,onClick:()=>this.renderSelectMenu(),ref:e=>this.refNode=e},n.label)}renderSelectMenu(){if(this.menuPopOver)return void this.closeMenuPopOverAndDisconnectHandles();this.open=!0,document.addEventListener("pointerdown",this.handleOutsideClick),window.addEventListener("resize",this.handleOutsideClick);const e=document.createElement("arcgis-lazy-loading-list"),{height:t,top:i}=this.hostElement.getBoundingClientRect(),{width:s,left:n,bottom:o,top:r,height:c}=this.refNode.getBoundingClientRect(),h=t-c-(o-i);e.popoverProps={width:s,left:n,top:r,bottom:o,height:h,containerTop:this.containerTop,containerBottom:this.containerBottom},e.flyOut=!0,e.strings=this.strings,e.showFilter=this.list.length>=this.showFilterLength,e.pageSize=this.pageSize,e.accumulatePages=this.accumulatePages,this.menuPopOver=e,e.addEventListener("arcgisLazyLoadingListChange",(e=>{this.selectedIndex=e.detail.selectedIndex,this.arcgisLazyLoadingSelectChange.emit(e.detail),this.closeMenuPopOverAndDisconnectHandles()})),document.body.appendChild(e),this.menuPopOver.list=this.list,this.menuPopOver.selectedIndex=this.selectedIndex,this.setupMarginObservers()}closeMenuPopOverAndDisconnectHandles(){this.disconnectObservers(),document.removeEventListener("pointerdown",this.handleOutsideClick),window.removeEventListener("resize",this.handleOutsideClick),this.menuPopOver&&setTimeout((()=>{document.body.removeChild(this.menuPopOver),this.menuPopOver=null}),100),this.open=!1}setupMarginObservers(){const{top:e,bottom:t}=this.refNode.getBoundingClientRect(),{clientHeight:i}=document.body;this.disconnectObservers();const s=`0px 0px ${t-i}px 0px`;this.topObserver=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting||this.closeMenuPopOverAndDisconnectHandles()}))}),{rootMargin:s});const n=-e+"px 0px 0px 0px";this.bottomObserver=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting||this.closeMenuPopOverAndDisconnectHandles()}))}),{rootMargin:n}),this.topObserver.observe(this.refNode),this.bottomObserver.observe(this.refNode)}disconnectObservers(){var e,t;null===(e=this.topObserver)||void 0===e||e.disconnect(),null===(t=this.bottomObserver)||void 0===t||t.disconnect(),this.topObserver=null,this.bottomObserver=null}get hostElement(){return(0,s.d)(this)}static get watchers(){return{selectedIndex:["watchSelectedIndex"],pageSize:["watchPageSize"]}}};n.style=":host{width:100%;overflow:hidden}.lazy-select-button{--calcite-ui-foreground-3:var(--calcite-ui-border-input)}"}}]);