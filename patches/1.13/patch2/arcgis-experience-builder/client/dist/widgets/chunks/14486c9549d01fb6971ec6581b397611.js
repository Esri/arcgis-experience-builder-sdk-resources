/*! For license information please see 14486c9549d01fb6971ec6581b397611.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[7381],{7381:(e,t,o)=>{o.r(t),o.d(t,{arcgis_color_input:()=>d,arcgis_popup_color_popover:()=>u,arcgis_popup_styler_popover:()=>g,arcgis_symbol_picker_file_upload:()=>m,arcgis_symbol_styler_color_ramp_input:()=>S,arcgis_symbol_styler_section:()=>I,arcgis_symbol_styler_symbol_preview:()=>D});var i=o(28384),s=o(62727),r=o(15859),l=o(81068),n=o(87247),a=o(66716),c=o(10700),h=o(91579),p=o(26426);o(18869),o(27010);const d=class{constructor(e){(0,i.r)(this,e),this.arcgisColorInputChange=(0,i.c)(this,"arcgisColorInputChange",7),this.arcgisInternalColorInputStoredColor=(0,i.c)(this,"arcgisInternalColorInputStoredColor",7),this.arcgisColorInputPopoverOpen=(0,i.c)(this,"arcgisColorInputPopoverOpen",7),this.arcgisColorInputPopoverClose=(0,i.c)(this,"arcgisColorInputPopoverClose",7),this.focusHandler=e=>{this.activeEl=e.target},this.onClose=e=>{var t;this.storeRecentColorToStorage(null===(t=this.colorPickerEl)||void 0===t?void 0:t.value),e.stopPropagation(),this.arcgisColorInputPopoverClose.emit()},this.handleSwatchClickOrKeyUp=e=>{if("key"in e&&"Enter"!==e.key&&"Space"!==e.key)return;const t=e.currentTarget.color;this.updateColor(t),setTimeout((()=>this.recentColor1El.focus()),200)},this.recentColorsKeyDownHandler=e=>{if(1===this.recentColors.length)return;const t=e.key;let o;this.activeEl===this.recentColor1El?o=1:this.activeEl===this.recentColor2El?o=2:this.activeEl===this.recentColor3El&&(o=3),"ArrowLeft"===t&&(o&&1!==o?this[`recentColor${o-1}El`].focus():this[`recentColor${this.recentColors.length}El`].focus()),"ArrowRight"===t&&(o&&o!==this.recentColors.length?this[`recentColor${o+1}El`].focus():this.recentColor1El.focus())},this.setInlineInputRef=e=>{this.inlineInputEl=e},this.setColorPickerRef=e=>{e&&(this.colorPickerEl=e)},this.setRecentColorRef1=e=>{e&&(this.recentColor1El=e)},this.setRecentColorRef2=e=>{e&&(this.recentColor2El=e)},this.setRecentColorRef3=e=>{e&&(this.recentColor3El=e)},this.onOpen=()=>{var e;null===(e=this.colorPickerEl)||void 0===e||e.setFocus(),this.arcgisColorInputPopoverOpen.emit()},this.handleClear=()=>{this.updateColor(null)},this.clearable=!1,this.color="#d00b33",this.compact=!1,this.disabled=!1,this.placement="auto",this.popoverProps=void 0,this.storageId=void 0,this.recentColors=[]}storedColorHandler(e){e.composedPath().includes(this.el)||this.setRecentColorsFromStorage()}async setFocus(){var e;await(null===(e=this.inlineInputEl)||void 0===e?void 0:e.setFocus())}async close(){await this.inlineInputEl.close()}updateColor(e,t=!0){e!==this.color&&(this.color=e,this.arcgisColorInputChange.emit(),t&&this.storeRecentColorToStorage(e))}storeRecentColorToStorage(e){if(!e)return;const t=[e,...this.recentColors.filter((t=>t!==e))].slice(0,3);(0,r.s)(this.storageId,t,!0),this.recentColors=t,this.arcgisInternalColorInputStoredColor.emit()}async componentWillLoad(){[this.strings]=await(0,s.g)(this.el),this.setRecentColorsFromStorage()}setRecentColorsFromStorage(){const e=(0,r.g)(this.storageId,!0);e&&(this.recentColors=[...e])}disconnectedCallback(){this.removeTooltip()}render(){const{compact:e,disabled:t,recentColors:o,strings:s}=this,r=[o[0],o[1]],n="rtl"===(0,l.g)(this.el);return e||r.push(o[2]),(0,i.h)(i.H,null,(0,i.h)("arcgis-symbol-styler-inline-input",{disabled:t,intlDone:s.commitColor,heading:s.selectColor,label:s.selectColor,onArcgisSymbolStylerInlineInputClose:this.onClose,onArcgisSymbolStylerInlineInputOpen:this.onOpen,popoverProps:this.popoverProps,ref:this.setInlineInputRef},(0,i.h)("div",{class:"color-picker-container",slot:"content"},(0,i.h)("calcite-color-picker",{allowEmpty:this.clearable,class:"color-picker",key:"color-picker"+(e?"--compact":""),onCalciteColorPickerInput:e=>{this.updateColor(this.colorPickerEl.value,!1),e.stopPropagation()},ref:this.setColorPickerRef,scale:e?"s":"m",storageId:this.storageId,value:this.color})),(0,i.h)("div",{slot:"preview"},(0,i.h)("calcite-color-picker-swatch",{color:this.color,scale:"s"})),(0,i.h)("div",{"aria-label":s.recentColors,class:"recent",onKeyDown:this.recentColorsKeyDownHandler,slot:"content-end",tabindex:-1},r.map(((e,t)=>e?(0,i.h)("calcite-color-picker-swatch",{active:e===this.color,color:e,key:e,onClick:this.handleSwatchClickOrKeyUp,onFocus:this.focusHandler,onKeyUp:this.handleSwatchClickOrKeyUp,ref:this[`setRecentColorRef${t+1}`],role:"button",scale:"s",tabindex:0}):this.renderEmptySwatch(`empty-swatch-${t}`)))),this.clearable&&[(0,i.h)("div",{slot:"content-end"},(0,i.h)("calcite-action",{icon:"circle-disallowed",scale:"s",label:s.clearColor,text:s.clearColor,ref:e=>this.actionEl=e,onClick:this.handleClear,onMouseOver:()=>this.addTooltip({referenceElement:this.actionEl,placement:n?"right-start":"left-start",innerHTML:s.noColor}),onMouseOut:()=>this.removeTooltip()}))]))}renderEmptySwatch(e){return(0,i.h)("svg",{class:"empty-swatch",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",width:"20",key:e},(0,i.h)("rect",{width:"20",height:"20",fill:"#f8f8f8",stroke:"#000","stroke-dasharray":"2"}))}addTooltip(e){this.removeTooltip(),this.tooltipEl=document.createElement("calcite-tooltip"),this.tooltipEl.placement=e.placement||"auto",this.tooltipEl.referenceElement=e.referenceElement,this.tooltipEl.overlayPositioning="fixed",this.tooltipEl.innerHTML=e.innerHTML,this.tooltipEl.open=!0,this.el.parentElement.appendChild(this.tooltipEl)}removeTooltip(){var e;(null===(e=this.tooltipEl)||void 0===e?void 0:e.parentNode)&&(this.tooltipEl.parentNode.removeChild(this.tooltipEl),this.tooltipEl=void 0)}get el(){return(0,i.d)(this)}};d.style=":host,arcgis-symbol-styler-inline-input{display:block}.color-picker-container{display:flex;flex-direction:column}.color-picker{--calcite-ui-border-1:transparent}[slot=preview] calcite-color-picker-swatch{width:100%;height:24px}.recent{align-items:center;border:1px solid #949494;display:flex;gap:8px;height:32px;padding:0px 6px;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}.recent:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.recent calcite-color-picker-swatch:not([active]){cursor:pointer}.recent calcite-color-picker-swatch:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.recent calcite-color-picker-swatch:focus[active]{border-radius:100%}.empty-swatch{cursor:default}calcite-tooltip:not([open]){visibility:hidden;pointer-events:none}";const u=class{constructor(e){(0,i.r)(this,e),this.arcgisPopupColorPopoverClose=(0,i.c)(this,"arcgisPopupColorPopoverClose",7),this.arcgisPopupColorPopoverOpen=(0,i.c)(this,"arcgisPopupColorPopoverOpen",7),this.arcgisPopupColorPopoverChange=(0,i.c)(this,"arcgisPopupColorPopoverChange",7),this.closedWithEvent=!1,this.handlePanelDismissedChange=e=>{const t=e.currentTarget;t.closed&&(this.close(),t.closed=!1),e.stopPropagation()},this.handleDone=()=>{this.close()},this.handlePopoverOpen=e=>{this.arcgisPopupColorPopoverOpen.emit(),e.stopPropagation()},this.handlePopoverClose=e=>{this.arcgisPopupColorPopoverClose.emit(),this.closedWithEvent=!0,e.stopPropagation()},this.handlePopoverKeyUp=({key:e})=>{"Escape"===e&&this.close()},this.disabled=!1,this.heading=void 0,this.intlDone=void 0,this.label=void 0,this.hexColor=void 0,this.popoverProps=void 0,this.open=!1}disabledChanged(e){e&&this.open&&this.close()}onInlineInputOpen(e){this.open&&(e.composedPath().includes(this.el)||(this.open=!1))}async setFocus(){var e;null===(e=this.panelElement)||void 0===e||e.setFocus()}async close(){this.open=!1,this.arcgisPopupColorPopoverClose.emit(),this.closedWithEvent=!0}async setOpen(e){this.open=e}disconnectedCallback(){this.closedWithEvent||this.arcgisPopupColorPopoverClose.emit()}render(){const{popoverProps:e}=this;return(0,i.h)(i.H,{class:"js-app-flyout"},(0,i.h)("calcite-popover",{pointerDisabled:!0,onKeyUp:this.handlePopoverKeyUp,label:this.label,offsetDistance:(null==e?void 0:e.offsetDistance)||0,offsetSkidding:(null==e?void 0:e.offsetSkidding)||0,flipDisabled:(null==e?void 0:e.flipDisabled)||!1,open:this.open,overlayPositioning:(null==e?void 0:e.overlayPositioning)||"fixed",referenceElement:(null==e?void 0:e.refElement)||this.previewContainerEl,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,placement:(null==e?void 0:e.placement)||"bottom",triggerDisabled:!0},(0,i.h)("calcite-panel",{closable:!0,onCalcitePanelClose:this.handlePanelDismissedChange,heading:this.heading,style:(null==e?void 0:e.maxHeight)&&{maxHeight:e.maxHeight},ref:e=>this.panelElement=e},(0,i.h)("calcite-color-picker",{allowEmpty:!1,onCalciteColorPickerInput:e=>{const t=e.target.value;this.arcgisPopupColorPopoverChange.emit(t),e.stopPropagation()},scale:"m",value:this.hexColor,storageId:"arcgis-symbol-styler-storage-colors"}),(0,i.h)("calcite-button",{appearance:"solid",scale:"m",slot:"footer",width:"full",label:this.intlDone,onClick:this.handleDone},this.intlDone))))}get el(){return(0,i.d)(this)}static get watchers(){return{disabled:["disabledChanged"]}}},g=class{constructor(e){(0,i.r)(this,e),this.arcgisPopupStylerPopoverClose=(0,i.c)(this,"arcgisPopupStylerPopoverClose",7),this.arcgisPopupStylerPopoverDisconnected=(0,i.c)(this,"arcgisPopupStylerPopoverDisconnected",7),this.documentTabHandler=void 0,this.documentClickHandler=void 0,this.panelScrollHandler=void 0,this.onOpen=()=>{requestAnimationFrame((()=>this.setFocus()))},this.referenceElement=void 0,this.open=!1}async reposition(){var e;null===(e=this.popoverNode)||void 0===e||e.reposition()}async setFocus(){var e;null===(e=this.closeActionNode)||void 0===e||e.setFocus()}async setOpen(e){var t;this.popoverNode&&(this.popoverNode.open=e,e&&(null===(t=this.panelNode)||void 0===t||t.setFocus(),this.popoverNode.reposition()))}async addStyler(e){this.contentNode&&this.contentNode.appendChild(e)}async getPopoverRefElement(){return this.closeActionNode}componentWillLoad(){this.strings=n.p.strings}componentDidLoad(){requestAnimationFrame((()=>{var e;return null===(e=this.closeActionNode)||void 0===e?void 0:e.setFocus()}))}disconnectedCallback(){this.arcgisPopupStylerPopoverDisconnected.emit()}render(){const{referenceElement:e,open:t,strings:o}=this;return(0,i.h)(i.H,{class:"js-app-flyout"},(0,i.h)("calcite-popover",{open:t,placement:"leading-start",offsetDistance:0,offsetSkidding:45,pointerDisabled:!0,triggerDisabled:!0,label:"",referenceElement:e,onCalcitePopoverOpen:this.onOpen,ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{closable:!1,heading:o.chartStyle,class:"styler-panel",ref:e=>this.panelNode=e,onCalcitePanelClose:()=>{this.arcgisPopupStylerPopoverClose.emit(),setTimeout((()=>e.parentElement.focus()),300)}},(0,i.h)("calcite-action",{id:"symbol-styler-dismiss-button",slot:"header-actions-end",scale:"s",icon:"x",text:o.close,onClick:()=>this.arcgisPopupStylerPopoverClose.emit(),ref:e=>this.closeActionNode=e}),(0,i.h)("div",{class:"styler-div",ref:e=>this.contentNode=e}))))}get hostElement(){return(0,i.d)(this)}};g.style=".styler-panel{width:328px;min-height:300px}.styler-div{width:100%}";const m=class{constructor(e){(0,i.r)(this,e),this.arcgisSymbolPickerFileUploadChange=(0,i.c)(this,"arcgisSymbolPickerFileUploadChange",7),this.arcgisSymbolPickerFileUploadInvalidFile=(0,i.c)(this,"arcgisSymbolPickerFileUploadInvalidFile",7),this.arcgisSymbolPickerFileUploadError=(0,i.c)(this,"arcgisSymbolPickerFileUploadError",7),this.handleDragOver=e=>{e.preventDefault()},this.handleDrop=e=>{e.preventDefault(),this.processFile(e.dataTransfer.files[0])},this.handleFileInputChange=async e=>{await this.processFile(e.target.files[0])},this.portal=void 0,this.strings=void 0}render(){return(0,i.h)("div",{class:"file-step","aria-label":this.strings.fileUpload.dragDrop,onDragOver:this.handleDragOver,onDragEnter:this.handleDragOver,onDrop:this.handleDrop},(0,i.h)("div",null,(0,i.h)("div",{class:"file-step__drag-text","aria-label":this.strings.fileUpload.dragDrop},this.strings.fileUpload.dragDrop),(0,i.h)("calcite-button",{class:"file-step__browse-button",appearance:"transparent",iconStart:"image",onClick:()=>{this.fileInput.click()}},this.strings.fileUpload.browse),(0,i.h)("input",{ref:e=>{this.fileInput=e},onChange:this.handleFileInputChange,class:"file-step__file-input",type:"file",accept:".jpg,.gif,.png,.svg,image/jpg,image/gif,image/png,image/svg+xml"})))}async processFile(e){const{portal:t}=this;if(e&&e){if(!this.isValidFile(e))return void this.arcgisSymbolPickerFileUploadInvalidFile.emit();if(this.isSVGFile(e)){const[o]=await(0,a.l)(["esri/rest/symbolService"]),i=t.helperServices.symbols.url,s=new FileReader;s.onload=async t=>{const s={svgImage:t.target.result};o.generateSymbol(i,s).then((t=>{this.arcgisSymbolPickerFileUploadChange.emit({cim:t.symbol,fileName:e.name||"",width:t.symbol.width,height:t.symbol.height})}))},s.readAsText(e)}else{const t=new FileReader;t.onload=async t=>{var o=new Image;o.src=t.target.result,o.onload=()=>{this.arcgisSymbolPickerFileUploadChange.emit({dataURL:t.target.result,fileName:e.name||"",width:o.width,height:o.height})},o.onerror=()=>{this.arcgisSymbolPickerFileUploadError.emit()}},t.readAsDataURL(e)}}}isValidFile(e){return(null==e?void 0:e.name)&&/\.(gif|jpg|jpeg|png|svg)$/i.test(e.name)}isSVGFile(e){return(null==e?void 0:e.name)&&/\.(svg)$/i.test(e.name)}get el(){return(0,i.d)(this)}};m.style=":host{display:inline-block;background-color:white;width:100%;padding:20px 5px 15px 5px;border-color:var(--calcite-ui-border-1);border-width:2px;border-style:dashed;box-sizing:border-box}.file-step{text-align:center}.file-step__upload-icon{margin-bottom:0.5rem;margin-top:0.25rem;color:var(--calcite-ui-text-3)}.file-step__upload-icon calcite-icon{width:4rem;height:4rem}.file-step__drag-text{font-size:0.9rem;margin-bottom:0.25rem}.file-step__browse-button{margin-top:1rem}.file-step__file-input{display:none}";let y=0;const f=({stops:e,style:t="continuous",name:o,layout:s="vertical",width:r=20,height:l=70})=>{const n=y+++"-color-ramp-gradient",a="vertical"===s?"rotate(90)":"";return(0,i.h)("span",{title:o,class:"color-ramp-item"},(0,i.h)("svg",{xmlns:"http://www.w3.org/2000/svg",height:l,width:r},(0,i.h)("defs",null,(0,i.h)("linearGradient",{id:n,gradientTransform:a},"continuous"===t?function(e){const t=1/(e.length-1);return e.slice().map((({r:e,g:o,b:s},r)=>{const l=r*t*100;return(0,i.h)("stop",{"stop-color":`rgb(${e}, ${o}, ${s})`,offset:`${l}%`})}))}(e):function(e){const t=1/e.length,o=[];return e.slice().forEach((({r:e,g:s,b:r},l)=>{const n=l*t*100,a=(l+1)*t*100;o.push((0,i.h)("stop",{"stop-color":`rgb(${e}, ${s}, ${r})`,offset:`${n}%`}),(0,i.h)("stop",{"stop-color":`rgb(${e}, ${s}, ${r})`,offset:`${a}%`}))})),o}(e))),(0,i.h)("rect",{x:"0",y:"0",fill:`url('#${n}')`,width:"100%",height:"100%"})))},v=({stops:e,name:t,opacity:o=null,size:s=48})=>{const{svgUtils:r}=h.e,l=Math.sqrt(e.length),n=(0,c.E)(e),a=Math.sqrt(Math.pow(s,2)+Math.pow(s,2))+0;let p=null;null!=o&&(p={opacity:`${o}`});const d=[],u=[],g=[],m=(s||75)/l;for(let e=0;e<l;e++){const t=e*m;for(let o=0;o<l;o++){const i=o*m,s=x(n[e][o]),l=P(null),a={type:"rect",x:i,y:t,width:m,height:m};d.push(w(s)),u.push(k(a,s.fill,l,null)),g.push(r.getBoundingBox(a))}}const y=r.computeBBox(g),f=r.getTransformMatrix(y,a,a,0,!1,0);return(0,i.h)("span",{title:t,class:"color-ramp-item"},(0,i.h)("div",{style:p},(0,i.h)("svg",{width:a,height:a,style:null,xmlns:"http://www.w3.org/2000/svg"},(0,i.h)("defs",null,d),(0,i.h)("g",{transform:f},u))))};function w(e){const{pattern:t,linearGradient:o}=e;if(t)return(0,i.h)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},(0,i.h)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(o){const e=o.stops.map(((e,t)=>(0,i.h)("stop",{key:`${t}-stop`,offset:e.offset,"stop-color":e.color})));return(0,i.h)("linearGradient",{id:o.id,gradientUnits:"userSpaceOnUse",x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},e)}return null}let b=0,C=0;function k(e,t,o,s){if(e){if("circle"===e.type)return(0,i.h)("circle",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return(0,i.h)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return(0,i.h)("rect",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return(0,i.h)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){const s="string"!=typeof e.path?e.path.map((e=>`${e.command} ${e.values.join(" ")}`)).join(" ").trim():e.path;return(0,i.h)("path",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",d:s})}if("text"===e.type)return(0,i.h)("text",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4","text-anchor":s.align,"text-decoration":s.decoration,kerning:s.kerning,rotate:s.rotate,"text-rendering":"auto","font-style":s.font.style,"font-variant":s.font.variant,"font-weight":s.font.weight,"font-size":s.font.size,"font-family":s.font.family,x:e.x,y:e.y},e.text)}return null}function x(e){const t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const o="patternId-"+ ++b;t.fill=`url(#${o})`,t.pattern={id:o,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){const o="linearGradientId-"+ ++C;t.fill=`url(#${o})`,t.linearGradient={id:o,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((e=>({offset:e.offset,color:e.color&&(0,h.d)(e.color).toString()})))}}else if(e){const o=(0,h.d)(e);t.fill=o.toString()}return t}function P(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=(0,h.d)(e.color).toString()),e.style)){let o=null;if(e.style in E&&(o=E[e.style]),Array.isArray(o)){o=o.slice(0);for(let t=0;t<o.length;++t)o[t]*=e.width;if("butt"!==e.cap){for(let t=0;t<o.length;t+=2)o[t]-=e.width,o[t]<1&&(o[t]=1);for(let t=1;t<o.length;t+=2)o[t]+=e.width}o=o.join(",")}t.dashArray=o}return t}const E={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},S=class{constructor(e){(0,i.r)(this,e),this.setInlineInputRef=e=>{this.inlineInputEl=e},this.disabled=!1,this.options=void 0,this.placement="auto",this.popoverProps=void 0,this.strings=void 0}async setFocus(){var e;await(null===(e=this.inlineInputEl)||void 0===e?void 0:e.setFocus())}async close(){var e;await(null===(e=this.inlineInputEl)||void 0===e?void 0:e.close())}render(){const{disabled:e,strings:t}=this,o=(0,l.g)(this.el);return(0,i.h)(i.H,null,(0,i.h)("arcgis-symbol-styler-inline-input",{disabled:e,intlDone:t.done,heading:t.ramp,label:this.options.heading,popoverProps:this.popoverProps,ref:this.setInlineInputRef,class:{[l.C.rtl]:"rtl"===o}},(0,i.h)("div",{class:"color-picker-container",slot:"content"},this.renderRampsContent(this.options)),(0,i.h)("div",{slot:"preview"},(0,i.h)(f,{stops:this.options.colorRampStops.slice().reverse(),style:this.options.style,layout:"horizontal",height:"100%",width:"100%"}))))}renderRampsContent({activeCategory:e,colorRamps:t,isSelected:o,onCategoryChange:s,onFlip:r,onSelect:l,style:n}){const{strings:a}=this,{categories:h,ramps:p}=this.getCategoriesAndColorRampsBySelectedCategory(e,t),d="2d"===n,u=d?"rotate":"arrow-up-down",g=d?a.rotateColors:a.flipColors,m=d?v:f,y=d?3:6;return[(0,i.h)("div",{class:"section"},(0,i.h)("calcite-label",null,this.strings.category,(0,i.h)("calcite-select",{width:"full",label:this.strings.category,onCalciteSelectChange:s},h.map((t=>(0,i.h)("calcite-option",{value:t,label:a.categories[t],selected:t===e}))))),(0,i.h)("calcite-button",{class:c.C.colorRampFlipper,appearance:"transparent",onClick:e=>{e.preventDefault(),e.stopImmediatePropagation(),r()},scale:"s",width:"full"},(0,i.h)("calcite-icon",{icon:u,scale:"s",style:d?{transform:"rotateY(180deg)"}:null}),g)),(0,i.h)("div",{class:{[c.C.scroller]:!0,[c.C.colorRampSelection]:!0}},(0,i.h)("arcgis-item-palette",{items:p,extraItemProps:{style:n},ItemRenderer:m,itemsPerRow:y,selected:o,onArcgisItemSelect:l}))]}getCategoriesAndColorRampsBySelectedCategory(e,t){const o=c.F[e],i=t.filter((t=>"all"===e||o.some((e=>t.tags.indexOf(e)>-1)))),s=new Set;return t.forEach((e=>e.tags.forEach((e=>s.add(e))))),{categories:Object.keys(c.F).filter((e=>"all"===e||c.F[e].some((e=>s.has(e))))),ramps:i}}get el(){return(0,i.d)(this)}};S.style=".scroller{max-height:var(--scroller-max-height, 200px);overflow-y:auto;min-width:200px;overflow-x:hidden;display:flex;justify-content:center}.color-ramp-item{display:inline-flex;flex-grow:1}.color-ramp-item svg{display:flex}.color-picker-container{display:flex;flex-direction:column}.color-picker-container arcgis-item-palette .palette{gap:20px}calcite-color-picker-swatch{width:200px}.section{display:flex;flex-direction:column;padding:12px;background-color:var(--arcgis-app-background)}.color-ramp-selection{padding:4px 20px 4px 4px;border:1px solid lightgray;border-top:none}.arcgis--rtl .color-ramp-selection{padding:4px 4px 4px 20px;}.color-ramp-flipper calcite-icon{margin:0 0.5rem}[slot=preview] .color-ramp-item{height:24px}";const I=class{constructor(e){(0,i.r)(this,e),this.disabled=!1,this.embedded=!1}render(){return(0,i.h)(i.H,{tabindex:this.disabled?-1:""},(0,i.h)("slot",null))}};I.style=":host{display:flex;flex-direction:column;background-color:var(--arcgis-app-background);padding:16px 12px}:host([disabled]){opacity:var(--arcgis-app-disabled-opacity);pointer-events:none}:host([embedded]){padding:0}";const D=class{constructor(e){(0,i.r)(this,e),this.updatePreview=(0,p.d)((async()=>{var e;const{symbol:t}=this;if(!t)return;const o=Object.assign({},this.options);"cim"===t.type&&"CIMPolygonSymbol"===t.data.symbol.type&&delete o.size;const i=t.clone();"picture-marker"===i.type&&o.size&&"number"==typeof o.size&&(i.width=i.width/i.height*o.size,i.height=o.size);const s=h.e.symbolUtils.renderPreviewHTML(i,o);this.lastPreviewRender=s;const r=await s;this.lastPreviewRender!==s||(null===(e=this.lastPreview)||void 0===e||e.remove(),this.lastPreview=r,this.el.shadowRoot.append(r),this.backgroundTheme=h.e.previewSymbol2D.getContrastingBackgroundTheme(t,245))}),250),this.backgroundTheme="light",this.contrast=!1,this.options=void 0,this.symbol=void 0}watchSymbolAndOptions(){this.updatePreview()}async componentDidLoad(){await this.updatePreview()}render(){return(0,i.h)(i.H,{class:{dark:this.contrast&&"dark"===this.backgroundTheme}})}get el(){return(0,i.d)(this)}static get watchers(){return{symbol:["watchSymbolAndOptions"],options:["watchSymbolAndOptions"]}}};D.style=":host{display:inline-block}:host(.dark){background-color:#f3f3f3}"},10700:(e,t,o)=>{o.d(t,{A:()=>x,B:()=>P,C:()=>i,D:()=>E,E:()=>A,F:()=>s,a:()=>y,b:()=>l,c:()=>c,d:()=>n,e:()=>h,f:()=>_,g:()=>a,h:()=>p,i:()=>S,j:()=>d,k:()=>g,l:()=>v,m:()=>f,n:()=>C,o:()=>m,p:()=>u,q:()=>b,r:()=>w,s:()=>r,t:()=>F,u:()=>R,v:()=>I,w:()=>D,x:()=>O,y:()=>T,z:()=>k});const i={customSymbolContent:"custom-symbol-content",autoAdjustLabel:"auto-adjust-label",styleDropdown:"style-dropdown",arrowDropdown:"arrow-dropdown",iconDropdown:"icon-dropdown",iconDropdownSelected:"icon-dropdown--selected",iconDropdownItemContent:"icon-dropdown-item-content",colorRampFlipper:"color-ramp-flipper",scroller:"scroller",colorRampSelection:"color-ramp-selection",sectionToggleDisabled:"section-toggle--disabled",autoAdjustCheckbox:"auto-adjust-checkbox",contentGroup:"content-group",colorLockedInfo:"color-locked-info",message:"message",container:"container",label:"label",openIcon:"open-icon",symbol:"symbol",changeSymbolTrigger:"change-symbol-trigger"},s={all:["*"],light:["light"],dark:["dark"],redsAndYellows:["oranges","reds","yellows"],greens:["greens"],blues:["blues"],purplesAndPinks:["purples","pinks"],browns:["browns"],grays:["grays"],bright:["bright"],subdued:["subdued"],colorblindFriendly:["colorblind-friendly"]},r=["none","begin","end","begin-end"],l=["solid","dash","dot","dash-dot","long-dash-dot-dot","short-dash","short-dot","short-dash-dot","short-dash-dot-dot","long-dash","long-dash-dot"],n={size:!0,preview:!0,rotation:!0},a={style:!0,arrow:!0,width:!0,autoStrokeAdjust:!1},c={suggestedColors:!0,customColor:!0,transparency:!0},h={colorRamps:!0,transparency:!0},p={extra:!0},d="arcgis-symbol-styler-storage-colors",u={size:24,maxSize:24},g=100,m=0,y=18,f=0,v=360,w=0,b=150,C=1,k=200,x=0,P=100,E=0,S=10,I=200,D=0,F=100,R=0,O=120,T=0;function _(e,t=!1){return t?function(e){const t=Math.sqrt(e.length),o=A(e).reverse(),i=[];for(let e=0;e<t;e++){const t=[];o.forEach((o=>t.push(o[e]))),i.push(t)}return function(e,t){let o=[];e=e.slice().map((e=>e.slice()));const i="HH".split(""),s=i[0],r=i[1];"L"===s&&e.reverse();const l="H"===r;return e.forEach((e=>{l&&e.slice().reverse(),o=o.concat(e)})),o}(i).reverse()}(e):e.slice().reverse()}function A(e,t){let o=[];const i=Math.sqrt(e.length),s=(t||"HH").split(""),r=s[0],l="H"!==s[1];for(let t=0;t<i;t++){let s=[];for(let o=0;o<i;o++){const r=t*i+o;s.push(e[r])}l&&s.reverse(),o.push(s)}return"L"===r&&o.reverse(),o}},27010:(e,t,o)=>{o.d(t,{c:()=>n});var i=o(28384);const s=e=>!("isConnected"in e)||e.isConnected,r=((e,t)=>{let o;return(...e)=>{o&&clearTimeout(o),o=setTimeout((()=>{o=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(s))})(...e)}),2e3)}})(),l=e=>"function"==typeof e?e():e,n=(e,t)=>{const o=((e,t=((e,t)=>e!==t))=>{const o=l(e);let i=new Map(Object.entries(null!=o?o:{}));const s={dispose:[],get:[],set:[],reset:[]},r=()=>{var t;i=new Map(Object.entries(null!==(t=l(e))&&void 0!==t?t:{})),s.reset.forEach((e=>e()))},n=e=>(s.get.forEach((t=>t(e))),i.get(e)),a=(e,o)=>{const r=i.get(e);t(o,r,e)&&(i.set(e,o),s.set.forEach((t=>t(e,o,r))))},c="undefined"==typeof Proxy?{}:new Proxy(o,{get:(e,t)=>n(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,o)=>(a(t,o),!0)}),h=(e,t)=>(s[e].push(t),()=>{((e,t)=>{const o=e.indexOf(t);o>=0&&(e[o]=e[e.length-1],e.length--)})(s[e],t)});return{state:c,get:n,set:a,on:h,onChange:(t,o)=>{const i=h("set",((e,i)=>{e===t&&o(i)})),s=h("reset",(()=>o(l(e)[t])));return()=>{i(),s()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(h("set",t.set)),t.get&&e.push(h("get",t.get)),t.reset&&e.push(h("reset",t.reset)),t.dispose&&e.push(h("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{s.dispose.forEach((e=>e())),r()},reset:r,forceUpdate:e=>{const t=i.get(e);s.set.forEach((o=>o(e,t,t)))}}})(e,t);return o.use((()=>{if("function"!=typeof i.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const o=(0,i.g)();o&&((e,t,o)=>{const i=e.get(t);i?i.includes(o)||i.push(o):e.set(t,[o])})(e,t,o)},set:t=>{const o=e.get(t);o&&e.set(t,o.filter(i.f)),r(e)},reset:()=>{e.forEach((e=>e.forEach(i.f))),r(e)}}})()),o}},87247:(e,t,o)=>{function i(e){e.layer=null,e.mapView=null,e.portal=null,e.config=null,e.strings=null,e.currentLanguage=null,e.currentLanguageIntl=null,e.serviceType=null,e.popupTemplate=null,e.layerHasAttachment=null,e.layerHasET=null,e.layerHasAttributes=null,e.layerHasCharts=null,e.layerHasImages=null,e.layerHasText=null,e.layerDisplayType=null,e.supportsArcade=null,e.layerHasRelatedRecords=!1}o.d(t,{c:()=>i,p:()=>s});const s=(0,o(27010).c)({layer:null,mapView:null,portal:null,config:null,strings:null,currentLanguage:null,currentLanguageIntl:null,serviceType:null,popupTemplate:null,layerHasAttachment:null,layerHasET:null,layerHasAttributes:null,layerHasCharts:null,layerHasImages:null,layerHasText:null,layerDisplayType:null,supportsArcade:null,layerHasRelatedRecords:!1}).state},15859:(e,t,o)=>{o.d(t,{a:()=>r,b:()=>s,c:()=>a,d:()=>c,g:()=>n,s:()=>l});var i=o(26426);function s(e,t,o,i){!function(e,t,o){let i=null==(o=o||{})?void 0:o.expires;if("number"==typeof i){const e=new Date,t=24*i*60*60*1e3;e.setTime(Date.now()+t),i=o.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(o.expires=i.toUTCString());let s,r=`${e}=${encodeURIComponent(t)}`;for(s in o){r+=`; ${s}`;const e=o[s];!0!==e&&(r+=`=${e}`)}document.cookie=r}(e,i?JSON.stringify(t):t,o)}function r(e,t){const o=function(e){const t=document.cookie,o=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),s=t.match(o);return s?decodeURIComponent(s[1]):void 0}(e);return o&&t?JSON.parse(o):o}function l(e,t,o){window.localStorage.setItem(e,o?JSON.stringify(t):t)}function n(e,t){const o=window.localStorage.getItem(e);return o&&t?JSON.parse(o):o}function a(e,t,o){window.sessionStorage.setItem(e,o?JSON.stringify(t):t)}function c(e,t){const o=window.sessionStorage.getItem(e);return o&&t?JSON.parse(o):o}}}]);