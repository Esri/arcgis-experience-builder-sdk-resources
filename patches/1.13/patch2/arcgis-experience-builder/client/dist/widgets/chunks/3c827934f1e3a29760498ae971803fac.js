/*! For license information please see 3c827934f1e3a29760498ae971803fac.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[29976],{29976:(e,t,i)=>{i.r(t),i.d(t,{arcgis_field_pick_list:()=>r});var s=i(28384),n=i(81068),o=i(72637),l=i(62727);i(66716),i(18869);const r=class{constructor(e){(0,s.r)(this,e),this.arcgisFieldPickListDismissed=(0,s.c)(this,"arcgisFieldPickListDismissed",7),this.arcgisFieldPickListChange=(0,s.c)(this,"arcgisFieldPickListChange",7),this.arcgisFieldPickListSortByChange=(0,s.c)(this,"arcgisFieldPickListSortByChange",7),this.calciteValueList=e=>(0,s.h)("calcite-pick-list-item",{key:e.name,label:e.alias||e.name,description:(()=>this.showFieldName?`{${e.name}}`:this.showDescription&&e.description?e.description:null)(),value:e.name,selected:!this.multiple&&e.name===this.selectedFields[0]||this.multiple&&this.selectedFields.indexOf(e.name)>-1,metadata:{label:e.alias,fieldName:e.name}},this.showFieldInfoCheck(e)&&(0,s.h)("calcite-action",{slot:"actions-end",text:this.strings.info,title:this.strings.info,scale:"s",icon:"information",onClick:t=>{var i;t.stopPropagation();const s=t.target,n=document.createElement("calcite-flow-item");n.heading=null!==(i=e.alias)&&void 0!==i?i:e.name,n.description=e.name;const o=document.createElement("arcgis-field-info");o.lang=this.currentLanguageIntl,o.fieldName=e.name,o.layer=this.layer,o.view=this.mapView,o.classList.add("content"),n.appendChild(o),n.addEventListener("calciteFlowItemBack",(()=>setTimeout((()=>requestAnimationFrame((()=>s.setFocus()))),200))),this.flowElement.appendChild(n),setTimeout((()=>requestAnimationFrame((()=>n.setFocus()))),200)}})),this.selectedFields=[],this.fields=void 0,this.popoverProps=void 0,this.layer=void 0,this.mapView=void 0,this.showFieldInfo=!1,this.showFieldName=!1,this.showDescription=!1,this.showSelectionAll=!1,this.showCancel=!0,this.showSort=!0,this.showFilterLength=10,this.multiple=!1,this.heading=void 0,this.okBtnText=void 0,this.filterPlaceholderText=void 0,this.sortBy=void 0,this.lastSortyBy=o.L.default,this.filterFields=null}async componentWillLoad(){const e=await(0,l.g)(this.hostElement);this.strings=e[0],this.currentLanguage=e[1],this.currentLanguageIntl=e[2],!this.multiple&&this.selectedFields.length>1&&(this.selectedFields=[this.selectedFields[0]]),this.lastSortyBy=this.sortBy||this.lastSortyBy}componentDidLoad(){this.setUpObserver(),this.popoverNode.open=!0,setTimeout((()=>requestAnimationFrame((()=>this.panelElement.setFocus()))),200)}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}calciteFilterChangeHandler(e){var t,i;e.stopPropagation();const s=null===(t=null==e?void 0:e.path)||void 0===t?void 0:t.find((e=>"CALCITE-FILTER"===e.nodeName));this.filterFields=null===(i=null==s?void 0:s.filteredItems)||void 0===i?void 0:i.map((e=>e.value))}async setFocus(){setTimeout((()=>requestAnimationFrame((()=>this.panelElement.setFocus()))),1)}async reposition(){var e;null===(e=this.popoverNode)||void 0===e||e.reposition()}getSortedList(){const e=[...this.fields];return this.lastSortyBy===o.L.display?e.sort(((e,t)=>e.alias.localeCompare(t.alias))):this.lastSortyBy===o.L.field?e.sort(((e,t)=>e.name.localeCompare(t.name))):this.lastSortyBy===o.L.type&&e.sort(((e,t)=>e.type.localeCompare(t.type))),e}showFieldInfoCheck(e){return!!this.showFieldInfo&&!e.name.includes(o.f.expression)&&!e.name.includes(o.f.relationship)}selectDeselect(){var e;return(null===(e=this.filterFields)||void 0===e?void 0:e.length)?this.filterContainsAll():this.selectedFields.length===this.fields.length}filterContainsAll(){return this.filterFields.every((e=>this.selectedFields.some((t=>t===e))))}render(){var e;const t=(0,s.h)("calcite-button",{slot:"footer",appearance:this.showCancel?"solid":"outline-fill",width:this.showCancel?"half":"full",scale:"m",onClick:()=>{this.arcgisFieldPickListDismissed.emit({selectedFields:this.selectedFields})}},this.okBtnText||(this.multiple?this.strings.done:this.strings.ok)),i=(0,s.h)("calcite-button",{slot:"footer",appearance:"outline-fill",width:this.multiple?"half":"full",scale:"m",onClick:()=>this.arcgisFieldPickListDismissed.emit()},this.strings.cancel),l=this.fields.every((e=>!!e.type)),r=(0,s.h)("calcite-dropdown",{slot:"menu-actions",placement:"bottom-end",overlayPositioning:"fixed",ref:e=>this.dropdownNode=e,onCalciteDropdownOpen:()=>{var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer.observe(this.popoverNode,{attributes:!0})},onCalciteDropdownClose:()=>{var e;return null===(e=this.observer)||void 0===e?void 0:e.disconnect()}},(0,s.h)("calcite-action",{slot:"trigger",text:this.strings.sort,title:this.strings.sort},(0,s.h)("calcite-icon",{scale:"s",icon:"sortDescending"})),(0,s.h)("calcite-dropdown-group",null,(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===o.L.default,onClick:()=>{this.lastSortyBy=o.L.default,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.default),(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===o.L.display,onClick:()=>{this.lastSortyBy=o.L.display,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.displayName),l&&(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===o.L.type,onClick:()=>{this.lastSortyBy=o.L.type,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.type),(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===o.L.field,onClick:()=>{this.lastSortyBy=o.L.field,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.fieldName))),a=(0,s.h)("div",{class:"selection-button-div"},(0,s.h)("calcite-button",{appearance:"transparent",scale:"s",width:"full",onClick:()=>{var e,t;this.selectDeselect()?this.selectedFields=(null===(e=this.filterFields)||void 0===e?void 0:e.length)?this.selectedFields.filter((e=>!this.filterFields.includes(e))):[]:this.selectedFields=(null===(t=this.filterFields)||void 0===t?void 0:t.length)?[...new Set([...this.selectedFields,...this.filterFields])]:this.fields.map((e=>e.name))}},this.selectDeselect()?this.strings.deselectAll:this.strings.selectAll));return(0,s.h)(s.H,{class:"js-app-flyout"},(0,s.h)("calcite-popover",{dir:(0,n.g)(this.hostElement),class:"popover",placement:this.popoverProps.placement||"leading-start",open:!1,pointerDisabled:!0,referenceElement:this.popoverProps.refElement,offsetDistance:this.popoverProps.offsetDistance||-Math.round(this.popoverProps.refElement.getBoundingClientRect().width),offsetSkidding:this.popoverProps.offsetSkidding||0,overlayPositioning:this.popoverProps.overlayPositioning,triggerDisabled:this.popoverProps.triggerDisabled,autoClose:this.popoverProps.autoClose,label:this.heading||(this.multiple?this.strings.headerSelect:this.strings.header),onCalcitePopoverClose:()=>this.arcgisFieldPickListDismissed.emit(),ref:e=>this.popoverNode=e},(0,s.h)("calcite-flow",{ref:e=>{this.flowElement=e},style:{width:`${this.popoverProps.popoverWidth||this.popoverProps.refElement.getBoundingClientRect().width}px`}},(0,s.h)("calcite-flow-item",{ref:e=>this.panelElement=e,class:"panel",heading:this.heading||(this.multiple?this.strings.headerSelect:this.strings.header),closable:!0,onCalciteFlowItemClose:()=>this.arcgisFieldPickListDismissed.emit()},this.multiple&&t,this.showCancel&&i,(0,s.h)("calcite-pick-list",{multiple:this.multiple,ref:e=>{this.pickListNode=e},class:"content",filterEnabled:this.fields.length>=this.showFilterLength,filterPlaceholder:null!==(e=this.filterPlaceholderText)&&void 0!==e?e:this.strings.filter,onCalciteListChange:async()=>{const e=await this.pickListNode.getSelectedItems();this.selectedFields=[...new Set([...this.selectedFields.filter((t=>e.has(t))),...e.keys()])],this.arcgisFieldPickListChange.emit({selectedFields:this.selectedFields}),this.multiple||this.arcgisFieldPickListDismissed.emit({selectedFields:this.selectedFields})}},this.fields.length>=this.showFilterLength&&this.showSort&&r,this.multiple&&this.showSelectionAll&&a,[...this.getSortedList()].map((e=>this.calciteValueList(e))))))))}setUpObserver(){this.observer=new MutationObserver((e=>{for(const t of e)"style"===t.attributeName&&"hidden"===this.popoverNode.style.visibility&&(this.dropdownNode.open=!1)}))}get hostElement(){return(0,s.d)(this)}};r.style=".popover{z-index:100}.panel{min-height:300px}.content{max-height:60vh}.selection-button-div{padding:4px 10px}"},72637:(e,t,i)=>{var s,n,o,l,r,a;i.d(t,{L:()=>a,a:()=>r,f:()=>n,i:()=>s,l:()=>o,s:()=>l}),function(e){e.sourceUrl="sourceUrl",e.title="title",e.caption="caption",e.linkUrl="linkUrl",e.altText="altText"}(s||(s={})),function(e){e.expression="expression/",e.relationship="relationships/",e.raster="Raster."}(n||(n={})),function(e){e.feature="feature",e.cluster="cluster",e.mapNotes="mapNotes"}(o||(o={})),function(e){e.feature="feature",e.mapImage="map-image",e.scene="scene",e.ogcFeature="ogc-feature",e.imagery="imagery",e.wfs="wfs",e.wms="wms",e.csv="csv",e.geojson="geojson",e.stream="stream",e.imageryTile="imagery-tile",e.tile="tile",e.subtype="subtype"}(l||(l={})),function(e){e.integer="integer",e.smallInteger="small-integer",e.bigInteger="big-integer",e.single="single",e.double="double",e.long="long",e.string="string",e.date="date",e.dateOnly="date-only",e.timeOnly="time-only",e.timestampOffset="timestamp-offset",e.oid="oid",e.guid="guid",e.globalId="global-id",e.number="number"}(r||(r={})),function(e){e.default="default",e.display="display",e.type="type",e.field="field"}(a||(a={}))},81068:(e,t,i)=>{i.d(t,{C:()=>r,a:()=>d,f:()=>a,g:()=>l,l:()=>o});var s=i(66716),n=i(18869);const o=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function l(e){return function(e,t,i){const s=(0,n.c)(e,"[dir]");return s?s.getAttribute("dir"):"ltr"}(e)}const r={rtl:"arcgis--rtl"};async function a(e,t){const{api:i,type:n,places:o}=t||{};if(4===i){const[t]=await(0,s.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:o,style:n,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:n}))}const[l]=await(0,s.l)(["dojo/number"]);return l.format(e,{type:n,places:o,pattern:null==t?void 0:t.pattern})}const c={};function d(e){const t=document.documentElement.lang;return c[t]||(c[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[t].format(e)}},66716:(e,t,i)=>{i.d(t,{a:()=>s,c:()=>o,e:()=>l,g:()=>n,l:()=>r});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var l=o((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",s="next";function n(e){if(e.toLowerCase()===s)return s;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function l(e){return!e||n(e)?function(e){void 0===e&&(e=i);var t=o(e),l=n(e);if(l!==s&&3===l.major){var r=l.minor<=10?"js/":"";return"".concat(t).concat(r,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function r(e,t){var i=l(e),s=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(i);return s||function(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}(s=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(i),t),s}var a={};function c(e,t,i){var s;i&&(s=function(e,t){var i=function(s){t(s.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}(e,i));var n=function(){t(e),e.removeEventListener("load",n,!1),s&&e.removeEventListener("error",s,!1)};e.addEventListener("load",n,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function h(){var e=window.require;return e&&e.on}function u(e){void 0===e&&(e={});var i={};[a,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var s=i.version,n=i.url||o(s);return new t.Promise((function(e,t){var o=d();if(o){var l=o.getAttribute("src");l!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(l,")."))):h()?e(o):c(o,e,t)}else if(h())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=i.css;a&&r(!0===a?s:a,i.insertCssBefore),c(o=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(n),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),t),document.body.appendChild(o)}}))}function p(e){return new t.Promise((function(t,i){var s=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];s.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),h())return p(e);var i=d(),s=i&&i.getAttribute("src");return!t.url&&s&&(t.url=s),u(t).then((function(){return p(e)}))},e.getScript=d,e.isLoaded=h,e.loadScript=u,e.setDefaultOptions=function(e){void 0===e&&(e={}),a=e},e.loadCss=r,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const r=async(e,t)=>(await l.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},62727:(e,t,i)=>{i.d(t,{a:()=>l,g:()=>c});var s=i(18869),n=i(81068),o=i(28384);function l(e){var t,i,o;const l=null!==(t=(0,s.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===o?void 0:o.documentElement,r=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(r)?n.l.get(r):n.l.has(r.slice(0,2))?n.l.get(r.slice(0,2)):"en"}const r={};function a(e,t){const i=`${e}${t}`;return r[i]||(r[i]=function(e,t){return new Promise(((i,s)=>{fetch((0,o.a)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?i(e.json()):s()}),(()=>s()))}))}(e,t)),r[i]}async function c(e,t){const i=t||e.tagName.toLowerCase(),o=l(e),r=function(e){var t,i,o;const l=null!==(t=(0,s.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===o?void 0:o.documentElement,r=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(r)?n.l.get(r):n.l.has(r.slice(0,2))?r:"en"}(e);let c;try{c=await a(i,o)}catch(e){console.warn(`no locale for ${i} (${o}) loading default locale en.`),c=await a(i,"en")}return[c,o,r]}}}]);