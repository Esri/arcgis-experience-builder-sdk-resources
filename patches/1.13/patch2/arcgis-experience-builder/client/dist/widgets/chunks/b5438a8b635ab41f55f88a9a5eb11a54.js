/*! For license information please see b5438a8b635ab41f55f88a9a5eb11a54.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[3700],{3700:(t,e,i)=>{i.r(e),i.d(e,{arcgis_sketch:()=>v,arcgis_sketch_content:()=>w,arcgis_sketch_shortcuts:()=>P,arcgis_sketch_snapping:()=>I,arcgis_sketch_tools:()=>C});var s=i(28384),o=i(62727),l=i(81068),n=i(66716),a=i(15859),r=i(27010),c=i(72637),h=i(34077),p=i(41528);function d(t){if(!function(t){var e,i,s,o,l,n;const a=t.data.symbol.symbolLayers;if(1===a.length){const t=a[0];if("CIMVectorMarker"!==t.type||t.colorLocked)return!1;const s=null===(i=null===(e=t.markerGraphics[0])||void 0===e?void 0:e.symbol)||void 0===i?void 0:i.symbolLayers;return 1===t.markerGraphics.length&&u(s)}if(2===a.length){const t=a[0],e=a[1];if("CIMVectorMarker"!==t.type||"CIMVectorMarker"!==e.type||t.colorLocked||t.size>e.size)return!1;const i=null===(o=null===(s=t.markerGraphics[0])||void 0===s?void 0:s.symbol)||void 0===o?void 0:o.symbolLayers,r=null===(n=null===(l=e.markerGraphics[0])||void 0===l?void 0:l.symbol)||void 0===n?void 0:n.symbolLayers;return 1===t.markerGraphics.length&&1===e.markerGraphics.length&&u(i)&&function(t){return function(t){return null==t?void 0:t.find((t=>"CIMSolidFill"===t.type))}(t)&&g(t)}(r)}return!1}(t))return;const e=t.data.symbol.symbolLayers;return e[e.length-1].markerGraphics[0].symbol.symbolLayers.find((t=>"CIMSolidStroke"===t.type))}function u(t){return function(t){return null==t?void 0:t.find((t=>"CIMSolidFill"===t.type&&!t.colorLocked))}(t)&&g(t)}function g(t){return null==t?void 0:t.find((t=>"CIMSolidStroke"===t.type))}i(18869);const m=(t,e)=>{const i=[...new Set([...t.featureSources.filter((t=>t.enabled)).map((t=>t.layer.id))])],s={enabled:t.enabled,selfEnabled:t.selfEnabled,featureEnabled:t.featureEnabled,featureSourcesIds:i};(0,a.c)(e,s,!0)},y=(t,e)=>{const i=[];return e.forEach((e=>{t.map.allLayers.toArray().find((t=>{-1!==["map-notes","feature","geojson","csv","wfs","map"].indexOf(null==t?void 0:t.type)&&t.id===e&&i.push({layer:t,enabled:!0})}))})),i},f=(t,e)=>{const i={enabled:t.enabled};(0,a.c)(e,i,!0)},S=t=>t&&((0,a.d)(t.webmap,!0)||(0,a.d)(t.current,!0))||null,k=(0,r.c)({mapView:null,portal:null,layer:null,strings:null,currentLanguage:"",sketchMessage:"",svModel:null,snappingOptions:null,sketchTooltipOptions:null,snappingSessionStorageIds:null,sketchTooltipSessionStorageIds:null}).state;class b{constructor(t,e,i,s,o,l,n){this.layer=t,this.mapView=e,this.sketchViewModelPoint=new i({layer:this.layer.pointLayer,view:this.mapView,defaultCreateOptions:{hasZ:!1,mode:"hybrid"},updateOnGraphicClick:!1,defaultUpdateOptions:{multipleSelectionEnabled:!1},snappingOptions:s,tooltipOptions:o}),this.sketchViewModelPoint.on("create",(t=>{l(t,this.sketchViewModelPoint)})),this.sketchViewModelPoint.on("update",(t=>n(t))),this.sketchViewModelLine=new i({layer:this.layer.polylineLayer,view:this.mapView,defaultCreateOptions:{hasZ:!1,mode:"hybrid"},updateOnGraphicClick:!1,defaultUpdateOptions:{multipleSelectionEnabled:!1},snappingOptions:s,tooltipOptions:o}),this.sketchViewModelLine.on("create",(t=>l(t,this.sketchViewModelLine))),this.sketchViewModelLine.on("update",(t=>n(t))),this.sketchViewModelPolygon=new i({layer:this.layer.polygonLayer,view:this.mapView,defaultCreateOptions:{hasZ:!1,mode:"hybrid"},updateOnGraphicClick:!1,defaultUpdateOptions:{multipleSelectionEnabled:!1},snappingOptions:s,tooltipOptions:o}),this.sketchViewModelPolygon.on("create",(t=>l(t,this.sketchViewModelPolygon))),this.sketchViewModelPolygon.on("update",(t=>n(t))),this.sketchViewModelText=new i({layer:this.layer.textLayer,view:this.mapView,defaultCreateOptions:{hasZ:!1,mode:"hybrid"},updateOnGraphicClick:!1,defaultUpdateOptions:{multipleSelectionEnabled:!1},snappingOptions:s,tooltipOptions:o}),this.sketchViewModelText.on("create",(t=>l(t,this.sketchViewModelText))),this.sketchViewModelText.on("update",(t=>n(t)))}delete(){this._deletePoint(),this._deleteLine(),this._deletePolygon(),this._deleteText()}cancel(){this._cancelPoint(),this._cancelLine(),this._cancelPolygon(),this._cancelText()}duplicate(){this._duplicatePoint(),this._duplicateLine(),this._duplicatePolygon(),this._duplicateText()}updateOnGraphic(t){var e;t?this.hitTestHandle=this.mapView.on("click",(async t=>{const e=(await this.mapView.hitTest(t,{include:this.layer})).results;if(e.length){const t=["point","polyline","polygon"];e.sort((function(e,i){return t.indexOf(e.graphic.geometry.type)-t.indexOf(i.graphic.geometry.type)}));const i=e[0].graphic;switch(i.layer){case this.layer.pointLayer:this.updatePoint([i]);break;case this.layer.textLayer:this.updateText([i]);break;case this.layer.polylineLayer:this.updateLine([i]);break;case this.layer.polygonLayer:this.updatePolygon([i]);break;default:return}}})):null===(e=this.hitTestHandle)||void 0===e||e.remove()}destroy(){this._destroyPoint(),this._destroyLine(),this._destroyPolygon(),this._destroyText()}getPointSVM(){return this.sketchViewModelPoint}getPoint(){return this.sketchViewModelPoint.pointSymbol}setPoint(t){this.sketchViewModelPoint.pointSymbol=t}createPoint(){this.sketchViewModelPoint.create("point")}updatePoint(t){this.sketchViewModelPoint.update(t)}_deletePoint(){this.sketchViewModelPoint.delete()}_cancelPoint(){this.sketchViewModelPoint.cancel()}_duplicatePoint(){this.sketchViewModelPoint.duplicate()}_destroyPoint(){this.sketchViewModelPoint.destroy()}getLineSVM(){return this.sketchViewModelLine}getLine(){return this.sketchViewModelLine.polylineSymbol}setLine(t){this.sketchViewModelLine.polylineSymbol=t}createLine(){this.sketchViewModelLine.create("polyline")}updateLine(t){this.sketchViewModelLine.update(t)}_deleteLine(){this.sketchViewModelLine.delete()}_cancelLine(){this.sketchViewModelLine.cancel()}_duplicateLine(){this.sketchViewModelLine.duplicate()}_destroyLine(){this.sketchViewModelLine.destroy()}getPolygonSVM(){return this.sketchViewModelPolygon}getPolygon(){return this.sketchViewModelPolygon.polygonSymbol}setPolygon(t){this.sketchViewModelPolygon.polygonSymbol=t}createPolygon(t){this.sketchViewModelPolygon.create(t)}updatePolygon(t){this.sketchViewModelPolygon.update(t)}_deletePolygon(){this.sketchViewModelPolygon.delete()}_cancelPolygon(){this.sketchViewModelPolygon.cancel()}_duplicatePolygon(){this.sketchViewModelPolygon.duplicate()}_destroyPolygon(){this.sketchViewModelPolygon.destroy()}getTextSVM(){return this.sketchViewModelText}getText(){return this.sketchViewModelText.pointSymbol}setText(t){this.sketchViewModelText.pointSymbol=t}createText(){this.sketchViewModelText.create("point")}updateText(t){this.sketchViewModelText.update(t)}_deleteText(){this.sketchViewModelText.delete()}_cancelText(){this.sketchViewModelText.cancel()}_duplicateText(){this.sketchViewModelText.duplicate()}_destroyText(){this.sketchViewModelText.destroy()}}const v=class{constructor(t){(0,s.r)(this,t),this.sketchUpdated=(0,s.c)(this,"sketchUpdated",7),this.arcgisSketchDismissedChange=(0,s.c)(this,"arcgisSketchDismissedChange",7),this.internalSketchUpdated=(0,s.c)(this,"internalSketchUpdated",7),this.closeSketchPopovers=(0,s.c)(this,"closeSketchPopovers",7),this.closePopupPopovers=(0,s.c)(this,"closePopupPopovers",7),this.sketchContentReRender=(0,s.c)(this,"sketchContentReRender",7),this.disableSketchPanel=(0,s.c)(this,"disableSketchPanel",7),this.closeSketchSnappingPopovers=(0,s.c)(this,"closeSketchSnappingPopovers",7),this.sketchActionOnSelectFeatures=(0,s.c)(this,"sketchActionOnSelectFeatures",7),this.sketchMode="update",this.escKey=!1,this.keepSelectionMessage="",this.keepSelectionTool=null,this.onGraphicUpdate=t=>{var e,i;if("start"===t.state&&(this.mapView.closePopup(),this.multipleSelectedGraphics.length<=1&&1===t.graphics.length?(this.currentSketchInfo.graphic=t.graphics[0],this.currentSketchInfo.symbol=this.currentSketchInfo.graphic.symbol,!this.multipleSelectedGraphics.length&&this.multipleSelectedGraphics.push(this.currentSketchInfo.graphic),this.currentSketchInfo.tool=this.getGeometryTypeFromGraphic(this.currentSketchInfo.graphic),this.currentSketchInfo.popup=this.currentSketchInfo.graphic.popupTemplate,this.currentSketchInfo.title=(null===(i=null===(e=this.currentSketchInfo.graphic)||void 0===e?void 0:e.attributes)||void 0===i?void 0:i.title)||this.defaultGraphicTitle(),this.sketchContentReRender.emit(),this.showSketchContent=!0):this.sketchMessageHandler(null)),"complete"===t.state){const{keepSelectionTool:t}=this;t?this.keepSelectToolSelection():(this.currentSketchInfo.graphic=null,this.multipleSelectedGraphics=[],this.closeSketchPopovers.emit(),this.internalSketchUpdated.emit(),this.sketchContentReRender.emit())}},this.mapView=void 0,this.layer=void 0,this.portal=void 0,this.dismissible=!1,this.snappingSessionStorageIds=void 0,this.sketchTooltipSessionStorageIds=void 0,this.mapNotesFeature=null,this.currentSketchInfo={tool:null,symbol:null,graphic:null,popup:null,title:null,sourceIds:{}},this.multipleSelectedGraphics=[],this.showSketchContent=!0}async componentWillLoad(){var t;[this.strings,this.currentLanguage]=await(0,o.g)(this.hostElement),await this.loadAllModules(),this.snappingOptions=((t,e,i,s)=>{const o=(t=>t&&((0,a.d)(t.webmap,!0)||(0,a.d)(t.current,!0))||null)(t)||{enabled:!0,selfEnabled:!0,featureEnabled:!0,featureSourcesIds:[e.id]};return new s({enabled:o.enabled,selfEnabled:o.selfEnabled,featureEnabled:o.featureEnabled,featureSources:y(i,o.featureSourcesIds)})})(this.snappingSessionStorageIds,this.layer,this.mapView,this.SnappingOptions),this.sketchTooltipOptions=(t=this.sketchTooltipSessionStorageIds,new(0,this.SketchTooltipOptions)({enabled:(S(t)||{enabled:!1}).enabled})),this.svModel=new b(this.layer,this.mapView,this.SketchViewModel,this.snappingOptions,this.sketchTooltipOptions,((t,e)=>this.onGraphicCreate(t,e)),this.onGraphicUpdate),k.svModel=this.svModel,k.mapView=this.mapView,k.layer=this.layer,k.portal=this.portal,k.strings=this.strings,k.currentLanguage=this.currentLanguage,k.snappingOptions=this.snappingOptions,k.sketchTooltipOptions=this.sketchTooltipOptions,k.snappingSessionStorageIds=this.snappingSessionStorageIds,k.sketchTooltipSessionStorageIds=this.sketchTooltipSessionStorageIds}componentDidLoad(){this.selector.view=this.mapView,this.mapView.popupEnabled=!1,this.sketchToolsEl=document.createElement("arcgis-sketch-tools"),this.sketchToolsEl.refElement=this.hostElement,this.mapNotesFeature&&(this.sketchToolsEl.mapNotesFeature=this.mapNotesFeature),document.body.appendChild(this.sketchToolsEl)}disconnectedCallback(){this.watchEscapeOnMapView(!1),this.svModel.updateOnGraphic(!1),this.removeSketchShortcuts()}closeSketchPopoversHandler(){this.closePopupPopovers.emit(),this.sketchMessageHandler(null),this.showSketchContent=!1,this.closeSketchSnappingPopovers.emit(),this.removeSketchShortcuts(),this.setFocus()}closeSketchSnappingPopoversHandler(){this.sketchSnappingEl&&(document.body.removeChild(this.sketchSnappingEl),this.sketchSnappingEl=null,this.disableSketchPanel.emit(!1)),this.setFocus()}disableSketchPanelHandler(t){t.stopPropagation(),this.sketchFlowItemEl.disabled=t.detail}internalSketchUpdatedHandler(t){t.stopPropagation(),this.sketchUpdated.emit()}sketchGraphicUpdatesHandler(t){var e,i;t.stopPropagation();const s=t.detail;s.update&&("update"===this.sketchMode?this.currentSketchInfo.graphic&&(this.currentSketchInfo.graphic.symbol=this.currentSketchInfo.symbol,this.currentSketchInfo.graphic.popupTemplate=this.currentSketchInfo.popup,(null===(e=this.currentSketchInfo.graphic)||void 0===e?void 0:e.attributes)?this.currentSketchInfo.graphic.attributes.title=this.currentSketchInfo.title:this.currentSketchInfo.graphic.attributes={title:this.currentSketchInfo.title}):(this.tempCreatedGraphic&&(this.tempCreatedGraphic.symbol=this.currentSketchInfo.symbol,this.tempCreatedGraphic.popupTemplate=this.currentSketchInfo.popup,(null===(i=this.tempCreatedGraphic)||void 0===i?void 0:i.attributes)?this.tempCreatedGraphic.attributes.title=this.currentSketchInfo.title:this.tempCreatedGraphic.attributes={title:this.currentSketchInfo.title}),"point"===this.currentSketchInfo.tool?this.svModel.setPoint(this.currentSketchInfo.symbol):"text"===this.currentSketchInfo.tool?this.svModel.setText(this.currentSketchInfo.symbol):"polyline"===this.currentSketchInfo.tool?this.svModel.setLine(this.currentSketchInfo.symbol):["circle","polygon","rectangle"].indexOf(this.currentSketchInfo.tool)>-1&&this.svModel.setPolygon(this.currentSketchInfo.symbol)),this.mapView.popup.features=[this.currentSketchInfo.graphic]),s.close&&(this.clearHighlightAndPopup(),this.closeSketchPopovers.emit(),this.svModel.cancel(),this.svModel.updateOnGraphic(!1),this.setFocus()),this.internalSketchUpdated.emit()}async sketchActionOnDrawFeaturesHandler({detail:{tool:t,sketchMessage:e}}){switch(this.clearHighlightAndPopup(),this.watchEscapeOnMapView(!0),"update"===this.sketchMode&&this.closeSketchPopovers.emit(),this.sketchMessageHandler(e),this.sketchMode="continuous",this.svModel.cancel(),this.svModel.updateOnGraphic(!1),this.tempCreatedGraphic=null,this.currentSketchInfo.graphic=null,this.currentSketchInfo.tool=t,t){case"point":this.svModel.setPoint(await(async(t,e,i)=>{const s=await i.getBackgroundColorTheme(e);return new t({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,colorLocked:!0,anchorPoint:{x:0,y:-1.75},anchorPointUnits:"Relative",size:5.7,frame:{xmin:0,ymin:0,xmax:84.3,ymax:84.3},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[83.2,32.5],[84.3,40.7],[83.8,48.9],[81.7,56.9],[78.1,64.3],[73,70.9],[66.9,76.4],[59.7,80.5],[51.9,83.2],[43.7,84.3],[35.4,83.8],[27.4,81.7],[20,78],[13.4,73],[7.9,66.8],[3.8,59.7],[1.1,51.9],[0,43.7],[.5,35.4],[2.6,27.4],[6.3,20],[11.3,13.4],[17.5,7.9],[24.7,3.8],[32.5,1.1],[39.8,.1],[47.1,.3],[54.3,1.8],[61.1,4.5],[67.4,8.4],[72.9,13.3],[77.4,19.1],[80.9,25.5],[83.2,32.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:"light"===s?[242,242,242,255]:[255,255,255,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,rotation:0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",size:15,frame:{xmin:0,ymin:0,xmax:197.7,ymax:294.7},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[98.9,0],[119.4,23.2],[139.4,49.3],[156.8,75.2],[171.2,100.8],[182.4,125.3],[190.6,148.8],[195.7,171.4],[197.7,192.9],[197.7,195.8],[197.7,200.3],[197.6,202.5],[197.5,204.8],[197.3,207.1],[197,209.4],[196.7,211.7],[196.4,214.1],[196,216.4],[195.5,218.7],[195,221.1],[194.4,223.4],[193.7,225.8],[193,228.1],[192.2,230.5],[191.4,232.8],[190.5,235.1],[189.5,237.5],[188.5,239.7],[187.4,242],[186.2,244.3],[185,246.5],[183.7,248.7],[182.4,250.9],[181,253.1],[179.5,255.2],[178,257.3],[176.4,259.4],[174.7,261.4],[173.1,263.3],[171.3,265.3],[169.5,267.2],[167.7,269],[165.8,270.8],[163.9,272.5],[161.9,274.2],[159.9,275.8],[157.8,277.4],[155.7,278.9],[153.6,280.4],[151.4,281.7],[149.2,283.1],[147,284.4],[144.8,285.6],[142.5,286.7],[140.3,287.8],[138,288.8],[135.7,289.8],[133.4,290.7],[131,291.5],[128.7,292.3],[126.4,293],[124,293.6],[121.7,294.2],[119.4,294.7],[117,295.2],[114.7,295.6],[112.4,296],[110.1,296.3],[107.8,296.5],[105.5,296.7],[103.3,296.8],[101.1,296.9],[98.8,296.9],[83.1,295.7],[67.8,292],[53.3,285.9],[39.9,277.5],[28.1,267.2],[18,255.1],[10,241.5],[4.2,226.9],[.9,211.5],[0,195.8],[.1,192.9],[2.1,171.4],[7.2,148.8],[15.4,125.3],[26.6,100.8],[41,75.2],[58.4,49.3],[78.4,23.2],[98.9,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:"light"===s?[17,26,40,255]:[186,186,186,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,rotation:0}],scaleX:1,angleAlignment:"Display",angle:0}}})})(this.CIMSymbol,this.mapView,this.ColorUtils)),this.currentSketchInfo.symbol=this.svModel.getPoint(),this.svModel.createPoint();break;case"polyline":this.svModel.setLine(await(async(t,e)=>({type:"simple-line",color:"light"===await e.getBackgroundColorTheme(t)?[0,0,0]:[255,255,255],width:.75}))(this.mapView,this.ColorUtils)),this.currentSketchInfo.symbol=this.svModel.getLine(),this.svModel.createLine();break;case"polygon":case"rectangle":case"circle":this.svModel.setPolygon(await(async(t,e)=>{const i=await e.getBackgroundColorTheme(t);return{type:"simple-fill",color:"light"===i?[0,0,0,.25]:[255,255,255,.25],style:"solid",outline:{color:"light"===i?[0,0,0]:[255,255,255],width:.75}}})(this.mapView,this.ColorUtils)),this.currentSketchInfo.symbol=this.svModel.getPolygon(),this.svModel.createPolygon(t);break;case"text":this.svModel.setText(await(async(t,e,i,s)=>{const o=await e.getBackgroundColor(t),l=await e.getBackgroundColorTheme(t);return new i({text:s,color:"light"===l?[0,0,0]:"dark"===l?[255,255,255]:o||[0,0,0],haloColor:null,haloSize:.75,font:{size:16.5,family:"Arial",weight:"bold"},lineWidth:512})})(this.mapView,this.ColorUtils,this.TextSymbol,this.strings.text)),this.currentSketchInfo.symbol=this.svModel.getText(),this.svModel.createText()}this.currentSketchInfo.popup=null,this.currentSketchInfo.title=this.defaultGraphicTitle(),this.sketchContentReRender.emit(),this.showSketchContent=!0}async sketchActionOnSelectFeaturesHandler({detail:{sketchMessage:t,multipleSelectTool:e}}){var i;this.keepSelectionMessage=t,this.keepSelectionTool=e,this.clearHighlightAndPopup(),this.watchEscapeOnMapView(!1),this.closeSketchPopovers.emit(),this.tempCreatedGraphic=null,this.currentSketchInfo.graphic=null,this.currentSketchInfo.symbol=null,this.currentSketchInfo.tool=null,this.multipleSelectedGraphics=[],this.sketchMode="update",this.sketchMessageHandler(this.keepSelectionMessage),this.sketchContentReRender.emit(),this.keepSelectionTool?this.actionOnMultipleSelections(this.keepSelectionTool):(null===(i=this.selectorOperation)||void 0===i||i.cancel(),this.svModel.updateOnGraphic(!0))}arcgisSketchPanelLoaderHandler(t){t.stopPropagation(),this.sketchFlowItemEl.loading=t.detail}async done(){var t,e;this.removeHighlight(),(null===(t=this.snappingSessionStorageIds)||void 0===t?void 0:t.current)&&m(this.snappingOptions,this.snappingSessionStorageIds.current),(null===(e=this.sketchTooltipSessionStorageIds)||void 0===e?void 0:e.current)&&f(this.sketchTooltipOptions,this.sketchTooltipSessionStorageIds.current),this.closeSketchPopovers.emit(),this.svModel.destroy(),document.body.removeChild(this.sketchToolsEl),this.removeSketchShortcuts(),this.mapView.popupEnabled=!0}async setFocus(t){var e;"dismiss-button"!==t||null===(e=this.dismissButtonEl)||void 0===e||e.setFocus()}async loadAllModules(){[this.SketchViewModel,this.TextSymbol,this.ColorUtils,this.CIMSymbol,this.SnappingOptions,this.SketchTooltipOptions]=await(0,n.l)(["esri/widgets/Sketch/SketchViewModel","esri/symbols/TextSymbol","esri/views/support/colorUtils","esri/symbols/CIMSymbol","esri/views/interactive/snapping/SnappingOptions","esri/views/interactive/sketch/SketchTooltipOptions"]);const[t]=await(0,n.l)(["esri/widgets/support/Selector2D"]);this.selector=new t}removeSketchShortcuts(){this.arcgisSketchShortcuts&&(this.arcgisSketchShortcuts.removeEventListener("arcgisSketchShortcutsDismissedChange",(()=>this.removeSketchShortcuts())),document.body.removeChild(this.arcgisSketchShortcuts),this.arcgisSketchShortcuts=null)}onGraphicCreate(t,e){if("start"===t.state&&(this.tempCreatedGraphic=null,this.removeHighlight()),"cancel"===t.state&&this.escKey){this.escKey=!1;const t="text"===this.currentSketchInfo.tool?"point":this.currentSketchInfo.tool;e.create(t)}if("complete"===t.state){this.internalSketchUpdated.emit(),t.graphic&&(t.graphic.popupTemplate=this.currentSketchInfo.popup,t.graphic.attributes={title:this.currentSketchInfo.title},this.tempCreatedGraphic=this.currentSketchInfo.graphic=t.graphic,this.highlightGraphic(t.graphic));const i="text"===this.currentSketchInfo.tool?"point":this.currentSketchInfo.tool;e.create(i)}}watchEscapeOnMapView(t){var e;t?this.watchEscapeHandle=this.mapView.on("key-down",(t=>{"Escape"!==t.key||"active"!==this.svModel.getPointSVM().state&&"active"!==this.svModel.getLineSVM().state&&"active"!==this.svModel.getPolygonSVM().state&&"active"!==this.svModel.getTextSVM().state||(t.stopPropagation(),this.escKey=!0,this.svModel.cancel())})):null===(e=this.watchEscapeHandle)||void 0===e||e.remove()}defaultGraphicTitle(){switch(this.currentSketchInfo.tool){case"point":default:return this.strings.point;case"polyline":return this.strings.line;case"polygon":return this.strings.polygon;case"rectangle":return this.strings.rectangle;case"circle":return this.strings.circle;case"text":return this.strings.text}}getGeometryTypeFromGraphic(t){var e,i;switch(null===(e=null==t?void 0:t.geometry)||void 0===e?void 0:e.type){case"point":return"text"===(null===(i=null==t?void 0:t.symbol)||void 0===i?void 0:i.type)?"text":"point";case"polyline":return"polyline";default:return"polygon"}}clearHighlightAndPopup(){this.removeHighlight(),this.mapView.closePopup()}actionOnMultipleSelections(t){this.selector.sources=[this.layer.pointLayer,this.layer.polylineLayer,this.layer.polygonLayer,this.layer.textLayer];const e="rectangle"===t?{createTool:"rectangle"}:{createTool:"polygon",createOptions:{mode:"freehand"}};(this.selectorOperation=this.selector.draw({operationOptions:e})).once("complete",(t=>{const{selection:e}=t;if(this.clearHighlightAndPopup(),!t.aborted&&e.length){let t=[],i=[],s=[],o=[];e.forEach((e=>{switch(this.getGeometryTypeFromGraphic(e)){case"point":default:t=[...t,e];break;case"polyline":i=[...i,e];break;case"polygon":s=[...s,e];break;case"text":o=[...o,e]}})),this.multipleSelectedGraphics=[...t,...i,...s,...o],t.length&&this.svModel.updatePoint(t),i.length&&this.svModel.updateLine(i),s.length&&this.svModel.updatePolygon(s),o.length&&this.svModel.updateText(o)}})),this.svModel.updateOnGraphic(!1)}sketchMessageHandler(t){k.sketchMessage=t}highlightGraphic(t){var e;this.removeHighlight();const i=null===(e=this.mapView.allLayerViews)||void 0===e?void 0:e.items.find((({layer:t})=>t===this.layer));this.tempHighlightHandle=null==i?void 0:i.highlight(t)}removeHighlight(){var t;null===(t=this.tempHighlightHandle)||void 0===t||t.remove()}keepSelectToolSelection(){this.sketchActionOnSelectFeatures.emit({sketchMessage:this.keepSelectionMessage,multipleSelectTool:this.keepSelectionTool})}render(){const t=(0,s.h)("calcite-action",{text:"close",scale:"m",icon:"x",slot:"header-actions-end",ref:t=>this.dismissButtonEl=t,onClick:t=>{t.stopPropagation(),this.sketchMessageHandler(null),this.svModel.cancel(),this.clearHighlightAndPopup(),this.arcgisSketchDismissedChange.emit()}}),e=(0,s.h)("calcite-label",{alignment:"center",for:"multiple-selection-buttons"},this.multipleSelectedGraphics.length<=1?this.strings.singleFeatureSelected:this.strings.featuresSelected.replace("${number}",this.multipleSelectedGraphics.length.toString())),i=(0,s.h)("calcite-button",{appearance:"outline-fill",alignment:"center",iconStart:"trash",kind:"danger",width:"full",onClick:t=>{t.stopPropagation(),this.svModel.delete(),this.multipleSelectedGraphics=[],this.keepSelectToolSelection()}},this.strings.delete),o=(0,s.h)("calcite-button",{appearance:"outline-fill",alignment:"center",iconStart:"copy",kind:"neutral",width:"full",onClick:t=>{t.stopPropagation(),this.svModel.duplicate()}},this.strings.duplicate),n=(0,s.h)("div",{class:"snapping",ref:t=>this.shortcutSnappingDiv=t},(0,s.h)("calcite-button",{appearance:"outline-fill",class:"sketch-keyboard-button",kind:"neutral",iconStart:"keyboard",scale:"l",label:this.strings.sketchShortcuts,onClick:()=>{this.arcgisSketchShortcuts||(this.arcgisSketchShortcuts=document.createElement("arcgis-sketch-shortcuts"),this.arcgisSketchShortcuts.refElement=this.shortcutSnappingDiv,document.body.appendChild(this.arcgisSketchShortcuts),this.arcgisSketchShortcuts.addEventListener("arcgisSketchShortcutsDismissedChange",(()=>this.removeSketchShortcuts())))}}),(0,s.h)("calcite-button",{alignment:"icon-end-space-between",appearance:"outline-fill",kind:"neutral",width:"full",iconStart:"gear",iconEnd:"chevron-down",scale:"l",label:this.strings.settings,onClick:t=>{t.stopPropagation(),this.sketchSnappingEl||(this.sketchSnappingEl=document.createElement("arcgis-sketch-snapping"),this.sketchSnappingEl.refElement=this.shortcutSnappingDiv,document.body.appendChild(this.sketchSnappingEl),this.disableSketchPanel.emit(!0))}},this.strings.settings)),a=(0,s.h)("div",{class:k.sketchMessage&&"sketch-message"},(0,s.h)("calcite-notice",{width:"full",open:!!k.sketchMessage},(0,s.h)("div",{slot:"message"},k.sketchMessage)));return(0,s.h)(s.H,{class:"calcite-match-height"},(0,s.h)("calcite-flow",{ref:t=>this.flowEl=t,dir:(0,l.g)(this.hostElement),class:"rtl"===(0,l.g)(this.hostElement)?l.C.rtl:""},(0,s.h)("calcite-flow-item",{ref:t=>this.sketchFlowItemEl=t,heading:this.strings.sketch,disabled:!this.layer.capabilities.operations.supportsMapNotesEditing},this.dismissible&&t,n,a,this.multipleSelectedGraphics.length>0?(0,s.h)("div",{class:"multiple-selection"},e,(0,s.h)("div",{id:"multiple-selection-buttons",class:"buttons"},o,i)):null,this.showSketchContent&&(0,s.h)("arcgis-sketch-content",{currentSketchInfo:this.currentSketchInfo,flowEl:this.flowEl,symbolStylerRefElement:this.dismissButtonEl}))))}get hostElement(){return(0,s.d)(this)}};v.style=":host{display:flex;flex:1 1 auto;overflow:hidden}.sketch-delete-button{padding:var(--arcgis-app-cap-spacing-third)}.snapping{display:flex;padding:var(--arcgis-app-cap-spacing-half);background-color:var(--arcgis-app-background)}.sketch-message{padding:var(--arcgis-app-cap-spacing-half)}.sketch-keyboard-button{margin-right:0.3em}.multiple-selection{margin:1.3em}.multiple-selection calcite-button{margin-top:0.3em}.arcgis--rtl .sketch-keyboard-button{margin-right:unset;margin-left:0.3em}";const w=class{constructor(t){(0,s.r)(this,t),this.sketchGraphicUpdates=(0,s.c)(this,"sketchGraphicUpdates",7),this.arcgisSketchPanelLoader=(0,s.c)(this,"arcgisSketchPanelLoader",7),this.disableSketchPanel=(0,s.c)(this,"disableSketchPanel",7),this.resizeObserver=new ResizeObserver((()=>{this.reRender=!this.reRender})),this.suggestedFillColors=[],this.savedColors=[],this.suggestedColorList=["#ff4040","#ff8202","#faa83e","#ffd159","#73b566","#008977","#33e3c8","#43abeb","#4b64c9","#9868ed","#b055e6","#db5181","#e03b99","#2b2b2b","#bdbdbd","#ffffff"],this.savedColorList=["#ffffff","#bdbdbd","#2b2b2b","#e03b99","#db5181","#b055e6","#9868ed","#4b64c9","#43abeb","#33e3c8","#008977","#73b566","#ffd159","#faa83e","#ff8202","#ff4040"],this.storePointStyler=t=>{t&&(this.pointStyler=t,this.startPointEdit())},this.storePolylineStyler=t=>{t&&(this.polylineStyler=t,this.startPolylineEdit())},this.storePolygonStyler=t=>{t&&(this.polygonStyler=t,this.startPolygonEdit())},this.openFontPopover=()=>{var t;this.arcgisFontPicker||(this.disableSketchPanel.emit(!0),this.arcgisFontPicker=document.createElement("arcgis-font-picker"),this.arcgisFontPicker.fontMap=p.f,this.arcgisFontPicker.font=null===(t=this.currentSketchInfo.symbol)||void 0===t?void 0:t.font,this.arcgisFontPicker.popoverProps={refElement:this.hostElement},this.arcgisFontPicker.addEventListener("arcgisFontPickerDismissed",this.closeFontPopver),this.arcgisFontPicker.addEventListener("arcgisFontPickerChange",this.changeFont),document.body.appendChild(this.arcgisFontPicker))},this.closeFontPopver=()=>{this.arcgisFontPicker&&(this.disableSketchPanel.emit(!1),document.body.removeChild(this.arcgisFontPicker),this.arcgisFontPicker=null)},this.changeFont=t=>{var e;const i=t.detail;if(i){const t=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();t.font.family=i.family,t.font.weight=i.weight,t.font.style=i.style,this.updateSymbol(t),this.reRender=!this.reRender}},this.currentSketchInfo=void 0,this.flowEl=void 0,this.symbolStylerRefElement=void 0,this.reRender=!0}async componentWillLoad(){this.arcgisSketchPanelLoader.emit(!0),await this.loadAllModules(),this.suggestedColorList.forEach((t=>{this.suggestedFillColors.push(new this.Color(t))})),this.savedColorList.forEach((t=>{this.savedColors.push(new this.Color(t))})),this.mapView=k.mapView,this.strings=k.strings,this.currentLanguage=k.currentLanguage,this.portal=k.portal}componentDidLoad(){this.arcgisSketchPanelLoader.emit(!1),this.flowEl&&this.resizeObserver.observe(this.flowEl)}disconnectedCallback(){this.flowEl&&this.resizeObserver.unobserve(this.flowEl)}calciteFlowItemBackHandler(t){t.stopPropagation(),this.mapView.closePopup(),this.sketchPopupFlowItem=null}sketchContentReRenderHandler(t){t.stopPropagation(),this.reRender=!this.reRender,this.sketchPopupFlowItem&&(this.flowEl.back(),this.sketchPopupFlowItem=null);const{tool:e}=this.currentSketchInfo;"point"===e?this.startPointEdit():"polyline"===e?this.startPolylineEdit():["circle","polygon","rectangle"].includes(e)&&this.startPolygonEdit()}popupUpdatedHandler({detail:{mapNotesPopuptemplate:t}}){this.currentSketchInfo.popup=t,this.sketchGraphicUpdates.emit({update:!0,close:!1})}async loadAllModules(){[this.Color,this.cimSymbolUtils,this.SimpleLineSymbol]=await(0,n.l)(["esri/Color","esri/symbols/support/cimSymbolUtils","esri/symbols/SimpleLineSymbol"])}updateSymbol(t){this.currentSketchInfo.symbol=t,this.sketchGraphicUpdates.emit({update:!0,close:!1})}applyCimOutline(t,e){const i=d(t);if(!i)return;const s=e.color.toRgba();s[3]*=255,i.color=s,i.width=e.size}getCimOutlineProps(t){var e;const i=d(t);return{color:new this.Color(null==i?void 0:i.color),size:null!==(e=null==i?void 0:i.width)&&void 0!==e?e:1}}getPopoverProps(t){var e;const i=null===(e=this.flowEl)||void 0===e?void 0:e.getBoundingClientRect();return{placement:t?"bottom-start":"bottom-end",offsetDistance:10,offsetSkidding:t?3:-3,overlayPositioning:"fixed",maxHeight:i&&i.height-65+"px",refElement:this.symbolStylerRefElement}}startPointEdit(){var t;const e="cim"===this.currentSketchInfo.symbol.type;null===(t=this.pointStyler)||void 0===t||t.edit(this.currentSketchInfo.symbol.clone(),{sections:{marker:{open:!0,symbolsOpen:!0,sizeOpen:!1,rotationOpen:!1,markerType:["cim:vector","custom"],keepChoice:!0,parts:{size:{autoSizeAdjust:!1}}},fill:e&&{type:"color",optional:!0,suggestedColors:this.suggestedFillColors,savedColors:this.savedColors,open:!1,suggestedColorsOpen:!0},stroke:e&&{optional:!0,open:!1,type:"color",suggestedColors:this.suggestedFillColors,savedColors:this.savedColors}},marker:{size:e?this.cimSymbolUtils.getCIMSymbolSize(this.currentSketchInfo.symbol):"picture-marker"===this.currentSketchInfo.symbol.type?this.currentSketchInfo.symbol.width:25},fill:{color:e&&this.cimSymbolUtils.getCIMSymbolColor(this.currentSketchInfo.symbol)||this.suggestedFillColors[0]},stroke:e&&this.getCimOutlineProps(this.currentSketchInfo.symbol),fillEnabled:e,strokeEnabled:e,portal:this.createPortalProp()})}startPolylineEdit(){var t,e,i,s,o;null===(t=this.polylineStyler)||void 0===t||t.edit(this.currentSketchInfo.symbol.clone(),{sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:this.suggestedFillColors,extraParts:{width:!0,autoStrokeAdjust:!1}}},stroke:{color:(null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.color)||this.savedColors[1],size:(null===(i=this.currentSketchInfo.symbol)||void 0===i?void 0:i.width)||10,style:(null===(s=this.currentSketchInfo.symbol)||void 0===s?void 0:s.style)||"solid",marker:null===(o=this.currentSketchInfo.symbol)||void 0===o?void 0:o.marker},portal:this.createPortalProp()})}createPortalProp(){return{portal:this.portal,before:async(t,e)=>{await t.load(),e.originalStylesGroupQuery2d=t.stylesGroupQuery2d,t.stylesGroupQuery2d='title:"Esri Sketch Styles" AND owner:esri_en'},after:async(t,e)=>{t.stylesGroupQuery2d=e.originalStylesGroupQuery2d}}}startPolygonEdit(){var t,e,i,s;null===(t=this.polygonStyler)||void 0===t||t.edit(this.currentSketchInfo.symbol.clone(),{sections:{fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:!1,suggestedColors:this.suggestedFillColors},stroke:{type:"color",open:!1,optional:!0,suggestedColorsOpen:!0,suggestedColors:this.suggestedFillColors,extraParts:{width:!0,autoStrokeAdjust:!1}}},fill:{color:this.currentSketchInfo.symbol.color||this.suggestedFillColors[0]},stroke:{color:(null===(e=this.currentSketchInfo.symbol.outline)||void 0===e?void 0:e.color)||this.suggestedFillColors[0],size:(null===(i=this.currentSketchInfo.symbol.outline)||void 0===i?void 0:i.width)||10,style:"solid",autoAdjusted:!1},fillEnabled:!!this.currentSketchInfo.symbol.color,strokeEnabled:!!(null===(s=this.currentSketchInfo.symbol)||void 0===s?void 0:s.outline),portal:this.createPortalProp()})}changeRotation(t){var e;const i=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();i.angle=t,this.updateSymbol(i),this.reRender=!this.reRender}render(){var t,e,i,o,n,a,r,d,u,g,m,y,f;const S="rtl"===(0,l.g)(this.hostElement),k=(0,s.h)("arcgis-symbol-styler",{key:"point-styler",lang:this.currentLanguage,initialSourceId:this.currentSketchInfo.sourceIds.pointSourceId,ref:this.storePointStyler,popoverProps:this.getPopoverProps(S),onArcgisSymbolStylerEdit:({detail:{symbol:t}})=>{this.updateSymbol(t)},onArcgisSymbolStylerSourceIdChange:({detail:t})=>this.currentSketchInfo.sourceIds.pointSourceId=t}),b=(0,s.h)("arcgis-symbol-styler",{key:"polyline-styler",lang:this.currentLanguage,initialSourceId:this.currentSketchInfo.sourceIds.polylineSourceId,ref:this.storePolylineStyler,popoverProps:this.getPopoverProps(S),onArcgisSymbolStylerEdit:({detail:{symbol:t}})=>{this.updateSymbol(t)},onArcgisSymbolStylerSourceIdChange:({detail:t})=>this.currentSketchInfo.sourceIds.polylineSourceId=t}),v=(0,s.h)("arcgis-symbol-styler",{key:"polygon-styler",lang:this.currentLanguage,initialSourceId:this.currentSketchInfo.sourceIds.polygonSourceId,ref:this.storePolygonStyler,popoverProps:this.getPopoverProps(S),onArcgisSymbolStylerEdit:({detail:{symbol:t}})=>{this.updateSymbol(t)},onArcgisSymbolStylerSourceIdChange:({detail:t})=>this.currentSketchInfo.sourceIds.polygonSourceId=t}),w=(0,s.h)("calcite-label",null,this.strings.content,(0,s.h)("calcite-input",{type:"textarea",placeholder:this.strings.textContentPlaceholder,value:null===(t=this.currentSketchInfo.symbol)||void 0===t?void 0:t.text,onCalciteInputInput:t=>{var e;t.stopPropagation();const i=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();i.text=t.target.value,this.updateSymbol(i)}})),P=(0,s.h)("calcite-label",null,this.strings.font,(0,s.h)("calcite-button",{alignment:"icon-end-space-between",appearance:"outline-fill",kind:"neutral",iconEnd:"chevron-down",label:(0,p.b)((null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.font)||{family:"Arial",style:"normal",weight:"normal"}),width:"full",scale:"m",onClick:this.openFontPopover},(0,p.b)(null===(i=this.currentSketchInfo.symbol)||void 0===i?void 0:i.font))),I=(0,s.h)("calcite-label",null,this.strings.size,(0,s.h)("calcite-input",{type:"number",scale:"s",min:5,max:125,value:`${(null===(n=null===(o=this.currentSketchInfo.symbol)||void 0===o?void 0:o.font)||void 0===n?void 0:n.size)/.75||0}`,onCalciteInputInput:t=>{var e;t.stopPropagation();const i=t.target,s=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();s.font.size=.75*parseInt(i.value)||0,this.updateSymbol(s)}})),C=(0,s.h)("calcite-label",null,this.strings.color,(0,s.h)("arcgis-color-input",{color:(null===(r=null===(a=this.currentSketchInfo.symbol)||void 0===a?void 0:a.color)||void 0===r?void 0:r.toHex())||"#ffffff",popoverProps:this.getPopoverProps(S),onArcgisColorInputChange:t=>{var e;const i=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();i.color=new this.Color(t.target.color),this.updateSymbol(i)}})),M=(0,s.h)("calcite-label",null,this.strings.rotation,(0,s.h)("div",{class:"rotation"},(0,s.h)("calcite-slider",{min:0,max:360,value:(null===(d=this.currentSketchInfo.symbol)||void 0===d?void 0:d.angle)||0,step:1,onCalciteSliderInput:t=>{this.changeRotation(t.target.value)}}),(0,s.h)("calcite-input",{type:"number",scale:"s",min:0,max:360,suffixText:S?"":"ยบ",prefixText:S?"ยบ":"",step:1,value:`${(null===(u=this.currentSketchInfo.symbol)||void 0===u?void 0:u.angle)||0}`,onCalciteInputInput:t=>{this.changeRotation(parseInt(t.target.value))}}))),T=(0,s.h)("calcite-block-section",{ref:t=>this.haloBlockSection=t,text:this.strings.halo,toggleDisplay:"switch",open:!!(null===(g=this.currentSketchInfo.symbol)||void 0===g?void 0:g.haloColor),onCalciteBlockSectionToggle:t=>{var e;t.stopPropagation();const i=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();this.haloBlockSection.open?(i.haloColor=this.tempHaloColor||new this.Color("white"),i.haloSize=(null==i?void 0:i.haloSize)||.75):(this.tempHaloColor=i.haloColor,i.haloColor=null),this.updateSymbol(i)}},(0,s.h)("calcite-label",null,this.strings.color,(0,s.h)("arcgis-color-input",{color:(null===(y=null===(m=this.currentSketchInfo.symbol)||void 0===m?void 0:m.haloColor)||void 0===y?void 0:y.toHex())||"#ffffff",popoverProps:this.getPopoverProps(S),onArcgisColorInputChange:t=>{var e;const i=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();i.haloColor=new this.Color(t.target.color),this.updateSymbol(i)}})),(0,s.h)("calcite-label",null,this.strings.size,(0,s.h)("calcite-input",{type:"number",scale:"s",min:1,max:10,value:`${(null===(f=this.currentSketchInfo.symbol)||void 0===f?void 0:f.haloSize)/.75||0}`,onCalciteInputInput:t=>{var e;t.stopPropagation();const i=t.target,s=null===(e=this.currentSketchInfo.symbol)||void 0===e?void 0:e.clone();s.haloSize=.75*parseInt(i.value)||0,this.updateSymbol(s)}}))),L=(0,s.h)("div",null,w,P,I,C,M,T),x=(0,s.h)("calcite-label",{class:"sketch-title"},this.strings.title,(0,s.h)("calcite-inline-editable",{scale:"m"},(0,s.h)("calcite-input",{alignment:"start",placeholder:this.strings.enterTitlePlaceholder,scale:"m",type:"text",value:this.currentSketchInfo.title,onBlur:t=>{this.currentSketchInfo.title=t.target.value,this.sketchGraphicUpdates.emit({update:!0,close:!1})}}))),E=(0,s.h)("calcite-button",{alignment:"icon-end-space-between",appearance:"outline-fill",kind:"neutral",iconEnd:S?"chevron-left":"chevron-right",label:this.strings.popup,width:"full",scale:"l",class:"sketch-popup-button",onClick:t=>{if(t.stopPropagation(),!this.sketchPopupFlowItem){this.sketchPopupFlowItem=document.createElement("calcite-flow-item"),this.sketchPopupFlowItem.heading=this.strings.sketch,this.sketchPopupFlowItem.description=this.strings.popup;const t=document.createElement("calcite-fab");t.icon="plus",t.slot="fab",t.scale="s",t.appearance="outline-fill",t.kind="neutral",t.label=this.strings.addContent,t.text=this.strings.addContent,t.textEnabled=!0,this.sketchPopupFlowItem.appendChild(t);const e=document.createElement("arcgis-popup");e.lang=this.currentLanguage,e.mapView=this.mapView,e.layerDisplayType=c.l.mapNotes,e.mapNotesGraphic=this.currentSketchInfo.graphic,e.mapNotesPopupTemplate=this.currentSketchInfo.popup,e.calciteFlowProps={flow:this.flowEl,calciteFab:t,calciteFlowItem:this.sketchPopupFlowItem},this.sketchPopupFlowItem.appendChild(e),this.flowEl.appendChild(this.sketchPopupFlowItem),this.sketchPopupFlowItem.setFocus(),this.sketchPopupFlowItem.beforeBack=async()=>await e.done(),this.mapView.closePopup(),this.currentSketchInfo.graphic&&this.currentSketchInfo.popup&&this.mapView.openPopup({features:[this.currentSketchInfo.graphic],location:(0,h.o)(this.currentSketchInfo.graphic.geometry)})}}},this.strings.popup);return(0,s.h)(s.H,null,(0,s.h)("div",{dir:(0,l.g)(this.hostElement)},(0,s.h)("div",{class:"sketch-content"},x,E,(()=>{switch(this.currentSketchInfo.tool){case"point":return k;case"text":return L;case"polyline":return b;case"polygon":case"rectangle":case"circle":return v;default:return null}})())))}get hostElement(){return(0,s.d)(this)}};w.style=".sketch-content{display:flex;flex-direction:column;background-color:var(--arcgis-app-background);padding:var(--arcgis-app-cap-spacing) var(--arcgis-app-side-spacing-half)}.sketch-title calcite-inline-editable{border:1px solid;border-color:var(--calcite-ui-border-input);padding:var(--arcgis-app-cap-spacing-third)}.rotation{display:flex;align-items:center;justify-content:space-between;position:relative}.rotation calcite-slider{width:50%}.rotation calcite-input{width:45%;font-size:var(--arcgis-app-font-size-0);font-family:var(--arcgis-app-font-family)}.sketch-popup-button{margin-bottom:0.4em}";const P=class{constructor(t){(0,s.r)(this,t),this.arcgisSketchShortcutsDismissedChange=(0,s.c)(this,"arcgisSketchShortcutsDismissedChange",7),this.refElement=void 0,this.isOpen=!1}componentWillLoad(){this.strings=k.strings}componentDidLoad(){this.isOpen=!0}async reposition(){var t;null===(t=this.sketchShortcutsPopover)||void 0===t||t.reposition()}render(){const t="rtl"===(0,l.g)(this.hostElement)?"trailing-start":"leading-start";return(0,s.h)(s.H,{class:"js-app-flyout"},(0,s.h)("calcite-popover",{dir:(0,l.g)(this.hostElement),class:"popover "+("rtl"===(0,l.g)(this.hostElement)?l.C.rtl:""),ref:t=>this.sketchShortcutsPopover=t,placement:t,open:this.isOpen,pointerDisabled:!0,referenceElement:this.refElement,offsetDistance:-Math.round(this.refElement.getBoundingClientRect().width),offsetSkidding:0,label:this.strings.sketchShortcuts},(0,s.h)("calcite-panel",{heading:this.strings.sketchShortcuts,closable:!0,style:{width:`${Math.max(this.refElement.getBoundingClientRect().width,375)}px`},onCalcitePanelClose:()=>this.arcgisSketchShortcutsDismissedChange.emit()},(0,s.h)("div",{class:"sketch-shortcut"},(0,s.h)("calcite-chip",{class:"sketch-shortcut-chip",value:"Ctrl",scale:"m"},"Ctrl"),(0,s.h)("calcite-label",{class:"sketch-shortcut-label"},this.strings.ctrlShortcut),(0,s.h)("calcite-chip",{class:"sketch-shortcut-chip",value:"Enter",scale:"m"},"Enter"),(0,s.h)("calcite-label",{class:"sketch-shortcut-label"},this.strings.cShortcut),(0,s.h)("calcite-chip",{class:"sketch-shortcut-chip",value:"Z",scale:"m"},"Z"),(0,s.h)("calcite-label",{class:"sketch-shortcut-label"},this.strings.zShortcut),(0,s.h)("calcite-chip",{class:"sketch-shortcut-chip",value:"R",scale:"m"},"R"),(0,s.h)("calcite-label",{class:"sketch-shortcut-label"},this.strings.rShortcut),(0,s.h)("calcite-chip",{class:"sketch-shortcut-chip",value:"Esc",scale:"m"},"Esc"),(0,s.h)("calcite-label",{class:"sketch-shortcut-label"},this.strings.escShortcut)))))}get hostElement(){return(0,s.d)(this)}};P.style=".sketch-shortcut{background-color:var(--arcgis-app-background);display:grid;grid-template-columns:21% auto;row-gap:var(--arcgis-app-cap-spacing-half);padding:var(--arcgis-app-cap-spacing-half)}.sketch-shortcut-chip{margin-right:var(--arcgis-app-cap-spacing-half)}.sketch-shortcut-label{align-self:center}.popover{z-index:100}.arcgis--rtl .sketch-shortcut{max-height:40vh}.arcgis--rtl .sketch-shortcut-chip{margin-left:var(--arcgis-app-cap-spacing-half);margin-right:0}";const I=class{constructor(t){(0,s.r)(this,t),this.closeSketchSnappingPopovers=(0,s.c)(this,"closeSketchSnappingPopovers",7),this.refElement=void 0}async componentWillLoad(){this.strings=k.strings,this.mapView=k.mapView,this.snappingOptions=k.snappingOptions,this.snappingSessionStorageIds=k.snappingSessionStorageIds,this.sketchTooltipOptions=k.sketchTooltipOptions,this.sketchTooltipSessionStorageIds=k.sketchTooltipSessionStorageIds,await this.loadAllModules(),this.addSnappingWidget(),this.addTooltipsWidget()}componentDidLoad(){this.snappingControls.container=this.snappingControlDiv,this.sketchTooltipControls.container=this.sketchTooltipControlDiv}disconnectedCallback(){var t,e;null===(t=this.snappingControls)||void 0===t||t.destroy(),null===(e=this.sketchTooltipControls)||void 0===e||e.destroy()}async reposition(){var t;null===(t=this.sketchSnappingPopover)||void 0===t||t.reposition()}async loadAllModules(){const[t,e]=await(0,n.l)(["esri/widgets/support/SnappingControls","esri/widgets/support/SketchTooltipControls"]);this.SnappingControls=t,this.SketchTooltipControls=e}addSnappingWidget(){this.snappingControls=new this.SnappingControls({view:this.mapView,snappingOptions:k.snappingOptions,visibleElements:{header:!1}})}addTooltipsWidget(){this.sketchTooltipControls=new this.SketchTooltipControls({view:this.mapView,tooltipOptions:k.sketchTooltipOptions,visibleElements:{tooltipsToggle:!0,labelsToggle:!1}})}render(){return(0,s.h)(s.H,{class:"js-app-flyout"},(0,s.h)("calcite-popover",{dir:(0,l.g)(this.hostElement),placement:"leading-start",ref:t=>this.sketchSnappingPopover=t,open:!0,pointerDisabled:!0,referenceElement:this.refElement,offsetDistance:-Math.round(this.refElement.getBoundingClientRect().width),offsetSkidding:0,label:this.strings.settings,style:{zIndex:"100"}},(0,s.h)("calcite-panel",{closable:!0,headingLevel:2,heading:this.strings.settings,style:{width:`${this.refElement.getBoundingClientRect().width}px`},onCalcitePanelClose:()=>{var t,e;(null===(t=this.snappingSessionStorageIds)||void 0===t?void 0:t.current)&&m(this.snappingOptions,this.snappingSessionStorageIds.current),(null===(e=this.sketchTooltipSessionStorageIds)||void 0===e?void 0:e.current)&&f(this.sketchTooltipOptions,this.sketchTooltipSessionStorageIds.current),this.closeSketchSnappingPopovers.emit()}},(0,s.h)("div",{class:"content"},(0,s.h)("div",{ref:t=>this.sketchTooltipControlDiv=t}),(0,s.h)("div",{ref:t=>this.snappingControlDiv=t})))))}get hostElement(){return(0,s.d)(this)}};I.style=".content{max-height:60vh}";const C=class{constructor(t){(0,s.r)(this,t),this.sketchActionOnDrawFeatures=(0,s.c)(this,"sketchActionOnDrawFeatures",7),this.sketchActionOnSelectFeatures=(0,s.c)(this,"sketchActionOnSelectFeatures",7),this.refElement=void 0,this.mapNotesFeature=null,this.isOpen=!1}componentWillLoad(){this.strings=k.strings,this.svModel=k.svModel,this.layer=k.layer}componentDidLoad(){if(this.mapNotesFeature)switch(this.actionOnSelectFeatures(this.strings.selectText,this.sketchSelect),this.mapNotesFeature.layer){case this.layer.pointLayer:this.svModel.updatePoint([this.mapNotesFeature]);break;case this.layer.textLayer:this.svModel.updateText([this.mapNotesFeature]);break;case this.layer.polylineLayer:this.svModel.updateLine([this.mapNotesFeature]);break;case this.layer.polygonLayer:this.svModel.updatePolygon([this.mapNotesFeature]);break;default:return}else this.actionOnDrawFeatures("point",this.strings.addStamp,this.sketchPoint);this.isOpen=!0}async reposition(){var t;null===(t=this.sketchToolsPopover)||void 0===t||t.reposition()}actionOnDrawFeatures(t,e,i){this.clearActiveSelection(),i.active=!0,this.sketchActionOnDrawFeatures.emit({tool:t,sketchMessage:e})}actionOnSelectFeatures(t,e,i){const{active:s=!1}=e;this.clearActiveSelection(),e.active=!s,this.svModel.cancel(),this.sketchActionOnSelectFeatures.emit({sketchMessage:s?"":t,multipleSelectTool:!s&&i||null})}clearActiveSelection(){this.sketchPoint.active=!1,this.sketchPolyLine.active=!1,this.sketchPolygon.active=!1,this.sketchRectangle.active=!1,this.sketchCircle.active=!1,this.sketchText.active=!1,this.sketchSelect.active=!1,this.sketchRectangleSelect.active=!1,this.sketchLassoSelect.active=!1}render(){const t=(0,s.h)("calcite-action-group",{layout:"vertical"},(0,s.h)("calcite-action",{ref:t=>this.sketchPoint=t,text:this.strings.stamp,label:this.strings.stamp,title:this.strings.stamp,icon:"pin",scale:"m",alignment:"center",onClick:()=>{this.actionOnDrawFeatures("point",this.strings.addStamp,this.sketchPoint)}}),(0,s.h)("calcite-action",{ref:t=>this.sketchPolyLine=t,text:this.strings.line,label:this.strings.line,title:this.strings.line,icon:"line",scale:"m",alignment:"center",onClick:()=>{this.actionOnDrawFeatures("polyline",this.strings.startFinishDrawing,this.sketchPolyLine)}}),(0,s.h)("calcite-action",{ref:t=>this.sketchPolygon=t,text:this.strings.polygon,label:this.strings.polygon,title:this.strings.polygon,icon:"polygon",scale:"m",alignment:"center",onClick:()=>{this.actionOnDrawFeatures("polygon",this.strings.startFinishDrawing,this.sketchPolygon)}}),(0,s.h)("calcite-action",{ref:t=>this.sketchRectangle=t,text:this.strings.rectangle,label:this.strings.rectangle,title:this.strings.rectangle,icon:"rectangle",scale:"m",alignment:"center",onClick:()=>{this.actionOnDrawFeatures("rectangle",this.strings.addRectangle,this.sketchRectangle)}}),(0,s.h)("calcite-action",{ref:t=>this.sketchCircle=t,text:this.strings.circle,label:this.strings.circle,title:this.strings.circle,icon:"circle",scale:"m",alignment:"center",onClick:()=>{this.actionOnDrawFeatures("circle",this.strings.addCircle,this.sketchCircle)}}),(0,s.h)("calcite-action",{ref:t=>this.sketchText=t,text:this.strings.text,label:this.strings.text,title:this.strings.text,icon:"text",scale:"m",alignment:"center",onClick:async()=>{this.actionOnDrawFeatures("text",this.strings.addText,this.sketchText)}})),e=(0,s.h)("calcite-action-group",{layout:"vertical"},(0,s.h)("calcite-action",{ref:t=>this.sketchSelect=t,text:this.strings.select,label:this.strings.select,title:this.strings.select,icon:"cursor",scale:"m",alignment:"center",onClick:()=>{this.actionOnSelectFeatures(this.strings.selectText,this.sketchSelect)}}),(0,s.h)("calcite-action",{ref:t=>this.sketchRectangleSelect=t,text:this.strings.rectangleSelect,label:this.strings.rectangleSelect,title:this.strings.rectangleSelect,icon:"cursor-marquee",scale:"m",alignment:"center",onClick:()=>{this.actionOnSelectFeatures(this.strings.rectangleLassoSelect,this.sketchRectangleSelect,"rectangle")}}),(0,s.h)("calcite-action",{ref:t=>this.sketchLassoSelect=t,text:this.strings.lassoSelect,label:this.strings.lassoSelect,title:this.strings.lassoSelect,icon:"lasso",scale:"m",alignment:"center",onClick:()=>{this.actionOnSelectFeatures(this.strings.rectangleLassoSelect,this.sketchLassoSelect,"lasso")}}));return(0,s.h)(s.H,{class:"js-app-flyout"},(0,s.h)("calcite-popover",{dir:(0,l.g)(this.hostElement),ref:t=>this.sketchToolsPopover=t,placement:"leading-start",open:this.isOpen,referenceElement:this.refElement,offsetDistance:15,pointerDisabled:!0,focusTrapDisabled:!0,triggerDisabled:!0,label:this.strings.sketch,class:"popover",onCalcitePopoverBeforeClose:()=>this.sketchToolsPopover.open=!0},(0,s.h)("calcite-action-pad",{position:"start",layout:"vertical",expandDisabled:!0},t,e)))}get hostElement(){return(0,s.d)(this)}};C.style=".popover{z-index:100}"},41528:(t,e,i)=>{i.d(e,{a:()=>o,b:()=>a,f:()=>l,m:()=>n,p:()=>s});const s=["above-center","above-left","above-right","below-center","below-left","below-right","center-center","center-left","center-right"],o=["above-after","above-along","above-before","above-start","above-end","below-after","below-along","below-before","below-start","below-end","center-after","center-along","center-before","center-start","center-end"],l=new Map;l.set("Abril Fatface Regular",{font:{family:"Abril Fatface",style:"normal",weight:"normal"}}),l.set("Alegreya Bold",{font:{family:"Alegreya",style:"normal",weight:"bold"}}),l.set("Alegreya Bold Italic",{font:{family:"Alegreya",style:"italic",weight:"bold"}}),l.set("Alegreya Italic",{font:{family:"Alegreya",style:"italic",weight:"normal"}}),l.set("Alegreya Regular",{font:{family:"Alegreya",style:"normal",weight:"normal"}}),l.set("Alegreya Sans Italic",{font:{family:"Alegreya Sans",style:"italic",weight:"normal"}}),l.set("Alegreya SC Bold",{font:{family:"Alegreya SC",style:"normal",weight:"bold"}}),l.set("Alegreya SC Italic",{font:{family:"Alegreya SC",style:"italic",weight:"normal"}}),l.set("Alegreya SC Regular",{font:{family:"Alegreya SC",style:"normal",weight:"normal"}}),l.set("Amarante Regular",{font:{family:"Amarante",style:"normal",weight:"normal"}}),l.set("Amatic SC Bold",{font:{family:"Amatic SC",style:"normal",weight:"bold"}}),l.set("Arial Bold",{font:{family:"Arial",style:"normal",weight:"bold"}}),l.set("Arial Bold Italic",{font:{family:"Arial",style:"italic",weight:"bold"}}),l.set("Arial Italic",{font:{family:"Arial",style:"italic",weight:"normal"}}),l.set("Arial Regular",{font:{family:"Arial",style:"normal",weight:"normal"}}),l.set("Arial Unicode MS Bold",{font:{family:"Arial Unicode MS",style:"normal",weight:"bold"}}),l.set("Arial Unicode MS Regular",{font:{family:"Arial Unicode MS",style:"normal",weight:"normal"}}),l.set("Atomic Age Regular",{font:{family:"Atomic Age",style:"normal",weight:"normal"}}),l.set("Audiowide Regular",{font:{family:"Audiowide",style:"normal",weight:"normal"}}),l.set("Avenir Next LT Pro Bold",{font:{family:"Avenir Next LT Pro",style:"normal",weight:"bold"}}),l.set("Avenir Next LT Pro Bold Italic",{font:{family:"Avenir Next LT Pro",style:"italic",weight:"bold"}}),l.set("Avenir Next LT Pro Demi Italic",{font:{family:"Avenir Next LT Pro Demi",style:"italic",weight:"normal"}}),l.set("Avenir Next LT Pro Italic",{font:{family:"Avenir Next LT Pro",style:"italic",weight:"normal"}}),l.set("Avenir Next LT Pro Light Italic",{font:{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"}}),l.set("Avenir Next LT Pro Regular",{font:{family:"Avenir Next LT Pro",style:"normal",weight:"normal"}}),l.set("Avenir Next LT Pro Light Italic",{font:{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"}}),l.set("Avenir Next LT Pro Light Regular",{font:{family:"Avenir Next LT Pro Light",style:"normal",weight:"normal"}}),l.set("Avenir Next LT Pro Medium Bold",{font:{family:"Avenir Next LT Pro Medium",style:"normal",weight:"bold"}}),l.set("Avenir Next LT Pro Medium Bold Italic",{font:{family:"Avenir Next LT Pro Medium",style:"italic",weight:"bold"}}),l.set("Avenir Next LT Pro Regular Bold",{font:{family:"Avenir Next LT Pro Regular",style:"normal",weight:"bold"}}),l.set("Avenir Next LT Pro Regular Bold Italic",{font:{family:"Avenir Next LT Pro Regular",style:"italic",weight:"bold"}}),l.set("Avenir Next LT Pro Regular Italic",{font:{family:"Avenir Next LT Pro Regular",style:"italic",weight:"normal"}}),l.set("Avenir Next LT Pro Regular Regular",{font:{family:"Avenir Next LT Pro Regular",style:"normal",weight:"normal"}}),l.set("Belleza Regular",{font:{family:"Belleza",style:"normal",weight:"normal"}}),l.set("BellTopo Sans Bold",{font:{family:"BellTopo Sans",style:"normal",weight:"bold"}}),l.set("BellTopo Sans Bold Italic",{font:{family:"BellTopo Sans",style:"italic",weight:"bold"}}),l.set("BellTopo Sans Italic",{font:{family:"BellTopo Sans",style:"italic",weight:"normal"}}),l.set("BellTopo Sans Regular",{font:{family:"BellTopo Sans",style:"normal",weight:"normal"}}),l.set("Black Ops One Regular",{font:{family:"Black Ops One",style:"normal",weight:"normal"}}),l.set("Cabin Sketch Bold",{font:{family:"Cabin Sketch",style:"normal",weight:"bold"}}),l.set("Cabin Sketch Regular",{font:{family:"Cabin Sketch",style:"normal",weight:"normal"}}),l.set("Coming Soon Regular",{font:{family:"Coming Soon",style:"normal",weight:"normal"}}),l.set("FGDC GeoAge Regular",{font:{family:"FGDC GeoAge",style:"normal",weight:"normal"}}),l.set("Homemade Apple Regular",{font:{family:"Homemade Apple",style:"normal",weight:"normal"}}),l.set("IM FELL DW Pica PRO Italic",{font:{family:"IM FELL DW Pica PRO",style:"italic",weight:"normal"}}),l.set("IM FELL DW Pica PRO Regular",{font:{family:"IM FELL DW Pica PRO",style:"normal",weight:"normal"}}),l.set("Josefin Sans Regular",{font:{family:"Josefin Sans",style:"normal",weight:"normal"}}),l.set("Josefin Sans Semibold Italic",{font:{family:"Josefin Sans Semibold",style:"italic",weight:"normal"}}),l.set("Josefin Slab Bold",{font:{family:"Josefin Slab",style:"normal",weight:"bold"}}),l.set("Josefin Slab Bold Italic",{font:{family:"Josefin Slab",style:"italic",weight:"bold"}}),l.set("Josefin Slab Italic",{font:{family:"Josefin Slab",style:"italic",weight:"normal"}}),l.set("Josefin Slab Light Italic",{font:{family:"Josefin Slab Light",style:"italic",weight:"normal"}}),l.set("Josefin Slab Regular",{font:{family:"Josefin Slab",style:"normal",weight:"normal"}}),l.set("Josefin Slab Semibold Italic",{font:{family:"Josefin Slab Semibold",style:"italic",weight:"normal"}}),l.set("Josefin Slab Thin Italic",{font:{family:"Josefin Slab Thin",style:"italic",weight:"normal"}}),l.set("Just Another Hand Regular",{font:{family:"Just Another Hand",style:"normal",weight:"normal"}}),l.set("Kranky Regular",{font:{family:"Kranky",style:"normal",weight:"normal"}}),l.set("Life Savers Bold",{font:{family:"Life Savers",style:"normal",weight:"bold"}}),l.set("Loved By The King Regular",{font:{family:"Loved By The King",style:"normal",weight:"normal"}}),l.set("Merriweather Bold",{font:{family:"Merriweather",style:"normal",weight:"bold"}}),l.set("Merriweather Bold Italic",{font:{family:"Merriweather",style:"italic",weight:"bold"}}),l.set("Merriweather Italic",{font:{family:"Merriweather",style:"italic",weight:"normal"}}),l.set("Merriweather Regular",{font:{family:"Merriweather",style:"normal",weight:"normal"}}),l.set("Montserrat Bold",{font:{family:"Montserrat",style:"normal",weight:"bold"}}),l.set("Montserrat Italic",{font:{family:"Montserrat",style:"italic",weight:"normal"}}),l.set("Montserrat Medium Italic",{font:{family:"Montserrat Medium",style:"italic",weight:"normal"}}),l.set("Montserrat Regular",{font:{family:"Montserrat",style:"normal",weight:"normal"}}),l.set("Montserrat Semibold Italic",{font:{family:"Montserrat Semibold",style:"italic",weight:"normal"}}),l.set("Noto Sans Bold",{font:{family:"Noto Sans",style:"normal",weight:"bold"}}),l.set("Noto Sans Bold Italic",{font:{family:"Noto Sans",style:"italic",weight:"bold"}}),l.set("Noto Sans Italic",{font:{family:"Noto Sans",style:"italic",weight:"normal"}}),l.set("Noto Sans Regular",{font:{family:"Noto Sans",style:"normal",weight:"normal"}}),l.set("Noto Serif Bold",{font:{family:"Noto Serif",style:"normal",weight:"bold"}}),l.set("Noto Serif Bold Italic",{font:{family:"Noto Serif",style:"italic",weight:"bold"}}),l.set("Noto Serif Italic",{font:{family:"Noto Serif",style:"italic",weight:"normal"}}),l.set("Noto Serif Regular",{font:{family:"Noto Serif",style:"normal",weight:"normal"}}),l.set("Old Standard TT Bold",{font:{family:"Old Standard TT",style:"normal",weight:"bold"}}),l.set("Old Standard TT Italic",{font:{family:"Old Standard TT",style:"italic",weight:"normal"}}),l.set("Old Standard TT Regular",{font:{family:"Old Standard TT",style:"normal",weight:"normal"}}),l.set("Orbitron Bold",{font:{family:"Orbitron",style:"normal",weight:"bold"}}),l.set("Orbitron Regular",{font:{family:"Orbitron",style:"normal",weight:"normal"}}),l.set("Oregano Italic",{font:{family:"Oregano",style:"italic",weight:"normal"}}),l.set("Oregano Regular",{font:{family:"Oregano",style:"normal",weight:"normal"}}),l.set("Oswald Bold",{font:{family:"Oswald",style:"normal",weight:"bold"}}),l.set("Oswald Regular",{font:{family:"Oswald",style:"normal",weight:"normal"}}),l.set("Pacifico Regular",{font:{family:"Pacifico",style:"normal",weight:"normal"}}),l.set("Palatino Linotype Regular",{font:{family:"Palatino Linotype",style:"normal",weight:"normal"}}),l.set("Playfair Display Black Regular",{font:{family:"Playfair Display Black",style:"normal",weight:"normal"}}),l.set("Playfair Display Bold",{font:{family:"Playfair Display",style:"normal",weight:"bold"}}),l.set("Playfair Display Bold Italic",{font:{family:"Playfair Display",style:"italic",weight:"bold"}}),l.set("Playfair Display Italic",{font:{family:"Playfair Display",style:"italic",weight:"normal"}}),l.set("Playfair Display Regular",{font:{family:"Playfair Display",style:"normal",weight:"normal"}}),l.set("Playfair Display SC Bold",{font:{family:"Playfair Display SC",style:"normal",weight:"bold"}}),l.set("Playfair Display SC Regular",{font:{family:"Playfair Display SC",style:"normal",weight:"normal"}}),l.set("Redressed Regular",{font:{family:"Redressed",style:"normal",weight:"normal"}}),l.set("Risque Regular",{font:{family:"Risque",style:"normal",weight:"normal"}}),l.set("Roboto Condensed Italic",{font:{family:"Roboto Condensed",style:"italic",weight:"normal"}}),l.set("Roboto Condensed Light Italic",{font:{family:"Roboto Condensed Light",style:"italic",weight:"normal"}}),l.set("Rye Regular",{font:{family:"Rye",style:"normal",weight:"normal"}}),l.set("Special Elite Regular",{font:{family:"Special Elite",style:"normal",weight:"normal"}}),l.set("Syncopate Bold",{font:{family:"Syncopate",style:"normal",weight:"bold"}}),l.set("Syncopate Regular",{font:{family:"Syncopate",style:"normal",weight:"normal"}}),l.set("Tangerine Regular",{font:{family:"Tangerine",style:"normal",weight:"normal"}}),l.set("Ubuntu Bold",{font:{family:"Ubuntu",style:"normal",weight:"bold"}}),l.set("Ubuntu Bold Italic",{font:{family:"Ubuntu",style:"italic",weight:"bold"}}),l.set("Ubuntu Condensed Regular",{font:{family:"Ubuntu Condensed",style:"normal",weight:"normal"}}),l.set("Ubuntu Italic",{font:{family:"Ubuntu",style:"italic",weight:"normal"}}),l.set("Ubuntu Light Bold",{font:{family:"Ubuntu Light",style:"normal",weight:"bold"}}),l.set("Ubuntu Light Bold Italic",{font:{family:"Ubuntu Light",style:"italic",weight:"bold"}}),l.set("Ubuntu Light Italic",{font:{family:"Ubuntu Light",style:"italic",weight:"normal"}}),l.set("Ubuntu Light Regular",{font:{family:"Ubuntu Light",style:"normal",weight:"normal"}}),l.set("Ubuntu Medium Italic",{font:{family:"Ubuntu Medium",style:"italic",weight:"normal"}}),l.set("Ubuntu Mono Bold",{font:{family:"Ubuntu Mono",style:"normal",weight:"bold"}}),l.set("Ubuntu Mono Bold Italic",{font:{family:"Ubuntu Mono",style:"italic",weight:"bold"}}),l.set("Ubuntu Mono Italic",{font:{family:"Ubuntu Mono",style:"italic",weight:"normal"}}),l.set("Ubuntu Mono Regular",{font:{family:"Ubuntu Mono",style:"normal",weight:"normal"}}),l.set("Ubuntu Regular",{font:{family:"Ubuntu",style:"normal",weight:"normal"}}),l.set("UnifrakturCook Bold",{font:{family:"UnifrakturCook",style:"normal",weight:"bold"}}),l.set("Vast Shadow Regular",{font:{family:"Vast Shadow",style:"normal",weight:"normal"}}),l.set("Walter Turncoat Regular",{font:{family:"Walter Turncoat",style:"normal",weight:"normal"}});const n=new Map;function a(t){return t?"normal"===t.style&&"normal"===t.weight?`${t.family} Regular${"BellTopo Sans"===t.family?"(Beta)":""}`:"normal"===t.style&&"bold"===t.weight?`${t.family} Bold`:"italic"===t.style&&"normal"===t.weight?`${t.family} Italic`:"italic"===t.style&&"bold"===t.weight?`${t.family} Bold Italic`:"Arial Regular":""}n.set("Arial Bold",{font:{family:"Arial",style:"normal",weight:"bold"}}),n.set("Arial Bold Italic",{font:{family:"Arial",style:"italic",weight:"bold"}}),n.set("Arial Italic",{font:{family:"Arial",style:"italic",weight:"normal"}}),n.set("Arial Regular",{font:{family:"Arial",style:"normal",weight:"normal"}}),n.set("Arial Unicode MS Bold",{font:{family:"Arial Unicode MS",style:"normal",weight:"bold"}}),n.set("Arial Unicode MS Bold Italic",{font:{family:"Arial Unicode MS",style:"italic",weight:"bold"}}),n.set("Arial Unicode MS Italic",{font:{family:"Arial Unicode MS",style:"italic",weight:"normal"}}),n.set("Arial Unicode MS Regular",{font:{family:"Arial Unicode MS",style:"normal",weight:"normal"}}),n.set("Avenir Bold",{font:{family:"Avenir",style:"normal",weight:"bold"}}),n.set("Avenir Bold Italic",{font:{family:"Avenir",style:"italic",weight:"bold"}}),n.set("Avenir Italic",{font:{family:"Avenir",style:"italic",weight:"normal"}}),n.set("Avenir Regular",{font:{family:"Avenir",style:"normal",weight:"normal"}}),n.set("Times New Roman Bold",{font:{family:"Times New Roman",style:"normal",weight:"bold"}}),n.set("Times New Roman Bold Italic",{font:{family:"Times New Roman",style:"italic",weight:"bold"}}),n.set("Times New Roman Italic",{font:{family:"Times New Roman",style:"italic",weight:"normal"}}),n.set("Times New Roman Regular",{font:{family:"Times New Roman",style:"normal",weight:"normal"}}),n.set("Verdana Bold",{font:{family:"Verdana",style:"normal",weight:"bold"}}),n.set("Verdana Bold Italic",{font:{family:"Verdana",style:"italic",weight:"bold"}}),n.set("Verdana Italic",{font:{family:"Verdana",style:"italic",weight:"normal"}}),n.set("Verdana Regular",{font:{family:"Verdana",style:"normal",weight:"normal"}})},26426:(t,e,i)=>{i.d(e,{a:()=>c,b:()=>d,c:()=>o,d:()=>s,e:()=>l,f:()=>h,g:()=>u,i:()=>n,m:()=>a,t:()=>r,u:()=>p});const s=(t,e)=>{let i,s="idle";const o=(...o)=>new Promise((l=>{switch(s){case"flushed":s="idle",i?(clearTimeout(i),l(t(...o))):l(null);break;case"invoked":clearTimeout(i),s="idle",l(t(...o));break;case"cancelled":clearTimeout(i),s="idle",l(null);break;default:i&&clearTimeout(i),s="pending",i=setTimeout((()=>(s="idle",l(t(...o)))),e)}}));return o.flush=function(...t){return s="flushed",o(...t)},o.invoke=function(...t){return s="invoked",o(...t)},o.cancel=function(...t){return s="cancelled",o(...t)},o.getStatus=function(){return s},o},o=(t,e)=>{let i;return(...s)=>new Promise((o=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,o(t(...s))}),e))}))};function l(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function n(t){return null!=t}async function a(t,e){return await Promise.all([t,r(e)]),t}function r(t){return new Promise((e=>setTimeout(e,t)))}const c=(t,e)=>Object.fromEntries((t||[]).map((t=>{const{key:i,data:s}=e(t);return[i,s]}))),h=(t,e)=>t.length===e.length&&t.reduce(((t,i)=>t&&e.indexOf(i)>-1),!0);function p(t,e){const i=[],s={};return t.forEach((t=>{const o=e(t);null==s[o]&&(s[o]=t,i.push(t))})),i}function d(t){const e={boolean:{},number:{},string:{}},i=[];return t.filter((t=>{let s=typeof t;return s in e?!e[s].hasOwnProperty(t)&&(e[s][t]=!0):!(i.indexOf(t)>=0)&&i.push(t)}))}const u=(t,e)=>[...Array(Math.ceil(t.length/e))].map(((i,s)=>t.slice(e*s,e+e*s)))},27010:(t,e,i)=>{i.d(e,{c:()=>a});var s=i(28384);const o=t=>!("isConnected"in t)||t.isConnected,l=((t,e)=>{let i;return(...t)=>{i&&clearTimeout(i),i=setTimeout((()=>{i=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(o))})(...t)}),2e3)}})(),n=t=>"function"==typeof t?t():t,a=(t,e)=>{const i=((t,e=((t,e)=>t!==e))=>{const i=n(t);let s=new Map(Object.entries(null!=i?i:{}));const o={dispose:[],get:[],set:[],reset:[]},l=()=>{var e;s=new Map(Object.entries(null!==(e=n(t))&&void 0!==e?e:{})),o.reset.forEach((t=>t()))},a=t=>(o.get.forEach((e=>e(t))),s.get(t)),r=(t,i)=>{const l=s.get(t);e(i,l,t)&&(s.set(t,i),o.set.forEach((e=>e(t,i,l))))},c="undefined"==typeof Proxy?{}:new Proxy(i,{get:(t,e)=>a(e),ownKeys:t=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>s.has(e),set:(t,e,i)=>(r(e,i),!0)}),h=(t,e)=>(o[t].push(e),()=>{((t,e)=>{const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)})(o[t],e)});return{state:c,get:a,set:r,on:h,onChange:(e,i)=>{const s=h("set",((t,s)=>{t===e&&i(s)})),o=h("reset",(()=>i(n(t)[e])));return()=>{s(),o()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(h("set",e.set)),e.get&&t.push(h("get",e.get)),e.reset&&t.push(h("reset",e.reset)),e.dispose&&t.push(h("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{o.dispose.forEach((t=>t())),l()},reset:l,forceUpdate:t=>{const e=s.get(t);o.set.forEach((i=>i(t,e,e)))}}})(t,e);return i.use((()=>{if("function"!=typeof s.g)return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const i=(0,s.g)();i&&((t,e,i)=>{const s=t.get(e);s?s.includes(i)||s.push(i):t.set(e,[i])})(t,e,i)},set:e=>{const i=t.get(e);i&&t.set(e,i.filter(s.f)),l(t)},reset:()=>{t.forEach((t=>t.forEach(s.f))),l(t)}}})()),i}},62727:(t,e,i)=>{i.d(e,{a:()=>n,g:()=>c});var s=i(18869),o=i(81068),l=i(28384);function n(t){var e,i,l;const n=null!==(e=(0,s.c)(t,"[lang]"))&&void 0!==e?e:null===(l=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===l?void 0:l.documentElement,a=((null==n?void 0:n.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(a)?o.l.get(a):o.l.has(a.slice(0,2))?o.l.get(a.slice(0,2)):"en"}const a={};function r(t,e){const i=`${t}${e}`;return a[i]||(a[i]=function(t,e){return new Promise(((i,s)=>{fetch((0,l.a)(`../arcgis-app-assets/i18n/${t}.i18n.${e}.json`)).then((t=>{t.ok?i(t.json()):s()}),(()=>s()))}))}(t,e)),a[i]}async function c(t,e){const i=e||t.tagName.toLowerCase(),l=n(t),a=function(t){var e,i,l;const n=null!==(e=(0,s.c)(t,"[lang]"))&&void 0!==e?e:null===(l=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===l?void 0:l.documentElement,a=((null==n?void 0:n.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(a)?o.l.get(a):o.l.has(a.slice(0,2))?a:"en"}(t);let c;try{c=await r(i,l)}catch(t){console.warn(`no locale for ${i} (${l}) loading default locale en.`),c=await r(i,"en")}return[c,l,a]}},15859:(t,e,i)=>{i.d(e,{a:()=>l,b:()=>o,c:()=>r,d:()=>c,g:()=>a,s:()=>n});var s=i(26426);function o(t,e,i,s){!function(t,e,i){let s=null==(i=i||{})?void 0:i.expires;if("number"==typeof s){const t=new Date,e=24*s*60*60*1e3;t.setTime(Date.now()+e),s=i.expires=t}"string"!=typeof s&&(null==s?void 0:s.toUTCString)&&(i.expires=s.toUTCString());let o,l=`${t}=${encodeURIComponent(e)}`;for(o in i){l+=`; ${o}`;const t=i[o];!0!==t&&(l+=`=${t}`)}document.cookie=l}(t,s?JSON.stringify(e):e,i)}function l(t,e){const i=function(t){const e=document.cookie,i=new RegExp(`(?:^|; )${(0,s.e)(t)}=([^;]*)`),o=e.match(i);return o?decodeURIComponent(o[1]):void 0}(t);return i&&e?JSON.parse(i):i}function n(t,e,i){window.localStorage.setItem(t,i?JSON.stringify(e):e)}function a(t,e){const i=window.localStorage.getItem(t);return i&&e?JSON.parse(i):i}function r(t,e,i){window.sessionStorage.setItem(t,i?JSON.stringify(e):e)}function c(t,e){const i=window.sessionStorage.getItem(t);return i&&e?JSON.parse(i):i}}}]);