/*! For license information please see 1540f0ea05f1bef0eca6f72de94c9bb2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[86739],{58892:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>n,c:()=>a,d:()=>o});const o=(0,r(27010).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),i=o.state,a=o.state,n=o.state},76134:(e,t,r)=>{r.d(t,{c:()=>i,o:()=>a});const o=(0,r(27010).c)({portal:null,user:null,api:4,scale:"m"}),i=o.state,a=o.onChange},30063:(e,t,r)=>{r.d(t,{a:()=>i,f:()=>a,s:()=>p});var o=r(26426);const i=e=>(null==e?void 0:e.replace(/(\s+|:)/g,"_"))||"",a=e=>{const t=e=>e.split(",").map((e=>e.trim())).filter((e=>e));return e?"string"==typeof e?(0,o.b)(t(e)):(0,o.b)(e.flatMap((e=>[...t(e)]))):[]},n=async e=>new Promise(((t,r)=>{for(let o=0;o<e.length;o++)e[o].then((r=>{const i=[...e];i.splice(o,1),t({remainingPromises:i,result:r})})).catch(r)}));async function p(e,t){var r,o;const i=[],{getBatchSize:a,onPromiseCompleted:p,onPromiseThrow:s,shouldContinue:l}=null!=t?t:{};let c=[];for(let t=0;t<(null!==(r=null==a?void 0:a())&&void 0!==r?r:1);t++)try{const t=e();t&&c.push(t)}catch(e){null==s||s(e)}let d=null;for(;c.length>0&&(!l||l(d));)try{const{remainingPromises:t,result:r}=await n(c);c=t,d=r,r&&i.push(r),null==p||p(r);const s=null!==(o=null==a?void 0:a())&&void 0!==o?o:1;for(;c.length<s;){const t=e();if(t&&c.push(t),null==t)break}}catch(e){null==s||s(e)}return i}},65508:(e,t,r)=>{r.d(t,{a:()=>o,i:()=>i});const o=(0,r(27010).c)({title:"",snippet:"",tags:[],categories:[]}),i=o.state},31546:(e,t,r)=>{r.d(t,{A:()=>i,a:()=>s,i:()=>n,r:()=>p});var o=r(54871);const i=["file","url","create","application","featureLayer","tileLayer","sceneLayer","locator","imageryLayer","dataStore","developerCredentials","rasterFunctionTemplate"],a=["Document Link","CSV","GeoJson","KML","OGCFeatureServer","WFS","WMS","WMTS","GeoRSS","Application","Tile Layer","Feature Service","Geocoding Service","Geodata Service","Geometry Service","Geoenrichment Service","Geoprocessing Service","Globe Service","Map Service","Network Analysis Service","Image Service","Vector Tile Service","Scene Service","Stream Service","Workflow Manager Service","Video Service"],n=e=>a.includes(e),p=["Operations Dashboard Add In","Operations Dashboard Extension","Operation View","CityEngine Web Scene"],s=Object.assign(Object.assign({"360 VR Experience":{fileExt:["3vr"],type:"360 VR Experience",typeKeywords:[],nextStep:"itemProperties"}},o.u.featureFlags.tileLayer3dTiles?{"3DTiles Package":{fileExt:["3tz"],type:"3DTiles Package",typeKeywords:["3DTiles","3DTiles Package"],nextStep:"publishSelect"},"3DTiles Service":{type:"3DTiles Service",typeKeywords:["Data","Service","3DTiles Service","ArcGIS Server","Hosted Service"]}}:{}),{"Apache Parquet":{fileExt:["parquet"],type:"Apache Parquet",typeKeywords:[],nextStep:"itemProperties"},"AppBuilder Widget Package":{fileExt:["zip"],type:"AppBuilder Widget Package",typeKeywords:[]},"Desktop Add In":{fileExt:["esriaddin"],type:"Desktop Add In",typeKeywords:["Tool","Add In","Desktop Add In","ArcGIS Desktop","ArcMap","ArcGlobe","ArcScene","esriaddin"],nextStep:"itemProperties"},"Explorer Add In":{fileExt:["eaz"],type:"Explorer Add In",typeKeywords:["Tool","Add In","Explorer Add In","ArcGIS Explorer","eaz"],nextStep:"itemProperties"},"Explorer Map":{fileExt:["nmf"],type:"Explorer Map",typeKeywords:["Map","Explorer Map","Explorer Document","2D","3D","ArcGIS Explorer","nmf"],nextStep:"itemProperties"},"ArcGIS Explorer Application Configuration":{fileExt:["ncfg"],type:"Explorer Map",typeKeywords:["Map","Explorer Map","Explorer Mapping Application","2D","3D","ArcGIS Explorer"],nextStep:"itemProperties"},"Explorer Layer":{fileExt:["nmc"],type:"Explorer Layer",typeKeywords:["Data","Layer","Explorer Layer","ArcGIS Explorer","nmc"],nextStep:"itemProperties"},"Windows Mobile Package":{fileExt:["wmpk"],type:"Windows Mobile Package",typeKeywords:[],nextStep:"itemProperties"},"ArcGIS Pro Add In":{fileExt:["esriaddinx"],type:"ArcGIS Pro Add In",typeKeywords:["Tool","Add In","Pro Add In","esriaddinx"],nextStep:"itemProperties"},"ArcGIS Pro Configuration":{fileExt:["proconfigx"],type:"ArcGIS Pro Configuration",typeKeywords:[],nextStep:"itemProperties"},"Globe Document":{fileExt:["3dd"],type:"Globe Document",typeKeywords:["Map","Globe Document","3D","ArcGlobe","ArcGIS Server","3dd"],nextStep:"itemProperties"},"Map Document":{fileExt:["msd"],type:"Map Document",typeKeywords:["Map Document","Map","2D","ArcMap","ArcGIS Server","msd"],nextStep:"itemProperties"},"ArcMap Document":{fileExt:["mxd"],type:"Map Document",typeKeywords:["Map Document","Map","2D","ArcMap","ArcGIS Server"],nextStep:"itemProperties"},"ArcPad Package":{fileExt:["zip"],type:"ArcPad Package",typeKeywords:["Map","Layer","Data"]},"Published Map":{fileExt:["pmf"],type:"Published Map",typeKeywords:["Map","Published Map","2D","ArcReader","ArcMap","ArcGIS Server","pmf"],nextStep:"itemProperties"},"Scene Document":{fileExt:["sxd"],type:"Scene Document",typeKeywords:["Map","Scene Document","3D","ArcScene","sxd"],nextStep:"itemProperties"},"CityEngine Web Scene":{fileExt:["3ws"],type:"CityEngine Web Scene",typeKeywords:["3D","Map","Scene","Web"],thumbnailURL:"/cw_webscene.png",nextStep:"itemProperties"},"Code Sample":{fileExt:["zip"],type:"Code Sample",typeKeywords:["Code","Sample"]},"CSV Collection":{fileExt:["zip"],type:"CSV Collection",typeKeywords:[]},CSV:{fileExt:["csv"],type:"CSV",typeKeywords:["CSV"],nextStep:"publishSelect",appendUploadFormat:"csv"},"CAD Drawing":{fileExt:["zip"],type:"CAD Drawing",typeKeywords:[]},"Deep Learning Package":{fileExt:["zip","dlpk"],type:"Deep Learning Package",typeKeywords:["Deep Learning","Raster"],nextStep:"itemProperties"},"Desktop Application":{type:"Desktop Application",typeKeywords:["Desktop Application"]},"Desktop Application Template":{fileExt:["zip"],type:"Desktop Application Template",typeKeywords:["application","template","ArcGIS desktop"]},"Desktop Style":{fileExt:["stylx"],type:"Desktop Style",typeKeywords:["ArcGIS Pro","Symbology","Style","Symbols"],nextStep:"itemProperties"},"Earth Configuration":{fileExt:["xml"],type:"Earth Configuration",typeKeywords:["ArcGIS Earth","Earth","Earth Configuration"],nextStep:"itemProperties",orgOnly:!0},"Esri Classifier Definition":{type:"Esri Classifier Definition",fileExt:["ecd"],typeKeywords:[],nextStep:"itemProperties"},"Feature Collection":{type:"Feature Collection",fileExt:["featurecollection"],nextStep:"itemProperties",typeKeywords:[]},"File Geodatabase":{fileExt:["zip"],type:"File Geodatabase",typeKeywords:[],appendUploadFormat:"filegdb"},GeoJson:{fileExt:["geojson","json"],type:"GeoJson",typeKeywords:["Coordinates Type","CRS","Feature","FeatureCollection","GeoJSON","Geometry","GeometryCollection"],nextStep:"publishSelect",appendUploadFormat:"geojson"},"Geoprocessing Package":{fileExt:["gpk","gpkx"],type:"Geoprocessing Package",typeKeywords:["ArcGIS Desktop","ArcGlobe","ArcMap","ArcScene","Geoprocessing Package","gpk","Model","Result","Script","Sharing","Tool","Toolbox"],nextStep:"itemProperties"},GeoPackage:{fileExt:["gpkg"],type:"GeoPackage",typeKeywords:["Data","GeoPackage","gpkg"],nextStep:"publishSelect",appendUploadFormat:"geoPackage"},"Geoprocessing Sample":{fileExt:["zip"],type:"Geoprocessing Sample",typeKeywords:["tool","geoprocessing","sample"]},GeoRSS:{type:"GeoRSS",typeKeywords:[]},GML:{fileExt:["zip"],type:"GML",typeKeywords:[],orgOnly:!0},"Image Collection":{fileExt:["zip"],type:"Image Collection",typeKeywords:[],orgOnly:!0},Image:{fileExt:["jpg","jpeg","png","tif","tiff","gif"],type:"Image",typeKeywords:["Data","Image"],nextStep:"itemProperties",orgOnly:!0,allowAddDirect:!0},"iWork Keynote":{fileExt:["key"],type:"iWork Keynote",typeKeywords:["Data","Document","Mac"],orgOnly:!0,nextStep:"itemProperties"},"iWork Numbers":{fileExt:["numbers"],type:"iWork Numbers",typeKeywords:["Data","Document","Mac"],orgOnly:!0,nextStep:"itemProperties"},"iWork Pages":{fileExt:["pages"],type:"iWork Pages",typeKeywords:["Data","Document","Mac"],orgOnly:!0,nextStep:"itemProperties"},"KML Collection":{fileExt:["zip"],type:"KML Collection",typeKeywords:[]},KML:{type:"KML",fileExt:["kml","kmz"],typeKeywords:["Data","Map","kml"],nextStep:"itemProperties"},Layer:{fileExt:["lyr"],type:"Layer",typeKeywords:["Data","Layer","ArcMap","ArcGlobe","ArcGIS Explorer","lyr"],nextStep:"itemProperties"},"Layer File":{fileExt:["lyrx"],type:"Layer",typeKeywords:["ArcGIS Pro","Layer","Layer File"],nextStep:"itemProperties"},"Layer Package":{fileExt:["lpk","lpkx"],type:"Layer Package",typeKeywords:[],nextStep:"itemProperties"},Layout:{fileExt:["pagx"],type:"Layout",typeKeywords:["ArcGIS Pro","Layout","Layout File","pagx"],nextStep:"itemProperties"},"Locator Package":{fileExt:["gcpk"],type:"Locator Package",typeKeywords:[],nextStep:"itemProperties"},"Map Package":{fileExt:["mpk","mpkx"],type:"Map Package",typeKeywords:[],nextStep:"itemProperties"},"Map Template":{fileExt:["zip"],type:"Map Template",typeKeywords:["map","ArcMap","template","ArcGIS desktop"]},"Microsoft Excel":{fileExt:["xls","xlsx"],type:"Microsoft Excel",typeKeywords:["Data","Document","Microsoft Excel"],nextStep:"publishSelect",orgOnly:!0,appendUploadFormat:"excel"},"Microsoft Powerpoint":{fileExt:["ppt","pptx"],type:"Microsoft Powerpoint",typeKeywords:["Data","Document","Microsoft Powerpoint"],nextStep:"itemProperties",orgOnly:!0},"Visio Document":{fileExt:["vsd"],type:"Visio Document",typeKeywords:["Data","Document","Visio Document"],nextStep:"itemProperties",orgOnly:!0},"Microsoft Word":{fileExt:["doc","docx"],type:"Microsoft Word",typeKeywords:["Data","Document"],nextStep:"itemProperties",orgOnly:!0},"Mobile Basemap Package":{fileExt:["bpk"],type:"Mobile Basemap Package",typeKeywords:[],nextStep:"itemProperties"},"Mobile Map Package":{fileExt:["mmpk"],type:"Mobile Map Package",typeKeywords:[],nextStep:"itemProperties"},"Mobile Scene Package":{fileExt:["mspk"],type:"Mobile Scene Package",typeKeywords:[],thumbnailURL:"/mobilescenepackage.png",nextStep:"itemProperties"},Notebook:{fileExt:["ipynb"],type:"Notebook",typeKeywords:["Notebook","Python"],nextStep:"itemProperties",orgOnly:!0},PDF:{fileExt:["pdf"],type:"PDF",typeKeywords:["Data","Document","PDF"],nextStep:"itemProperties",orgOnly:!0},"Pro Map":{fileExt:["mapx"],type:"Pro Map",typeKeywords:["ArcGIS Pro","Map","Map File","mapx"],nextStep:"itemProperties"},"Pro Report":{fileExt:["rptx"],type:"Pro Report",typeKeywords:[],nextStep:"itemProperties",orgOnly:!0},"Project Package":{fileExt:["ppkx"],type:"Project Package",typeKeywords:[],nextStep:"itemProperties"},"Project Template":{fileExt:["aptx"],type:"Project Template",typeKeywords:[],nextStep:"itemProperties"},"Raster function template":{fileExt:["rft.json","rft.xml"],type:"Raster function template",typeKeywords:["Raster","Functions","Processing","rft","srf","function template","templates","ArcGIS Pro"],nextStep:"itemProperties"},"Rule Package":{fileExt:["rpk"],type:"Rule Package",typeKeywords:[],nextStep:"itemProperties"},"Scene Package":{fileExt:["slpk","spk"],type:"Scene Package",typeKeywords:[],nextStep:"publishSelect"},"Service Definition":{fileExt:["sd"],type:"Service Definition",typeKeywords:["Data","Service","Service Definition"],nextStep:"publishSelect"},Shapefile:{fileExt:["zip"],type:"Shapefile",typeKeywords:["Data","Layer","shapefile"],appendUploadFormat:"shapefile"},"Survey123 Add In":{fileExt:["surveyaddin"],type:"Survey123 Add In",typeKeywords:["Add In","Survey123 Add In","Tool"],nextStep:"itemProperties",orgOnly:!0},"Tile Package":{fileExt:["tpk","tpkx"],type:"Tile Package",typeKeywords:[],nextStep:"publishSelect"},"Vector Tile Package":{fileExt:["vtpk"],type:"Vector Tile Package",typeKeywords:[],nextStep:"publishSelect"},"Workflow Manager Package":{fileExt:["wpk"],type:"Workflow Manager Package",typeKeywords:[],nextStep:"itemProperties"},"Document Link":{type:"Document Link",typeKeywords:["Data","Document"]},FeatureServer:{type:"Feature Service",typeKeywords:["ArcGIS Server","Data","Feature Access","Feature Service","Service","Singlelayer","Hosted Service"]},GeocodeServer:{type:"Geocoding Service",thumbnailURL:"/desktopapp.png",typeKeywords:["ArcGIS Server","Geocoding Service","Locator Service","Service","Tool","Service Proxy"]},GeoDataServer:{type:"Geodata Service",typeKeywords:["Data","Service","Geodata Service","ArcGIS Server"]},GeometryServer:{type:"Geometry Service",typeKeywords:["Tool","Service","Geometry Service","ArcGIS Server"],thumbnailURL:"/desktopapp.png"},GeoenrichmentServer:{type:"Geoenrichment Service",typeKeywords:["Geoenrichment Service","ArcGIS Server"],thumbnailURL:"/desktopapp.png"},GPServer:{type:"Geoprocessing Service",typeKeywords:["Tool","Service","Geoprocessing Service","ArcGIS Server"]},GlobeServer:{type:"Globe Service",typeKeywords:["Data","Service","Globe Service","ArcGIS Server"],thumbnailURL:"/desktopapp.png"},ImageServer:{type:"Image Service",typeKeywords:["Data","Service","Image Service","ArcGIS Server"]},MapServer:{type:"Map Service",typeKeywords:["Data","Service","Map Service","ArcGIS Server"]},NAServer:{type:"Network Analysis Service",typeKeywords:["Tool","Service","Network Analysis Service","ArcGIS Server"]},ElevationServer:{type:"Image Service",thumbnailURL:"/desktopapp.png",typeKeywords:["Elevation 3D Layer"]},VectorTileServer:{type:"Vector Tile Service",typeKeywords:[]},WFS:{type:"WFS",typeKeywords:["Data","Service","Web Feature Service","OGC"]},WMS:{type:"WMS",typeKeywords:["Data","Service","Web Map Service","OGC"]},WMTS:{type:"WMTS",typeKeywords:["Data","Service","OGC"]},ogcFeature:{type:"OGCFeatureServer",typeKeywords:["Data","Service","Feature Service","OGC","OGC Feature Service"]},SceneServer:{type:"Scene Service",typeKeywords:["Scene Service"]},StreamServer:{type:"Stream Service",typeKeywords:["Data","Service","Stream Service","ArcGIS Server"]},VideoServer:{type:"Video Service",typeKeywords:[]},WMServer:{type:"Workflow Manager Service",thumbnailURL:"/desktopapp.png",typeKeywords:["Workflow Manager","ArcGIS Server","WMServer","Workflow","JTX","Job Tracking"]},TiledImageServer:{type:"Image Service",thumbnailURL:"/tiledimagerylayer.png",typeKeywords:["Tiled Imagery"]},"Web Mapping Application":{type:"Web Mapping Application",typeKeywords:["JavaScript","Map","Mapping Site","Online Map","Ready To Use","Web AppBuilder","Web Map (+ WAB2D or WAB3D)"]},"Mobile Application":{type:"Mobile Application",typeKeywords:["ArcGIS Mobile Map","Mobile Application"]},"AppBuilder Extension":{type:"AppBuilder Extension",typeKeywords:["Widget","App Builder"]},"Google Drive":{type:"Google Drive",typeKeywords:["CSV","Shapefile","GeoJSON","Excel","FileGeodatabase"]},Dropbox:{type:"Dropbox",typeKeywords:["CSV","Shapefile","GeoJSON","Excel","FileGeodatabase"]},OneDrive:{type:"OneDrive",typeKeywords:["CSV","Shapefile","GeoJSON","Excel","FileGeodatabase"]},"Map Service":{type:"Map Service",typeKeywords:["ArcGIS Server","Data","Map Service","Service","Hosted Service"]},StoryMap:{type:"StoryMap",typeKeywords:["arcgis-storymaps","StoryMap","Web Application (smstatusdraft or smsstatuspublished)"]},Dashboard:{type:"Dashboard",typeKeywords:["Dashboard","Operations Dashboard"]},"Hub Initiative":{type:"Hub Initiative",typeKeywords:["Hub","hubInitiative","OpenData"]},"Hub Site Application":{type:"Hub Site Application",typeKeywords:["Hub","hubSite","hubSolution","JavaScript","Map","Mapping Site","Online Map","OpenData","Ready To Use","selfConfigured","Web Map","Registered App"]},"Web Experience":{type:"Web Experience",typeKeywords:["EXB Experience","JavaScript","Ready To Use Web Application","Web Experience","Web Mapping Application","Web Page","Web Site"]},"Insights Workbook Package":{type:"Insights Workbook Package",fileExt:["insightswbk"],typeKeywords:["Insights","Insights Workbook Package"],nextStep:"itemProperties"},sde:{type:"Spatial Database Engine",fileExt:["sde"],typeKeywords:["sde"]},"Pro Report Template":{type:"Pro Report Template",fileExt:["rptt"],typeKeywords:["Pro Report Template","rptt"],nextStep:"itemProperties"}})},41171:(e,t,r)=>{r.d(t,{a:()=>A,b:()=>D,c:()=>f,d:()=>P,e:()=>l,f:()=>v,g:()=>x,h:()=>p,i:()=>K,j:()=>g,k:()=>w,l:()=>E,p:()=>y,q:()=>k,r:()=>c});var o=r(66716),i=r(76134),a=r(62381),n=r(26426);function p(e){var t,r,o,a;return null!=e||(e=null===i.c||void 0===i.c?void 0:i.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(o=null===(r=null==e?void 0:e.user)||void 0===r?void 0:r.credential)||void 0===o?void 0:o.token)||(null===(a=null==e?void 0:e.portalUser)||void 0===a?void 0:a.token)||""}function s(e){var t;const{config:r}=i.c;return"https:"===window.location.protocol||!0===(null===(t=null==r?void 0:r.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function l(e,t,r={},a){const[n]=await(0,o.l)(["esri/request"]),{api:l}=i.c;e.includes("f=")||t.append("f","json");const c=p();return c&&!t.has("token")&&t.append("token",c),new Promise(((o,i)=>{if(3===l){const p={url:!1===r.addSSL?e:s(e),form:t,timeout:r.timeout||0},l="post"===a?Object.assign({usePost:!0},r):r;n(p,l).then(o,i)}else n(e,Object.assign(Object.assign({body:t},r),{timeout:r.timeout||0,method:a||"auto"})).then((e=>{o(e.data)})).catch((e=>i(e)))}))}async function c(e,t={},r={},a,n){const[p]=await(0,o.l)(["esri/request"]),{api:l,portal:c}=i.c,d=Object.assign({},t);if(e.includes("f=")||!0===(null==n?void 0:n.excludeJson)||(d.f="json"),!1!==r.addTokenManually){const e=await P(c,l);d.token=e}const y=!1===r.addSSL?e:s(e);if(3===l)return p(Object.assign({url:y,content:d,timeout:r.timeout||0,withCredentials:r.withCredentials},null==n?void 0:n.v3Request),"post"===a?Object.assign({usePost:!0},r):r);{const e=Object.assign(Object.assign(Object.assign({query:d,method:a||"auto"},r),{timeout:r.timeout||0}),(null==r?void 0:r.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await p(y,e)).data}}const d=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120],y=async(e,t,r)=>{var o,i;const a=null!==(o=null==t?void 0:t.pendingStatuses)&&void 0!==o?o:["processing","partial","Pending","InProgress","EXECUTING"],p=null!==(i=null==t?void 0:t.successStatuses)&&void 0!==i?i:["completed","Completed","COMPLETED"];let s=0;const l=async()=>{const o=await c(e,null==t?void 0:t.requestParams,{},r),i=o.status||o.jobStatus;if(a.includes(i))return await(0,n.t)((y=s++,1e3*d[y>-1&&y<d.length-1?y:d.length-1])),l();if(p.includes(i))return o;throw o;var y};try{return l()}catch(e){throw console.error(e),e}},u={},S={},m={};async function v(e,t,r,o){var i,a,n,p;const s=null===(a=null===(i=m[t])||void 0===i?void 0:i[r])||void 0===a?void 0:a.expireAt,l=!!s&&(new Date).getTime()>s;if((null===(n=u[t])||void 0===n?void 0:n[r])&&!l)return u[t][r];S[t]||(S[t]={}),S[t][r]&&!l||(S[t][r]=e());const c=await S[t][r];if(u[t]||(u[t]={}),m[t]||(m[t]={}),u[t][r]=c,o){const{expireAfter:e,getExpireAfterFromResult:i}=o,a=i||e?(new Date).getTime()+(null!==(p=null==i?void 0:i(c))&&void 0!==p?p:e):null;m[t][r]=Object.assign(Object.assign({},m[t][r]),{expireAt:a})}return c}function g(e,t){var r;return null===(r=null==u?void 0:u[e])||void 0===r?void 0:r[t]}const f=(e,t)=>{var r,o;t?(null===(r=u[e])||void 0===r||delete r[t],null===(o=S[e])||void 0===o||delete o[t]):(delete u[e],delete S[e])};function x(e){var t;const{portal:r,config:o}=i.c||{};return null!==(t=(0,a.d)(null==o?void 0:o.restBaseUrl))&&void 0!==t?t:w(e||r)}function w(e){var t;return(0,a.d)(null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl)}const P=async(e,t)=>{var r,o;if(!(null==e?void 0:e.isPortal)||!e.isWebTierAuth)return p(e);const{token:a}=await v((()=>b(e,null!=t?t:null===i.c||void 0===i.c?void 0:i.c.api)),"platformSelf",null!==(o=null===(r=e.user)||void 0===r?void 0:r.id)&&void 0!==o?o:e.id,{getExpireAfterFromResult:e=>e.expires_in});return a},b=async(e,t)=>{const r=await(async(e,t)=>{var r,i,a,n;const p=3===t,[s]=await o.e.loadModules([p?"esri/IdentityManager":"esri/identity/IdentityManager"]),l=await v((()=>s.getCredential(x(e),{oAuthPopupConfirmation:!1})),"credential",null===(r=e.user)||void 0===r?void 0:r.id);return null!==(n=p?null===(i=l._oAuthCred)||void 0===i?void 0:i.appId:null===(a=l.oAuthState)||void 0===a?void 0:a.appId)&&void 0!==n?n:"arcgisonline"})(e,t),i={"X-Esri-Auth-Client-Id":r,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return c(`${x(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?i:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:i}})};async function k(e={},t){return c(`${x(t)}/community/groups`,e)}const E=async(e,t)=>{var r;if(!e)return[];const o=`${(0,a.d)(null!==(r=t.restUrl)&&void 0!==r?r:t.portalUrl)}portals/self/servers`,i=await c(o);return null==i?void 0:i.servers},A=e=>D(w(e)),D=e=>{var t;const r=`${(0,a.d)(null!==(t=(0,a.l)(e))&&void 0!==t?t:e)}info`;return v((()=>c(r,{},{addTokenManually:!1})),"portalInfo",r)},K=async(e,t)=>{if(e.isBackedBySDS)return{result:!0};const r=(0,a.e)(t)||(0,a.f)(t)||(0,a.g)(t)||(0,a.h)(t)||(0,a.j)(t);if(e.isPortal&&t&&(r||(0,a.k)(t)))try{const r=await h(t,e);return{result:!!(null==r?void 0:r[0])}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}return{result:!0}},h=async(e,t)=>{const r=await M(e,t);if(!r)return null;const o=`${r.adminUrl}/admin/data/findItems`;return(await c(o,{managed:!0})).items.filter((e=>{var t;return"arcgis data store"===(null===(t=e.provider)||void 0===t?void 0:t.toLowerCase())}))},M=async(e,t)=>{var r;return(null!==(r=await E(e,t))&&void 0!==r?r:[]).filter((e=>e.isHosted))[0]}},86739:(e,t,r)=>{r.d(t,{a:()=>v,b:()=>w,c:()=>D,d:()=>x,e:()=>P,f:()=>d,g:()=>m,h:()=>h,i:()=>g,j:()=>y,k:()=>u,l:()=>E,m:()=>f,n:()=>S,o:()=>A,p:()=>b,s:()=>K,u:()=>k});var o=r(41171),i=r(76134),a=r(62381),n=r(65508),p=r(58892),s=r(54871),l=r(30063),c=r(31546);function d({title:e,snippet:t,tags:r}){return{title:e,snippet:t,tags:(0,l.f)(r).join(",")}}const y=(e,t)=>{var r;const{file:o,type:i,extension:a,dataUrl:n,properties:p,typeKeywords:s}=t,l=d(e),y=[...null===(r=c.a[i])||void 0===r?void 0:r.typeKeywords,...s?[s]:[],a].join(", "),u=Object.assign({type:i,extension:a},p?{properties:JSON.stringify(p)}:{}),S=o?{file:o}:{dataUrl:n.includes('httpHeaders={"Authorization"')?n:encodeURI(n)};return Object.assign(Object.assign(Object.assign(Object.assign({},u),S),l),{typeKeywords:y})},u=(e,t)=>{const r=y(e,t),o=!!t.addAsUniqueFile,i=new FormData;return i.append("f","json"),i.append("async","true"),Object.keys(r).forEach((e=>{if(o&&"file"===e){const o=t.fileName;i.append(e,r[e],o)}else i.append(e,r[e])})),i},S=(e,t)=>{const r=(null==t?void 0:t.id)&&(null==t?void 0:t.id)!==(null==t?void 0:t.username)?`/${t.id}`:"";return`${e.userContentUrl}${r}/addItem`},m=(e,t)=>`${(0,o.g)(t)}content/items/${e}`,v=async(e,t)=>{try{const r=m(e,t);return{result:await(0,o.r)(r)}}catch(e){return console.warn("error getting item",e),{error:{code:"unhandledError"}}}},g=async(e,t)=>{const r=new FormData;switch(t.type){case"base64":r.append("data",t.data);break;case"url":r.append("url",t.url);break;case"file":r.append("file",t.file)}return r.append("f","json"),r.append("token",(0,o.h)(i.c.portal)),await(0,o.e)(`${(0,o.g)()}content/users/${i.c.user.username}/items/${e}/updateThumbnail`,r,{},"post")};async function f(e,t){const r=`${i.c.user.userContentUrl}/moveItems`;return await(0,o.r)(r,{items:e,folder:t},{},"post")}async function x(e,{permanentDelete:t=!1}={}){const r=`${i.c.user.userContentUrl}/items/${e}/delete`;return await(0,o.r)(r,{permanentDelete:t},{},"post")}async function w(e,t,r){const i=r?`&direction=${r}`:"",a=`${(0,o.g)()}content/items/${e}/relatedItems?relationshipType=${t}${i}`;return await(0,o.r)(a)}async function P(e,t,r){var a;const n=null!==(a=null!=r?r:i.c.user)&&void 0!==a?a:i.c.portal.user,l=`${"append"===s.u.workflow?p.a.existingItem.itemOwner.userContentUrl:n.userContentUrl}/items/${e}/update`;return(0,o.r)(l,t,{},"post")}const b=(e,t)=>{const r=`${(0,o.g)(t)}content/items/${e}/data`;return(0,o.r)(r)};async function k(e,t,r){const i=`${(0,o.g)(e)}/content/updateItems`,a=JSON.stringify(t.map((e=>({[e]:{categories:r}}))));return(0,o.r)(i,{items:a},{},"post")}const E=async(e,t)=>{const r=`${i.c.user.userContentUrl}/items/${e}/commit`,a=u(n.i,t);return a.delete("file"),await(0,o.e)(r,a,{},"post")},A=async e=>{const t=`${i.c.user.userContentUrl}/items/${e}/cancel`;return await(0,o.r)(t,{},{},"post")},D=async e=>{const t=S(i.c.user,n.i.folder),r=d(n.i),a=Object.assign({},e);return delete a.initialFolders,delete a.initialTitle,delete a.newItemMode,delete a.serviceInfo,delete a.allowStoredAuth,delete a.isSecured,delete a.checkAuth,delete a.agsType,delete a.developerCredentialsType,delete a.applicationEnvironment,delete a.apiKeyReferrerUrls,delete a.developerCredentialsRedirectUrls,delete a.developerPrivileges,await(0,o.r)(t,Object.assign(Object.assign(Object.assign(Object.assign({},a),(e=>e.url&&!!e.serviceInfo)(e)?{serviceInfo:JSON.stringify(e.serviceInfo)}:{}),{typeKeywords:JSON.stringify(e.typeKeywords)}),r),{},"post")};async function K(e,t,r,n,p,s){null!=p||(p=i.c.user),null!=s||(s=i.c.portal);const l=r&&r.id!==p.username?r.id:"root",c=e.replace(`.${n}`,"");if("featurecollection"===n||"Microsoft Excel"===t)return null;const d=[`title: "${c}"`,`type: "${t}"`,`owner: "${p.username}"`,`ownerfolder: "${l}"`],y=await(0,o.r)(`${(0,o.g)(s)}search`,{filter:d.join(" AND "),num:1});return(null==y?void 0:y.total)>0?{num:y.num,itemURLList:y.results.map((e=>(0,a.m)(e.id,i.c.config.baseUrl)))}:null}async function h(e,t){const r=(0,l.a)(e),{user:p,config:s,portal:c}=i.c,{folder:d}=n.i,y=d&&d.id!==p.username?d.id:"root",u=[`owner: "${p.username}"`,`ownerfolder: "${y}"`];t&&u.push(`type: "${t}"`);let S,m=1;for(let e=0;e<10&&!S&&m>-1;e++){const{nextStart:e,results:t}=await(0,o.r)(`${(0,o.g)()}search`,{[c.isPortal?"q":"filter"]:u.join(" AND "),num:100,start:m});S=t.find((e=>e.name===r)),m=e}return S?(0,a.m)(S.id,s.baseUrl):null}},54871:(e,t,r)=>{r.d(t,{a:()=>o,u:()=>i});const o=(0,r(27010).c)({nextText:"next",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{tileLayer3dTiles:!1}}),i=o.state}}]);