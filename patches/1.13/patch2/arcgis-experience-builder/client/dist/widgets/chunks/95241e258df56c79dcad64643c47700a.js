"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[23110],{29156:(e,a,i)=>{i.d(a,{m:()=>r});var n=i(47817),t=i(69764);const r={inches:(0,t.I)(1,"meters","inches"),feet:(0,t.I)(1,"meters","feet"),"us-feet":(0,t.I)(1,"meters","us-feet"),yards:(0,t.I)(1,"meters","yards"),miles:(0,t.I)(1,"meters","miles"),"nautical-miles":(0,t.I)(1,"meters","nautical-miles"),millimeters:(0,t.I)(1,"meters","millimeters"),centimeters:(0,t.I)(1,"meters","centimeters"),decimeters:(0,t.I)(1,"meters","decimeters"),meters:(0,t.I)(1,"meters","meters"),kilometers:(0,t.I)(1,"meters","kilometers"),"decimal-degrees":1/(0,t.R)(1,"meters",n.aW.radius)}},43961:(e,a,i)=>{function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function t(e){return null!=e&&!isNaN(e)&&isFinite(e)}function r(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,a){const i=a||r(e),n=e.valueUnit||"unknown";return"unknown"===i?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}i.d(a,{e:()=>t,i:()=>r,l:()=>s,n:()=>n})},23110:(e,a,i)=>{i.d(a,{N:()=>h,U:()=>b,V:()=>p,b:()=>f,d:()=>u,p:()=>c,v:()=>d}),i(58574);var n=i(47817),t=i(29156),r=i(43961);const s=n.S.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),l=new n.an,o=Math.PI,c=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function u(e,a,i){const t="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!t)return;if("esri.renderers.visualVariables.ColorVariable"!==t.declaredClass)return void s.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const r="number"==typeof a,l=r?null:a,o=l&&l.attributes;let c=r?a:null;const u=t.field,{ipData:d,hasExpression:f}=t.cache;let p=t.cache.compiledFunc;if(!u&&!f){const e=t.stops;return e&&e[0]&&e[0].color}if("number"!=typeof c)if(f){if(!(0,n.H)(i)||!(0,n.H)(i.arcade))return void s.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),o=a.createExecContext(l,r);if(!p){const e=a.createSyntaxTree(t.valueExpression);p=a.createFunction(e),t.cache.compiledFunc=p}c=a.executeFunction(p,o)}else o&&(c=o[u]);const m=t.normalizationField,v=o?parseFloat(o[m]):void 0;if(null!=c&&(!m||r||!isNaN(v)&&0!==v)){isNaN(v)||r||(c/=v);const e=V(c,d);if(e){const a=e[0],r=e[1],s=a===r?t.stops[a].color:n.bu.blendColors(t.stops[a].color,t.stops[r].color,e[2],(0,n.H)(i)?i.color:void 0);return new n.bu(s)}}}function d(e,a,i){const t="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!t)return;if("esri.renderers.visualVariables.OpacityVariable"!==t.declaredClass)return void s.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const r="number"==typeof a,l=r?null:a,o=l&&l.attributes;let c=r?a:null;const u=t.field,{ipData:d,hasExpression:f}=t.cache;let p=t.cache.compiledFunc;if(!u&&!f){const e=t.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof c)if(f){if((0,n.t)(i)||(0,n.t)(i.arcade))return void s.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),o=a.createExecContext(l,r);if(!p){const e=a.createSyntaxTree(t.valueExpression);p=a.createFunction(e),t.cache.compiledFunc=p}c=a.executeFunction(p,o)}else o&&(c=o[u]);const m=t.normalizationField,v=o?parseFloat(o[m]):void 0;if(null!=c&&(!m||r||!isNaN(v)&&0!==v)){isNaN(v)||r||(c/=v);const e=V(c,d);if(e){const a=e[0],i=e[1];if(a===i)return t.stops[a].opacity;{const n=t.stops[a].opacity;return n+(t.stops[i].opacity-n)*e[2]}}}}function f(e,a,i){const t="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!t)return;if("esri.renderers.visualVariables.RotationVariable"!==t.declaredClass)return void s.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const r=t.axis||"heading",l="heading"===r&&"arithmetic"===t.rotationType?90:0,o="heading"===r&&"arithmetic"===t.rotationType?-1:1,c="number"==typeof a?null:a,u=c&&c.attributes,d=t.field,{hasExpression:f}=t.cache;let p=t.cache.compiledFunc,m=0;if(!d&&!f)return m;if(f){if((0,n.t)(i)||(0,n.t)(i.arcade))return void s.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),l=a.createExecContext(c,r);if(!p){const e=a.createSyntaxTree(t.valueExpression);p=a.createFunction(e),t.cache.compiledFunc=p}m=a.executeFunction(p,l)}else u&&(m=u[d]||0);return m="number"!=typeof m||isNaN(m)?null:l+o*m,m}function p(e,a,i){const l="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!l)return;if("esri.renderers.visualVariables.SizeVariable"!==l.declaredClass)return void s.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const c=function(e,a,i,r,s){switch(a.transformationType){case"additive":return function(e,a,i,n){return e+(m(a.minSize,i,n)||a.minDataValue)}(e,a,i,r);case"constant":return function(e,a,i){const n=e.stops;let t=n&&n.length&&n[0].size;return null==t&&(t=e.minSize),m(t,a,i)}(a,i,r);case"clamped-linear":return function(e,a,i,t){const r=(e-a.minDataValue)/(a.maxDataValue-a.minDataValue),s=m(a.minSize,i,t),l=m(a.maxSize,i,t),c=(0,n.H)(t)?t.shape:void 0;if(e<=a.minDataValue)return s;if(e>=a.maxDataValue)return l;if("area"===a.scaleBy&&c){const e="circle"===c,a=e?o*(s/2)**2:s*s,i=a+r*((e?o*(l/2)**2:l*l)-a);return e?2*Math.sqrt(i/o):Math.sqrt(i)}return s+r*(l-s)}(e,a,i,r);case"proportional":return function(e,a,i,t){const r=(0,n.H)(t)?t.shape:void 0,s=e/a.minDataValue,l=m(a.minSize,i,t),o=m(a.maxSize,i,t);let c=null;return c="circle"===r?2*Math.sqrt(s*(l/2)**2):"square"===r||"diamond"===r||"image"===r?Math.sqrt(s*l**2):s*l,v(c,l,o)}(e,a,i,r);case"stops":return function(e,a,i,n,t){const[r,s,l]=V(e,t);if(r===s)return m(a.stops[r].size,i,n);{const e=m(a.stops[r].size,i,n);return e+(m(a.stops[s].size,i,n)-e)*l}}(e,a,i,r,s);case"real-world-size":return function(e,a,i,r){const s=((0,n.H)(r)&&r.resolution?r.resolution:1)*t.m[a.valueUnit],l=m(a.minSize,i,r),c=m(a.maxSize,i,r),{valueRepresentation:u}=a;let d=null;return d="area"===u?2*Math.sqrt(e/o)/s:"radius"===u||"distance"===u?2*e/s:e/s,v(d,l,c)}(e,a,i,r);case"identity":return e;case"unknown":return null}}(function(e,a,i){const t="number"==typeof a,l=t?null:a,o=l&&l.attributes;let c=t?a:null;const{isScaleDriven:u}=e.cache;let d=e.cache.compiledFunc;if(u){const a=(0,n.H)(i)?i.scale:void 0,t=(0,n.H)(i)?i.view:void 0;c=null==a||"3d"===t?function(e){let a=null,i=null;const n=e.stops;return n?(a=n[0].value,i=n[n.length-1].value):(a=e.minDataValue||0,i=e.maxDataValue||0),(a+i)/2}(e):a}else if(!t)switch(e.inputValueType){case"expression":{if((0,n.t)(i)||(0,n.t)(i.arcade))return void s.error("Use of arcade expressions requires an arcade context");const a={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,r=t.getViewInfo(a),o=t.createExecContext(l,r);if(!d){const a=t.createSyntaxTree(e.valueExpression);d=t.createFunction(a),e.cache.compiledFunc=d}c=t.executeFunction(d,o);break}case"field":o&&(c=o[e.field]);break;case"unknown":c=null}if(!(0,r.e)(c))return null;if(t||!e.normalizationField)return c;const f=o?parseFloat(o[e.normalizationField]):null;return(0,r.e)(f)&&0!==f?c/f:null}(l,a,i),l,a,i,l.cache.ipData);return null==c||isNaN(c)?0:c}function m(e,a,i){return null==e?null:(0,r.n)(e)?p(e,a,i):(0,r.e)(e)?e:null}function v(e,a,i){return(0,r.e)(i)&&e>i?i:(0,r.e)(a)&&e<a?a:e}function b(e,a,i){const{isScaleDriven:n}=e.cache;if(!(n&&"3d"===i||a))return null;const t={scale:a,view:i};let r=m(e.minSize,l,t),s=m(e.maxSize,l,t);if(null!=r||null!=s){if(r>s){const e=s;s=r,r=e}return{minSize:r,maxSize:s}}}function V(e,a){if(!a)return;let i=0,n=a.length-1;return a.some(((a,t)=>e<a?(n=t,!0):(i=t,!1))),[i,n,(e-a[i])/(a[n]-a[i])]}function h(e,a,i){const n=["proportional","proportional","proportional"];for(const t of e){const e=t.useSymbolValue?"symbol-value":p(t,a,i);switch(t.axis){case"width":n[0]=e;break;case"depth":n[1]=e;break;case"height":n[2]=e;break;case"width-and-depth":n[0]=e,n[1]=e;break;case"all":case void 0:case null:n[0]=e,n[1]=e,n[2]=e}}return n}}}]);