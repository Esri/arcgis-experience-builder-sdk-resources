/*! For license information please see 14d886ae9abb1a8b39ebdb88fb2b77ca.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[57257],{57257:(e,t,n)=>{n.r(t),n.d(t,{arcgis_time_zone:()=>l});var o=n(28384),i=n(34077),a=n(62727),s=n(26426);n(72637),n(66716),n(18869),n(81068);const l=class{constructor(e){(0,o.r)(this,e),this.timeZones=[],this.mapView=void 0,this.config=void 0}async closePopover(){this.removePopover()}async componentWillLoad(){var e;const[t,n]=await(0,a.g)(this.hostElement);this.strings=t;const{mapView:i}=this;(0,s.i)(i.timeZone)||(i.timeZone="system");const l=(0,o.a)("./assets/arcgis-time-zone-areas/arcgis-time-zone-areas.json");await fetch(l).then((e=>e.json())).then((e=>this.timeZoneAreaStrings=e));const c=null!==(e=this.timeZoneAreaStrings[`${n}`])&&void 0!==e?e:this.timeZoneAreaStrings.en,r=(new Intl.DateTimeFormat).resolvedOptions().timeZone;Object.entries(t.timeZoneList).map((e=>{var t=e[0].split("/");const n=Object.keys(c).find((e=>t[0].toLocaleLowerCase()===e)),o=c[`${n}`];this.timeZones.push([e[0],`${o}/${e[1]}`])})),this.timeZones.sort(((e,t)=>e[1]<t[1]?-1:1)),this.timeZonesToDisplay=this.timeZones.map((e=>(0,o.h)("calcite-combobox-item",{selected:e[0]===i.timeZone||e[0]===r&&("system"===i.timeZone||"unknown"===i.timeZone),value:e[0],textLabel:e[1]})))}async componentDidLoad(){var e;this.containerPanelNode=(0,i.q)(this.hostElement,"calcite-panel"),this.containerPanelNode||(this.containerPanelNode=(0,i.q)(this.hostElement,"calcite-flow-item")),this.parentBlockNode=(0,i.q)(this.hostElement,"calcite-block"),null===(e=this.parentBlockNode)||void 0===e||e.addEventListener("calciteBlockToggle",(()=>{this.removePopover()}))}disconnectedCallback(){this.removePopover()}render(){const{strings:e,mapView:t}=this;return(0,o.h)(o.H,null,(0,o.h)("calcite-label",{layout:"inline"},(0,o.h)("section",{class:"time-zone-toggle"},e.timeZoneLabel,(0,o.h)("calcite-button",{class:"info-button","icon-start":"information",scale:"s",appearance:"transparent",kind:"neutral",onClick:e=>{var t;e.stopPropagation(),(null===(t=this.popoverNode)||void 0===t?void 0:t.parentElement)?this.removePopover():this.openPopover()},ref:e=>this.infoButtonNode=e}))),(0,o.h)("calcite-radio-button-group",{ref:e=>this.radioButtonGroupNode=e,layout:"vertical",name:"time-zone-options",onCalciteRadioButtonGroupChange:e=>{const t=e.target;this.handleTimeZoneOptionChange(t.selectedItem.value)}},(0,o.h)("calcite-label",{layout:"inline"},(0,o.h)("calcite-radio-button",{checked:"system"===t.timeZone,value:"system"}),e.deviceLabel),(0,o.h)("calcite-label",{layout:"inline"},(0,o.h)("calcite-radio-button",{checked:"system"!==t.timeZone&&"unknown"!==t.timeZone,value:"time-zone"}),e.specificLabel),(0,o.h)("calcite-combobox",{class:(["system","unknown"].indexOf(t.timeZone)>-1?"hidden":"")+" block-content-padding",ref:e=>this.ianaTimeZonePickerNode=e,label:e.chooseTimeZone,selectionMode:"single-persist",onCalciteComboboxChange:()=>t.timeZone=this.ianaTimeZonePickerNode.value,clearDisabled:!0},this.timeZonesToDisplay),(0,o.h)("calcite-label",{layout:"inline"},(0,o.h)("calcite-radio-button",{checked:"unknown"===t.timeZone,value:"unknown"}),e.dataLabel)))}handleTimeZoneOptionChange(e){const{mapView:t}=this,n=this.ianaTimeZonePickerNode.value;t.timeZone="time-zone"!==e?e:n;const o="time-zone"===this.radioButtonGroupNode.selectedItem.value?"remove":"add";this.ianaTimeZonePickerNode.classList[o]("hidden")}openPopover(){const{config:e}=this,t=this.popoverNode=document.createElement("arcgis-time-zone-popover");t.refElement=this.containerPanelNode,t.config=e,t.addEventListener("arcgisTimeZonePopoverClose",(()=>{this.closePopover(),this.infoButtonNode.setFocus()})),document.body.appendChild(t)}removePopover(){var e,t;null===(t=null===(e=this.popoverNode)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeChild(this.popoverNode),this.popoverNode=null}static get assetsDirs(){return["assets"]}get hostElement(){return(0,o.d)(this)}};l.style=":host{height:100%}.time-zone-toggle{font-family:var(--calcite-sans-family);font-weight:var(--calcite-font-weight-medium)}.info-button{margin:auto 0.25rem}.block-content-padding{padding-bottom:10px}.hidden{display:none}"},26426:(e,t,n)=>{n.d(t,{a:()=>r,b:()=>m,c:()=>i,d:()=>o,e:()=>a,f:()=>u,g:()=>h,i:()=>s,m:()=>l,t:()=>c,u:()=>d});const o=(e,t)=>{let n,o="idle";const i=(...i)=>new Promise((a=>{switch(o){case"flushed":o="idle",n?(clearTimeout(n),a(e(...i))):a(null);break;case"invoked":clearTimeout(n),o="idle",a(e(...i));break;case"cancelled":clearTimeout(n),o="idle",a(null);break;default:n&&clearTimeout(n),o="pending",n=setTimeout((()=>(o="idle",a(e(...i)))),t)}}));return i.flush=function(...e){return o="flushed",i(...e)},i.invoke=function(...e){return o="invoked",i(...e)},i.cancel=function(...e){return o="cancelled",i(...e)},i.getStatus=function(){return o},i},i=(e,t)=>{let n;return(...o)=>new Promise((i=>{n||(n=setTimeout((()=>{clearTimeout(n),n=void 0,i(e(...o))}),t))}))};function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){return null!=e}async function l(e,t){return await Promise.all([e,c(t)]),e}function c(e){return new Promise((t=>setTimeout(t,e)))}const r=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:o}=t(e);return[n,o]}))),u=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function d(e,t){const n=[],o={};return e.forEach((e=>{const i=t(e);null==o[i]&&(o[i]=e,n.push(e))})),n}function m(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let o=typeof e;return o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,o)=>e.slice(t*o,t+t*o)))},62727:(e,t,n)=>{n.d(t,{a:()=>s,g:()=>r});var o=n(18869),i=n(81068),a=n(28384);function s(e){var t,n,a;const s=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(l)?i.l.get(l):i.l.has(l.slice(0,2))?i.l.get(l.slice(0,2)):"en"}const l={};function c(e,t){const n=`${e}${t}`;return l[n]||(l[n]=function(e,t){return new Promise(((n,o)=>{fetch((0,a.a)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?n(e.json()):o()}),(()=>o()))}))}(e,t)),l[n]}async function r(e,t){const n=t||e.tagName.toLowerCase(),a=s(e),l=function(e){var t,n,a;const s=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(l)?i.l.get(l):i.l.has(l.slice(0,2))?l:"en"}(e);let r;try{r=await c(n,a)}catch(e){console.warn(`no locale for ${n} (${a}) loading default locale en.`),r=await c(n,"en")}return[r,a,l]}}}]);