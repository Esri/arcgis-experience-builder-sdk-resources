/*! For license information please see 846219aa307169008662a0edd1d08ff1.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[87724],{87724:(e,r,a)=>{a.r(r),a.d(r,{arcgis_arcade:()=>i});var t=a(28384);const i=class{constructor(e){(0,t.r)(this,e),this.arcadeClosed=(0,t.c)(this,"arcadeClosed",7),this.sendPostMessage=e=>{var r,a;null===(a=null===(r=this.arcadeEditorInfo.arcadeEditor)||void 0===r?void 0:r.contentWindow)||void 0===a||a.postMessage(JSON.stringify(e),this.arcadeEditorInfo.editorUrl)},this.receiveMessage=e=>{if(e.stopPropagation(),-1===this.arcadeEditorInfo.editorUrl.indexOf(e.origin))return;const r="string"==typeof e.data?JSON.parse(e.data):e.data;switch(r.type){case"loaded":this.arcadeEditorInfo.editorFrameLoaded=r.value,this.arcadeEditorInfo.editorFrameLoaded&&this.sendPostMessage(this.objectForArcadeIFrame);break;case"initFinished":this.arcadeEditorInfo.editorFrameLoaded||console.log("editor app not loaded yet");break;case"scriptSaveAndClose":if(!r.script){this.doneArcade();break}this.doneArcade(r);break;case"scriptClose":this.doneArcade()}},this.arcadeEditorUrl=void 0,this.currentLanguage=void 0,this.objectForArcadeIFrame=void 0,this.currentArcadeFieldName=void 0}componentWillLoad(){console.warn("arcgis-arcade component is deprecated. Instead use arcgis-modal-arcade")}componentDidLoad(){this.arcadeEditorInfo={arcadeEditor:this.hostElement.shadowRoot.getElementById("arcadeFrame_Id"),editorFrameLoaded:!1,editorUrl:`${this.arcadeEditorUrl}?locale=${this.currentLanguage.toLowerCase()}`},this.arcadeEditorInfo.arcadeEditor.onload=()=>{this.arcadeEditorInfo.arcadeEditor.style.visibility="visible"},this.arcadeEditorInfo.arcadeEditor.src=this.arcadeEditorInfo.editorUrl,window.addEventListener("message",this.receiveMessage,!1);let e=0;this.arcadeEditorInfo.editorFrameListener=window.setInterval((()=>{this.arcadeEditorInfo.editorFrameLoaded?(window.clearInterval(this.arcadeEditorInfo.editorFrameListener),this.arcadeEditorInfo.editorFrameListener=null):this.sendPostMessage({type:"isLoaded"}),e++,e>60&&console.log("reject")}),500)}doneArcade(e){var r;window.clearInterval(this.arcadeEditorInfo.editorFrameListener),window.removeEventListener("message",this.receiveMessage),(null===(r=this.hostElement)||void 0===r?void 0:r.parentNode)&&(e?this.arcadeClosed.emit({arcadeExp:e,currentArcadeFieldName:this.currentArcadeFieldName}):this.arcadeClosed.emit())}render(){return(0,t.h)(t.H,null,(0,t.h)("div",{class:"arcade-div"},(0,t.h)("iframe",{id:"arcadeFrame_Id",class:"arcade-iframe"})))}get hostElement(){return(0,t.d)(this)}};i.style=".arcade-div{position:fixed;top:0px;right:0px;bottom:0px;left:0px;display:flex;justify-content:center;align-items:center;overflow-y:hidden;z-index:1001;transition:visibility 0ms linear 0.3s, opacity 0.3s cubic-bezier(0.215, 0.44, 0.42, 0.88) 0s}.arcade-iframe{border:none;width:100%;height:100%}"}}]);