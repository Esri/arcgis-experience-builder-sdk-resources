/*! For license information please see fc621bb1c363f7d017ba9b0d55bdcf0a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[17156],{58728:(t,e,i)=>{i.d(e,{a:()=>c,b:()=>h,c:()=>p,d:()=>d,e:()=>g,f:()=>y,g:()=>s,h:()=>m,i:()=>b,j:()=>a,k:()=>u,q:()=>f,u:()=>A});var n=i(41171),o=i(76134);const r='owner:"esri" AND title:"AppSwitcher Config" AND type: "Application Configuration"';async function a(t){const e=(0,n.g)(t);if(!e)return;const i=`${e}portals/self/settings`;return(0,n.f)((()=>w(i)),"portalSettings",e)}async function s(){var t;const e=await a();return(null===(t=null==e?void 0:e.portalConfigProperties)||void 0===t?void 0:t.showInAppLauncher)||[]}async function l(t){const e=(0,n.g)();if(e&&t)return w(`${e}content/items/${t}/data`)}async function c(){var t;const{portal:e,user:i}=o.c;if(!(null==e?void 0:e.id)||!i)return;const a=await async function(){const t=(0,n.g)();if(t)return w(`${t}search`,{num:1,start:0,sortField:"title",sortOrder:"asc",q:r})}(),s=null===(t=null==a?void 0:a.results)||void 0===t?void 0:t[0];if(!s)return;const c=s.id;return await l(c)}async function p(){const{user:t}=o.c;return w(`${(0,n.g)()}community/users/${t.username}/properties`)}async function d(){const{portal:t}=o.c;return w(`${(0,n.g)()}portals/${t.id}/approvedApps`,{returnAllApps:!1})}async function u(t,e,i="results"){let n,o,r,a,s=1,l=[];e.start=s,e.num||(e.num=100);try{const c=await w(t,e);if(!(null==c?void 0:c[i]))return l;for(l=[...l,...c[i]],s=c.nextStart,n=c.total-l.length,o=Math.ceil(n/100),r=[],a=0;a<o;a++)e.start=s+100*a,r.push(w(t,e));try{return(await Promise.all(r)).forEach((t=>{l=[...l,...t[i]]})),l}catch(t){return l}}catch(t){return l}}async function h(){const{user:t}=o.c;return u(`${(0,n.g)()}community/users/${t.username}/provisionedListings`,{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")}async function g(){const t=`${(0,n.g)()}portals/self/subscriptionInfo`;try{const e=await w(t);return(null==e?void 0:e.orgCapabilities)||[]}catch(t){return[]}}async function f(t,e){if(e&&(null==t?void 0:t.length))return w(`${(0,n.g)()}search`,{num:100,q:`id:(${t.map((t=>`"${t.itemId}"`)).join(" OR ")})`})}const v='owner:"esri" AND title:"BlockedApps Config" AND type: "Application Configuration"';async function m(){var t,e;const i=`${(0,n.g)()}search`;try{const n=await w(i,{num:10,start:0,sortField:"title",sortOrder:"asc",q:v});if(!n)return[];const o=(null===(e=null===(t=n.results)||void 0===t?void 0:t[0])||void 0===e?void 0:e.id)||"",r=await l(o);return(null==r?void 0:r.blockedApps)||[]}catch(t){return[]}}async function b(){const t=`${(0,n.g)()}portals/self/servers`,e=await w(t);return(null==e?void 0:e.servers)||[]}async function y(){const t=`${(0,n.g)()}portals/self/signinSettings`;return await w(t)}async function w(t,e){e||(e={}),e.f="json";const i=(0,n.h)();i&&(e.token=i);const o=new URL(t);Object.keys(e).forEach((t=>o.searchParams.append(t,e[t])));const r=await fetch(o);return await r.json()}async function A(t){const{user:e}=o.c,i=function(t){let e=(0,n.g)();return"/"!==e.slice(-1)&&(e+="/"),`${e}${t}`}(`community/users/${e.username}/setProperties`),r=new FormData;return r.append("properties",JSON.stringify(t)),async function(t,e){e.append("f","json");const i=(0,n.h)();i&&e.append("token",i),fetch(t,{method:"POST",body:e})}(i,r)}},17156:(t,e,i)=>{i.r(e),i.d(e,{arcgis_app_switcher:()=>he,arcgis_app_switcher_link:()=>fe});var n=i(28384),o=i(62727),r=i(76134),a=i(58728),s=i(41171),l=i(15859),c=i(81068);function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function g(){return g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},g.apply(this,arguments)}function f(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}i(18869),i(27010),i(66716),i(62381);var v=f(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),m=f(/Edge/i),b=f(/firefox/i),y=f(/safari/i)&&!f(/chrome/i)&&!f(/android/i),w=f(/iP(ad|od|hone)/i),A=f(/chrome/i)&&f(/android/i),S={capture:!1,passive:!1};function x(t,e,i){t.addEventListener(e,i,!v&&S)}function I(t,e,i){t.removeEventListener(e,i,!v&&S)}function E(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function D(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function C(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&E(t,e):E(t,e))||n&&t===i)return t;if(t===i)break}while(t=D(t))}return null}var k,P=/\s+/g;function T(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(P," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(P," ")}}function O(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function _(t,e){var i="";if("string"==typeof t)i=t;else do{var n=O(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(i)}function M(t,e,i){if(t){var n=t.getElementsByTagName(e),o=0,r=n.length;if(i)for(;o<r;o++)i(n[o],o);return n}return[]}function L(){return document.scrollingElement||document.documentElement}function N(t,e,i,n,o){if(t.getBoundingClientRect||t===window){var r,a,s,l,c,p,d;if(t!==window&&t.parentNode&&t!==L()?(a=(r=t.getBoundingClientRect()).top,s=r.left,l=r.bottom,c=r.right,p=r.height,d=r.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,p=window.innerHeight,d=window.innerWidth),(e||i)&&t!==window&&(o=o||t.parentNode,!v))do{if(o&&o.getBoundingClientRect&&("none"!==O(o,"transform")||i&&"static"!==O(o,"position"))){var u=o.getBoundingClientRect();a-=u.top+parseInt(O(o,"border-top-width")),s-=u.left+parseInt(O(o,"border-left-width")),l=a+r.height,c=s+r.width;break}}while(o=o.parentNode);if(n&&t!==window){var h=_(o||t),g=h&&h.a,f=h&&h.d;h&&(l=(a/=f)+(p/=f),c=(s/=g)+(d/=g))}return{top:a,left:s,bottom:l,right:c,width:d,height:p}}}function F(t,e,i){for(var n=W(t,!0),o=N(t)[e];n;){var r=N(n)[i];if(!("top"===i||"left"===i?o>=r:o<=r))return n;if(n===L())break;n=W(n,!1)}return!1}function R(t,e,i,n){for(var o=0,r=0,a=t.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Xt.ghost&&(n||a[r]!==Xt.dragged)&&C(a[r],i.draggable,t,!1)){if(o===e)return a[r];o++}r++}return null}function j(t,e){for(var i=t.lastElementChild;i&&(i===Xt.ghost||"none"===O(i,"display")||e&&!E(i,e));)i=i.previousElementSibling;return i||null}function $(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Xt.clone||e&&!E(t,e)||i++;return i}function B(t){var e=0,i=0,n=L();if(t)do{var o=_(t),r=o.a,a=o.d;e+=t.scrollLeft*r,i+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,i]}function W(t,e){if(!t||!t.getBoundingClientRect)return L();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=O(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i.getBoundingClientRect||i===document.body)return L();if(n||e)return i;n=!0}}}while(i=i.parentNode);return L()}function H(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function X(t,e){return function(){if(!k){var i=arguments;1===i.length?t.call(this,i[0]):t.apply(this,i),k=setTimeout((function(){k=void 0}),e)}}}function z(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function G(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var Y="Sortable"+(new Date).getTime();var V=[],U={initializeByDefault:!0},q={mount:function(t){for(var e in U)U.hasOwnProperty(e)&&!(e in t)&&(t[e]=U[e]);V.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),V.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var o=t+"Global";V.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][o]&&e[n.pluginName][o](d({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](d({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var o in V.forEach((function(n){var o=n.pluginName;if(t.options[o]||n.initializeByDefault){var r=new n(t,e,t.options);r.sortable=t,r.options=t.options,t[o]=r,g(i,r.defaults)}})),t.options)if(t.options.hasOwnProperty(o)){var r=this.modifyOption(t,o,t.options[o]);void 0!==r&&(t.options[o]=r)}},getEventProperties:function(t,e){var i={};return V.forEach((function(n){"function"==typeof n.eventProperties&&g(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return V.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[e]&&(n=o.optionListeners[e].call(t[o.pluginName],i))})),n}},K=["evt"],J=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,o=function(t,e){if(null==t)return{};var i,n,o=function(t,e){if(null==t)return{};var i,n,o={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}(i,K);q.pluginEvent.bind(Xt)(t,e,d({dragEl:Z,parentEl:tt,ghostEl:et,rootEl:it,nextEl:nt,lastDownEl:ot,cloneEl:rt,cloneHidden:at,dragStarted:yt,putSortable:ut,activeSortable:Xt.active,originalEvent:n,oldIndex:st,oldDraggableIndex:ct,newIndex:lt,newDraggableIndex:pt,hideGhostForTarget:$t,unhideGhostForTarget:Bt,cloneNowHidden:function(){at=!0},cloneNowShown:function(){at=!1},dispatchSortableEvent:function(t){Q({sortable:e,name:t,originalEvent:n})}},o))};function Q(t){!function(t){var e=t.sortable,i=t.rootEl,n=t.name,o=t.targetEl,r=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,p=t.oldDraggableIndex,u=t.newDraggableIndex,h=t.originalEvent,g=t.putSortable,f=t.extraEventProperties;if(e=e||i&&i[Y]){var b,y=e.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||v||m?(b=document.createEvent("Event")).initEvent(n,!0,!0):b=new CustomEvent(n,{bubbles:!0,cancelable:!0}),b.to=a||i,b.from=s||i,b.item=o||i,b.clone=r,b.oldIndex=l,b.newIndex=c,b.oldDraggableIndex=p,b.newDraggableIndex=u,b.originalEvent=h,b.pullMode=g?g.lastPutMode:void 0;var A=d(d({},f),q.getEventProperties(n,e));for(var S in A)b[S]=A[S];i&&i.dispatchEvent(b),y[w]&&y[w].call(e,b)}}(d({putSortable:ut,cloneEl:rt,targetEl:Z,rootEl:it,oldIndex:st,oldDraggableIndex:ct,newIndex:lt,newDraggableIndex:pt},t))}var Z,tt,et,it,nt,ot,rt,at,st,lt,ct,pt,dt,ut,ht,gt,ft,vt,mt,bt,yt,wt,At,St,xt,It=!1,Et=!1,Dt=[],Ct=!1,kt=!1,Pt=[],Tt=!1,Ot=[],_t="undefined"!=typeof document,Mt=w,Lt=m||v?"cssFloat":"float",Nt=_t&&!A&&!w&&"draggable"in document.createElement("div"),Ft=function(){if(_t){if(v)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Rt=function(t,e){var i=O(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=R(t,0,e),r=R(t,1,e),a=o&&O(o),s=r&&O(r),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+N(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+N(r).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){var p="left"===a.float?"left":"right";return!r||"both"!==s.clear&&s.clear!==p?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===i[Lt]||r&&"none"===i[Lt]&&l+c>n)?"vertical":"horizontal"},jt=function(t){function e(t,i){return function(n,o,r,a){var s=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==t&&(i||s))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,o,r,a),i)(n,o,r,a);var l=(i?n:o).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},n=t.group;n&&"object"==u(n)||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},$t=function(){!Ft&&et&&O(et,"display","none")},Bt=function(){!Ft&&et&&O(et,"display","")};_t&&!A&&document.addEventListener("click",(function(t){if(Et)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Et=!1,!1}),!0);var Wt=function(t){if(Z){t=t.touches?t.touches[0]:t;var e=(o=t.clientX,r=t.clientY,Dt.some((function(t){var e=t[Y].options.emptyInsertThreshold;if(e&&!j(t)){var i=N(t),n=o>=i.left-e&&o<=i.right+e,s=r>=i.top-e&&r<=i.bottom+e;return n&&s?a=t:void 0}})),a);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[Y]._onDragOver(i)}}var o,r,a},Ht=function(t){Z&&Z.parentNode[Y]._isOutsideThisEl(t.target)};function Xt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=g({},e),t[Y]=this;var i,n,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Rt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Xt.supportPointer&&"PointerEvent"in window&&!y,emptyInsertThreshold:5};for(var r in q.initializePlugins(this,t,o),o)!(r in e)&&(e[r]=o[r]);for(var a in jt(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&Nt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?x(t,"pointerdown",this._onTapStart):(x(t,"mousedown",this._onTapStart),x(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(t,"dragover",this),x(t,"dragenter",this)),Dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),g(this,(n=[],{captureAnimationState:function(){n=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==O(t,"display")&&t!==Xt.ghost){n.push({target:t,rect:N(t)});var e=d({},n[n.length-1].rect);if(t.thisAnimationDuration){var i=_(t,!0);i&&(e.top-=i.f,e.left-=i.e)}t.fromRect=e}}))},addAnimationState:function(t){n.push(t)},removeAnimationState:function(t){n.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(n,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(i),void("function"==typeof t&&t());var o=!1,r=0;n.forEach((function(t){var i=0,n=t.target,a=n.fromRect,s=N(n),l=n.prevFromRect,c=n.prevToRect,p=t.rect,d=_(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&H(l,s)&&!H(a,s)&&(p.top-s.top)/(p.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(i=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(p,l,c,e.options)),H(s,a)||(n.prevFromRect=a,n.prevToRect=s,i||(i=e.options.animation),e.animate(n,p,s,i)),i&&(o=!0,r=Math.max(r,i),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),i),n.thisAnimationDuration=i)})),clearTimeout(i),o?i=setTimeout((function(){"function"==typeof t&&t()}),r):"function"==typeof t&&t(),n=[]},animate:function(t,e,i,n){if(n){O(t,"transition",""),O(t,"transform","");var o=_(this.el),r=o&&o.a,a=o&&o.d,s=(e.left-i.left)/(r||1),l=(e.top-i.top)/(a||1);t.animatingX=!!s,t.animatingY=!!l,O(t,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),O(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),O(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){O(t,"transition",""),O(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}))}function zt(t,e,i,n,o,r,a,s){var l,c,p=t[Y],d=p.options.onMove;return!window.CustomEvent||v||m?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=o||e,l.relatedRect=r||N(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),d&&(c=d.call(p,l,a)),c}function Gt(t){t.draggable=!1}function Yt(){Tt=!1}function Vt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function Ut(t){return setTimeout(t,0)}function qt(t){return clearTimeout(t)}Xt.prototype={constructor:Xt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(wt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Z):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,o=n.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=n.filter;if(function(t){Ot.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var n=e[i];n.checked&&Ot.push(n)}}(i),!Z&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!y||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=C(s,n.draggable,i,!1))&&s.animated||ot===s)){if(st=$(s),ct=$(s,n.draggable),"function"==typeof c){if(c.call(this,t,s,this))return Q({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),J("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=C(l,n.trim(),i,!1))return Q({sortable:e,rootEl:n,name:"filter",targetEl:s,fromEl:i,toEl:i}),J("filter",e,{evt:t}),!0}))))return void(o&&t.cancelable&&t.preventDefault());n.handle&&!C(l,n.handle,i,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,i){var n,o=this,r=o.el,a=o.options,s=r.ownerDocument;if(i&&!Z&&i.parentNode===r){var l=N(i);if(it=r,tt=(Z=i).parentNode,nt=Z.nextSibling,ot=i,dt=a.group,Xt.dragged=Z,ht={target:Z,clientX:(e||t).clientX,clientY:(e||t).clientY},mt=ht.clientX-l.left,bt=ht.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Z.style["will-change"]="all",n=function(){J("delayEnded",o,{evt:t}),Xt.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!b&&o.nativeDraggable&&(Z.draggable=!0),o._triggerDragStart(t,e),Q({sortable:o,name:"choose",originalEvent:t}),T(Z,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){M(Z,t.trim(),Gt)})),x(s,"dragover",Wt),x(s,"mousemove",Wt),x(s,"touchmove",Wt),x(s,"mouseup",o._onDrop),x(s,"touchend",o._onDrop),x(s,"touchcancel",o._onDrop),b&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Z.draggable=!0),J("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(m||v))n();else{if(Xt.eventCanceled)return void this._onDrop();x(s,"mouseup",o._disableDelayedDrag),x(s,"touchend",o._disableDelayedDrag),x(s,"touchcancel",o._disableDelayedDrag),x(s,"mousemove",o._delayedDragTouchMoveHandler),x(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&x(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Z&&Gt(Z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;I(t,"mouseup",this._disableDelayedDrag),I(t,"touchend",this._disableDelayedDrag),I(t,"touchcancel",this._disableDelayedDrag),I(t,"mousemove",this._delayedDragTouchMoveHandler),I(t,"touchmove",this._delayedDragTouchMoveHandler),I(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):x(document,e?"touchmove":"mousemove",this._onTouchMove):(x(Z,"dragend",this),x(it,"dragstart",this._onDragStart));try{document.selection?Ut((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(It=!1,it&&Z){J("dragStarted",this,{evt:e}),this.nativeDraggable&&x(document,"dragover",Ht);var i=this.options;!t&&T(Z,i.dragClass,!1),T(Z,i.ghostClass,!0),Xt.active=this,t&&this._appendGhost(),Q({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(gt){this._lastX=gt.clientX,this._lastY=gt.clientY,$t();for(var t=document.elementFromPoint(gt.clientX,gt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(gt.clientX,gt.clientY))!==e;)e=t;if(Z.parentNode[Y]._isOutsideThisEl(t),e)do{if(e[Y]&&e[Y]._onDragOver({clientX:gt.clientX,clientY:gt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Bt()}},_onTouchMove:function(t){if(ht){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=et&&_(et,!0),a=et&&r&&r.a,s=et&&r&&r.d,l=Mt&&xt&&B(xt),c=(o.clientX-ht.clientX+n.x)/(a||1)+(l?l[0]-Pt[0]:0)/(a||1),p=(o.clientY-ht.clientY+n.y)/(s||1)+(l?l[1]-Pt[1]:0)/(s||1);if(!Xt.active&&!It){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(et){r?(r.e+=c-(ft||0),r.f+=p-(vt||0)):r={a:1,b:0,c:0,d:1,e:c,f:p};var d="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");O(et,"webkitTransform",d),O(et,"mozTransform",d),O(et,"msTransform",d),O(et,"transform",d),ft=c,vt=p,gt=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!et){var t=this.options.fallbackOnBody?document.body:it,e=N(Z,!0,Mt,!0,t),i=this.options;if(Mt){for(xt=t;"static"===O(xt,"position")&&"none"===O(xt,"transform")&&xt!==document;)xt=xt.parentNode;xt!==document.body&&xt!==document.documentElement?(xt===document&&(xt=L()),e.top+=xt.scrollTop,e.left+=xt.scrollLeft):xt=L(),Pt=B(xt)}T(et=Z.cloneNode(!0),i.ghostClass,!1),T(et,i.fallbackClass,!0),T(et,i.dragClass,!0),O(et,"transition",""),O(et,"transform",""),O(et,"box-sizing","border-box"),O(et,"margin",0),O(et,"top",e.top),O(et,"left",e.left),O(et,"width",e.width),O(et,"height",e.height),O(et,"opacity","0.8"),O(et,"position",Mt?"absolute":"fixed"),O(et,"zIndex","100000"),O(et,"pointerEvents","none"),Xt.ghost=et,t.appendChild(et),O(et,"transform-origin",mt/parseInt(et.style.width)*100+"% "+bt/parseInt(et.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,o=i.options;J("dragStart",this,{evt:t}),Xt.eventCanceled?this._onDrop():(J("setupClone",this),Xt.eventCanceled||((rt=G(Z)).removeAttribute("id"),rt.draggable=!1,rt.style["will-change"]="",this._hideClone(),T(rt,this.options.chosenClass,!1),Xt.clone=rt),i.cloneId=Ut((function(){J("clone",i),Xt.eventCanceled||(i.options.removeCloneOnHide||it.insertBefore(rt,Z),i._hideClone(),Q({sortable:i,name:"clone"}))})),!e&&T(Z,o.dragClass,!0),e?(Et=!0,i._loopId=setInterval(i._emulateDragOver,50)):(I(document,"mouseup",i._onDrop),I(document,"touchend",i._onDrop),I(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(i,n,Z)),x(document,"drop",i),O(Z,"transform","translateZ(0)")),It=!0,i._dragStartId=Ut(i._dragStarted.bind(i,e,t)),x(document,"selectstart",i),yt=!0,y&&O(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,o,r=this.el,a=t.target,s=this.options,l=s.group,c=Xt.active,p=dt===l,u=s.sort,h=ut||c,g=this,f=!1;if(!Tt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=C(a,s.draggable,r,!0),M("dragOver"),Xt.eventCanceled)return f;if(Z.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||g._ignoreWhileAnimating===a)return B(!1);if(Et=!1,c&&!s.disabled&&(p?u||(n=tt!==it):ut===this||(this.lastPutMode=dt.checkPull(this,c,Z,t))&&l.checkPut(this,c,Z,t))){if(o="vertical"===this._getDirection(t,a),e=N(Z),M("dragOverValid"),Xt.eventCanceled)return f;if(n)return tt=it,L(),this._hideClone(),M("revert"),Xt.eventCanceled||(nt?it.insertBefore(Z,nt):it.appendChild(Z)),B(!0);var v=j(r,s.draggable);if(!v||function(t,e,i){var n=N(j(i.el,i.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(t,o,this)&&!v.animated){if(v===Z)return B(!1);if(v&&r===t.target&&(a=v),a&&(i=N(a)),!1!==zt(it,r,Z,e,a,i,t,!!a))return L(),v&&v.nextSibling?r.insertBefore(Z,v.nextSibling):r.appendChild(Z),tt=r,W(),B(!0)}else if(v&&function(t,e,i){var n=N(R(i.el,0,i.options,!0));return e?t.clientX<n.left-10||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-10||t.clientY<n.bottom&&t.clientX<n.left}(t,o,this)){var m=R(r,0,s,!0);if(m===Z)return B(!1);if(i=N(a=m),!1!==zt(it,r,Z,e,a,i,t,!1))return L(),r.insertBefore(Z,m),tt=r,W(),B(!0)}else if(a.parentNode===r){i=N(a);var b,y,w,A=Z.parentNode!==r,S=!function(t,e,i){var n=i?t.left:t.top,o=i?t.right:t.bottom,r=i?t.width:t.height,a=i?e.left:e.top,s=i?e.right:e.bottom,l=i?e.width:e.height;return n===a||o===s||n+r/2===a+l/2}(Z.animated&&Z.toRect||e,a.animated&&a.toRect||i,o),x=o?"top":"left",I=F(a,"top","top")||F(Z,"top","top"),E=I?I.scrollTop:void 0;if(wt!==a&&(y=i[x],Ct=!1,kt=!S&&s.invertSwap||A),b=function(t,e,i,n,o,r,a,s){var l=n?t.clientY:t.clientX,c=n?i.height:i.width,p=n?i.top:i.left,d=n?i.bottom:i.right,u=!1;if(!a)if(s&&St<c*o){if(!Ct&&(1===At?l>p+c*r/2:l<d-c*r/2)&&(Ct=!0),Ct)u=!0;else if(1===At?l<p+St:l>d-St)return-At}else if(l>p+c*(1-o)/2&&l<d-c*(1-o)/2)return function(t){return $(Z)<$(t)?1:-1}(e);return(u=u||a)&&(l<p+c*r/2||l>d-c*r/2)?l>p+c/2?1:-1:0}(t,a,i,o,S?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,kt,wt===a),0!==b){var D=$(Z);do{D-=b,w=tt.children[D]}while(w&&("none"===O(w,"display")||w===et))}if(0===b||w===a)return B(!1);wt=a,At=b;var k=a.nextElementSibling,P=!1,_=zt(it,r,Z,e,a,i,t,P=1===b);if(!1!==_)return 1!==_&&-1!==_||(P=1===_),Tt=!0,setTimeout(Yt,30),L(),P&&!k?r.appendChild(Z):a.parentNode.insertBefore(Z,P?k:a),I&&z(I,0,E-I.scrollTop),tt=Z.parentNode,void 0===y||kt||(St=Math.abs(y-N(a)[x])),W(),B(!0)}if(r.contains(Z))return B(!1)}return!1}function M(s,l){J(s,g,d({evt:t,isOwner:p,axis:o?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:u,fromSortable:h,target:a,completed:B,onMove:function(i,n){return zt(it,r,Z,e,i,N(i),t,n)},changed:W},l))}function L(){M("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function B(e){return M("dragOverCompleted",{insertion:e}),e&&(p?c._hideClone():c._showClone(g),g!==h&&(T(Z,ut?ut.options.ghostClass:c.options.ghostClass,!1),T(Z,s.ghostClass,!0)),ut!==g&&g!==Xt.active?ut=g:g===Xt.active&&ut&&(ut=null),h===g&&(g._ignoreWhileAnimating=a),g.animateAll((function(){M("dragOverAnimationComplete"),g._ignoreWhileAnimating=null})),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(a===Z&&!Z.animated||a===r&&!a.animated)&&(wt=null),s.dragoverBubble||t.rootEl||a===document||(Z.parentNode[Y]._isOutsideThisEl(t.target),!e&&Wt(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function W(){lt=$(Z),pt=$(Z,s.draggable),Q({sortable:g,name:"change",toEl:r,newIndex:lt,newDraggableIndex:pt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove),I(document,"touchmove",this._onTouchMove),I(document,"pointermove",this._onTouchMove),I(document,"dragover",Wt),I(document,"mousemove",Wt),I(document,"touchmove",Wt)},_offUpEvents:function(){var t=this.el.ownerDocument;I(t,"mouseup",this._onDrop),I(t,"touchend",this._onDrop),I(t,"pointerup",this._onDrop),I(t,"touchcancel",this._onDrop),I(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;lt=$(Z),pt=$(Z,i.draggable),J("drop",this,{evt:t}),tt=Z&&Z.parentNode,lt=$(Z),pt=$(Z,i.draggable),Xt.eventCanceled||(It=!1,kt=!1,Ct=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),qt(this.cloneId),qt(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y&&O(document.body,"user-select",""),O(Z,"transform",""),t&&(yt&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),et&&et.parentNode&&et.parentNode.removeChild(et),(it===tt||ut&&"clone"!==ut.lastPutMode)&&rt&&rt.parentNode&&rt.parentNode.removeChild(rt),Z&&(this.nativeDraggable&&I(Z,"dragend",this),Gt(Z),Z.style["will-change"]="",yt&&!It&&T(Z,ut?ut.options.ghostClass:this.options.ghostClass,!1),T(Z,this.options.chosenClass,!1),Q({sortable:this,name:"unchoose",toEl:tt,newIndex:null,newDraggableIndex:null,originalEvent:t}),it!==tt?(lt>=0&&(Q({rootEl:tt,name:"add",toEl:tt,fromEl:it,originalEvent:t}),Q({sortable:this,name:"remove",toEl:tt,originalEvent:t}),Q({rootEl:tt,name:"sort",toEl:tt,fromEl:it,originalEvent:t}),Q({sortable:this,name:"sort",toEl:tt,originalEvent:t})),ut&&ut.save()):lt!==st&&lt>=0&&(Q({sortable:this,name:"update",toEl:tt,originalEvent:t}),Q({sortable:this,name:"sort",toEl:tt,originalEvent:t})),Xt.active&&(null!=lt&&-1!==lt||(lt=st,pt=ct),Q({sortable:this,name:"end",toEl:tt,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){J("nulling",this),it=Z=tt=et=nt=rt=ot=at=ht=gt=yt=lt=pt=st=ct=wt=At=ut=dt=Xt.dragged=Xt.ghost=Xt.clone=Xt.active=null,Ot.forEach((function(t){t.checked=!0})),Ot.length=ft=vt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Z&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,o=i.length,r=this.options;n<o;n++)C(t=i[n],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||Vt(t));return e},sort:function(t,e){var i={},n=this.el;this.toArray().forEach((function(t,e){var o=n.children[e];C(o,this.options.draggable,n,!1)&&(i[t]=o)}),this),e&&this.captureAnimationState(),t.forEach((function(t){i[t]&&(n.removeChild(i[t]),n.appendChild(i[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return C(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=q.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&jt(i)},destroy:function(){J("destroy",this);var t=this.el;t[Y]=null,I(t,"mousedown",this._onTapStart),I(t,"touchstart",this._onTapStart),I(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(I(t,"dragover",this),I(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Dt.splice(Dt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!at){if(J("hideClone",this),Xt.eventCanceled)return;O(rt,"display","none"),this.options.removeCloneOnHide&&rt.parentNode&&rt.parentNode.removeChild(rt),at=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(at){if(J("showClone",this),Xt.eventCanceled)return;Z.parentNode!=it||this.options.group.revertClone?nt?it.insertBefore(rt,nt):it.appendChild(rt):it.insertBefore(rt,Z),this.options.group.revertClone&&this.animate(Z,rt),O(rt,"display",""),at=!1}}else this._hideClone()}},_t&&x(document,"touchmove",(function(t){(Xt.active||It)&&t.cancelable&&t.preventDefault()})),Xt.utils={on:x,off:I,css:O,find:M,is:function(t,e){return!!C(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:X,closest:C,toggleClass:T,clone:G,index:$,nextTick:Ut,cancelNextTick:qt,detectDirection:Rt,getChild:R},Xt.get=function(t){return t[Y]},Xt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Xt.utils=d(d({},Xt.utils),t.utils)),q.mount(t)}))},Xt.create=function(t,e){return new Xt(t,e)},Xt.version="1.15.0";var Kt,Jt,Qt,Zt,te,ee,ie=[],ne=!1;function oe(){ie.forEach((function(t){clearInterval(t.pid)})),ie=[]}function re(){clearInterval(ee)}var ae=X((function(t,e,i,n){if(e.scroll){var o,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,c=L(),p=!1;Jt!==i&&(Jt=i,oe(),Kt=e.scroll,o=e.scrollFn,!0===Kt&&(Kt=W(i,!0)));var d=0,u=Kt;do{var h=u,g=N(h),f=g.top,v=g.bottom,m=g.left,b=g.right,y=g.width,w=g.height,A=void 0,S=void 0,x=h.scrollWidth,I=h.scrollHeight,E=O(h),D=h.scrollLeft,C=h.scrollTop;h===c?(A=y<x&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),S=w<I&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(A=y<x&&("auto"===E.overflowX||"scroll"===E.overflowX),S=w<I&&("auto"===E.overflowY||"scroll"===E.overflowY));var k=A&&(Math.abs(b-r)<=s&&D+y<x)-(Math.abs(m-r)<=s&&!!D),P=S&&(Math.abs(v-a)<=s&&C+w<I)-(Math.abs(f-a)<=s&&!!C);if(!ie[d])for(var T=0;T<=d;T++)ie[T]||(ie[T]={});ie[d].vx==k&&ie[d].vy==P&&ie[d].el===h||(ie[d].el=h,ie[d].vx=k,ie[d].vy=P,clearInterval(ie[d].pid),0==k&&0==P||(p=!0,ie[d].pid=setInterval(function(){n&&0===this.layer&&Xt.active._onTouchMove(te);var e=ie[this.layer].vy?ie[this.layer].vy*l:0,i=ie[this.layer].vx?ie[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(Xt.dragged.parentNode[Y],i,e,t,te,ie[this.layer].el)||z(ie[this.layer].el,i,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&u!==c&&(u=W(u,!1)));ne=p}}),30),se=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=i||o;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(p)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function le(){}function ce(){}le.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=R(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:se},g(le,{pluginName:"revertOnSpill"}),ce.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:se},g(ce,{pluginName:"removeOnSpill"}),Xt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):e.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll)),re(),oe(),clearTimeout(k),k=void 0},nulling:function(){te=Jt=Kt=ne=ee=Qt=Zt=null,ie.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(n,o);if(te=t,e||this.options.forceAutoScrollFallback||m||v||y){ae(t,this.options,r,e);var a=W(r,!0);!ne||ee&&n===Qt&&o===Zt||(ee&&re(),ee=setInterval((function(){var r=W(document.elementFromPoint(n,o),!0);r!==a&&(a=r,oe()),ae(t,i.options,r,e)}),10),Qt=n,Zt=o)}else{if(!this.options.bubbleScroll||W(r,!0)===L())return void oe();ae(t,this.options,W(r,!1),!1)}}},g(t,{pluginName:"scroll",initializeByDefault:!0})}),Xt.mount(ce,le);const pe={};function de(t){var e;return(null===(e=pe[t.toLowerCase()])||void 0===e?void 0:e.valid)||!1}function ue(t,e,i){return!e.isPortal||i.indexOf(t)>-1}const he=class{constructor(t){(0,n.r)(this,t),this.arcgisAppSwitcherToggle=(0,n.c)(this,"arcgisAppSwitcherToggle",7),this.willQueryForItems=!0,this.blockedApps=[],this.showInAppLauncher=[],this.servers=[],this.orgCapabilities=[],this.updateAppsProperties=async()=>{const t=this.getIdsFromDOM(this.primaryContainer),e=this.getAppsByIds(t),i=this.convertToAppData(e),n=this.getIdsFromDOM(this.secondaryContainer),o=this.getAppsByIds(n),r=this.convertToAppData(o),s=Object.assign({},this.userProperties);s.appLauncher={primary:i,secondary:r},await(0,a.u)(s),this.userProperties=s;const l=this.secondaryApps.length;this.primaryApps=e,this.secondaryApps=o,l>0&&!this.secondaryApps.length&&(this.hoveringOverSecondary=!1)},this.handleToggle=()=>{this.isExpanded=!this.isExpanded,this.arcgisAppSwitcherToggle.emit(this.isExpanded)},this.handleShowMore=()=>{this.secondaryExpanded=!0},this.handleDismissIntro=()=>{this.updateAppsProperties(),this.displayIntro=!1},this.keydownHandler=t=>{var e;"Escape"===t.key&&this.isExpanded&&(this.handleToggle(),null===(e=this.toggleButton)||void 0===e||e.focus())},this.api=void 0,this.portal=void 0,this.user=void 0,this.newMapViewerEnabled=!0,this.notebookServerEnabled=!0,this.trackViewerEnabled=!0,this.shouldExpand=!1,this.displayIntro=!1,this.primaryApps=[],this.secondaryApps=[],this.isExpanded=!1,this.hoveringOverSecondary=!1,this.secondaryExpanded=!1,this.sorting=!1,this.focusItemId=void 0,this.dragging=!1}handleLinkClick(){this.isExpanded=!1,this.arcgisAppSwitcherToggle.emit(this.isExpanded)}handleLinkActivated(){this.secondaryExpanded=!0}async handleLinkMove(t){const{uid:e,keyCode:i,index:n}=t.detail;this.focusItemId=e;const o=this.primaryApps.length,r=this.secondaryApps.length,s=n<o;let l;l=s?n<3*Math.ceil(o/3)-3||"ArrowLeft"===i||"ArrowUp"===i||"ArrowRight"===i&&n<o-1:!(n>=o+3||"ArrowRight"===i||"ArrowDown"===i||"ArrowLeft"===i&&n>o);let c,p=-1;if(s&&l||!s&&!l?"ArrowUp"===i?p=n-3:"ArrowRight"===i?p=n+1:"ArrowDown"===i?p=n+3:"ArrowLeft"===i&&(p=n-1):s?"ArrowRight"===i?p=o:"ArrowDown"===i&&(p=n%3+o):p=o,c=s?this.primaryApps.splice(n,1)[0]:this.secondaryApps.splice(n-o,1)[0],l)this.primaryApps.splice(p,0,c);else{const t=p-o;this.secondaryApps.splice(t,0,c)}const d=this.convertToAppData(this.primaryApps),u=this.convertToAppData(this.secondaryApps),h=Object.assign({},this.userProperties);h.appLauncher={primary:d,secondary:u},await(0,a.u)(h),this.userProperties=h,r>0&&!this.secondaryApps.length&&(this.hoveringOverSecondary=!1),window.setTimeout((()=>{this.focusItemId=""}),100)}async handleLinkRemove(t){const e=t.detail,i=Object.assign({},this.userProperties);let{primary:n,secondary:o}=i.appLauncher;n=n.filter((t=>t.uid!==e)),o=o.filter((t=>t.uid!==e)),i.appLauncher={primary:n,secondary:o},await(0,a.u)(i),this.userProperties=i,this.primaryApps=this.primaryApps.filter((t=>(t.itemId||t.title)!==e)),this.secondaryApps=this.secondaryApps.filter((t=>(t.itemId||t.title)!==e))}handleShouldExpandChange(t){this.isExpanded=t}componentDidLoad(){[/Android/i,/webOS/i,/iPhone/i,/iPad/i].some((t=>navigator.userAgent.match(t)))||(Xt.create(this.primaryContainer,{animation:150,group:"apps",filter:".secondary-drag-text",dragClass:"app-item--dragging",onUpdate:this.updateAppsProperties,onAdd:this.updateAppsProperties,onMove:t=>{this.hoveringOverSecondary="secondary-target"===t.to.className},onStart:()=>{this.dragging=!0},onEnd:()=>{this.dragging=!1}}),Xt.create(this.secondaryContainer,{animation:150,group:"apps",filter:".secondary-drag-text",dragClass:"app-item--dragging",onUpdate:this.updateAppsProperties,onAdd:this.updateAppsProperties}))}componentDidRender(){this.primaryContainer.contains(this.secondaryDragText)&&this.secondaryContainer.appendChild(this.secondaryDragText)}async componentWillLoad(){var t,e;const i=await(0,o.g)(this.el);if(this.strings=i[0],this.willQueryForItems=function(){const t=(0,l.a)("APSW-query",!0);if((null==t?void 0:t.expires)>(new Date).setHours((new Date).getHours()))return!0;const e={expires:(new Date).setHours((new Date).getHours()+5)};return(0,l.b)("APSW-query",e,{path:"/",domain:document.domain,sameSite:"Strict"},!0),!1}(),this.initializeConfig(),!(null===(t=r.c.portal)||void 0===t?void 0:t.id)||!r.c.user)return;r.c.portal.isPortal&&(this.showInAppLauncher=await(0,a.g)());const[n,s,c,p,d]=await Promise.all([(0,a.a)(),(0,a.b)(),(0,a.c)(),(0,a.d)(),(0,a.e)()]);this.orgCapabilities=d,this.userProperties=(null==c?void 0:c.properties)||{},this.userApps=null==n?void 0:n.appSwitcher,r.c.portal.isPortal||this.userApps.apps.unshift(this.getAgoApp()),this.approvedApps=(null===(e=p.approvedApps)||void 0===e?void 0:e.filter((t=>!t.hideForNonPrivilegedMember)))||[],this.userProperties.appLauncher||(this.willQueryForItems=!1,this.displayIntro=!0),this.provisionedListings=s||[],this.provisionedListings.forEach((t=>{var e;const i=null===(e=t.clientId)||void 0===e?void 0:e.toLowerCase();i&&(pe[i]={valid:!0,itemId:t.itemId,clientId:t.clientId})})),null==d||d.forEach((t=>{var e;const i=null===(e=t.id)||void 0===e?void 0:e.toLowerCase();i&&(pe[i]={valid:!0,clientId:t.id})})),await this.init(),this.primaryApps.forEach((t=>{t.fontSize=this.calcFontSize(t)}))}convertToAppData(t){return t.map((t=>({label:t.label,uid:t.itemId||t.title})))}getAppsByIds(t){const e=[...this.primaryApps,...this.secondaryApps];return t.map((t=>e.find((e=>e.itemId===t||e.title===t))))}getIdsFromDOM(t){const e=[];return t.querySelectorAll(".app-item").forEach((t=>{e.push(t.dataset.id)})),e}getTextWidth(t){const e=document.createElement("canvas").getContext("2d");return e.font="avenir",e.measureText(t).width}calcFontSize(t){if(!t.abbr)return;const e=[0,32,24,20,18,16,14,12,10,8,6];let i=Math.ceil(this.getTextWidth(t.abbr)/5);return i>e.length-1&&(i=e.length-1),`${e[i]}px`}async getBlockedApps(){const[t,e]=await Promise.all([(0,a.f)(),(0,a.h)()]),i=(null==t?void 0:t.blockedApps)||[];return(i.length||t.blockBetaApps)&&(null==e?void 0:e.length)?(t.blockBetaApps&&e.forEach((t=>{t.isBeta&&!i.includes(t.clientid)&&i.push(t.clientid)})),i.forEach((t=>{const i=e.find((e=>e.clientid===t));i&&this.blockedApps.push(i)})),this.blockedApps):[]}filterBlockedApps(t){return t.filter((t=>{var e;return!(null===(e=this.blockedApps)||void 0===e?void 0:e.some((e=>t.itemId&&t.itemId===e.itemid||t.title&&t.title===e.title)))}))}populateAppIdentifiers(t,e){let i=Object.keys(this.appDictionary).map((t=>this.appDictionary[t])).filter((t=>t.itemId===e.uid||t.title===e.uid)).shift();return i&&!this.appDictionary[e.uid]&&(e.uid=i.itemId||i.title),(null==i?void 0:i.hasBeenPopulated)||(i?((e.hasChanged||i.hasChanged||!i.canAccess&&!i.ignoreNoAccess)&&this.isAdmin()&&(this.appDictionary[e.uid].hasChanged=!0,this.appDictionary[e.uid].ignoreNoAccess=e.ignoreNoAccess),e.isNew&&(this.appDictionary[e.uid].isNew=!0),delete this.newAppDictionary[e.uid]):(i=e,i.canAccess=!1,i.itemId=e.uid,this.appDictionary[e.uid]=i),this.appDictionary[e.uid].hasBeenPopulated=!0,t.push(i)),t}isInPortalConfig(t){const{portal:e}=r.c;return ue(t,e,this.showInAppLauncher)}getAppExceptions(){const{portal:t,user:e}=r.c;return{"Open Data":{hasAccess:()=>function(t){return!!(!(null==t?void 0:t.portalProperties)||t.portalProperties.openData&&t.portalProperties.openData.enabled)&&de("HubforArcGIS")}(t)},AppStudio:{hasAccess:()=>de("arcgisWebApps")},"ArcGIS Velocity":{hasAccess:()=>function(t){const e=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],i=((null==t?void 0:t.privileges)||[]).some((t=>e.indexOf(t)>-1)),n=de("velocity");return i&&n}(e)},"ArcGIS Hub":{hasAccess:()=>de("HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:e=>function(t,e,i){return ue(e,t,i)&&de("HubforArcGIS")}(t,e,this.showInAppLauncher)},"ArcGIS Experience Builder":{hasAccess:t=>this.isInPortalConfig(t)},"ArcGIS StoryMaps":{hasAccess:t=>this.isInPortalConfig(t)},"ArcGIS QuickCapture Web Designer":{hasAccess:t=>this.isInPortalConfig(t)&&de("arcgisWebApps")},"ArcGIS Collector":{hasAccess:t=>this.isInPortalConfig(t)},"ArcGIS Field Maps":{hasAccess:t=>this.isInPortalConfig(t)},"ArcGIS Dashboards":{hasAccess:t=>this.isInPortalConfig(t)&&de("dashboards")},"ArcGIS Solutions":{hasAccess:t=>this.isInPortalConfig(t)},"ArcGIS Workforce":{hasAccess:t=>this.isInPortalConfig(t)},"Deep Learning Studio":{hasAccess:t=>this.isInPortalConfig(t)},"Map Viewer":{hasAccess:()=>function(t,e){var i;const n=t.isPortal&&!1===(null===(i=t.portalProperties)||void 0===i?void 0:i.newMapViewerEnabled);return e&&!n&&de("arcgisWebApps")}(t,this.newMapViewerEnabled)&&this.isInPortalConfig("ArcGIS Map Viewer")},"Map Viewer Classic":{hasAccess:()=>de("arcgisWebApps")&&this.isInPortalConfig("ArcGIS Map Viewer Classic")},"Operations Dashboard for ArcGIS":{hasAccess:()=>de("opsdashboard")&&this.isInPortalConfig("ArcGIS Dashboards Classic")},"ArcGIS Dashboards Classic":{hasAccess:t=>de("opsdashboard")&&this.isInPortalConfig(t)},"Ortho Maker":{hasAccess:()=>function(t,e){var i;return!!(null===(i=t.helperServices)||void 0===i?void 0:i.rasterAnalytics)&&!!t.helperServices.orthoMapping&&ue("Ortho Maker",t,e)}(t,this.showInAppLauncher)},Notebook:{hasAccess:i=>function(t,e,i,n,o){var r;const a=o&&(!e.isPortal||e.supportsHostedNotebooks),s=!!(null===(r=null==i?void 0:i.privileges)||void 0===r?void 0:r.length)&&i.privileges.some((t=>"premium:publisher:createNotebooks"===t));return a&&s&&ue(t,e,n)}(i,t,e,this.showInAppLauncher,this.notebookServerEnabled)},"Scene Viewer":{hasAccess:t=>de("arcgisWebApps")&&this.isInPortalConfig(t)},"Story Maps":{hasAccess:()=>de("arcgisWebApps")},Survey123:{hasAccess:()=>de("survey123")},"Track Viewer":{hasAccess:()=>function(t,e,i){var n;return!!(null===(n=t.helperServices)||void 0===n?void 0:n.locationTracking)&&i&&ue("Track Viewer",t,e)}(t,this.showInAppLauncher,this.trackViewerEnabled)},"Instant Apps":{hasAccess:t=>de("arcgisWebApps")&&this.isInPortalConfig(t)},"Vector Tile Style Editor":{hasAccess:t=>this.isInPortalConfig(t)},"ArcGIS GeoBIM":{hasAccess:t=>this.isInPortalConfig(t)},"ArcGIS Maps for Adobe Creative Cloud":{hasAccess:()=>de("arcgisWebApps")&&!r.c.portal.isPortal}}}getExcludedProvisionedListings(){let t={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1,mapsForCreativeCloud:1};const{portal:e}=r.c;return e.isPortal&&(t=Object.assign(Object.assign({},t),{arcgisonline:1,arcgisUrban:1,arcgisinstantapps:1})),t}getImagePath(t){return(0,n.a)(`./assets/${(null==t?void 0:t.image)?t.image:""}`)}modifyWebAppForView(t){var e,i;return(null===(e=t.appSwitcher)||void 0===e?void 0:e.image)||t.icon?t.image=this.getWebMappingAppImgPath(t):t.placeHolderIcon=`${this.getImagePath()}svg-app-circle.svg`,t.abbr=(null===(i=t.appSwitcher)||void 0===i?void 0:i.abbr)||t.abbreviation,delete t.abbreviation,delete t.appSwitcher,delete t.approvedApp,delete t.webMappingApp,t}modifySystemAppForView(t,e){var i;const{portal:n}=r.c;if(t.image?t.image=this.getImagePath(t):t.placeHolderIcon=`${this.getImagePath()}svg-app-icon.svg`,0===(null===(i=t.url)||void 0===i?void 0:i.indexOf("../"))){const e=n.urlKey?`${n.urlKey}.${n.customBaseUrl}`:n.portalHostname;t.url=`${location.protocol}//${e}${t.url.substring(2,t.url.length)}`}return delete t.isLicensed,delete t.privileges,t.itemId=e,t}getWebMappingAppImgPath(t){const{portal:e}=r.c,i=(0,s.h)(e);return t.icon?`${(0,s.g)()}portals/self/resources/${t.icon}?token=${i}`:`${(0,s.g)()}content/items/${t.itemId}/resources/${t.appSwitcher.image}?token=${i}`}modifyPartnerAppForView(t){var e,i,n;t.appSwitcher=null===(e=t.properties)||void 0===e?void 0:e.appSwitcher;const o=(null===(i=t.appSwitcher)||void 0===i?void 0:i.image)||t.icon;return{abbr:(null===(n=t.appSwitcher)||void 0===n?void 0:n.abbr)||t.abbreviation,itemId:t.itemId,canAccess:!0,webMappingApp:!0,image:o?this.getWebMappingAppImgPath(t):null,label:t.title||t.label,url:t.url,placeHolderIcon:t.placeHolderIcon||`${this.getImagePath()}svg-app-circle.svg`}}async getLicensedApps(){var t,e,i,n,o,a,s,l;const{portal:c,user:p}=r.c,d={},u={},h=this.getAppExceptions(),g=this.getExcludedProvisionedListings(),f=[],v=this.userApps.apps.length;for(let r=0;r<v;r++){const g=this.userApps.apps[r],v=g.itemId||g.title;let m=!0;const b=null===(t=this.blockedApps)||void 0===t?void 0:t.some((t=>g.itemId&&g.itemId===t.itemid||g.title&&g.title===t.title));if(d[v]=1,u[v]=g,b)continue;if("ArcGISEnterpriseOnKubernetes"===(c.portalDeploymentType||(null===(e=c.sourceJSON)||void 0===e?void 0:e.portalDeploymentType))&&!1===g.supportsKubernetes)continue;if(h[g.title]&&!h[g.title].hasAccess(g.title))continue;const y=c.subscriptionInfo||(null===(i=c.sourceJSON)||void 0===i?void 0:i.subscriptionInfo);if(g.subscriptionType)(null==y?void 0:y.type)===g.subscriptionType&&(u[v].canAccess=!0,f.push(this.modifySystemAppForView(g,v)));else if(g.orgCapabilities)(null===(n=this.orgCapabilities)||void 0===n?void 0:n.length)&&this.orgCapabilities.some((t=>g.orgCapabilities.includes(t.id)))&&(u[v].canAccess=!0,f.push(this.modifySystemAppForView(g,v)));else if((null===(o=g.privileges)||void 0===o?void 0:o.length)||g.isLicensed||g.serverFunction)if("storytellerut"===(null===(a=null==p?void 0:p.userLicenseTypeId)||void 0===a?void 0:a.toLowerCase())&&"storymaps"===(null===(s=g.label)||void 0===s?void 0:s.toLowerCase()))u[v].canAccess=!0,f.push(this.modifySystemAppForView(g,v));else{if((null===(l=g.privileges)||void 0===l?void 0:l.length)>0&&(null==p?void 0:p.privileges)){for(let t=0;t<g.privileges.length;t++)if(p.privileges.indexOf(g.privileges[t])<0){m=!1;break}if(!g.isLicensed&&m){u[v].canAccess=!0,f.push(this.modifySystemAppForView(g,v));continue}}if(g.isLicensed&&m)for(let t=0;t<this.provisionedListings.length;t++)if(v===this.provisionedListings[t].itemId||v===this.provisionedListings[t].title){u[v].canAccess=!0,f.push(this.modifySystemAppForView(g,v));break}g.serverFunction&&m&&this.servers.some((t=>{var e;return((null===(e=t.serverFunction)||void 0===e?void 0:e.split(","))||[]).includes(g.serverFunction)}))&&(u[v].canAccess=!0,f.push(this.modifySystemAppForView(g,v)))}else u[v].canAccess=!0,f.push(this.modifySystemAppForView(g,v))}return this.provisionedListings.forEach((t=>{if("Web Mapping Application"===t.type&&!g[t.clientId]&&!d[t.itemId]&&t.url&&t.title&&!d[t.title]&&t.typeKeywords.indexOf("hideFromAppSwitcher")<0){const e=this.modifyPartnerAppForView(t);u[t.itemId]=e,f.push(e)}})),{apps:[...this.approvedApps.map((t=>{const e=Object.assign(Object.assign({},t.appProperties),{itemId:t.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!this.willQueryForItems});return u[t.itemId]=e,this.modifyWebAppForView(e)})),...f],appDictionary:u}}isAdmin(){const{user:t}=r.c;return!!t&&("org_admin"===t.role||"account_admin"===t.role)}mapAppTitles(t){const{portal:e}=r.c;t.forEach((t=>{"Map Viewer Beta"===t.uid&&(t.uid="Map Viewer"),e.isPortal&&("Operations Dashboard for ArcGIS"===t.uid?t.uid="ArcGIS Dashboards Classic":"Workforce for ArcGIS"===t.uid&&(t.uid="ArcGIS Workforce"))}))}async init(){var t;r.c.portal.isPortal&&(this.servers=await(0,a.i)()),await this.getBlockedApps();const{apps:e,appDictionary:i}=await this.getLicensedApps();if(this.appDictionary=i,this.userProperties.appLauncher&&(this.userProperties.appLauncher.primary&&this.mapAppTitles(this.userProperties.appLauncher.primary),this.userProperties.appLauncher.secondary&&this.mapAppTitles(this.userProperties.appLauncher.secondary)),!(this.userProperties.appLauncher&&this.userProperties.appLauncher.primary&&this.userProperties.appLauncher.secondary))return this.primaryApps=e.slice().sort(((t,e)=>t.label<e.label?-1:1)),this.primaryApps=this.filterBlockedApps(this.primaryApps),void(this.secondaryApps=[]);{const e=await(0,a.q)(this.approvedApps,this.willQueryForItems);(null===(t=null==e?void 0:e.results)||void 0===t?void 0:t.length)>0&&e.results.forEach((t=>{const e=this.appDictionary[t.id];e.canAccess=!0,e.hasChanged=e.url!==t.url&&!!t.url})),this.newAppDictionary=Object.assign({},this.appDictionary),this.userProperties.appLauncher.primary.forEach((t=>{"Map Viewer"===t.label&&(t.uid="Map Viewer")})),this.primaryApps=this.userProperties.appLauncher.primary.reduce(this.populateAppIdentifiers.bind(this),[])||[],this.secondaryApps=this.userProperties.appLauncher.secondary.reduce(this.populateAppIdentifiers.bind(this),[])||[],this.primaryApps=this.filterBlockedApps(this.primaryApps),this.secondaryApps=this.filterBlockedApps(this.secondaryApps);for(const t in this.newAppDictionary)this.newAppDictionary[t].canAccess&&(this.newAppDictionary[t].isNew=!0,this.appDictionary[t]=this.newAppDictionary[t],this.primaryApps.push(this.newAppDictionary[t]))}}getAgoApp(){const{portal:t,user:e}=r.c,i=`${location.protocol}//${t.urlKey?`${t.urlKey}.${t.customBaseUrl}`:t.portalHostname}/home/`,{landingPage:n}=this.userProperties;return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:`${i}${(null==n?void 0:n.url)?n.url:(null==e?void 0:e.isOrgAdmin)?"organization.html":"index.html"}`}}initializeConfig(){r.c.api=this.api,r.c.user=this.user,r.c.portal=this.portal}render(){const t=this.primaryApps.length+this.secondaryApps.length,e="rtl"===(0,c.g)(this.el);return(0,n.h)(n.H,{onKeyDown:this.keydownHandler},(0,n.h)("calcite-button",{appearance:"transparent",kind:"neutral",class:{"toggle-button":!0,"toggle-button--expanded":this.isExpanded},"aria-label":this.strings.appLauncher,onClick:this.handleToggle,ref:t=>this.toggleButton=t,"aria-expanded":this.isExpanded},(0,n.h)("calcite-icon",{class:"toggle-button__icon",icon:"app-launcher",scale:"m"})),(0,n.h)("div",{class:"apps-content-container"},(0,n.h)("div",{class:{"apps-content":!0,"apps-content--rtl":e,"apps-content--expanded":this.isExpanded,"apps-content--dragging":this.dragging},"aria-hidden":"false"},(0,n.h)("nav",{class:"dropdown-menu dropdown-right",role:"menu"},this.displayIntro&&(0,n.h)("div",{class:"intro-container"},(0,n.h)("p",{class:"drag-and-drop-intro intro-text"},this.strings.dragDrop),(0,n.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",onClick:this.handleDismissIntro},this.strings.gotIt)),(0,n.h)("ul",{class:"apps-list",ref:t=>this.primaryContainer=t},this.primaryApps.map(((e,i)=>(0,n.h)("li",{"data-id":e.itemId||e.title,key:e.itemId,class:{"app-item":!0,"app-item--missing":!e.canAccess}},(0,n.h)("arcgis-app-switcher-link",{app:e,index:i,total:t,focusItemId:this.focusItemId,openText:this.strings.openWindow}))))),!this.secondaryExpanded&&(0,n.h)("button",{class:"show-more",onClick:this.handleShowMore},this.strings.showMore," ",(0,n.h)("calcite-icon",{icon:"chevron-down",scale:"s"})),(0,n.h)("div",{class:{"secondary-container":!0,"secondary-container--hidden":!this.secondaryExpanded},"aria-expanded":"true"},(0,n.h)("ul",{class:{"secondary-target":0===this.secondaryApps.length,"secondary-list":0!==this.secondaryApps.length,"secondary-target--hover":this.hoveringOverSecondary&&0===this.secondaryApps.length},ref:t=>this.secondaryContainer=t},0===this.secondaryApps.length&&!this.hoveringOverSecondary&&(0,n.h)("p",{class:"secondary-drag-text",ref:t=>this.secondaryDragText=t},this.strings.dragSecondary),this.secondaryApps.map(((e,i)=>(0,n.h)("li",{"data-id":e.itemId,key:e.itemId,class:{"app-item":!0,"app-item--missing":!e.canAccess}},(0,n.h)("arcgis-app-switcher-link",{app:e,index:this.primaryApps.length+i,total:t,focusItemId:this.focusItemId,openText:this.strings.openWindow}))))))))))}static get assetsDirs(){return["assets"]}get el(){return(0,n.d)(this)}static get watchers(){return{shouldExpand:["handleShouldExpandChange"]}}};he.style=".apps-content-container{position:relative}.toggle-button{display:block;cursor:pointer;padding:0;margin:0;overflow:visible;border-width:0;-webkit-appearance:button;background-color:transparent;height:3.5rem;width:3.5rem}.toggle-button:not(.toggle-button--expanded):hover{box-shadow:inset 0 -3px 0 0 rgba(0, 121, 193, 0.5)}.toggle-button--expanded{box-shadow:inset 0 -3px 0 0 var(--calcite-ui-brand)}.toggle-button__icon{display:block;width:1.5rem;height:1.5rem}:host{position:relative;color:var(--calcite-ui-text-2)}.apps-content{display:none;position:absolute;right:0}.apps-content--rtl{left:0;right:auto}.apps-content--expanded{display:block}.apps-content ::-webkit-scrollbar{width:0.5rem}.apps-content ::-webkit-scrollbar-thumb{border-radius:var(--calcite-border-radius);background-color:rgba(0, 0, 0, 0.5);box-shadow:0 0 1px rgba(255, 255, 255, 0.5)}.dropdown-menu{overflow-x:hidden;overflow-y:auto;top:0;cursor:default;background-color:var(--calcite-ui-background);border-top:1px solid var(--calcite-ui-border-1);max-height:85vh;max-width:480px;min-width:475px}.intro-container{text-align:center;background-color:var(--calcite-ui-background)}.intro-text{font-size:0.875rem;margin:0;background-color:var(--calcite-ui-background);color:var(--calcite-ui-text-3);padding-top:1rem;padding-bottom:0.75rem;padding-left:4rem;padding-right:4rem}.apps-list{flex-direction:row;flex-wrap:wrap;list-style-type:none;overflow:hidden;text-align:left;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.5rem;padding-right:0.5rem;margin-top:0;margin-bottom:0;background-color:var(--calcite-ui-background)}.apps-list .secondary-drag-text{display:none}.app-item{cursor:pointer;margin:0;box-sizing:border-box;display:inline-block;float:none;position:relative;text-align:left;vertical-align:top;word-wrap:break-word;overflow-wrap:break-word;font-size:0.875rem;height:110px;width:150px}@-moz-document url-prefix(){.app-item{width:146px}}.apps-content:not(.apps-content--dragging) .app-item:not(.app-item--missing):hover{color:var(--calcite-ui-text-1);outline:1px solid var(--calcite-ui-brand)}.app-item--dragging{outline-offset:-1px}.app-item--missing{padding-top:0.5rem}.show-more{display:flex;align-items:center;justify-content:center;width:100%;border-style:none;cursor:pointer;padding:0.25rem;background-color:var(--calcite-ui-foreground-3);color:var(--calcite-ui-text-3);font-size:0.875rem}.secondary-container{background-color:var(--calcite-ui-foreground-2);padding-top:0.25rem;padding-bottom:0.25rem;border-top:1px solid var(--calcite-ui-border-3)}.secondary-container--hidden{display:none}.secondary-target{text-align:center;overflow:hidden;margin-top:0.75rem;margin-bottom:0.75rem;margin-left:1.5rem;margin-right:1.5rem;font-size:0.875rem;padding-left:2rem;padding-right:2rem;border:2px dashed var(--calcite-ui-border-2);letter-spacing:normal;height:100px}.secondary-target--hover{border-color:var(--calcite-ui-brand)}.secondary-list{text-align:left;margin:0;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:0.5rem;padding-right:0.5rem}";const ge=({index:t,total:e,active:i})=>{const o=0===t,r=t<=2,a=t===e-1,s=t>=3*Math.ceil(e/3)-3;return(0,n.h)("span",{class:{"arrow--hidden":!i}},!o&&(0,n.h)("div",{class:"arrow arrow--left"}),!a&&(0,n.h)("div",{class:"arrow arrow--right"}),!r&&(0,n.h)("div",{class:"arrow arrow--top"}),!s&&(0,n.h)("div",{class:"arrow arrow--bottom"}))},fe=class{constructor(t){(0,n.r)(this,t),this.arcgisAppSwitcherLinkActivated=(0,n.c)(this,"arcgisAppSwitcherLinkActivated",7),this.arcgisAppSwitcherLinkMove=(0,n.c)(this,"arcgisAppSwitcherLinkMove",7),this.arcgisAppSwitcherLinkRemove=(0,n.c)(this,"arcgisAppSwitcherLinkRemove",7),this.arcgisAppSwitcherLinkClick=(0,n.c)(this,"arcgisAppSwitcherLinkClick",7),this.isFirstRow=!1,this.isLastRow=!1,this.moveElement=t=>{this.arcgisAppSwitcherLinkMove.emit({uid:this.app.itemId||this.app.title,index:this.index,keyCode:t})},this.handleKey=t=>{let e=!0;switch(t.code){case"Space":this.sortingActive=!this.sortingActive,this.arcgisAppSwitcherLinkActivated.emit();break;case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":this.sortingActive&&this.moveElement(t.code);break;default:e=!1}e&&(t.preventDefault(),t.stopPropagation())},this.handleBlur=()=>{this.sortingActive=!1},this.handleRemove=()=>{this.arcgisAppSwitcherLinkRemove.emit(this.app.itemId||this.app.title)},this.handleRemoveKeydown=t=>{switch(t.code){case"Space":case"Enter":this.handleRemove(),t.preventDefault()}},this.handleClick=()=>{this.arcgisAppSwitcherLinkClick.emit()},this.app=void 0,this.index=void 0,this.total=void 0,this.focusItemId=void 0,this.openText=void 0,this.sortingActive=!1}componentDidRender(){var t,e;!this.focusItemId||this.focusItemId!==this.app.itemId&&this.focusItemId!==this.app.title||(this.sortingActive=!0,this.app.canAccess?null===(t=this.linkElement)||void 0===t||t.focus():this.app.canAccess||null===(e=this.missingElement)||void 0===e||e.focus())}render(){var t;const e="rtl"===(0,c.g)(this.el);return(0,n.h)(n.H,null,(null===(t=this.app)||void 0===t?void 0:t.canAccess)&&(0,n.h)("a",{ref:t=>this.linkElement=t,href:this.app.url,class:"app-link",onKeyDown:this.handleKey,onBlur:this.handleBlur,onClick:this.handleClick,draggable:!1,target:"_blank",role:"menuitem"},(0,n.h)("span",{class:"icon-wrapper"},(0,n.h)(ge,{active:this.sortingActive,index:this.index,total:this.total}),!this.app.image&&this.app.abbr&&(0,n.h)("span",{style:{fontSize:this.app.fontSize||"20px"},class:"avenir icon-abbr"},this.app.abbr),!this.app.image&&this.app.abbr&&this.app.placeHolderIcon&&(0,n.h)("img",{src:this.app.placeHolderIcon,alt:""}),this.app.image&&(0,n.h)("img",{src:this.app.image,class:"icon-img",alt:""})),this.app.isNew&&(0,n.h)("span",{class:{indicator:!0,"indicator--new":!0,"indicator--new-rtl":e}}),(0,n.h)("span",{class:"label-text"},this.app.label),(0,n.h)("span",{class:"screen-readers"},this.openText)),this.app&&!this.app.canAccess&&(0,n.h)(n.F,null,(0,n.h)("div",{class:{indicator:!0,"indicator--remove":!0,"indicator--remove-rtl":e},tabIndex:0,onClick:this.handleRemove,onKeyDown:this.handleRemoveKeydown},(0,n.h)("calcite-icon",{scale:"s",icon:"x"})),(0,n.h)("div",{ref:t=>this.missingElement=t,class:"missing-icon",tabIndex:0,onKeyDown:this.handleKey,onBlur:this.handleBlur},(0,n.h)(ge,{active:this.sortingActive,index:this.index,total:this.total})),(0,n.h)("p",{class:"label-text"},this.app.label)))}get el(){return(0,n.d)(this)}};fe.style=":host{display:block;height:93%}.app-link{display:block;padding-left:0.5rem;padding-right:0.5rem;padding-top:0.5rem;position:relative;height:100%;-webkit-user-select:text;-moz-user-select:text;user-select:text;text-decoration:none;color:inherit}.app-link:focus{outline:1px solid var(--calcite-ui-brand)}.arrow{position:absolute;height:0;width:0}.arrow--hidden{visibility:hidden}.arrow--left{border-right:5px solid var(--calcite-ui-brand);border-bottom:5px solid transparent;border-top:5px solid transparent;left:38px;top:27px}.arrow--right{border-left:5px solid var(--calcite-ui-brand);border-bottom:5px solid transparent;border-top:5px solid transparent;right:38px;top:27px}.arrow--top{border-bottom:5px solid var(--calcite-ui-brand);border-left:5px solid transparent;border-right:5px solid transparent;top:0;right:70px}.arrow--bottom{border-top:5px solid var(--calcite-ui-brand);border-left:5px solid transparent;border-right:5px solid transparent;top:59px;right:70px}.missing-icon .arrow--top{top:-4px}.icon-wrapper{display:block;text-align:center;background-repeat:no-repeat;background-size:contain;margin-top:0;margin-bottom:0;margin-left:auto;margin-right:auto;font-size:1.125rem;width:3rem;height:3rem;margin-bottom:0.5rem;color:var(--calcite-ui-text-2)}.icon-abbr{position:absolute;font-size:1.25rem;font-weight:700;width:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--calcite-ui-foreground-1);line-height:3rem;text-shadow:0 1px 8px var(--calcite-ui-text-3);transform:translateZ(0)}.icon-img{pointer-events:none;width:3rem;height:3rem}.indicator{position:absolute;box-sizing:border-box;clear:both;width:1rem;height:1rem;border-radius:50%;border:2px solid var(--calcite-ui-foreground-1);z-index:50}.indicator--new{background-color:var(--calcite-ui-success);top:4px;right:46px}.indicator--new-rtl{right:auto;left:46px}.indicator--remove{display:flex;align-items:center;justify-content:center;cursor:pointer;background-color:var(--calcite-ui-foreground-1);line-height:2px;padding:1px;right:42px;top:2px}.indicator--remove-rtl{right:auto;left:42px}.indicator--remove:hover,.indicator--remove:focus{outline:2px solid transparent;outline-offset:2px;border-color:var(--calcite-ui-danger);color:var(--calcite-ui-danger)}.missing-icon{text-align:center;cursor:pointer;display:block;margin-top:0;margin-bottom:0;margin-left:auto;margin-right:auto;background-color:var(--calcite-ui-foreground-3);height:3rem;width:3rem;margin-bottom:0.5rem;box-sizing:border-box;border:1px dashed var(--calcite-ui-inverse);border-radius:6px;outline-color:var(--calcite-ui-brand)}.label-text{margin-top:0;margin-bottom:0;margin-left:auto;margin-right:auto;text-align:center;display:block;line-height:17px;width:128px}.screen-readers{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}"},76134:(t,e,i)=>{i.d(e,{c:()=>o,o:()=>r});const n=(0,i(27010).c)({portal:null,user:null,api:4,scale:"m"}),o=n.state,r=n.onChange},81068:(t,e,i)=>{i.d(e,{C:()=>s,a:()=>p,f:()=>l,g:()=>a,l:()=>r});var n=i(66716),o=i(18869);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function a(t){return function(t,e,i){const n=(0,o.c)(t,"[dir]");return n?n.getAttribute("dir"):"ltr"}(t)}const s={rtl:"arcgis--rtl"};async function l(t,e){const{api:i,type:o,places:r}=e||{};if(4===i){const[e]=await(0,n.l)(["esri/intl"]),i=e.convertNumberFormatToIntlOptions({places:r,style:o,digitSeparator:!0});return e.formatNumber(t,Object.assign(Object.assign({},i),{style:o}))}const[a]=await(0,n.l)(["dojo/number"]);return a.format(t,{type:o,places:r,pattern:null==e?void 0:e.pattern})}const c={};function p(t){const e=document.documentElement.lang;return c[e]||(c[e]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[e].format(t)}},62727:(t,e,i)=>{i.d(e,{a:()=>a,g:()=>c});var n=i(18869),o=i(81068),r=i(28384);function a(t){var e,i,r;const a=null!==(e=(0,n.c)(t,"[lang]"))&&void 0!==e?e:null===(r=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,s=((null==a?void 0:a.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(s)?o.l.get(s):o.l.has(s.slice(0,2))?o.l.get(s.slice(0,2)):"en"}const s={};function l(t,e){const i=`${t}${e}`;return s[i]||(s[i]=function(t,e){return new Promise(((i,n)=>{fetch((0,r.a)(`../arcgis-app-assets/i18n/${t}.i18n.${e}.json`)).then((t=>{t.ok?i(t.json()):n()}),(()=>n()))}))}(t,e)),s[i]}async function c(t,e){const i=e||t.tagName.toLowerCase(),r=a(t),s=function(t){var e,i,r;const a=null!==(e=(0,n.c)(t,"[lang]"))&&void 0!==e?e:null===(r=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,s=((null==a?void 0:a.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(s)?o.l.get(s):o.l.has(s.slice(0,2))?s:"en"}(t);let c;try{c=await l(i,r)}catch(t){console.warn(`no locale for ${i} (${r}) loading default locale en.`),c=await l(i,"en")}return[c,r,s]}},41171:(t,e,i)=>{i.d(e,{a:()=>E,b:()=>D,c:()=>b,d:()=>A,e:()=>c,f:()=>v,g:()=>y,h:()=>s,i:()=>C,j:()=>m,k:()=>w,l:()=>I,p:()=>u,q:()=>x,r:()=>p});var n=i(66716),o=i(76134),r=i(62381),a=i(26426);function s(t){var e,i,n,r;return null!=t||(t=null===o.c||void 0===o.c?void 0:o.c.portal),(null===(e=null==t?void 0:t.credential)||void 0===e?void 0:e.token)||(null==t?void 0:t.token)||(null===(n=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.credential)||void 0===n?void 0:n.token)||(null===(r=null==t?void 0:t.portalUser)||void 0===r?void 0:r.token)||""}function l(t){var e;const{config:i}=o.c;return"https:"===window.location.protocol||!0===(null===(e=null==i?void 0:i.self)||void 0===e?void 0:e.allSSL)?t.replace("http:","https:"):t}async function c(t,e,i={},r){const[a]=await(0,n.l)(["esri/request"]),{api:c}=o.c;t.includes("f=")||e.append("f","json");const p=s();return p&&!e.has("token")&&e.append("token",p),new Promise(((n,o)=>{if(3===c){const s={url:!1===i.addSSL?t:l(t),form:e,timeout:i.timeout||0},c="post"===r?Object.assign({usePost:!0},i):i;a(s,c).then(n,o)}else a(t,Object.assign(Object.assign({body:e},i),{timeout:i.timeout||0,method:r||"auto"})).then((t=>{n(t.data)})).catch((t=>o(t)))}))}async function p(t,e={},i={},r,a){const[s]=await(0,n.l)(["esri/request"]),{api:c,portal:p}=o.c,d=Object.assign({},e);if(t.includes("f=")||!0===(null==a?void 0:a.excludeJson)||(d.f="json"),!1!==i.addTokenManually){const t=await A(p,c);d.token=t}const u=!1===i.addSSL?t:l(t);if(3===c)return s(Object.assign({url:u,content:d,timeout:i.timeout||0,withCredentials:i.withCredentials},null==a?void 0:a.v3Request),"post"===r?Object.assign({usePost:!0},i):i);{const t=Object.assign(Object.assign(Object.assign({query:d,method:r||"auto"},i),{timeout:i.timeout||0}),(null==i?void 0:i.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await s(u,t)).data}}const d=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120],u=async(t,e,i)=>{var n,o;const r=null!==(n=null==e?void 0:e.pendingStatuses)&&void 0!==n?n:["processing","partial","Pending","InProgress","EXECUTING"],s=null!==(o=null==e?void 0:e.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const n=await p(t,null==e?void 0:e.requestParams,{},i),o=n.status||n.jobStatus;if(r.includes(o))return await(0,a.t)((u=l++,1e3*d[u>-1&&u<d.length-1?u:d.length-1])),c();if(s.includes(o))return n;throw n;var u};try{return c()}catch(t){throw console.error(t),t}},h={},g={},f={};async function v(t,e,i,n){var o,r,a,s;const l=null===(r=null===(o=f[e])||void 0===o?void 0:o[i])||void 0===r?void 0:r.expireAt,c=!!l&&(new Date).getTime()>l;if((null===(a=h[e])||void 0===a?void 0:a[i])&&!c)return h[e][i];g[e]||(g[e]={}),g[e][i]&&!c||(g[e][i]=t());const p=await g[e][i];if(h[e]||(h[e]={}),f[e]||(f[e]={}),h[e][i]=p,n){const{expireAfter:t,getExpireAfterFromResult:o}=n,r=o||t?(new Date).getTime()+(null!==(s=null==o?void 0:o(p))&&void 0!==s?s:t):null;f[e][i]=Object.assign(Object.assign({},f[e][i]),{expireAt:r})}return p}function m(t,e){var i;return null===(i=null==h?void 0:h[t])||void 0===i?void 0:i[e]}const b=(t,e)=>{var i,n;e?(null===(i=h[t])||void 0===i||delete i[e],null===(n=g[t])||void 0===n||delete n[e]):(delete h[t],delete g[t])};function y(t){var e;const{portal:i,config:n}=o.c||{};return null!==(e=(0,r.d)(null==n?void 0:n.restBaseUrl))&&void 0!==e?e:w(t||i)}function w(t){var e;return(0,r.d)(null!==(e=t.restUrl)&&void 0!==e?e:t.portalUrl)}const A=async(t,e)=>{var i,n;if(!(null==t?void 0:t.isPortal)||!t.isWebTierAuth)return s(t);const{token:r}=await v((()=>S(t,null!=e?e:null===o.c||void 0===o.c?void 0:o.c.api)),"platformSelf",null!==(n=null===(i=t.user)||void 0===i?void 0:i.id)&&void 0!==n?n:t.id,{getExpireAfterFromResult:t=>t.expires_in});return r},S=async(t,e)=>{const i=await(async(t,e)=>{var i,o,r,a;const s=3===e,[l]=await n.e.loadModules([s?"esri/IdentityManager":"esri/identity/IdentityManager"]),c=await v((()=>l.getCredential(y(t),{oAuthPopupConfirmation:!1})),"credential",null===(i=t.user)||void 0===i?void 0:i.id);return null!==(a=s?null===(o=c._oAuthCred)||void 0===o?void 0:o.appId:null===(r=c.oAuthState)||void 0===r?void 0:r.appId)&&void 0!==a?a:"arcgisonline"})(t,e),o={"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return p(`${y(t)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===e?o:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:o}})};async function x(t={},e){return p(`${y(e)}/community/groups`,t)}const I=async(t,e)=>{var i;if(!t)return[];const n=`${(0,r.d)(null!==(i=e.restUrl)&&void 0!==i?i:e.portalUrl)}portals/self/servers`,o=await p(n);return null==o?void 0:o.servers},E=t=>D(w(t)),D=t=>{var e;const i=`${(0,r.d)(null!==(e=(0,r.l)(t))&&void 0!==e?e:t)}info`;return v((()=>p(i,{},{addTokenManually:!1})),"portalInfo",i)},C=async(t,e)=>{if(t.isBackedBySDS)return{result:!0};const i=(0,r.e)(e)||(0,r.f)(e)||(0,r.g)(e)||(0,r.h)(e)||(0,r.j)(e);if(t.isPortal&&e&&(i||(0,r.k)(e)))try{const i=await k(e,t);return{result:!!(null==i?void 0:i[0])}}catch(t){return console.error(t),{error:{code:"unhandledError",message:JSON.stringify(t)},result:!1}}return{result:!0}},k=async(t,e)=>{const i=await P(t,e);if(!i)return null;const n=`${i.adminUrl}/admin/data/findItems`;return(await p(n,{managed:!0})).items.filter((t=>{var e;return"arcgis data store"===(null===(e=t.provider)||void 0===e?void 0:e.toLowerCase())}))},P=async(t,e)=>{var i;return(null!==(i=await I(t,e))&&void 0!==i?i:[]).filter((t=>t.isHosted))[0]}},15859:(t,e,i)=>{i.d(e,{a:()=>r,b:()=>o,c:()=>l,d:()=>c,g:()=>s,s:()=>a});var n=i(26426);function o(t,e,i,n){!function(t,e,i){let n=null==(i=i||{})?void 0:i.expires;if("number"==typeof n){const t=new Date,e=24*n*60*60*1e3;t.setTime(Date.now()+e),n=i.expires=t}"string"!=typeof n&&(null==n?void 0:n.toUTCString)&&(i.expires=n.toUTCString());let o,r=`${t}=${encodeURIComponent(e)}`;for(o in i){r+=`; ${o}`;const t=i[o];!0!==t&&(r+=`=${t}`)}document.cookie=r}(t,n?JSON.stringify(e):e,i)}function r(t,e){const i=function(t){const e=document.cookie,i=new RegExp(`(?:^|; )${(0,n.e)(t)}=([^;]*)`),o=e.match(i);return o?decodeURIComponent(o[1]):void 0}(t);return i&&e?JSON.parse(i):i}function a(t,e,i){window.localStorage.setItem(t,i?JSON.stringify(e):e)}function s(t,e){const i=window.localStorage.getItem(t);return i&&e?JSON.parse(i):i}function l(t,e,i){window.sessionStorage.setItem(t,i?JSON.stringify(e):e)}function c(t,e){const i=window.sessionStorage.getItem(t);return i&&e?JSON.parse(i):i}}}]);