/*! For license information please see 448123f59b21569e303a3bae23aa7032.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[16716],{16716:(t,e,i)=>{i.r(e),i.d(e,{arcgis_modal_arcade:()=>s});var r=i(28384),n=i(66716),a=i(62727);i(18869),i(81068);const s=class{constructor(t){(0,r.r)(this,t),this.arcgisModalArcadeClose=(0,r.c)(this,"arcgisModalArcadeClose",7),this.hideDocumentationActions=!1,this.arcadeScript=void 0,this.arcadeProfile=void 0,this.testData=void 0,this.suggestions=void 0,this.returnPredictOutputType=!0,this.arcadeTitle=void 0,this.arcadeTitleEditable=!1,this.arcadeTitleEditingEnabled=!1,this.addExistingExpressions=!1,this.layer=void 0,this.scriptInvalid=!0}async componentWillLoad(){var t;if([this.strings,this.currentLanguage]=await(0,a.g)(this.hostElement),await this.loadAllModules(),this.addExistingExpressions&&this.layer){const e=this.getExistingExpressions();e&&((null===(t=this.suggestions)||void 0===t?void 0:t.length)?this.suggestions.push(e):this.suggestions=[e])}}async loadAllModules(){[this.arcade,this.arcadeUtils]=await(0,n.l)(["esri/arcade","esri/layers/support/arcadeUtils"])}async getOutputType(){try{const t=await this.arcadeEditor.getTestResult();switch(null==t?void 0:t.type){case"boolean":case"date":case"time":case"dateOnly":case"dictionary":case"number":return t.type;case"text":return"string";default:return null}}catch(t){return null}}getExistingExpressions(){const t=this.arcadeUtils.getExpressionsFromLayer(this.layer).map((t=>{var e;return{label:(null==t?void 0:t.title)||(null==t?void 0:t.name)||this.strings.newExpression,description:this.getStringFromProfileName(null===(e=t.profileInfo)||void 0===e?void 0:e.name),code:t.expression}}));return{label:this.strings.existing,suggestions:(null==t?void 0:t.length)?t:[]}}getStringFromProfileName(t){switch(t){case"form-constraint":return this.strings.constraint;case"feature-z":return this.strings.featureZ;case"form-calculation":return this.strings.formCalculation;case"labeling":return this.strings.labeling;case"popup":return this.strings.popup;case"popup-element":return this.strings.popupElement;case"feature-reduction-popup":return this.strings.featureReductionPopup;case"feature-reduction-popup-element":return this.strings.featureReductionPopupElement;case"visualization":return this.strings.visualization;case"field-calculation":return this.strings.fieldCalculation;default:return this.strings.unknown}}render(){return(0,r.h)(r.H,null,(0,r.h)("calcite-modal",{class:"arcade-modal",open:!0,scale:"l",escapeDisabled:!0,outsideCloseDisabled:!0,role:"dialog",onCalciteModalClose:()=>this.arcgisModalArcadeClose.emit()},(0,r.h)("h3",{slot:"header",class:"header"},this.arcadeTitle&&this.arcadeTitleEditable?(0,r.h)("calcite-inline-editable",{scale:"l",editingEnabled:this.arcadeTitleEditingEnabled,messageOverrides:{cancelEditing:this.strings.cancel,enableEditing:this.strings.edit,confirmChanges:this.strings.done}},(0,r.h)("calcite-input",{ref:t=>this.arcadeTitleInput=t,alignment:"start",placeholder:this.strings.titlePlaceHolder,scale:"l",type:"text",value:this.arcadeTitle||this.strings.newExpression})):this.arcadeTitle||this.strings.newExpression),(0,r.h)("arcgis-arcade-editor",{slot:"content",class:"arcade-editor",ref:t=>this.arcadeEditor=t,hideDocumentationActions:this.hideDocumentationActions,script:this.arcadeScript,profile:this.arcadeProfile,testData:this.testData,suggestions:this.suggestions,onDiagnosticsChange:async t=>{var e;const i=t.detail;if(null==i?void 0:i.length){for(let t=0;t<i.length;t++)if(1===(null===(e=i[t])||void 0===e?void 0:e.severity))return void(this.scriptInvalid=!0);this.scriptInvalid=!1}else this.scriptInvalid=!1}}),(0,r.h)("calcite-button",{slot:"secondary",width:"full",appearance:"outline-fill",alignment:"center",scale:"m",onClick:()=>this.arcgisModalArcadeClose.emit()},this.strings.cancel),(0,r.h)("calcite-button",{slot:"primary",width:"full",alignment:"center",appearance:"solid",scale:"m",disabled:this.scriptInvalid,onClick:async()=>{var t;this.arcgisModalArcadeClose.emit(Object.assign(Object.assign({script:await this.arcadeEditor.getScript()},this.arcadeTitle&&{title:(null===(t=this.arcadeTitleInput.value)||void 0===t?void 0:t.trim())||this.strings.newExpression}),this.returnPredictOutputType&&{predictOutputType:await this.getOutputType()}))}},this.strings.done)))}get hostElement(){return(0,r.d)(this)}};s.style=".arcade-modal.sc-arcgis-modal-arcade{top:7.5%;left:7.5%;right:7.5%;--calcite-modal-width:85%;--calcite-modal-height:85%}.arcade-editor.sc-arcgis-modal-arcade{width:100%;height:100%}.header.sc-arcgis-modal-arcade{width:50%}"},81068:(t,e,i)=>{i.d(e,{C:()=>o,a:()=>d,f:()=>l,g:()=>s,l:()=>a});var r=i(66716),n=i(18869);const a=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(t){return function(t,e,i){const r=(0,n.c)(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}(t)}const o={rtl:"arcgis--rtl"};async function l(t,e){const{api:i,type:n,places:a}=e||{};if(4===i){const[e]=await(0,r.l)(["esri/intl"]),i=e.convertNumberFormatToIntlOptions({places:a,style:n,digitSeparator:!0});return e.formatNumber(t,Object.assign(Object.assign({},i),{style:n}))}const[s]=await(0,r.l)(["dojo/number"]);return s.format(t,{type:n,places:a,pattern:null==e?void 0:e.pattern})}const c={};function d(t){const e=document.documentElement.lang;return c[e]||(c[e]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[e].format(t)}},66716:(t,e,i)=>{i.d(e,{a:()=>r,c:()=>a,e:()=>s,g:()=>n,l:()=>o});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var s=a((function(t,e){!function(t){var e={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",r="next";function n(t){if(t.toLowerCase()===r)return r;var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function a(t){return void 0===t&&(t=i),"https://js.arcgis.com/".concat(t,"/")}function s(t){return!t||n(t)?function(t){void 0===t&&(t=i);var e=a(t),s=n(t);if(s!==r&&3===s.major){var o=s.minor<=10?"js/":"";return"".concat(e).concat(o,"esri/css/esri.css")}return"".concat(e,"esri/themes/light/main.css")}(t):t}function o(t,e){var i=s(t),r=function(t){return document.querySelector('link[href*="'.concat(t,'"]'))}(i);return r||function(t,e){if(e){var i=document.querySelector(e);i.parentNode.insertBefore(t,i)}else document.head.appendChild(t)}(r=function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}(i),e),r}var l={};function c(t,e,i){var r;i&&(r=function(t,e){var i=function(r){e(r.error||new Error("There was an error attempting to load ".concat(t.src))),t.removeEventListener("error",i,!1)};return t.addEventListener("error",i,!1),i}(t,i));var n=function(){e(t),t.removeEventListener("load",n,!1),r&&t.removeEventListener("error",r,!1)};t.addEventListener("load",n,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function u(){var t=window.require;return t&&t.on}function h(t){void 0===t&&(t={});var i={};[l,t].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}));var r=i.version,n=i.url||a(r);return new e.Promise((function(t,e){var a=d();if(a){var s=a.getAttribute("src");s!==n?e(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):u()?t(a):c(a,t,e)}else if(u())e(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=i.css;l&&o(!0===l?r:l,i.insertCssBefore),c(a=function(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}(n),(function(){a.setAttribute("data-esri-loader","loaded"),t(a)}),e),document.body.appendChild(a)}}))}function g(t){return new e.Promise((function(e,i){var r=window.require.on("error",i);window.require(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];r.remove(),e(t)}))}))}t.utils=e,t.loadModules=function(t,e){if(void 0===e&&(e={}),u())return g(t);var i=d(),r=i&&i.getAttribute("src");return!e.url&&r&&(e.url=r),h(e).then((function(){return g(t)}))},t.getScript=d,t.isLoaded=u,t.loadScript=h,t.setDefaultOptions=function(t){void 0===t&&(t={}),l=t},t.loadCss=o,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));const o=async(t,e)=>(await s.loadModules(t,e)).map((t=>t.__esModule&&t.default?t.default:t))},62727:(t,e,i)=>{i.d(e,{a:()=>s,g:()=>c});var r=i(18869),n=i(81068),a=i(28384);function s(t){var e,i,a;const s=null!==(e=(0,r.c)(t,"[lang]"))&&void 0!==e?e:null===(a=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===a?void 0:a.documentElement,o=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(o)?n.l.get(o):n.l.has(o.slice(0,2))?n.l.get(o.slice(0,2)):"en"}const o={};function l(t,e){const i=`${t}${e}`;return o[i]||(o[i]=function(t,e){return new Promise(((i,r)=>{fetch((0,a.a)(`../arcgis-app-assets/i18n/${t}.i18n.${e}.json`)).then((t=>{t.ok?i(t.json()):r()}),(()=>r()))}))}(t,e)),o[i]}async function c(t,e){const i=e||t.tagName.toLowerCase(),a=s(t),o=function(t){var e,i,a;const s=null!==(e=(0,r.c)(t,"[lang]"))&&void 0!==e?e:null===(a=null===(i=t.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===a?void 0:a.documentElement,o=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(o)?n.l.get(o):n.l.has(o.slice(0,2))?o:"en"}(t);let c;try{c=await l(i,a)}catch(t){console.warn(`no locale for ${i} (${a}) loading default locale en.`),c=await l(i,"en")}return[c,a,o]}}}]);