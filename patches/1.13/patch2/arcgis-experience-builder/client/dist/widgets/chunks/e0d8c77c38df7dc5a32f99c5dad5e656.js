/*! For license information please see e0d8c77c38df7dc5a32f99c5dad5e656.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[12476],{12476:(e,t,i)=>{i.r(t),i.d(t,{arcgis_floor_configuration:()=>g,arcgis_floor_configuration_add_layers:()=>v,arcgis_floor_configuration_add_layers_flow:()=>m,arcgis_floor_configuration_additional_layers:()=>y,arcgis_floor_configuration_field_list:()=>b,arcgis_floor_configuration_field_picker:()=>w,arcgis_floor_configuration_field_select:()=>L,arcgis_floor_configuration_layer_list:()=>C,arcgis_floor_configuration_layer_picker:()=>F,arcgis_floor_configuration_replace_field:()=>E,arcgis_floor_configuration_select_fields:()=>I});var n=i(28384),l=i(62727),r=i(66716);i(18869),i(81068);const s={facilityLayer:{facilityIdField:"FACILITY_ID",siteIdField:"SITE_ID",nameField:"NAME"},levelLayer:{levelIdField:"LEVEL_ID",facilityIdField:"FACILITY_ID",longNameField:"NAME",shortNameField:"NAME_SHORT",levelNumberField:"LEVEL_NUMBER",verticalOrderField:"VERTICAL_ORDER"},siteLayer:{siteIdField:"SITE_ID",nameField:"NAME"}};let o;const a=e=>{var t;const i=null==e?void 0:e.map;return o=o||(null==i?void 0:i.floorInfo)||Object.assign({},s),o.siteLayer=(null===(t=null==o?void 0:o.siteLayer)||void 0===t?void 0:t.layerId)?o.siteLayer:null,o},c=e=>{const t=null==e?void 0:e.map,i=a(e);t&&h(i)?t.set("floorInfo",i):d(e)},d=e=>{const t=null==e?void 0:e.map;t&&(t.floorInfo=null)},h=e=>{var t,i;return!(!(null===(t=null==e?void 0:e.facilityLayer)||void 0===t?void 0:t.layerId)||!(null===(i=null==e?void 0:e.levelLayer)||void 0===i?void 0:i.layerId)||(null==e?void 0:e.siteLayer)&&!(null==e?void 0:e.siteLayer.layerId))},u=e=>{const t=s[e];return Object.values(t)},p=e=>{const{map:t}=e,{allLayers:i}=t;let n=[];return i.forEach((e=>{const{type:t,floorInfo:i}=e;if("map-image"===t){const{allSublayers:t}=e;n=n.concat(t.filter((e=>e.fieldsIndex&&!(null==e?void 0:e.floorInfo))).toArray())}else i||"feature"!==t||n.push(e)})),n},f=e=>{let{layer:t,field:i}=e;"arcgis-field-list"===(null==e?void 0:e.localName)&&(i=e.selection.values().next().value);const n=t.floorInfo||{};n.floorField=i.name,t.set("floorInfo",n)},g=class{constructor(e){(0,n.r)(this,e),this.floorInfoChange=(0,n.c)(this,"floorInfoChange",7),this.view=void 0,this.layer=void 0,this.open=!0,this.disabled=!1}async componentWillLoad(){const[e]=await(0,l.g)(this.hostElement);this.strings=e;const{view:t}=this;this.props={view:t,strings:e},this.disabled=this.disabled||await this.getDisabled()}async componentDidLoad(){const[e]=await(0,r.l)(["esri/intl"]);this.intl=e,this.intl.setLocale(document.documentElement.lang)}addMapFloorInfo(){c(this.view),this.floorInfoChange.emit()}removeFloorInfo(){d(this.view),this.floorInfoChange.emit()}updateFloorInfo(e){((e,t)=>{const i=a(t),{name:n}=e,l=e.layer,r=!!(null==l?void 0:l.layer);l?(i[n]=Object.assign({},s[n]),i[n].layerId=r?l.layer.id:l.id,i[n].sublayerId=r?l.id:void 0):i[n]=void 0,c(t)})(e,this.view),this.floorInfoChange.emit()}disableContainer(e){const{detail:t}=e,i=this.hostElement.closest("calcite-flow-item");i&&(i.disabled=t)}closeAllLayerPickers(){document.querySelectorAll("arcgis-floor-configuration-layer-picker").forEach((e=>e.open=!1))}async getDisabled(){const e=this.view,t=await(async e=>{const{map:t}=e,{allLayers:i}=t,n=i.map((async e=>await(e=>{try{e.loadAll?e.loadAll():e.load()}catch(e){}return e})(e))).filter((e=>"failed"!==(null==e?void 0:e.loadStatus))),l=await Promise.all(n);let r=[];return l.forEach((e=>{const{type:t,geometryType:i}=e;if("map-image"===t){const{allSublayers:t}=e;r=r.concat(t.filter((e=>{var t;return e.fieldsIndex&&"esriGeometryPolygon"===(null===(t=e.sourceJSON)||void 0===t?void 0:t.geometryType)})).toArray())}else"feature"===t&&"polygon"===i&&r.push(e)})),r})(e),i=["facilityLayer","levelLayer"].filter((e=>{var i;return null===(i=t.filter((t=>this.hasRequiredFields(t,u(e)))))||void 0===i?void 0:i.length}));return!(null==i?void 0:i.length)}hasRequiredFields(e,t){if(e){const{fieldsIndex:i}=e;return i&&t.every((e=>!!i.get(e)))||!1}return!1}render(){const{strings:e,open:t,disabled:i}=this;return(0,n.h)(n.H,null,(0,n.h)("calcite-block",{class:"container",heading:e.heading,collapsible:!0,disabled:i,open:t&&!i},this.renderFloorConfiguration()))}renderFloorConfiguration(){const{strings:e,view:t}=this,i=t.map,l=!!(null==i?void 0:i.floorInfo);return(0,n.h)("calcite-block-section",{text:e.enable,open:l,"toggle-display":"switch",onCalciteBlockSectionToggle:e=>e.currentTarget.open?this.addMapFloorInfo():this.removeFloorInfo()},(0,n.h)("p",null,e.summary),this.renderLayerPicker("siteLayer"),this.renderLayerPicker("facilityLayer"),this.renderLayerPicker("levelLayer"),this.renderAdditionalLayers())}renderLayerPicker(e){const{strings:t,view:i}=this,l=((e,t)=>{var i,n;const l=t.map.allLayers,r=a(t),s=null===(i=null==r?void 0:r[e])||void 0===i?void 0:i.layerId,o=null===(n=null==r?void 0:r[e])||void 0===n?void 0:n.sublayerId;let c=s?null==l?void 0:l.find((e=>e.id===s)):null;return"map-image"===(null==c?void 0:c.type)&&(c=c.allSublayers.find((e=>e.id===o))),c})(e,i),r=u(e);return(0,n.h)("arcgis-floor-configuration-layer-picker",{view:this.view,label:t[e],strings:t,selectedLayer:l,requiredFields:r,onListChange:t=>this.updateFloorInfo({layer:(null==t?void 0:t.detail)?null==t?void 0:t.detail[0]:null,name:e})})}renderAdditionalLayers(){const{strings:e}=this;return(0,n.h)("calcite-block-section",{text:e.additionalLayers,open:!0},(0,n.h)("arcgis-floor-configuration-additional-layers",{view:this.view,strings:this.strings,onDisable:e=>this.disableContainer(e)}))}get hostElement(){return(0,n.d)(this)}},v=class{constructor(e){(0,n.r)(this,e),this.listChange=(0,n.c)(this,"listChange",7),this.view=void 0,this.layers=void 0,this.selection=new Map,this.strings=void 0}selectionChange(){this.listChange.emit(this.selection)}render(){return(0,n.h)(n.H,null,this.renderPanel())}renderPanel(){return(0,n.h)("section",null,(0,n.h)("arcgis-floor-configuration-layer-list",{layers:p(this.view),"filter-enabled":!0,multiple:!0,strings:this.strings,onListChange:e=>this.selection=e.detail}))}get el(){return(0,n.d)(this)}static get watchers(){return{selection:["selectionChange"]}}},m=class{constructor(e){(0,n.r)(this,e),this.done=(0,n.c)(this,"done",7),this.dismiss=(0,n.c)(this,"dismiss",7),this.view=void 0,this.strings=void 0,this.layers=void 0,this.selectedLayers=void 0,this.mode="create"}render(){return(0,n.h)(n.H,null,this.renderFlow())}renderFlow(){return(0,n.h)("calcite-flow",{ref:e=>this.createPanels(e)})}onCreate(e){e.stopPropagation(),this.done.emit()}onEdit(e){e.stopPropagation(),this.done.emit()}onDismiss(e){e.stopPropagation(),this.dismiss.emit()}createPanels(e){const{mode:t}=this;return"create"===t?this.createAddLayersPanel(e):"edit"===t?this.createReplaceFieldsPanel(e):void 0}createAddLayersPanel(e){const t=document.createElement("arcgis-floor-configuration-add-layers");t.strings=this.strings,t.view=this.view,t.classList.add("content"),t.addEventListener("listChange",(e=>{var t;return l.disabled=!(null===(t=e.detail)||void 0===t?void 0:t.length)}));const i=this.createPanel({heading:this.strings.addLayers});i.appendChild(t);const n=this.createButton({label:this.strings.cancel,appearance:"outline-fill",eventListener:this.onDismiss.bind(this)});i.appendChild(n);const l=this.createButton({label:this.strings.next,appearance:"solid",disabled:!0,eventListener:()=>{this.createSelectFloorFieldsPanel(t.selection,e)}});i.appendChild(l),e.appendChild(i)}createSelectFloorFieldsPanel(e,t){const i=document.createElement("arcgis-floor-configuration-select-fields");i.classList.add("content"),i.strings=this.strings,i.layers=e,i.view=this.view;const n=this.createPanel({heading:this.strings.selectFloorField});n.appendChild(i);const l=this.createButton({label:this.strings.cancel,appearance:"outline-fill",eventListener:this.onDismiss.bind(this)});n.appendChild(l);const r=this.createButton({label:this.strings.add,appearance:"solid",eventListener:async e=>{await i.commit(),this.onCreate(e)}});n.appendChild(r),t.appendChild(n)}createReplaceFieldsPanel(e){const t=this.layers[0],i=document.createElement("arcgis-floor-configuration-replace-field");i.classList.add("content"),i.strings=this.strings,i.view=this.view,i.layer=t;const n=this.createPanel({heading:t.title,summary:this.strings.replaceFloorField});n.appendChild(i);const l=this.createButton({label:this.strings.replace,width:"full",eventListener:async e=>{await i.commit(),this.onEdit(e)}});n.appendChild(l),e.appendChild(n)}createPanel(e){const t=document.createElement("calcite-flow-item");return t.heading=e.heading,t.description=e.summary,t.closable=!0,t.closed=!1,t.addEventListener("calcitePanelClose",this.onDismiss.bind(this)),t}createButton(e){const{appearance:t="solid",label:i,eventListener:n,width:l="half",disabled:r=!1}=e,s=document.createElement("calcite-button");s.slot="footer",s.appearance=t,s.disabled=r,s.width=l;const o=document.createTextNode(i);return s.appendChild(o),s.addEventListener("click",n),s}get el(){return(0,n.d)(this)}};m.style=".content{width:20vw;max-width:420px;min-width:240px;max-height:40vh}";const y=class{constructor(e){(0,n.r)(this,e),this.dismiss=(0,n.c)(this,"dismiss",7),this.disable=(0,n.c)(this,"disable",7),this.floorInfoChange=(0,n.c)(this,"floorInfoChange",7),this.reRender=void 0,this.view=void 0,this.strings=void 0,this.placement="bottom-start"}disconnectedCallback(){var e;const{popoverNode:t}=this;t&&(t.open=!1,null===(e=t.parentElement)||void 0===e||e.removeChild(t))}async setFocus(){var e;return null===(e=this.layerPanel)||void 0===e?void 0:e.setFocus()}open(){setTimeout((()=>this.popoverNode.open=!0),25)}close(e){this.disableContainer(!1);const{popoverNode:t}=this;t.open=!1,t.remove(),this.popoverNode=null,this.reRender=!this.reRender,e&&this.floorInfoChange.emit()}create(){const e=this.createPopover(),t=this.createAddLayersFlow("create");e.appendChild(t),this.open()}edit(e){const t=this.getSelectedLayer(e),i=this.createPopover(),n=this.createAddLayersFlow("edit");n.layers=[t],i.appendChild(n),this.open()}removeLayer(e){e.floorInfo=null,this.reRender=!this.reRender,this.floorInfoChange.emit()}render(){return(0,n.h)(n.H,null,this.renderNotice(),this.renderPanel())}renderNotice(){const{strings:e}=this,t=this.getLayers();return(null==t?void 0:t.length)?null:(0,n.h)("calcite-notice",{scale:"s",width:"auto",open:!0},(0,n.h)("div",{slot:"message"},e.additionalLayersTip))}renderPanel(){const{strings:e}=this,t=p(this.view);return(0,n.h)("calcite-panel",{ref:e=>this.layerPanel=e},this.renderLayers(),(0,n.h)("calcite-fab",{slot:"fab",icon:"plus",appearance:"outline-fill",kind:"neutral","text-enabled":!0,label:e.addLayers,text:e.addLayers,disabled:0===t.length,scale:"s",ref:e=>this.triggerButton=e,onClick:()=>this.create()}))}renderLayers(){const e=this.getLayers();return(0,n.h)("calcite-value-list",{dir:"ltr",class:"calcite-mode-light",onClick:e=>this.edit(e)},e.map((e=>this.renderLayer(e))))}renderLayer(e){const{title:t,floorInfo:i,id:l}=e,{floorField:r}=i,s=`{${r}}`;return(0,n.h)("calcite-value-list-item",{label:t,description:s,value:l},(0,n.h)("calcite-action",{slot:"actions-end",text:this.strings.remove,icon:"x",onClick:t=>{t.stopPropagation(),this.removeLayer(e)}}))}disableContainer(e){const t=this.el.closest("calcite-block");t&&(t.disabled=e),this.disable.emit(e)}createAddLayersFlow(e){this.disableContainer(!0);const t=this.addLayersFlow=document.createElement("arcgis-floor-configuration-add-layers-flow");return t.strings=this.strings,t.view=this.view,t.mode=e,t.addEventListener("done",this.close.bind(this,!0)),t.addEventListener("dismiss",this.close.bind(this,!1)),t}createPopover(){const e=this.el,t=this.popoverNode=document.createElement("calcite-popover");return t.classList.add("js-app-primary-flyout"),t.referenceElement=e,t.offsetDistance=-550,t.offsetSkidding=0,t.label=this.strings.addLayers,t.placement="bottom-start",t.pointerDisabled=!0,document.body.appendChild(t),t}getSelectedLayer(e){var t,i,n,l,r;if("calcite-value-list-item"===(null===(t=e.target)||void 0===t?void 0:t.localName)||"calcite-value-list-item"===(null===(n=null===(i=e.target)||void 0===i?void 0:i.parentElement)||void 0===n?void 0:n.localName)){const t=null!==(l=e.target.value)&&void 0!==l?l:null===(r=e.target.parentElement)||void 0===r?void 0:r.value;return this.findLayer(t)}}getLayers(){const e=this.view,{map:t}=e,{allLayers:i}=t;let n=[];return i.forEach((e=>{const{type:t,floorInfo:i}=e;if("map-image"===t){const{allSublayers:t}=e;n=n.concat(t.filter((e=>e.fieldsIndex&&(null==e?void 0:e.floorInfo))).toArray())}else i&&n.push(e)})),n}findLayer(e){const t=this.getLayers();return null==t?void 0:t.find((t=>t.id===e))}get el(){return(0,n.d)(this)}};y.style=":host{height:100%}calcite-notice{margin-bottom:1em}";const b=class{constructor(e){(0,n.r)(this,e),this.listChange=(0,n.c)(this,"listChange",7),this.layer=void 0,this.selection=new Map,this.filterEnabled=!0,this.multiple=!1,this.strings=void 0,this.fieldType="string"}render(){return(0,n.h)(n.H,null,(0,n.h)("calcite-pick-list",{"filter-enabled":this.filterEnabled,"filter-placeholder":this.strings.filter,multiple:this.multiple,onClick:e=>this.onListChange(e)},this.renderFields()))}renderFields(){return(this.getFields()||[]).map((e=>this.renderField(e)))}renderField(e){const t=`{${e.name}}`;return(0,n.h)("calcite-pick-list-item",{label:e.alias,description:t,selected:this.selection.has(e.name),value:e.name})}onListChange(e){const{selection:t}=this;this.updateSelection(e),this.listChange.emit(Array.from(t.values()))}updateSelection(e){var t,i,n,l,r;if("calcite-pick-list-item"===(null===(t=e.target)||void 0===t?void 0:t.localName)||"calcite-pick-list-item"===(null===(n=null===(i=e.target)||void 0===i?void 0:i.parentElement)||void 0===n?void 0:n.localName)){const{selection:t}=this,i=null!==(l=e.target.value)&&void 0!==l?l:null===(r=e.target.parentElement)||void 0===r?void 0:r.value,n=t.has(i),s=this.findField(i);this.multiple||t.clear(),n?this.selection.delete(s.name):this.selection.set(i,s)}}getFields(){const{layer:e,fieldType:t}=this,{fields:i}=e;return(null==i?void 0:i.length)?i.filter((e=>!t||(null==e?void 0:e.type)===t)):[]}findField(e){const{layer:t}=this;return t.fieldsIndex.get(e)}get el(){return(0,n.d)(this)}},w=class{constructor(e){(0,n.r)(this,e),this.iconEnd="pencil",this.label=void 0,this.layer=void 0,this.placement="auto",this.open=void 0}render(){var e;const t=(null===(e=this.layer)||void 0===e?void 0:e.title)||this.strings.none;return(0,n.h)(n.H,null,(0,n.h)("calcite-label",null,this.label,(0,n.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",scale:"m","icon-end":this.iconEnd,ref:e=>this.triggerButton=e,onClick:()=>this.open=!this.open},t)),(0,n.h)("calcite-popover",{label:this.label,pointerDisabled:!0,referenceElement:this.triggerButton,open:this.open,closable:!0,placement:this.placement},(0,n.h)("div",{class:"content"},(0,n.h)("slot",null))))}get el(){return(0,n.d)(this)}},L=class{constructor(e){(0,n.r)(this,e),this.layer=void 0,this.strings=void 0,this.field=void 0,this.fieldType="string"}async componentWillLoad(){this.onSelectChange()}findField(e){return this.layer.fieldsIndex.get(e)}onSelectChange(){const{select:e}=this,t=null==e?void 0:e.selectedOption;this.field=t?this.findField(t.value):this.field||this.getFields()[0]}render(){const{title:e}=this.layer,t=this.getFields();return(0,n.h)(n.H,null,(0,n.h)("calcite-label",null,e,(0,n.h)("calcite-select",{label:"select",ref:e=>this.select=e,onCalciteSelectChange:()=>this.onSelectChange()},t.map((e=>this.renderField(e))))))}renderField(e){return(0,n.h)("calcite-option",{label:e.alias,value:e.name})}getFields(){const{layer:e,fieldType:t}=this,{fields:i}=e;return(null==i?void 0:i.length)?i.filter((e=>!t||(null==e?void 0:e.type)===t)):[]}get el(){return(0,n.d)(this)}},C=class{constructor(e){(0,n.r)(this,e),this.listChange=(0,n.c)(this,"listChange",7),this.layers=void 0,this.selection=new Map,this.filterEnabled=!0,this.multiple=!1,this.strings=void 0}render(){return(0,n.h)(n.H,null,(0,n.h)("calcite-pick-list",{"filter-enabled":this.filterEnabled,"filter-placeholder":this.strings.filter,multiple:this.multiple,onClick:e=>this.onListChange(e)},this.renderLayers()))}renderLayers(){const{layers:e,selection:t}=this;return(e||[]).map((e=>(0,n.h)("calcite-pick-list-item",{label:e.title,description:this.getLayerType(e),selected:t.has(e.id),value:e.id})))}onListChange(e){const{selection:t}=this;this.updateSelection(e),this.listChange.emit(Array.from(t.values()))}updateSelection(e){var t,i,n,l,r;if("calcite-pick-list-item"===(null===(t=e.target)||void 0===t?void 0:t.localName)||"calcite-pick-list-item"===(null===(n=null===(i=e.target)||void 0===i?void 0:i.parentElement)||void 0===n?void 0:n.localName)){const{selection:t}=this,i=null!==(l=e.target.value)&&void 0!==l?l:null===(r=e.target.parentElement)||void 0===r?void 0:r.value,n=t.has(i),s=this.findLayer(i);this.multiple||t.clear(),n?this.selection.delete(s.id):this.selection.set(s.id,s)}}findLayer(e){const{layers:t}=this;return null==t?void 0:t.find((t=>t.id===e))}getLayerType(e){const{layerTypes:t}=this.strings,{geometryType:i="unknown",sourceJSON:n}=e;return"unknown"!==i?t[i]:t[this.jsonTypeToLayerType(null==n?void 0:n.geometryType)]}jsonTypeToLayerType(e){return"esriGeometryPolygon"===e?"polygon":"esriGeometryPoint"===e?"point":"esriGeometryPolyline"===e?"line":"unknown"}get el(){return(0,n.d)(this)}},F=class{constructor(e){(0,n.r)(this,e),this.listChange=(0,n.c)(this,"listChange",7),this.selectedLayer=void 0,this.view=void 0,this.iconEnd="pencil",this.label=void 0,this.placement="bottom-start",this.open=!1,this.strings=void 0,this.requiredFields=void 0,this.geometryType="polygon"}calcitePopoverCloseHandler(){this.open=!1}async setFocus(){return this.panel?this.panel.setFocus():Promise.resolve()}render(){const{selectedLayer:e}=this,t=(null==e?void 0:e.title)||this.strings.none,i=this.getLayers(),l=this.open||!(null==i?void 0:i.length),r=new Map;return e&&r.set(e.id,e),(0,n.h)(n.H,null,(0,n.h)("calcite-label",null,this.label,(0,n.h)("span",null,(0,n.h)("calcite-button",{appearance:"outline-fill",alignment:"icon-end-space-between",kind:"neutral",scale:"m","icon-end":"pencil",width:"full",disabled:l,ref:e=>this.triggerButton=e,onClick:()=>{this.open=!this.open,setTimeout((()=>this.setFocus()),25)}},t),(0,n.h)("calcite-action",{icon:"x",scale:"s",text:this.strings.clear,disabled:!this.selectedLayer,onClick:()=>{this.selectedLayer=null,this.listChange.emit()}}))),(0,n.h)("calcite-popover",{label:this.label,pointerDisabled:!0,referenceElement:this.triggerButton,open:this.open,placement:this.placement,ref:e=>this.popoverNode=e},(0,n.h)("calcite-panel",{heading:this.label,closed:!1,"width-scale":"m","height-scale":"m",ref:e=>this.panel=e},(0,n.h)("arcgis-floor-configuration-layer-list",{strings:this.strings,layers:i,selection:r,onListChange:e=>this.selectedLayer=null==e?void 0:e.detail[0]}),(0,n.h)("calcite-button",{width:"full",slot:"footer",onClick:()=>this.open=!1},this.strings.done))))}getLayers(){const e=this.getCompatibleLayers();return(null==e?void 0:e.length)?e.filter((e=>this.checkRequiredFields(e))):[]}getCompatibleLayers(){const{geometryType:e}=this,{map:t}=this.view,{allLayers:i}=t;let n=[];return i.forEach((t=>{const{type:i}=t;if("map-image"===i){const{allSublayers:e}=t;n=n.concat(e.filter((e=>e.fieldsIndex)).toArray())}else("feature"===i&&!e||(null==t?void 0:t.geometryType)===e)&&n.push(t)})),n}checkRequiredFields(e){const{requiredFields:t}=this,{fieldsIndex:i}=e;return!t||!i||t.every((e=>i.get(e)))}get el(){return(0,n.d)(this)}};F.style="calcite-label span{width:100%;display:flex;justify-content:space-between}calcite-label span calcite-action{margin-left:0.3em}.arcgis--rtl calcite-label span calcite-action{margin-left:auto;margin-right:0.3em}";const E=class{constructor(e){(0,n.r)(this,e),this.view=void 0,this.layer=void 0,this.strings=void 0}async commit(){return new Promise((async e=>{Array.from(this.el.shadowRoot.querySelectorAll("arcgis-field-list")).map((e=>f(e))),e()}))}render(){return(0,n.h)(n.H,null,this.renderPanel())}renderPanel(){const e=this.layer,t=this.findField(e.floorInfo.floorField),i=new Map;return i.set(t.name,t),(0,n.h)("section",null,(0,n.h)("arcgis-floor-configuration-field-list",{strings:this.strings,layer:e,selection:i}))}findField(e){return this.layer.fieldsIndex.get(e)}get el(){return(0,n.d)(this)}};E.style="section{padding:0.5rem 0.75rem;background-color:white}";const I=class{constructor(e){(0,n.r)(this,e),this.view=void 0,this.layers=void 0,this.strings=void 0}async commit(){return new Promise((async e=>{Array.from(this.el.shadowRoot.querySelectorAll("arcgis-floor-configuration-field-select")).forEach((e=>f(e))),e()}))}render(){return(0,n.h)(n.H,null,this.renderPanel())}renderPanel(){const{layers:e}=this;return(0,n.h)("section",null,(0,n.h)("p",null,this.strings.selectMessage),e.map((e=>this.renderSelect(e))))}renderSelect(e){return(0,n.h)("arcgis-floor-configuration-field-select",{strings:this.strings,layer:e})}get el(){return(0,n.d)(this)}};I.style="section{padding:0.5rem 0.75rem;background-color:white}"},81068:(e,t,i)=>{i.d(t,{C:()=>o,a:()=>d,f:()=>a,g:()=>s,l:()=>r});var n=i(66716),l=i(18869);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,t,i){const n=(0,l.c)(e,"[dir]");return n?n.getAttribute("dir"):"ltr"}(e)}const o={rtl:"arcgis--rtl"};async function a(e,t){const{api:i,type:l,places:r}=t||{};if(4===i){const[t]=await(0,n.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:r,style:l,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:l}))}const[s]=await(0,n.l)(["dojo/number"]);return s.format(e,{type:l,places:r,pattern:null==t?void 0:t.pattern})}const c={};function d(e){const t=document.documentElement.lang;return c[t]||(c[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[t].format(e)}},66716:(e,t,i)=>{i.d(t,{a:()=>n,c:()=>r,e:()=>s,g:()=>l,l:()=>o});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var s=r((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",n="next";function l(e){if(e.toLowerCase()===n)return n;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function r(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function s(e){return!e||l(e)?function(e){void 0===e&&(e=i);var t=r(e),s=l(e);if(s!==n&&3===s.major){var o=s.minor<=10?"js/":"";return"".concat(t).concat(o,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function o(e,t){var i=s(e),n=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(i);return n||function(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}(n=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(i),t),n}var a={};function c(e,t,i){var n;i&&(n=function(e,t){var i=function(n){t(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}(e,i));var l=function(){t(e),e.removeEventListener("load",l,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",l,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function h(){var e=window.require;return e&&e.on}function u(e){void 0===e&&(e={});var i={};[a,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var n=i.version,l=i.url||r(n);return new t.Promise((function(e,t){var r=d();if(r){var s=r.getAttribute("src");s!==l?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):h()?e(r):c(r,e,t)}else if(h())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=i.css;a&&o(!0===a?n:a,i.insertCssBefore),c(r=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(l),(function(){r.setAttribute("data-esri-loader","loaded"),e(r)}),t),document.body.appendChild(r)}}))}function p(e){return new t.Promise((function(t,i){var n=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];n.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),h())return p(e);var i=d(),n=i&&i.getAttribute("src");return!t.url&&n&&(t.url=n),u(t).then((function(){return p(e)}))},e.getScript=d,e.isLoaded=h,e.loadScript=u,e.setDefaultOptions=function(e){void 0===e&&(e={}),a=e},e.loadCss=o,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const o=async(e,t)=>(await s.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},62727:(e,t,i)=>{i.d(t,{a:()=>s,g:()=>c});var n=i(18869),l=i(81068),r=i(28384);function s(e){var t,i,r;const s=null!==(t=(0,n.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,o=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return l.l.has(o)?l.l.get(o):l.l.has(o.slice(0,2))?l.l.get(o.slice(0,2)):"en"}const o={};function a(e,t){const i=`${e}${t}`;return o[i]||(o[i]=function(e,t){return new Promise(((i,n)=>{fetch((0,r.a)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?i(e.json()):n()}),(()=>n()))}))}(e,t)),o[i]}async function c(e,t){const i=t||e.tagName.toLowerCase(),r=s(e),o=function(e){var t,i,r;const s=null!==(t=(0,n.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,o=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return l.l.has(o)?l.l.get(o):l.l.has(o.slice(0,2))?o:"en"}(e);let c;try{c=await a(i,r)}catch(e){console.warn(`no locale for ${i} (${r}) loading default locale en.`),c=await a(i,"en")}return[c,r,o]}}}]);