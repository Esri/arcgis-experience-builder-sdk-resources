/*! For license information please see 43124008a769bbdc2092a03c96367698.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[52481],{52481:(e,t,l)=>{l.r(t),l.d(t,{arcgis_label:()=>m,arcgis_label_content:()=>b,arcgis_label_content_style:()=>u});var i=l(28384),a=l(62727),s=l(66716),o=l(48680),n=l(72637),r=l(34077),h=l(81068),c=l(59542),d=l(41528);l(18869),l(27010);const m=class{constructor(e){(0,i.r)(this,e),this.labelUpdated=(0,i.c)(this,"labelUpdated",7),this.arcgisLabelDismissedChange=(0,i.c)(this,"arcgisLabelDismissedChange",7),this.internalLabelUpdated=(0,i.c)(this,"internalLabelUpdated",7),this.closeLabelPopovers=(0,i.c)(this,"closeLabelPopovers",7),this.arcgisFilterDone=(0,i.c)(this,"arcgisFilterDone",7),this.labelReRender=(0,i.c)(this,"labelReRender",7),this.labelComponent=(e,t,l)=>{var a;return(0,i.h)("div",{key:e,id:e},(0,i.h)("arcgis-label-content",{guid:e,labelClass:t,blockOpen:l,calciteFlowItem:(null===(a=this.calciteFlowProps)||void 0===a?void 0:a.calciteFlowItem)||this.hostElement.shadowRoot.getElementById("labelFlowItem_Id")}))},this.mapView=void 0,this.layer=void 0,this.portal=void 0,this.config=void 0,this.layerDisplayType=n.l.feature,this.dismissible=!1,this.hideLayerTitle=!1,this.calciteFlowProps=null,this.labelComponents=[],this.reRender=void 0}async componentWillLoad(){[this.strings,this.currentLanguage]=await(0,a.g)(this.hostElement),this.layerGeometryType=await(0,r.h)(this.layer),this.serviceType=(0,r.c)(this.layer),c.l.layer=this.layer,c.l.mapView=this.mapView,c.l.portal=this.portal,c.l.config=this.config,c.l.strings=this.strings,c.l.currentLanguage=this.currentLanguage,c.l.layerGeometryType=this.layerGeometryType,c.l.serviceType=this.serviceType,c.l.layerDisplayType=this.layerDisplayType,this.labelingInfo=this.layerDisplayType===n.l.feature?this.layer.labelingInfo:this.layer.featureReduction.labelingInfo,this.layerDisplayType===n.l.feature?this.layer.labelsVisible=this.layer.labelsVisible||!1:this.layerDisplayType===n.l.cluster&&(this.layer.featureReduction.labelsVisible=this.layer.featureReduction.labelsVisible||!1),Array.isArray(this.labelingInfo)&&this.labelingInfo.forEach((e=>{this.addLabelClass(e,1===this.labelingInfo.length)}))}componentDidLoad(){var e;this.sortableComponents=this.hostElement.shadowRoot.getElementById("SortableComponents_Id"),this.calciteFab=(null===(e=this.calciteFlowProps)||void 0===e?void 0:e.calciteFab)||this.hostElement.shadowRoot.getElementById("addComponentBtn_Id"),this.enableDisableLabel(this.getLabelEnabledProp()),this.calciteFab.onclick=async e=>{e.stopPropagation(),this.closeLabelPopovers.emit();const t=await this.getLabelClass();this.labelingInfo?this.labelingInfo.push(t):this.labelingInfo=[t],this.addLabelClass(t,!0),this.focusLastLabelClass()},this.flowItemNode&&requestAnimationFrame((()=>this.flowItemNode.setFocus()))}componentDidUpdate(){this.internalLabelUpdated.emit()}mainPopupReRenderHandler(e){e.stopPropagation(),this.reRender=!this.reRender}deleteComponentHandler(e){e.stopPropagation(),this.closeLabelPopovers.emit();const t=this.sortableComponents.getElementsByTagName("div");for(let l=0;l<t.length;l++)if(t[l].id===e.detail){this.labelingInfo.splice(l,1),this.labelComponents.splice(l,1);break}this.labelReRender.emit(),this.calciteFab.setFocus()}duplicateComponentHandler(e){e.stopPropagation(),this.closeLabelPopovers.emit();const t=this.sortableComponents.getElementsByTagName("div");for(let l=0;l<t.length;l++)if(t[l].id===e.detail){const e=this.labelingInfo[l].clone();this.labelingInfo.push(e),this.addLabelClass(e,!0),this.focusLastLabelClass();break}}internalLabelUpdatedHandler(e){e.stopPropagation(),this.labelingInfo&&!e.detail&&(this.layerDisplayType===n.l.feature?this.layer.labelingInfo=[...this.labelingInfo]:this.layer.featureReduction.labelingInfo=[...this.labelingInfo]),this.labelUpdated.emit()}disableLabelPanelHandler(e){var t;e.stopPropagation(),((null===(t=this.calciteFlowProps)||void 0===t?void 0:t.calciteFlowItem)||this.hostElement.shadowRoot.getElementById("labelFlowItem_Id")).disabled=e.detail}async done(){this.arcgisFilterDone.emit(),this.closeLabelPopovers.emit()}async setFocus(){var e;this.flowItemNode?this.flowItemNode.setFocus():null===(e=this.labelSwitch)||void 0===e||e.focus()}enableDisableLabel(e){this.hostElement.shadowRoot.getElementById("labelDiv_Id").style.display=e?"block":"none",this.calciteFab.style.display=e?"block":"none",this.closeLabelPopovers.emit()}getLabelEnabledProp(){switch(this.layerDisplayType){case n.l.feature:return this.layer.labelsVisible;case n.l.cluster:return this.layer.featureReduction.labelsVisible;default:return this.layer.labelsVisible}}addLabelClass(e,t=!1){this.labelComponents=[...this.labelComponents,this.labelComponent((0,o.g)(),e,t)]}async getLabelClass(){var e,t,l,i,a,o;const[r,h,c,d]=await(0,s.l)(["esri/layers/support/LabelClass","esri/views/support/colorUtils","esri/smartMapping/labels/clusters","esri/smartMapping/labels/bins"]);return this.layerDisplayType===n.l.feature?new r(this.defaultLabelProps(this.defaultSymbolProps(await h.getBackgroundColor(this.mapView),await h.getBackgroundColorTheme(this.mapView)))):"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type)?(null===(l=null===(t=await d.getLabelSchemes({layer:this.layer}))||void 0===t?void 0:t.primaryScheme)||void 0===l?void 0:l.labelingInfo[0])||null:(null===(o=null===(a=await c.getLabelSchemes({layer:this.layer,renderer:null===(i=this.layer)||void 0===i?void 0:i.renderer,view:this.mapView}))||void 0===a?void 0:a.primaryScheme)||void 0===o?void 0:o.labelingInfo[0])||null}defaultLabelProps(e){const t=this.defaultLabelField();return{symbol:{type:"text",color:e.fontColor,haloColor:e.haloColor,haloSize:e.haloSize,font:{family:e.fontFamily,size:e.fontSize}},labelExpressionInfo:this.layerDisplayType===n.l.cluster?{expression:`$feature["${t}"]`}:this.serviceType!==n.s.mapImage?{expression:t?this.layer.fields.some((e=>{var l;if(e.name===t)return"coded-value"===(null===(l=null==e?void 0:e.domain)||void 0===l?void 0:l.type)}))?`$feature["${t}"]\nDomainName($feature, "${t}")`:`$feature["${t}"]`:null}:null,labelExpression:this.serviceType===n.s.mapImage?`[${t}]`:null,labelPlacement:this.defaultPlacement(),maxScale:this.layer.maxScale||0,minScale:this.layer.minScale||0}}defaultLabelField(){let e=null;return this.layerDisplayType===n.l.cluster?e=this.layer.featureReduction.fields[0].name:"displayField"in this.layer&&this.layer.displayField&&this.layer.fieldsIndex.get(this.layer.displayField)?e=this.layer.displayField:this.layer.fields.find((t=>{if(t.type.toLowerCase().includes("string"))return e=t.name})),e||this.layer.fields[0].name}defaultSymbolProps(e,t){return"light"===t?{fontFamily:"Arial",fontSize:9.75,fontColor:"#696969",haloColor:"#d3d3d3",haloSize:1}:"dark"===t?{fontFamily:"Arial",fontSize:9.75,fontColor:"#d3d3d3",haloColor:"#696969",haloSize:1}:{fontFamily:"Arial",fontSize:9.75,fontColor:e||"#696969",haloColor:"#d3d3d3",haloSize:.75}}defaultPlacement(){var e;return this.layerDisplayType===n.l.cluster&&"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type)?"always-horizontal":"point"===this.layerGeometryType||"multipoint"===this.layerGeometryType?"above-center":"polyline"===this.layerGeometryType?"center-along":"polygon"===this.layerGeometryType?"always-horizontal":null}focusLastLabelClass(){setTimeout((()=>requestAnimationFrame((()=>{const e=this.hostElement.shadowRoot.querySelectorAll("arcgis-label-content");(null==e?void 0:e.length)&&e[e.length-1].setFocus()}))),200)}labelSwitchAndContent(){return(0,i.h)("div",null,(0,i.h)("calcite-label",{class:"enable-label",alignment:"start",layout:"inline-space-between"},this.strings.enableLabels,(0,i.h)("calcite-switch",{ref:e=>this.labelSwitch=e,scale:"s",class:"label-switch",checked:this.getLabelEnabledProp(),onCalciteSwitchChange:e=>{const t=e.target.checked;switch(this.layerDisplayType){case n.l.feature:this.layer.labelsVisible=t;break;case n.l.cluster:this.layer.featureReduction.labelsVisible=t;break;default:this.layer.labelsVisible=t}this.enableDisableLabel(t),this.internalLabelUpdated.emit(!0)}})),(0,i.h)("div",{id:"labelDiv_Id"},(0,i.h)("div",{id:"SortableComponents_Id",class:"component-ul"},this.labelComponents)))}render(){const e=(0,i.h)("calcite-fab",{id:"addComponentBtn_Id",icon:"plus",slot:"fab",scale:"s",appearance:"outline-fill",kind:"neutral",label:this.strings.addLabel,text:this.strings.addLabel,"text-enabled":!0});return(0,i.h)(i.H,{style:this.calciteFlowProps?{}:{display:"flex",flex:"1 1 auto",overflow:"hidden"}},this.calciteFlowProps?(0,i.h)("div",{dir:(0,h.g)(this.hostElement)},this.labelSwitchAndContent()):(0,i.h)("calcite-flow",{dir:(0,h.g)(this.hostElement)},(0,i.h)("calcite-flow-item",{id:"labelFlowItem_Id",heading:this.strings.labelFeatures,description:this.hideLayerTitle?void 0:this.layer.title,closable:this.dismissible,onCalciteFlowItemClose:e=>{e.stopPropagation(),this.closeLabelPopovers.emit(),this.arcgisLabelDismissedChange.emit()},ref:e=>this.flowItemNode=e},this.labelSwitchAndContent(),e)))}get hostElement(){return(0,i.d)(this)}};m.style=".enable-label{background-color:var(--arcgis-app-background);display:flex;padding:var(--arcgis-app-cap-spacing) var(--arcgis-app-cap-spacing-half) var(--arcgis-app-cap-spacing-quarter);border-bottom:solid 1px var(--arcgis-app-border)}.enable-label-label{display:flex;flex-flow:column nowrap;flex:1 0 0%;overflow:hidden}.label-switch{margin:0;flex:0 0 0%;justify-self:flex-end}.component-ul{margin:0 0 var(--arcgis-app-cap-spacing);padding:0}";const y="label-content-btn-section",p="label-content-btn",f="label-content-btn-text",g="label-content-btn-icon",b=class{constructor(e){(0,i.r)(this,e),this.closeLabelPopovers=(0,i.c)(this,"closeLabelPopovers",7),this.internalLabelUpdated=(0,i.c)(this,"internalLabelUpdated",7),this.labelContentReRender=(0,i.c)(this,"labelContentReRender",7),this.disableLabelPanel=(0,i.c)(this,"disableLabelPanel",7),this.defaultScript="",this.aggregationExpressionMapping=new Map,this.fieldPickListChanges=async e=>{var t,l;e.stopPropagation();const i=null===(l=null===(t=e.detail)||void 0===t?void 0:t.selectedFields)||void 0===l?void 0:l[0];if(i){if(this.serviceType===n.s.mapImage)this.labelClass.labelExpression=`[${i}]`;else if(this.layerDisplayType===n.l.cluster)if(this.aggregationExpressionMapping.has(i))this.labelClass.labelExpressionInfo.expression=this.aggregationExpressionMapping.get(i);else for(const[e,t]of this.aggregationExpressionMapping)e===i&&(this.labelClass.labelExpressionInfo.expression=t);else this.labelClass.labelExpressionInfo=this.layer.fields.some((e=>{var t;if(e.name===i)return"coded-value"===(null===(t=null==e?void 0:e.domain)||void 0===t?void 0:t.type)}))?{expression:`$feature["${i}"]\nDomainName($feature, "${i}")`}:{expression:`$feature["${i}"]`};this.labelContentReRender.emit()}this.closeLabelPopovers.emit()},this.guid=void 0,this.blockOpen=!1,this.labelClass=void 0,this.calciteFlowItem=void 0,this.reRender=void 0}async componentWillLoad(){if(this.layer=c.l.layer,this.mapView=c.l.mapView,this.portal=c.l.portal,this.config=c.l.config,this.strings=c.l.strings,this.currentLanguage=c.l.currentLanguage,this.layerDisplayType=c.l.layerDisplayType,this.serviceType=c.l.serviceType,this.popupTemplate=this.layerDisplayType===n.l.feature?this.layer.popupTemplate:this.layer.featureReduction.popupTemplate,this.labelFields=await this.getFieldsForLabeling(),this.defaultScript=`// ${this.strings.arcadeScriptLine1} \n// ${this.strings.arcadeScriptLine2}\n// $feature.name + " " + $feature.status\n`,this.calciteFlowItem||(this.calciteFlowItem=this.hostElement.closest("#labelFlowItem_Id")),this.layerDisplayType===n.l.cluster){[this.binLabelCreator,this.clusterLabelCreator]=await(0,s.l)(["esri/smartMapping/labels/bins","esri/smartMapping/labels/clusters"]);const e=async e=>{var t,l;let i;i="binning"===(null===(t=this.layer.featureReduction)||void 0===t?void 0:t.type)?await this.binLabelCreator.getLabelSchemes({layer:this.layer,field:e}):await this.clusterLabelCreator.getLabelSchemes({layer:this.layer,renderer:null===(l=this.layer)||void 0===l?void 0:l.renderer,view:this.mapView,field:e}),[null==i?void 0:i.primaryScheme,...null==i?void 0:i.secondarySchemes].forEach((e=>{var t,l,i;this.aggregationExpressionMapping.set(null==e?void 0:e.fieldName,null===(i=null===(l=null===(t=null==e?void 0:e.labelingInfo)||void 0===t?void 0:t[0])||void 0===l?void 0:l.labelExpressionInfo)||void 0===i?void 0:i.expression)}))},t=[];this.labelFields.forEach((l=>{t.push(e(l.name))})),await Promise.all(t)}}componentDidLoad(){this.addScaleRangeSlider()}componentDidUpdate(){this.internalLabelUpdated.emit()}disconnectedCallback(){this.arcgisFieldPickList&&document.body.removeChild(this.arcgisFieldPickList),this.labelStyle&&document.body.removeChild(this.labelStyle),this.popoverRenameForm&&document.body.removeChild(this.popoverRenameForm),this.labelFilter&&document.body.removeChild(this.labelFilter)}async setFocus(){this.blockOpen&&(this.blockOptions.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),this.blockOptions.setFocus())}calciteBlockToggleHandler(){this.closeLabelPopovers.emit()}labelContentReRenderHandler(e){e.stopPropagation(),this.reRender=!this.reRender}closeLabelPopoversHandler(){this.arcgisFieldPickList&&(document.body.removeChild(this.arcgisFieldPickList),this.arcgisFieldPickList=null,this.attributesBtn.focus()),this.labelStyle&&(document.body.removeChild(this.labelStyle),this.labelStyle=null,this.styleBtn.focus()),this.popoverRenameForm&&(document.body.removeChild(this.popoverRenameForm),this.popoverRenameForm=null,this.blockOptions.setFocus()),this.labelFilter&&(document.body.removeChild(this.labelFilter),this.labelFilter=null,this.filterBtn.focus()),this.disableLabelPanel.emit(!1)}notifySymbolChangesHandler(e){this.guid===e.detail&&(e.stopPropagation(),this.labelContentReRender.emit())}notifyFilterUpdatedHandler(e){this.guid===e.detail&&(e.stopPropagation(),this.labelContentReRender.emit())}renameComponentHandler(e){this.guid===e.detail&&(this.closeLabelPopovers.emit(),e.stopPropagation(),this.popoverRenameForm||(this.popoverRenameForm=document.createElement("arcgis-popover-rename-form"),this.popoverRenameForm.guid=this.guid,this.popoverRenameForm.refElement=this.hostElement,this.popoverRenameForm.popoverPanelWidth=this.hostElement.getBoundingClientRect().width,this.popoverRenameForm.intlRenameHeader=this.strings.popoverRenameHeader,this.popoverRenameForm.intlOk=this.strings.ok,this.popoverRenameForm.intlCancel=this.strings.cancel,this.popoverRenameForm.intlClose=this.strings.close,this.popoverRenameForm.inputValue=this.labelClass.name||this.getDisplayFieldName()||this.strings.label,document.body.appendChild(this.popoverRenameForm),this.disableLabelPanel.emit(!0)))}popoverRenameFormEventHandler(e){this.guid===e.detail[0]&&(e.stopPropagation(),this.closeLabelPopovers.emit(),e.detail[1]&&(this.labelClass.name=e.detail[1],this.labelContentReRender.emit()))}async getFieldsForLabeling(){var e;if(this.layerDisplayType===n.l.feature){const t=await(0,r.j)(this.layer);if(null===(e=this.popupTemplate)||void 0===e?void 0:e.fieldInfos){let e=[];return t.filter((e=>["string","small-integer","big-integer","integer","single","double","long","date","date-only","time-only","timestamp-offset","oid","guid","global-id"].indexOf(e.type)>-1)).forEach((t=>{e=[...e,t.clone()],this.popupTemplate.fieldInfos.find((l=>{l.fieldName===t.name&&(e[e.length-1].alias=l.label)}))})),e}return t}return(0,r.k)(this.popupTemplate,!1)}async openAttributesList(){this.closeLabelPopovers.emit(),this.calciteFlowItem.loading=!0,this.arcgisFieldPickList||(this.arcgisFieldPickList=document.createElement("arcgis-field-pick-list"),this.arcgisFieldPickList.popoverProps={refElement:this.calciteFlowItem,offsetSkidding:50},this.arcgisFieldPickList.fields=this.labelFields,this.arcgisFieldPickList.layer=this.layer,this.arcgisFieldPickList.mapView=this.mapView,this.arcgisFieldPickList.showFieldInfo=this.layerDisplayType===n.l.feature,this.arcgisFieldPickList.selectedFields=[this.labelClass.getLabelExpressionSingleField()]||0,this.arcgisFieldPickList.addEventListener("arcgisFieldPickListDismissed",this.fieldPickListChanges),document.body.appendChild(this.arcgisFieldPickList),this.disableLabelPanel.emit(!0)),this.calciteFlowItem.loading=!1}getFieldNameFromAggregationExpression(){var e,t;if(this.layerDisplayType===n.l.cluster)for(const[l,i]of this.aggregationExpressionMapping)if(i===(null===(t=null===(e=this.labelClass)||void 0===e?void 0:e.labelExpressionInfo)||void 0===t?void 0:t.expression))return l}openLabelStyle(){this.closeLabelPopovers.emit(),this.labelStyle||(this.labelStyle=document.createElement("arcgis-label-content-style"),this.labelStyle.guid=this.guid,this.labelStyle.labelContentRefElement=this.calciteFlowItem,this.labelStyle.labelClass=this.labelClass,document.body.appendChild(this.labelStyle),this.disableLabelPanel.emit(!0))}async openArcadeEditor(){var e,t,l;this.closeLabelPopovers.emit(),this.arcadeEditor||(this.calciteFlowItem.disabled=!0,this.arcadeEditor=document.createElement("arcgis-modal-arcade"),this.arcadeEditor.arcadeScript=(null===(e=this.labelClass.labelExpressionInfo)||void 0===e?void 0:e.expression)||"",this.arcadeEditor.arcadeProfile=this.getArcadeProfile(),this.arcadeEditor.testData=await this.getArcadeTestData(),this.arcadeEditor.addExistingExpressions=!0,this.arcadeEditor.layer=this.layer,this.arcadeEditor.arcadeTitle=(null===(t=this.labelClass.labelExpressionInfo)||void 0===t?void 0:t.title)||this.strings.newExpression,this.arcadeEditor.arcadeTitleEditable=!0,this.arcadeEditor.returnPredictOutputType=!1,this.arcadeEditor.arcadeTitleEditingEnabled=!(null===(l=this.labelClass.labelExpressionInfo)||void 0===l?void 0:l.title),document.body.appendChild(this.arcadeEditor),this.arcadeEditor.addEventListener("arcgisModalArcadeClose",(e=>this.arcadeSetup(e.detail))))}async arcadeSetup(e){var t;e&&((null===(t=this.labelClass.labelExpressionInfo)||void 0===t?void 0:t.expression)?(this.labelClass.labelExpressionInfo.expression=e.script,this.labelClass.labelExpressionInfo.title=e.title):this.labelClass.labelExpressionInfo={expression:e.script,title:e.title},this.labelContentReRender.emit()),this.calciteFlowItem.disabled=!1,document.body.removeChild(this.arcadeEditor),this.arcadeEditor=null,this.arcadeBtn.setFocus()}getArcadeProfile(){return{id:"labeling",definitions:{$feature:this.layerDisplayType===n.l.cluster?{fields:(0,r.k)(this.popupTemplate,!1)}:this.layer}}}async getArcadeTestData(){try{if(this.layerDisplayType===n.l.cluster)return{profileVariableInstances:{$feature:await(0,r.l)(this.mapView,this.layer,this.popupTemplate)},spatialReference:this.mapView.spatialReference,timeZone:this.mapView.timeZone};let e;return e="subtype-sublayer"===this.layer.type?this.layer.parent.url:this.layer.url,{profileVariableInstances:{$feature:(await(0,r.m)(this.layer,this.mapView)).features[0],$layer:this.layer,$map:this.mapView.map,$datastore:e},spatialReference:this.mapView.spatialReference,timeZone:this.mapView.timeZone}}catch(e){console.log(e)}}getDisplayFieldName(){const e=this.layerDisplayType===n.l.cluster?this.getFieldNameFromAggregationExpression():this.labelClass.getLabelExpressionSingleField(),t=this.labelFields.find((t=>{if(t.name===e)return t}));return(null==t?void 0:t.alias)||e}addScaleRangeSlider(){const{labelClass:e}=this;(0,s.l)(["esri/widgets/ScaleRangeSlider"]).then((([t])=>{var l,i;const a=this.hostElement.shadowRoot.getElementById("slider_Id"),s=new t({view:this.mapView,region:(null===(l=this.portal)||void 0===l?void 0:l.region)||(null===(i=this.portal)||void 0===i?void 0:i.getRegion().toLowerCase())||"wo",minScale:e.minScale||0,maxScale:e.maxScale||0},a);a.insertAdjacentHTML("afterbegin",`<link rel="stylesheet" href="${this.config.jsapiUrl}/themes/light/main.css" />`),s.watch(["minScale","maxScale"],((t,l,i)=>{"minScale"===i?e.minScale=t:"maxScale"===i&&(e.maxScale=t),this.closeLabelPopovers.emit(),this.labelContentReRender.emit()}))}))}render(){var e,t,l;const{blockOpen:a,guid:s,strings:o}=this,r=this.serviceType===n.s.feature||this.serviceType===n.s.mapImage&&(null===(t=null===(e=this.layer.layer.capabilities)||void 0===e?void 0:e.exportMap)||void 0===t?void 0:t.supportsArcadeExpressionForLabeling),c=(0,i.h)("calcite-label",null,o.labelAttribute,(0,i.h)("div",{class:"field-expression-div"},(0,i.h)("div",{class:r?"label-content-btn-exp":y},(0,i.h)("button",{ref:e=>this.attributesBtn=e,class:p,title:o.field,onClick:e=>{e.stopPropagation(),this.openAttributesList()}},(0,i.h)("span",{class:f},this.getDisplayFieldName()||(null===(l=this.labelClass.labelExpressionInfo)||void 0===l?void 0:l.title)||o.newExpression),(0,i.h)("span",{class:g},(0,i.h)("calcite-icon",{scale:"s",icon:"chevron-down"})))),r&&(0,i.h)("calcite-action",{ref:e=>this.arcadeBtn=e,scale:"s",text:o.expression,onClick:e=>{e.stopPropagation(),this.openArcadeEditor()}},(0,i.h)("calcite-icon",{scale:"s",icon:"code"})))),d=(0,i.h)("calcite-label",null,o.filter,(0,i.h)("div",{class:y},(0,i.h)("button",{ref:e=>this.filterBtn=e,class:p,title:o.editLabelFilter,onClick:e=>{e.stopPropagation(),this.closeLabelPopovers.emit(),this.labelFilter||(this.labelFilter=document.createElement("arcgis-label-content-filter"),this.labelFilter.guid=this.guid,this.labelFilter.labelFilterRefElement=this.calciteFlowItem,this.labelFilter.labelClass=this.labelClass,document.body.appendChild(this.labelFilter),this.disableLabelPanel.emit(!0))}},(0,i.h)("span",{class:f},o.editLabelFilter),(0,i.h)("span",{class:g},(0,i.h)("calcite-icon",{scale:"s",icon:"chevron-down"}))))),m=(0,i.h)("calcite-label",null,o.labelStyle,(0,i.h)("div",{class:y},(0,i.h)("button",{ref:e=>this.styleBtn=e,class:p,title:o.editLabelStyle,onClick:e=>{e.stopPropagation(),this.openLabelStyle()}},(0,i.h)("span",{class:f},o.editLabelStyle),(0,i.h)("span",{class:g},(0,i.h)("calcite-icon",{scale:"s",icon:"chevron-down"}))))),b=(0,i.h)("calcite-label",null,o.visibleRange,(0,i.h)("div",{id:"slider_Id"}));return(0,i.h)(i.H,null,(0,i.h)("calcite-block",{dir:(0,h.g)(this.hostElement),heading:this.labelClass.name||this.getDisplayFieldName()||this.strings.label,collapsible:!0,open:a},(0,i.h)("div",{slot:"control"},(0,i.h)("arcgis-calcite-block-options",{ref:e=>this.blockOptions=e,guid:s,intlOptions:o.options,intlDelete:o.delete,intlDuplicate:o.duplicate,intlRename:o.rename,calciteBlockOptions:{hasDelete:!0,hasDuplicate:!0,hasRename:!0}})),(0,i.h)("div",{slot:"icon"},(0,i.h)("calcite-icon",{scale:"m",icon:"label"})),c,this.serviceType===n.s.ogcFeature||this.serviceType===n.s.wfs||this.serviceType===n.s.subtype?null:d,m,b))}get hostElement(){return(0,i.d)(this)}};b.style=".label-content-btn-section{background-color:var(--arcgis-app-background);min-width:100%}.label-content-btn{background:var(--arcgis-app-background-clear);border:1px solid var(--arcgis-app-border);border-radius:var(--arcgis-app-border-radius);display:flex;align-items:center;justify-content:space-between;padding:var(--arcgis-app-cap-spacing-half) var(--arcgis-app-side-spacing-quarter);cursor:pointer;width:100%;text-align:unset;transition:background-color var(--arcgis-app-animation-time-fast) var(--arcgis-app-easing-function), border-color var(--arcgis-app-animation-time-fast) var(--arcgis-app-easing-function)}.label-content-btn:hover{background-color:var(--arcgis-app-background-hover);border-color:var(--arcgis-app-border-hover)}.label-content-btn-exp{width:calc(100% - 32px)}.label-content-btn-exp .label-content-btn{border:none;border-radius:0;border-right:1px solid var(--arcgis-app-border)}.label-content-btn-text{font-family:var(--arcgis-app-font-family);font-size:var(--arcgis-app-font-size-0);flex:0 1 auto;overflow:hidden;padding:0 var(--arcgis-app-side-spacing-eighth);text-overflow:ellipsis;white-space:nowrap}.label-content-btn-icon{flex:0 0 0%;padding:0 var(--arcgis-app-side-spacing-half)}.field-expression-div{align-items:center;display:flex;justify-content:space-between;width:100%;border:1px solid var(--arcgis-app-border);border-radius:var(--arcgis-app-border-radius)}.field-expression-div calcite-action{flex:0 0 auto}#slider_Id{min-width:100%}";const u=class{constructor(e){(0,i.r)(this,e),this.closeLabelPopovers=(0,i.c)(this,"closeLabelPopovers",7),this.notifySymbolChanges=(0,i.c)(this,"notifySymbolChanges",7),this.minMaxOffset={minOffsetX:-20,minOffsetY:-20,maxOffsetX:20,maxOffsetY:20},this.openFontPopover=()=>{var e,t;this.arcgisFontPicker||(this.panelElement.disabled=!0,this.arcgisFontPicker=document.createElement("arcgis-font-picker"),this.arcgisFontPicker.fontMap=this.fontMap,this.arcgisFontPicker.font=null===(t=null===(e=this.labelClass)||void 0===e?void 0:e.symbol)||void 0===t?void 0:t.font,this.arcgisFontPicker.popoverProps={refElement:this.panelElement},this.arcgisFontPicker.addEventListener("arcgisFontPickerDismissed",this.closeFontPopver),this.arcgisFontPicker.addEventListener("arcgisFontPickerChange",this.changeFont),document.body.appendChild(this.arcgisFontPicker))},this.closeFontPopver=()=>{this.arcgisFontPicker&&(this.panelElement.disabled=!1,document.body.removeChild(this.arcgisFontPicker),this.arcgisFontPicker=null,setTimeout((()=>{this.panelElement.setFocus()}),100))},this.changeFont=e=>{var t,l;const i=null==e?void 0:e.detail,a=null===(l=null===(t=this.labelClass)||void 0===t?void 0:t.symbol)||void 0===l?void 0:l.font;i&&a&&(a.family=i.family,a.weight=i.weight,a.style=i.style),this.reRender=!this.reRender,this.notifySymbolChanges.emit(this.guid)},this.guid=void 0,this.labelContentRefElement=void 0,this.labelClass=void 0,this.isOpen=!1,this.reRender=!1}componentWillLoad(){this.layer=c.l.layer,this.portal=c.l.portal,this.strings=c.l.strings,this.layerGeometryType=c.l.layerGeometryType,this.serviceType=c.l.serviceType,this.layerDisplayType=c.l.layerDisplayType,this.fontMap=this.serviceType===n.s.mapImage?d.m:d.f}componentDidLoad(){this.isOpen=!0,setTimeout((()=>requestAnimationFrame((()=>this.panelElement.setFocus()))),200)}async reposition(){var e;null===(e=this.popoverNode)||void 0===e||e.reposition()}async calciteBlockSectionToggleHandler(e){e.stopPropagation();const t=e.composedPath();"haloBlock_Id"===(null==t?void 0:t[0].id)&&(this.labelClass.symbol.haloColor?(this.tempHaloColor=this.labelClass.symbol.haloColor,this.labelClass.symbol.haloColor=null):await(0,s.l)(["esri/Color"]).then((async([e])=>{var t;this.labelClass.symbol.haloColor=this.tempHaloColor||new e("white"),this.labelClass.symbol.haloSize=this.labelClass.symbol.haloSize||.75,this.hostElement.shadowRoot.getElementById("haloColorPicker_Id").color=(null===(t=this.labelClass.symbol.haloColor)||void 0===t?void 0:t.toHex())||"#ffffff"}))),this.notifySymbolChanges.emit(this.guid),this.hostElement.shadowRoot.getElementById("managePopover_Id").reposition()}getPlacementArray(e){var t;return this.layerDisplayType===n.l.cluster&&"binning"===(null===(t=this.layer.featureReduction)||void 0===t?void 0:t.type)?[]:"point"===e||"multipoint"===e?d.p:"polyline"===e?d.a:[]}changeOffset(e){this.labelClass.symbol.xoffset=e.x,this.offsetXElement.value=this.labelClass.symbol.xoffset,this.offsetXYSlider.x=e.x,this.labelClass.symbol.yoffset=e.y,this.offsetYElement.value=this.labelClass.symbol.yoffset,this.offsetXYSlider.y=-e.y,this.notifySymbolChanges.emit(this.guid)}placementSelection(){var e;return this.layerDisplayType===n.l.cluster&&"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type)||!([n.s.feature,n.s.csv,n.s.geojson,n.s.ogcFeature].indexOf(this.serviceType)>-1&&("point"===this.layerGeometryType||"multipoint"===this.layerGeometryType)||this.serviceType===n.s.mapImage&&("point"===this.layerGeometryType||"multipoint"===this.layerGeometryType||"polyline"===this.layerGeometryType))?null:(0,i.h)("calcite-label",null,this.strings.placement,(0,i.h)("calcite-select",{label:this.strings.placement,onCalciteSelectChange:e=>{this.labelClass.labelPlacement=e.currentTarget.selectedOption.value,this.notifySymbolChanges.emit(this.guid)},ref:e=>this.placementNode=e},this.getPlacementArray(this.layerGeometryType).map((e=>(0,i.h)("calcite-option",{value:e,selected:this.labelClass.labelPlacement===e},this.strings[e]||e)))))}render(){var e,t,l,a,o,r,c;const m=this.layerDisplayType===n.l.cluster&&"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type),y=(0,i.h)("calcite-label",null,this.strings.font,(0,i.h)("calcite-button",{alignment:"icon-end-space-between",appearance:"outline-fill",kind:"neutral",iconEnd:"chevron-down",label:(0,d.b)(null===(l=null===(t=this.labelClass)||void 0===t?void 0:t.symbol)||void 0===l?void 0:l.font),width:"full",scale:"m",onClick:this.openFontPopover,ref:e=>this.fontNode=e},(0,d.b)(null===(o=null===(a=this.labelClass)||void 0===a?void 0:a.symbol)||void 0===o?void 0:o.font))),p=(0,i.h)("calcite-label",null,this.strings.size,(0,i.h)("calcite-input",{type:"number",scale:"s",min:5,max:125,value:`${this.labelClass.symbol.font.size/.75||5}`,onCalciteInputInput:e=>{this.waitOnUser(e,(()=>{const t=e.target;this.labelClass.symbol.font.size=.75*Number(t.value),this.notifySymbolChanges.emit(this.guid)}),5)}})),f=(0,i.h)("div",{class:"offset-div"},(0,i.h)("calcite-label",null,this.strings.offset,(0,i.h)("arcgis-xy-slider",{ref:e=>{this.offsetXYSlider=e},x:this.labelClass.symbol.xoffset||0,y:-this.labelClass.symbol.yoffset||0,minX:this.minMaxOffset.minOffsetX,minY:this.minMaxOffset.minOffsetY,maxX:this.minMaxOffset.maxOffsetX,maxY:this.minMaxOffset.maxOffsetY,step:1,snappable:!0,onArcgisXYSliderInput:e=>{e.stopPropagation();const t=e.currentTarget;this.changeOffset({x:t.x||0,y:-t.y||0})}})),(0,i.h)("div",null,(0,i.h)("calcite-label",{scale:"s"},this.strings.offsetX,(0,i.h)("calcite-input",{type:"number",scale:"s",placeholder:this.strings.offsetX,value:`${this.labelClass.symbol.xoffset||0}`,min:this.minMaxOffset.minOffsetX,max:this.minMaxOffset.maxOffsetX,ref:e=>{this.offsetXElement=e},onCalciteInputInput:e=>{this.waitOnUser(e,(()=>{this.changeOffset({x:Number(this.offsetXElement.value)||0,y:Number(this.offsetYElement.value)||0})}),0)}})),(0,i.h)("calcite-label",{scale:"s"},this.strings.offsetY,(0,i.h)("calcite-input",{type:"number",scale:"s",placeholder:this.strings.offsetY,value:`${this.labelClass.symbol.yoffset||0}`,min:this.minMaxOffset.minOffsetY,max:this.minMaxOffset.maxOffsetY,ref:e=>{this.offsetYElement=e},onCalciteInputInput:e=>{this.waitOnUser(e,(()=>{this.changeOffset({x:Number(this.offsetXElement.value)||0,y:Number(this.offsetYElement.value)||0})}),0)}})))),g=(0,i.h)("calcite-label",{alignment:"start",layout:"inline-space-between"},this.strings.allowOverrun,(0,i.h)("calcite-switch",{scale:"s",checked:this.labelClass.allowOverrun,onCalciteSwitchChange:e=>{this.labelClass.allowOverrun=e.target.checked,this.notifySymbolChanges.emit(this.guid)}})),b=(0,i.h)("calcite-label",{alignment:"start",layout:"inline-space-between"},this.strings.repeatLabel,(0,i.h)("calcite-switch",{scale:"s",checked:this.labelClass.repeatLabel,onCalciteSwitchChange:e=>{this.labelClass.repeatLabel=e.target.checked,this.reRender=!this.reRender,this.notifySymbolChanges.emit(this.guid)}})),u=(0,i.h)("calcite-label",null,this.strings.labelRepeat,(0,i.h)("calcite-input",{disabled:!this.labelClass.repeatLabel,type:"number",scale:"s",min:0,value:`${this.labelClass.repeatLabelDistance||0}`,onCalciteInputInput:e=>{this.waitOnUser(e,(()=>{const t=e.target;this.labelClass.repeatLabelDistance=Number(t.value),this.notifySymbolChanges.emit(this.guid)}),0)}})),v=this.panelElement&&(0,i.h)("calcite-block-section",{id:"haloBlock_Id",text:this.strings.halo,toggleDisplay:"switch",open:!!this.labelClass.symbol.haloColor},(0,i.h)("calcite-label",null,this.strings.color,(0,i.h)("arcgis-color-input",{id:"haloColorPicker_Id",color:(null===(r=this.labelClass.symbol.haloColor)||void 0===r?void 0:r.toHex())||"#ffffff",popoverProps:{refElement:this.panelElement,placement:"leading-start",offsetDistance:-Math.round(this.panelElement.getBoundingClientRect().width),offsetSkidding:50},onArcgisColorInputChange:async e=>{const t=e.target.color;await(0,s.l)(["esri/Color"]).then((([e])=>{this.labelClass.symbol.haloColor=new e(t),this.notifySymbolChanges.emit(this.guid)}))},onArcgisColorInputPopoverOpen:()=>{setTimeout((()=>{this.fontNode.disabled=!0,this.placementNode.disabled=!0}),200)},onArcgisColorInputPopoverClose:()=>{this.fontNode.disabled=!1,this.placementNode.disabled=!1}})),(0,i.h)("calcite-label",null,this.strings.size,(0,i.h)("calcite-input",{type:"number",scale:"s",min:1,max:10,value:`${Math.round(this.labelClass.symbol.haloSize/.75||1)}`,onCalciteInputInput:e=>{this.waitOnUser(e,(()=>{const t=e.target;this.labelClass.symbol.haloSize=.75*Number(t.value),this.notifySymbolChanges.emit(this.guid)}),1)}}))),w=this.labelContentRefElement.getBoundingClientRect();return(0,i.h)(i.H,{class:"js-app-flyout"},(0,i.h)("calcite-popover",{dir:(0,h.g)(this.hostElement),id:"managePopover_Id",placement:"leading-start",open:this.isOpen,pointerDisabled:!0,referenceElement:this.labelContentRefElement,offsetDistance:-Math.round(this.labelContentRefElement.getBoundingClientRect().width),offsetSkidding:50,label:"",style:{zIndex:"100"},triggerDisabled:!0,ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{ref:e=>this.panelElement=e,closable:!0,class:"panel",style:{width:`${w.width}px`,maxHeight:.8*w.height+"px"},onCalcitePanelClose:()=>this.closeLabelPopovers.emit()},(0,i.h)("div",{slot:"header-content"},this.strings.labelStyle),(0,i.h)("calcite-block",{heading:"",collapsible:!1,open:!0},y," ",p,(0,i.h)("calcite-label",null,this.strings.color,this.panelElement&&(0,i.h)("arcgis-color-input",{color:(null===(c=this.labelClass.symbol.color)||void 0===c?void 0:c.toHex())||"#ffffff",popoverProps:{refElement:this.panelElement,placement:"leading-start",offsetDistance:-Math.round(this.panelElement.getBoundingClientRect().width),offsetSkidding:50,maxHeight:.8*w.height-52+"px"},onArcgisColorInputChange:async e=>{const t=e.target.color;await(0,s.l)(["esri/Color"]).then((([e])=>{this.labelClass.symbol.color=new e(t),this.notifySymbolChanges.emit(this.guid)}))},onArcgisColorInputPopoverOpen:()=>{setTimeout((()=>{this.fontNode.disabled=!0,this.placementNode.disabled=!0}),200)},onArcgisColorInputPopoverClose:()=>{this.fontNode.disabled=!1,this.placementNode.disabled=!1}})),this.placementSelection(),m||"polyline"!==this.layerGeometryType?f:null,m||"polyline"!==this.layerGeometryType?null:(0,i.h)("div",null,g," ",b," ",u),v))))}waitOnUser(e,t,l){const i=e.target;this.typingHndl&&(clearTimeout(this.typingHndl),this.typingHndl=void 0);const a=i.value;console.log(">",a,"<");const s=parseFloat(a);a?(0,r.i)(i.min)&&(0,r.i)(i.max)&&(i.min>s||i.max<s)?this.typingHndl=setTimeout((()=>{this.typingHndl=void 0,i.min>s?(i.value=`${i.min}`,t(e)):i.max<s&&(i.value=`${i.max}`,t(e))}),750):("-"!==a[0]||0!==s&&!isNaN(s))&&t(e):this.typingHndl=setTimeout((()=>{this.typingHndl=void 0,i.value=`${l}`,t(e)}),2e3)}get hostElement(){return(0,i.d)(this)}};u.style=".offset-div{align-items:center;display:flex;justify-content:space-between;gap:16px}"},41528:(e,t,l)=>{l.d(t,{a:()=>a,b:()=>n,f:()=>s,m:()=>o,p:()=>i});const i=["above-center","above-left","above-right","below-center","below-left","below-right","center-center","center-left","center-right"],a=["above-after","above-along","above-before","above-start","above-end","below-after","below-along","below-before","below-start","below-end","center-after","center-along","center-before","center-start","center-end"],s=new Map;s.set("Abril Fatface Regular",{font:{family:"Abril Fatface",style:"normal",weight:"normal"}}),s.set("Alegreya Bold",{font:{family:"Alegreya",style:"normal",weight:"bold"}}),s.set("Alegreya Bold Italic",{font:{family:"Alegreya",style:"italic",weight:"bold"}}),s.set("Alegreya Italic",{font:{family:"Alegreya",style:"italic",weight:"normal"}}),s.set("Alegreya Regular",{font:{family:"Alegreya",style:"normal",weight:"normal"}}),s.set("Alegreya Sans Italic",{font:{family:"Alegreya Sans",style:"italic",weight:"normal"}}),s.set("Alegreya SC Bold",{font:{family:"Alegreya SC",style:"normal",weight:"bold"}}),s.set("Alegreya SC Italic",{font:{family:"Alegreya SC",style:"italic",weight:"normal"}}),s.set("Alegreya SC Regular",{font:{family:"Alegreya SC",style:"normal",weight:"normal"}}),s.set("Amarante Regular",{font:{family:"Amarante",style:"normal",weight:"normal"}}),s.set("Amatic SC Bold",{font:{family:"Amatic SC",style:"normal",weight:"bold"}}),s.set("Arial Bold",{font:{family:"Arial",style:"normal",weight:"bold"}}),s.set("Arial Bold Italic",{font:{family:"Arial",style:"italic",weight:"bold"}}),s.set("Arial Italic",{font:{family:"Arial",style:"italic",weight:"normal"}}),s.set("Arial Regular",{font:{family:"Arial",style:"normal",weight:"normal"}}),s.set("Arial Unicode MS Bold",{font:{family:"Arial Unicode MS",style:"normal",weight:"bold"}}),s.set("Arial Unicode MS Regular",{font:{family:"Arial Unicode MS",style:"normal",weight:"normal"}}),s.set("Atomic Age Regular",{font:{family:"Atomic Age",style:"normal",weight:"normal"}}),s.set("Audiowide Regular",{font:{family:"Audiowide",style:"normal",weight:"normal"}}),s.set("Avenir Next LT Pro Bold",{font:{family:"Avenir Next LT Pro",style:"normal",weight:"bold"}}),s.set("Avenir Next LT Pro Bold Italic",{font:{family:"Avenir Next LT Pro",style:"italic",weight:"bold"}}),s.set("Avenir Next LT Pro Demi Italic",{font:{family:"Avenir Next LT Pro Demi",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Italic",{font:{family:"Avenir Next LT Pro",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Light Italic",{font:{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Regular",{font:{family:"Avenir Next LT Pro",style:"normal",weight:"normal"}}),s.set("Avenir Next LT Pro Light Italic",{font:{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Light Regular",{font:{family:"Avenir Next LT Pro Light",style:"normal",weight:"normal"}}),s.set("Avenir Next LT Pro Medium Bold",{font:{family:"Avenir Next LT Pro Medium",style:"normal",weight:"bold"}}),s.set("Avenir Next LT Pro Medium Bold Italic",{font:{family:"Avenir Next LT Pro Medium",style:"italic",weight:"bold"}}),s.set("Avenir Next LT Pro Regular Bold",{font:{family:"Avenir Next LT Pro Regular",style:"normal",weight:"bold"}}),s.set("Avenir Next LT Pro Regular Bold Italic",{font:{family:"Avenir Next LT Pro Regular",style:"italic",weight:"bold"}}),s.set("Avenir Next LT Pro Regular Italic",{font:{family:"Avenir Next LT Pro Regular",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Regular Regular",{font:{family:"Avenir Next LT Pro Regular",style:"normal",weight:"normal"}}),s.set("Belleza Regular",{font:{family:"Belleza",style:"normal",weight:"normal"}}),s.set("BellTopo Sans Bold",{font:{family:"BellTopo Sans",style:"normal",weight:"bold"}}),s.set("BellTopo Sans Bold Italic",{font:{family:"BellTopo Sans",style:"italic",weight:"bold"}}),s.set("BellTopo Sans Italic",{font:{family:"BellTopo Sans",style:"italic",weight:"normal"}}),s.set("BellTopo Sans Regular",{font:{family:"BellTopo Sans",style:"normal",weight:"normal"}}),s.set("Black Ops One Regular",{font:{family:"Black Ops One",style:"normal",weight:"normal"}}),s.set("Cabin Sketch Bold",{font:{family:"Cabin Sketch",style:"normal",weight:"bold"}}),s.set("Cabin Sketch Regular",{font:{family:"Cabin Sketch",style:"normal",weight:"normal"}}),s.set("Coming Soon Regular",{font:{family:"Coming Soon",style:"normal",weight:"normal"}}),s.set("FGDC GeoAge Regular",{font:{family:"FGDC GeoAge",style:"normal",weight:"normal"}}),s.set("Homemade Apple Regular",{font:{family:"Homemade Apple",style:"normal",weight:"normal"}}),s.set("IM FELL DW Pica PRO Italic",{font:{family:"IM FELL DW Pica PRO",style:"italic",weight:"normal"}}),s.set("IM FELL DW Pica PRO Regular",{font:{family:"IM FELL DW Pica PRO",style:"normal",weight:"normal"}}),s.set("Josefin Sans Regular",{font:{family:"Josefin Sans",style:"normal",weight:"normal"}}),s.set("Josefin Sans Semibold Italic",{font:{family:"Josefin Sans Semibold",style:"italic",weight:"normal"}}),s.set("Josefin Slab Bold",{font:{family:"Josefin Slab",style:"normal",weight:"bold"}}),s.set("Josefin Slab Bold Italic",{font:{family:"Josefin Slab",style:"italic",weight:"bold"}}),s.set("Josefin Slab Italic",{font:{family:"Josefin Slab",style:"italic",weight:"normal"}}),s.set("Josefin Slab Light Italic",{font:{family:"Josefin Slab Light",style:"italic",weight:"normal"}}),s.set("Josefin Slab Regular",{font:{family:"Josefin Slab",style:"normal",weight:"normal"}}),s.set("Josefin Slab Semibold Italic",{font:{family:"Josefin Slab Semibold",style:"italic",weight:"normal"}}),s.set("Josefin Slab Thin Italic",{font:{family:"Josefin Slab Thin",style:"italic",weight:"normal"}}),s.set("Just Another Hand Regular",{font:{family:"Just Another Hand",style:"normal",weight:"normal"}}),s.set("Kranky Regular",{font:{family:"Kranky",style:"normal",weight:"normal"}}),s.set("Life Savers Bold",{font:{family:"Life Savers",style:"normal",weight:"bold"}}),s.set("Loved By The King Regular",{font:{family:"Loved By The King",style:"normal",weight:"normal"}}),s.set("Merriweather Bold",{font:{family:"Merriweather",style:"normal",weight:"bold"}}),s.set("Merriweather Bold Italic",{font:{family:"Merriweather",style:"italic",weight:"bold"}}),s.set("Merriweather Italic",{font:{family:"Merriweather",style:"italic",weight:"normal"}}),s.set("Merriweather Regular",{font:{family:"Merriweather",style:"normal",weight:"normal"}}),s.set("Montserrat Bold",{font:{family:"Montserrat",style:"normal",weight:"bold"}}),s.set("Montserrat Italic",{font:{family:"Montserrat",style:"italic",weight:"normal"}}),s.set("Montserrat Medium Italic",{font:{family:"Montserrat Medium",style:"italic",weight:"normal"}}),s.set("Montserrat Regular",{font:{family:"Montserrat",style:"normal",weight:"normal"}}),s.set("Montserrat Semibold Italic",{font:{family:"Montserrat Semibold",style:"italic",weight:"normal"}}),s.set("Noto Sans Bold",{font:{family:"Noto Sans",style:"normal",weight:"bold"}}),s.set("Noto Sans Bold Italic",{font:{family:"Noto Sans",style:"italic",weight:"bold"}}),s.set("Noto Sans Italic",{font:{family:"Noto Sans",style:"italic",weight:"normal"}}),s.set("Noto Sans Regular",{font:{family:"Noto Sans",style:"normal",weight:"normal"}}),s.set("Noto Serif Bold",{font:{family:"Noto Serif",style:"normal",weight:"bold"}}),s.set("Noto Serif Bold Italic",{font:{family:"Noto Serif",style:"italic",weight:"bold"}}),s.set("Noto Serif Italic",{font:{family:"Noto Serif",style:"italic",weight:"normal"}}),s.set("Noto Serif Regular",{font:{family:"Noto Serif",style:"normal",weight:"normal"}}),s.set("Old Standard TT Bold",{font:{family:"Old Standard TT",style:"normal",weight:"bold"}}),s.set("Old Standard TT Italic",{font:{family:"Old Standard TT",style:"italic",weight:"normal"}}),s.set("Old Standard TT Regular",{font:{family:"Old Standard TT",style:"normal",weight:"normal"}}),s.set("Orbitron Bold",{font:{family:"Orbitron",style:"normal",weight:"bold"}}),s.set("Orbitron Regular",{font:{family:"Orbitron",style:"normal",weight:"normal"}}),s.set("Oregano Italic",{font:{family:"Oregano",style:"italic",weight:"normal"}}),s.set("Oregano Regular",{font:{family:"Oregano",style:"normal",weight:"normal"}}),s.set("Oswald Bold",{font:{family:"Oswald",style:"normal",weight:"bold"}}),s.set("Oswald Regular",{font:{family:"Oswald",style:"normal",weight:"normal"}}),s.set("Pacifico Regular",{font:{family:"Pacifico",style:"normal",weight:"normal"}}),s.set("Palatino Linotype Regular",{font:{family:"Palatino Linotype",style:"normal",weight:"normal"}}),s.set("Playfair Display Black Regular",{font:{family:"Playfair Display Black",style:"normal",weight:"normal"}}),s.set("Playfair Display Bold",{font:{family:"Playfair Display",style:"normal",weight:"bold"}}),s.set("Playfair Display Bold Italic",{font:{family:"Playfair Display",style:"italic",weight:"bold"}}),s.set("Playfair Display Italic",{font:{family:"Playfair Display",style:"italic",weight:"normal"}}),s.set("Playfair Display Regular",{font:{family:"Playfair Display",style:"normal",weight:"normal"}}),s.set("Playfair Display SC Bold",{font:{family:"Playfair Display SC",style:"normal",weight:"bold"}}),s.set("Playfair Display SC Regular",{font:{family:"Playfair Display SC",style:"normal",weight:"normal"}}),s.set("Redressed Regular",{font:{family:"Redressed",style:"normal",weight:"normal"}}),s.set("Risque Regular",{font:{family:"Risque",style:"normal",weight:"normal"}}),s.set("Roboto Condensed Italic",{font:{family:"Roboto Condensed",style:"italic",weight:"normal"}}),s.set("Roboto Condensed Light Italic",{font:{family:"Roboto Condensed Light",style:"italic",weight:"normal"}}),s.set("Rye Regular",{font:{family:"Rye",style:"normal",weight:"normal"}}),s.set("Special Elite Regular",{font:{family:"Special Elite",style:"normal",weight:"normal"}}),s.set("Syncopate Bold",{font:{family:"Syncopate",style:"normal",weight:"bold"}}),s.set("Syncopate Regular",{font:{family:"Syncopate",style:"normal",weight:"normal"}}),s.set("Tangerine Regular",{font:{family:"Tangerine",style:"normal",weight:"normal"}}),s.set("Ubuntu Bold",{font:{family:"Ubuntu",style:"normal",weight:"bold"}}),s.set("Ubuntu Bold Italic",{font:{family:"Ubuntu",style:"italic",weight:"bold"}}),s.set("Ubuntu Condensed Regular",{font:{family:"Ubuntu Condensed",style:"normal",weight:"normal"}}),s.set("Ubuntu Italic",{font:{family:"Ubuntu",style:"italic",weight:"normal"}}),s.set("Ubuntu Light Bold",{font:{family:"Ubuntu Light",style:"normal",weight:"bold"}}),s.set("Ubuntu Light Bold Italic",{font:{family:"Ubuntu Light",style:"italic",weight:"bold"}}),s.set("Ubuntu Light Italic",{font:{family:"Ubuntu Light",style:"italic",weight:"normal"}}),s.set("Ubuntu Light Regular",{font:{family:"Ubuntu Light",style:"normal",weight:"normal"}}),s.set("Ubuntu Medium Italic",{font:{family:"Ubuntu Medium",style:"italic",weight:"normal"}}),s.set("Ubuntu Mono Bold",{font:{family:"Ubuntu Mono",style:"normal",weight:"bold"}}),s.set("Ubuntu Mono Bold Italic",{font:{family:"Ubuntu Mono",style:"italic",weight:"bold"}}),s.set("Ubuntu Mono Italic",{font:{family:"Ubuntu Mono",style:"italic",weight:"normal"}}),s.set("Ubuntu Mono Regular",{font:{family:"Ubuntu Mono",style:"normal",weight:"normal"}}),s.set("Ubuntu Regular",{font:{family:"Ubuntu",style:"normal",weight:"normal"}}),s.set("UnifrakturCook Bold",{font:{family:"UnifrakturCook",style:"normal",weight:"bold"}}),s.set("Vast Shadow Regular",{font:{family:"Vast Shadow",style:"normal",weight:"normal"}}),s.set("Walter Turncoat Regular",{font:{family:"Walter Turncoat",style:"normal",weight:"normal"}});const o=new Map;function n(e){return e?"normal"===e.style&&"normal"===e.weight?`${e.family} Regular${"BellTopo Sans"===e.family?"(Beta)":""}`:"normal"===e.style&&"bold"===e.weight?`${e.family} Bold`:"italic"===e.style&&"normal"===e.weight?`${e.family} Italic`:"italic"===e.style&&"bold"===e.weight?`${e.family} Bold Italic`:"Arial Regular":""}o.set("Arial Bold",{font:{family:"Arial",style:"normal",weight:"bold"}}),o.set("Arial Bold Italic",{font:{family:"Arial",style:"italic",weight:"bold"}}),o.set("Arial Italic",{font:{family:"Arial",style:"italic",weight:"normal"}}),o.set("Arial Regular",{font:{family:"Arial",style:"normal",weight:"normal"}}),o.set("Arial Unicode MS Bold",{font:{family:"Arial Unicode MS",style:"normal",weight:"bold"}}),o.set("Arial Unicode MS Bold Italic",{font:{family:"Arial Unicode MS",style:"italic",weight:"bold"}}),o.set("Arial Unicode MS Italic",{font:{family:"Arial Unicode MS",style:"italic",weight:"normal"}}),o.set("Arial Unicode MS Regular",{font:{family:"Arial Unicode MS",style:"normal",weight:"normal"}}),o.set("Avenir Bold",{font:{family:"Avenir",style:"normal",weight:"bold"}}),o.set("Avenir Bold Italic",{font:{family:"Avenir",style:"italic",weight:"bold"}}),o.set("Avenir Italic",{font:{family:"Avenir",style:"italic",weight:"normal"}}),o.set("Avenir Regular",{font:{family:"Avenir",style:"normal",weight:"normal"}}),o.set("Times New Roman Bold",{font:{family:"Times New Roman",style:"normal",weight:"bold"}}),o.set("Times New Roman Bold Italic",{font:{family:"Times New Roman",style:"italic",weight:"bold"}}),o.set("Times New Roman Italic",{font:{family:"Times New Roman",style:"italic",weight:"normal"}}),o.set("Times New Roman Regular",{font:{family:"Times New Roman",style:"normal",weight:"normal"}}),o.set("Verdana Bold",{font:{family:"Verdana",style:"normal",weight:"bold"}}),o.set("Verdana Bold Italic",{font:{family:"Verdana",style:"italic",weight:"bold"}}),o.set("Verdana Italic",{font:{family:"Verdana",style:"italic",weight:"normal"}}),o.set("Verdana Regular",{font:{family:"Verdana",style:"normal",weight:"normal"}})},48680:(e,t,l)=>{l.d(t,{g:()=>i});const i=()=>[2,1,1,1,3].map((e=>{let t="";for(let l=0;l<e;l++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},27010:(e,t,l)=>{l.d(t,{c:()=>n});var i=l(28384);const a=e=>!("isConnected"in e)||e.isConnected,s=((e,t)=>{let l;return(...e)=>{l&&clearTimeout(l),l=setTimeout((()=>{l=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(a))})(...e)}),2e3)}})(),o=e=>"function"==typeof e?e():e,n=(e,t)=>{const l=((e,t=((e,t)=>e!==t))=>{const l=o(e);let i=new Map(Object.entries(null!=l?l:{}));const a={dispose:[],get:[],set:[],reset:[]},s=()=>{var t;i=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),a.reset.forEach((e=>e()))},n=e=>(a.get.forEach((t=>t(e))),i.get(e)),r=(e,l)=>{const s=i.get(e);t(l,s,e)&&(i.set(e,l),a.set.forEach((t=>t(e,l,s))))},h="undefined"==typeof Proxy?{}:new Proxy(l,{get:(e,t)=>n(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,l)=>(r(t,l),!0)}),c=(e,t)=>(a[e].push(t),()=>{((e,t)=>{const l=e.indexOf(t);l>=0&&(e[l]=e[e.length-1],e.length--)})(a[e],t)});return{state:h,get:n,set:r,on:c,onChange:(t,l)=>{const i=c("set",((e,i)=>{e===t&&l(i)})),a=c("reset",(()=>l(o(e)[t])));return()=>{i(),a()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(c("set",t.set)),t.get&&e.push(c("get",t.get)),t.reset&&e.push(c("reset",t.reset)),t.dispose&&e.push(c("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{a.dispose.forEach((e=>e())),s()},reset:s,forceUpdate:e=>{const t=i.get(e);a.set.forEach((l=>l(e,t,t)))}}})(e,t);return l.use((()=>{if("function"!=typeof i.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const l=(0,i.g)();l&&((e,t,l)=>{const i=e.get(t);i?i.includes(l)||i.push(l):e.set(t,[l])})(e,t,l)},set:t=>{const l=e.get(t);l&&e.set(t,l.filter(i.f)),s(e)},reset:()=>{e.forEach((e=>e.forEach(i.f))),s(e)}}})()),l}},59542:(e,t,l)=>{l.d(t,{l:()=>i});const i=(0,l(27010).c)({layer:null,mapView:null,portal:null,config:null,strings:null,currentLanguage:null,layerGeometryType:null,serviceType:null,layerDisplayType:null}).state},62727:(e,t,l)=>{l.d(t,{a:()=>o,g:()=>h});var i=l(18869),a=l(81068),s=l(28384);function o(e){var t,l,s;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(s=null===(l=e.shadowRoot)||void 0===l?void 0:l.ownerDocument)||void 0===s?void 0:s.documentElement,n=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return a.l.has(n)?a.l.get(n):a.l.has(n.slice(0,2))?a.l.get(n.slice(0,2)):"en"}const n={};function r(e,t){const l=`${e}${t}`;return n[l]||(n[l]=function(e,t){return new Promise(((l,i)=>{fetch((0,s.a)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?l(e.json()):i()}),(()=>i()))}))}(e,t)),n[l]}async function h(e,t){const l=t||e.tagName.toLowerCase(),s=o(e),n=function(e){var t,l,s;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(s=null===(l=e.shadowRoot)||void 0===l?void 0:l.ownerDocument)||void 0===s?void 0:s.documentElement,n=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return a.l.has(n)?a.l.get(n):a.l.has(n.slice(0,2))?n:"en"}(e);let h;try{h=await r(l,s)}catch(e){console.warn(`no locale for ${l} (${s}) loading default locale en.`),h=await r(l,"en")}return[h,s,n]}}}]);