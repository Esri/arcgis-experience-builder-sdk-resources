"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[92999,70324],{92999:(e,n,t)=>{t.r(n),t.d(n,{executeScript:()=>X,extend:()=>_,extractFieldLiterals:()=>J,findFunctionCalls:()=>Z,functionHelper:()=>L,referencesFunction:()=>B,referencesMember:()=>j,validateScript:()=>W});var r=t(47817),o=t(77802),a=t(70324);t(58574),t(68700),t(64493),t(41083),t(79571),t(80404),t(89289);const i=100;function c(e){return e instanceof Error?(0,r.F)(e):(0,r.F)(new Error(e))}function l(e){return(0,r.G)(e)}function u(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(h(e,n.arguments[r]));return(0,r.P)(t)}function s(e,n,t){return(0,r.D)(((r,o)=>{u(e,n).then((a=>{try{r(t(e,n,a))}catch(e){o(e)}}),o)}))}function f(e,n,t){try{return u(e,n).then((o=>{try{const a=t(e,n,o);return function(e){return e&&"function"==typeof e.then}(a)?a:(0,r.G)(a)}catch(e){return c(e)}}))}catch(e){return c(e)}}function h(e,n,t){try{if(n.breakpoint&&!0!==t)return n.breakpoint().then((()=>h(e,n,!0)));switch(n.type){case"VariableDeclarator":return function(e,n){try{let t=null;return t=null===n.init?(0,r.G)(null):h(e,n.init),null!==e.localScope?t.then((t=>(0,r.D)((r=>{if(t===o.f&&(t=null),"Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const a=n.id.name.toLowerCase();e.localScope[a]={value:t,valueset:!0,node:n.init},r(o.f)})))):t.then((t=>(0,r.D)((r=>{if("Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const a=n.id.name.toLowerCase();t===o.f&&(t=null),e.globalScope[a]={value:t,valueset:!0,node:n.init},r(o.f)}))))}catch(e){return c(e)}}(e,n);case"VariableDeclaration":return v(e,n,0);case"BlockStatement":return function(e,n){try{return I(e,n,0)}catch(e){return c(e)}}(e,n);case"FunctionDeclaration":return function(e,n){try{const t=n.id.name.toLowerCase();return e.globalScope[t]={valueset:!0,node:null,value:new o.t(n,e)},(0,r.G)(o.f)}catch(e){return c(e)}}(e,n);case"ReturnStatement":return function(e,n){return(0,r.D)(((t,r)=>{null===n.argument?t(new o.l(o.f)):h(e,n.argument).then((e=>{try{t(new o.l(e))}catch(e){r(e)}}),r)}))}(e,n);case"IfStatement":return function(e,n){return(0,r.D)(((t,r)=>{"AssignmentExpression"!==n.test.type&&"UpdateExpression"!==n.test.type?h(e,n.test).then((a=>{try{!0===a?h(e,n.consequent).then(t,r):!1===a?null!==n.alternate?h(e,n.alternate).then(t,r):t(o.f):r(new Error((0,o.e)(n.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(e){r(e)}}),r):r(new Error((0,o.e)(n.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ExpressionStatement":return function(e,n){try{return"AssignmentExpression"===n.expression.type?h(e,n.expression):h(e,n.expression).then((e=>(0,r.D)((n=>{n(e===o.f?o.f:new o.T(e))}))))}catch(e){return(0,r.F)(e)}}(e,n);case"UpdateExpression":return function(e,n){try{const t=n.argument;if("MemberExpression"===t.type){const a={t:null};return h(e,t.object).then((n=>{let o=null;return a.t=n,!0===t.computed?o=h(e,t.property):"Identifier"===t.property.type&&(o=(0,r.G)(t.property.name)),o})).then((e=>(0,r.D)((t=>{const r=a.t;let i;if((0,o.Z)(r)){if(!(0,o.w)(e))throw new Error("Invalid Parameter");if(e<0&&(e=r.length+e),e<0||e>=r.length)throw new Error("Assignment outside of array bounds");i=(0,o.X)(r[e]),r[e]="++"===n.operator?i+1:i-1}else if(r instanceof o.g){if(!1===(0,o.F)(e))throw new Error("Dictionary accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");i=(0,o.X)(r.field(e)),r.setField(e,"++"===n.operator?i+1:i-1)}else{if(!(r instanceof o.i))throw(0,o.E)(r)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,o.F)(e))throw new Error("Feature accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");i=(0,o.X)(r.field(e)),r.setField(e,"++"===n.operator?i+1:i-1)}!1===n.prefix?t(i):t("++"===n.operator?i+1:i-1)}))))}return(0,r.D)(((t,r)=>{const a="Identifier"===n.argument.type?n.argument.name.toLowerCase():"";if(!a)throw new Error("Invalid identifier");let i;return null!==e.localScope&&void 0!==e.localScope[a]?(i=(0,o.X)(e.localScope[a].value),e.localScope[a]={value:"++"===n.operator?i+1:i-1,valueset:!0,node:n},void(!1===n.prefix?t(i):t("++"===n.operator?i+1:i-1))):void 0!==e.globalScope[a]?(i=(0,o.X)(e.globalScope[a].value),e.globalScope[a]={value:"++"===n.operator?i+1:i-1,valueset:!0,node:n},void(!1===n.prefix?t(i):t("++"===n.operator?i+1:i-1))):void r(new Error("Variable not recognised"))}))}catch(e){return(0,r.F)(e)}}(e,n);case"AssignmentExpression":return function(e,n){return(0,r.D)(((t,a)=>{const i=n.left;if("MemberExpression"===i.type)h(e,n.right).then((c=>{try{h(e,i.object).then((l=>{try{let u=null;if(!0===i.computed)u=h(e,i.property);else{if("Identifier"!==i.property.type)throw new Error("Expected computed or identifier for assignemnt target");u=(0,r.G)(i.property.name)}u.then((e=>{try{if((0,o.Z)(l)){if(!(0,o.w)(e))throw new Error("Invalid Parameter");if(e<0&&(e=l.length+e),e<0||e>l.length)throw new Error("Assignment outside of array bounds");if(e===l.length){if("="!==n.operator)throw new Error("Invalid Parameter");l[e]=m(c,n.operator,l[e],n)}else l[e]=m(c,n.operator,l[e],n)}else if(l instanceof o.g){if(!1===(0,o.F)(e))throw new Error("Dictionary accessor must be a string");if(!0===l.hasField(e))l.setField(e,m(c,n.operator,l.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");l.setField(e,m(c,n.operator,null,n))}}else{if(!(l instanceof o.i))throw(0,o.E)(l)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,o.F)(e))throw new Error("Feature accessor must be a string");if(!0===l.hasField(e))l.setField(e,m(c,n.operator,l.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");l.setField(e,m(c,n.operator,null,n))}}t(o.f)}catch(e){a(e)}}),a)}catch(e){a(e)}}),a)}catch(e){a(e)}}),a);else{const r=i.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[r])return void h(e,n.right).then((i=>{try{e.localScope[r]={value:m(i,n.operator,e.localScope[r].value,n),valueset:!0,node:n.right},t(o.f)}catch(e){a(e)}}),a);void 0!==e.globalScope[r]?h(e,n.right).then((i=>{try{e.globalScope[r]={value:m(i,n.operator,e.globalScope[r].value,n),valueset:!0,node:n.right},t(o.f)}catch(e){a(e)}}),a):a(new Error("Cannot assign undeclared variable"))}}))}(e,n);case"ForStatement":return function(e,n){try{return null!==n.init?h(e,n.init).then((()=>(0,r.D)(((t,r)=>{g(e,n,{testResult:!0,lastAction:o.f},(e=>{t(e)}),(e=>{r(e)}),0)})))):(0,r.D)(((t,r)=>{g(e,n,{testResult:!0,lastAction:o.f},(e=>{t(e)}),(e=>{r(e)}),0)}))}catch(e){return(0,r.F)(e)}}(e,n);case"ForInStatement":return function(e,n){return(0,r.D)(((t,a)=>{h(e,n.right).then((i=>{try{let c=null;c="VariableDeclaration"===n.left.type?h(e,n.left):(0,r.G)(),c.then((()=>{try{let r="";if("VariableDeclaration"===n.left.type){const e=n.left.declarations[0].id;"Identifier"===e.type&&(r=e.name)}else"Identifier"===n.left.type&&(r=n.left.name);if(!r)throw new Error((0,o.e)(n,"RUNTIME","INVALIDVARIABLE"));r=r.toLowerCase();let c=null;if(null!==e.localScope&&void 0!==e.localScope[r]&&(c=e.localScope[r]),null===c&&void 0!==e.globalScope[r]&&(c=e.globalScope[r]),null===c)return void a(new Error((0,o.e)(n,"RUNTIME","VARIABLENOTDECLARED")));(0,o.Z)(i)||(0,o.F)(i)?E(e,n,i,{reject:a,resolve:t},c):(0,o.E)(i)?function(e,n,t,r,a,i){try{if(void 0===i&&(i="i"),0===t.length)return void r.resolve(o.f);w(e,n,t,a,0,i,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}(e,n,i,{reject:a,resolve:t},c):i instanceof o.g||i instanceof o.i?function(e,n,t,r,o){try{E(e,n,t.keys(),r,o,"k")}catch(e){r.reject(e)}}(e,n,i,{reject:a,resolve:t},c):(0,o.k)(i)?y(i.iterator(e.abortSignal),e,n,i,c,(e=>{t(e)}),(e=>{a(e)}),0):E(e,n,[],{reject:a,resolve:t},c)}catch(e){a(e)}}),a)}catch(e){a(e)}}),a)}))}(e,n);case"BreakStatement":return(0,r.G)(o._);case"EmptyStatement":return(0,r.G)(o.f);case"ContinueStatement":return(0,r.G)(o.j);case"TemplateElement":return function(e,n){return(0,r.G)(n.value?n.value.cooked:"")}(0,n);case"TemplateLiteral":return function(e,n){return(0,r.D)((t=>{const r=[];(0,o.O)(n.expressions,((n,t,a,i)=>h(e,t).then((e=>{r[a]=(0,o.K)(e)})))).then((()=>{let e="",o=0;for(const t of n.quasis)e+=t.value?t.value.cooked:"",!1===t.tail&&(e+=r[o]?r[o]:"",o++);t(e)}))}))}(e,n);case"Identifier":return b(e,n);case"MemberExpression":return function(e,n){try{return h(e,n.object).then((t=>{try{return null===t?(0,r.F)(new Error((0,o.e)(n,"RUNTIME","NOTFOUND"))):!1===n.computed?"Identifier"===n.property.type?t instanceof o.g||t instanceof o.i?(0,r.G)(t.field(n.property.name)):t instanceof r.r?(0,r.G)(A(t,n.property.name,0,n)):(0,r.F)(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE"))):(0,r.F)(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE"))):h(e,n.property).then((e=>(0,r.D)(((a,i)=>{if(t instanceof o.g||t instanceof o.i)(0,o.F)(e)?a(t.field(e)):i(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE")));else if(t instanceof r.r)(0,o.F)(e)?a(A(t,e,0,n)):i(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE")));else if((0,o.Z)(t))if((0,o.w)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length+e),e>=t.length||e<0)throw new Error((0,o.e)(n,"RUNTIME","OUTOFBOUNDS"));a(t[e])}else i(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE")));else if((0,o.E)(t))if((0,o.w)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length()+e),e>=t.length()||e<0)throw new Error((0,o.e)(n,"RUNTIME","OUTOFBOUNDS"));a(t.get(e))}else i(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE")));else if((0,o.F)(t))if((0,o.w)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length+e),e>=t.length||e<0)throw new Error((0,o.e)(n,"RUNTIME","OUTOFBOUNDS"));a(t[e])}else i(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE")));else i(new Error((0,o.e)(n,"RUNTIME","INVALIDTYPE")))}))))}catch(e){return c(e)}}))}catch(e){return c(e)}}(e,n);case"Literal":return l(n.value);case"CallExpression":return function(e,n){try{if("Identifier"!==n.callee.type)return c((0,o.e)(n,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[n.callee.name.toLowerCase()]){const t=e.localScope[n.callee.name.toLowerCase()];return t.value instanceof o.S?t.value.fn(e,n):t.value instanceof o.t?U(e,n,t.value.definition):c((0,o.e)(n,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[n.callee.name.toLowerCase()]){const t=e.globalScope[n.callee.name.toLowerCase()];return t.value instanceof o.S?t.value.fn(e,n):t.value instanceof o.t?U(e,n,t.value.definition):c((0,o.e)(n,"RUNTIME","NOTAFUNCTION"))}return c((0,o.e)(n,"RUNTIME","NOTFOUND"))}catch(e){return c(e)}}(e,n);case"UnaryExpression":return function(e,n){try{return h(e,n.argument).then((e=>(0,r.D)(((t,r)=>{(0,o.I)(e)&&"!"===n.operator?t(!e):"-"===n.operator?t(-1*(0,o.X)(e)):"+"===n.operator?t(1*(0,o.X)(e)):"~"===n.operator?t(~(0,o.X)(e)):r(new Error((0,o.e)(n,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))))}catch(e){return c(e)}}(e,n);case"BinaryExpression":return function(e,n){try{return(0,r.P)([h(e,n.left),h(e,n.right)]).then((e=>(0,r.D)(((t,r)=>{const a=e[0],i=e[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":t((0,o.y)((0,o.X)(a),(0,o.X)(i),n.operator));case"==":t((0,o.B)(a,i));break;case"!=":t(!(0,o.B)(a,i));break;case"<":case">":case"<=":case">=":t((0,o.q)(a,i,n.operator));break;case"+":(0,o.F)(a)||(0,o.F)(i)?t((0,o.K)(a)+(0,o.K)(i)):t((0,o.X)(a)+(0,o.X)(i));break;case"-":t((0,o.X)(a)-(0,o.X)(i));break;case"*":t((0,o.X)(a)*(0,o.X)(i));break;case"/":t((0,o.X)(a)/(0,o.X)(i));break;case"%":t((0,o.X)(a)%(0,o.X)(i));break;default:r(new Error((0,o.e)(n,"RUNTIME","OPERATORNOTRECOGNISED")))}}))))}catch(e){return c(e)}}(e,n);case"LogicalExpression":return function(e,n){return(0,r.D)(((t,r)=>{"AssignmentExpression"!==n.left.type&&"UpdateExpression"!==n.left.type?"AssignmentExpression"!==n.right.type&&"UpdateExpression"!==n.right.type?h(e,n.left).then((a=>{try{if(!(0,o.I)(a))throw new Error((0,o.e)(n,"RUNTIME","ONLYBOOLEAN"));switch(n.operator){case"||":!0===a?t(a):h(e,n.right).then((e=>{try{if(!(0,o.I)(e))throw new Error((0,o.e)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;case"&&":!1===a?t(a):h(e,n.right).then((e=>{try{if(!(0,o.I)(e))throw new Error((0,o.e)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;default:throw new Error((0,o.e)(n,"RUNTIME","ONLYORORAND"))}}catch(e){r(e)}}),r):r(new Error((0,o.e)(n.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error((0,o.e)(n.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ConditionalExpression":return c((0,o.e)(n,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,n){try{const t=[];for(let r=0;r<n.elements.length;r++)t.push(h(e,n.elements[r]));return(0,r.P)(t).then((e=>(0,r.D)(((t,r)=>{for(let t=0;t<e.length;t++){if((0,o.v)(e[t]))return void r(new Error((0,o.e)(n,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[t]===o.f&&(e[t]=null)}t(e)}))))}catch(e){return c(e)}}(e,n);case"ObjectExpression":return function(e,n){try{const t=[];for(let r=0;r<n.properties.length;r++)t.push(h(e,n.properties[r]));return(0,r.P)(t).then((e=>(0,r.D)((n=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];if((0,o.v)(r.value))throw new Error("Illegal Argument");if(!1===(0,o.F)(r.key))throw new Error("Illegal Argument");r.value===o.f?t[r.key.toString()]=null:t[r.key.toString()]=r.value}const r=new o.g(t);r.immutable=!1,n(r)}))))}catch(e){return c(e)}}(e,n);case"Property":return function(e,n){try{return h(e,n.value).then((t=>(0,r.D)((r=>{"Identifier"===n.key.type?r({key:n.key.name,value:t}):h(e,n.key).then((e=>{r({key:e,value:t})}))}))))}catch(e){return(0,r.F)(e)}}(e,n);default:return c((0,o.e)(n,"RUNTIME","UNREOGNISED"))}}catch(e){return c(e)}}function d(e,n,t){try{return h(e,n.body).then((a=>{try{return t.lastAction=a,t.lastAction===o._||t.lastAction instanceof o.l?(t.testResult=!1,(0,r.G)(t)):null!==n.update?h(e,n.update).then((()=>(0,r.G)(t))):(0,r.G)(t)}catch(e){return(0,r.F)(e)}}))}catch(e){return(0,r.F)(e)}}function g(e,n,t,a,c,l){try{(function(e,n,t){try{return null!==n.test?h(e,n.test).then((a=>{try{return!0===e.abortSignal.aborted?(0,r.F)(new Error("Cancelled")):(t.testResult=a,!1===t.testResult?(0,r.G)(t):!0!==t.testResult?(0,r.F)(new Error((0,o.e)(n,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):d(e,n,t))}catch(e){return(0,r.F)(e)}})):d(e,n,t)}catch(e){return(0,r.F)(e)}})(e,n,t).then((()=>{try{!0===t.testResult?++l>i?(l=0,setTimeout((()=>{g(e,n,t,a,c,l)}),0)):g(e,n,t,a,c,l):t.lastAction instanceof o.l?a(t.lastAction):a(o.f)}catch(e){c(e)}}),(e=>{c(e)}))}catch(e){c(e)}}function p(e,n,t,r,a,c,l,u,s,f){try{if(r<=c)return void u(o.f);a.value="k"===l?t[c]:c,h(e,n.body).then((h=>{try{h instanceof o.l?u(h):h===o._?u(o.f):++f>i?(f=0,setTimeout((()=>{p(e,n,t,r,a,c+1,l,u,s,f)}),0)):p(e,n,t,r,a,c+1,l,u,s,f)}catch(e){s(e)}}),(e=>{s(e)}))}catch(e){s(e)}}function w(e,n,t,r,a,c,l,u,s){try{if(t.length()<=a)return void l(o.f);r.value="k"===c?t.get(a):a,h(e,n.body).then((f=>{f instanceof o.l?l(f):f===o._?l(o.f):++s>i?(s=0,setTimeout((()=>{w(e,n,t,r,a+1,c,l,u,s)}),0)):w(e,n,t,r,a+1,c,l,u,s)}),(e=>{u(e)}))}catch(e){u(e)}}function E(e,n,t,r,a,i){try{if(void 0===i&&(i="i"),0===t.length)return void r.resolve(o.f);p(e,n,t,t.length,a,0,i,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}function y(e,n,t,r,a,c,l,u){try{e.next().then((s=>{try{if(null===s)c(o.f);else{const f=o.i.createFromGraphicLikeObject(s.geometry,s.attributes,r);f._underlyingGraphic=s,a.value=f,h(n,t.body).then((s=>{try{s===o._?c(o.f):s instanceof o.l?c(s):++u>i?(u=0,setTimeout((()=>{y(e,n,t,r,a,c,l,u)}),0)):y(e,n,t,r,a,c,l,u)}catch(e){l(e)}}),(e=>{l(e)}))}}catch(e){l(e)}}),(e=>{l(e)}))}catch(e){l(e)}}function m(e,n,t,r){switch(n){case"=":return e===o.f?null:e;case"/=":return(0,o.X)(t)/(0,o.X)(e);case"*=":return(0,o.X)(t)*(0,o.X)(e);case"-=":return(0,o.X)(t)-(0,o.X)(e);case"+=":return(0,o.F)(t)||(0,o.F)(e)?(0,o.K)(t)+(0,o.K)(e):(0,o.X)(t)+(0,o.X)(e);case"%=":return(0,o.X)(t)%(0,o.X)(e);default:throw new Error((0,o.e)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}function I(e,n,t){try{return t>=n.body.length?(0,r.G)(o.f):(0,r.D)(((r,a)=>{h(e,n.body[t]).then((i=>{try{i instanceof o.l||i===o._||i===o.j||t===n.body.length-1?r(i):I(e,n,t+1).then(r,a)}catch(e){a(e)}}),a)}))}catch(e){return c(e)}}function v(e,n,t){return(0,r.D)(((r,a)=>{t>=n.declarations.length?r(o.f):h(e,n.declarations[t]).then((()=>{t===n.declarations.length-1?r(o.f):v(e,n,t+1).then((()=>{r(o.f)}),a)}),a)}))}let N=0;function A(e,n,t,r){let a;switch(n=n.toLowerCase()){case"hasz":{const n=e.hasZ;return void 0!==n&&n}case"hasm":{const n=e.hasM;return void 0!==n&&n}case"spatialreference":{let n=e.spatialReference._arcadeCacheId;if(void 0===n){let t=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(t=!1),t&&(N++,e.spatialReference._arcadeCacheId=N,n=N)}const t=new o.g({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==n&&(t._arcadeCacheId="SPREF"+n.toString()),t}}switch(e.type){case"extent":switch(n){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const t=e[n];return void 0!==t?t:null}case"type":return"Extent"}break;case"polygon":switch(n){case"rings":return a=e.cache._arcadeCacheId,void 0===a&&(N++,a=N,e.cache._arcadeCacheId=a),new o.s(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,a);case"type":return"Polygon"}break;case"point":switch(n){case"x":case"y":case"z":case"m":return void 0!==e[n]?e[n]:null;case"type":return"Point"}break;case"polyline":switch(n){case"paths":return a=e.cache._arcadeCacheId,void 0===a&&(N++,a=N,e.cache._arcadeCacheId=a),new o.s(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,a);case"type":return"Polyline"}break;case"multipoint":switch(n){case"points":return a=e.cache._arcadeCacheId,void 0===a&&(N++,a=N,e.cache._arcadeCacheId=a),new o.r(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,a,1);case"type":return"Multipoint"}}throw new Error((0,o.e)(r,"RUNTIME","PROPERTYNOTFOUND"))}function b(e,n){return(0,r.D)(((t,r)=>{const a=n.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[a])if(void 0===e.globalScope[a])r(new Error((0,o.e)(n,"RUNTIME","VARIABLENOTFOUND")));else{const n=e.globalScope[a];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=h(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}else{const n=e.localScope[a];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=h(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}}))}const F={};function S(e){return null===e?"":(0,o.Z)(e)||(0,o.E)(e)?"Array":(0,o.P)(e)?"Date":(0,o.F)(e)?"String":(0,o.I)(e)?"Boolean":(0,o.w)(e)?"Number":e instanceof o.x?"Attachment":e instanceof o.z?"Portal":e instanceof o.g?"Dictionary":e instanceof o.i?"Feature":e instanceof r.q?"Point":e instanceof r.x?"Polygon":e instanceof r.v?"Polyline":e instanceof r.B?"Multipoint":e instanceof r.M?"Extent":(0,o.v)(e)?"Function":(0,o.k)(e)?"FeatureSet":(0,o.C)(e)?"FeatureSetCollection":e===o.f?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function R(e,n,t,a){return(0,r.D)(((r,i)=>{h(e,n.arguments[t]).then((c=>{try{if((0,o.B)(c,a))return void h(e,n.arguments[t+1]).then(r,i);{const o=n.arguments.length-t;return 1===o?void h(e,n.arguments[t]).then(r,i):(2===o&&r(null),3===o?void h(e,n.arguments[t+2]).then(r,i):void R(e,n,t+2,a).then(r,i))}}catch(e){i(e)}}),i)}))}function T(e,n,t,a){return(0,r.D)(((r,i)=>{!0===a?h(e,n.arguments[t+1]).then(r,i):3==n.arguments.length-t?h(e,n.arguments[t+2]).then(r,i):h(e,n.arguments[t+2]).then((a=>{try{if(!1===(0,o.I)(a))return void i(new Error("WHEN needs boolean test conditions"));T(e,n,t+2,a).then(r,i)}catch(e){i(e)}}))}))}function O(e,n){try{const t=e.length,o=Math.floor(t/2);return 0===t?(0,r.G)([]):1===t?(0,r.G)([e[0]]):(0,r.D)(((a,i)=>{const c=[O(e.slice(0,o),n),O(e.slice(o,t),n)];(0,r.P)(c).then((e=>{try{x(e[0],e[1],n,[]).then(a,i)}catch(e){i(e)}}),i)}))}catch(e){return c(e)}}function x(e,n,t,o){return(0,r.D)(((r,a)=>{const i=o;e.length>0||n.length>0?e.length>0&&n.length>0?t(e[0],n[0]).then((c=>{try{isNaN(c)&&(c=1),c<=0?(i.push(e[0]),e=e.slice(1)):(i.push(n[0]),n=n.slice(1)),x(e,n,t,o).then(r,a)}catch(e){a(e)}}),a):e.length>0?(i.push(e[0]),x(e=e.slice(1),n,t,o).then(r,a)):n.length>0&&(i.push(n[0]),n=n.slice(1),x(e,n,t,o).then(r,a)):r(o)}))}function D(e,n){const t=e.length,r=Math.floor(t/2);return n||(n=function(e,n){return e<n?-1:e===n?0:1}),0===t?[]:1===t?[e[0]]:function(e,n,t){const r=[];for(;e.length>0||n.length>0;)if(e.length>0&&n.length>0){let o=t(e[0],n[0]);isNaN(o)&&(o=1),o<=0?(r.push(e[0]),e=e.slice(1)):(r.push(n[0]),n=n.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):n.length>0&&(r.push(n[0]),n=n.slice(1));return r}(D(e.slice(0,r),n),D(e.slice(r,t),n),n)}function M(e,n,t){try{const a=e.body;if(t.length!==e.params.length)return c(new Error("Invalid Parameter calls to function."));for(let r=0;r<t.length;r++){const o=e.params[r];"Identifier"===o.type&&(n.localScope[o.name.toLowerCase()]={d:null,value:t[r],valueset:!0,node:null})}return h(n,a).then((e=>(0,r.D)(((n,t)=>{e instanceof o.l?n(e.value):e!==o._?e!==o.j?n(e instanceof o.T?e.value:e):t(new Error("Cannot Continue from a Function")):t(new Error("Cannot Break from a Function"))}))))}catch(e){return(0,r.F)(e)}}function U(e,n,t){return f(e,n,(function(n,r,o){const a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return M(t,a,o)}))}function C(e){return function(){const n={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(n.depthCounter>64)throw new Error("Exceeded maximum function depth");return M(e.definition,n,arguments)}}(0,o.h)(F,s),(0,o.d)(F,s),(0,o.N)(F,s),(0,o.a)(F,s),(0,o.D)(F,s),(0,o.o)(F,s),(0,a.registerFunctions)({functions:F,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:s,standardFunctionAsync:f}),F.typeof=function(e,n){return s(e,n,(function(e,n,t){(0,o.J)(t,1,1);const r=S(t[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},F.iif=function(e,n){return(0,r.D)(((t,a)=>{(0,o.J)(null===n.arguments?[]:n.arguments,3,3),h(e,n.arguments[0]).then((i=>{try{if(!1===(0,o.I)(i))return void a(new Error("IF Function must have a boolean test condition"));(0,r.P)([h(e,n.arguments[1]),h(e,n.arguments[2])]).then((e=>{t(i?e[0]:e[1])}),a)}catch(e){a(e)}}),a)}))},F.decode=function(e,n){return(0,r.D)(((t,r)=>{n.arguments.length<2?r(new Error("Missing Parameters")):2!==n.arguments.length?(n.arguments.length-1)%2!=0?h(e,n.arguments[0]).then((o=>{try{R(e,n,1,o).then(t,r)}catch(e){r(e)}}),r):r(new Error("Must have a default value result.")):h(e,n.arguments[1]).then(t,r)}))},F.when=function(e,n){try{return n.arguments.length<3?c("Missing Parameters"):n.arguments.length%2==0?c("Must have a default value result."):h(e,n.arguments[0]).then((t=>(0,r.D)(((r,a)=>{!1!==(0,o.I)(t)?T(e,n,0,t).then(r,a):a(new Error("WHEN needs boolean test conditions"))}))))}catch(e){return c(e)}},F.sort=function(e,n){return f(e,n,(function(e,n,t){(0,o.J)(t,1,2);let a=t[0];if((0,o.E)(a)&&(a=a.toArray()),!1===(0,o.Z)(a))return c(Error("Illegal Argument"));if(t.length>1)return!1===(0,o.v)(t[1])?c(Error("Illegal Argument")):O(a,C(t[1]));{let e=a;if(0===e.length)return(0,r.G)([]);const n={};for(let t=0;t<e.length;t++){const r=S(e[t]);""!==r&&(n[r]=!0)}if(!0===n.Array||!0===n.Dictionary||!0===n.Feature||!0===n.Point||!0===n.Polygon||!0===n.Polyline||!0===n.Multipoint||!0===n.Extent||!0===n.Function)return(0,r.G)(e.slice(0));let t=0,i="";for(const e in n)t++,i=e;return t>1||"String"===i?e=D(e,(function(e,n){if(null==e||e===o.f)return null==n||n===o.f?0:1;if(null==n||n===o.f)return-1;const t=(0,o.K)(e),r=(0,o.K)(n);return t<r?-1:t===r?0:1})):"Number"===i?e=D(e,(function(e,n){return e-n})):"Boolean"===i?e=D(e,(function(e,n){return e===n?0:n?-1:1})):"Date"===i&&(e=D(e,(function(e,n){return n-e}))),(0,r.G)(e)}}))};const G={failDefferred:c,resolveDeffered:l,fixSpatialReference:o.n,parseArguments:u,standardFunction:s,standardFunctionAsync:f,evaluateIdentifier:b,arcadeCustomFunction:C};for(const e in F)F[e]={value:new o.S(F[e]),valueset:!0,node:null};const P=function(){};function k(e){console.log(e)}P.prototype=F,P.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},P.prototype.pi={value:Math.PI,valueset:!0,node:null};const L=G;function _(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:s,standardFunctionAsync:f,failDefferred:c,evaluateIdentifier:b,arcadeCustomFunctionHandler:C};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)F[e]={value:new o.S(n.functions[e]),valueset:!0,node:null},P.prototype[e]=F[e];for(let e=0;e<n.signatures.length;e++)(0,o.b)(n.signatures[e],"async")}function X(e,n){let t=n.spatialReference;null==t&&(t=new r.O({wkid:102100}));const a=function(e,n){const t=new P;null==e&&(e={}),null==n&&(n={});const r=new o.g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const e in n)t[e]={value:new o.S(n[e]),native:!0,valueset:!0,node:null};for(const n in e)e[n]&&"esri.Graphic"===e[n].declaredClass?t[n]={value:o.i.createFromGraphic(e[n]),valueset:!0,node:null}:t[n]={value:e[n],valueset:!0,node:null};return t}(n.vars,n.customfunctions);return h({spatialReference:t,services:n.services,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:a,console:n.console?n.console:k,lrucache:n.lrucache,interceptor:n.interceptor,localScope:null,depthCounter:1},e.body[0].body).then((e=>(0,r.D)(((n,t)=>{e instanceof o.l&&(e=e.value),e instanceof o.T&&(e=e.value),e===o.f&&(e=null),e!==o._?e!==o.j?e instanceof o.S||e instanceof o.t?t(new Error("Cannot return FUNCTION")):n(e):t(new Error("Cannot return CONTINUE")):t(new Error("Cannot return BREAK"))}))))}function J(e,n){return(0,o.u)(e)}function W(e,n){return(0,o.c)(e,n,"full")}function j(e,n){return(0,o.m)(e,n)}function B(e,n){return(0,o.p)(e,n)}function Z(e){return(0,o.A)(e)}},70324:(e,n,t)=>{t.r(n),t.d(n,{registerFunctions:()=>l});var r=t(47817),o=t(77802),a=t(80404);function i(e){return 0===r.N.indexOf("4.")?r.x.fromExtent(e):new r.x({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function c(e){if((0,o.J)(e,2,2),e[0]instanceof r.r&&e[1]instanceof r.r);else if(e[0]instanceof r.r&&null===e[1]);else if(e[1]instanceof r.r&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function l(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null===t[0]||null===t[1]||(0,a.S)(t[0],t[1])}))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null!==t[0]&&null!==t[1]&&(0,a.g)(t[0],t[1])}))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null!==t[0]&&null!==t[1]&&(0,a.A)(t[0],t[1])}))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null!==t[0]&&null!==t[1]&&(0,a.w)(t[0],t[1])}))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null!==t[0]&&null!==t[1]&&(0,a.x)(t[0],t[1])}))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null!==t[0]&&null!==t[1]&&(0,a.p)(t[0],t[1])}))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null!==t[0]&&null!==t[1]&&(0,a.O)(t[0],t[1])}))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return(0,o.J)(t,2,2),t[0]===t[1]||(t[0]instanceof r.r&&t[1]instanceof r.r?(0,a.d)(t[0],t[1]):!(!(0,o.P)(t[0])||!(0,o.P)(t[1]))&&t[0].getTime()===t[1].getTime())}))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,3,3),t[0]instanceof r.r&&t[1]instanceof r.r)return(0,a.h)(t[0],t[1],(0,o.K)(t[2]));if(t[0]instanceof r.r&&null===t[1])return!1;if(t[1]instanceof r.r&&null===t[0])return!1;if(null===t[0]&&null===t[1])return!1;throw new Error("Illegal Argument")}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null===t[0]||null===t[1]?null:(0,a.j)(t[0],t[1])}))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,i){const c=[];if(0===(i=(0,o.G)(i)).length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if((0,o.Z)(i[0])){const e=(0,o.G)(i[0]);for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof r.r))throw new Error("Illegal Argument");c.push(e[n])}}else{if(!(0,o.E)(i[0])){if(i[0]instanceof r.r)return(0,o.n)((0,o.H)(i[0]),n.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}{const e=(0,o.G)(i[0].toArray());for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof r.r))throw new Error("Illegal Argument");c.push(e[n])}}}else for(let e=0;e<i.length;e++)if(null!==i[e]){if(!(i[e]instanceof r.r))throw new Error("Illegal Argument");c.push(i[e])}return 0===c.length?null:(0,a.k)(c)}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null!==t[0]&&null===t[1]?(0,o.H)(t[0]):null===t[0]?null:(0,a.R)(t[0],t[1])}))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return c(t=(0,o.G)(t)),null===t[0]&&null===t[1]?null:null===t[0]?(0,o.H)(t[1]):null===t[1]?(0,o.H)(t[0]):(0,a.E)(t[0],t[1])}))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,2),!(t[1]instanceof r.M)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");return null===t[1]?null:(0,a.l)(t[0],t[1])}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,2),!(t[1]instanceof r.v)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return[];if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");return null===t[1]?[(0,o.H)(t[0])]:(0,a.y)(t[0],t[1])}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,i){if((0,o.J)(i,1,2),null===(i=(0,o.G)(i))[0])return 0;if((0,o.k)(i[0]))return i[0].sumArea((0,o.L)((0,o.W)(i[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,o.Z)(i[0])||(0,o.E)(i[0])){const e=(0,o.M)(i[0],n.spatialReference);return null===e?0:(0,a.W)(e,(0,o.L)((0,o.W)(i[1],-1)))}if(!(i[0]instanceof r.r))throw new Error("Illegal Argument");return(0,a.W)(i[0],(0,o.L)((0,o.W)(i[1],-1)))}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,i){if((0,o.J)(i,1,2),null===(i=(0,o.G)(i))[0])return 0;if((0,o.k)(i[0]))return i[0].sumArea((0,o.L)((0,o.W)(i[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,o.Z)(i[0])||(0,o.E)(i[0])){const e=(0,o.M)(i[0],n.spatialReference);return null===e?0:(0,a.K)(e,(0,o.L)((0,o.W)(i[1],-1)))}if(!(i[0]instanceof r.r))throw new Error("Illegal Argument");return(0,a.K)(i[0],(0,o.L)((0,o.W)(i[1],-1)))}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,i){if((0,o.J)(i,1,2),null===(i=(0,o.G)(i))[0])return 0;if((0,o.k)(i[0]))return i[0].sumLength((0,o.Q)((0,o.W)(i[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,o.Z)(i[0])||(0,o.E)(i[0])){const e=(0,o.R)(i[0],n.spatialReference);return null===e?0:(0,a.F)(e,(0,o.Q)((0,o.W)(i[1],-1)))}if(!(i[0]instanceof r.r))throw new Error("Illegal Argument");return(0,a.F)(i[0],(0,o.Q)((0,o.W)(i[1],-1)))}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,i){if((0,o.J)(i,1,2),null===(i=(0,o.G)(i))[0])return 0;if((0,o.k)(i[0]))return i[0].sumLength((0,o.Q)((0,o.W)(i[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,o.Z)(i[0])||(0,o.E)(i[0])){const e=(0,o.R)(i[0],n.spatialReference);return null===e?0:(0,a.M)(e,(0,o.Q)((0,o.W)(i[1],-1)))}if(!(i[0]instanceof r.r))throw new Error("Illegal Argument");return(0,a.M)(i[0],(0,o.Q)((0,o.W)(i[1],-1)))}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,i){i=(0,o.G)(i),(0,o.J)(i,2,3);let c=i[0];((0,o.Z)(i[0])||(0,o.E)(i[0]))&&(c=(0,o.U)(i[0],n.spatialReference));let l=i[1];if(((0,o.Z)(i[1])||(0,o.E)(i[1]))&&(l=(0,o.U)(i[1],n.spatialReference)),!(c instanceof r.r))throw new Error("Illegal Argument");if(!(l instanceof r.r))throw new Error("Illegal Argument");return(0,a.m)(c,l,(0,o.Q)((0,o.W)(i[2],-1)))}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,o.G)(t),(0,o.J)(t,2,3);const i=t[0],c=t[1];if(!(i instanceof r.q))throw new Error("Illegal Argument");if(!(c instanceof r.q))throw new Error("Illegal Argument");const l=new r.v({paths:[],spatialReference:i.spatialReference});return l.addPath([i,c]),(0,a.M)(l,(0,o.Q)((0,o.W)(t[2],-1)))}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");const c=(0,o.X)(t[1]);if(isNaN(c))throw new Error("Illegal Argument");if(c<=0)throw new Error("Illegal Argument");return t[0]instanceof r.x||t[0]instanceof r.v?(0,a.P)(t[0],c,(0,o.Q)((0,o.W)(t[2],-1))):t[0]instanceof r.M?(0,a.P)(i(t[0]),c,(0,o.Q)((0,o.W)(t[2],-1))):t[0]}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");const c=(0,o.X)(t[1]);if(isNaN(c))throw new Error("Illegal Argument");if(c<=0)throw new Error("Illegal Argument");return t[0]instanceof r.x||t[0]instanceof r.v?(0,a.U)(t[0],c,(0,o.Q)((0,o.W)(t[2],-1))):t[0]instanceof r.M?(0,a.U)(i(t[0]),c,(0,o.Q)((0,o.W)(t[2],-1))):t[0]}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,4),null===t[0])return null;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");const i=(0,o.X)(t[1]);if(isNaN(i))throw new Error("Illegal Argument");return(0,a.G)(t[0],i,(0,o.V)((0,o.W)(t[2],!0)),(0,o.Q)((0,o.W)(t[3],-1)))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");const i=(0,o.X)(t[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?(0,o.H)(t[0]):(0,a.V)(t[0],i,(0,o.Q)((0,o.W)(t[2],-1)))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");const i=(0,o.X)(t[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?(0,o.H)(t[0]):(0,a.b)(t[0],i,(0,o.Q)((0,o.W)(t[2],-1)))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,2,6),null===t[0])return null;if(!(t[0]instanceof r.x||t[0]instanceof r.v))throw new Error("Illegal Argument");const i=(0,o.X)(t[1]);if(isNaN(i))throw new Error("Illegal Argument");const c=(0,o.X)((0,o.W)(t[4],10));if(isNaN(c))throw new Error("Illegal Argument");const l=(0,o.X)((0,o.W)(t[5],0));if(isNaN(l))throw new Error("Illegal Argument");return(0,a.I)(t[0],i,(0,o.Q)((0,o.W)(t[2],-1)),(0,o.K)((0,o.W)(t[3],"round")).toLowerCase(),c,l)}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,o.G)(t),(0,o.J)(t,2,3);let i=t[0];if(null===i)return null;if(!(i instanceof r.r))throw new Error("Illegal Argument");i instanceof r.M&&(i=r.x.fromExtent(i));const c=(0,o.X)(t[1]);if(isNaN(c))throw new Error("Illegal Argument");const l=(0,o.W)(t[2],null);if(null===l)return(0,a.q)(i,c);if(l instanceof r.q)return(0,a.q)(i,c,l);throw new Error("Illegal Argument")}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,a){if(a=(0,o.G)(a),(0,o.J)(a,1,1),null===a[0])return null;let i=a[0];if(((0,o.Z)(a[0])||(0,o.E)(a[0]))&&(i=(0,o.U)(a[0],n.spatialReference)),null===i)return null;if(!(i instanceof r.r))throw new Error("Illegal Argument");return i instanceof r.q?(0,o.n)((0,o.H)(a[0]),n.spatialReference):i instanceof r.x?i.centroid:i instanceof r.v?(0,o.Y)(i):i instanceof r.B?(0,o.$)(i):i instanceof r.M?i.center:null}))},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,i){i=(0,o.G)(i),(0,o.J)(i,1,1);const c=[];if(null===i[0])return null;if(!(i[0]instanceof r.r))throw new Error("Illegal Argument");return i[0]instanceof r.q||i[0]instanceof r.M?[(0,o.n)((0,o.H)(i[0]),n.spatialReference)]:(0,a.J)(i[0]).then((e=>{if(e instanceof r.x){const n=[],t=[];for(let o=0;o<e.rings.length;o++)if(e.isClockwise(e.rings[o])){const t=(0,r.J)({rings:[e.rings[o]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(t)}else t.push({ring:e.rings[o],pt:e.getPoint(o,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(e instanceof r.v){const n=[];for(let t=0;t<e.paths.length;t++){const o=(0,r.J)({paths:[e.paths[t]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(o)}return n}if(i[0]instanceof r.B){const e=(0,o.n)((0,o.H)(i[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)c.push(e.getPoint(n));return c}return null}))}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,1,1),null===t[0])return!0;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");return(0,a.v)(t[0])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,o.G)(t),(0,o.J)(t,1,1),null===t[0])return null;if(!(t[0]instanceof r.r))throw new Error("Illegal Argument");return(0,a.J)(t[0])}))})}t(58574),t(68700),t(64493),t(41083),t(79571),t(89289)},80404:(e,n,t)=>{t.d(n,{A:()=>E,E:()=>F,F:()=>P,G:()=>M,I:()=>T,J:()=>A,K:()=>k,M:()=>L,O:()=>I,P:()=>U,R:()=>b,S:()=>m,U:()=>C,V:()=>O,W:()=>G,b:()=>x,d:()=>p,g:()=>w,h:()=>v,j:()=>S,k:()=>R,l:()=>s,m:()=>g,p:()=>h,q:()=>D,v:()=>N,w:()=>d,x:()=>y,y:()=>f});var r=t(47817),o=t(89289);function a(e){var n;return Array.isArray(e)?null==(n=e[0])?void 0:n.spatialReference:null==e?void 0:e.spatialReference}function i(e){return e?Array.isArray(e)?e.map(i):e.toJSON?e.toJSON():e:e}function c(e){return Array.isArray(e)?e.map((e=>(0,r.J)(e))):(0,r.J)(e)}let l;async function u(e,n){return(await async function(){return l||(l=(0,o.p)("geometryEngineWorker",{strategy:"distributed"})),l}()).invoke("executeGEOperation",{operation:e,parameters:i(n)})}async function s(e,n){return c(await u("clip",[a(e),e,n]))}async function f(e,n){return c(await u("cut",[a(e),e,n]))}function h(e,n){return u("contains",[a(e),e,n])}function d(e,n){return u("crosses",[a(e),e,n])}function g(e,n,t){return u("distance",[a(e),e,n,t])}function p(e,n){return u("equals",[a(e),e,n])}function w(e,n){return u("intersects",[a(e),e,n])}function E(e,n){return u("touches",[a(e),e,n])}function y(e,n){return u("within",[a(e),e,n])}function m(e,n){return u("disjoint",[a(e),e,n])}function I(e,n){return u("overlaps",[a(e),e,n])}function v(e,n,t){return u("relate",[a(e),e,n,t])}function N(e){return u("isSimple",[a(e),e])}async function A(e){return c(await u("simplify",[a(e),e]))}async function b(e,n){return c(await u("difference",[a(e),e,n]))}async function F(e,n){return c(await u("symmetricDifference",[a(e),e,n]))}async function S(e,n){return c(await u("intersect",[a(e),e,n]))}async function R(e,n=null){const t=function(e,n){let t;return Array.isArray(e)?t=e:(t=[],t.push(e),null!=n&&t.push(n)),t}(e,n);return c(await u("union",[a(t),t]))}async function T(e,n,t,r,o,i){return c(await u("offset",[a(e),e,n,t,r,o,i]))}async function O(e,n,t,r=!1){const o=[a(e),e,n,t,r];return c(await u("buffer",o))}async function x(e,n,t,r,o,i){const l=[a(e),e,n,t,r,o,i];return c(await u("geodesicBuffer",l))}async function D(e,n,t){var r;if(null==e)throw new Error("Illegal Argument Exception");const o=e.spatialReference;t=null!=(r=t)?r:function(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}(e);const a=e.constructor.fromJSON(await u("rotate",[o,e,n,t]));return a.spatialReference=o,a}async function M(e,n,t,r){return c(await u("generalize",[a(e),e,n,t,r]))}async function U(e,n,t){return c(await u("densify",[a(e),e,n,t]))}async function C(e,n,t,r=0){return c(await u("geodesicDensify",[a(e),e,n,t,r]))}function G(e,n){return u("planarArea",[a(e),e,n])}function P(e,n){return u("planarLength",[a(e),e,n])}function k(e,n,t){return u("geodesicArea",[a(e),e,n,t])}function L(e,n,t){return u("geodesicLength",[a(e),e,n,t])}}}]);