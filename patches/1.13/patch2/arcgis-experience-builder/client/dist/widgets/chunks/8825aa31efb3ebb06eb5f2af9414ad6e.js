/*! For license information please see 8825aa31efb3ebb06eb5f2af9414ad6e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[16041],{16041:(e,t,a)=>{a.r(t),a.d(t,{arcgis_image_upload_from_map:()=>s});var r=a(28384),i=a(66716),n=a(81068),o=a(62727);a(18869);const s=class{constructor(e){(0,r.r)(this,e),this.arcgisImageUploadFromMapReady=(0,r.c)(this,"arcgisImageUploadFromMapReady",7),this.isRTL=!1,this.lang="en",this.handleBasemapToggle=()=>{const e=this.container.querySelector(".esri-basemap-gallery");"block"===e.style.display?e.style.display="none":e.style.display="block"},this.portal=void 0,this.itemId=void 0,this.changeBasemapText=void 0,this.loadingText=void 0,this.jsapiUrl=void 0,this.loading=!0}async componentWillLoad(){this.isRTL="rtl"===(0,n.g)(this.el),this.lang=(0,o.a)(this.el)}async componentDidLoad(){this.el.shadowRoot.firstElementChild.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${this.jsapiUrl}/themes/light/main.css" />`);try{const[e,t,a,r,n]=await(0,i.l)(["esri/portal/PortalItem","esri/Map","esri/WebMap","esri/layers/Layer","esri/layers/GraphicsLayer"]);if(this.map=new t({basemap:"streets-vector"}),this.item=new e({id:this.itemId}),await this.item.load(),["Feature Service","Feature Collection","Map Service","Vector Tile Service"].includes(this.item.type)){const e=await r.fromPortalItem({portalItem:this.item});e.visible=!0,this.map.add(e),e.when((()=>{e.popupEnabled=!1}))}let o="gray";if(this.portal.defaultBasemap&&(o=this.portal.useVectorBasemaps?this.portal.defaultVectorBasemap:this.portal.defaultBasemap),this.map.basemap=o,"Web Map"!==this.item.type)this.makeMapView();else{this.webMap=new a({portalItem:{id:this.item.id}});const e=await this.item.fetchData();if(parseFloat(e.version)<2)this.makeMapView(!0);else try{await this.webMap.load();const e=new n({id:"areaGraphics"});this.map.add(e),this.makeMapView()}catch(e){this.makeMapView(!0)}}}catch(e){console.error(e)}}async makeMapView(e){try{const[t]=await(0,i.l)(["esri/views/MapView"]),a=e||!this.webMap?this.map:this.webMap;this.mapView=new t({map:a,zoom:2,center:[0,0],container:this.container}),a.watch("basemap.title",(()=>{this.container.querySelector(".esri-basemap-gallery").style.display="none"})),this.mapView.when((()=>{const e=this.item.extent||this.portal.defaultExtent;e&&(this.mapView.extent=e),this.addWidgets(),this.loading=!1}))}catch(e){}}async addWidgets(){try{const[e,t,a]=await(0,i.l)(["esri/widgets/Search","esri/widgets/BasemapGallery","esri/intl"]);this.lang&&a.setLocale(this.lang);const r=new e({view:this.mapView,popupEnabled:!1,resultGraphicEnabled:!1}),n=r.viewModel;r.viewModel.allSources.on("change",(()=>{n.allSources.forEach((e=>{e.zoomScale=null}))})),this.mapView.ui.add(r,this.isRTL?"top-left":"top-right"),r.on("select-result",(e=>{this.mapView.goTo(e.result.extent)}));const o=new t({view:this.mapView,source:{portal:this.portal}});this.mapView.ui.add(o),this.arcgisImageUploadFromMapReady.emit(this.mapView)}catch(e){}}render(){return(0,r.h)(r.H,null,(0,r.h)("div",{class:{"from-map-wrapper":!0,"is-rtl":this.isRTL}},(0,r.h)("div",{class:"map-container",ref:e=>this.container=e}),this.loading?(0,r.h)("div",{class:"loader-container"},(0,r.h)("calcite-loader",{label:this.loadingText})):(0,r.h)("div",{class:"basemap-toggle",onClick:this.handleBasemapToggle},this.changeBasemapText)))}get el(){return(0,r.d)(this)}};s.style=".from-map-wrapper{position:relative;padding:0.5rem}.loader-container{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.map-container{width:600px;height:400px}.esri-zoom{position:absolute;top:50px;left:538px}.is-rtl .esri-zoom{left:0}.basemap-toggle{position:absolute;cursor:pointer;padding:0.5rem;font-size:0.875rem;background-color:var(--calcite-ui-foreground-1);top:1.5rem;left:1.5rem;max-width:50%;box-shadow:0 1px 2px rgba(0, 0, 0, 0.3)}.is-rtl .basemap-toggle{right:1.5rem;left:auto}:host .esri-basemap-gallery{display:none;overflow-y:auto;max-height:310px;top:57px;left:15px;min-width:0}.is-rtl .esri-basemap-gallery{left:auto;right:15px}.esri-basemap-gallery__item-thumbnail{display:none}"},81068:(e,t,a)=>{a.d(t,{C:()=>s,a:()=>d,f:()=>l,g:()=>o,l:()=>n});var r=a(66716),i=a(18869);const n=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,a){const r=(0,i.c)(e,"[dir]");return r?r.getAttribute("dir"):"ltr"}(e)}const s={rtl:"arcgis--rtl"};async function l(e,t){const{api:a,type:i,places:n}=t||{};if(4===a){const[t]=await(0,r.l)(["esri/intl"]),a=t.convertNumberFormatToIntlOptions({places:n,style:i,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},a),{style:i}))}const[o]=await(0,r.l)(["dojo/number"]);return o.format(e,{type:i,places:n,pattern:null==t?void 0:t.pattern})}const c={};function d(e){const t=document.documentElement.lang;return c[t]||(c[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[t].format(e)}},66716:(e,t,a)=>{a.d(t,{a:()=>r,c:()=>n,e:()=>o,g:()=>i,l:()=>s});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==a.g?a.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t,a){return e(a={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},a.exports),a.exports}var o=n((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},a="4.24",r="next";function i(e){if(e.toLowerCase()===r)return r;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function n(e){return void 0===e&&(e=a),"https://js.arcgis.com/".concat(e,"/")}function o(e){return!e||i(e)?function(e){void 0===e&&(e=a);var t=n(e),o=i(e);if(o!==r&&3===o.major){var s=o.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function s(e,t){var a=o(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(a);return r||function(e,t){if(t){var a=document.querySelector(t);a.parentNode.insertBefore(e,a)}else document.head.appendChild(e)}(r=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(a),t),r}var l={};function c(e,t,a){var r;a&&(r=function(e,t){var a=function(r){t(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",a,!1)};return e.addEventListener("error",a,!1),a}(e,a));var i=function(){t(e),e.removeEventListener("load",i,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",i,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var a={};[l,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}));var r=a.version,i=a.url||n(r);return new t.Promise((function(e,t){var n=d();if(n){var o=n.getAttribute("src");o!==i?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):u()?e(n):c(n,e,t)}else if(u())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=a.css;l&&s(!0===l?r:l,a.insertCssBefore),c(n=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(i),(function(){n.setAttribute("data-esri-loader","loaded"),e(n)}),t),document.body.appendChild(n)}}))}function h(e){return new t.Promise((function(t,a){var r=window.require.on("error",a);window.require(e,(function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];r.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),u())return h(e);var a=d(),r=a&&a.getAttribute("src");return!t.url&&r&&(t.url=r),p(t).then((function(){return h(e)}))},e.getScript=d,e.isLoaded=u,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),l=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const s=async(e,t)=>(await o.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},62727:(e,t,a)=>{a.d(t,{a:()=>o,g:()=>c});var r=a(18869),i=a(81068),n=a(28384);function o(e){var t,a,n;const o=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(n=null===(a=e.shadowRoot)||void 0===a?void 0:a.ownerDocument)||void 0===n?void 0:n.documentElement,s=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(s)?i.l.get(s):i.l.has(s.slice(0,2))?i.l.get(s.slice(0,2)):"en"}const s={};function l(e,t){const a=`${e}${t}`;return s[a]||(s[a]=function(e,t){return new Promise(((a,r)=>{fetch((0,n.a)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?a(e.json()):r()}),(()=>r()))}))}(e,t)),s[a]}async function c(e,t){const a=t||e.tagName.toLowerCase(),n=o(e),s=function(e){var t,a,n;const o=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(n=null===(a=e.shadowRoot)||void 0===a?void 0:a.ownerDocument)||void 0===n?void 0:n.documentElement,s=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(s)?i.l.get(s):i.l.has(s.slice(0,2))?s:"en"}(e);let c;try{c=await l(a,n)}catch(e){console.warn(`no locale for ${a} (${n}) loading default locale en.`),c=await l(a,"en")}return[c,n,s]}}}]);