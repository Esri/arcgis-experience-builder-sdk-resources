/*! For license information please see fe975000d125b3c472b8b22fb1ad5f68.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[57681],{57681:(e,t,i)=>{i.r(t),i.d(t,{arcgis_item_browser:()=>$,arcgis_item_browser_actions:()=>U,arcgis_item_browser_bucket_select:()=>W,arcgis_item_browser_card:()=>j,arcgis_item_browser_card_sublayer_select:()=>G,arcgis_item_browser_card_thumbnail:()=>z,arcgis_item_browser_content:()=>H,arcgis_item_browser_filter_categories:()=>N,arcgis_item_browser_filter_collaborations:()=>V,arcgis_item_browser_filter_content_status:()=>K,arcgis_item_browser_filter_date:()=>J,arcgis_item_browser_filter_extent:()=>Q,arcgis_item_browser_filter_folder:()=>X,arcgis_item_browser_filter_group:()=>Y,arcgis_item_browser_filter_industry:()=>ee,arcgis_item_browser_filter_item_type:()=>te,arcgis_item_browser_filter_location:()=>se,arcgis_item_browser_filter_region:()=>re,arcgis_item_browser_filter_sharing:()=>oe,arcgis_item_browser_filter_tags:()=>ae,arcgis_item_browser_filters:()=>le,arcgis_item_browser_pagination:()=>ne,arcgis_item_browser_preview:()=>ce,arcgis_item_browser_preview_copy:()=>de,arcgis_item_browser_preview_field_details:()=>he,arcgis_item_browser_search:()=>ue,arcgis_item_browser_sort:()=>me,arcgis_item_browser_table:()=>ve,arcgis_item_browser_table_row:()=>be,arcgis_item_browser_top_bar:()=>ye,arcgis_item_browser_view:()=>we});var s=i(28384),r=i(76134),o=i(26426),a=i(62727),l=i(72022),n=i(21944),c=i(27010),d=i(18869),h=i(80558),u=i(62381),p=i(58728),m=i(59004),g=i(81068),v=i(92967),b=i(41171),y=i(85142),w=i(12357),f=i(96729),I=i(95474),x=i(66716),k=i(61099),_=i(48333),S=i(77852),O=i(20794),R=i(72466),C=i(29162),F=i(10174);function B(e){const t=e;return!(!t.item||!t.sublayer)}function T({item:e,sublayer:t,selectedItem:i}){var s,r;return B(i)&&t?(null==e?void 0:e.id)===(null===(s=i.item)||void 0===s?void 0:s.id)&&t.id===(null===(r=i.sublayer)||void 0===r?void 0:r.id):(null==e?void 0:e.id)===i.id}function E({item:e,sublayer:t,selectedItems:i}){return i.some((i=>T({item:e,sublayer:t,selectedItem:i})))}function D({item:e,sublayer:t,selectedItems:i}){return i.filter((i=>!T({item:e,sublayer:t,selectedItem:i})))}function P({item:e,sublayer:t,selectedItems:i}){const s=t?{item:e,sublayer:t}:e;return E({item:e,sublayer:t,selectedItems:i})?[...i]:[...i,s]}function L(e){return{point:"point",polyline:"line",polygon:"polygon",nonspatial:"table",multipoint:"layer-points"}[e]||"table"}i(86739),i(65508),i(58892),i(54871),i(31546),i(83397),i(48507),i(82463);const A={esriGeometryPoint:"point",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultipoint:"multipoint",none:"nonspatial",table:"nonspatial"};function M(e){const{description:t,geometryType:i,fieldAliases:s,title:r,id:o}=e;return{description:t,fieldAliases:Array.isArray(s)?s.join(","):s,geometryType:A[i]||"nonspatial",id:o,title:r}}const $=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserUpdate=(0,s.c)(this,"arcgisItemBrowserUpdate",7),this.arcgisItemBrowserLoading=(0,s.c)(this,"arcgisItemBrowserLoading",7),this.arcgisItemBrowserSelect=(0,s.c)(this,"arcgisItemBrowserSelect",7),this.arcgisItemBrowserPreview=(0,s.c)(this,"arcgisItemBrowserPreview",7),this.arcgisItemBrowserSublayerPreview=(0,s.c)(this,"arcgisItemBrowserSublayerPreview",7),this.arcgisItemBrowserInternalUIAction=(0,s.c)(this,"arcgisItemBrowserInternalUIAction",7),this.liveRegionUpdate=(0,s.c)(this,"liveRegionUpdate",7),this.allowFetch=!1,this.currentResults=[],this.updateFiltersEmpty=()=>{var e;this.store.state.filtersEmpty=!(null===(e=this.el)||void 0===e?void 0:e.querySelector('[slot="filters"]'))},this.updateTopbarEmpty=()=>{var e;this.store.state.topbarEmpty=!(null===(e=this.el)||void 0===e?void 0:e.querySelector('[slot="top-bar"]'))},this.updateSortEmpty=()=>{var e;this.store.state.sortEmpty=!(null===(e=this.el)||void 0===e?void 0:e.querySelector('[slot="sort"]'))},this.filterMutationObserver=new MutationObserver(this.updateFiltersEmpty),this.topbarMutationObserver=new MutationObserver(this.updateTopbarEmpty),this.sortMutationObserver=new MutationObserver(this.updateSortEmpty),this.fetchItems=(0,o.d)((async()=>{var e,t;if(this.loading=!0,this.arcgisItemBrowserLoading.emit(),this.currentResults=[],this.store.state.preview=null,!this.portal||!this.allowFetch)return;let i=this.getQuery();this.preflight&&(i=await this.preflight(i));const s=await(0,o.m)(this.queryItems(i),500);this.arcgisItemBrowserUpdate.emit(Object.assign(Object.assign(Object.assign({},s),{selectedItems:this.selectedItems,filters:Object.assign({},this.store.state.filters),searchTerm:this.searchTerm}),this.sort)),this.currentResponse=s,this.currentResults=s.results,this.store.state.knownTags=(0,l.g)(s,this.store.state.knownTags,null===(t=null===(e=this.store.state.filters)||void 0===e?void 0:e.tags)||void 0===t?void 0:t.tags),this.store.state.highlights=(0,l.a)(s,r.c.config),await(0,o.t)(100),this.loading=!1}),150),this.resize=()=>{var e,t;const i=this.el.clientWidth||(null===(e=this.el.parentElement)||void 0===e?void 0:e.clientWidth)||0,s=this.el.clientHeight||(null===(t=this.el.parentElement)||void 0===t?void 0:t.clientHeight)||0;this.formFactor=i>n.b.sm?"large":"small";const r=this.store.state.width>n.b.sm?"large":"small";"large"===r&&"small"===this.formFactor&&(this.store.state.panel=this.usePanelLayout,this.store.state.filtersExpanded=!1),"small"===r&&"large"===this.formFactor&&(this.store.state.panel=!1,this.store.state.filtersExpanded=!0),this.store.state.width=i,this.store.state.height=s},this.renderSelectedItem=e=>{const t=B(e),i=t?e.item:e,r=t?e.sublayer:null,o=t?r.title:null;return(0,s.h)("arcgis-selected-item",{heading:i.title,description:o,onArcgisSelectedItemRemove:()=>{this.selectedItems=D({item:i,sublayer:r,selectedItems:this.selectedItems}),this.arcgisItemBrowserSelect.emit(this.selectedItems)}},t?(0,s.h)("calcite-icon",{slot:"content-start",icon:L(e.sublayer.geometryType),scale:"s"}):(0,s.h)("arcgis-item-type",{slot:"content-start",item:i,portal:this.portal,scale:"s",showText:!1}))},this.api=void 0,this.portal=void 0,this.user=void 0,this.subscriptionInfo=void 0,this.userLicensedItems=void 0,this.config=void 0,this.groupId=void 0,this.selection="none",this.selectedItems=[],this.allowedGeometries=[...l.d],this.allowedSubscriptionContentTypes=void 0,this.view="list",this.bucket=void 0,this.num=20,this.q="",this.filter="",this.height="full",this.preflight=void 0,this.fetch=void 0,this.showFieldStatistics=!1,this.store=(0,c.c)({filters:{}}),this.hidePreviewFooters=!1,this.hideContentTop=!1,this.contentPaddedBottom=!1,this.usePanelLayout=!1,this.baseUrls={},this.searchTerm="",this.sort=void 0,this.page={num:this.num,start:1,nextStart:-1},this.loading=!0,this.formFactor=void 0,this.previewItem=void 0,this.currentResponse=void 0}async refresh(){this.fetchItems()}async componentWillLoad(){const{el:e,groupId:t,view:i,bucket:s,allowedGeometries:r,selectedItems:o,showFieldStatistics:l}=this,n=await(0,a.g)(e);this.i18n=n[0],s&&(this.store.state.bucket=s),this.store.state.groupId=t,this.store.state.i18n=n[0],this.store.state.lang=n[1],this.store.state.view=i,this.store.state.selection=this.selection,this.store.state.selectedItems=o,this.store.state.allowedGeometries=r,this.store.state.showFieldStatistics=l,this.store.state.interaction="keyboard",this.initializeConfig(),this.store.state.width=420,this.store.state.panel=!0,this.store.state.filtersExpanded=!1,this.formFactor="small",this.filterMutationObserver.observe(e,{childList:!0}),this.topbarMutationObserver.observe(e,{childList:!0}),this.sortMutationObserver.observe(e,{childList:!0}),this.updateFiltersEmpty(),this.updateTopbarEmpty(),this.updateSortEmpty(),this.resize(),this.resizeHandler=()=>requestAnimationFrame(this.resize),window.addEventListener("resize",this.resizeHandler),(this.usePanelLayout||(0,d.c)(this.el,"calcite-shell-panel"))&&(this.store.state.panel=!0,this.store.state.filtersExpanded=!1)}disconnectedCallback(){var e;null===(e=this.store.state.resizeObserver)||void 0===e||e.unobserve(this.el),this.filterMutationObserver.disconnect(),this.topbarMutationObserver.disconnect(),this.sortMutationObserver.disconnect(),this.filterClearHandler(!1),window.removeEventListener("resize",this.resizeHandler)}updateUser(e){var t;null!==(t=r.c.user)&&void 0!==t||(r.c.user=e)}updateUserLicensedItems(e){var t;null!==(t=r.c.userLicensedItems)&&void 0!==t||(r.c.userLicensedItems=e)}updateSubscriptionInfo(e){var t;null!==(t=r.c.subscriptionInfo)&&void 0!==t||(r.c.subscriptionInfo=e)}updatePortal(e){var t;null!==(t=r.c.portal)&&void 0!==t||(r.c.portal=e)}updateAPI(e){var t;null!==(t=r.c.api)&&void 0!==t||(r.c.api=e)}updateConfig(e){var t;null!==(t=r.c.config)&&void 0!==t||(r.c.config=e)}updateSelection(e){this.store.state.selection=e}updateGroupID(e){this.store.state.groupId=e}updateSublayerSelectionGeometryTypes(e){this.store.state.allowedGeometries=e}updateSelectedItems(e){this.store.state.selectedItems=e}updateFieldStatistics(e){this.store.state.showFieldStatistics=e}updateView(e){this.store.state.view=e}updateBucket(e){this.store.state.bucket=e,this.fetchItems()}updateQ(){this.fetchItems()}async componentDidLoad(){this.resize(),this.initializeConfig(),await(0,o.t)(400),this.allowFetch=!0,r.c.portal?this.fetchItems():(0,r.o)("portal",(()=>{this.initializeConfig(),this.fetchItems()}))}filterHandler(e){const t=Object.assign(Object.assign({},this.store.state.filters),{[e.detail.id]:e.detail});e.detail.value||delete t[e.detail.id],this.store.state.filters=t,this.resetPagination(),this.fetchItems()}genericFilterHandler(e){this.filterHandler(e)}filterClearHandler(e=!0){this.store.state.filters={},this.resetPagination(),e&&this.fetchItems()}genericFilterClearHandler(){this.filterClearHandler()}searchHandler(e){const t=e.detail;this.searchTerm=t,this.resetPagination(),t?this.fetchItems():this.fetchItems.invoke()}bucketHandler(e){this.store.state.bucket=e.detail,this.bucket=e.detail,this.resetPagination(),this.fetchItems()}sortHandler(e){this.sort=e.detail,this.store.state.sort=e.detail,this.fetchItems()}viewHandler(e){this.view=e.detail,this.store.state.view=e.detail}async pageHandler(e){var t;this.page=e.detail,this.allowFetch&&(await this.fetchItems(),await(0,o.t)(400),null===(t=this.el.shadowRoot.querySelector(".scrolling"))||void 0===t||t.scrollTo({behavior:"smooth",top:0}))}selectHandler(e){const t=this.selectedItems,{selected:i,item:s,sublayer:r}=e.detail;switch(this.selection){case"single":case"single-sublayer":this.selectedItems=P({item:s,sublayer:r,selectedItems:[]});break;case"multiple":case"multiple-sublayer":this.selectedItems=i?P({item:s,sublayer:r,selectedItems:t}):D({item:s,sublayer:r,selectedItems:t})}this.arcgisItemBrowserSelect.emit(this.selectedItems)}async togglePreview({detail:e}){this.store.state.filtersExpanded=!1,e&&this.store.state.preview!==e.id?(this.restoreFocusElement=document.activeElement,this.store.state.preview=e.id,this.previewItem=Object.assign({},e),this.arcgisItemBrowserPreview.emit(Object.assign({},e))):(this.store.state.preview=null,this.previewItem=null,this.arcgisItemBrowserPreview.emit(),this.arcgisItemBrowserSublayerPreview.emit(),this.restoreFocus()),this.arcgisItemBrowserInternalUIAction.emit({action:this.previewItem?"open panel":"close panel",category:"card action"})}tileSelectHandler(e){const{item:t}=e.detail;this.arcgisItemBrowserSelect.emit([t])}columnUpdateHandler(e){this.store.state.columns=e.detail}handleMove(){this.store.state.interaction="mouse"}handleTouch(){this.store.state.interaction="touch"}handleKey(){this.store.state.interaction="keyboard"}async initializeConfig(){var e,t,i,s;null!==(e=r.c.api)&&void 0!==e||(r.c.api=this.api),null!==(t=r.c.user)&&void 0!==t||(r.c.user=this.user),null!==(i=r.c.portal)&&void 0!==i||(r.c.portal=this.portal),null!==(s=r.c.config)&&void 0!==s||(r.c.config=this.config)}resetPagination(){this.page.start=1,this.page.total=0}getQuery(){return Object.assign(Object.assign({filters:this.store.state.filters,searchTerm:this.searchTerm,baseQuery:this.q,baseFilter:this.filter,bucket:this.bucket,allowedGeometries:this.allowedGeometries},this.sort),this.page)}async queryItems(e){var t,i;let s;if(this.fetch)s=await this.fetch(e);else{const{portal:t,user:i,store:r,groupId:o,config:a}=this;s=await(0,l.q)({portal:t,query:e,user:i,store:r,groupId:o,config:a})}return await(0,l.i)(this.portal,null===(t=this.store)||void 0===t?void 0:t.state.bucket)&&(null===(i=null==s?void 0:s.results)||void 0===i||i.forEach((({id:e})=>{this.baseUrls[e]="arcgis.com"}))),s}restoreFocus(){if(this.restoreFocusElement){const e=this.restoreFocusElement;e.restoreFocus?e.restoreFocus():e.setFocus?e.setFocus():e.focus&&e.focus()}}renderSelected(){var e,t,i,r,o;const a=null===(e=this.currentResults)||void 0===e?void 0:e.every((e=>E({item:e,selectedItems:this.selectedItems}))),l=null===(t=this.selectedItems)||void 0===t?void 0:t.length;return(0,s.h)("arcgis-selected",{slot:"selection",loading:this.loading,total:null===(i=this.currentResults)||void 0===i?void 0:i.length,totalSelected:null===(r=this.store.state.selectedItems)||void 0===r?void 0:r.length,heading:"multiple-sublayer"===this.selection?this.i18n.itemBrowser.selectedLayers:this.i18n.itemBrowser.selectedItems,emptyText:"multiple-sublayer"===this.selection?this.i18n.itemBrowser.noSelectedLayers:this.i18n.itemBrowser.noSelectedItems,checked:!this.loading&&a,indeterminate:!a&&!!l,hideCheckbox:"multiple-sublayer"===this.selection,onArcgisSelectedDeselectAll:()=>{this.selectedItems=[],this.arcgisItemBrowserSelect.emit(this.selectedItems)},onArcgisSelectedSelectPage:()=>{var e;let t=[...this.selectedItems];null===(e=this.currentResults)||void 0===e||e.forEach((e=>{t=P({item:e,selectedItems:t})})),this.selectedItems=t,this.arcgisItemBrowserSelect.emit(this.selectedItems)}},null===(o=this.store.state.selectedItems)||void 0===o?void 0:o.map(this.renderSelectedItem))}renderSlot(e,t){return(0,s.h)("div",{slot:e},(0,s.h)("slot",{name:e},t))}render(){const{previewItem:e,loading:t,hideContentTop:i,i18n:r,selectedItems:o,selection:a,currentResponse:l,store:n,api:c,renderSlot:d,searchTerm:h,formFactor:u,view:p,height:m}=this;return(0,s.h)(s.H,null,(0,s.h)("arcgis-browser",{preview:!!e,loading:t,hideContentTop:i,selected:o,alwaysShowSelection:null==a?void 0:a.includes("multiple"),alwaysShowContent:"table"===p,response:l,store:n,api:c,formFactor:u,searchTerm:h,height:m},d("top-bar"),d("view"),d("sort"),(0,s.h)("arcgis-item-browser-preview",{slot:"preview",item:this.previewItem,portal:this.portal,user:this.user,key:this.store.state.preview,onArcgisItemBrowserPreviewClose:()=>{this.store.state.preview=null,this.arcgisItemBrowserPreview.emit(),this.arcgisItemBrowserSublayerPreview.emit(),this.restoreFocus()},onArcgisInternalItemBrowserSublayer:e=>{e.stopPropagation(),this.arcgisItemBrowserSublayerPreview.emit(e.detail)},hidePreviewFooters:this.hidePreviewFooters},(0,s.h)("div",{slot:"summary-top"},(0,s.h)("slot",{name:"preview-summary-top"})),(0,s.h)("div",{slot:"footer"},(0,s.h)("slot",{name:"preview-footer"})),(0,s.h)("div",{slot:"sublayer-footer"},(0,s.h)("slot",{name:"sublayer-preview-footer"}))),this.renderSelected(),d("actions"),d("content-start"),(0,s.h)("div",{slot:"content",class:{"content--padded-bottom":this.contentPaddedBottom}},(0,s.h)("slot",{name:"content"})),d("content-end"),d("pagination"),d("filters"),d("scroll-end"),d("no-results",r.content.noResults),d("no-content",r.content.noContent)))}get el(){return(0,s.d)(this)}static get watchers(){return{user:["updateUser"],userLicensedItems:["updateUserLicensedItems"],subscriptionInfo:["updateSubscriptionInfo"],portal:["updatePortal"],api:["updateAPI"],config:["updateConfig"],selection:["updateSelection"],groupId:["updateGroupID"],allowedGeometries:["updateSublayerSelectionGeometryTypes"],selectedItems:["updateSelectedItems"],showFieldStatistics:["updateFieldStatistics"],view:["updateView"],bucket:["updateBucket"],q:["updateQ"],filter:["updateQ"]}}};function q(e){return(0,h.g)(e,"arcgis-item-browser")}$.style=":host{position:relative;background-color:var(--calcite-ui-background);display:flex;flex-direction:column;width:100%;height:100%;overflow-y:auto;overflow-x:hidden;min-height:100%;--item-browser-max-width:100%;--item-browser-pane-width:18.75rem;--item-browser-pane-z-index:11;--item-browser-top-bar-background:var(--calcite-ui-foreground-1)}:host([height=auto]){display:flex;flex-direction:column;height:auto}arcgis-browser{--arcgis-browser-max-width:var(--item-browser-max-width);--arcgis-browser-pane-width:var(--item-browser-pane-width);--arcgis-browser-pane-z-index:var(--item-browser-pane-z-index);--arcgis-browser-top-bar-background:var(--item-browser-top-bar-background)}.content--padded-bottom{padding-bottom:1.5rem}@media screen and (max-width: 640px){:host{--item-browser-pane-width:100%}}";const U=class{constructor(e){(0,s.r)(this,e),this.actions=[]}async componentWillLoad(){this.store=q(this.el)}render(){return(0,s.h)(s.H,null,(0,s.h)("arcgis-browser-actions",{actions:this.actions,selection:this.store.state.selectedItems}))}get el(){return(0,s.d)(this)}};const W=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserBucketSelect=(0,s.c)(this,"arcgisItemBrowserBucketSelect",7),this.selectOption=e=>{this.bucket=e,this.validBucket=e,this.arcgisItemBrowserBucketSelect.emit(e)},this.optionLabel=e=>{var t;return"org"!==e||r.c.user?this.i18n[e]:null===(t=r.c.portal)||void 0===t?void 0:t.name},this.options=["my","favorites","group","org","living atlas","all"],this.bucket="my",this.validBucket=void 0,this.validOptions=void 0}updateOptions(e){this.updateValidOptions(e)}async updateValidOptions(e,t){const i=this.validBucket,{user:s,portal:o}=r.c;this.validOptions=await async function(e,t,i){var s,r;if(!e)return[];const o=await(0,p.j)(e),a=null!==(s=(null==i?void 0:i.includes("subscription content"))&&await(0,l.b)(t,e))&&void 0!==s?s:[],n=null==o?void 0:o.portalConfigProperties,c=null===(r=null==n?void 0:n.portalLivingAtlasConfigEnabled)||void 0===r||r;return i.filter((i=>t||"org"!==i?!(!t&&["my","favorites","group","org"].includes(i)||t&&!(0,m.l)(t)&&!(0,m.n)(t)&&"my"===i||t&&(0,u.n)(t)&&"org"===i||!("subscription content"!==i||t&&(null==a?void 0:a.length))||!(c||"living atlas"!==i&&"living atlas analysis"!==i)||!function(e,t,i){var s,r,o,a,l;return t.isPortal?null===(r=null===(s=null==e?void 0:e.portalConfigProperties)||void 0===s?void 0:s.searchArcGISOnlineEnabled)||void 0===r||r:!(i&&!(0,u.e)(i))||null===(l=null!==(a=null===(o=t.sourceJSON)||void 0===o?void 0:o.canSearchPublic)&&void 0!==a?a:t.canSearchPublic)||void 0===l||l}(o,e,t)&&"all"===i):"public"===(null==e?void 0:e.access)))}(o,s,e),this.validBucket=this.validOptions.includes(this.bucket)?this.bucket:this.validOptions[0],(i!==this.validBucket||t)&&this.arcgisItemBrowserBucketSelect.emit(this.validBucket)}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.bucketSelect,await this.updateValidOptions(this.options,!0),(0,r.o)("user",(()=>{this.updateValidOptions(this.options)})),(0,r.o)("portal",(()=>{this.updateValidOptions(this.options)}))}render(){const{validOptions:e,validBucket:t,selectOption:i,optionLabel:r}=this;return(0,s.h)(s.H,null,(0,s.h)("div",{class:{large:this.store.state.width>=n.b.sm}},(null==e?void 0:e.length)>0&&(0,s.h)("calcite-dropdown",{placement:"bottom-start",scale:"m",width:"m",type:"click"},(0,s.h)("calcite-button",{class:"button",kind:"neutral",appearance:"transparent","icon-end":"chevron-down",slot:"trigger"},r(t)),(0,s.h)("calcite-dropdown-group",{selectionMode:"single"},e.map((e=>(0,s.h)("calcite-dropdown-item",{selected:t===e,onClick:()=>{i(e)},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||i(e)}},r(e))))))))}get el(){return(0,s.d)(this)}static get watchers(){return{options:["updateOptions"]}}};W.style=":host{display:block}.large{-webkit-border-end:1px solid var(--calcite-ui-border-3);border-inline-end:1px solid var(--calcite-ui-border-3)}.button{padding:0.5rem;--calcite-font-weight-normal:500}";const j=class{constructor(e){var t;(0,s.r)(this,e),this.arcgisItemBrowserInternalUIAction=(0,s.c)(this,"arcgisItemBrowserInternalUIAction",7),this.arcgisItemBrowserCardSelect=(0,s.c)(this,"arcgisItemBrowserCardSelect",7),this.arcgisItemBrowserCardPreview=(0,s.c)(this,"arcgisItemBrowserCardPreview",7),this.handleResizeEvent=e=>{e.stopPropagation(),this.resize(e.detail.width)},this.handleCardClick=()=>{var e;if(this.link)return;const t="top"===this.preview,i=null===(e=this.store)||void 0===e?void 0:e.state.selection,{item:s}=this;t?this.arcgisItemBrowserCardPreview.emit(s):"single"===i?this.arcgisItemBrowserCardSelect.emit({item:s,selected:!0}):"multiple"===i&&this.arcgisItemBrowserCardSelect.emit({item:s,selected:!E({item:s,selectedItems:this.store.state.selectedItems})})},this.item=void 0,this.portal=void 0,this.user=void 0,this.api=4,this.baseUrl=null===(t=null===r.c||void 0===r.c?void 0:r.c.config)||void 0===t?void 0:t.baseUrl,this.link=void 0,this.newTab=void 0,this.selected=void 0,this.selection=void 0,this.name=void 0,this.preview=void 0,this.showOwner=!0,this.showDateUpdated=!0,this.showItemType=!0,this.showSummary=!1,this.showBadges=!0,this.showThumbnail=!0,this.actions=[],this.hover=void 0,this.formFactor=void 0,this.updatedText="",this.shortUpdatedText="",this.loaded=void 0,this.noSpaceForDate=!0}async restoreFocus(){this.link&&this.linkEl?this.linkEl.focus():"top"===this.preview&&this.sectionEl&&this.sectionEl.focus()}async componentWillLoad(){var e,t,i,s,o;this.store=q(this.el),this.i18n=this.store.state.i18n.card,null!==(e=this.formFactor)&&void 0!==e||(this.formFactor=(null===(t=this.store)||void 0===t?void 0:t.state.panel)?"xs":"lg"),(0,n.s)(this.store).observe(this.el),this.el.addEventListener("arcgisBrowserResize",this.handleResizeEvent);const a=(0,g.a)(this.item.modified);this.updatedText=this.i18n.lastUpdated.replace("${date}",a),this.shortUpdatedText=a,this.portal=null!==(i=this.portal)&&void 0!==i?i:r.c.portal,this.user=null!==(s=this.user)&&void 0!==s?s:r.c.user,this.api=null!==(o=this.api)&&void 0!==o?o:r.c.api}async componentDidLoad(){await(0,o.t)(100),this.loaded=!0}disconnectedCallback(){var e,t,i,s;null===(i=null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.resizeObserver)||void 0===i||i.unobserve(this.el),null===(s=this.el)||void 0===s||s.removeEventListener("arcgisBrowserResize",this.handleResizeEvent)}resize(e){switch(!0){case e>n.b.md:this.formFactor="lg";break;case e>n.b.sm:this.formFactor="md";break;case e>n.b.xs:this.formFactor="sm";break;case e>n.b.xxs:this.formFactor="xs";break;default:this.formFactor="xxs"}}render(){var e,t,i,o,a,l,n,c,d,h;const{item:u,user:p,portal:m,formFactor:g,api:v,i18n:b,loaded:y,showDateUpdated:w,showItemType:f,showOwner:I,showBadges:x,showSummary:k,showThumbnail:_,link:S,newTab:O}=this,R=(null==m?void 0:m.isPortal)&&"all"===this.store.state.bucket?"https://www.arcgis.com/home/":null!==(e=this.baseUrl)&&void 0!==e?e:null===(t=r.c.config)||void 0===t?void 0:t.baseUrl,C=(null===(i=this.store)||void 0===i?void 0:i.state.preview)===this.item.id,F="grid"===(null===(o=this.store)||void 0===o?void 0:o.state.view),B="top"===this.preview,T={tabIndex:0,role:"button","aria-haspopup":"dialog","aria-labelledby":"open-details",onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||(e.preventDefault(),this.handleCardClick())}},D=null===(a=this.store)||void 0===a?void 0:a.state.selection,P=["single","multiple"].includes(D),L=P&&E({item:this.item,selectedItems:null===(l=this.store)||void 0===l?void 0:l.state.selectedItems}),A=this.link?"a":"div",M=Object.assign({href:S},O?{target:"_blank",rel:"noopener noreferrer"}:{}),$=["xxs","xs"].includes(g);return(0,s.h)(s.H,null,(0,s.h)("section",Object.assign({class:{"item-browser-card":!0,"item-browser-card--hoverable":!0,[`item-browser-card--${g}`]:!0,"item-browser-card--panel":null===(n=this.store)||void 0===n?void 0:n.state.panel,"item-browser-card--loaded":y,"item-browser-card--previewed":(null===(c=this.store)||void 0===c?void 0:c.state.preview)===u.id,"item-browser-card--selected":L},onMouseOver:()=>this.hover=!0,onMouseOut:()=>this.hover=!1},S?{}:{onClick:this.handleCardClick},B&&!S?T:{},{ref:e=>this.sectionEl=e}),(0,s.h)("slot",{name:"content-top"}),(0,s.h)(A,Object.assign({class:{"item-browser-card__upper":!0,"item-browser-card__upper--link":!!S}},S?M:{},{ref:e=>this.linkEl=e}),F&&_&&(0,s.h)("figure",{class:"item-browser-card__thumbnail--grid"},(0,s.h)("arcgis-item-browser-card-thumbnail",{item:u,user:p,portal:m}),B&&!S&&(0,s.h)("div",{class:"item-browser-card__hover-text",id:"open-details"},(null===(h=null===(d=this.store)||void 0===d?void 0:d.state)||void 0===h?void 0:h.preview)===u.id?b.closeDetails:b.openDetails)),(0,s.h)("div",{class:"item-browser-card-flex item-browser-card__top"},"single"===D&&(0,s.h)("calcite-radio-button",{class:"item-browser-card__input",checked:L,value:u.title,name:this.name,onClick:e=>{e.stopPropagation()},onCalciteRadioButtonChange:()=>{this.arcgisItemBrowserCardSelect.emit({item:u,selected:!0})}},(0,s.h)("span",{class:"screen-readers-only"},b.select.replace("${title}",u.title))),"multiple"===D&&(0,s.h)("calcite-checkbox",{class:"item-browser-card__input",checked:L,onClick:e=>{e.stopPropagation()},onCalciteCheckboxChange:()=>{this.arcgisItemBrowserCardSelect.emit({item:u,selected:!L})},value:u.id},(0,s.h)("span",{class:"screen-readers-only"},u.title)),(0,s.h)("div",{class:"item-browser-card-flex-1"},(0,s.h)("div",{class:"item-browser-card-flex"},(0,s.h)("div",{class:"item-browser-card__content"},(0,s.h)("h3",{class:{"item-browser-card__title":!0,"item-browser-card__title--padded":f||k&&!!u.snippet,"item-browser-card__title--grid":F}},(0,s.h)("span",{class:"item-browser-card__title__span"},u.title)),k&&u.snippet&&!$&&(0,s.h)("p",{class:"item-browser-card__summary"},u.snippet.length>250?`${u.snippet.substring(0,250)}â€¦`:u.snippet),$&&f&&(0,s.h)("arcgis-item-type",{scale:$?"s":"m",item:u,portal:m}),(0,s.h)("div",{class:"item-browser-card__details"},!$&&f&&(0,s.h)("arcgis-item-type",{class:"item-browser-card__divider",scale:$?"s":"m",item:u,portal:m}),w&&"xxs"!==g&&(0,s.h)("span",{class:{"item-browser-card__detail":!0,"item-browser-card__divider":!0}},["xxs","xs","sm"].includes(g)||F?this.shortUpdatedText:this.updatedText),x&&(0,s.h)("arcgis-item-badges",{item:u,user:p,portal:m,width:"lg"!==g||F?"narrow":"full",showTooltips:!0,class:{"item-browser-card__badges":!0,"item-browser-card__divider":!0},scale:"s"}))),!F&&_&&(0,s.h)("figure",{class:"item-browser-card__thumbnail"},(0,s.h)("arcgis-item-browser-card-thumbnail",{item:u,user:p,portal:m}))),(0,s.h)("slot",{name:"content-end"})))),(0,s.h)("div",{class:"item-browser-card__footer",onClick:e=>{e.stopPropagation()},onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||e.stopPropagation()}},(0,s.h)("div",{class:{"item-browser-card__footer__start":!0,"item-browser-card__footer__start--owner":I,"item-browser-card__footer__start--selectable":P}},(0,s.h)("slot",{name:"actions-start"}),I&&(0,s.h)("div",{class:"item-browser-card__profile-wrap",onClick:e=>{e.preventDefault(),e.stopPropagation()}},(0,s.h)("arcgis-user-popup",{underline:!0,item:u,api:v,portal:m,baseUrl:R,checkOnline:m.isPortal&&"all"===this.store.state.bucket,class:"item-browser-card__owner",scale:["md","lg"].includes(g)?"m":"s",onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisItemBrowserInternalUIAction.emit(e.detail)}}))),"action"===this.preview&&(0,s.h)("calcite-button",{scale:"s",appearance:C?"solid":"outline",kind:"neutral",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.arcgisItemBrowserCardPreview.emit(this.item)}},C?b.hidePreview:b.preview),(null==D?void 0:D.includes("sublayer"))&&(0,s.h)("arcgis-item-browser-card-sublayer-select",{item:u,user:p,portal:m,selection:"multiple-sublayer"===D?"multiple":"single",showErrors:!0}),this.actions.length>0&&(0,s.h)("calcite-dropdown",{placement:"bottom-end",scale:"m",overlayPositioning:"fixed"},(0,s.h)("calcite-action",{scale:"s",slot:"trigger",alignment:"center",appearance:"solid",text:b.moreOptions,textEnabled:!1,icon:"ellipsis"}),(0,s.h)("calcite-dropdown-group",{selectionMode:"none"},this.actions.map((({text:e,newTab:t,link:i,action:r})=>(0,s.h)("calcite-dropdown-item",Object.assign({onClick:e=>{r&&(e.preventDefault(),r())}},!r&&i?Object.assign(Object.assign({},t?{target:"_blank",rel:"noopener noreferrer"}:{}),{href:i}):{}),e))))),(0,s.h)("slot",{name:"actions-end"}))))}get el(){return(0,s.d)(this)}};j.style=':host{display:block;min-width:0}.item-browser-card{box-shadow:none;transition-duration:150ms;color:var(--calcite-ui-text-1);background-color:var(--calcite-ui-foreground-1);position:relative;opacity:0;height:100%;display:flex;flex-direction:column;outline-color:transparent;box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);transition-property:background-color, outline, outline-offset, opacity;border:1px solid var(--calcite-ui-border-3)}.item-browser-card:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px;z-index:10}.item-browser-card--loaded{opacity:1}.item-browser-card--selected{border-color:var(--calcite-ui-brand)}.item-browser-card--hoverable{cursor:pointer}.item-browser-card__top{padding:1rem}.item-browser-card__hover-text{opacity:0;font-weight:500;font-size:1rem;text-align:center;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;position:absolute;top:0;right:0;bottom:0;left:0;display:flex;justify-content:center;align-items:center;background-color:rgba(21, 21, 21, 0.7);color:white}.item-browser-card__upper{flex:1 1 0%;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-ui-foreground-1)}.item-browser-card__upper:hover{background-color:var(--calcite-ui-background)}.item-browser-card__upper:hover .item-browser-card__hover-text,.item-browser-card:focus .item-browser-card__hover-text{opacity:1}.item-browser-card__upper--link{text-decoration:none;color:var(--calcite-ui-text-1);outline-color:transparent}.item-browser-card__upper--link:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px;z-index:10}.item-browser-card__title__span{transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;position:relative;display:inline;border-style:none;background-color:transparent;padding:0;background-image:linear-gradient(transparent, transparent);background-position-x:0%, 100%;background-position-y:min(1.25em, 100%);background-repeat:no-repeat, no-repeat;background-size:100% 1px, 100% 1px}.item-browser-card--previewed .item-browser-card__title__span{background-image:linear-gradient(var(--calcite-ui-text-3), var(--calcite-ui-text-3))}.item-browser-card__content{display:flex;flex:1 1 0%;flex-direction:column;min-width:0}.item-browser-card__details{display:flex;flex-direction:row;margin-top:0.25rem}.item-browser-card__detail{font-size:0.875rem;color:var(--calcite-ui-text-2)}.item-browser-card__calendar-icon{color:var(--calcite-ui-text-3);-webkit-margin-end:0.5rem;margin-inline-end:0.5rem}.item-browser-card__footer{background-color:var(--calcite-ui-foreground-1);padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;display:flex;align-items:center;margin-top:auto;border-top:1px solid var(--calcite-ui-border-3)}.item-browser-card__footer__start{flex:1 1 0%;display:flex;flex-direction:row;align-items:center;min-width:0;overflow:hidden;-webkit-margin-end:0.75rem;margin-inline-end:0.75rem}.item-browser-card__footer__start--owner{-webkit-margin-start:-0.25rem;margin-inline-start:-0.25rem}.item-browser-card__footer__start--selectable{-webkit-margin-start:1.5rem;margin-inline-start:1.5rem}.item-browser-card__profile-wrap{max-width:100%;padding:0.25rem;box-sizing:border-box}.item-browser-card__summary{font-size:0.875rem;color:var(--calcite-ui-text-2);margin:0;padding:0}.item-browser-card__divider{display:flex;align-items:center;flex:0 0 auto}.item-browser-card__divider:not([empty]):before{content:"";height:1.25rem;width:1px;background-color:var(--calcite-ui-border-1);margin-inline:0.75rem}.item-browser-card__divider:first-child:before{display:none}.item-browser-card-flex{display:flex}.item-browser-card-flex-1{flex:1 1 0%;min-width:0}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.item-browser-card__input{-webkit-margin-end:1rem;margin-inline-end:1rem;margin-top:0.125rem}.item-browser-card__title{font-size:1.125rem;margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;word-wrap:break-word;overflow-wrap:break-word;font-weight:500;line-height:1.375}.item-browser-card__title--grid{font-size:1rem}.item-browser-card__title--padded{margin-bottom:0.5rem}.item-browser-card__snippet{font-size:0.875rem;margin:0;margin-bottom:0.75rem;padding:0;flex:1 1 0%}.item-browser-card__badges--stacked{margin-top:0.5rem}.item-browser-card__thumbnail{width:8rem;padding:0;margin:0;box-sizing:content-box;-webkit-padding-start:2rem;padding-inline-start:2rem;flex:0 0 auto}.item-browser-card__thumbnail--grid{width:100%;padding:0;margin:0;position:relative;border-bottom:1px solid var(--calcite-ui-foreground-2)}.item-browser-card__owner{min-width:0}.item-browser-card--panel{margin-bottom:0;cursor:pointer;display:block;width:100%}.item-browser-card--xs .item-browser-card__top,.item-browser-card--xxs .item-browser-card__top{padding:0.75rem}.item-browser-card--xs .item-browser-card__title--padded,.item-browser-card--xxs .item-browser-card__title--padded{margin-bottom:0.25rem}.item-browser-card--xs .item-browser-card__footer,.item-browser-card--xxs .item-browser-card__footer{padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.75rem;padding-right:0.75rem}.item-browser-card--xs .item-browser-card__detail,.item-browser-card--xxs .item-browser-card__detail{font-size:0.75rem}.item-browser-card--xs .item-browser-card__title,.item-browser-card--xxs .item-browser-card__title{font-size:0.875rem}.item-browser-card--xxs .item-browser-card__title{font-size:0.75rem}.item-browser-card--xxs .item-browser-card__thumbnail{width:55px;-webkit-padding-start:0.75rem;padding-inline-start:0.75rem}.item-browser-card--xxs .item-browser-card__footer__start{-webkit-margin-end:0.5rem;margin-inline-end:0.5rem}.item-browser-card--xs .item-browser-card__thumbnail{width:5rem;-webkit-padding-start:0.5rem;padding-inline-start:0.5rem}';const G=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserCardSelect=(0,s.c)(this,"arcgisItemBrowserCardSelect",7),this.renderSublayer=e=>{var t,i;const{item:r,store:o}=this,a=!(null===(i=null===(t=null==o?void 0:o.state)||void 0===t?void 0:t.allowedGeometries)||void 0===i?void 0:i.includes(e.geometryType));return(0,s.h)("calcite-dropdown-item",Object.assign({iconStart:L(e.geometryType),selected:E({item:r,sublayer:e,selectedItems:o.state.selectedItems})},a?{ariaDisabled:!0,tabIndex:-1,className:"dropdown-item-disabled"}:{},{ref:e=>{a&&(e.tabIndex=-1)},onCalciteDropdownItemSelect:t=>{const i=t.currentTarget.selected,{item:s}=this;this.arcgisItemBrowserCardSelect.emit({item:s,sublayer:e,selected:"single"===this.selection||!i})}}),(0,s.h)("span",{class:"title"},e.title))},this.isAllowedGeometry=e=>{var t,i,s;return null===(s=null===(i=null===(t=this.store)||void 0===t?void 0:t.state)||void 0===i?void 0:i.allowedGeometries)||void 0===s?void 0:s.includes(e)},this.sortSublayers=(e,t)=>{const i=this.isAllowedGeometry(e.geometryType);return i===this.isAllowedGeometry(t.geometryType)?t.id-e.id:i?-1:1},this.renderSelectText=e=>{var t,i;const s="multiple"===this.selection;if(this.item&&!this.item.sublayers)return E({item:this.item,selectedItems:null===(t=this.store)||void 0===t?void 0:t.state.selectedItems})?this.i18n.selectedSingle:this.i18n.select;if(0===(null==e?void 0:e.length))return s?this.i18n.selectLayers:this.i18n.select;if(s)return this.i18n.selectedLayers.replace("${num}",`${e.length}`);const r=e[0];return this.i18n.selectedName.replace("${name}",null===(i=r.sublayer)||void 0===i?void 0:i.title)},this.item=void 0,this.user=void 0,this.portal=void 0,this.width="auto",this.appearance="outline",this.selection=void 0,this.showErrors=!1,this.sublayers=void 0,this.loading=!1,this.fetched=!1,this.alertActive=!1}async componentWillLoad(){var e,t,i;if(this.store=q(this.el),this.i18n=null===(e=this.store)||void 0===e?void 0:e.state.i18n.cardSublayerSelect,this.sublayers=null===(t=this.item)||void 0===t?void 0:t.sublayers,this.item)if(null===(i=this.item)||void 0===i?void 0:i.sublayers)this.sublayers=this.item.sublayers;else{const e=(0,b.j)("serviceInfo",this.item.id);(null==e?void 0:e.result)&&this.processResponse(e)}}processResponse(e){if(null==e?void 0:e.result){const t=e.result.map(M).sort(this.sortSublayers);this.sublayers=t,this.item.sublayers=t,this.fetched=!0}else e.error&&(this.alertActive=!0)}async attemptLoad(){var e;this.loading=!0,this.alertActive=!1;const t=await(0,b.f)((()=>(0,v.f)({item:this.item,portal:this.portal,layers:null,isSecure:!1})),"serviceInfo",this.item.id);return this.processResponse(t),await(0,o.t)(100),this.dropdown&&(this.dropdown.open=!0),this.loading=!1,!!(null===(e=this.sublayers)||void 0===e?void 0:e.length)}render(){var e,t;const{store:i,width:r,appearance:o,loading:a,i18n:l,alertActive:n}=this,c=this.item;if(!i||!c)return null;const d="auto"===r?"s":"m",h=null==i?void 0:i.state.selectedItems,u=function({item:e,selectedItems:t}){return t.filter((t=>{var i;return(null===(i=t.item)||void 0===i?void 0:i.id)===(null==e?void 0:e.id)}))}({item:c,selectedItems:h}),p=E({item:c,selectedItems:h});return(0,s.h)(s.H,null,(null===(e=null==c?void 0:c.sublayers)||void 0===e?void 0:e.length)?(0,s.h)("calcite-dropdown",{class:"dropdown",width:"l",placement:"solid"===o?"top":"bottom-end",scale:"s",closeOnSelectDisabled:!0,overlayPositioning:"fixed",ref:e=>this.dropdown=e},(0,s.h)("calcite-button",{loading:a,disabled:a,slot:"trigger",scale:d,appearance:(null==u?void 0:u.length)||"solid"===o?"solid":"outline",kind:"neutral",iconEnd:"chevron-down",width:r},this.renderSelectText(u)),(0,s.h)("calcite-dropdown-group",{selectionMode:this.selection},null===(t=this.sublayers)||void 0===t?void 0:t.sort(this.sortSublayers).map(this.renderSublayer))):(0,s.h)("calcite-button",{loading:a,disabled:a||n,class:"dropdown",slot:"trigger",scale:d,appearance:(null==u?void 0:u.length)?"solid":"outline",kind:"neutral",width:r,onClick:async()=>{(!this.item||this.sublayers||"Image Service"===this.item.type||this.fetched||!await this.attemptLoad()&&!this.alertActive)&&this.arcgisItemBrowserCardSelect.emit({item:c,selected:!p})}},this.renderSelectText(u)),this.showErrors&&(0,s.h)("calcite-alert",{label:l.errorTitle,icon:!0,kind:"danger",onCalciteAlertClose:()=>{this.alertActive=!1},open:!!n,tabIndex:n?null:-1},(0,s.h)("div",{slot:"title"},l.errorTitle),(0,s.h)("div",{slot:"message",class:"alert__message"},l.errorBody),(0,s.h)("calcite-link",{slot:"link",onClick:async()=>{(0,b.c)("serviceInfo",this.item.id),await this.attemptLoad()}},l.retry)))}get el(){return(0,s.d)(this)}};G.style=".title{max-width:32rem;word-wrap:break-word;word-break:break-word}.dropdown-item-disabled{pointer-events:none;opacity:var(--calcite-ui-opacity-disabled)}.dropdown{display:block}";const z=class{constructor(e){(0,s.r)(this,e),this.item=void 0,this.user=void 0,this.portal=void 0,this.loading=!0,this.useDefault=void 0,this.thumbnailUrl=void 0}async componentWillLoad(){this.store=q(this.el),this.setThumbnailUrl()}handleItemChange(){this.setThumbnailUrl()}async setThumbnailUrl(){var e,t;const{item:i,portal:s}=this;this.useDefault?this.thumbnailUrl=(0,y.a)(this.item):this.thumbnailUrl=await(0,y.b)(s,i,null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.bucket)}render(){const{loading:e,useDefault:t,thumbnailUrl:i}=this;if(i)return(0,s.h)(s.H,null,(0,s.h)("div",{class:"outer"},(0,s.h)("div",{class:{inner:!0,"inner--loading":e}},(0,s.h)("img",{class:{thumbnail:!0,"thumbnail--loading":e},alt:"",src:i,crossorigin:"anonymous",onLoad:e=>{const i=e.currentTarget;!t&&(0,y.i)(i)&&(this.useDefault=!0),this.loading=!1},onError:()=>{this.useDefault=!0,this.loading=!1,this.setThumbnailUrl()}}),e&&(0,s.h)("div",{class:"placeholder"}))))}static get assetsDirs(){return["assets"]}get el(){return(0,s.d)(this)}static get watchers(){return{item:["handleItemChange"]}}};z.style=":host{display:block;position:relative}.outer{width:100%;position:relative;padding-top:66.66%}.inner{position:absolute;top:0;right:0;bottom:0;left:0;background-color:var(--calcite-ui-background)}.inner--loading{animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:thumbnail-shimmer;animation-timing-function:linear;background-image:linear-gradient(to right, var(--calcite-ui-background) 0%, var(--calcite-ui-foreground-2), var(--calcite-ui-background) 40%, var(--calcite-ui-background) 100%);background-repeat:no-repeat;background-size:800px 100%}.thumbnail{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;opacity:1;transition-property:opacity;transition:opacity 300ms linear}.thumbnail--loading{opacity:0}@keyframes thumbnail-shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}";const H=class{constructor(e){(0,s.r)(this,e)}async componentWillLoad(){this.store=q(this.el)}getColumnCount(e){if("grid"!==this.store.state.view)return 1;const t=this.store.state.filtersEmpty?1:0;switch(!0){case e<n.b.xs:return 1;case e<n.b.sm:return 2;case e<n.b.md:return 1+t;case e<n.b.xl:return 2+t;default:return 3+t}}render(){const e=this.store.state.view,t=this.getColumnCount(this.store.state.width);return(0,s.h)(s.H,null,(0,s.h)("div",{class:{[e]:!0,[`columns-${t}`]:!0,"no-space":this.store.state.width<n.b.xs&&this.store.state.panel}},(0,s.h)("slot",null)))}get el(){return(0,s.d)(this)}};H.style=":host{--arcgis-item-browser-content-spacing:0.5rem}.grid slot,.list slot{display:grid;grid-gap:var(--arcgis-item-browser-content-spacing)}.columns-1 slot{grid-template-columns:repeat(1, 1fr)}.columns-2 slot{grid-template-columns:repeat(2, 1fr)}.columns-3 slot{grid-template-columns:repeat(3, 1fr)}.columns-4 slot{grid-template-columns:repeat(4, 1fr)}.no-space slot{grid-gap:0.25rem;gap:0.25rem}";const N=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.category=void 0,this.expanded=void 0,this.groupId=void 0,this.loading=void 0,this.schema=[]}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterCategories,(null===r.c||void 0===r.c?void 0:r.c.portal)?this.fetchCategories(r.c.portal):(0,r.o)("portal",(e=>{this.fetchCategories(e)})),(0,h.a)("categories",this.store,(()=>this.category=null))}async refetchCategories(){(null===r.c||void 0===r.c?void 0:r.c.portal)&&this.fetchCategories(r.c.portal)}async fetchCategories(e){var t,i,s,r;const o="living atlas"===(null===(i=null===(t=this.store)||void 0===t?void 0:t.state)||void 0===i?void 0:i.bucket),a=this.groupId||this.store.state.groupId,l=o?await(0,w.a)(e):a?await(0,w.b)(a,e):await(0,w.f)(e);this.schema=null===(r=null===(s=null==l?void 0:l.categorySchema)||void 0===s?void 0:s[0])||void 0===r?void 0:r.categories,this.loading=!1}async componentDidLoad(){this.category&&this.emitFilterEvent(),this.store.onChange("bucket",(()=>this.refetchCategories())),this.store.onChange("groupId",(()=>{this.refetchCategories()}))}emitFilterEvent(){const{category:e,i18n:t}=this,i=e?JSON.stringify([e]):"",s="_none_"===e?t.uncategorized:null==e?void 0:e.replace("/Categories/",""),r=t.category.replace("${category}",s);this.arcgisItemBrowserFilter.emit({id:"categories",param:"categories",value:i,label:r,category:e})}renderNestedCategories(e,t){return e.map((e=>{var i;const r=t?`${t}/${e.title}`:`/Categories/${e.title}`,o=!!(null===(i=e.categories)||void 0===i?void 0:i.length);return(0,s.h)("calcite-tree-item",{"data-value":r,"data-children":o,selected:this.category===r},(0,s.h)("a",null,e.title),o&&(0,s.h)("calcite-tree",{slot:"children",selectionMode:"children"},this.renderNestedCategories(e.categories,r)))}))}render(){const{loading:e,schema:t}=this;return e||!(null==t?void 0:t.length)?null:(0,s.h)("arcgis-browser-filter",{heading:this.i18n.categories,expanded:this.expanded,active:!!this.category,onArcgisBrowserFilterRemove:()=>{this.category=null,this.emitFilterEvent()}},(0,s.h)("calcite-tree",{selectionMode:"children",scale:"m",onCalciteTreeSelect:e=>{var t,i;const s=e.target,r=null===(i=null===(t=null==s?void 0:s.selectedItems)||void 0===t?void 0:t[0])||void 0===i?void 0:i.dataset,o=(null==r?void 0:r.value)||"";this.category===o?this.category=null:this.category=o,this.emitFilterEvent()}},!(!this.groupId&&!this.store.state.groupId)&&(0,s.h)("calcite-tree-item",{"data-value":"_none_",selected:"_none_"===this.category},(0,s.h)("a",null,this.i18n.uncategorized)),this.renderNestedCategories(t)))}get el(){return(0,s.d)(this)}};const V=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.loadCollaborations=async()=>{const{portal:e,user:t,config:i,subscriptionInfo:s}=null!==r.c&&void 0!==r.c?r.c:{};!this.collaborations&&e&&t&&!(0,u.n)(t)&&(0,u.w)(i,t,e,s)&&(this.collaborations=await async function(e){const t=(0,b.k)(e),{collaborations:i}=await(0,b.r)(`${t}portals/self/collaborationsSummary`,{includeParticipantInfo:!0});return i}(r.c.portal))},this.collaboration=void 0,this.participant=void 0,this.collaborationName=void 0,this.expanded=void 0,this.collaborations=void 0}componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterCollaborations}async componentDidLoad(){this.collaboration&&this.emitEvent(),this.loadCollaborations(),(0,r.o)("portal",this.loadCollaborations),(0,r.o)("user",this.loadCollaborations),(0,r.o)("subscriptionInfo",this.loadCollaborations),(0,h.a)("collaborations",this.store,(()=>this.collaboration=null))}async getEventDetail(){const{collaboration:e,participant:t,collaborationName:i,i18n:s}=this;if(!e)return{id:"collaborations",param:"q",value:"",label:"",collaboration:{id:"",name:""}};const o=await async function(e,t,i){return(0,b.f)((()=>async function(e,t,i){const s=(0,b.k)(i),{collaboratedItems:r}=await(0,b.r)(`${s}portals/self/collaboratedItems`,Object.assign({collaborationId:e},t?{participantId:t}:{}));return(null==r?void 0:r.length)?r.map((e=>Object.keys(e)[0])):[]}(e,t,i)),"collaborationContent",`${e}/${t}`)}(e,t,r.c.portal),a=t?`__${t}`:"";return{id:"collaborations",param:"q",value:o?`id:(${o.join(" OR ")})`:"",label:i?s.label.replace("${name}",this.collaborationName):"",collaboration:{id:e,name:i},additionalParams:{origin:`${e}${a}`}}}async emitEvent(){const e=await this.getEventDetail();this.arcgisItemBrowserFilter.emit(e)}renderParticipant(e,t){var i;const[r,o]=Object.entries(e)[0],a=`${t}/${r}`;return(0,s.h)("calcite-tree-item",{"data-id":a,"data-name":o,selected:null===(i=this.collaboration)||void 0===i?void 0:i.includes(a)},(0,s.h)("a",null,o))}render(){const{config:e,user:t,portal:i,subscriptionInfo:o}=r.c,{collaborations:a}=this;return t&&(0,u.w)(e,t,i,o)&&(null==a?void 0:a.length)?(0,s.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.collaboration,onArcgisBrowserFilterRemove:()=>{this.collaboration=null,this.emitEvent()}},(0,s.h)("calcite-tree",{selectionMode:"children",scale:"m",onCalciteTreeSelect:e=>{var t,i;const s=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0],[r,o]=null!==(i=null==s?void 0:s.dataset.id.split("/"))&&void 0!==i?i:[],a=null==s?void 0:s.dataset.name;a&&(this.collaboration!==r||o&&o!==this.participant?(this.collaboration=r,this.collaborationName=a,this.participant=o):(this.collaboration=null,this.collaborationName=null,this.participant=null),this.emitEvent())}},a.map((({collaborationId:e,collaborationName:t,participants:i})=>{var r;return(0,s.h)("calcite-tree-item",{"data-id":e,"data-name":t,selected:null===(r=this.collaboration)||void 0===r?void 0:r.includes(e)},(0,s.h)("a",null,t),(null==i?void 0:i.length)&&(0,s.h)("calcite-tree",{slot:"children"},(i||[]).map((t=>this.renderParticipant(t,e)))))})))):null}get el(){return(0,s.d)(this)}},K=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.contentStatus=void 0,this.expanded=void 0}componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterContentStatus}componentDidLoad(){this.contentStatus&&this.arcgisItemBrowserFilter.emit(this.getEventDetail()),(0,h.a)("contentStatus",this.store,(()=>this.contentStatus=null))}getEventDetail(){var e;const{contentStatus:t,i18n:i}=this,{user:s,portal:o}=r.c,a=o&&!o.isPortal?` orgid:${o.id}`:"";return{id:"contentStatus",param:"filter",value:null!==(e={authoritative:s&&!(0,u.n)(s)?`((contentstatus:org_authoritative${a}) OR contentstatus:public_authoritative)`:"contentstatus:public_authoritative",deprecated:"contentstatus:deprecated"}[t])&&void 0!==e?e:"",label:t?i.label.replace("${contentStatus}",i[t]):"",contentStatus:t}}render(){return(0,s.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.contentStatus,onArcgisBrowserFilterRemove:()=>{this.contentStatus=null,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},(0,s.h)("calcite-tree",{selectionMode:"single",scale:"m",onCalciteTreeSelect:e=>{var t;const i=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0],s=null==i?void 0:i.dataset.contentStatus;this.contentStatus===s?this.contentStatus=null:this.contentStatus=s,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},["authoritative","deprecated"].map((e=>(0,s.h)("calcite-tree-item",{"data-content-status":e,selected:e===this.contentStatus},(0,s.h)("a",null,this.i18n[e]))))))}get el(){return(0,s.d)(this)}},J=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.property="modified",this.range=void 0,this.start=void 0,this.end=void 0,this.expanded=void 0}componentWillLoad(){this.store=q(this.el)}getEventDetail(e){return Object.assign({param:"q"},e)}render(){const{property:e,range:t,start:i,end:r,store:o,expanded:a}=this;return(0,s.h)("arcgis-browser-filter-date",{serverProperty:"modified"===e?e:"uploaded",property:this.property,store:o,start:i,end:r,range:t,expanded:a,onArcgisBrowserFilter:e=>{this.arcgisItemBrowserFilter.emit(this.getEventDetail(e.detail))}})}get el(){return(0,s.d)(this)}},Q=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.extent=void 0,this.checked=void 0}emitCheckedChange(){this.arcgisItemBrowserFilter.emit(this.getEventDetail())}emitExtentChange(){this.checked&&this.arcgisItemBrowserFilter.emit(this.getEventDetail())}componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterExtent}componentDidLoad(){this.extent&&this.checked&&this.arcgisItemBrowserFilter.emit(this.getEventDetail()),(0,h.a)("extent",this.store,(()=>this.checked=!1))}getEventDetail(){const{extent:e,checked:t,i18n:i}=this;return{id:"extent",param:"bbox",value:t&&e?e:"",label:e&&t?i.label:"",extent:e}}render(){var e,t;return(0,s.h)(s.H,null,(0,s.h)("div",{class:{"filter-extent":!0,"filter-extent--padded":null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.panel}},(0,s.h)("calcite-label",{layout:"inline"},(0,s.h)("span",{class:"filter-extent__label"},this.i18n.title),(0,s.h)("calcite-switch",{class:"filter-extent__switch",checked:this.checked,onCalciteSwitchChange:e=>{this.checked=e.target.checked}}))))}get el(){return(0,s.d)(this)}static get watchers(){return{checked:["emitCheckedChange"],extent:["emitExtentChange"]}}};Q.style=".filter-extent{margin-bottom:0.5rem;width:100%;display:flex}.filter-extent__label{flex:1 1 0%}.filter-extent__switch{padding-left:0.25rem;padding-right:0.25rem}.filter-extent--padded{box-sizing:border-box;padding-left:1rem;padding-right:1rem;padding-top:0;padding-bottom:0.5rem}";const X=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.folder="all",this.allowEdits=void 0,this.expanded=void 0,this.folders=[]}componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterFolder,r.c.user?this.fetchUserFolders(r.c.user):(0,r.o)("user",(e=>this.fetchUserFolders(e)))}componentDidLoad(){this.folder&&"all"!==this.folder&&this.arcgisItemBrowserFilter.emit(this.getEventDetail()),this.expanded&&this.accordionItem&&(this.accordionItem.expanded=!0),(0,h.a)("folder",this.store,(()=>this.folder="all"))}getEventDetail(){var e;const{folder:t}=this,i=t===r.c.user.username?"root":t,s=null===(e=this.folders)||void 0===e?void 0:e.find((e=>e.id===t)),o=(null==s?void 0:s.title)||"";return{id:"folder",param:"q",value:"all"!==t?`ownerfolder:${i}`:"",label:this.i18n.label.replace("${folder}",o),folder:t}}async fetchUserFolders(e){const t=await(0,f.g)(e);this.folders=[{id:"all",created:new Date,title:this.i18n.all,username:""},...t]}getFolderIcon(e){var t;switch(e){case"all":return"folders";case null===(t=r.c.user)||void 0===t?void 0:t.username:return"home";default:return"folder"}}render(){const{user:e}=r.c,t=this.store.state.bucket,{i18n:i,folders:o}=this,a=!e||!o||t&&"my"!==t;return(0,s.h)(s.H,null,(0,s.h)("arcgis-browser-filter",{heading:i.folders,expanded:this.expanded,noPadding:!0,class:{hide:a}},(0,s.h)("calcite-list",{filterEnabled:!0,selectionAppearance:"border",selectionMode:"single",loading:!o,class:"folders",ref:e=>{var t;const i=null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector("calcite-filter");i&&(i.style.marginTop="-2px",i.style.position="absolute",i.style.top="0")}},o.map((({title:e,id:t})=>(0,s.h)("calcite-list-item",{class:"folder",label:e,value:t,key:t,onCalciteListItemSelect:()=>{this.folder=t,this.arcgisItemBrowserFilter.emit(this.getEventDetail())},selected:this.folder===t},(0,s.h)("calcite-icon",{icon:this.getFolderIcon(t),slot:"content-start",scale:"s"})))))))}get el(){return(0,s.d)(this)}};X.style=".hide.sc-arcgis-item-browser-filter-folder{display:none}.folders.sc-arcgis-item-browser-filter-folder{max-height:16.5rem;min-height:4rem;margin-bottom:1.5rem;margin-top:0;overflow:auto;list-style-type:none;padding:0;position:relative;--calcite-list-item-spacing-indent:0.5rem;--calcite-list-item-spacing-indent-multiplier:1;--calcite-ui-foreground-1:var(--calcite-ui-background)}.folder.sc-arcgis-item-browser-filter-folder{width:calc(100% - 1.65rem);margin-left:0.825rem}";const Y=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.group="all",this.allowEdits=void 0,this.expanded=void 0,this.groups=[]}componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterGroup,r.c.user&&r.c.portal?this.fetchUserGroups():((0,r.o)("user",(()=>this.fetchUserGroups())),(0,r.o)("portal",(()=>this.fetchUserGroups())))}componentDidLoad(){this.expanded&&this.accordionItem&&(this.accordionItem.expanded=!0),(0,h.a)("group",this.store,(()=>this.group="all"))}getEventDetail(){var e,t;const{group:i}=this,s=null===(e=this.groups)||void 0===e?void 0:e.find((e=>e.id===i)),r=(null==s?void 0:s.title)||"";return{id:"group",param:"q",value:"all"!==i?`group:${i}`:`group:(${null===(t=this.groups)||void 0===t?void 0:t.map((({id:e})=>e)).join(" OR ")})`,label:this.i18n.label.replace("${group}",r),group:i}}async fetchUserGroups(){var e,t;if(r.c.user&&r.c.portal){const i=await(0,f.a)();this.groups=[{id:"all",title:this.i18n.all},...i],"group"===(null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.bucket)&&this.arcgisItemBrowserFilter.emit(this.getEventDetail())}}render(){const{user:e}=r.c,t=this.store.state.bucket,{i18n:i,groups:o}=this,a=!e||!o||t&&"group"!==t;return(0,s.h)(s.H,null,(0,s.h)("arcgis-browser-filter",{heading:i.groups,expanded:this.expanded,noPadding:!0,class:{hide:a}},(0,s.h)("calcite-list",{filterEnabled:!0,selectionAppearance:"border",selectionMode:"single",loading:!o,class:"groups",ref:e=>{var t;const i=null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector("calcite-filter");i&&(i.style.marginTop="-2px")}},null==o?void 0:o.map((e=>(0,s.h)("calcite-list-item",{class:"group",label:e.title,value:e.id,key:e.id,onCalciteListItemSelect:()=>{this.group=e.id,this.store.state.groupId=e.id,this.arcgisItemBrowserFilter.emit(this.getEventDetail())},selected:this.group===e.id},"all"===e.id?(0,s.h)("calcite-icon",{icon:"users",slot:"content-start",scale:"s"}):(0,s.h)("arcgis-group-thumbnail",{slot:"content-start",class:"group-thumbnail",group:e,portal:r.c.portal,tooltip:!1,scale:"s"})))))))}get el(){return(0,s.d)(this)}};Y.style=".hide.sc-arcgis-item-browser-filter-group{display:none}.groups.sc-arcgis-item-browser-filter-group{max-height:16.5rem;margin-bottom:1.5rem;margin-top:0;overflow:auto;list-style-type:none;padding:0;position:relative;--calcite-list-item-spacing-indent:0.5rem;--calcite-list-item-spacing-indent-multiplier:1;--calcite-ui-foreground-1:var(--calcite-ui-background)}.group.sc-arcgis-item-browser-filter-group{width:calc(100% - 1.65rem);margin-left:0.825rem}.group-thumbnail.sc-arcgis-item-browser-filter-group{margin-left:0.5rem;margin-right:0.5rem}";const Z=["Agriculture","Electric Utilities","Environment","Forestry","Gas Utilities","General","Natural Resources","Petroleum","Public Safety","Telecommunications","Transportation","Water Utilities"],ee=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.industry=void 0,this.expanded=void 0}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterIndustry}async componentDidLoad(){this.industry&&this.arcgisItemBrowserFilter.emit(this.getEventDetail()),(0,h.a)("industry",this.store,(()=>this.industry=null))}getEventDetail(){const{industry:e}=this;return{id:"industry",param:"filter",value:e?`typekeywords: "${e}"`:"",label:this.i18n.Industry.replace("${industry}",this.i18n[e]),industry:e}}render(){return(0,s.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.industry,onArcgisBrowserFilterRemove:()=>{this.industry=null,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},(0,s.h)("calcite-tree",{selectionMode:"single",scale:"s",onCalciteTreeSelect:e=>{var t,i;const s=(null===(i=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0])||void 0===i?void 0:i.dataset.industry)||"";this.industry===s?this.industry=null:this.industry=s,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},Z.map((e=>(0,s.h)("calcite-tree-item",{"data-industry":e,selected:e===this.industry},(0,s.h)("a",null,this.i18n[e]))))))}get el(){return(0,s.d)(this)}},te=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.renderItemType=([e,t])=>{const{itemType:i,allowedItemTypes:o}=this,a=!(null==o?void 0:o.includes(e)),l=o&&a&&t.children&&Object.keys(t.children).some((e=>o.includes(e)));return a&&!l||t.show&&!t.show(r.c.portal,r.c.userLicensedItems)?null:a&&l?(0,s.h)(s.F,null,Object.entries(t.children).map(this.renderItemType)):(0,s.h)("calcite-tree-item",{"data-item-type":e,"data-children":!!t.children,selected:e===i},(0,s.h)("a",null,I.a[e]),t.children&&(0,s.h)("calcite-tree",{slot:"children",selectionMode:"children"},Object.entries(t.children).map(this.renderItemType)))},this.itemType=void 0,this.allowedItemTypes=I.d,this.expanded=void 0}componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterItemType}componentDidLoad(){var e;if(this.itemType){this.arcgisItemBrowserFilter.emit(this.getEventDetail());let t=null===(e=this.el)||void 0===e?void 0:e.querySelector(`calcite-tree-item[data-item-type="${this.itemType}"]`);for(;t;)t.expanded=!0,t=t.parentElement.closest("calcite-tree-item"),(null==t?void 0:t.closest("arcgis-item-browser-filter-item-type"))||(t=null)}(0,h.a)("itemType",this.store,(()=>this.itemType=null))}getEventDetail(){const{itemType:e}=this,t=(0,I.g)(e);return{id:"itemType",param:"q",value:(null==t?void 0:t.q)?`(${t.q})`:"",label:t?this.i18n.itemType.replace("${itemType}",I.a[e]):"",itemType:e}}render(){return(0,s.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.itemType,onArcgisBrowserFilterRemove:()=>{this.itemType=null,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},(0,s.h)("calcite-tree",{selectionMode:"children",scale:"m",onCalciteTreeSelect:e=>{var t,i;const s=e.target,r=null===(i=null===(t=null==s?void 0:s.selectedItems)||void 0===t?void 0:t[0])||void 0===i?void 0:i.dataset,o=(null==r?void 0:r.itemType)||"";this.itemType===o?this.itemType=null:this.itemType=o,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},Object.entries(I.i).map(this.renderItemType)))}get el(){return(0,s.d)(this)}};function ie(e){return!(!(e.singleLineFieldName||(0,k.i)(e.url)||e.enableSuggestions)||!e.placefinding)}const se=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.arcgisItemBrowserSort=(0,s.c)(this,"arcgisItemBrowserSort",7),this.suggest=e=>{this.loadingSuggestions=!0,(null==e?void 0:e.length)>2?this.searchViewModel.suggest(e):(this.loadingSuggestions=!1,this.suggestions=[])},this.debouncedSuggest=(0,o.d)(this.suggest.bind(this),1e3),this.updateSuggest=e=>{(null==e?void 0:e.length)>2&&(this.loadingSuggestions=!0),this.debouncedSuggest(e)},this.location=void 0,this.extent=void 0,this.expanded=void 0,this.loading=void 0,this.searching=void 0,this.suggestions=[],this.loadingSuggestions=void 0,this.searchTerm=void 0}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterLocation,(0,h.a)("location",this.store,(()=>{var e;this.location=null,this.extent=null,null===(e=this.searchViewModel)||void 0===e||e.clear(),this.searchTerm=""}))}async componentDidLoad(){this.location&&this.extent&&(this.searchTerm=this.location,this.emitFilterEvent()),(null===r.c||void 0===r.c?void 0:r.c.portal)?this.setupSearch():(0,r.o)("portal",(()=>{this.setupSearch()}))}async setupSearch(){const e=function(e,t,i,s){var r;const o=null!==(r=null==t?void 0:t.geocodeAutoComplete)&&void 0!==r&&r,a=function(e,t,i){var s;let r=[...(e.helperServices||{}).geocode||[]];const o=null!==(s=t.geocodeAutoComplete)&&void 0!==s&&s;return r.filter(ie).map((e=>{const t=!(!0!==e.suggest||!o),s=(0,k.i)(e.url);return Object.assign(Object.assign({},e),{name:s?"ArcGIS World Geocoding Service":e.name,enableSuggestions:t,categories:s?["Populated Place","Coordinate System"]:null,placefinding:!!s||e.placefinding,outFields:s?["Match_addr","Addr_type","StAddr","City"]:null,placeholder:e.placeholder||i.findLocationText,singleLineFieldName:e.singleLineFieldName||"SingleLine",highlightSymbol:null,localSearchOptions:{minScale:3e5,distance:5e4}})}))}(e,t,i),l={suggestionsEnabled:o,minSuggestCharacters:3,maxResults:5,searchTerm:s||null,activeSourceIndex:"all",sources:[].concat(a),popupEnabled:!1};return 1===l.sources.length&&delete l.activeSourceIndex,l}(r.c.portal,r.c.config,this.i18n,this.location),[t]=await(0,x.l)(["esri/widgets/Search/SearchViewModel"]);this.searchViewModel=new t(Object.assign(Object.assign({},e),{allPlaceholder:this.i18n.findLocationText,showInfoWindowOnSelect:!1})),this.searchViewModel.on("suggest-start",(()=>{this.loadingSuggestions=!0})),this.searchViewModel.on("suggest-complete",(async e=>{this.suggestions=[...e.results],this.loadingSuggestions=!1})),this.searchViewModel.on("search-start",(()=>{this.loadingSuggestions=!1,this.searching=!0,this.suggestPopover.open=!1})),this.searchViewModel.on("search-complete",(()=>{this.searching=!1})),this.searchViewModel.on("select-result",this.handleLocationChange.bind(this)),this.searchViewModel.on("search-clear",(()=>{this.extent&&this.location&&(this.location=null,this.extent=null,this.emitFilterEvent())}))}handleLocationChange(e){this.location=e.result.name;const t=e.result.extent;this.extent=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`,this.emitFilterEvent()}emitFilterEvent(){const{location:e,extent:t}=this,i=this.i18n.label.replace("${location}",e);this.arcgisItemBrowserFilter.emit({id:"location",param:"bbox",value:null!=t?t:"",label:i,location:e,extent:t}),t&&this.arcgisItemBrowserSort.emit({sortField:"relevance",sortOrder:"desc"})}handleSuggestSelect(e){var t;this.searchViewModel.search(e),this.searchTerm=e.text,null===(t=this.input)||void 0===t||t.setFocus()}hasResults(){var e;return null===(e=this.suggestions)||void 0===e?void 0:e.some((e=>{var t;return null===(t=null==e?void 0:e.results)||void 0===t?void 0:t.length}))}renderSuggestions(e){var t;return null===(t=null==e?void 0:e.results)||void 0===t?void 0:t.map((e=>(0,s.h)("calcite-list-item",{class:"location-filter__suggestion",key:e.key,label:e.text,onClick:()=>this.handleSuggestSelect(e),onKeyPress:t=>{"Enter"===t.key&&this.handleSuggestSelect(e)}})))}render(){var e,t;return 3===(null===r.c||void 0===r.c?void 0:r.c.api)?null:(0,s.h)("arcgis-browser-filter",{heading:this.i18n.location,expanded:this.expanded,active:!!this.location,onArcgisBrowserFilterRemove:()=>{this.location=null,this.extent=null,this.emitFilterEvent()}},(0,s.h)("div",{class:"location-filter__container"},(0,s.h)("calcite-input",{loading:this.searching||this.loadingSuggestions,type:"text",value:this.searchTerm,placeholder:this.i18n.findLocationText,scale:"m",class:"location-filter__input",ref:e=>this.input=e,clearable:!0,onKeyPress:e=>{const t=e.target.value;if("Enter"===e.key&&e.target===e.currentTarget)return this.searchTerm=t,void this.searchViewModel.suggest(t)},onKeyDown:e=>{var t,i;"ArrowDown"===e.key&&!this.loadingSuggestions&&(null===(t=this.suggestions)||void 0===t?void 0:t.length)&&(e.preventDefault(),e.stopPropagation(),null===(i=this.el.querySelector("calcite-list-item"))||void 0===i||i.setFocus())},onCalciteInputInput:e=>{const t=e.target.value;this.searchTerm=t,this.updateSuggest(t)}},(0,s.h)("calcite-button",{class:"location-filter__button",label:"search",slot:"action",kind:"neutral",appearance:"outline-fill",iconStart:"search",scale:"m",ref:e=>this.searchButton=e,onClick:()=>{this.suggest(this.searchTerm)},onKeyPress:e=>{"Enter"!==e.key&&" "!==e.key||this.suggest(this.searchTerm)},disabled:!this.searchTerm})),!this.loadingSuggestions&&(null===(e=this.searchTerm)||void 0===e?void 0:e.length)>2&&(0,s.h)("calcite-popover",{label:this.i18n.suggestions,referenceElement:this.searchButton,ref:e=>this.suggestPopover=e,autoClose:!0,pointerDisabled:!0,offsetDistance:0,overlayPositioning:"fixed",open:!0,placement:"bottom-end",flipPlacements:["top-end"]},this.hasResults()?(0,s.h)("calcite-list",{key:this.searchTerm,class:"location-filter__suggestions"},null===(t=this.suggestions)||void 0===t?void 0:t.map((e=>this.renderSuggestions(e)))):(0,s.h)("div",{class:"location-filter__suggestions"},(0,s.h)("p",{class:"location-filter__no-results"},this.i18n.noResults.replace("${searchTerm}",this.searchTerm))))))}get el(){return(0,s.d)(this)}};se.style=".location-filter__container{display:flex;width:100%;box-sizing:border-box}.location-filter__input{flex:1 1 0%;--calcite-ui-border-input:var(--calcite-ui-border-3)}.location-filter__button{-webkit-margin-start:-1px;margin-inline-start:-1px}.location-filter__suggestions{overflow-y:auto;box-sizing:border-box;height:8rem;border-top:1px solid var(--calcite-ui-border-1);border-bottom:1px solid var(--calcite-ui-border-1);width:calc(var(--item-browser-pane-width) - 2.5rem)}.location-filter__no-results{margin-top:3rem;padding-top:0.5rem;padding-bottom:0;margin-bottom:0;text-align:center;color:var(--calcite-ui-text-3)}";const re=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.regions=[],this.region=void 0,this.expanded=void 0,this.loading=void 0}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterRegion,(null===r.c||void 0===r.c?void 0:r.c.portal)?this.fetchRegions(r.c.portal):(0,r.o)("portal",(e=>this.fetchRegions(e))),(0,h.a)("region",this.store,(()=>this.region=null))}async fetchRegions(e){this.regions=await async function(e){return(0,b.r)(`${(0,b.g)(e)}portals/regions`)}(e),this.loading=!1}async componentDidLoad(){this.region&&this.emitFilterEvent()}emitFilterEvent(){var e;const{region:t,i18n:i}=this,s=t?`/region/${t.toLowerCase()}`:"",r=t?JSON.stringify([s]):"",o=null===(e=this.regions)||void 0===e?void 0:e.find((e=>e.region===t)),a=i.region.replace("${region}",(null==o?void 0:o.localizedName)||(null==o?void 0:o.name)||"");this.arcgisItemBrowserFilter.emit({id:"region",param:"categories",categoryValue:s,value:r,label:a,region:t})}render(){var e;const{loading:t,regions:i,store:r}=this;return t||!(null==i?void 0:i.length)||"living atlas"!==(null===(e=r.state)||void 0===e?void 0:e.bucket)?null:(0,s.h)("arcgis-browser-filter",{heading:this.i18n.regions,expanded:this.expanded,active:!!this.region,onArcgisBrowserFilterRemove:()=>{this.region=null,this.emitFilterEvent()}},(0,s.h)("calcite-tree",{selectionMode:"children",scale:"m",onCalciteTreeSelect:e=>{var t,i;const s=e.target,r=null===(i=null===(t=null==s?void 0:s.selectedItems)||void 0===t?void 0:t[0])||void 0===i?void 0:i.dataset,o=(null==r?void 0:r.value)||"";this.region===o?this.region=null:this.region=o,this.emitFilterEvent()}},i.map((({name:e,region:t,localizedName:i})=>(0,s.h)("calcite-tree-item",{"data-value":t,selected:this.region===t},(0,s.h)("a",null,i||e))))))}get el(){return(0,s.d)(this)}},oe=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.sharingLevels=[["owner",["private","shared"]],"org","public"],this.renderLevel=e=>{const[t,i]=Array.isArray(e)?e:[e];return(0,s.h)("calcite-tree-item",{"data-sharing":t,selected:(null==i?void 0:i.includes(this.sharing))||t===this.sharing},(0,s.h)("a",null,this.i18n[t]),i&&(0,s.h)("calcite-tree",{slot:"children",selectionMode:"children"},i.map(this.renderLevel)))},this.sharing=void 0,this.expanded=void 0}componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterSharing}componentDidLoad(){this.sharing&&this.arcgisItemBrowserFilter.emit(this.getEventDetail()),(0,h.a)("sharing",this.store,(()=>this.sharing=null))}getEventDetail(){const{sharing:e,i18n:t}=this;return{id:"sharing",param:"q",value:e?"owner"===e?"(access:private OR access:shared)":`(access: ${e})`:"",label:e?t.label.replace("${sharing}",t[e]):"",sharing:e}}render(){return(0,s.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.sharing,onArcgisBrowserFilterRemove:()=>{this.sharing=null,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},(0,s.h)("calcite-tree",{selectionMode:"children",scale:"m",onCalciteTreeSelect:e=>{var t;const i=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0],s=null==i?void 0:i.dataset.sharing;this.sharing===s?this.sharing=null:this.sharing=s,this.arcgisItemBrowserFilter.emit(this.getEventDetail())}},this.sharingLevels.map((e=>this.renderLevel(e)))))}get el(){return(0,s.d)(this)}},ae=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserFilter=(0,s.c)(this,"arcgisItemBrowserFilter",7),this.deselectAllTags=()=>{this.el.querySelectorAll("calcite-combobox-item[selected]").forEach((e=>{e.selected=!1}))},this.tags=void 0,this.expanded=void 0}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.filterTags}async componentDidLoad(){this.tags&&this.arcgisItemBrowserFilter.emit(this.getEventDetail()),(0,h.a)("tags",this.store,(()=>{this.tags=null,this.deselectAllTags()}))}getEventDetail(){const{tags:e}=this,t=(null==e?void 0:e.length)?`tags:(${e.map((e=>`"${e}"`)).join(" OR ")})`:"",i=(null==e?void 0:e.length)?this.i18n.label.replace("${tags}",e.join(", ")):"";return{id:"tags",param:"filter",value:t,tags:e,label:i}}componentDidRender(){const e=this.el.querySelectorAll("calcite-combobox-item"),t=[];e.forEach((e=>{t.includes(e.value)?e.parentElement.removeChild(e):t.push(e.value)}))}render(){var e;const{i18n:t}=this,i=this.store.state.knownTags||[];return(0,s.h)("arcgis-browser-filter",{heading:t.title,expanded:this.expanded,active:!!(null===(e=this.tags)||void 0===e?void 0:e.length),onArcgisBrowserFilterRemove:()=>{this.tags=[],this.deselectAllTags()}},(0,s.h)("calcite-combobox",{label:t.title,overlayPositioning:"fixed",placeholder:t.selectTags,scale:"s",maxItems:5,allowCustomValues:!0,onCalciteComboboxChange:e=>{var t;this.tags=null===(t=e.target.selectedItems)||void 0===t?void 0:t.map((e=>e.value)),this.arcgisItemBrowserFilter.emit(this.getEventDetail())},style:{marginBottom:"1rem"},ref:e=>{var t;const i=e.shadowRoot.querySelector("div");i&&(null===(t=this.store.state)||void 0===t?void 0:t.panel)&&i.insertAdjacentHTML("beforeend","<style>\n              .floating-ui-container--active {\n                visibility: visible !important;\n                pointer-events: auto !important;\n                position: absolute !important;\n              }\n              </style>")}},i.map((e=>(0,s.h)("calcite-combobox-item",{key:e,value:e,textLabel:e.length>36?`${e.slice(0,36)}...`:e})))))}get el(){return(0,s.d)(this)}},le=class{constructor(e){(0,s.r)(this,e)}async componentWillLoad(){this.store=q(this.el)}render(){var e,t;return(0,s.h)("arcgis-browser-filters",{store:this.store,style:"subscription content"===(null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.bucket)?{display:"none"}:{}},(0,s.h)("div",{slot:"top"},(0,s.h)("slot",{name:"top"})),(0,s.h)("slot",null),(0,s.h)("div",{slot:"bottom"},(0,s.h)("slot",{name:"bottom"})))}get el(){return(0,s.d)(this)}},ne=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserPage=(0,s.c)(this,"arcgisItemBrowserPage",7),this.total=void 0,this.start=void 0,this.num=60}async componentWillLoad(){this.store=q(this.el);const{start:e,total:t,num:i}=this;this.arcgisItemBrowserPage.emit({start:e,total:t,num:i})}render(){const{start:e,total:t,num:i,store:r}=this;return(0,s.h)("arcgis-browser-pagination",{start:e,total:t,num:i,store:r,onArcgisBrowserPage:e=>this.arcgisItemBrowserPage.emit(e.detail)})}get el(){return(0,s.d)(this)}},ce=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserPreviewClose=(0,s.c)(this,"arcgisItemBrowserPreviewClose",7),this.arcgisInternalItemBrowserSublayer=(0,s.c)(this,"arcgisInternalItemBrowserSublayer",7),this.arcgisItemBrowserInternalUIAction=(0,s.c)(this,"arcgisItemBrowserInternalUIAction",7),this.sortSublayers=(e,t)=>{const i=this.layerMatches(e);return i===this.layerMatches(t)?t.id-e.id:i?-1:1},this.layerMatches=e=>{var t,i,s,r,o;return null===(o=null===(r=null===(s=null===(i=null===(t=this.store)||void 0===t?void 0:t.state)||void 0===i?void 0:i.highlights)||void 0===s?void 0:s[this.item.id])||void 0===r?void 0:r.sublayers)||void 0===o?void 0:o.includes(e.id)},this.renderField=e=>{if("OBJECTID"!==e.name)return(0,s.h)("arcgis-item-browser-preview-field-details",{field:e,item:this.item,sublayer:this.sublayer,api:r.c.api,showFieldStatistics:this.store.state.showFieldStatistics})},this.handleLayerClick=e=>{this.sublayer=e,this.fetchSublayer(),this.arcgisItemBrowserInternalUIAction.emit({action:"click",category:"panel action",details:"sublayer"}),this.arcgisInternalItemBrowserSublayer.emit(Object.assign({},e))},this.renderLayer=e=>{const t=this.layerMatches(e),{icon:i}=(0,R.g)({geometry:e.geometryType,type:e.type});return(0,s.h)("calcite-list-item",{onClick:()=>this.handleLayerClick(e),onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),this.handleLayerClick(e))},class:"sublayer-item"},(0,s.h)("calcite-icon",{icon:i,flipRtl:!0,scale:"s",slot:"content-start"}),(0,s.h)("span",{slot:"content",class:"sublayer-item__content"},(0,s.h)("span",{class:{"sublayer-item__title":!0,"sublayer-item__title--matched":t}},e.title||e.name),t&&(0,s.h)("span",{class:"sublayer-item__description"},this.i18n.matched)),(0,s.h)("calcite-icon",{scale:"s",slot:"content-end",icon:"chevron-right",flipRtl:!0,style:{display:"flex",justifyContent:"flex-end"}}))},this.item=void 0,this.portal=void 0,this.user=void 0,this.hidePreviewFooters=!1,this.fullItem=void 0,this.formattedViews=void 0,this.loadingLayers=!0,this.layerError=void 0,this.layers=[],this.sublayer=void 0,this.fullSublayer=void 0,this.showLayers=void 0,this.userInfo=void 0,this.tab="fields",this.itemError=void 0}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.preview,this.layerTypes=this.store.state.i18n.layerTypes,this.lang=await(0,a.a)(this.el),this.init()}updatePreview(){this.init()}async fetchItem(){return this.itemError=null,(0,l.f)(this.item,this.portal,this.user,this.store)}async init(){var e,t,i,s,a,l;if(!this.item)return;const{item:n,portal:c,lang:d}=this;this.fullItem=null,this.shouldExpandOverview=!0,this.loadingLayers=!0;const h=await(0,o.m)(this.fetchItem(),600);if(h.error)this.itemError="disabledSubscription"===h.error.code?this.i18n.itemError.subscription:this.i18n.itemError.unhandled;else{if(this.fullItem=h.result,this.formattedViews=await(0,g.f)(n.numViews||0,{api:r.c.api,places:0,type:"decimal"}),this.userInfo=await(0,O.a)(n,c,d),null===(e=this.flowItem)||void 0===e||e.setFocus(),this.showLayers=["Feature Service","Layer Template","Feature Collection"].includes(n.type)&&!(null===(t=n.typeKeywords)||void 0===t?void 0:t.includes("Route Layer")),this.showLayers)if("Layer Template"===n.type&&(null===(i=n.typeKeywords)||void 0===i?void 0:i.map((e=>e.toLowerCase())).includes("service template"))){const e=await(0,b.r)(`${(0,b.g)(this.portal)}content/items/${this.item.id}/data`);this.layers=[...null!==(s=e.layers)&&void 0!==s?s:[],...null!==(a=e.tables)&&void 0!==a?a:[]]}else{const e=await(0,v.f)({item:this.fullItem,portal:r.c.portal,layers:null,isSecure:!1});e.result?this.layers=null===(l=e.result)||void 0===l?void 0:l.sort(this.sortSublayers):e.error&&(this.layerError=this.i18n.layerError,"serviceNotExist"===e.error.code&&(this.layerError.message=this.i18n.noServiceMessage))}this.loadingLayers=!1}}handleAccordionItemClick(e,t){this.arcgisItemBrowserInternalUIAction.emit({action:e.expanded?"expand":"collapse",category:"panel action",details:t})}async fetchSublayer(){const e=await(0,v.a)(this.portal,this.sublayer.id,this.item.url);this.fullSublayer=null==e?void 0:e.result}closePreview(){this.sublayer=null,this.fullItem=null,this.arcgisItemBrowserInternalUIAction.emit({action:"close panel",category:"panel action"}),this.arcgisItemBrowserPreviewClose.emit()}renderHeader(){var e;return(0,s.h)("div",{slot:"header-content",class:"preview__header"},(0,s.h)("h3",{class:"preview__title"},null===(e=this.item)||void 0===e?void 0:e.title),(0,s.h)("arcgis-item-type",{item:this.item,portal:this.portal,scale:"m"}))}renderLayers(){var e;return this.loadingLayers?(0,s.h)("calcite-loader",{label:this.i18n.loading,scale:"s"}):this.layerError?(0,s.h)("div",{class:"section"},(0,s.h)("calcite-notice",{icon:!0,open:!0,scale:"s",width:"full",kind:"warning"},(0,s.h)("div",{slot:"title"},this.layerError.title),(0,s.h)("div",{slot:"message"},this.layerError.message))):(0,s.h)("div",{class:"section section--tight"},(0,s.h)("calcite-list",{"selection-mode":"none",loading:this.loadingLayers,ref:e=>{var t;const i=null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector("table");i&&(i.style.borderSpacing="0")}},null===(e=this.layers)||void 0===e?void 0:e.map(this.renderLayer)))}isAccordionItem(e){return"CALCITE-ACCORDION-ITEM"===e.tagName}handleSublayerSectionChange(e){this.tab=e,this.arcgisItemBrowserInternalUIAction.emit({action:"click",category:"panel action",details:`sublayer ${e}`})}renderSublayerPreview(){var e,t,i,r;const{sublayer:o,item:a,i18n:l,fullSublayer:n}=this,{geometryType:c,title:h,name:u,description:p}=o,{type:m,isGeometry:v}=(0,R.g)({geometry:c,type:o.type}),b=this.layerTypes[m];return(0,s.h)("calcite-flow-item",{closable:!0,onCalciteFlowItemBack:e=>{e.stopPropagation(),this.arcgisInternalItemBrowserSublayer.emit(),this.sublayer=null},onCalciteFlowItemClose:e=>{e.stopPropagation(),this.closePreview()}},this.renderHeader(),(0,s.h)("div",{class:"sublayer__header"},(0,s.h)("arcgis-sublayer-type",{name:u||h,geometry:o.geometryType,type:o.type,showType:!1,scale:"s"})),(0,s.h)("calcite-tabs",{position:"top",scale:"m",layout:"center",class:{sublayer__tabs:!0,"sublayer__tabs--white":"fields"===this.tab}},(0,s.h)("calcite-tab-nav",{slot:"title-group",class:"sublayer__tab-nav"},(0,s.h)("calcite-tab-title",{onClick:()=>this.handleSublayerSectionChange("fields")},l.fields),(0,s.h)("calcite-tab-title",{onClick:()=>this.handleSublayerSectionChange("overview")},l.overview)),(0,s.h)("calcite-tab",null,(0,s.h)("div",{class:"sublayer__content"},o.fields?o.fields.map(this.renderField):(0,s.h)("p",{class:"details-text details-text--empty"},l.noFields))),(0,s.h)("calcite-tab",null,(0,s.h)("div",{class:"sublayer__content sublayer__content--overview"},this.renderDetail(v?l.geometryTypeTitle:l.layerTypeTitle,b),(0,s.h)("h4",{class:"details-title"},l.description),p?(0,s.h)("div",{class:"details-text description",innerHTML:(0,d.s)((0,d.d)(p))}):(0,s.h)("p",{class:"details-text details-text--empty"},l.noDescription),!(null===(e=this.portal)||void 0===e?void 0:e.isPortal)&&this.renderDetail(l.dataUpdated,(0,g.a)(null===(t=null==n?void 0:n.editingInfo)||void 0===t?void 0:t.dataLastEditDate)),!(null===(i=this.portal)||void 0===i?void 0:i.isPortal)&&this.renderDetail(l.schemaUpdated,(0,g.a)(null===(r=null==n?void 0:n.editingInfo)||void 0===r?void 0:r.schemaLastEditDate)),a.url&&(0,s.h)("arcgis-item-browser-preview-copy",{text:`${a.url}/${o.id}`,heading:l.URL})))),!this.hidePreviewFooters&&(0,s.h)("div",{slot:"footer",class:"footer-actions"},this.renderSublayerSelect(),(0,s.h)("slot",{name:"sublayer-footer"})))}renderDetail(e,t,i,r){const o=!i||t?r?(0,s.h)("p",{class:"details-text",innerHTML:(0,d.s)(t)}):(0,s.h)("p",{class:"details-text"},t):(0,s.h)("p",{class:"details-text details-text--empty"},i);return[(0,s.h)("h4",{class:"details-title"},e),o]}renderSublayerSelect(){var e,t,i;return(null===(t=null===(e=this.store)||void 0===e?void 0:e.state.selection)||void 0===t?void 0:t.includes("sublayer"))?(0,s.h)("arcgis-item-browser-card-sublayer-select",{item:this.item,user:this.user,portal:this.portal,selection:"multiple-sublayer"===(null===(i=this.store)||void 0===i?void 0:i.state.selection)?"multiple":"single",appearance:"solid",width:"full"}):null}render(){var e,t,i,a,l,n,c,h,u;const{item:p,fullItem:m,i18n:v,user:b,sublayer:y,userInfo:w,portal:f,itemError:I}=this,x=null!==(e=null==p?void 0:p.owner)&&void 0!==e?e:"",k="public_authoritative"===(null==m?void 0:m.contentStatus)?this.i18n.itemManagedBy.replace("${username}",x):x,O=(null===(t=this.layers)||void 0===t?void 0:t.length)?v.layersCount.replace("${count}",`${(null===(i=this.layers)||void 0===i?void 0:i.length)||0}`):v.layers,R=null===(n=null===(l=null===(a=this.store)||void 0===a?void 0:a.state.highlights)||void 0===l?void 0:l[null==p?void 0:p.id])||void 0===n?void 0:n.sublayers,C=(null==R?void 0:R.length)&&!this.loadingLayers?v.matchedNumber.replace("${num}",`${R.length}`):null;return(0,s.h)(s.H,null,(0,s.h)("calcite-flow",null,(0,s.h)("calcite-flow-item",{closable:!0,loading:!m&&!I,onCalciteFlowItemClose:e=>{e.stopPropagation(),this.closePreview()},ref:e=>this.flowItem=e},this.renderHeader(),!!I&&(0,s.h)("div",{class:"error-container"},(0,s.h)("calcite-notice",{kind:"danger",open:!0,scale:"s"},(0,s.h)("div",{slot:"title"},this.i18n.itemError.title),(0,s.h)("div",{slot:"message"},I))),m&&(0,s.h)("div",{class:"content"},(0,s.h)("calcite-accordion",{"icon-position":"start",appearance:"transparent",key:p.id,class:"accordion",onClick:async e=>{const t=e.target;this.isAccordionItem(t)&&(await(0,o.t)(300),t.expanded&&t.scrollIntoView({behavior:"smooth",block:"start"}))}},(0,s.h)("calcite-accordion-item",{heading:v.thumbnail,ref:e=>{this.thumbnailElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.thumbnailElement,"thumbnail")},(0,s.h)("div",{class:"section section--tight"},(0,s.h)("arcgis-item-browser-card-thumbnail",{item:p,user:b,portal:f}))),(0,s.h)("calcite-accordion-item",{heading:v.overview,ref:e=>{this.overviewElement=e,this.shouldExpandOverview&&(e.expanded=!0,this.shouldExpandOverview=!1)},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.overviewElement,"overview")},(0,s.h)("div",{class:"section"},(0,s.h)("slot",{name:"summary-top"}),this.renderDetail(v.summary,m.snippet,v.noSummary),!!(null===(c=(0,S.g)(p,f,b))||void 0===c?void 0:c.length)&&[(0,s.h)("h4",{class:"details-title"},v.itemStatus),(0,s.h)("arcgis-item-badges",{class:"badges",item:p,portal:f,user:b,scale:"s",width:"full"})],(0,s.h)("h4",{class:"details-title"},v.owner),(null===(h=this.store)||void 0===h?void 0:h.state.panel)?(0,s.h)("arcgis-user-avatar",{user:w,scale:"s",portal:f,showName:!0,description:k}):(0,s.h)("arcgis-user-popup",{baseUrl:r.c.config.baseUrl,portal:f,item:m}),(0,s.h)("h4",{class:"details-title"},v.shared),(0,s.h)("arcgis-item-share-summary",{item:m,scale:"s"}),this.renderDetail(v.updated,(0,g.a)(m.modified)),!!b&&(0,s.h)("arcgis-item-favorite",{class:"favorite",user:b,portal:f,item:m,width:"full"}))),(0,s.h)("calcite-accordion-item",{heading:v.description,key:"description",ref:e=>{this.descriptionElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.descriptionElement,"description")},(0,s.h)("div",{class:"section"},m.description?(0,s.h)("div",{class:"description",innerHTML:(0,d.s)(m.description)}):(0,s.h)("p",{class:"details-text details-text--empty"},v.noDescription))),(0,s.h)("calcite-accordion-item",{heading:v.details,ref:e=>{this.detailsElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.detailsElement,"details")},(0,s.h)("div",{class:"section"},this.renderDetail(v.created,(0,g.a)(m.created)),this.renderDetail(v.viewCount,this.formattedViews),"Dashboard"===p.type&&this.renderDetail(v.dashboardViews,(null===(u=p.typeKeywords)||void 0===u?void 0:u.includes("Mobile"))?v.dashboardMobile:v.dashboardDesktop),!!m.size&&this.renderDetail(v.fileSize,(0,_.f)(m.size)),(0,s.h)("arcgis-item-browser-preview-copy",{text:m.id,heading:v.ID}),m.url&&(0,s.h)("arcgis-item-browser-preview-copy",{text:m.url,heading:v.URL}),this.renderDetail(v.credits,m.accessInformation,v.noCredits),this.renderDetail(v.termsOfUse,m.licenseInfo,v.noTermsOfUse,!0))),this.showLayers&&(0,s.h)("calcite-accordion-item",{heading:O,description:C,ref:e=>{this.layersElement=e},onClick:async e=>{this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.layersElement,"layers")}},this.renderLayers()))),!this.hidePreviewFooters&&(0,s.h)("div",{slot:"footer",class:"footer-actions"},this.renderSublayerSelect(),(0,s.h)("slot",{name:"footer"}))),!!y&&this.renderSublayerPreview()))}get el(){return(0,s.d)(this)}static get watchers(){return{item:["updatePreview"]}}};ce.style=":host{background-color:var(--calcite-ui-background);flex:1 1 0%;display:flex;flex-direction:column;height:100%;width:100%}.preview__header{-webkit-margin-start:0.75rem;margin-inline-start:0.75rem}.preview__title{font-size:1rem;font-weight:500;color:var(--calcite-ui-text-1);padding:0;margin:0;word-wrap:break-word;overflow-wrap:break-word;line-height:1.375}.title{font-weight:500;color:var(--calcite-ui-text-1);font-size:1.125rem;margin-top:0.75rem;margin-bottom:0.75rem;padding:0;word-wrap:break-word;word-break:break-word}.badges{display:block;margin-bottom:1rem}.badges[empty]{display:none}calcite-accordion-item{--calcite-accordion-item-padding:1rem 1rem;--calcite-accordion-item-background:var(--calcite-ui-foreground-1);width:100%;box-sizing:border-box;border-bottom:1px solid var(--calcite-ui-border-2)}.section{padding-left:1rem;padding-right:1rem;padding-top:1rem;padding-bottom:1rem;background-color:var(--calcite-ui-background);margin:0rem -1rem calc(-1rem - 1px) -1rem;line-height:1.35}.section--tight{padding-top:0;padding-bottom:0;padding-left:0;padding-right:0}.details-title{font-weight:500;font-size:0.75rem;color:var(--calcite-ui-text-3);padding-bottom:0.25rem;padding-top:0;margin-top:1rem;margin-bottom:0;--calcite-label-margin-bottom:0}.details-title:first-of-type{margin-top:0}.details-title--label{padding-bottom:0}.details-text{font-weight:400;font-size:0.875rem;color:var(--calcite-ui-text-1);padding:0;margin:0;word-wrap:break-word;overflow-wrap:break-word}.details-text a{color:var(--calcite-ui-text-link)}.details-text--empty{color:var(--calcite-ui-text-3);font-weight:400;font-size:0.875rem}.description{word-wrap:break-word;overflow-wrap:break-word;line-height:1.35}.description *{max-width:100%;font-size:0.875rem !important}.favorite{padding-top:1.5rem;display:block}.copy-input{--calcite-ui-background:var(--calcite-ui-foreground-1)}.sublayer-item{--tw-shadow:none}.sublayer__tabs{background-color:var(--calcite-ui-background);flex:1 1 auto}.sublayer__tabs--white{background-color:var(--calcite-ui-foreground-1)}.sublayer-item__content{max-width:10.875rem;min-width:0;flex-direction:column;display:flex}.sublayer-item__title{padding-top:0.5rem;padding-bottom:0.5rem;color:var(--calcite-ui-text-2);font-size:0.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-decoration:underline}.sublayer-item__title--matched{padding-top:0;padding-bottom:0}.sublayer-item__description{font-size:0.75rem;color:var(--calcite-ui-text-3)}.sublayer__header{display:flex;padding-left:1rem;padding-right:1rem;padding-top:1rem;padding-bottom:0.5rem;background-color:var(--calcite-ui-foreground-1);font-weight:500;color:var(--calcite-ui-text-1)}.sublayer__header__title{word-wrap:break-word;overflow-wrap:break-word;min-width:0}.sublayer__header__icon{-webkit-margin-end:1rem;margin-inline-end:1rem}.sublayer__tab-nav{background-color:var(--calcite-ui-foreground-1);padding-left:1rem;padding-right:1rem}.sublayer__content{height:100%;background-color:var(--calcite-ui-foreground-1);margin-top:-0.5rem}.sublayer__content--overview{background-color:var(--calcite-ui-background);padding-top:2rem;padding-bottom:2rem;padding-left:1.25rem;padding-right:1.25rem;box-sizing:border-box}.footer-actions{width:100%;display:grid;grid-template-columns:repeat(1, minmax(0, 1fr));grid-gap:0.5rem;gap:0.5rem}.error-container{height:100%;display:flex;padding:1rem}";const de=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserInternalUIAction=(0,s.c)(this,"arcgisItemBrowserInternalUIAction",7),this.heading=void 0,this.text=void 0,this.copied=!1}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.copy}async handleCopy(e){navigator.clipboard.writeText(e),this.copied=!0;const t=this.el.parentElement.classList.contains("sublayer__content");this.arcgisItemBrowserInternalUIAction.emit({action:"copy",category:"panel action",details:t?"layers":"details"}),await(0,o.t)(1e4),this.copied=!1}render(){const{heading:e,text:t,i18n:i}=this;return(0,s.h)(s.H,null,(0,s.h)("calcite-label",{class:"label",scale:"s"},(0,s.h)("h4",{class:"heading"},e),(0,s.h)("calcite-input",{value:t,readOnly:!0,alignment:"start",type:"text",label:e,scale:"s",class:"input"},(0,s.h)("div",{slot:"action",class:"action"},(0,s.h)("calcite-button",{class:"button",slot:"action",iconStart:"copy-to-clipboard",id:"copy-button",kind:"neutral",scale:"s",onClick:()=>this.handleCopy(t),onMouseOut:async()=>{await(0,o.t)(200),this.copied=!1}}),(0,s.h)("div",{class:"tooltip"},this.copied?null==i?void 0:i.copied:null==i?void 0:i.copy)))))}get el(){return(0,s.d)(this)}};de.style=".heading{font-weight:500;font-size:0.75rem;color:var(--calcite-ui-text-3);padding-bottom:0.25rem;padding-top:0;margin-top:1rem;margin-bottom:0;--calcite-label-margin-bottom:0}.label{padding-bottom:0}.input{--calcite-ui-background:var(--calcite-ui-foreground-1)}.action{position:relative}.tooltip{position:absolute;opacity:0;transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;transition-duration:150ms;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.75rem;padding-right:0.75rem;border-radius:var(--calcite-border-radius);font-size:0.75rem;color:var(--calcite-ui-text-1);font-weight:500;background-color:var(--calcite-ui-foreground-1);box-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);white-space:nowrap;transform:translateY(-8px);top:calc(100% + 4px);inset-inline-end:0;width:auto;border:1px solid var(--calcite-ui-border-3);line-height:1.375}.button:hover+.tooltip,.button:focus+.tooltip{opacity:1;transform:translateY(0)}";const he=class{constructor(e){(0,s.r)(this,e),this.field=void 0,this.item=void 0,this.sublayer=void 0,this.showFieldStatistics=void 0,this.api=4,this.layer=void 0}async getFieldData(){if(!this.layer){const[e]=await(0,x.l)(["esri/layers/FeatureLayer"]),t=new e({url:this.item.url,layerId:this.sublayer.id});await t.load(),this.layer=t}}render(){const{field:e,showFieldStatistics:t,api:i}=this;return e?(0,s.h)(s.H,null,(0,s.h)("calcite-block",{heading:e.alias||e.name,description:e.name,headingLevel:5,collapsible:t&&4===i&&"Feature Service"===this.item.type,onCalciteBlockToggle:()=>{this.getFieldData()}},(0,s.h)("calcite-icon",{slot:"icon",icon:C.f[e.type]||"string",scale:"s",class:"layer-icon"}),!!this.layer&&(0,s.h)("arcgis-field-info",{layer:this.layer,fieldName:e.name}))):null}get el(){return(0,s.d)(this)}},ue=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserSearch=(0,s.c)(this,"arcgisItemBrowserSearch",7),this.arcgisItemBrowserSearchInput=(0,s.c)(this,"arcgisItemBrowserSearchInput",7),this.term=void 0,this.placeholder=void 0}async componentWillLoad(){this.store=q(this.el)}render(){var e,t;const{term:i,placeholder:r}=this;return(0,s.h)(s.H,null,"subscription content"!==(null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.bucket)&&(0,s.h)("arcgis-browser-search",{term:i,placeholder:r,onArcgisBrowserSearch:e=>this.arcgisItemBrowserSearch.emit(e.detail),onArcgisBrowserSearchInput:e=>this.arcgisItemBrowserSearchInput.emit(e.detail)}))}get el(){return(0,s.d)(this)}},pe={my:{sortField:"modified",sortOrder:"desc"},favorites:{sortField:"modified",sortOrder:"desc"},group:{sortField:"modified",sortOrder:"desc"},org:{sortField:"modified",sortOrder:"desc"},"subscription content":{sortField:"relevance",sortOrder:"asc"},"living atlas":{sortField:"relevance",sortOrder:"asc"},"living atlas analysis":{sortField:"relevance",sortOrder:"asc"},all:{sortField:"relevance",sortOrder:"asc"}},me=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserSort=(0,s.c)(this,"arcgisItemBrowserSort",7),this.options=["title","relevance","modified"],this.field=void 0,this.order=void 0,this.activeField=void 0,this.activeOrder=void 0,this.userSetSort=void 0}async componentWillLoad(){this.store=q(this.el);const{field:e,options:t}=this;if(e)this.userSetSort=!0,this.activeField=e,this.activeOrder=this.order||(0,F.a)(e);else{const e=this.store.state.bucket&&pe[this.store.state.bucket];this.activeField=e?e.sortField:(null==t?void 0:t[0])||"relevance",this.activeOrder=(0,F.a)(this.activeField)}var i,s;i=this.store,s=e=>{const t=pe[e];t&&this.updateSortField(t.sortField)},i.onChange("bucket",(e=>{s(e)})),((e,t)=>{e.onChange("sort",(e=>{t(e)}))})(this.store,(e=>{this.activeField=e.sortField,this.activeOrder=e.sortOrder}))}componentDidLoad(){this.arcgisItemBrowserSort.emit({sortField:this.field||this.activeField,sortOrder:this.order||(this.field?(0,F.a)(this.field):this.activeOrder)})}updateSortField(e){this.activeField=e,this.activeOrder=(0,F.a)(e),this.arcgisItemBrowserSort.emit({sortField:this.activeField,sortOrder:this.activeOrder})}updateSortOrder(e){this.activeOrder=e,this.arcgisItemBrowserSort.emit({sortField:this.activeField,sortOrder:this.activeOrder})}render(){var e,t;const{activeField:i,activeOrder:r,field:o,order:a,options:l}=this,n=i||(l.includes(o)?o:l[0]),c=r||a;return(0,s.h)(s.H,null,"subscription content"!==(null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.bucket)&&(0,s.h)("arcgis-browser-sort",{store:this.store,field:n,order:c,options:l,onArcgisBrowserSortFieldChange:e=>this.updateSortField(e.detail),onArcgisBrowserSortOrderChange:e=>this.updateSortOrder(e.detail)}))}get el(){return(0,s.d)(this)}},ge={title:{width:"minmax(0, 7fr)"},type:{width:"minmax(0, 5fr)",hidden:!0},modified:{width:"7.5rem"},badges:{width:"6.5rem",hidden:!0},owner:{width:"minmax(0, 3fr)"},sharing:{width:"6rem",hidden:!0},size:{width:"minmax(0, 2fr)"},deleted:{width:"minmax(0, 2fr)"},details:{width:"8rem",hidden:!0},favorite:{width:"3.5rem",hidden:!0},actions:{width:"3.5rem",hidden:!0}},ve=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserColumnUpdate=(0,s.c)(this,"arcgisItemBrowserColumnUpdate",7),this.arcgisItemBrowserSort=(0,s.c)(this,"arcgisItemBrowserSort",7),this.rows=[],this.columns=["title","type","modified","badges","owner","sharing","details","actions"],this.activeFocus=[0,0]}async componentWillLoad(){var e,t;this.store=q(this.el),this.i18n=this.store.state.i18n.table,e=this.store,t=e=>{if(!e&&this.store.state.activeFocus){const[e,t]=this.store.state.activeFocus;this.updateRows();const i=this.rows[e];null==i||i.focusColumn(t)}},e.onChange("preview",(e=>{t(e)}))}async componentDidLoad(){this.arcgisItemBrowserColumnUpdate.emit(this.columns)}updateColumns(e){this.arcgisItemBrowserColumnUpdate.emit(e)}async attemptMove([e,t],i){const s=this.rows[e];if(await s.canFocusColumn(t))this.store.state.activeFocus=[e,t],requestAnimationFrame((()=>s.focusColumn(t)));else switch(i){case"right":return this.moveRight([e,t]);case"left":return this.moveLeft([e,t]);case"up":return this.moveUp([e,t]);case"down":return this.moveDown([e,t])}}updateRows(){this.rows=this.rowSlot.assignedElements()}getLastColumnIndex(){const e="multiple"===this.store.state.selection;return this.columns.length-(e?0:1)}getLastRowIndex(){return this.rows.length-1}async moveRight([e,t]){const i=t>=this.getLastColumnIndex()?0:t+1;this.attemptMove([e,i],"right")}async moveLeft([e,t]){const i=t<1?this.getLastColumnIndex():t-1;this.attemptMove([e,i],"left")}async moveUp([e,t]){const i=e<1?this.getLastRowIndex():e-1;this.attemptMove([i,t],"up")}async moveDown([e,t]){const i=e+1>this.getLastRowIndex()?0:e+1;this.attemptMove([i,t],"down")}handleKeyboard(e){const{key:t}=e,i=this.store.state.activeFocus||[0,0];switch(this.updateRows(),t){case"ArrowDown":return e.preventDefault(),this.moveDown(i);case"ArrowUp":return e.preventDefault(),this.moveUp(i);case"ArrowLeft":return e.preventDefault(),this.moveLeft(i);case"ArrowRight":return e.preventDefault(),this.moveRight(i)}}renderColumn(e){const t=this.i18n.headers[e],{hidden:i}=ge[e],{sortField:r,sortOrder:o}=this.store.state.sort||{},a=r===e;return i?(0,s.h)("div",{role:"columnheader",class:"column-header"},(0,s.h)("span",{class:"screen-reader-only"},t)):(0,s.h)("div",{class:{"column-header":!0,"column-header--sorted":a}},!("title"!==e||"multiple"!==this.store.state.selection)&&(0,s.h)("div",{role:"columnheader",class:"screen-reader-only"},(0,s.h)("span",null,this.i18n.selection)),(0,s.h)("div",{role:"columnheader","aria-sort":"asc"===o?"ascending":"descending"},(0,s.h)("calcite-button",{width:"full",alignment:"icon-end-space-between",tabindex:"-1",scale:"m",appearance:"transparent",kind:a?"brand":"neutral","icon-end":a&&"asc"===o?"caret-up":"caret-down",onClick:()=>{a?this.arcgisItemBrowserSort.emit({sortField:r,sortOrder:"asc"===o?"desc":"asc"}):this.arcgisItemBrowserSort.emit({sortField:e,sortOrder:(0,F.a)(e)})}},(0,s.h)("span",{class:{button__text:!0,"button__text--sorted":a}},t))))}render(){const e="multiple"===this.store.state.selection;return(0,s.h)(s.H,{style:{"--item-browser-table-columns":`${this.columns.map((e=>ge[e].width)).join(" ")}`}},(0,s.h)("div",Object.assign({class:"table","aria-label":"Table with selection",role:"grid","aria-readonly":"true"},e?{"aria-multiselectable":"true"}:{},{onKeyDown:e=>this.handleKeyboard(e)}),(0,s.h)("div",{role:"rowgroup"},(0,s.h)("div",{role:"row",class:"header"},this.columns.map((e=>this.renderColumn(e))))),(0,s.h)("div",null,(0,s.h)("slot",{ref:e=>this.rowSlot=e}))))}get el(){return(0,s.d)(this)}static get watchers(){return{columns:["updateColumns"]}}};ve.style=".table{background-color:var(--calcite-ui-foreground-1)}.header{display:grid;grid-template-columns:var(--item-browser-table-columns)}.button__text--sorted{font-weight:500}.column-header{border-bottom:1px solid var(--calcite-ui-border-2);margin-bottom:1px}.column-header--sorted{border-bottom-color:var(--calcite-ui-brand)}.screen-reader-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}";const be=class{constructor(e){var t;(0,s.r)(this,e),this.arcgisItemBrowserColumnUpdate=(0,s.c)(this,"arcgisItemBrowserColumnUpdate",7),this.arcgisItemBrowserCardSelect=(0,s.c)(this,"arcgisItemBrowserCardSelect",7),this.arcgisItemBrowserCardPreview=(0,s.c)(this,"arcgisItemBrowserCardPreview",7),this.columnRefs={},this.item=void 0,this.portal=void 0,this.index=void 0,this.user=void 0,this.api=4,this.baseUrl=null===(t=null===r.c||void 0===r.c?void 0:r.c.config)||void 0===t?void 0:t.baseUrl,this.link=void 0,this.newTab=void 0,this.name=void 0,this.preview=void 0,this.showItemType=!0,this.showBadges=!0,this.showSharing=!0,this.actions=[],this.hasMouse=void 0,this.mouseOverColumn=void 0}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.tableRow}async canFocusColumn(e){var t;const i=this.store.state.columns||[],s=this.getColumnNumber(e),r=i[s];return"badges"===r?!this.badges.empty:!!(null===(t=this.columnRefs[r])||void 0===t?void 0:t.method)||s<0}async focusColumn(e){var t;let i=e;if("multiple"===this.store.state.selection){if(0===e)return void(null===(t=this.checkbox)||void 0===t||t.setFocus());i=e-1}const{el:s,method:r}=this.columnRefs[this.store.state.columns[i]]||{};s[r]()}getColumnNumber(e){return"multiple"===this.store.state.selection?e-1:e}isSimpleColumn(e){return!["owner","details","favorite","actions"].includes(e)}onClick(e){return{onClick:()=>{e()},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e()}}}renderTitle(e){var t,i,r,o;const{item:a}=this,l=null!==(i=null===(t=this.store.state.activeFocus)||void 0===t?void 0:t[1])&&void 0!==i?i:0,n=(null!==(o=null===(r=this.store.state.activeFocus)||void 0===r?void 0:r[0])&&void 0!==o?o:0)===this.index,c=l<2;return(0,s.h)("div",{class:"checkbox-wrap",onMouseOver:()=>{this.mouseOverColumn=0},key:"title"},(0,s.h)("div",{role:"gridcell",class:"cell"},(0,s.h)("calcite-checkbox",Object.assign({},n&&c||this.hasMouse&&0===this.mouseOverColumn?{}:{inert:!0},{class:"checkbox",checked:e,ref:e=>{this.checkbox=e},onClick:e=>{e.stopPropagation(),this.store.state.activeFocus=[this.index,0]},onCalciteCheckboxChange:()=>{this.arcgisItemBrowserCardSelect.emit({item:a,selected:!e})},value:a.id}),(0,s.h)("span",{class:"screen-readers-only"},a.title))),(0,s.h)("div",Object.assign({onMouseOver:()=>{this.mouseOverColumn=0},role:"gridcell",class:"cell cell--narrow checkbox__title",id:`row-${a.id}`,tabindex:1===l&&n?0:-1},this.onClick((()=>{"title"===this.preview&&this.arcgisItemBrowserCardPreview.emit(a),this.store.state.activeFocus=[this.index,1]})),{ref:e=>{this.columnRefs.title={el:e,method:"focus"}}}),this.item.title))}renderColumn(e,t,i){var o,a,l,n;const{item:c,api:d,portal:h,baseUrl:u,user:p}=this,m=null!==(a=null===(o=this.store.state.activeFocus)||void 0===o?void 0:o[1])&&void 0!==a?a:0,v=this.isSimpleColumn(e),b=(null!==(n=null===(l=this.store.state.activeFocus)||void 0===l?void 0:l[0])&&void 0!==n?n:0)===this.index,y=t===this.getColumnNumber(m);if("title"===e&&"multiple"===this.store.state.selection)return this.renderTitle(i);const w={tabIndex:y&&b?0:-1},f=["owner"].includes(e);return(0,s.h)("div",Object.assign({key:e},v?w:{},{role:"gridcell",class:{cell:!0,"cell--overflow":f},ref:t=>{v&&(this.columnRefs[e]={el:t,method:"focus"})},onClick:()=>{setTimeout((()=>{const e="multiple"===this.store.state.selection?t+1:t;y&&b||(this.store.state.activeFocus=[this.index,e])}),100)},onMouseOver:()=>{this.mouseOverColumn=t}}),"title"===e&&(0,s.h)("span",null,this.item.title),"type"===e&&(0,s.h)("arcgis-item-type",{item:c,portal:this.portal,scale:"m"}),"modified"===e&&(0,g.a)(c.modified),"badges"===e&&(0,s.h)("arcgis-item-badges",{ref:e=>this.badges=e,showTooltips:!0,item:c,width:"narrow",scale:"s",tabIndex:-1}),"sharing"===e&&(0,s.h)("arcgis-item-share-summary",{showText:!1,item:c,scale:"s"}),"owner"===e&&(0,s.h)("arcgis-user-popup",{item:c,underline:!0,api:d,portal:h,baseUrl:u,scale:"m",class:"user-popup",showAvatar:!1,ref:e=>{this.columnRefs.owner={el:e,method:"setFocus"}},tabIndex:-1}),"details"===e&&(0,s.h)("a",Object.assign({},w,{href:`${this.baseUrl}/item.html?id=${c.id}`,target:"_blank",class:"button",ref:e=>{this.columnRefs.details={el:e,method:"focus"}}}),this.i18n.details),"favorite"===e&&(0,s.h)("arcgis-item-favorite",{item:c,portal:h,user:p||(null===r.c||void 0===r.c?void 0:r.c.user),iconOnly:!0,ref:e=>{this.columnRefs.favorite={el:e,method:"setFocus"}},tabIndex:-1}),"actions"===e&&(0,s.h)("span",null,this.actions.length>0&&(0,s.h)("calcite-dropdown",{placement:"bottom-end",scale:"m",overlayPositioning:"fixed"},(0,s.h)("button",Object.assign({},w,{class:"button button--transparent","aria-label":this.i18n.moreOptions,slot:"trigger",ref:e=>{this.columnRefs.actions={el:e,method:"focus"}}}),(0,s.h)("calcite-icon",{icon:"ellipsis",scale:"s"})),(0,s.h)("calcite-dropdown-group",{selectionMode:"none",onKeyDown:e=>{e.stopPropagation()}},this.actions.map((({text:e,newTab:t,link:i,action:r})=>(0,s.h)("calcite-dropdown-item",Object.assign({onClick:e=>{r&&(e.preventDefault(),r())},key:e},!r&&i?Object.assign(Object.assign({},t?{target:"_blank",rel:"noopener noreferrer"}:{}),{href:i}):{}),e)))))))}render(){var e,t;const i=this.store.state.columns||[],{item:r}=this,o=null===(e=this.store)||void 0===e?void 0:e.state.selection,a=["single","multiple"].includes(o)&&E({item:r,selectedItems:null===(t=this.store)||void 0===t?void 0:t.state.selectedItems});return(0,s.h)(s.H,Object.assign({},a?{"data-selected":!0}:{},{onMouseOver:()=>{this.hasMouse=!0},onMouseOut:()=>{this.hasMouse=!1}}),(0,s.h)("div",Object.assign({class:{row:!0,"row--selected":a,"row--first":0===this.index},role:"row"},a?{ariaSelected:!0}:{},{"aria-labelledby":`row-${r.id}`}),i.map(((e,t)=>this.renderColumn(e,t,a)))))}get el(){return(0,s.d)(this)}};be.style=":host{display:block;--item-browser-table-row-active-background:#bbd5fa26}.row{display:grid;background-color:var(--calcite-ui-foreground-1);grid-template-columns:var(--item-browser-table-columns);border:1px solid var(--calcite-ui-foreground-1);border-top:1px solid var(--calcite-ui-border-2);margin-top:-1px}.row--first{border-top-color:var(--calcite-ui-foreground-1)}.row--selected{position:relative;border-color:var(--calcite-ui-brand);background-color:var(--item-browser-table-row-active-background)}.row--selected-last{border-top-color:var(--item-browser-table-row-active-background)}.cell{padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;font-size:0.875rem;color:var(--calcite-ui-text-1);display:flex;align-items:center;justify-content:flex-start;outline-color:transparent;line-height:1.35}.cell:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.cell--narrow{-webkit-padding-start:0.5rem;padding-inline-start:0.5rem}.cell--overflow{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:break-word;overflow-wrap:break-word}.checkbox-wrap{display:flex}.checkbox__title{flex:1 1 0%}.user-popup{width:100%}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.button{border:1px solid var(--calcite-ui-foreground-3);font-family:inherit;background-color:var(--calcite-ui-foreground-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;outline-color:transparent;height:2rem;box-sizing:border-box;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:flex;align-items:center;color:var(--calcite-ui-text-1);text-decoration:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.button:hover{box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3)}.button:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.button--transparent{border:1px solid transparent;background:transparent;padding-left:0.5rem;padding-right:0.5rem}.button--transparent:hover{background-color:var(--calcite-ui-foreground-2);box-shadow:none}";const ye=class{constructor(e){(0,s.r)(this,e)}async componentWillLoad(){this.store=q(this.el)}render(){var e,t;return(0,s.h)(s.H,null,(0,s.h)("arcgis-browser-top-bar",{store:this.store,filtersDisabled:"subscription content"===(null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.bucket)},(0,s.h)("div",{slot:"content-start"},(0,s.h)("slot",{name:"content-start"})),(0,s.h)("div",{slot:"bucket"},(0,s.h)("slot",{name:"bucket"})),(0,s.h)("div",{slot:"search"},(0,s.h)("slot",{name:"search"})),(0,s.h)("div",{slot:"content-end"},(0,s.h)("slot",{name:"content-end"}))))}get el(){return(0,s.d)(this)}},we=class{constructor(e){(0,s.r)(this,e),this.arcgisItemBrowserView=(0,s.c)(this,"arcgisItemBrowserView",7),this.options=["grid","list"],this.view=void 0}async componentWillLoad(){this.store=q(this.el),this.i18n=this.store.state.i18n.view;const{view:e}=this;var t,i;e||(this.view=this.store.state.view||"list"),t=this.store,i=e=>{this.view=e},t.onChange("view",(e=>{i(e)}))}syncStore(e){this.store.state.view=e}componentDidLoad(){this.arcgisItemBrowserView.emit(this.view)}renderOption(e){return(0,s.h)("calcite-dropdown-item",{key:e,selected:e===this.view,onCalciteDropdownItemSelect:()=>this.arcgisItemBrowserView.emit(e),iconStart:e},this.i18n[e])}render(){const{options:e,view:t,i18n:i}=this;return(0,s.h)(s.H,null,(0,s.h)("calcite-dropdown",{placement:"bottom-end",scale:"m",overlayPositioning:"fixed",width:"s"},(0,s.h)("calcite-button",{class:"button",slot:"trigger",scale:"m",appearance:"outline-fill",kind:"neutral",iconStart:t,iconFlipRtl:"start","aria-label":`${i.view}: ${i[t]}`},i[t]),(0,s.h)("calcite-dropdown-group",{selectionMode:"single"},e.map((e=>this.renderOption(e))))))}get el(){return(0,s.d)(this)}static get watchers(){return{view:["syncStore"]}}}},12357:(e,t,i)=>{i.d(t,{a:()=>n,b:()=>l,f:()=>a});var s=i(41171),r=i(76134),o=i(62381);async function a(e,t){return null!=e||(e=r.c.portal),null!=t||(t=r.c.user),!(null==e?void 0:e.id)||t&&(0,o.n)(t)?null:(0,s.f)((()=>(0,s.r)(`${(0,s.g)(e)}portals/${e.id}/categorySchema`)),"categorySchema",e.id)}async function l(e,t){return null!=t||(t=null===r.c||void 0===r.c?void 0:r.c.portal),e&&t?(0,s.f)((()=>(0,s.r)(`${(0,s.g)(t)}community/groups/${e}/categorySchema`)),"categorySchema",e):null}async function n(e){return(0,s.f)((()=>async function(e){var t;const i=(0,s.g)(e),r=await(0,s.r)(`${i}portals/self`),o=await(0,s.r)(`${i}community/groups?q=${r.contentCategorySetsGroupQuery}`),a=null===(t=null==o?void 0:o.results)||void 0===t?void 0:t[0],l=(await(0,s.r)(`${i}content/groups/${a.id}/search`,{q:"typekeywords: LivingAtlas"})).results[0];return(0,s.r)(`${i}content/items/${l.id}/data`)}(e)),"categorySchema","living-atlas")}},48333:(e,t,i)=>{i.d(t,{a:()=>o,f:()=>c,g:()=>n,s:()=>a,v:()=>l});var s=i(31546),r=i(48680);function o(e,t){const i=/(?:\.([^.]+))?$/;let s=e.replace(/^.*(\\|\/|:)/,""),o=s&&i.exec(s)[1]?i.exec(s)[1].toLowerCase():"",a="";if(s.indexOf(".rft.")>-1){const[e,t]=s.split(".rft.");o=`rft.${t}`,a=e}return s&&!a&&(a=-1===s.lastIndexOf(".")?s:s.substring(0,s.lastIndexOf("."))),a=a.replace(/\.|-/g,"_"),t&&(a=function(e){return`${e}_${(0,r.g)()}`}(a),s=`${a}.${o}`),{title:a,fileName:s,extension:o}}function a(e,t){return o(e.name,!!t)}function l(e,t){let i=e;const s=e.lastIndexOf("\\");return s>-1&&(i=i.substring(s+1,i.length)),i.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function n(e){return s.a[e]?s.a[e]:s.a[Object.keys(s.a).find((t=>s.a[t].type===e))]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},48680:(e,t,i)=>{i.d(t,{g:()=>s});const s=()=>[2,1,1,1,3].map((e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},95474:(e,t,i)=>{i.d(t,{a:()=>l,d:()=>o,g:()=>n,i:()=>a});const s=e=>null==e?void 0:e.isPortal,r=(e,t)=>null==t?void 0:t.some((e=>{var t;return null===(t=null==e?void 0:e.entitlements)||void 0===t?void 0:t.includes("geobim")})),o=["maps","maps-webmaps","maps-mapfiles","layers","layers-weblayers","layers-weblayers-features","layers-weblayers-features-catalog","layers-weblayers-features-oriented","layers-weblayers-features-parcel","layers-weblayers-tiles","layers-weblayers-mapimage","layers-weblayers-imagery","layers-weblayers-scenelayers","layers-weblayers-videolayers","layers-weblayers-tiledimagelayers","layers-weblayers-grouplayers","layers-weblayers-elevationlayers","layers-weblayers-feeds","layers-weblayers-tables","layers-layerfiles","scenes","applications","applications-web","applications-dashboards","applications-sites","applications-pages","applications-geobim-projects","applications-geobim-apps","applications-instant-apps","applications-storymap","applications-experience","applications-wab","applications-mobile","applications-desktop","developer-credentials","developer-credentials-oauth","styles","styles-web","styles-desktop","tools","tools-locators","tools-geodatabase","tools-geometric","tools-geoprocessing","tools-network","tools-analytics","files","files-document","files-image","files-pdf","files-csv","files-report","files-raster","notebooks","insights","insights-workbooks","insights-pages","insights-models","insights-themes","data-stores","knowledge-graphs"],a={maps:{q:'type:("Project Package" OR "Windows Mobile Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Web Map" OR "CityEngine Web Scene" OR "Map Document" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Template") -type:("Web Mapping Application" OR "Layer Package")',children:{"maps-webmaps":{q:'type:("Web Map" OR "CityEngine Web Scene") -type:"Web Mapping Application"'},"maps-mapfiles":{q:'type:("Map Document" OR "Windows Mobile Package" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Map Template")'}}},layers:{q:'(type:"Scene Service" OR type:"Feature Collection" OR type:"Route Layer" OR type:"Layer" OR type:"Explorer Layer" OR type:"Tile Package" OR type:"Compact Tile Package" OR type:"Vector Tile Package" OR type:"Scene Package" OR type:"Layer Package" OR type:"Feature Service" OR type:"Stream Service" OR type:"Feed" OR type:"Map Service" OR type:"Vector Tile Service" OR type:"Media Layer" OR type:"Image Service" OR type:"WMS" OR type:"WFS" OR type:"WMTS" OR type:"KML" OR type:"Group Layer" OR typekeywords:"OGC" OR typekeywords:"Geodata Service" OR type:"Globe Service" OR type:"CSV" OR type:"Shapefile" OR type:"GeoJson" OR type:"Service Definition" OR type:"File Geodatabase" OR type:"CAD Drawing" OR type:"Relational Database Connection" OR type:"GeoPackage") -type:("Web Mapping Application" OR "Geodata Service")',children:{"layers-weblayers-features":{q:'type:("Feature Collection" OR "Feature Service" OR "Stream Service" OR "WFS" OR "Feed" OR "OGCFeatureServer") -typekeywords:"Table"',children:{"layers-weblayers-features-catalog":{q:'type:"Feature Service" typekeywords:"CatalogLayer"'},"layers-weblayers-features-oriented":{q:'type:"Feature Service" typekeywords:"OrientedImageryLayer"'},"layers-weblayers-features-parcel":{q:'type:"Feature Service" typekeywords:"ParcelFabric"'}}},"layers-weblayers-tiles":{q:'type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled")'},"layers-weblayers-mapimage":{q:'type:("Map Service" OR "WMS") -typekeywords:("Hosted" OR "Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile")'},"layers-weblayers-imagery":{q:'type:"Image Service" -typekeywords: "Elevation 3D Layer" -typekeywords: "Tiled Imagery"'},"layers-weblayers-scenelayers":{q:'type:"Scene Service"'},"layers-weblayers-videolayers":{q:'type:"Video Service"',show:s},"layers-weblayers-tiledimagelayers":{q:'type: "Image Service" typekeywords: "Tiled Imagery"'},"layers-weblayers-grouplayers":{q:'type: "Group Layer"'},"layers-weblayers-medialayers":{q:'type: "Media Layer"'},"layers-weblayers-elevationlayers":{q:'type: "Image Service" typekeywords: "Elevation 3D Layer"'},"layers-weblayers-streams":{q:'type:"Stream Service"'},"layers-weblayers-feeds":{q:'type:"Feed"',show:s},"layers-weblayers-tables":{q:"typekeywords:Table"},"layers-layerfiles":{q:'type:("Layer" OR "Explorer Layer" OR "Tile Package" OR "Compact Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Microsoft Excel" OR "GeoPackage") -type:("Explorer Maps" OR "Map Documents")'}}},scenes:{q:'-type:"CityEngine Web Scene" type:"Web Scene"'},applications:{q:'type:("Code Sample" OR "Web Mapping Application" OR "Mobile Application" OR "Application" OR "Desktop Application Template" OR "Desktop Application" OR "Operation View" OR "Dashboard" OR "Operations Dashboard Extension" OR "Workforce Project" OR "Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Hub Page" OR "Hub Initiative" OR "Hub Site Application" OR "StoryMap" OR "Web Experience" OR "Web Experience Template" OR "Form")',children:{"applications-web":{q:'type:("Web Mapping Application") NOT (typekeywords:"Web AppBuilder" OR "WABTemplateFromAGOL" OR "WABTemplateFromXT")'},"applications-dashboards":{q:'type:("Dashboard") typekeywords:("Dashboard" NOT "ArcGIS Operation View" NOT "Add In" NOT "Extension")'},"applications-sites":{q:'type:("Hub Site Application" OR "Site Application")'},"applications-pages":{q:'type:("Hub Page" OR "Site Page")'},"applications-geobim-projects":{q:'type:("GeoBIM Project")',show:r},"applications-geobim-apps":{q:'type:("GeoBIM Application")',show:r},"applications-instant-apps":{q:'typekeywords:"configurableApp"'},"applications-storymap":{q:'type:("StoryMap")'},"applications-experience":{q:'type:("Web Experience" OR "Web Experience Template")'},"applications-wab":{q:'typekeywords:"Web AppBuilder" OR "WABTemplateFromAGOL" OR "WABTemplateFromXT"'},"applications-mobile":{q:'type:"Mobile Application"'},"applications-desktop":{q:'type:"Desktop Application" -type:"Desktop Application Template"'}}},"developer-credentials":{q:'type:("Application" AND typekeywords:"Registered App") OR type:("API Key")',children:{"developer-credentials-oauth":{q:'type:("Application" AND typekeywords:"Registered App")'}}},tools:{q:'(typekeywords:"tool" OR type:"Raster function template" OR type:"Geodata Service" OR type:"Workflow Manager Package" OR type:"Rule Package" OR type:"Operations Dashboard Add In" OR type:"Workflow Manager Service" OR type:"ArcGIS Pro Configuration" OR type:"Big Data Analytic" OR type:"Real Time Analytic") -type:"KML"',children:{"tools-locators":{q:'type:("Geocoding Service" OR "Locator Package")'},"tools-geodatabase":{q:'type:"Geodata Service"'},"tools-geometric":{q:'type:"Geometry Service"'},"tools-geoprocessing":{q:'type:("Geoprocessing Service" OR "Geoprocessing Package" OR "Geoprocessing Sample")'},"tools-network":{q:'type:"Network Analysis Service"'},"tools-analytics":{q:'type:("Big Data Analytic" OR "Real Time Analytic")'}}},files:{q:'(typekeywords:"Document" OR type:"Image" OR type:"Layout" OR type:"Desktop Style" OR type:"Project Template" OR type:"Report Template" OR type:"Pro Report" OR type:"Statistical Data Collection" OR type:"360 VR Experience" OR type:"netCDF" OR type:"PDF" OR type:"CSV" OR type:"Administrative Report" OR type: "Raster function template") -type:("Image Service" OR "Explorer Document" OR "Explorer Map" OR "Globe Document" OR "Scene Document")',children:{"files-document":{q:'typekeywords:"Document" -type:"PDF"'},"files-image":{q:'type:("Image" OR "360 VR Experience") -type:"Image Service"'},"files-pdf":{q:'type:"PDF"'},"files-csv":{q:'type:"CSV"'},"files-report":{q:'type:"Administrative Report"'},"files-raster":{q:'type: "Raster function template"'}}},styles:{q:'type:("Desktop Style" OR "Style")',children:{"styles-web":{q:'type:"Style"'},"styles-desktop":{q:'type:"Desktop Style"'}}},notebooks:{q:'type:("Notebook") OR typekeywords:("Notebook" OR "Jupyter Notebook")'},insights:{q:'type:("Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Insights Theme" OR "Insights Script")',children:{"insights-workbooks":{q:'type:"Insights Workbook"'},"insights-pages":{q:'type:"Insights Page"'},"insights-models":{q:'type:"Insights Model" (-tags: "insights-theme") AND (-tags: "insights-script") AND (-tags: "insights-one-drive") AND (-tags: "insights-sharepoint")'},"insights-themes":{q:'type:"Insights Theme" OR (type:"Insights Model" AND tags:"insights-theme")'}}},"data-stores":{q:'type:("Data Store")',show:s},"knowledge-graphs":{q:'type:"Knowledge Graph"',show:s}},l={maps:"Maps","maps-webmaps":"Web maps","maps-mapfiles":"Map files",layers:"Layers","layers-weblayers":"Web layers","layers-weblayers-features":"Feature layers","layers-weblayers-features-catalog":"Catalog layers","layers-weblayers-features-oriented":"Oriented imagery layers","layers-weblayers-features-parcel":"Parcel layers","layers-weblayers-tiles":"Tile layers","layers-weblayers-mapimage":"Map image layers","layers-weblayers-imagery":"Imagery layers","layers-weblayers-scenelayers":"Scene layers","layers-weblayers-videolayers":"Video layers","layers-weblayers-tiledimagelayers":"Tiled imagery layers","layers-weblayers-grouplayers":"Group layers","layers-weblayers-medialayers":"Media layers","layers-weblayers-elevationlayers":"Elevation layers","layers-weblayers-streams":"Stream layers","layers-weblayers-feeds":"Feeds","layers-weblayers-tables":"Tables","layers-layerfiles":"Layer files",scenes:"Scenes",applications:"Apps","applications-web":"Web apps","applications-dashboards":"Dashboards","applications-sites":"Sites","applications-pages":"Pages","applications-geobim-projects":"GeoBIM projects","applications-geobim-apps":"GeoBIM applications","applications-instant-apps":"Instant Apps","applications-storymap":"Storymaps","applications-experience":"Experience Builder","applications-wab":"Web AppBuilder","applications-mobile":"Mobile apps","applications-desktop":"Desktop apps","developer-credentials":"Developer credentials","developer-credentials-oauth":"OAuth 2.0 applications",styles:"Styles","styles-desktop":"Desktop Styles","styles-web":"Web Styles",tools:"Tools","tools-locators":"Locators","tools-geodatabase":"Geodatabase access","tools-geometric":"Geometric operations","tools-geoprocessing":"Geoprocessing tasks","tools-network":"Network analysis","tools-analytics":"Analytics",files:"Files","files-document":"Documents","files-image":"Images","files-pdf":"PDFs","files-csv":"CSVs","files-report":"Administrative reports","files-raster":"Raster function templates",notebooks:"Notebooks",insights:"Insights","insights-workbooks":"Workbooks","insights-pages":"Reports","insights-models":"Models","insights-themes":"Themes","data-stores":"Data stores","knowledge-graphs":"Knowledge graphs"};function n(e,t=a){return Object.entries(t).reduce(((t,[i,s])=>t||(i===e?s:s.children?n(e,s.children):void 0)),null)}},21944:(e,t,i)=>{i.d(t,{b:()=>s,s:()=>r});const s={xxs:320,xs:480,sm:640,md:768,lg:1024,xl:1280};function r(e){var t,i;return null!==(t=(i=e.state).resizeObserver)&&void 0!==t||(i.resizeObserver=new ResizeObserver(o)),e.state.resizeObserver}function o(e){e.forEach((e=>{if(e.contentRect.width>0){const t=new CustomEvent("arcgisBrowserResize",{detail:{width:e.contentRect.width,height:e.contentRect.height}});e.target.dispatchEvent(t)}}))}},92967:(e,t,i)=>{i.d(t,{a:()=>h,f:()=>m,s:()=>p});var s=i(41171),r=i(76134),o=i(48507);function a(e,t,i){var s,r;return{description:e.description,fieldAliases:null===(s=e.fields)||void 0===s?void 0:s.map((e=>e.alias)),fields:e.fields,geometryType:i?"table":e.geometryType,id:e.id,title:e.name,type:e.type,matched:null===(r=null==t?void 0:t.find((t=>t.id===e.id)))||void 0===r?void 0:r.matched}}function l(e,t){const{config:i}=r.c,a=(0,o.a)(e),l=Object.assign(Object.assign({useProxy:!1,timeout:!1===i.isMultiTenant?6e4:5e3,addSSL:a},t?{}:{addTokenManually:!1}),{usePost:!0,disableIdentityLookup:!0});return(0,s.r)(e,{},l,"post")}function n(e){var t,i;return(null==e?void 0:e.code)||(null===(i=null===(t=null==e?void 0:e.details)||void 0===t?void 0:t.raw)||void 0===i?void 0:i.code)}function c(e){const t=n(e);return[404,500].includes(t)||"Invalid URL"===(null==e?void 0:e.message)}function d(e,t){const i=n(t);return!e&&(499===i&&"Token Required"===(null==t?void 0:t.message)||403===i)&&!!r.c.user}async function h(e,t,i,s){const r={error:{code:"unhandledError"}};try{try{return{result:await l(`${i}/${t}`,s)}}catch(o){return d(s,o)?h(e,t,i,!0):(c(o)&&(r.error.code="serviceNotExist"),r)}}catch(e){return r}}function u(e,t,i,s){var r,o;const l=null==i?void 0:i.tables,n=(null===(r=null==i?void 0:i.layers)||void 0===r?void 0:r.length)>0||l,c=[...((null==i?void 0:i.layers)||[]).map((e=>e.id)),...null===(o=(null==i?void 0:i.tables)||[])||void 0===o?void 0:o.map((e=>e.id))];return(e||[]).filter((({id:e,type:t})=>!n||"Table"===t&&!l||c.includes(e))).map((e=>a(e,t,s)))}function p(e,t){return e.map((e=>{var i;return Object.assign(Object.assign({},e),{matched:null===(i=null==t?void 0:t.find((t=>t.id===e.id)))||void 0===i?void 0:i.matched})}))}async function m({item:e,portal:t,layers:i,isSecure:r,data:o,retry:n}){var h;const p={error:{code:"unhandledError"}};try{if(!o&&!n)try{const i=(0,s.h)(t),r=i?`&token=${i}`:"",a=`${(0,s.g)(t)}content/items/${e.id}/data?f=json${r}`,l=await fetch(a),n=await l.text();if(n&&(o=JSON.parse(n)),(null==o?void 0:o.error)&&403===o.error.code&&"SB_0006"===(null===(h=o.error)||void 0===h?void 0:h.messageCode))return p.error.code="serviceNotExist",p}catch(e){o=null}if("Feature Collection"===e.type&&(null==o?void 0:o.layers))return{result:o.layers.map((({layerDefinition:e},t)=>{var i;return{description:"",fields:e.fields,fieldAliases:null===(i=e.fields)||void 0===i?void 0:i.map((e=>e.alias)),geometryType:e.geometryType,type:e.type,id:t,matched:!1,title:e.name}}))};try{const{url:t}=e;return async function({serviceInfo:e,item:t,layers:i,isSecure:s,data:r}){var o,n;const{url:c}=t;if(!(null===(o=e.layers)||void 0===o?void 0:o.length)&&!(null===(n=e.tables)||void 0===n?void 0:n.length)&&(null==e?void 0:e.fields))return{result:[a(e,i)]};try{const{layers:e,tables:t}=await l(`${c}/layers`,s);return{result:[...u(e,i,r),...u(t,i,r,!0)].sort(((e,t)=>e.id-t.id))}}catch(e){return{error:{code:"unhandledError"}}}}({serviceInfo:await l(t,r),item:e,layers:i,isSecure:r,data:o})}catch(s){return d(r,s)?m({item:e,portal:t,layers:i,data:o,isSecure:!0}):(c(s)&&(p.error.code="serviceNotExist"),p)}}catch(e){return p}}},80558:(e,t,i)=>{i.d(t,{a:()=>r,g:()=>l,o:()=>o});var s=i(18869);const r=(e,t,i)=>{t.onChange("filters",(t=>{t[e]&&t[e].value||i()}))},o=(e,t)=>{e.onChange("preview",(e=>{t()}))},a=new Map;function l(e,t){const i=a.get(e);if(i)return i;const r=(0,s.c)(e,t);return r?(a.set(e,r.store),r.store):null}},85142:(e,t,i)=>{i.d(t,{a:()=>n,b:()=>l,g:()=>a,i:()=>c});var s=i(28384),r=i(41171),o=i(72022);function a(e,t,i,s){null!=i||(i=(0,r.g)(e));const o=(0,r.h)(e),a=o&&!s?`token=${o}`:"",l=`${i}content/items/${t.id}`;return t.thumbnail?`${l}/info/${t.thumbnail}?w=400${o?"&":""}${a}`:"Image"!==t.type||s?n(t):`${l}/data?${a}`}async function l(e,t,i){return await(0,o.i)(e,i)?a(e,t,"https://www.arcgis.com/sharing/rest/",!0):a(e,t)}function n(e){var t;const i="notebook"!==(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())?"default_thumb.png":"notebook-thumb.png";return(0,s.a)(`./assets/arcgis-item-browser-card-thumbnail/${i}`)}function c(e){if(!e)return!0;const t=document.createElement("canvas"),i=t.getContext("2d");t.height=e.naturalHeight,t.width=e.naturalWidth,i.fillStyle="#ffffff",i.fillRect(0,0,e.naturalWidth,e.naturalHeight);const s=t.toDataURL("image/jpeg");return i.drawImage(e,0,0),s===t.toDataURL("image/jpeg")}},29162:(e,t,i)=>{i.d(t,{a:()=>s,e:()=>r,f:()=>o});const s={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},r={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},o={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone"}},10174:(e,t,i)=>{i.d(t,{a:()=>o,g:()=>r});const s={title:["asc","alphabetical"],owner:["asc","alphabetical"],numviews:["desc","num"],relevance:["desc"],modified:["desc","recent"],created:["desc","recent"]};function r(e,t){const[i,r]=s[e],o={asc:t[`${r}Asc`],desc:t[`${r}Desc`]};return{label:t[e],showSortOrder:!!r,defaultSortOrder:i,sortOrderLabels:o}}function o(e){const[t]=s[e];return t}}}]);