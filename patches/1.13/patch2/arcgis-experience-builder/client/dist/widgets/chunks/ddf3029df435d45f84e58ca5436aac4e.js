/*! For license information please see ddf3029df435d45f84e58ca5436aac4e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[91177],{91177:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_data_store_select_database:()=>a});var r=t(28384),n=t(58892),l=t(72074),s=t(54871),o=t(76134);t(27010),t(41171),t(66716),t(62381),t(83397),t(16665),t(83129),t(65508),t(24552),t(85142),t(72022),t(96729),t(58728),t(86739),t(31546),t(18869),t(46220),t(82463),t(48507),t(48333),t(86274);const a=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.missingHostingServer=!1,this.handlePublisherFileDropEvent=e=>{const i=e.detail,t=`${this.hostingServer.adminUrl}/admin/uploads/upload`,r=new FormData;r.append("itemFile",i),this.resetPublisherFile(),this.importingPublisherFile=!0,(0,l.h)(t,r,this.hostingServer.adminUrl||"").then((e=>{this.publisherFileName=e.result.itemName,this.publisherFileProps=e.result.connectionStringProps,this.publisherConnectionString=e.result.connectionString,this.importingPublisherFile=!1}))},this.handleServerFileDropEvent=e=>{const i=e.detail,t=`${this.hostingServer.adminUrl}/admin/uploads/upload`,r=new FormData;r.append("itemFile",i),this.resetServerFile(),this.importingServerFile=!0,(0,l.h)(t,r,this.hostingServer.adminUrl||"").then((e=>{this.serverFileName=e.result.itemName,this.serverFileProps=e.result.connectionStringProps,this.serverConnectionString=e.result.connectionString,this.importingServerFile=!1}))},this.error=null,this.allowedExtensions=["sde"],this.serverDatabaseOption=null,this.publisherFiles=void 0,this.publisherFileName=void 0,this.serverFiles=void 0,this.serverFileName=void 0,this.publisherConnectionString="",this.serverConnectionString="",this.importingPublisherFile=!1,this.importingServerFile=!1,this.hostingServer=void 0,this.publisherFileProps=void 0,this.serverFileProps=void 0}async componentWillLoad(){this.i18n=s.u.i18n.dataStoreSelectDatabase,this.hostingServer=n.a.hostingServer,this.hostingServer||(this.missingHostingServer=!0),this.publisherConnectionString=n.a.publisherConnectionString,this.publisherFileName=n.a.publisherFileName,this.publisherFileProps=n.a.publisherFileProps,this.serverDatabaseOption=n.a.serverDatabaseOption||null,this.serverConnectionString=n.a.serverConnectionString,this.serverFileName=n.a.serverFileName,this.serverFileProps=n.a.serverFileProps}validFileInputs(){const{publisherConnectionString:e,serverConnectionString:i,serverDatabaseOption:t}=this;return e?!("newConnection"===t&&!i&&(this.error="invalidServerConnectionFile",1)):(this.error="invalidPublisherConnectionFile",!1)}handleNext(){if(this.validFileInputs()){const{publisherConnectionString:e,serverConnectionString:i,serverDatabaseOption:t}=this;n.a.publisherConnectionString=e,n.a.publisherFileName=this.publisherFileName,n.a.publisherFileProps=this.publisherFileProps,n.a.serverDatabaseOption=t,"newConnection"===t?(n.a.serverConnectionString=i,n.a.serverFileName=this.serverFileName,n.a.serverFileProps=this.serverFileProps):(n.a.serverConnectionString=null,n.a.serverFileName=null,n.a.serverFileProps=null),this.newItemUpdatePage.emit("dataStoreSelectServerList")}}propIsNotPassword(e){return["ENCRYPTED_PASSWORD_UTF8","ENCRYPTED_PASSWORD"].indexOf(e.key)<=-1}resetPublisherFile(){this.publisherFiles=null,this.publisherFileProps=null,this.publisherConnectionString=null,this.publisherFileName=null}resetServerFile(){this.serverFiles=null,this.serverFileProps=null,this.serverConnectionString=null,this.serverFileName=null}renderErrorItem(){var e,i;const{i18n:t,error:n}=this;return(0,r.h)("arcgis-new-item-alert",{heading:null===(e=t.errors[n])||void 0===e?void 0:e.heading,description:null===(i=t.errors[n])||void 0===i?void 0:i.description,active:null!==n,onAlertDismiss:()=>{this.error=null}})}render(){const{i18n:e,missingHostingServer:i,allowedExtensions:t,publisherFileProps:n,serverFileProps:l,importingPublisherFile:s,importingServerFile:a,serverFileName:c,publisherFileName:h}=this,{config:d}=o.c;return(0,r.h)("div",null,(0,r.h)("arcgis-new-item-description",{header:i?e.errors.hostingServerError:e.heading}),!i&&(0,r.h)("div",null,(0,r.h)("div",{class:"input-label"},(0,r.h)("calcite-label",null,e.publisherDatabaseConnection," ",e.sdeFile,!s&&!n&&(0,r.h)("arcgis-drag-and-drop",{files:this.publisherFiles,allowedExtensions:t,insideModal:!0,fullHeight:!0,config:d,onArcgisDropSuccess:this.handlePublisherFileDropEvent},(0,r.h)("div",{class:"file-input"},(0,r.h)("input",{class:"hidden-file-input",onChange:e=>{this.publisherFiles=Object.assign({},e.target.files)},ref:e=>this.publisherInputElement=e,accept:null==t?void 0:t.map((e=>`.${e}`)).join(","),tabIndex:-1,type:"file"}),(0,r.h)("svg",{width:"42",height:"54",viewBox:"0 0 42 54",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,r.h)("path",{d:"M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z",fill:"#6A6A6A"}),")",(0,r.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z",fill:"#6A6A6A"})),(0,r.h)("div",{class:"text-container"},(0,r.h)("h3",{class:"device-select"},e.dragAndDropOrSelectFile)),(0,r.h)("button",{class:"file-browser-button",onClick:()=>{var e;return null===(e=this.publisherInputElement)||void 0===e?void 0:e.click()}},(0,r.h)("span",{class:"file-browser-button__icon"},(0,r.h)("calcite-icon",{icon:"desktop"})),(0,r.h)("span",{class:"file-browser-button__text"},e.selectFile)))),s&&(0,r.h)("div",{class:"loader-container"},(0,r.h)("calcite-loader",{inline:!0,label:"importing-publisher-file-loader"}),e.importingConnectionFile),n&&(0,r.h)("div",null,(0,r.h)("table",{class:"database-connection-table"},(0,r.h)("thead",null,(0,r.h)("tr",null,(0,r.h)("th",{colSpan:2},e.fileChosen,":"," ",(0,r.h)("span",{class:"server-file-name"},h)))),(0,r.h)("tbody",null,n.map((e=>this.propIsNotPassword(e)&&(0,r.h)("tr",null,(0,r.h)("td",null,e.key),(0,r.h)("td",{class:"value-cell"},e.value)))))),(0,r.h)("div",{class:"change-file"},(0,r.h)("span",{class:"change-file-btn",onClick:()=>{this.resetPublisherFile()}},e.chooseDifferentFile))))),(0,r.h)("div",{class:"input-label"},(0,r.h)("calcite-label",null,e.serverDatabaseConnection," ",e.sdeFile)),(0,r.h)("calcite-tile-select-group",{layout:"vertical",key:"server-database-connection-select",class:"server-database-connection-select"},(0,r.h)("calcite-tile-select",{class:"tile-select",key:"publisher-database-connection-select",checked:null===this.serverDatabaseOption,description:e.sameAsPublisher,name:"same-as-publisher-database-connection","input-enabled":!0,width:"full",type:"radio",value:null,onCalciteTileSelectChange:()=>{this.serverDatabaseOption=null}}),(0,r.h)("calcite-tile-select",{class:"tile-select",key:"new-server-database-connection-select",checked:"newConnection"===this.serverDatabaseOption,description:e.newConnection,name:"new-server-database-connection","input-enabled":!0,width:"full",type:"radio",value:"newConnection",onCalciteTileSelectChange:()=>{this.serverDatabaseOption="newConnection"}})),"newConnection"===this.serverDatabaseOption&&(0,r.h)("calcite-label",null,!a&&!l&&(0,r.h)("arcgis-drag-and-drop",{files:this.serverFiles,allowedExtensions:t,insideModal:!0,fullHeight:!0,config:d,onArcgisDropSuccess:this.handleServerFileDropEvent},(0,r.h)("div",{class:"file-input"},(0,r.h)("input",{class:"hidden-file-input",onChange:e=>{this.serverFiles=Object.assign({},e.target.files)},ref:e=>this.serverInputElement=e,accept:null==t?void 0:t.map((e=>`.${e}`)).join(","),tabIndex:-1,type:"file"}),(0,r.h)("svg",{width:"42",height:"54",viewBox:"0 0 42 54",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,r.h)("path",{d:"M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z",fill:"#6A6A6A"}),")",(0,r.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z",fill:"#6A6A6A"})),(0,r.h)("div",{class:"text-container"},(0,r.h)("h3",{class:"device-select"},e.dragAndDropOrSelectFile)),(0,r.h)("button",{class:"file-browser-button",onClick:()=>{var e;return null===(e=this.serverInputElement)||void 0===e?void 0:e.click()}},(0,r.h)("span",{class:"file-browser-button__icon"},(0,r.h)("calcite-icon",{icon:"desktop"})),(0,r.h)("span",{class:"file-browser-button__text"},e.selectFile)))),a&&(0,r.h)("div",{class:"loader-container"},(0,r.h)("calcite-loader",{inline:!0,label:"importing-publisher-file-loader"}),e.importingConnectionFile),l&&(0,r.h)("div",null,(0,r.h)("table",{class:"database-connection-table"},(0,r.h)("thead",null,(0,r.h)("tr",null,(0,r.h)("th",{colSpan:2},e.fileChosen,":"," ",(0,r.h)("span",{class:"server-file-name"},c)))),(0,r.h)("tbody",null,l.map((e=>this.propIsNotPassword(e)&&(0,r.h)("tr",null,(0,r.h)("td",null,e.key),(0,r.h)("td",{class:"value-cell"},e.value)))))),(0,r.h)("div",{class:"change-file"},(0,r.h)("span",{class:"change-file-btn",onClick:()=>{this.resetServerFile()}},e.chooseDifferentFile)))),this.renderErrorItem()))}};a.style=".input-label{margin-top:1.25rem}.hidden-file-input{display:none}.device-select{font-weight:500;font-size:1rem;color:var(--calcite-ui-text-1);margin-top:0.5rem;margin-bottom:0.5rem}.server-database-connection-select{padding-bottom:0.5rem}.tile-select{margin-bottom:0.125rem}.server-file-name{font-weight:700}.file-input{padding-top:2rem;padding-bottom:2rem;text-align:center;margin-bottom:2rem;width:100%;background-color:var(--calcite-ui-background);border-style:dashed;border-width:2px;border-color:var(--calcite-ui-border-1);box-sizing:border-box}.file-browser-button{font-size:0.875rem;padding:0;margin-top:0;margin-bottom:0;margin-left:0.75rem;margin-right:0.75rem;width:auto;color:var(--calcite-ui-text-1);border-radius:0;box-sizing:border-box;cursor:pointer;display:inline-flex;align-items:center;border:1px solid var(--calcite-ui-border-1);background-color:white;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.file-browser-button:hover{border-color:var(--calcite-ui-brand)}.file-browser-button:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.file-browser-button__icon{background-color:#f8f8f8;color:var(--calcite-ui-text-link);display:flex;align-items:center;justify-content:center;padding:0.25rem;width:2rem;height:2rem;box-sizing:border-box}.file-browser-button__icon svg{width:100%}.file-browser-button__text{padding:0.5rem}.change-file{padding-top:0.5rem}.change-file-btn{cursor:pointer;color:#0079c1}.database-connection-table{width:100%;border-collapse:collapse;text-align:left}.database-connection-table tr{border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-1)}.database-connection-table td{padding:0.5rem;font-weight:300;font-size:0.875rem;border-left:1px solid #ccc;border-right:1px solid #ccc}.database-connection-table th{padding:0.5rem;font-weight:300;font-size:1rem;background-color:#efefef}tbody tr:nth-child(even){background-color:var(--calcite-ui-background)}.text-container{margin-top:2rem;margin-bottom:2rem}.loader-container{display:flex}"}}]);