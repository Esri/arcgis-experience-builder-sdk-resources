/*! For license information please see 6281107742d6a4d640c1933852f270ee.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[49531],{49531:(e,t,r)=>{r.r(t),r.d(t,{arcgis_layers_and_tables_summary:()=>c});var i=r(28384),n=r(76134),a=r(62727),o=r(48711),l=r(29162),s=r(72466);r(27010),r(18869),r(81068),r(66716);const c=class{constructor(e){(0,i.r)(this,e),this.layersAndTablesFocusEnd=(0,i.c)(this,"layersAndTablesFocusEnd",7),this.expanded={},this.handleTabChage=({detail:e})=>{var t;this.activeTab=e.tab,null===(t=this.telemetry)||void 0===t||t.logEvent({category:"preview popup",action:"switch tab",label:e.tab?"matched":"all",pageName:(0,o.g)(),pageUrl:window.location.href})},this.renderLayer=(e,t)=>{const{i18n:r,telemetry:n}=this,{icon:a,type:l}=(0,s.g)({geometry:e.geometryType,type:e.type});return(0,i.h)("calcite-accordion-item",{heading:e.title,description:r.layerTypes[l],iconStart:a,class:"layer",onClick:r=>{r.currentTarget.expanded&&!this.expanded[e.id]&&(null==n||n.logEvent({category:"preview popup",action:"expand layer",label:t?"matched":"all",pageName:(0,o.g)(),pageUrl:window.location.href}),this.expanded[e.id]=!0)}},this.renderAliases(e,t))},this.user=void 0,this.item=void 0,this.portal=void 0,this.layers=[],this.showMatched=void 0,this.error=void 0,this.loading=void 0,this.telemetry=void 0,this.currentStart=1,this.activeTab=1}async componentWillLoad(){const e=await(0,a.g)(this.el);this.i18n=e[0]}closeAccordion(){this.el.shadowRoot.querySelectorAll(".layer").forEach((e=>{e.expanded=!1}))}checkAlias(e){return![/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i].find((t=>t.test(e)))}renderAliases(e,t){var r;const{config:a,user:s}=n.c,c=a.newMapViewerUrl,d=`${a.baseUrl}webmap/viewer.html`,u=`${a.baseUrl}webscene/viewer.html`,p="classic"===(null==s?void 0:s.defaultMapViewer),{i18n:h,loading:g,checkAlias:m,telemetry:y}=this,{id:f}=this.item,v=null===(r=e.fields)||void 0===r?void 0:r.filter((e=>m(e.alias||e.name)));return g?(0,i.h)("calcite-loader",{scale:"s",label:h.loading}):(0,i.h)("div",{class:"field-aliases"},(0,i.h)("div",{class:"field-aliases-header"},(0,i.h)("h5",{class:"field-aliases-title"},h.fields),"Feature Service"===this.item.type&&(0,i.h)("calcite-dropdown",{placement:"bottom-end",width:"m",type:"click",class:"field-aliases-dropdown",onCalciteDropdownOpen:()=>{null==y||y.logEvent({category:"preview popup",action:"open actions",label:t?"matched":"all",pageName:(0,o.g)(),pageUrl:window.location.href})}},(0,i.h)("calcite-action",{slot:"trigger",scale:"s",label:"layer actions",appearance:"transparent",icon:"ellipsis",text:""}),(0,i.h)("calcite-dropdown-group",{selectionMode:"single"},(0,i.h)("calcite-dropdown-item",{href:`${a.baseUrl}item.html?id=${f}&sublayer=${e.id}`,target:"_blank"},h.viewDetails),(0,i.h)("calcite-dropdown-item",{href:`${c}?layers=${f}&layerId=${e.id}`,target:"_blank"},h.openInMapViewer),p&&(0,i.h)(i.F,null,(0,i.h)("calcite-dropdown-item",{href:`${d}?useExisting=1&layers=${f}&layerId=${e.id}`,target:"_blank"},h.openInMapViewerClassic),(0,i.h)("calcite-dropdown-item",{href:`${d}?layers=${f}&layerId=${e.id}`,target:"_blank"},h.addToNewMap)),(0,i.h)("calcite-dropdown-item",{href:`${u}?layers=${f}&layerId=${e.id}`,target:"_blank"},h.addToSceneViewer)))),(null==v?void 0:v.length)>0?(0,i.h)("ul",{class:"field-aliases-list"},v.map((e=>(0,i.h)("li",{class:"field-alias"},(0,i.h)("calcite-icon",{icon:l.f[e.type]||"string",scale:"s",class:"icon"}),e.alias||e.name)))):(0,i.h)("p",{class:"field-alias"},h.noAliasFound))}renderPageNumberText(){const e=this.currentStart,t=this.layers.length,r=Math.min(e+5,t);return(0,i.h)("span",{class:"page-number"},this.i18n.paginationRange.replace("${start}",`${e}`).replace("${end}",`${r}`).replace("${total}",`${t}`))}render(){var e;const{i18n:t,renderLayer:r,error:n,handleTabChage:a,item:l,activeTab:s}=this,c=this.layers||[],d=(this.layers||[]).filter((e=>e.matched)),u=c.slice(this.currentStart-1,this.currentStart+5),p=this.showMatched&&(null==d?void 0:d.length)>0,h=(null===(e=s&&p?d:c)||void 0===e?void 0:e.length)>6;return n?(0,i.h)(i.H,null,(0,i.h)("div",{class:"layers"},(0,i.h)("calcite-notice",{icon:!0,open:!0,scale:"s",width:"full",kind:"warning",class:"notice"},(0,i.h)("div",{slot:"title"},n.title),(0,i.h)("div",{slot:"message"},n.message)))):(0,i.h)(i.H,null,(0,i.h)("div",{class:"bg"},!c||0===c.length&&(0,i.h)("p",{class:"no-layers"},this.i18n.noLayers),p?(0,i.h)("calcite-tabs",{layout:"center"},(0,i.h)("calcite-tab-nav",{slot:"title-group",onCalciteTabChange:a},(0,i.h)("calcite-tab-title",{selected:0===s},t.all.replace("${number}",`${c.length}`)),(0,i.h)("calcite-tab-title",{selected:1===s},t.matched.replace("${number}",`${d.length}`))),(0,i.h)("calcite-tab",{class:"layers",selected:0===s},(0,i.h)("calcite-accordion",{selectionMode:"single",scale:"m",iconPosition:"end",iconType:"chevron"},u.map((e=>r(e))))),(0,i.h)("calcite-tab",{class:"layers",selected:1===s},(0,i.h)("calcite-accordion",{selectionMode:"single",scale:"m",iconPosition:"end",iconType:"chevron"},d.map((e=>r(e,!0)))))):(0,i.h)("div",{class:"layers"},(0,i.h)("calcite-accordion",{selectionMode:"single",scale:"m",iconPosition:"end",iconType:"chevron"},u.map((e=>r(e))))),(0,i.h)("div",{class:"post"},h&&this.renderPageNumberText(),(0,i.h)("calcite-link",{href:`item.html?id=${l.id}`,class:"details-link",target:"_blank",rel:"noopener noreferrer",onClick:()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"view item details",pageName:(0,o.g)(),pageUrl:window.location.href})}},t.viewItemDetails)),h&&(0,i.h)("div",{class:"pagination"},(0,i.h)("calcite-pagination",{scale:"m",totalItems:c.length,pageSize:6,startItem:this.currentStart,onCalcitePaginationChange:e=>{this.currentStart=e.target.startItem,this.closeAccordion()}}))))}get el(){return(0,i.d)(this)}};c.style=":host{max-width:100%;width:380px}.bg{background-color:var(--calcite-ui-background)}.layers{background-color:var(--calcite-ui-background);padding-top:0.75rem;padding-bottom:0.75rem;padding-left:0.5rem;padding-right:0.5rem;white-space:normal}.field-aliases{padding-top:0.5rem;padding-bottom:0.5rem;-webkit-padding-start:1.75rem;padding-inline-start:1.75rem}.field-aliases-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:-8px}.field-aliases-title{font-weight:400;font-size:0.75rem;color:var(--calcite-ui-text-2);text-decoration:underline;margin:0;padding-left:0;padding-right:0;padding-top:0.5rem;padding-bottom:0.5rem;flex:1 1 0%}.field-aliases-list{list-style-type:none;margin:0;padding:0;overflow:auto;max-height:200px}.field-alias{font-weight:400;font-size:0.75rem;color:var(--calcite-ui-text-2);padding-top:0.5rem;padding-left:0;padding-right:0;margin:0;display:flex}.icon{-webkit-padding-end:0.5rem;padding-inline-end:0.5rem}.post{display:flex;padding-bottom:0.75rem;padding-left:0.5rem;padding-right:0.5rem;justify-content:flex-end;font-size:0.875rem}.page-number{display:inline-block;flex:1 1 0%;color:var(--calcite-ui-text-2)}.pagination{background-color:var(--calcite-ui-foreground-1);display:flex;align-items:center;justify-content:center;padding-top:0.75rem;padding-bottom:1rem;border-top:1px solid var(--calcite-ui-border-1)}.notice{padding-top:1rem;padding-bottom:1rem}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.no-layers{padding:0.75rem 1rem 0 1rem;color:var(--calcite-ui-text-2)}"},76134:(e,t,r)=>{r.d(t,{c:()=>n,o:()=>a});const i=(0,r(27010).c)({portal:null,user:null,api:4,scale:"m"}),n=i.state,a=i.onChange},27010:(e,t,r)=>{r.d(t,{c:()=>l});var i=r(28384);const n=e=>!("isConnected"in e)||e.isConnected,a=((e,t)=>{let r;return(...e)=>{r&&clearTimeout(r),r=setTimeout((()=>{r=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(n))})(...e)}),2e3)}})(),o=e=>"function"==typeof e?e():e,l=(e,t)=>{const r=((e,t=((e,t)=>e!==t))=>{const r=o(e);let i=new Map(Object.entries(null!=r?r:{}));const n={dispose:[],get:[],set:[],reset:[]},a=()=>{var t;i=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),n.reset.forEach((e=>e()))},l=e=>(n.get.forEach((t=>t(e))),i.get(e)),s=(e,r)=>{const a=i.get(e);t(r,a,e)&&(i.set(e,r),n.set.forEach((t=>t(e,r,a))))},c="undefined"==typeof Proxy?{}:new Proxy(r,{get:(e,t)=>l(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,r)=>(s(t,r),!0)}),d=(e,t)=>(n[e].push(t),()=>{((e,t)=>{const r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.length--)})(n[e],t)});return{state:c,get:l,set:s,on:d,onChange:(t,r)=>{const i=d("set",((e,i)=>{e===t&&r(i)})),n=d("reset",(()=>r(o(e)[t])));return()=>{i(),n()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(d("set",t.set)),t.get&&e.push(d("get",t.get)),t.reset&&e.push(d("reset",t.reset)),t.dispose&&e.push(d("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{n.dispose.forEach((e=>e())),a()},reset:a,forceUpdate:e=>{const t=i.get(e);n.set.forEach((r=>r(e,t,t)))}}})(e,t);return r.use((()=>{if("function"!=typeof i.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const r=(0,i.g)();r&&((e,t,r)=>{const i=e.get(t);i?i.includes(r)||i.push(r):e.set(t,[r])})(e,t,r)},set:t=>{const r=e.get(t);r&&e.set(t,r.filter(i.f)),a(e)},reset:()=>{e.forEach((e=>e.forEach(i.f))),a(e)}}})()),r}},81068:(e,t,r)=>{r.d(t,{C:()=>l,a:()=>d,f:()=>s,g:()=>o,l:()=>a});var i=r(66716),n=r(18869);const a=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,r){const i=(0,n.c)(e,"[dir]");return i?i.getAttribute("dir"):"ltr"}(e)}const l={rtl:"arcgis--rtl"};async function s(e,t){const{api:r,type:n,places:a}=t||{};if(4===r){const[t]=await(0,i.l)(["esri/intl"]),r=t.convertNumberFormatToIntlOptions({places:a,style:n,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},r),{style:n}))}const[o]=await(0,i.l)(["dojo/number"]);return o.format(e,{type:n,places:a,pattern:null==t?void 0:t.pattern})}const c={};function d(e){const t=document.documentElement.lang;return c[t]||(c[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[t].format(e)}},66716:(e,t,r)=>{r.d(t,{a:()=>i,c:()=>a,e:()=>o,g:()=>n,l:()=>l});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}var o=a((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",i="next";function n(e){if(e.toLowerCase()===i)return i;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function a(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function o(e){return!e||n(e)?function(e){void 0===e&&(e=r);var t=a(e),o=n(e);if(o!==i&&3===o.major){var l=o.minor<=10?"js/":"";return"".concat(t).concat(l,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function l(e,t){var r=o(e),i=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(r);return i||function(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}(i=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(r),t),i}var s={};function c(e,t,r){var i;r&&(i=function(e,t){var r=function(i){t(i.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",n,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var r={};[s,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var i=r.version,n=r.url||a(i);return new t.Promise((function(e,t){var a=d();if(a){var o=a.getAttribute("src");o!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):u()?e(a):c(a,e,t)}else if(u())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=r.css;s&&l(!0===s?i:s,r.insertCssBefore),c(a=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(n),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),t),document.body.appendChild(a)}}))}function h(e){return new t.Promise((function(t,r){var i=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];i.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),u())return h(e);var r=d(),i=r&&r.getAttribute("src");return!t.url&&i&&(t.url=i),p(t).then((function(){return h(e)}))},e.getScript=d,e.isLoaded=u,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),s=e},e.loadCss=l,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const l=async(e,t)=>(await o.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},62727:(e,t,r)=>{r.d(t,{a:()=>o,g:()=>c});var i=r(18869),n=r(81068),a=r(28384);function o(e){var t,r,a;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(l)?n.l.get(l):n.l.has(l.slice(0,2))?n.l.get(l.slice(0,2)):"en"}const l={};function s(e,t){const r=`${e}${t}`;return l[r]||(l[r]=function(e,t){return new Promise(((r,i)=>{fetch((0,a.a)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?r(e.json()):i()}),(()=>i()))}))}(e,t)),l[r]}async function c(e,t){const r=t||e.tagName.toLowerCase(),a=o(e),l=function(e){var t,r,a;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(l)?n.l.get(l):n.l.has(l.slice(0,2))?l:"en"}(e);let c;try{c=await s(r,a)}catch(e){console.warn(`no locale for ${r} (${a}) loading default locale en.`),c=await s(r,"en")}return[c,a,l]}},48711:(e,t,r)=>{function i(){const{hash:e,pathname:t}=window.location;if(t.includes("group.html"))return"group page";if(t.includes("search.html"))return"search result page";switch(e){case"#favorites":return"favorites";case"#groups":return"my groups content";case"#organization":return"my org content";case"#livingAtlas":return"living atlas";default:return"my content"}}r.d(t,{g:()=>i})},29162:(e,t,r)=>{r.d(t,{a:()=>i,e:()=>n,f:()=>a});const i={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},n={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},a={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone"}},72466:(e,t,r)=>{function i({geometry:e,type:t}){switch(t){case"Catalog Layer":return{icon:"catalog-dataset",type:"catalog",isGeometry:!1};case"Parcel Layer":return{icon:"parcel-layer",type:"parcel",isGeometry:!1};case"Oriented Imagery Layer":return{icon:"oriented-imagery-layer",type:"oriented imagery",isGeometry:!1};case"Table":return{icon:"table",type:"table",isGeometry:!0}}switch(e){case"point":case"esriGeometryPoint":return{type:"point",icon:"point",isGeometry:!0};case"esriGeometryMultipoint":case"multipoint":return{type:"multipoint",icon:"layer-points",isGeometry:!0};case"line":case"polyline":case"esriGeometryPolyline":return{type:"line",icon:"line",isGeometry:!0};case"polygon":case"esriGeometryPolygon":return{type:"polygon",icon:"polygon",isGeometry:!0};case"multipatch":case"esriGeometryMultiPatch":return{type:"multipatch",icon:"cube",isGeometry:!0};default:return{type:"table",icon:"table",isGeometry:!0}}}r.d(t,{g:()=>i})}}]);