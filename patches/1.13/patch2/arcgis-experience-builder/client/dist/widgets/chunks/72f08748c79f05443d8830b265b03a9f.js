/*! For license information please see 72f08748c79f05443d8830b265b03a9f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[49853],{58892:(e,t,n)=>{n.d(t,{a:()=>r,b:()=>l,c:()=>o,d:()=>i});const i=(0,n(27010).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),r=i.state,o=i.state,l=i.state},49853:(e,t,n)=>{n.r(t),n.d(t,{arcgis_notebook_runtime_select:()=>p});var i=n(28384),r=n(62727),o=n(58892),l=n(76134),s=n(66716),a=n(41171),u=n(59004);function c(e){return{10.7:"1.0","10.7.0":"1.0","10.7.1":"2.0",10.8:"3.0","10.8.0":"3.0","10.8.1":"4.0"}[e]||e}function d(){const{user:e}=l.c;return function(){var e;const{config:t,portal:n}=l.c;if(n.isPortal)return!(!t.notebookServerEnabled||!n.supportsHostedNotebooks);{const i=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf(null===(e=n.subscriptionInfo)||void 0===e?void 0:e.type);return t.notebookServerEnabled&&(!i||-1!==((null==n?void 0:n.allowedBetaFeatures)||[]).indexOf("notebooks"))}}()&&(0,u.r)(e)}async function v(e,t,n,i){const[r]=await(0,s.l)(["dojo/request"]),{config:o}=l.c;i=i||{};let a={};const u={"X-Requested-With":null},c=o.userInfo?o.userInfo.token:null;return i.useJsonFormatParam&&(a.f="json"),"GET"===t&&(a=Object.assign(Object.assign({},a),n)),i.bypassCustomHeaders||(u["X-Esri-Authorization"]="Bearer "+c,i.useJsonBody&&(u["Content-Type"]="application/json")),i.contentType&&(u["Content-Type"]=i.contentType),r(e,{data:i.useJsonBody?n?JSON.stringify(n):null:n,method:t,handleAs:"json",headers:Object.keys(u).length?u:null,query:Object.keys(a).length?a:null,preventCache:!1!==i.preventCache,withCredentials:!i.bypassCustomHeaders})}n(18869),n(81068),n(27010),n(62381);const p=class{constructor(e){(0,i.r)(this,e),this.handleRuntimeChange=e=>{const t=e.currentTarget.selectedOption.value,n=parseInt(t,10)||0;this.selectedRuntimeIndex=n,this.updateProperties(this.runtimes[n])},this.i18n=void 0,this.runtimes=void 0,this.loading=!0,this.error=!1,this.selectedRuntimeIndex=0}async componentWillLoad(){const e=await(0,r.g)(this.el);this.i18n=e[0]}async componentDidLoad(){try{if(!d())return;const e=await async function(){var e;const{url:t}=await async function(){const{config:e,portal:t}=l.c;return new Promise((async(n,i)=>{var r,o;if(t.isPortal)e.userInfo?t.getFederatedServers().then((e=>{var t;if(null===(t=null==e?void 0:e.servers)||void 0===t?void 0:t.length){const t=e.servers.filter((({serverType:e,serverFunction:t})=>"ARCGIS_NOTEBOOK_SERVER"===e&&"NotebookServer"===t));if(t.length){const e=t[0];return e.adminContext="/admin",n(e)}}}),(e=>{i(e)})):i();else{const t=await(0,a.r)(`${e.restBaseUrl}/portals/self/urls`),i=null===(o=null===(r=null==t?void 0:t.urls)||void 0===r?void 0:r.notebooks)||void 0===o?void 0:o.https;if(i)return n({url:`https://${i}`,adminContext:""})}}))}(),n=await async function(e){return(await v(`${e}/rest/info`,"GET",null,{useJsonFormatParam:!0,useCredentials:!0})).currentRuntimeVersion}(t),i=await function(e){return v(`${e}/admin/notebooks/runtimes`,"GET",null,{useJsonFormatParam:!0,useCredentials:!0})}(t);return(null===(e=null==i?void 0:i.runtimes)||void 0===e?void 0:e.length)?function(e=[],t){const{user:n}=l.c,i=(0,u.s)(n);return e.sort(((e,t)=>e.esriProvidedRuntime===t.esriProvidedRuntime?0:e.esriProvidedRuntime?-1:1)).filter((e=>!(!i&&e.requiresAdvancedPrivileges||c(t)!==c(e.version)&&e.esriProvidedRuntime)))}(i.runtimes,n):null}();if(this.runtimes=e,!e||!e.length)throw new Error;this.updateProperties(e[0])}catch(e){this.error=!0}this.loading=!1}updateProperties(e){o.a.properties={notebookRuntimeName:e.name,notebookRuntimeVersion:c(e.version)}}render(){const{i18n:e,selectedRuntimeIndex:t}=this;return d()?(0,i.h)("calcite-label",null,(0,i.h)("span",{class:"label"},e.selectRuntime),(0,i.h)("calcite-notice",{icon:!0,open:this.error,scale:"s",kind:"danger"},(0,i.h)("div",{slot:"title"},e.error.title),(0,i.h)("div",{slot:"message"},e.error.runtimes)),this.loading?(0,i.h)("span",null,(0,i.h)("calcite-loader",{class:"loader",inline:!0,label:e.loadingRuntimes})," ",e.loadingRuntimes):!this.error&&(0,i.h)("calcite-select",{label:e.selectRuntime,onCalciteSelectChange:this.handleRuntimeChange},this.runtimes.map(((e,n)=>(0,i.h)("calcite-option",{value:n,selected:t===n},e.name," - ",e.version))))):null}get el(){return(0,i.d)(this)}};p.style=":host{--arcgis-label-font-weight:400}.label{margin-top:0;margin-bottom:0;font-weight:var(--arcgis-label-font-weight)}.label--bold{--arcgis-label-font-weight:500}.loader{color:var(--calcite-ui-brand)}.leader-text{font-size:0.875rem;color:var(--calcite-ui-text-1)}"},76134:(e,t,n)=>{n.d(t,{c:()=>r,o:()=>o});const i=(0,n(27010).c)({portal:null,user:null,api:4,scale:"m"}),r=i.state,o=i.onChange},81068:(e,t,n)=>{n.d(t,{C:()=>s,a:()=>c,f:()=>a,g:()=>l,l:()=>o});var i=n(66716),r=n(18869);const o=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function l(e){return function(e,t,n){const i=(0,r.c)(e,"[dir]");return i?i.getAttribute("dir"):"ltr"}(e)}const s={rtl:"arcgis--rtl"};async function a(e,t){const{api:n,type:r,places:o}=t||{};if(4===n){const[t]=await(0,i.l)(["esri/intl"]),n=t.convertNumberFormatToIntlOptions({places:o,style:r,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},n),{style:r}))}const[l]=await(0,i.l)(["dojo/number"]);return l.format(e,{type:r,places:o,pattern:null==t?void 0:t.pattern})}const u={};function c(e){const t=document.documentElement.lang;return u[t]||(u[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),u[t].format(e)}},62727:(e,t,n)=>{n.d(t,{a:()=>l,g:()=>u});var i=n(18869),r=n(81068),o=n(28384);function l(e){var t,n,o;const l=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,s=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return r.l.has(s)?r.l.get(s):r.l.has(s.slice(0,2))?r.l.get(s.slice(0,2)):"en"}const s={};function a(e,t){const n=`${e}${t}`;return s[n]||(s[n]=function(e,t){return new Promise(((n,i)=>{fetch((0,o.a)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?n(e.json()):i()}),(()=>i()))}))}(e,t)),s[n]}async function u(e,t){const n=t||e.tagName.toLowerCase(),o=l(e),s=function(e){var t,n,o;const l=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,s=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return r.l.has(s)?r.l.get(s):r.l.has(s.slice(0,2))?s:"en"}(e);let u;try{u=await a(n,o)}catch(e){console.warn(`no locale for ${n} (${o}) loading default locale en.`),u=await a(n,"en")}return[u,o,s]}},41171:(e,t,n)=>{n.d(t,{a:()=>O,b:()=>I,c:()=>b,d:()=>k,e:()=>u,f:()=>m,g:()=>w,h:()=>s,i:()=>j,j:()=>g,k:()=>y,l:()=>S,p:()=>v,q:()=>C,r:()=>c});var i=n(66716),r=n(76134),o=n(62381),l=n(26426);function s(e){var t,n,i,o;return null!=e||(e=null===r.c||void 0===r.c?void 0:r.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(i=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===i?void 0:i.token)||(null===(o=null==e?void 0:e.portalUser)||void 0===o?void 0:o.token)||""}function a(e){var t;const{config:n}=r.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function u(e,t,n={},o){const[l]=await(0,i.l)(["esri/request"]),{api:u}=r.c;e.includes("f=")||t.append("f","json");const c=s();return c&&!t.has("token")&&t.append("token",c),new Promise(((i,r)=>{if(3===u){const s={url:!1===n.addSSL?e:a(e),form:t,timeout:n.timeout||0},u="post"===o?Object.assign({usePost:!0},n):n;l(s,u).then(i,r)}else l(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:o||"auto"})).then((e=>{i(e.data)})).catch((e=>r(e)))}))}async function c(e,t={},n={},o,l){const[s]=await(0,i.l)(["esri/request"]),{api:u,portal:c}=r.c,d=Object.assign({},t);if(e.includes("f=")||!0===(null==l?void 0:l.excludeJson)||(d.f="json"),!1!==n.addTokenManually){const e=await k(c,u);d.token=e}const v=!1===n.addSSL?e:a(e);if(3===u)return s(Object.assign({url:v,content:d,timeout:n.timeout||0,withCredentials:n.withCredentials},null==l?void 0:l.v3Request),"post"===o?Object.assign({usePost:!0},n):n);{const e=Object.assign(Object.assign(Object.assign({query:d,method:o||"auto"},n),{timeout:n.timeout||0}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await s(v,e)).data}}const d=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120],v=async(e,t,n)=>{var i,r;const o=null!==(i=null==t?void 0:t.pendingStatuses)&&void 0!==i?i:["processing","partial","Pending","InProgress","EXECUTING"],s=null!==(r=null==t?void 0:t.successStatuses)&&void 0!==r?r:["completed","Completed","COMPLETED"];let a=0;const u=async()=>{const i=await c(e,null==t?void 0:t.requestParams,{},n),r=i.status||i.jobStatus;if(o.includes(r))return await(0,l.t)((v=a++,1e3*d[v>-1&&v<d.length-1?v:d.length-1])),u();if(s.includes(r))return i;throw i;var v};try{return u()}catch(e){throw console.error(e),e}},p={},f={},h={};async function m(e,t,n,i){var r,o,l,s;const a=null===(o=null===(r=h[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.expireAt,u=!!a&&(new Date).getTime()>a;if((null===(l=p[t])||void 0===l?void 0:l[n])&&!u)return p[t][n];f[t]||(f[t]={}),f[t][n]&&!u||(f[t][n]=e());const c=await f[t][n];if(p[t]||(p[t]={}),h[t]||(h[t]={}),p[t][n]=c,i){const{expireAfter:e,getExpireAfterFromResult:r}=i,o=r||e?(new Date).getTime()+(null!==(s=null==r?void 0:r(c))&&void 0!==s?s:e):null;h[t][n]=Object.assign(Object.assign({},h[t][n]),{expireAt:o})}return c}function g(e,t){var n;return null===(n=null==p?void 0:p[e])||void 0===n?void 0:n[t]}const b=(e,t)=>{var n,i;t?(null===(n=p[e])||void 0===n||delete n[t],null===(i=f[e])||void 0===i||delete i[t]):(delete p[e],delete f[e])};function w(e){var t;const{portal:n,config:i}=r.c||{};return null!==(t=(0,o.d)(null==i?void 0:i.restBaseUrl))&&void 0!==t?t:y(e||n)}function y(e){var t;return(0,o.d)(null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl)}const k=async(e,t)=>{var n,i;if(!(null==e?void 0:e.isPortal)||!e.isWebTierAuth)return s(e);const{token:o}=await m((()=>P(e,null!=t?t:null===r.c||void 0===r.c?void 0:r.c.api)),"platformSelf",null!==(i=null===(n=e.user)||void 0===n?void 0:n.id)&&void 0!==i?i:e.id,{getExpireAfterFromResult:e=>e.expires_in});return o},P=async(e,t)=>{const n=await(async(e,t)=>{var n,r,o,l;const s=3===t,[a]=await i.e.loadModules([s?"esri/IdentityManager":"esri/identity/IdentityManager"]),u=await m((()=>a.getCredential(w(e),{oAuthPopupConfirmation:!1})),"credential",null===(n=e.user)||void 0===n?void 0:n.id);return null!==(l=s?null===(r=u._oAuthCred)||void 0===r?void 0:r.appId:null===(o=u.oAuthState)||void 0===o?void 0:o.appId)&&void 0!==l?l:"arcgisonline"})(e,t),r={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return c(`${w(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?r:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:r}})};async function C(e={},t){return c(`${w(t)}/community/groups`,e)}const S=async(e,t)=>{var n;if(!e)return[];const i=`${(0,o.d)(null!==(n=t.restUrl)&&void 0!==n?n:t.portalUrl)}portals/self/servers`,r=await c(i);return null==r?void 0:r.servers},O=e=>I(y(e)),I=e=>{var t;const n=`${(0,o.d)(null!==(t=(0,o.l)(e))&&void 0!==t?t:e)}info`;return m((()=>c(n,{},{addTokenManually:!1})),"portalInfo",n)},j=async(e,t)=>{if(e.isBackedBySDS)return{result:!0};const n=(0,o.e)(t)||(0,o.f)(t)||(0,o.g)(t)||(0,o.h)(t)||(0,o.j)(t);if(e.isPortal&&t&&(n||(0,o.k)(t)))try{const n=await T(t,e);return{result:!!(null==n?void 0:n[0])}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}return{result:!0}},T=async(e,t)=>{const n=await R(e,t);if(!n)return null;const i=`${n.adminUrl}/admin/data/findItems`;return(await c(i,{managed:!0})).items.filter((e=>{var t;return"arcgis data store"===(null===(t=e.provider)||void 0===t?void 0:t.toLowerCase())}))},R=async(e,t)=>{var n;return(null!==(n=await S(e,t))&&void 0!==n?n:[]).filter((e=>e.isHosted))[0]}},59004:(e,t,n)=>{n.d(t,{a:()=>O,b:()=>c,c:()=>S,d:()=>f,e:()=>h,f:()=>g,g:()=>d,h:()=>p,i:()=>b,j:()=>w,k:()=>P,l:()=>a,m:()=>C,n:()=>u,o:()=>I,p:()=>j,q:()=>l,r:()=>k,s:()=>y,t:()=>T,u:()=>R});var i=n(62381),r=n(76134),o=n(41171);async function l(){return new Promise((async e=>{const{portal:t}=r.c;if(null==t?void 0:t.isPortal){const n=t.helperServices.geocode,i=await function(e){const{config:t,portal:n}=r.c;return new Promise((async(i,r)=>{const l=e.filter((e=>s(e.url,n))).filter((e=>e.isEsriBatchGeocoder))[0];if(l){const e=l.url.split("/servers/")[1].split("/rest/services/")[0],n=`${t.restBaseUrl}/content/items/${e}`;try{i((await(0,o.r)(n)).url)}catch(e){r(e)}}else r("No world geocoder configured")}))}(n);e(i)}else{const n=function(e){const t=null==e?void 0:e.portalHostname;return-1!==t.indexOf("dev")?"dev":-1!==t.indexOf("qa")?"qa":""}(t);e(`https://geocode${n}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function s(e="",t){var n;const i=t.isPortal,r=e.toLowerCase(),o=r.indexOf("/geocodeserver")>-1&&r.indexOf("/rest/services/")>-1,l=i&&r.indexOf(null===(n=t.portalHostname)||void 0===n?void 0:n.toLowerCase())>-1,s=!i&&r.indexOf("utility")&&r.indexOf(".arcgis.com")>-1;return o&&(l||s)}function a(e){return(0,i.n)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function u(e){return(0,i.n)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}function c(e,t){return!(0,i.n)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&(!t.isPortal||t.isBackedBySDS)}function d(e,t){return!(0,i.n)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&(!t.isPortal||t.isBackedBySDS)}function v(e){return!(0,i.n)(e)&&!0}function p(e){var t;return!(0,i.n)(e)&&(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:publishScenes"))}const f=e=>!(0,i.n)(e);function h(e,t,n){var i,r;const o=!!(null===(r=null===(i=t.helperServices)||void 0===i?void 0:i.rasterAnalytics)||void 0===r?void 0:r.url),l=function(e,t,n){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishDynamicImagery"))&&(t.isPortal||m(n))}(e,t,n),s=t.isPortal?l:l||function(e,t,n){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishTiledImagery"))&&!t.isPortal&&m(n)}(e,t,n);return o&&s}function m(e){return null==e?void 0:e.some((e=>{var t;return null===(t=e.entitlements)||void 0===t?void 0:t.some((e=>"image"===e.toLowerCase()))}))}async function g(e){var t;const{userLicensedItems:n}=await(0,o.r)(`${null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl}/community/self?returnUserLicensedItems=true`);return n}function b(e,t){var n,r;const o=null===(n=t.helperServices)||void 0===n?void 0:n.geocode.some((({url:e})=>s(e,t))),l=null!==(r=null==e?void 0:e.privileges)&&void 0!==r?r:[];return!(0,i.n)(e)&&o&&(!t.isPortal||!t.isWebTierAuth&&l.includes("portal:user:viewOrgItems")&&l.includes("portal:user:createItem"))}const w=e=>!(0,i.n)(e);function y(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function k(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function P(e,t){var n;return!!t.isPortal&&!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:publisher:registerDataStores"))}function C(e){return!(0,i.n)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}function S(e,t,n){return!t.isPortal&&c(e,t)&&function(e,t,n){return!(0,i.n)(e)&&!!t.supportsHostedServices&&a(e)&&(d(e,t)||c(e,t)||p(e)||v(e)||h(e,t,n))}(e,t,n)}function O(e,t,n){switch(t){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return c(e,n);case"Tile Package":return d(e,n);case"Vector Tile Package":return v(e);case"Scene Package":return p(e);case"Service Definition":return function(e,t){return c(e,t)&&d(e,t)}(e,n);default:return!0}}function I(e,t){var n;return(0,i.e)(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageCredits"))}(e)||!!((null==e?void 0:e.assignedCredits)>-1&&(null===(n=null==t?void 0:t.portalProperties)||void 0===n?void 0:n.showCreditsOnProfile))}const j=e=>!1;function T(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewGroups"))}function R(e){return(0,i.e)(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewUsers"))}(e)&&function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewItems"))}(e)&&(function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:reassignItems"))}(e))}}}]);