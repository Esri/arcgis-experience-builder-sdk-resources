"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[58313],{64646:(e,r,a)=>{a.d(r,{O:()=>w,S:()=>p,d:()=>o,g:()=>h,h:()=>d,m:()=>c,p:()=>u,v:()=>y,w:()=>f,y:()=>b});var t=a(47817);const n=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),s=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),i=/(.*)\/(\d+)\/?$/i;function u(e){return!!l.test(e)}function o(e){const r=(0,t.j)(e),a=r.path.match(l)||r.path.match(s);if(!a)return null;const[,n,i,u,o]=a,c=i.indexOf("/");return{title:y(-1!==c?i.slice(c+1):i),serverType:u,sublayer:null!=o&&""!==o?parseInt(o,10):null,url:{path:n}}}function c(e){const r=(0,t.j)(e).path.match(i);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function y(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function d(e,r){const a=[];if(e){const r=o(e);(0,t.H)(r)&&r.title&&a.push(r.title)}if(r){const e=y(r);a.push(e)}if(2===a.length){if(-1!==a[0].toLowerCase().indexOf(a[1].toLowerCase()))return a[0];if(-1!==a[1].toLowerCase().indexOf(a[0].toLowerCase()))return a[1]}return a.join(" - ")}function f(e){if(!e)return!1;const r=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),a=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return r&&a}function b(e,r){return e?(0,t.b1)((0,t.b2)(e,r)):e}function h(e){let{url:r}=e;if(!r)return{url:r};r=(0,t.b2)(r,e.logger);const a=(0,t.j)(r),n=o(a.path);let l;if((0,t.H)(n))null!=n.sublayer&&null==e.layer.layerId&&(l=n.sublayer),r=n.url.path;else if(e.nonStandardUrlAllowed){const e=c(a.path);(0,t.H)(e)&&(r=e.serviceUrl,l=e.sublayerId)}return{url:(0,t.b1)(r),layerId:l}}function w(e,r,a,n,l){(0,t.aP)(r,n,"url",l),n.url&&null!=e.layerId&&(n.url=(0,t.b3)(n.url,a,e.layerId.toString()))}function p(e){if(!e)return!1;const r=e.toLowerCase(),a=-1!==r.indexOf("/services/"),t=-1!==r.indexOf("/mapserver/wmsserver"),n=-1!==r.indexOf("/imageserver/wmsserver"),l=-1!==r.indexOf("/wmsserver");return a&&(t||n||l)}},58313:(e,r,a)=>{a.r(r),a.d(r,{fromUrl:()=>s});var t=a(47817),n=a(64646),l=a(52946);async function s(e){var r;const s=null==(r=e.properties)?void 0:r.customParameters,o=await async function(e,r){let a=(0,n.d)(e);if((0,t.t)(a)&&(a=await async function(e,r){const a=await c(e,r);let l=null,s=null;const i=a.type;if("Feature Layer"===i||"Table"===i?(l="FeatureServer",s=a.id):"indexedVector"===i?l="VectorTileServer":a.hasOwnProperty("mapName")?l="MapServer":a.hasOwnProperty("bandCount")&&a.hasOwnProperty("pixelSizeX")?l="ImageServer":a.hasOwnProperty("maxRecordCount")&&a.hasOwnProperty("allowGeometryUpdates")?l="FeatureServer":a.hasOwnProperty("streamUrls")&&(l="StreamServer"),!l)return null;const u=null!=s?(0,n.m)(e):null;return{title:(0,t.H)(u)&&a.name||(0,t.cr)(e),serverType:l,sublayer:s,url:{path:(0,t.H)(u)?u.serviceUrl:(0,t.j)(e).path}}}(e,r)),(0,t.t)(a))throw new t.s("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:s,sublayer:i}=a;let o;const y={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(s){case"MapServer":o=null!=i?"FeatureLayer":async function(e,r){return(await c(e,r)).tileInfo}(e,r).then((e=>e?"TileLayer":"MapImageLayer"));break;case"ImageServer":o=c(e,r).then((e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||"LERC"!==r.toUpperCase()||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"}));break;case"SceneServer":o=c(a.url.path,r).then((e=>{const r={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=r[a])return r[a]}return"SceneLayer"}));break;default:o=y[s]}const d="FeatureServer"===s,f={parsedUrl:a,Constructor:null,layerOrTableId:d?i:null,sublayerIds:null,tableIds:null},b=await o;if({FeatureLayer:!0,SceneLayer:!0}[b]&&null==i){const a=await u(e,s,r);if(d&&(f.sublayerInfos=a.layerInfos,f.tableInfos=a.tableInfos),1!==a.layerIds.length+a.tableIds.length)f.sublayerIds=a.layerIds,f.tableIds=a.tableIds;else if(d){var h,w;f.layerOrTableId=null!=(h=a.layerIds[0])?h:a.tableIds[0],f.sourceJSON=null!=(w=a.layerInfos[0])?w:a.tableInfos[0]}}return f.Constructor=await async function(e){return(0,l.a[e])()}(b),f}(e.url,s),y={...e.properties,url:e.url};if(!o.sublayerIds)return null!=o.layerOrTableId&&(y.layerId=o.layerOrTableId,y.sourceJSON=o.sourceJSON),new o.Constructor(y);const d=new((await a.e(14124).then(a.bind(a,7529))).default)({title:o.parsedUrl.title});return function(e,r,a){function n(e,n){const l={...a,layerId:e,sublayerTitleMode:"service-name"};return(0,t.H)(n)&&(l.sourceJSON=n),new r.Constructor(l)}r.sublayerIds.forEach((a=>{const t=n(a,i(r.sublayerInfos,a));e.add(t)})),r.tableIds.forEach((a=>{const t=n(a,i(r.tableInfos,a));e.tables.add(t)}))}(d,o,y),d}function i(e,r){return e?e.find((e=>e.id===r)):null}async function u(e,r,a){var t,n;let l,s=!1;if("FeatureServer"===r){const r=await async function(e,r){var a,t;let n=await c(e,r);n=n||{},n.layers=(null==(a=n.layers)?void 0:a.filter(o))||[];const l={serviceJSON:n};if(n.currentVersion<10.5)return l;const s=await c(e+"/layers",r);return l.layersJSON={layers:(null==s||null==(t=s.layers)?void 0:t.filter(o))||[],tables:(null==s?void 0:s.tables)||[]},l}(e,a);s=!!r.layersJSON,l=r.layersJSON||r.serviceJSON}else l=await c(e,a);const i=null==(t=l)?void 0:t.layers,u=null==(n=l)?void 0:n.tables;return{layerIds:(null==i?void 0:i.map((e=>e.id)).reverse())||[],tableIds:(null==u?void 0:u.map((e=>e.id)).reverse())||[],layerInfos:s?i:[],tableInfos:s?u:[]}}function o(e){return!e.type||"Feature Layer"===e.type}async function c(e,r){return(await(0,t.U)(e,{responseType:"json",query:{f:"json",...r}})).data}a(58574),a(68700)},52946:(e,r,a)=>{a.d(r,{a:()=>t});const t={BingMapsLayer:async()=>(await a.e(82549).then(a.bind(a,82549))).default,BuildingSceneLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(89289),a.e(78624),a.e(81345),a.e(44459),a.e(51505),a.e(12135),a.e(21002)]).then(a.bind(a,21002))).default,CSVLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(89289),a.e(78624),a.e(81345),a.e(44459),a.e(25166)]).then(a.bind(a,7344))).default,ElevationLayer:async()=>(await Promise.all([a.e(33896),a.e(89289),a.e(94935),a.e(59039)]).then(a.bind(a,36550))).default,FeatureLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(89289),a.e(78624),a.e(81345),a.e(44459),a.e(71786)]).then(a.bind(a,44459)).then((function(e){return e.F}))).default,GroupLayer:async()=>(await a.e(7529).then(a.bind(a,7529))).default,GeoRSSLayer:async()=>(await a.e(89740).then(a.bind(a,89740))).default,ImageryLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(89289),a.e(78624),a.e(78899),a.e(88768),a.e(25012),a.e(50935)]).then(a.bind(a,50935))).default,ImageryTileLayer:async()=>(await Promise.all([a.e(37085),a.e(89289),a.e(74970),a.e(19601),a.e(94935),a.e(88768),a.e(25012),a.e(80806)]).then(a.bind(a,80806))).default,IntegratedMeshLayer:async()=>(await Promise.all([a.e(33896),a.e(74970),a.e(19601),a.e(51505),a.e(40865)]).then(a.bind(a,40865))).default,KMLLayer:async()=>(await Promise.all([a.e(37085),a.e(23194)]).then(a.bind(a,23194))).default,MapImageLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(78624),a.e(81345),a.e(2807),a.e(8079),a.e(23110)]).then(a.bind(a,8079))).default,MapNotesLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(89289),a.e(78624),a.e(81345),a.e(74970),a.e(44459),a.e(19601),a.e(84299)]).then(a.bind(a,60587))).default,OpenStreetMapLayer:async()=>(await Promise.all([a.e(12242),a.e(41081)]).then(a.bind(a,41081))).default,PointCloudLayer:async()=>(await Promise.all([a.e(33896),a.e(86779)]).then(a.bind(a,86779))).default,RouteLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(89289),a.e(78624),a.e(81345),a.e(44459),a.e(98483)]).then(a.bind(a,58298))).default,SceneLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(89289),a.e(78624),a.e(81345),a.e(44459),a.e(51505),a.e(12135),a.e(72063)]).then(a.bind(a,72063))).default,StreamLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(78624),a.e(81345),a.e(95501)]).then(a.bind(a,95501))).default,TileLayer:async()=>(await Promise.all([a.e(33896),a.e(37085),a.e(78624),a.e(81345),a.e(94935),a.e(2807),a.e(41570)]).then(a.bind(a,41570))).default,UnknownLayer:async()=>(await a.e(51239).then(a.bind(a,51239))).default,UnsupportedLayer:async()=>(await a.e(9137).then(a.bind(a,9137))).default,VectorTileLayer:async()=>(await Promise.all([a.e(33896),a.e(94935),a.e(10661),a.e(3506)]).then(a.bind(a,3506))).default,WebTileLayer:async()=>(await a.e(12242).then(a.bind(a,12242)).then((function(e){return e.W}))).default,WMSLayer:async()=>(await a.e(80670).then(a.bind(a,80670))).default,WMTSLayer:async()=>(await Promise.all([a.e(12242),a.e(75749)]).then(a.bind(a,75749))).default}}}]);