/*! For license information please see 9451030c1aee88bcd4c130cec7d70921.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[71903],{71903:(e,t,i)=>{i.r(t),i.d(t,{arcgis_lazy_loading_list:()=>o});var s=i(28384),n=i(26426),r=i(81068);i(66716),i(18869);const o=class{constructor(e){(0,s.r)(this,e),this.arcgisLazyLoadingListChange=(0,s.c)(this,"arcgisLazyLoadingListChange",7),this.hasSelectedScrolled=!1,this.suspendObserver=!1,this.scrollingDown=!0,this.filterHeight=56,this.itemHeight=32.5,this.itemHeightAdjusted=!1,this.listChange=async()=>{const e=[...(await this.refListNode.getSelectedItems()).keys()].pop(),t=this.list.findIndex((({value:t})=>t===e));this.arcgisLazyLoadingListChange.emit({selectedValue:e,selectedIndex:t})},this.updateFilter=(0,n.d)((()=>{const e=this.refFilterNode.filteredItems;if(!e.length)return;const t=new Set(e.map((({label:e})=>e)));this.suspendObserver=!0,this.filterList=this.list.filter((({label:e})=>t.has(e))),this.pageRanges=[0,1],this.pageId=0}),100),this.list=void 0,this.popoverProps=void 0,this.selectedIndex=0,this.strings=void 0,this.showFilter=!1,this.pageSize=500,this.accumulatePages=!0,this.position="auto",this.pageBufferSize=10,this.flyOut=!1,this.listType="pick-list",this.pageId=0,this.filterList=void 0}watchSelectedIndex(e){this.updatePageId(e)}watchList(e){this.listLabels=e.map((({label:e})=>({label:e}))),this.lockedMenuPosition=void 0}componentWillLoad(){this.listLabels=this.list.map((({label:e})=>({label:e})));const e=Math.floor(this.list.length/this.pageSize);e<2||(this.updatePageId(),this.setupObserver(e))}componentDidRender(){if(this.flyOut&&!this.itemHeightAdjusted&&this.refSelectedNode){const e=this.refSelectedNode.getBoundingClientRect().height;if(this.itemHeight!==e){this.itemHeight=e;const{height:t,translateX:i,translateY:s}=this.getListPosition();this.refMenuNode.style.height=`${t}px`,this.refMenuNode.style.transform=`translate(${i}px, ${s}px)`}this.itemHeightAdjusted=!0}requestAnimationFrame((()=>{!this.hasSelectedScrolled&&this.refSelectedNode&&(this.refSelectedNode.scrollIntoView(),this.hasSelectedScrolled=!0),this.pendingScroll&&this.pendingScroll(),requestAnimationFrame((()=>{const{observer:e,refFirstnode:t,refLastnode:i}=this;e&&(this.suspendObserver=!1,t&&e.observe(t),i&&e.observe(i))}))}))}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}render(){var e,t;let i;if(this.suspendObserver=!0,this.flyOut){const{width:e,height:t,translateX:s,translateY:n}=this.getListPosition();i={width:`${e}px`,height:`${t}px`,transform:this.flyOut&&`translate(${s}px, ${n}px)`}}return(0,s.h)(s.H,{class:this.flyOut&&"js-app-flyout"},(0,s.h)("div",{class:this.flyOut?"pop-menu pop-menu-flyout":"pop-menu",style:i,ref:e=>this.refMenuNode=e},this.showFilter&&(0,s.h)("div",null,(0,s.h)("calcite-filter",{items:this.listLabels,messageOverrides:{clear:null===(e=this.strings)||void 0===e?void 0:e.clearFilter,label:null===(t=this.strings)||void 0===t?void 0:t.filterLabel},onCalciteFilterChange:this.updateFilter,ref:e=>this.refFilterNode=e})),(0,s.h)("div",{class:"pop-list"},this.renderList())))}renderList(){const{pageBufferSize:e}=this,t=Math.floor(e/2),i=this.getSubList(),n=this.getSelectedIndex(),o=this.list[n];return(0,s.h)("calcite-pick-list",{dir:(0,r.g)(this.hostElement),ref:e=>{this.refListNode&&this.refListNode.removeEventListener("calciteListChange",this.listChange),e.addEventListener("calciteListChange",this.listChange),this.refListNode=e},multiple:!1,filterEnabled:!1},i.map((({value:n,label:r},l)=>(0,s.h)("calcite-pick-list-item",{value:n,label:r,key:r,selected:n===o.value,ref:this.hasSelectedScrolled||r!==o.label?l===i.length-t?e=>{var t;e&&(this.refLastnode&&(null===(t=this.observer)||void 0===t||t.unobserve(this.refLastnode)),this.refLastnode=e)}:l===i.length-e?e=>{e&&(this.refSecondLastnode=e)}:l===t?e=>{var t;e&&(this.refFirstnode&&(null===(t=this.observer)||void 0===t||t.unobserve(this.refFirstnode)),this.refFirstnode=e)}:l===e?e=>{e&&(this.refSecondnode=e)}:null:e=>{this.refSelectedNode=e}}))))}getSelectedIndex(e=this.selectedIndex){return e>=this.list.length?0:e}getListPosition(){const{width:e,left:t,top:i,bottom:s,containerTop:n,containerBottom:r}=this.popoverProps,o=this.filterList||this.list,l=this.itemHeight*o.length+(this.showFilter?this.filterHeight:0),a=(r>s?r:document.body.clientHeight)-s,c=i-n;this.lockedMenuPosition||("auto"===this.position?this.lockedMenuPosition=1.5*l<=a||c/(c+a)<.618?"down":"up":this.lockedMenuPosition="down"===this.position?"down":"up");const d="down"===this.lockedMenuPosition,h=d?Math.min(l,a-2):Math.min(l,c-2);return{width:e,height:h,translateX:t,translateY:d?s:Math.max(n,i-h)}}getSubList(){const e=!(!this.accumulatePages||!this.pageRanges),t=e?Math.min(this.pageRanges[0],this.pageId):this.pageId,i=e?Math.max(this.pageRanges[1],this.pageId+1):this.pageId+1,s=this.filterList||this.list,{pageBufferSize:n}=this,r=s.slice(0===t?0:t*this.pageSize-n,i*this.pageSize+n);return this.accumulatePages&&(this.pageRanges=[t,i]),r}setupObserver(e){this.observer=new IntersectionObserver(((t,i)=>{if(this.suspendObserver)return;let s=!1;if(1===(t=t.filter((({isIntersecting:e})=>e))).length){const i=t[0];if(this.refLastnode&&i.target.label===this.refLastnode.label)this.pageId<e&&(this.pageId++,s=!0,this.scrollingDown=!0,this.accumulatePages||(this.pendingScroll=()=>{var e;return this.pageId>0&&(null===(e=this.refSecondnode)||void 0===e?void 0:e.scrollIntoView(!0))}));else if(this.pageId>0){if(this.pageId--,this.accumulatePages){const e=i.target;this.pendingScroll=()=>{e.scrollIntoView(),this.pendingScroll=null}}else this.pendingScroll=()=>{var e;null===(e=this.refSecondLastnode)||void 0===e||e.scrollIntoView(!1),this.pendingScroll=null};s=!0,this.scrollingDown=!1}}else if(2===t.length&&this.pageId===e){if(this.pageId--,this.accumulatePages){const e=this.refLastnode;this.pendingScroll=()=>{e.scrollIntoView(),this.pendingScroll=null}}s=!0,this.scrollingDown=!1}s&&(i.unobserve(this.refLastnode),i.unobserve(this.refFirstnode))}))}updatePageId(e=this.selectedIndex){e=this.getSelectedIndex(e);const t=Math.floor(e/this.pageSize);t!==this.pageId&&(this.pageId=t)}get hostElement(){return(0,s.d)(this)}static get watchers(){return{selectedIndex:["watchSelectedIndex"],list:["watchList"]}}};o.style=":host{display:flex;flex-direction:column;overflow:hidden}.pop-menu{display:flex;flex-direction:column;position:absolute;max-height:100%;width:100%;overflow-y:hidden;border:1px solid var(--calcite-ui-border-3)}.pop-menu.pop-menu-flyout{top:0px;left:0px;z-index:100}.pop-list{overflow-y:scroll}"},26426:(e,t,i)=>{i.d(t,{a:()=>c,b:()=>u,c:()=>n,d:()=>s,e:()=>r,f:()=>d,g:()=>f,i:()=>o,m:()=>l,t:()=>a,u:()=>h});const s=(e,t)=>{let i,s="idle";const n=(...n)=>new Promise((r=>{switch(s){case"flushed":s="idle",i?(clearTimeout(i),r(e(...n))):r(null);break;case"invoked":clearTimeout(i),s="idle",r(e(...n));break;case"cancelled":clearTimeout(i),s="idle",r(null);break;default:i&&clearTimeout(i),s="pending",i=setTimeout((()=>(s="idle",r(e(...n)))),t)}}));return n.flush=function(...e){return s="flushed",n(...e)},n.invoke=function(...e){return s="invoked",n(...e)},n.cancel=function(...e){return s="cancelled",n(...e)},n.getStatus=function(){return s},n},n=(e,t)=>{let i;return(...s)=>new Promise((n=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,n(e(...s))}),t))}))};function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function l(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:s}=t(e);return[i,s]}))),d=(e,t)=>e.length===t.length&&e.reduce(((e,i)=>e&&t.indexOf(i)>-1),!0);function h(e,t){const i=[],s={};return e.forEach((e=>{const n=t(e);null==s[n]&&(s[n]=e,i.push(e))})),i}function u(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let s=typeof e;return s in t?!t[s].hasOwnProperty(e)&&(t[s][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const f=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((i,s)=>e.slice(t*s,t+t*s)))},81068:(e,t,i)=>{i.d(t,{C:()=>l,a:()=>d,f:()=>a,g:()=>o,l:()=>r});var s=i(66716),n=i(18869);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,i){const s=(0,n.c)(e,"[dir]");return s?s.getAttribute("dir"):"ltr"}(e)}const l={rtl:"arcgis--rtl"};async function a(e,t){const{api:i,type:n,places:r}=t||{};if(4===i){const[t]=await(0,s.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:r,style:n,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:n}))}const[o]=await(0,s.l)(["dojo/number"]);return o.format(e,{type:n,places:r,pattern:null==t?void 0:t.pattern})}const c={};function d(e){const t=document.documentElement.lang;return c[t]||(c[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[t].format(e)}},66716:(e,t,i)=>{i.d(t,{a:()=>s,c:()=>r,e:()=>o,g:()=>n,l:()=>l});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var o=r((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",s="next";function n(e){if(e.toLowerCase()===s)return s;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function r(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function o(e){return!e||n(e)?function(e){void 0===e&&(e=i);var t=r(e),o=n(e);if(o!==s&&3===o.major){var l=o.minor<=10?"js/":"";return"".concat(t).concat(l,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function l(e,t){var i=o(e),s=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(i);return s||function(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}(s=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(i),t),s}var a={};function c(e,t,i){var s;i&&(s=function(e,t){var i=function(s){t(s.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}(e,i));var n=function(){t(e),e.removeEventListener("load",n,!1),s&&e.removeEventListener("error",s,!1)};e.addEventListener("load",n,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function h(){var e=window.require;return e&&e.on}function u(e){void 0===e&&(e={});var i={};[a,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var s=i.version,n=i.url||r(s);return new t.Promise((function(e,t){var r=d();if(r){var o=r.getAttribute("src");o!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):h()?e(r):c(r,e,t)}else if(h())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=i.css;a&&l(!0===a?s:a,i.insertCssBefore),c(r=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(n),(function(){r.setAttribute("data-esri-loader","loaded"),e(r)}),t),document.body.appendChild(r)}}))}function f(e){return new t.Promise((function(t,i){var s=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];s.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),h())return f(e);var i=d(),s=i&&i.getAttribute("src");return!t.url&&s&&(t.url=s),u(t).then((function(){return f(e)}))},e.getScript=d,e.isLoaded=h,e.loadScript=u,e.setDefaultOptions=function(e){void 0===e&&(e={}),a=e},e.loadCss=l,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const l=async(e,t)=>(await o.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);