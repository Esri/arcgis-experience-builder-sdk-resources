"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[3506],{32226:(e,t,r)=>{r.d(t,{a:()=>l});var s=r(47817),i=(r(58574),r(99884));const l=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new i.j({layer:this}):null}};return(0,s.Z)([(0,s._)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,s.Z)([(0,s._)()],t.prototype,"minScale",void 0),(0,s.Z)([(0,s.ab)("service","minScale")],t.prototype,"readMinScale",null),(0,s.Z)([(0,s._)()],t.prototype,"maxScale",void 0),(0,s.Z)([(0,s.ab)("service","maxScale")],t.prototype,"readMaxScale",null),(0,s.Z)([(0,s._)({type:s.O})],t.prototype,"spatialReference",void 0),(0,s.Z)([(0,s._)({readOnly:!0})],t.prototype,"supportsBlankTile",null),(0,s.Z)([(0,s._)(i.r)],t.prototype,"tileInfo",void 0),(0,s.Z)([(0,s._)()],t.prototype,"tilemapCache",void 0),(0,s.Z)([(0,s.ab)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),(0,s.Z)([(0,s._)()],t.prototype,"version",void 0),t=(0,s.Z)([(0,s.a0)("esri.layers.mixins.ArcGISCachedService")],t),t}},52067:(e,t,r)=>{r.d(t,{t:()=>i});var s=r(47817);r(58574);const i=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,s.Z)([(0,s._)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{default:"normal",read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,s.Z)([(0,s._)()],t.prototype,"effect",void 0),t=(0,s.Z)([(0,s.a0)("esri.layers.mixins.BlendLayer")],t),t}},77639:(e,t,r)=>{r.d(t,{e:()=>i});var s=r(18204);class i{constructor(e,t){this._storage=new s.i,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},45914:(e,t,r)=>{r.d(t,{s:()=>i});var s=r(47817);r(58574);const i=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get scaleRangeId(){return`${this.minScale},${this.maxScale}`}};return(0,s.Z)([(0,s._)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,s.Z)([(0,s._)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,s.Z)([(0,s._)({readOnly:!0})],t.prototype,"scaleRangeId",null),t=(0,s.Z)([(0,s.a0)("esri.layers.mixins.ScaleRangeLayer")],t),t}},55234:(e,t,r)=>{r.d(t,{e:()=>i});var s=r(47817);class i{constructor(e,t,r,s){this.set(e,t,r,s)}static getId(e,t,r,s){return"object"==typeof e?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${t}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}acquire(e,t,r,s){this.set(e,t,r,s)}contains(e){const t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new i(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,t,r,s){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){const[t,r,s,i]=e.split("/");this.level=parseFloat(t),this.row=parseFloat(r),this.col=parseFloat(s),this.world=parseFloat(i)}else this.level=+e,this.row=+t,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new i(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,t=this.row<<1,r=this.col<<1,s=this.world;return[new i(e,t,r,s),new i(e,t,r+1,s),new i(e,t+1,r,s),new i(e,t+1,r+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}i.pool=new s.cg(i,null,null,25,50)},18608:(e,t,r)=>{r.d(t,{d:()=>d,i:()=>o,r:()=>l});var s=r(47817);r(58574);const i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},l=(0,s.aL)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function n(e,t,r){const s=new Date(e.getTime());if(t&&r){const e=i[r],{getter:l,setter:n,multiplier:o}=e;s[n](s[l]()+t*o)}return s}const o={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function a(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}var u;let c=u=class extends s.ao{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return p}static get empty(){return h}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(u.allTime)}get isEmpty(){return this.equals(u.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new u({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=this.start?a(this.start,e):null,r=this.end?n(a(this.end,e),1,e):null;return new u({start:t,end:r})}intersection(e){var t,r,s,i,l,n,o,a;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return u.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const c=null!=(t=null==(r=this.start)?void 0:r.getTime())?t:-1/0,p=null!=(s=null==(i=this.end)?void 0:i.getTime())?s:1/0,h=null!=(l=null==(n=e.start)?void 0:n.getTime())?l:-1/0,d=null!=(o=null==(a=e.end)?void 0:a.getTime())?o:1/0;let m,y;if(h>=c&&h<=p?m=h:c>=h&&c<=d&&(m=c),p>=h&&p<=d?y=p:d>=c&&d<=p&&(y=d),!isNaN(m)&&!isNaN(y)){const e=new u;return e.start=m===-1/0?null:new Date(m),e.end=y===1/0?null:new Date(y),e}return u.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new u,{start:s,end:i}=this;return s&&(r.start=n(s,e,t)),i&&(r.end=n(i,e,t)),r}equals(e){if(!e)return!1;const t=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,s=e.start?e.start.getTime():e.start,i=e.end?e.end.getTime():e.end;return t===s&&r===i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();const t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new u({start:t,end:r})}};(0,s.Z)([(0,s._)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"end",void 0),(0,s.Z)([(0,s.ab)("end")],c.prototype,"readEnd",null),(0,s.Z)([(0,s.aj)("end")],c.prototype,"writeEnd",null),(0,s.Z)([(0,s._)({readOnly:!0,json:{read:!1}})],c.prototype,"isAllTime",null),(0,s.Z)([(0,s._)({readOnly:!0,json:{read:!1}})],c.prototype,"isEmpty",null),(0,s.Z)([(0,s._)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"start",void 0),(0,s.Z)([(0,s.ab)("start")],c.prototype,"readStart",null),(0,s.Z)([(0,s.aj)("start")],c.prototype,"writeStart",null),c=u=(0,s.Z)([(0,s.a0)("esri.TimeExtent")],c);const p=new c,h=new c({start:void 0,end:void 0});var d=c},3506:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var s=r(47817),i=r(58574),l=r(7390),n=r(3467),o=r(50542),a=r(52067),u=r(19904),c=r(45914),p=r(18847),h=r(99884),d=r(32226),m=r(55234),y=r(72819),f=r(10661);r(68700),r(18608),r(29156),r(69764),r(64646),r(72304),r(89684),r(77639),r(18204);const g=s.S.getLogger("esri.layers.support.SpriteSource");class S{constructor(e,t,r,s){this.baseURL=e,this.devicePixelRatio=t,this.maxTextureSize=r,this._spriteImageFormat=s,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}get spriteNames(){const e=[];for(const t in this._spritesData)e.push(t);return e.sort(),e}getSpriteInfo(e){return this._spritesData[e]}async load(e){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(e),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}_loadSprites(e){this._isRetina=this.devicePixelRatio>1.15;const t=(0,s.j)(this.baseURL),r=t.query?"?"+(0,s.aA)(t.query):"",i=this._isRetina?"@2x":"",l=`${t.path}${i}.${this._spriteImageFormat}${r}`,n=`${t.path}${i}.json${r}`;return Promise.all([(0,s.U)(n,e),(0,s.U)(l,{responseType:"image",...e})]).then((([e,r])=>{const i=Object.keys(e.data);if(!i||0===i.length||1===i.length&&"_ssl"===i[0]||!r||!r.data)return this._spritesData=this.image=null,this.width=this.height=0,Promise.resolve(null);this._spritesData=e.data;const l=r.data,n=Math.max(this.maxTextureSize,4096);if(l.width>n||l.height>n){const e=`Sprite resource for style ${t.path} is bigger than the maximum allowed of ${n} pixels}`;throw g.error(e),new s.s("SpriteSource",e)}this.width=l.width,this.height=l.height;const o=document.createElement("canvas"),a=o.getContext("2d");o.width=l.width,o.height=l.height,a.drawImage(l,0,0,l.width,l.height);const u=a.getImageData(0,0,l.width,l.height),c=new Uint8Array(u.data);let p;for(let e=0;e<c.length;e+=4)p=c[e+3]/255,c[e]=c[e]*p,c[e+1]=c[e+1]*p,c[e+2]=c[e+2]*p;this.image=c}))}}class w{constructor(e){if(e instanceof h.j)this._tilemapCache=e;else{if(!e||!("index"in e))throw new Error("Invalid tilemap!");this._tilemap=e.index}}dataKey(e,t){if(this._tilemapCache){const{level:r,row:i,col:l}=e,n=new m.e(e);return this._tilemapCache.fetchAvailabilityUpsample(r,i,l,n,t).then((()=>(n.world=e.world,n))).catch((e=>{if((0,s.aD)(e))throw e;return null}))}return this._getIndexedDataKey(e)}forEach(e,t,r,s,i){this._callback=i,this._maxLevel=t+e,this._forEach(this._tilemap,t,r,s)}_forEach(e,t,r,s){0!==e&&(this._callback(t,r,s),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*r,2*s),this._forEach(e[1],t+1,2*r,2*s+1),this._forEach(e[2],t+1,2*r+1,2*s),this._forEach(e[3],t+1,2*r+1,2*s+1)))}_getIndexedDataKey(e){const t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Promise.resolve(null);let r=e;for(;0!==r.level;)r=new m.e(r.level-1,r.row>>1,r.col>>1,r.world),t.push(r);let s,i,l=this._tilemap,n=t.pop();if(1===l)return Promise.resolve(n);for(;t.length;)if(s=t.pop(),i=(1&s.col)+((1&s.row)<<1),l){if(0===l[i]){n=null;break}if(1===l[i]){n=s;break}n=s,l=l[i]}return Promise.resolve(n)}}class A{constructor(e,t,r){this.tileMapURL="",this.tilemapCache=null,this.parsedUrl=null,this.tileInfo=null,this.capabilities=null,this.tileIndex=null,this.fullExtent=null,this.name=e,this.sourceUrl=t,t&&(this.parsedUrl=(0,s.j)(this.sourceUrl));const i=this.parsedUrl.path,l=this.parsedUrl.query?"?"+(0,s.aA)(this.parsedUrl.query):"",n=(0,s.R)(r),o=n.tiles;t&&o.forEach(((e,t)=>{(0,s.a2)(e)||(o[t]=(0,s.b3)(i,e)+l)})),this.tileServers=o,r.tileMap&&(this.tileMapURL=(0,s.b3)(t,r.tileMap));const a=r.capabilities&&r.capabilities.split(",").map((e=>e.toLowerCase().trim())),u=!!r.exportTilesAllowed,c=!!a&&-1!==a.indexOf("tilemap"),p=u&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:u,supportsTileMap:c},exportTiles:u?{maxExportTilesCount:+p}:null},this.tileInfo=(0,h.n)(n.tileInfo,n,null,{ignoreMinMaxLOD:!0}),c&&(this.type="vector-tile",this.tilemapCache=new h.j({layer:this}),this.tilemapCache&&(this.tileIndex=new w(this.tilemapCache))),this.fullExtent=s.M.fromJSON(r.fullExtent)}getRefKey(e,t){return this.tileIndex?this.tileIndex.dataKey(e,t):Promise.resolve(e)}getSourceTileUrl(e,t,r){let s=this.tileServers[t%this.tileServers.length];return s=s.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,r.toString()),s}isCompatibleWith(e){const t=this.tileInfo,r=e.tileInfo;if(!t.spatialReference.equals(r.spatialReference))return!1;if(!t.origin.equals(r.origin))return!1;if(Math.round(t.dpi)!==Math.round(r.dpi))return!1;const s=t.lods,i=r.lods,l=Math.min(s.length,i.length);for(let e=0;e<l;e++){const t=s[e],r=i[e];if(t.level!==r.level||Math.round(t.scale)!==Math.round(r.scale))return!1}return!0}}const _=s.aw.defaults&&s.aw.defaults.io.corsEnabledServers;function v(e){if(!e)return;const t=(0,s.dy)(e);_&&-1===_.indexOf(t)&&_.push(t)}function U(...e){let t;for(let r=0;r<e.length;++r)if((0,s.ag)(e[r])){if(t){const s=t.split("://")[0];t=s+":"+e[r].trim()}}else t=(0,s.a2)(e[r])?e[r]:(0,s.b3)(t,e[r]);return(0,s.b1)(t)}async function x(e,t,r,i,l){let n,o,a;if((0,s.ah)(l),"string"==typeof r){const e=(0,s.z)(r);v(e);const t=(0,s.j)(e);a=await(0,s.U)(t.path,{query:{f:"json"},responseType:"json",...l}),n=e,o=e}else a={data:r},n=r.jsonUrl||null,o=i;const u=a.data;return a.ssl&&(n&&(n=n.replace(/^http:/i,"https:")),o&&(o=o.replace(/^http:/i,"https:"))),b(u)?(e.styleUrl=n||null,async function(e,t,r,i){const l=r?(0,s.g)(r):s.dz;e.styleBase=l,e.style=t,e.styleUrl&&v(e.styleUrl),t["sprite-format"]&&"webp"===t["sprite-format"].toLowerCase()&&(e.spriteFormat="webp");const n=[];if(t.sources&&t.sources.esri){const r=t.sources.esri;r.url?await x(e,"esri",U(l,r.url),void 0,i):n.push(x(e,"esri",r,l,i))}for(const r of Object.keys(t.sources))"esri"!==r&&"vector"===t.sources[r].type&&(t.sources[r].url?n.push(x(e,r,U(l,t.sources[r].url),void 0,i)):t.sources[r].tiles&&n.push(x(e,r,t.sources[r],l,i)));await Promise.all(n)}(e,u,o,l)):function(e){return!b(e)}(u)?e.sourceUrl?T(e,u,o,!1,t,l):(e.sourceUrl=n||null,T(e,u,o,!0,t,l)):Promise.reject("You must specify the URL or the JSON for a service or for a style.")}function b(e){return!!e.sources}async function T(e,t,r,i,l,n){const o=r?(0,s.b1)(r)+"/":s.dz,a=function(e,t){if(e.hasOwnProperty("tileInfo"))return e;const r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}};let s=78271.51696400007,i=295828763.7957775;const l=[],n=e.hasOwnProperty("minzoom")?parseFloat(e.minzoom):0,o=e.hasOwnProperty("maxzoom")?parseFloat(e.maxzoom):22;for(let e=0;e<=o;e++)e>=n&&l.push({level:e,scale:i,resolution:s}),s/=2,i/=2;for(const r of e.tiles)v(U(t,r));return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:0,maxScale:0,tiles:e.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:l,spatialReference:{wkid:102100}}}}(t,o),u=new A(l,o,a);if(!i&&e.primarySourceName in e.sourceNameToSource){const t=e.sourceNameToSource[e.primarySourceName];if(!t.isCompatibleWith(u))return Promise.resolve();null!=u.fullExtent&&(null!=t.fullExtent?t.fullExtent.union(u.fullExtent):t.fullExtent=u.fullExtent.clone()),t.tileInfo.lods.length<u.tileInfo.lods.length&&(t.tileInfo=u.tileInfo)}if(i?(e.sourceBase=o,e.source=t,e.validatedSource=a,e.primarySourceName=l,e.sourceUrl&&v(e.sourceUrl)):v(o),e.sourceNameToSource[l]=u,!e.style)return null==t.defaultStyles?Promise.reject():"string"==typeof t.defaultStyles?x(e,"",U(o,t.defaultStyles,"root.json"),void 0,n):x(e,"",t.defaultStyles,U(o,"root.json"),n)}class I{constructor(e,t){this.lockedSchemaPixelSize=e,this.isGCS=t}getLevelRowColumn(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e}adjustLevel(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e}getShift(e,t){let r=0,s=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(r=t),e[1]%2&&(s=t)),[r,s]}getScale(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2}static create256x256CompatibleTileInfo(e){if(!e)return null;if(256===e.size[0]&&256===e.size[1])return e;const t=e.spatialReference.isGeographic,r=[],s=e.lods.length;for(let i=0;i<s;i++){const s=e.lods[i],l=t?s.resolution:2*s.resolution;r.push(new p.i({level:s.level,scale:s.scale,resolution:l}))}return new p.x({size:[256,256],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:r})}static create512x512CompatibleTileInfo(e){if(!e)return null;if(256===e.size[0]||256===e.size[1])return null;const t=[],r=e.lods.length;for(let s=0;s<r;s++){const r=e.lods[s],i=.5*r.resolution;t.push(new p.i({level:r.level,scale:r.scale,resolution:i}))}return new p.x({size:[512,512],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:t})}}const R=1e-6;function E(e,t){if(e===t)return!0;if(!e&&null!=t)return!1;if(null!=e&&!t)return!1;if(!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;const r=e.origin,s=t.origin;if(Math.abs(r.x-s.x)>=R||Math.abs(r.y-s.y)>=R)return!1;let i,l;e.lods[0].scale>t.lods[0].scale?(i=e,l=t):(l=e,i=t);for(let e=i.lods[0].scale;e>=l.lods[l.lods.length-1].scale-R;e/=2)if(Math.abs(e-l.lods[0].scale)<R)return!0;return!1}function P(e,t){if(e===t)return e;if(!e&&null!=t)return t;if(null!=e&&!t)return e;const r=e.size[0],s=e.format,i=e.dpi,l={x:e.origin.x,y:e.origin.y},n=e.spatialReference.toJSON(),o=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],a=e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1],u=o.scale,c=o.resolution,h=a.scale,d=[];let m=u,y=c,f=0;for(;m>h;)d.push({level:f,resolution:y,scale:m}),f++,m/=2,y/=2;return new p.x({size:[r,r],dpi:i,format:s||"pbf",origin:l,lods:d,spatialReference:n})}function M(e,t={},r){let s;switch(r){case"webgl":default:s=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case"webgl2":s=["webgl2"]}let i=null;for(const r of s){try{i=e.getContext(r,t)}catch(e){}if(i)break}return i}let O;function D(){return O||(O=function(){const e={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return e;const t=document.createElement("canvas");if(!t)return e;let r=M(t,{failIfMajorPerformanceCaveat:!0},"webgl");if(r||(r=M(t,{},"webgl"),r&&(e.majorPerformanceCaveat=!0)),!r)return e;const s=r.getParameter(r.VERSION);if(!s)return e;const i=s.match(/^WebGL\s+([\d.]*)/);if(i){const t=parseFloat(i[1]);e.available=t>=.94;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);s&&(e.supportsHighPrecisionFragment=s.precision>0),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,e.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),e.supportsColorBufferFloat=null!==r.getExtension("WEBGL_color_buffer_float")&&null!==r.getExtension("EXT_float_blend")}return e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;const e=document.createElement("canvas");return!!e&&!!M(e,{},"webgl2")}()?2:1,e}()),O}let B=class extends((0,a.t)((0,c.s)((0,d.a)((0,o.p)((0,n.l)((0,u.u)((0,l.l)(l.b)))))))){constructor(...e){super(...e),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}destroy(){this._spriteSourceMap.clear()}async prefetchResources(e){await this.loadSpriteSource(i.e.devicePixelRatio||1,e)}load(e){const t=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).then((async()=>{if(!this.portalItem||!this.portalItem.id)return;const t=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await(0,s.U)(t,{...e,query:{f:"json"}})).data&&this.read({url:t},(0,y.o)(this.portalItem))})).then((()=>this._loadStyle(e)),(()=>this._loadStyle(e)));return this.addResolvingPromise(t),Promise.resolve(this)}get attributionDataUrl(){const e=this.currentStyleInfo,t=e&&e.serviceUrl&&(0,s.j)(e.serviceUrl);return t?this._getDefaultAttribution(t.path):null}get capabilities(){const e=this._getPrimarySource();return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){const e=this._getPrimarySource();return e?e.fullExtent:null}get parsedUrl(){return this.serviceUrl?(0,s.j)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(e,t){e&&(0,s.ag)(e)&&(e=`https:${e}`),t.styleUrl=e}get tileIndexType(){const e=this._getPrimarySource();return e?e.type:""}get tileIndexUrl(){const e=this._getPrimarySource();return e?e.tileMapURL:""}get tileInfo(){var e;const t=[];for(const e in this.sourceNameToSource)t.push(this.sourceNameToSource[e]);let r=(null==(e=this._getPrimarySource())?void 0:e.tileInfo)||new p.x;if(t.length>1)for(let e=0;e<t.length;e++)E(r,t[e].tileInfo)&&(r=P(r,t[e].tileInfo));return r}get tilemapCache(){const e=this._getPrimarySource();return e&&e.capabilities.operations.supportsTileMap?e.tilemapCache:null}get tileServers(){const e=this._getPrimarySource();return e?e.tileServers:[]}readVersion(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}get compatibleTileInfo256(){return I.create256x256CompatibleTileInfo(this.tileInfo)}get compatibleTileInfo512(){return I.create512x512CompatibleTileInfo(this.tileInfo)}async loadSpriteSource(e=1,t){if(!this._spriteSourceMap.has(e)){const r=D(),s=new S(this.styleRepository.sprite,e,r.maxTextureSize,this.currentStyleInfo.spriteFormat);await s.load(t),this._spriteSourceMap.set(e,s)}return Promise.resolve(this._spriteSourceMap.get(e))}async loadStyle(e,t){const r=e||this.style||this.url;if(this._loadingPromise&&"string"==typeof r&&this.url===r&&!(0,s.bb)(this._abortController))return this._loadingPromise;const i=this._abortController;i&&i.abort();const l=(0,s.az)();return this._loadingPromise=new Promise(((e,i)=>{const n={signal:l.signal};this._spriteSourceMap.clear(),this._getSourceAndStyle(r,n).then(e,i),(0,s.b8)(t,(()=>{l.abort()}))})),this._abortController=l,this._loadingPromise}getStyleLayerId(e){return this.styleRepository.getStyleLayerId(e)}getStyleLayerIndex(e){return this.styleRepository.getStyleLayerIndex(e)}getPaintProperties(e){return(0,s.R)(this.styleRepository.getPaintProperties(e))}setPaintProperties(e,t){const r=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);const s=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layerName:e,paint:t,isDataDriven:r||s})}getStyleLayer(e){return(0,s.R)(this.styleRepository.getStyleLayer(e))}setStyleLayer(e,t){this.styleRepository.setStyleLayer(e,t),this.emit("style-layer-change",{layer:e,index:t})}deleteStyleLayer(e){this.styleRepository.deleteStyleLayer(e),this.emit("delete-style-layer",{layerName:e})}getLayoutProperties(e){return(0,s.R)(this.styleRepository.getLayoutProperties(e))}setLayoutProperties(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit("layout-change",{layer:e,layout:t})}setStyleLayerVisibility(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit("style-layer-visibility-change",{layer:e,visibility:t})}getStyleLayerVisibility(e){return this.styleRepository.getStyleLayerVisibility(e)}getTileUrl(e,t,r){let s=this.tileServers[t%this.tileServers.length];return s=s.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,r.toString()),s}write(e,t){return t&&t.origin&&!this.styleUrl?(t.messages&&t.messages.push(new s.s("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(e,t)}async _getSourceAndStyle(e,t){if(!e)throw new Error("invalid style!");const r=await async function(e,t){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[i,l]="string"==typeof e?[e,null]:[null,e.jsonUrl],n=i?(0,s.j)(i):null;await x(r,"esri",e,l,t);const o={layerDefinition:r.validatedSource,url:i,parsedUrl:n,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&U(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&U(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName};return v(o.spriteUrl),v(o.glyphsUrl),o}(e,t);"webp"===r.spriteFormat&&(await function(e){const t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return new Promise((e=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,e(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,e(!1)},r.src="data:image/webp;base64,"+t.lossy}))}()||(r.spriteFormat="png")),this._set("currentStyleInfo",{...r}),"string"==typeof e?(this.url=e,this.style=null):(this.url=null,this.style=e),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySourceName",r.primarySourceName),this._set("styleRepository",new f.g(r.style,r)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style",{})}_getDefaultAttribution(e){const t=e.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),r=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!t)return;const i=t[2]&&t[2].toLowerCase();if(!i)return;const l=t[1]||"";for(const e of r)if(e.toLowerCase().indexOf(i)>-1)return(0,s.z)(`//static.arcgis.com/attribution/Vector${l}/${e}`)}_getPrimarySource(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null}async _loadStyle(e){return this._loadingPromise?this._loadingPromise:this.loadStyle(null,e)}};(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"attributionDataUrl",null),(0,s.Z)([(0,s._)({type:["show","hide"]})],B.prototype,"listMode",void 0),(0,s.Z)([(0,s._)({readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"],json:{read:!1}})],B.prototype,"capabilities",null),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"currentStyleInfo",void 0),(0,s.Z)([(0,s._)({json:{read:!1},readOnly:!0,type:s.M})],B.prototype,"fullExtent",null),(0,s.Z)([(0,s._)()],B.prototype,"style",void 0),(0,s.Z)([(0,s._)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],B.prototype,"isReference",void 0),(0,s.Z)([(0,s._)({type:["VectorTileLayer"]})],B.prototype,"operationalLayerType",void 0),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"parsedUrl",null),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"serviceUrl",null),(0,s.Z)([(0,s._)({type:s.O,readOnly:!0})],B.prototype,"spatialReference",null),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"styleRepository",void 0),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"sourceNameToSource",void 0),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"primarySourceName",void 0),(0,s.Z)([(0,s._)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],B.prototype,"styleUrl",null),(0,s.Z)([(0,s.aj)(["portal-item","web-document"],"styleUrl")],B.prototype,"writeStyleUrl",null),(0,s.Z)([(0,s._)({json:{read:!1},readOnly:!0})],B.prototype,"tileIndexType",null),(0,s.Z)([(0,s._)({json:{read:!1},readOnly:!0})],B.prototype,"tileIndexUrl",null),(0,s.Z)([(0,s._)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:p.x})],B.prototype,"tileInfo",null),(0,s.Z)([(0,s._)({json:{read:!1},readOnly:!0,type:h.j})],B.prototype,"tilemapCache",null),(0,s.Z)([(0,s._)({json:{read:!1},readOnly:!0})],B.prototype,"tileServers",null),(0,s.Z)([(0,s._)({json:{read:!1},readOnly:!0,value:"vector-tile"})],B.prototype,"type",void 0),(0,s.Z)([(0,s._)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],B.prototype,"url",void 0),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"version",void 0),(0,s.Z)([(0,s.ab)("version",["version","currentVersion"])],B.prototype,"readVersion",null),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"compatibleTileInfo256",null),(0,s.Z)([(0,s._)({readOnly:!0})],B.prototype,"compatibleTileInfo512",null),B=(0,s.Z)([(0,s.a0)("esri.layers.VectorTileLayer")],B);const C=B},72819:(e,t,r)=>{r.d(t,{o:()=>i});var s=r(47817);function i(e){return{origin:"portal-item",url:(0,s.j)(e.itemUrl),portal:e.portal||s.w.getDefault(),portalItem:e,readResourcePaths:[]}}},69764:(e,t,r)=>{r.d(t,{E:()=>o,G:()=>R,I:()=>U,K:()=>b,L:()=>E,Q:()=>O,R:()=>x,T:()=>T,V:()=>D,Y:()=>I,a:()=>l,b:()=>a,c:()=>n,l:()=>c,u:()=>u}),r(58574);var s=r(47817);function i(e){return new s.O({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const l=i(s.aW),n=i(s.aU),o=i(s.aV),a=new s.O({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${s.aW.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function u(e){return(0,s.aZ)(e)?s.aU:(0,s.a_)(e)?s.aV:s.aW}const c=39.37,p=s.aW.radius*Math.PI/200,h=/UNIT\[([^\]]+)\]\]$/i,d=s.a$,m=/UNIT\[([^\]]+)\]/i,y=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),f=(0,s.aL)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),g=e=>e*e,S=e=>e*e*e,w={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:g(.001)},"square-centimeters":{inBaseUnits:g(.01)},"square-decimeters":{inBaseUnits:g(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:g(1e3)},"square-inches":{inBaseUnits:g(.0254)},"square-feet":{inBaseUnits:g(.3048)},"square-yards":{inBaseUnits:g(.9144)},"square-miles":{inBaseUnits:g(1609.344)},"square-us-feet":{inBaseUnits:g(1200/3937)},acres:{inBaseUnits:.0015625*g(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*S(.001)},"cubic-centimeters":{inBaseUnits:1e3*S(.01)},"cubic-decimeters":{inBaseUnits:1e3*S(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*S(1e3)},"cubic-inches":{inBaseUnits:1e3*S(.0254)},"cubic-feet":{inBaseUnits:1e3*S(.3048)},"cubic-yards":{inBaseUnits:1e3*S(.9144)},"cubic-miles":{inBaseUnits:1e3*S(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},A=function(){const e={};for(const t in w)for(const r in w[t].units)e[r]=t;return e}();function _(e){const t=A[e];if(t)return t;throw new Error("unknown measure")}function v(e,t=null){return t=t||_(e),w[t].baseUnit===e}function U(e,t,r){if(t===r)return e;const s=_(t);if(s!==_(r))throw new Error("incompatible units");const i=v(t,s)?e:function(e,t,r){return e*w[r].units[t].inBaseUnits}(e,t,s);return v(r,s)?i:function(e,t,r){return e/w[r].units[t].inBaseUnits}(i,r,s)}function x(e,t,r){return U(e,t,"meters")/(r*Math.PI/180)}function b(e){return f.fromJSON(e.toLowerCase())||null}function T(e){if(e&&"object"==typeof e&&!(0,s.b0)(e))return 1;const t=R(e);return t>1e5?1:t}function I(e){return R(e)>=(e instanceof s.O?(t=e,t&&((0,s.aX)(t)||t===n)?s.aU:t&&((0,s.aY)(t)||t===o)?s.aV:s.aW).metersPerDegree:1e5)?"meters":E(e);var t}function R(e,t=s.aW.metersPerDegree){return function(e,t=!1){let r,i,l=null;if(null!=e&&("object"==typeof e?(r=e.wkid,i=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(i=e)),r){if((0,s.aZ)(r))return s.aU.metersPerDegree;if((0,s.a_)(r))return s.aV.metersPerDegree;l=d.values[d[r]],!l&&t&&y.has(r)&&(l=p)}else if(i)if(-1!==i.search(/^PROJCS/i)){const e=h.exec(i);e&&e[1]&&(l=parseFloat(e[1].split(",")[1]))}else if(-1!==i.search(/^GEOCCS/i)){const e=m.exec(i);e&&e[1]&&(l=parseFloat(e[1].split(",")[1]))}return l}(e,!0)||t}function E(e){let t,r,s=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)s=d.units[d[t]];else if(r&&-1!==r.search(/^PROJCS/i)){let e=h.exec(r);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),s=e&&e[1])}return s?b(s):null}const P={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},M={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},O=(0,s.aL)()(P),D=(0,s.aL)()(M);(0,s.aL)()({...P,...M})}}]);