/*! For license information please see 09a94d1c5bb1347985f1372a9a9d2785.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[47242],{47242:(e,t,o)=>{o.r(t),o.d(t,{arcgis_popup_color_button:()=>i});var r=o(28384),n=o(87247),s=o(66716),l=o(81068);o(27010),o(18869);const i=class{constructor(e){(0,r.r)(this,e),this.arcgisPopupColorButtonChange=(0,r.c)(this,"arcgisPopupColorButtonChange",7),this.arcgisPopupColorButtonBeforeOpen=(0,r.c)(this,"arcgisPopupColorButtonBeforeOpen",7),this.resizeObserver=new ResizeObserver((()=>{(0,r.f)(this.hostElement)})),this.handleClick=async()=>{const{popoverReferenceElement:e,popoverNode:t,buttonNode:o,colors:n,strings:s,esriColor:l,esriLang:i}=this;if(t)this.onPopoverClose();else if(1===n.length){this.arcgisPopupColorButtonBeforeOpen.emit(),this.selected=!0;const t=document.createElement("arcgis-popup-color-popover");t.heading=s.selectColor,t.intlDone=s.done,t.label=s.selectColor,t.hexColor=n[0].toHex(),t.popoverProps={placement:"leading-start",offsetDistance:1,offsetSkidding:52,pointerDisabled:"true",popoverWidth:315,refElement:"string"==typeof e?document.getElementById(e):e},t.addEventListener("arcgisPopupColorPopoverClose",(()=>{this.popoverNode=null})),t.addEventListener("arcgisPopupColorPopoverChange",(({detail:e})=>{this.colors[0]=new l(e),this.chartMediaInfo.value.colors=i.clone(this.colors),this.arcgisPopupColorButtonChange.emit(i.clone(this.colors)),(0,r.f)(this.hostElement)})),document.body.appendChild(t),t.setOpen(!0),this.popoverNode=t}else this.arcgisPopupColorButtonBeforeOpen.emit(),this.selected=!0,document.createElement("div").className="symbol-styler-div",this.popoverNode=this.createSymbolStylerPopover({referenceElement:"string"==typeof e?document.getElementById(e):e}),this.popoverNode.addEventListener("arcgisPopupStylerPopoverClose",(()=>{this.onPopoverClose(),setTimeout((()=>o.focus()),300)})),this.popoverNode.addEventListener("arcgisPopupStylerPopoverDisconnected",(()=>{this.onPopoverClose()})),this.symbolStylerWatchScaleHandle=await this.buildSymbolStylerForRamp({popoverNode:this.popoverNode,onChange:()=>{var e;(null===(e=this.chartMediaInfo)||void 0===e?void 0:e.value).colors=i.clone(this.colors),this.arcgisPopupColorButtonChange.emit(i.clone(this.colors))}})},this.popoverReferenceElement=void 0,this.chartMediaInfo=void 0,this.colors=void 0,this.selected=!1,this.symbolNodeWidth=void 0}async setFocus(){var e;null===(e=this.buttonNode)||void 0===e||e.focus()}async closePopover(){this.onPopoverClose()}async componentWillLoad(){this.layer=n.p.layer,this.mapView=n.p.mapView,this.strings=n.p.strings,this.portal=n.p.portal,this.popupTemplate=n.p.popupTemplate;const[e,t,o,r]=await(0,s.l)(["esri/core/lang","esri/Color","esri/smartMapping/symbology/pieChart","esri/symbols/SimpleFillSymbol"]);this.esriLang=e,this.esriColor=t,this.pieChartSchemes=o,this.SimpleFillSymbol=r}async componentDidLoad(){(0,r.f)(this.hostElement),this.resizeObserver.observe(this.buttonNode)}disconnectedCallback(){this.resizeObserver.unobserve(this.buttonNode)}render(){const{strings:e}=this;return(0,r.h)(r.H,null,(0,r.h)("calcite-label",{id:"color-button-label",scale:"s"},e.color,this.renderButton()))}renderButton(){const{colors:e,selected:t}=this;let o=(null==e?void 0:e.length)?e.filter(((e,t)=>t<10)).map(((t,o)=>{var n;return(0,r.h)("div",{key:`color-button-icon-${o}`,class:"color-icon-section",style:{width:95/Math.min(10,Math.min(10,e.length))+"%",backgroundColor:`${null!==(n=null==t?void 0:t.toHex())&&void 0!==n?n:"#ffffff"}`}})})):null;const n={"color-selector":!0,selected:t};return(0,r.h)("div",{class:n,onClick:this.handleClick,role:"button",tabIndex:0,"aria-labelledby":"color-button-label","aria-haspopup":"true","aria-expanded":!!t,ref:e=>{this.buttonNode=e,e.addEventListener("keyup",(e=>{" "!==e.key&&"Enter"!==e.key||this.handleClick()}))}},(0,r.h)("div",{class:"color-icon","aria-hidden":"true"},o),(0,r.h)("div",{class:"color-edit-button"},(0,r.h)("calcite-icon",{scale:"s",icon:"pencil"})))}onPopoverClose(){var e;1===this.colors.length?this.popoverNode&&document.body.removeChild(this.popoverNode):(null===(e=this.symbolStylerWatchScaleHandle)||void 0===e||e.remove(),this.popoverNode&&this.removeSymbolStylerPopover(this.popoverNode)),this.selected=!1,this.popoverNode=void 0}createSymbolStylerPopover(e){const{referenceElement:t}=e,o=document.createElement("arcgis-popup-styler-popover");return o.referenceElement=t,document.body.appendChild(o),o.setOpen(!0),o.reposition(),o}removeSymbolStylerPopover(e){var t;(null==e?void 0:e.parentNode)&&(e.open=!1,null===(t=e.parentNode)||void 0===t||t.removeChild(e))}async createSymbolStylerElement(e){const t=document.createElement("arcgis-symbol-styler");return t.style="max-height: max(calc(100vh - 200px), 300px)",t.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:"rtl"===(0,l.g)(this.hostElement)?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await e.getPopoverRefElement()},t}async buildSymbolStylerForRamp(e){const{mapView:t,portal:o,colors:n,strings:s,esriLang:l}=this,{popoverNode:i}=e,a=this.esriLang.clone(n.filter(((e,t)=>t<10))),c=this.pieChartSchemes.getSchemes({basemap:t.map.basemap,geometryType:"polygon",numColors:Math.min(10,n.length)}),u=this.getColorRampsWithSchemes(c).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),p=await this.createSymbolStylerElement(i),d=p.edit(new this.SimpleFillSymbol,{portal:o,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:u,parts:{transparency:!1}}},fill:{color:a.reverse()}});p.stringOverrides={fillColor:s.color},p.addEventListener("arcgisSymbolStylerEdit",(({detail:{info:{fill:e}}})=>{var t;const o=l.clone(e.color).reverse();if(o.length<this.colors.length)for(let e=o.length;e<this.colors.length;e++)o.push(this.esriLang.clone(o[e%10]));(null===(t=this.chartMediaInfo)||void 0===t?void 0:t.value).colors=o,this.colors=o,(0,r.f)(this.hostElement),this.arcgisPopupColorButtonChange.emit(this.esriLang.clone(this.colors))})),i.addStyler(p),await d}getColorRampsWithSchemes(e){const t=[e.primaryScheme].concat(e.secondarySchemes),o=[];return t.forEach((e=>{o.push({colors:e.colors,scheme:e})})),o}get hostElement(){return(0,r.d)(this)}};i.style=".color-selector{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.color-selector:hover{box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3)}.color-selector:active{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}.color-selector:focus{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3);outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.color-selector.selected{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}.color-icon-section{height:16px;display:inline-block}.color-icon{width:100%;height:16px;overflow:hidden;border-radius:0}.color-icon.transparent{height:15px;width:100%}.color-icon.transparent svg{height:15px;width:95%;stroke:#e0e0e0;stroke-width:1px}.color-edit-button{padding:1px;height:18px;width:18px;border:none;cursor:pointer;color:var(--calcite-ui-icon-color)}.color-edit-button:focus{outline:none}"},27010:(e,t,o)=>{o.d(t,{c:()=>i});var r=o(28384);const n=e=>!("isConnected"in e)||e.isConnected,s=((e,t)=>{let o;return(...e)=>{o&&clearTimeout(o),o=setTimeout((()=>{o=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(n))})(...e)}),2e3)}})(),l=e=>"function"==typeof e?e():e,i=(e,t)=>{const o=((e,t=((e,t)=>e!==t))=>{const o=l(e);let r=new Map(Object.entries(null!=o?o:{}));const n={dispose:[],get:[],set:[],reset:[]},s=()=>{var t;r=new Map(Object.entries(null!==(t=l(e))&&void 0!==t?t:{})),n.reset.forEach((e=>e()))},i=e=>(n.get.forEach((t=>t(e))),r.get(e)),a=(e,o)=>{const s=r.get(e);t(o,s,e)&&(r.set(e,o),n.set.forEach((t=>t(e,o,s))))},c="undefined"==typeof Proxy?{}:new Proxy(o,{get:(e,t)=>i(t),ownKeys:e=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>r.has(t),set:(e,t,o)=>(a(t,o),!0)}),u=(e,t)=>(n[e].push(t),()=>{((e,t)=>{const o=e.indexOf(t);o>=0&&(e[o]=e[e.length-1],e.length--)})(n[e],t)});return{state:c,get:i,set:a,on:u,onChange:(t,o)=>{const r=u("set",((e,r)=>{e===t&&o(r)})),n=u("reset",(()=>o(l(e)[t])));return()=>{r(),n()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(u("set",t.set)),t.get&&e.push(u("get",t.get)),t.reset&&e.push(u("reset",t.reset)),t.dispose&&e.push(u("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{n.dispose.forEach((e=>e())),s()},reset:s,forceUpdate:e=>{const t=r.get(e);n.set.forEach((o=>o(e,t,t)))}}})(e,t);return o.use((()=>{if("function"!=typeof r.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const o=(0,r.g)();o&&((e,t,o)=>{const r=e.get(t);r?r.includes(o)||r.push(o):e.set(t,[o])})(e,t,o)},set:t=>{const o=e.get(t);o&&e.set(t,o.filter(r.f)),s(e)},reset:()=>{e.forEach((e=>e.forEach(r.f))),s(e)}}})()),o}},81068:(e,t,o)=>{o.d(t,{C:()=>i,a:()=>u,f:()=>a,g:()=>l,l:()=>s});var r=o(66716),n=o(18869);const s=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function l(e){return function(e,t,o){const r=(0,n.c)(e,"[dir]");return r?r.getAttribute("dir"):"ltr"}(e)}const i={rtl:"arcgis--rtl"};async function a(e,t){const{api:o,type:n,places:s}=t||{};if(4===o){const[t]=await(0,r.l)(["esri/intl"]),o=t.convertNumberFormatToIntlOptions({places:s,style:n,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},o),{style:n}))}const[l]=await(0,r.l)(["dojo/number"]);return l.format(e,{type:n,places:s,pattern:null==t?void 0:t.pattern})}const c={};function u(e){const t=document.documentElement.lang;return c[t]||(c[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[t].format(e)}},66716:(e,t,o)=>{o.d(t,{a:()=>r,c:()=>s,e:()=>l,g:()=>n,l:()=>i});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},o.exports),o.exports}var l=s((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},o="4.24",r="next";function n(e){if(e.toLowerCase()===r)return r;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function s(e){return void 0===e&&(e=o),"https://js.arcgis.com/".concat(e,"/")}function l(e){return!e||n(e)?function(e){void 0===e&&(e=o);var t=s(e),l=n(e);if(l!==r&&3===l.major){var i=l.minor<=10?"js/":"";return"".concat(t).concat(i,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function i(e,t){var o=l(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(o);return r||function(e,t){if(t){var o=document.querySelector(t);o.parentNode.insertBefore(e,o)}else document.head.appendChild(e)}(r=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(o),t),r}var a={};function c(e,t,o){var r;o&&(r=function(e,t){var o=function(r){t(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",o,!1)};return e.addEventListener("error",o,!1),o}(e,o));var n=function(){t(e),e.removeEventListener("load",n,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",n,!1)}function u(){return document.querySelector("script[data-esri-loader]")}function p(){var e=window.require;return e&&e.on}function d(e){void 0===e&&(e={});var o={};[a,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}));var r=o.version,n=o.url||s(r);return new t.Promise((function(e,t){var s=u();if(s){var l=s.getAttribute("src");l!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(l,")."))):p()?e(s):c(s,e,t)}else if(p())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=o.css;a&&i(!0===a?r:a,o.insertCssBefore),c(s=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(n),(function(){s.setAttribute("data-esri-loader","loaded"),e(s)}),t),document.body.appendChild(s)}}))}function h(e){return new t.Promise((function(t,o){var r=window.require.on("error",o);window.require(e,(function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];r.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),p())return h(e);var o=u(),r=o&&o.getAttribute("src");return!t.url&&r&&(t.url=r),d(t).then((function(){return h(e)}))},e.getScript=u,e.isLoaded=p,e.loadScript=d,e.setDefaultOptions=function(e){void 0===e&&(e={}),a=e},e.loadCss=i,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const i=async(e,t)=>(await l.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},87247:(e,t,o)=>{function r(e){e.layer=null,e.mapView=null,e.portal=null,e.config=null,e.strings=null,e.currentLanguage=null,e.currentLanguageIntl=null,e.serviceType=null,e.popupTemplate=null,e.layerHasAttachment=null,e.layerHasET=null,e.layerHasAttributes=null,e.layerHasCharts=null,e.layerHasImages=null,e.layerHasText=null,e.layerDisplayType=null,e.supportsArcade=null,e.layerHasRelatedRecords=!1}o.d(t,{c:()=>r,p:()=>n});const n=(0,o(27010).c)({layer:null,mapView:null,portal:null,config:null,strings:null,currentLanguage:null,currentLanguageIntl:null,serviceType:null,popupTemplate:null,layerHasAttachment:null,layerHasET:null,layerHasAttributes:null,layerHasCharts:null,layerHasImages:null,layerHasText:null,layerDisplayType:null,supportsArcade:null,layerHasRelatedRecords:!1}).state}}]);