"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[16301],{16301:(e,t,i)=>{i.d(t,{C:()=>Se,M:()=>d,a:()=>o,b:()=>U,c:()=>_,d:()=>b,e:()=>p,f:()=>v,g:()=>T,h:()=>c,i:()=>E,n:()=>G,o:()=>S,r:()=>L,t:()=>l,u:()=>w,w:()=>z});var r=i(5343),s=i(47817),n=i(19476);class o{constructor(e,t){this.x=e,this.y=t}clone(){return new o(this.x,this.y)}equals(e,t){return e===this.x&&t===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,t){this.x=e,this.y=t}normalize(){const e=this.x,t=this.y,i=Math.sqrt(e*e+t*t);this.x/=i,this.y/=i}rightPerpendicular(){const e=this.x;this.x=this.y,this.y=-e}move(e,t){this.x+=e,this.y+=t}assign(e){this.x=e.x,this.y=e.y}assignAdd(e,t){this.x=e.x+t.x,this.y=e.y+t.y}assignSub(e,t){this.x=e.x-t.x,this.y=e.y-t.y}rotate(e,t){const i=this.x,r=this.y;this.x=i*e-r*t,this.y=i*t+r*e}scale(e){this.x*=e,this.y*=e}length(){const e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}static distance(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}static add(e,t){return new o(e.x+t.x,e.y+t.y)}static sub(e,t){return new o(e.x-t.x,e.y-t.y)}}class l{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.width=i,this.height=r}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}}const a=128/Math.PI,h=256/360;function u(e,t){return(e%=t)>=0?e:e+t}function c(e){return u(e*a,256)}function d(e){return u(e*h,256)}function g(e,t,i){return e>=t&&e<=i||e>=i&&e<=t}class x{constructor(e,t,i){this.ratio=e,this.x=t,this.y=i}}class _{constructor(e,t,i,s=8,n=8){this.lines=[],this.starts=[],this.validateTessellation=!0,this.pixelRatio=s,this.pixelMargin=n,this.tileSize=r.o*s,this.dz=e,this.yPos=t,this.xPos=i}setPixelMargin(e){e!==this.pixelMargin&&(this.pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this.finalRatio=this.tileSize/e*(1<<this.dz);let t=this.pixelRatio*this.pixelMargin;t/=this.finalRatio;const i=e>>this.dz;t>i&&(t=i),this.margin=t,this.xmin=i*this.xPos-t,this.ymin=i*this.yPos-t,this.xmax=this.xmin+i+2*t,this.ymax=this.ymin+i+2*t}reset(e){this.type=e,this.lines=[],this.starts=[],this.line=null,this.start=0}moveTo(e,t){this._pushLine(),this._prevIsIn=this._isIn(e,t),this._moveTo(e,t,this._prevIsIn),this._prevPt=new o(e,t),this._firstPt=new o(e,t),this._dist=0}lineTo(e,t){const i=this._isIn(e,t),r=new o(e,t),s=o.distance(this._prevPt,r);let n,l,a,h,u,c,d,g;if(i)this._prevIsIn?this._lineTo(e,t,!0):(n=this._prevPt,l=r,a=this._intersect(l,n),this.start=this._dist+s*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(l.x,l.y,!0));else if(this._prevIsIn)l=this._prevPt,n=r,a=this._intersect(l,n),this._lineTo(a.x,a.y,!0),this._lineTo(n.x,n.y,!1);else{const e=this._prevPt,t=r;if(e.x<=this.xmin&&t.x<=this.xmin||e.x>=this.xmax&&t.x>=this.xmax||e.y<=this.ymin&&t.y<=this.ymin||e.y>=this.ymax&&t.y>=this.ymax)this._lineTo(t.x,t.y,!1);else{const i=[];if((e.x<this.xmin&&t.x>this.xmin||e.x>this.xmin&&t.x<this.xmin)&&(h=(this.xmin-e.x)/(t.x-e.x),g=e.y+h*(t.y-e.y),g<=this.ymin?c=!1:g>=this.ymax?c=!0:i.push(new x(h,this.xmin,g))),(e.x<this.xmax&&t.x>this.xmax||e.x>this.xmax&&t.x<this.xmax)&&(h=(this.xmax-e.x)/(t.x-e.x),g=e.y+h*(t.y-e.y),g<=this.ymin?c=!1:g>=this.ymax?c=!0:i.push(new x(h,this.xmax,g))),(e.y<this.ymin&&t.y>this.ymin||e.y>this.ymin&&t.y<this.ymin)&&(h=(this.ymin-e.y)/(t.y-e.y),d=e.x+h*(t.x-e.x),d<=this.xmin?u=!1:d>=this.xmax?u=!0:i.push(new x(h,d,this.ymin))),(e.y<this.ymax&&t.y>this.ymax||e.y>this.ymax&&t.y<this.ymax)&&(h=(this.ymax-e.y)/(t.y-e.y),d=e.x+h*(t.x-e.x),d<=this.xmin?u=!1:d>=this.xmax?u=!0:i.push(new x(h,d,this.ymax))),0===i.length)u?c?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):c?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(i.length>1&&i[0].ratio>i[1].ratio)this.start=this._dist+s*i[1].ratio,this._lineTo(i[1].x,i[1].y,!0),this._lineTo(i[0].x,i[0].y,!0);else{this.start=this._dist+s*i[0].ratio;for(let e=0;e<i.length;e++)this._lineTo(i[e].x,i[e].y,!0)}this._lineTo(t.x,t.y,!1)}}this._dist+=s,this._prevIsIn=i,this._prevPt=r}close(){if(this.line.length>2){const e=this._firstPt,t=this._prevPt;e.x===t.x&&e.y===t.y||this.lineTo(e.x,e.y);const i=this.line;let r=i.length;for(;r>=4&&(i[0].x===i[1].x&&i[0].x===i[r-2].x||i[0].y===i[1].y&&i[0].y===i[r-2].y);)i.pop(),i[0].x=i[r-2].x,i[0].y=i[r-2].y,--r}}result(e=!0){return this._pushLine(),0===this.lines.length?null:(3===this.type&&e&&m.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)}resultWithStarts(){if(2!==this.type)throw new Error("Only valid for lines");this._pushLine();const e=this.lines,t=e.length;if(0===t)return null;const i=[];for(let r=0;r<t;r++)i.push({line:e[r],start:this.starts[r]||0});return i}_isIn(e,t){return e>=this.xmin&&e<=this.xmax&&t>=this.ymin&&t<=this.ymax}_intersect(e,t){let i,r,s;if(t.x>=this.xmin&&t.x<=this.xmax)r=t.y<=this.ymin?this.ymin:this.ymax,s=(r-e.y)/(t.y-e.y),i=e.x+s*(t.x-e.x);else if(t.y>=this.ymin&&t.y<=this.ymax)i=t.x<=this.xmin?this.xmin:this.xmax,s=(i-e.x)/(t.x-e.x),r=e.y+s*(t.y-e.y);else{r=t.y<=this.ymin?this.ymin:this.ymax,i=t.x<=this.xmin?this.xmin:this.xmax;const n=(i-e.x)/(t.x-e.x),o=(r-e.y)/(t.y-e.y);n<o?(s=n,r=e.y+n*(t.y-e.y)):(s=o,i=e.x+o*(t.x-e.x))}return this._r=s,new o(i,r)}_pushLine(){this.line&&(1===this.type?this.line.length>0&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?this.line.length>1&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&this.line.length>3&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0}_moveTo(e,t,i){3!==this.type?i&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new o(e,t))):(i||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new o(e,t)),this._is_h=!1,this._is_v=!1)}_lineTo(e,t,i){let r,s;if(3!==this.type)if(i){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.length>0&&(r=this.line[this.line.length-1],r.equals(e,t)))return;this.line.push(new o(e,t))}else this.line&&this.line.length>0&&this._pushLine();else if(i||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line&&this.line.length>0){r=this.line[this.line.length-1];const i=r.x===e,n=r.y===t;if(i&&n)return;this._is_h&&i||this._is_v&&n?(r.x=e,r.y=t,s=this.line[this.line.length-2],s.x===e&&s.y===t?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(s=this.line[this.line.length-2],this._is_h=s.x===e,this._is_v=s.y===t)):(this._is_h=s.x===e,this._is_v=s.y===t)):(this.line.push(new o(e,t)),this._is_h=i,this._is_v=n)}else this.line.push(new o(e,t))}}class p{setExtent(e){this._ratio=4096===e?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this.lines=[],this.line=null}moveTo(e,t){this.line&&this.lines.push(this.line),this.line=[];const i=this._ratio;this.line.push(new o(e*i,t*i))}lineTo(e,t){const i=this._ratio;this.line.push(new o(e*i,t*i))}close(){const e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:this.lines}}class m{static simplify(e,t,i){if(!i)return;const r=-t,s=e+t,n=-t,o=e+t,l=[],a=[],h=i.length;for(let e=0;e<h;++e){const t=i[e];if(!t||t.length<2)continue;let h,u=t[0];const c=t.length;for(let i=1;i<c;++i)h=t[i],u.x===h.x&&(u.x<=r&&(u.y>h.y?(l.push(e),l.push(i),l.push(0),l.push(-1)):(a.push(e),a.push(i),a.push(0),a.push(-1))),u.x>=s&&(u.y<h.y?(l.push(e),l.push(i),l.push(1),l.push(-1)):(a.push(e),a.push(i),a.push(1),a.push(-1)))),u.y===h.y&&(u.y<=n&&(u.x<h.x?(l.push(e),l.push(i),l.push(2),l.push(-1)):(a.push(e),a.push(i),a.push(2),a.push(-1))),u.y>=o&&(u.x>h.x?(l.push(e),l.push(i),l.push(3),l.push(-1)):(a.push(e),a.push(i),a.push(3),a.push(-1)))),u=h}if(0===l.length||0===a.length)return;m.fillParent(i,a,l),m.fillParent(i,l,a);const u=[];m.calcDeltas(u,a,l),m.calcDeltas(u,l,a),m.addDeltas(u,i)}static fillParent(e,t,i){const r=i.length,s=t.length;for(let n=0;n<s;n+=4){const s=t[n],o=t[n+1],l=t[n+2],a=e[s][o-1],h=e[s][o];let u=8092,c=-1;for(let t=0;t<r;t+=4){if(i[t+2]!==l)continue;const r=i[t],s=i[t+1],n=e[r][s-1],o=e[r][s];switch(l){case 0:case 1:if(g(a.y,n.y,o.y)&&g(h.y,n.y,o.y)){const e=Math.abs(o.y-n.y);e<u&&(u=e,c=t)}break;case 2:case 3:if(g(a.x,n.x,o.x)&&g(h.x,n.x,o.x)){const e=Math.abs(o.x-n.x);e<u&&(u=e,c=t)}}}t[n+3]=c}}static calcDeltas(e,t,i){const r=t.length;for(let s=0;s<r;s+=4){const r=[],n=m.calcDelta(s,t,i,r);e.push(t[s]),e.push(t[s+1]),e.push(t[s+2]),e.push(n)}}static calcDelta(e,t,i,r){const s=t[e+3];if(-1===s)return 0;const n=r.length;return n>1&&r[n-2]===s?0:(r.push(s),m.calcDelta(s,i,t,r)+1)}static addDeltas(e,t){const i=e.length;let r=0;for(let t=0;t<i;t+=4){const i=e[t+3];i>r&&(r=i)}for(let s=0;s<i;s+=4){const i=t[e[s]],n=e[s+1],o=r-e[s+3];switch(e[s+2]){case 0:i[n-1].x-=o,i[n].x-=o,1===n&&(i[i.length-1].x-=o),n===i.length-1&&(i[0].x-=o);break;case 1:i[n-1].x+=o,i[n].x+=o,1===n&&(i[i.length-1].x+=o),n===i.length-1&&(i[0].x+=o);break;case 2:i[n-1].y-=o,i[n].y-=o,1===n&&(i[i.length-1].y-=o),n===i.length-1&&(i[0].y-=o);break;case 3:i[n-1].y+=o,i[n].y+=o,1===n&&(i[i.length-1].y+=o),n===i.length-1&&(i[0].y+=o)}}}}var y=(0,n.o)((function(e){var t,i;t=function(){var e={DEBUG:!1,assert:function(t,i){if(e.DEBUG&&!t)throw new Error("Assertion failed"+(i?": "+i:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};return e.geom.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.geom.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.geom.edgeEval=function(t,i,r){e.assert(e.geom.vertLeq(t,i)&&e.geom.vertLeq(i,r));var s=i.s-t.s,n=r.s-i.s;return s+n>0?s<n?i.t-t.t+(t.t-r.t)*(s/(s+n)):i.t-r.t+(r.t-t.t)*(n/(s+n)):0},e.geom.edgeSign=function(t,i,r){e.assert(e.geom.vertLeq(t,i)&&e.geom.vertLeq(i,r));var s=i.s-t.s,n=r.s-i.s;return s+n>0?(i.t-r.t)*s+(i.t-t.t)*n:0},e.geom.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.geom.transEval=function(t,i,r){e.assert(e.geom.transLeq(t,i)&&e.geom.transLeq(i,r));var s=i.t-t.t,n=r.t-i.t;return s+n>0?s<n?i.s-t.s+(t.s-r.s)*(s/(s+n)):i.s-r.s+(r.s-t.s)*(n/(s+n)):0},e.geom.transSign=function(t,i,r){e.assert(e.geom.transLeq(t,i)&&e.geom.transLeq(i,r));var s=i.t-t.t,n=r.t-i.t;return s+n>0?(i.s-r.s)*s+(i.s-t.s)*n:0},e.geom.edgeGoesLeft=function(t){return e.geom.vertLeq(t.dst(),t.org)},e.geom.edgeGoesRight=function(t){return e.geom.vertLeq(t.org,t.dst())},e.geom.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.geom.vertCCW=function(e,t,i){return e.s*(t.t-i.t)+t.s*(i.t-e.t)+i.s*(e.t-t.t)>=0},e.geom.interpolate_=function(e,t,i,r){return(e=e<0?0:e)<=(i=i<0?0:i)?0===i?(t+r)/2:t+e/(e+i)*(r-t):r+i/(e+i)*(t-r)},e.geom.edgeIntersect=function(t,i,r,s,n){var o,l,a;e.geom.vertLeq(t,i)||(a=t,t=i,i=a),e.geom.vertLeq(r,s)||(a=r,r=s,s=a),e.geom.vertLeq(t,r)||(a=t,t=r,r=a,a=i,i=s,s=a),e.geom.vertLeq(r,i)?e.geom.vertLeq(i,s)?((o=e.geom.edgeEval(t,r,i))+(l=e.geom.edgeEval(r,i,s))<0&&(o=-o,l=-l),n.s=e.geom.interpolate_(o,r.s,l,i.s)):((o=e.geom.edgeSign(t,r,i))+(l=-e.geom.edgeSign(t,s,i))<0&&(o=-o,l=-l),n.s=e.geom.interpolate_(o,r.s,l,s.s)):n.s=(r.s+i.s)/2,e.geom.transLeq(t,i)||(a=t,t=i,i=a),e.geom.transLeq(r,s)||(a=r,r=s,s=a),e.geom.transLeq(t,r)||(a=t,t=r,r=a,a=i,i=s,s=a),e.geom.transLeq(r,i)?e.geom.transLeq(i,s)?((o=e.geom.transEval(t,r,i))+(l=e.geom.transEval(r,i,s))<0&&(o=-o,l=-l),n.t=e.geom.interpolate_(o,r.t,l,i.t)):((o=e.geom.transSign(t,r,i))+(l=-e.geom.transSign(t,s,i))<0&&(o=-o,l=-l),n.t=e.geom.interpolate_(o,r.t,l,s.t)):n.t=(r.t+i.t)/2},e.mesh={},e.mesh.makeEdge=function(t){var i=e.mesh.makeEdgePair_(t.eHead);return e.mesh.makeVertex_(i,t.vHead),e.mesh.makeVertex_(i.sym,t.vHead),e.mesh.makeFace_(i,t.fHead),i},e.mesh.meshSplice=function(t,i){var r=!1,s=!1;t!==i&&(i.org!==t.org&&(s=!0,e.mesh.killVertex_(i.org,t.org)),i.lFace!==t.lFace&&(r=!0,e.mesh.killFace_(i.lFace,t.lFace)),e.mesh.splice_(i,t),s||(e.mesh.makeVertex_(i,t.org),t.org.anEdge=t),r||(e.mesh.makeFace_(i,t.lFace),t.lFace.anEdge=t))},e.mesh.deleteEdge=function(t){var i=t.sym,r=!1;t.lFace!==t.rFace()&&(r=!0,e.mesh.killFace_(t.lFace,t.rFace())),t.oNext===t?e.mesh.killVertex_(t.org,null):(t.rFace().anEdge=t.oPrev(),t.org.anEdge=t.oNext,e.mesh.splice_(t,t.oPrev()),r||e.mesh.makeFace_(t,t.lFace)),i.oNext===i?(e.mesh.killVertex_(i.org,null),e.mesh.killFace_(i.lFace,null)):(t.lFace.anEdge=i.oPrev(),i.org.anEdge=i.oNext,e.mesh.splice_(i,i.oPrev())),e.mesh.killEdge_(t)},e.mesh.addEdgeVertex=function(t){var i=e.mesh.makeEdgePair_(t),r=i.sym;return e.mesh.splice_(i,t.lNext),i.org=t.dst(),e.mesh.makeVertex_(r,i.org),i.lFace=r.lFace=t.lFace,i},e.mesh.splitEdge=function(t){var i=e.mesh.addEdgeVertex(t).sym;return e.mesh.splice_(t.sym,t.sym.oPrev()),e.mesh.splice_(t.sym,i),t.sym.org=i.org,i.dst().anEdge=i.sym,i.sym.lFace=t.rFace(),i.winding=t.winding,i.sym.winding=t.sym.winding,i},e.mesh.connect=function(t,i){var r=!1,s=e.mesh.makeEdgePair_(t),n=s.sym;return i.lFace!==t.lFace&&(r=!0,e.mesh.killFace_(i.lFace,t.lFace)),e.mesh.splice_(s,t.lNext),e.mesh.splice_(n,i),s.org=t.dst(),n.org=i.org,s.lFace=n.lFace=t.lFace,t.lFace.anEdge=n,r||e.mesh.makeFace_(s,t.lFace),s},e.mesh.zapFace=function(t){var i,r=t.anEdge,s=r.lNext;do{if(s=(i=s).lNext,i.lFace=null,null===i.rFace()){i.oNext===i?e.mesh.killVertex_(i.org,null):(i.org.anEdge=i.oNext,e.mesh.splice_(i,i.oPrev()));var n=i.sym;n.oNext===n?e.mesh.killVertex_(n.org,null):(n.org.anEdge=n.oNext,e.mesh.splice_(n,n.oPrev())),e.mesh.killEdge_(i)}}while(i!==r);var o=t.prev,l=t.next;l.prev=o,o.next=l},e.mesh.meshUnion=function(e,t){var i=e.fHead,r=e.vHead,s=e.eHead,n=t.fHead,o=t.vHead,l=t.eHead;return n.next!==n&&(i.prev.next=n.next,n.next.prev=i.prev,n.prev.next=i,i.prev=n.prev),o.next!==o&&(r.prev.next=o.next,o.next.prev=r.prev,o.prev.next=r,r.prev=o.prev),l.next!==l&&(s.sym.next.sym.next=l.next,l.next.sym.next=s.sym.next,l.sym.next.sym.next=s,s.sym.next=l.sym.next),e},e.mesh.deleteMesh=function(e){},e.mesh.makeEdgePair_=function(t){var i=new e.GluHalfEdge,r=new e.GluHalfEdge,s=t.sym.next;return r.next=s,s.sym.next=i,i.next=t,t.sym.next=r,i.sym=r,i.oNext=i,i.lNext=r,r.sym=i,r.oNext=r,r.lNext=i,i},e.mesh.splice_=function(e,t){var i=e.oNext,r=t.oNext;i.sym.lNext=t,r.sym.lNext=e,e.oNext=r,t.oNext=i},e.mesh.makeVertex_=function(t,i){var r=i.prev,s=new e.GluVertex(i,r);r.next=s,i.prev=s,s.anEdge=t;var n=t;do{n.org=s,n=n.oNext}while(n!==t)},e.mesh.makeFace_=function(t,i){var r=i.prev,s=new e.GluFace(i,r);r.next=s,i.prev=s,s.anEdge=t,s.inside=i.inside;var n=t;do{n.lFace=s,n=n.lNext}while(n!==t)},e.mesh.killEdge_=function(e){var t=e.next,i=e.sym.next;t.sym.next=i,i.sym.next=t},e.mesh.killVertex_=function(e,t){var i=e.anEdge,r=i;do{r.org=t,r=r.oNext}while(r!==i);var s=e.prev,n=e.next;n.prev=s,s.next=n},e.mesh.killFace_=function(e,t){var i=e.anEdge,r=i;do{r.lFace=t,r=r.lNext}while(r!==i);var s=e.prev,n=e.next;n.prev=s,s.next=n},e.normal={},e.normal.S_UNIT_X_=1,e.normal.S_UNIT_Y_=0,e.normal.projectPolygon=function(t,i,r,s){var n=!1,o=[i,r,s];0===i&&0===r&&0===s&&(e.normal.computeNormal_(t,o),n=!0);var l,a=e.normal.longAxis_(o),h=t.mesh.vHead;if(e.TRUE_PROJECT){e.normal.normalize_(o);var u=[0,0,0],c=[0,0,0];u[a]=0,u[(a+1)%3]=e.normal.S_UNIT_X_,u[(a+2)%3]=e.normal.S_UNIT_Y_;var d=e.normal.dot_(u,o);for(u[0]-=d*o[0],u[1]-=d*o[1],u[2]-=d*o[2],e.normal.normalize_(u),c[0]=o[1]*u[2]-o[2]*u[1],c[1]=o[2]*u[0]-o[0]*u[2],c[2]=o[0]*u[1]-o[1]*u[0],e.normal.normalize_(c),l=h.next;l!==h;l=l.next)l.s=e.normal.dot_(l.coords,u),l.t=e.normal.dot_(l.coords,c)}else{var g=(a+1)%3,x=(a+2)%3,_=o[a]>0?1:-1;for(l=h.next;l!==h;l=l.next)l.s=l.coords[g],l.t=_*l.coords[x]}n&&e.normal.checkOrientation_(t)},e.normal.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.normal.normalize_=function(t){var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];e.assert(i>0),i=Math.sqrt(i),t[0]/=i,t[1]/=i,t[2]/=i},e.normal.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.normal.computeNormal_=function(t,i){var r,s=[-2*e.GLU_TESS_MAX_COORD,-2*e.GLU_TESS_MAX_COORD,-2*e.GLU_TESS_MAX_COORD],n=[2*e.GLU_TESS_MAX_COORD,2*e.GLU_TESS_MAX_COORD,2*e.GLU_TESS_MAX_COORD],o=[],l=[],a=t.mesh.vHead;for(r=a.next;r!==a;r=r.next)for(var h=0;h<3;++h){var u=r.coords[h];u<n[h]&&(n[h]=u,l[h]=r),u>s[h]&&(s[h]=u,o[h]=r)}var c=0;if(s[1]-n[1]>s[0]-n[0]&&(c=1),s[2]-n[2]>s[c]-n[c]&&(c=2),n[c]>=s[c])return i[0]=0,i[1]=0,void(i[2]=1);var d=0,g=l[c],x=o[c],_=[0,0,0],p=[g.coords[0]-x.coords[0],g.coords[1]-x.coords[1],g.coords[2]-x.coords[2]],m=[0,0,0];for(r=a.next;r!==a;r=r.next){m[0]=r.coords[0]-x.coords[0],m[1]=r.coords[1]-x.coords[1],m[2]=r.coords[2]-x.coords[2],_[0]=p[1]*m[2]-p[2]*m[1],_[1]=p[2]*m[0]-p[0]*m[2],_[2]=p[0]*m[1]-p[1]*m[0];var y=_[0]*_[0]+_[1]*_[1]+_[2]*_[2];y>d&&(d=y,i[0]=_[0],i[1]=_[1],i[2]=_[2])}d<=0&&(i[0]=i[1]=i[2]=0,i[e.normal.longAxis_(p)]=1)},e.normal.checkOrientation_=function(e){for(var t=0,i=e.mesh.fHead,r=i.next;r!==i;r=r.next){var s=r.anEdge;if(!(s.winding<=0))do{t+=(s.org.s-s.dst().s)*(s.org.t+s.dst().t),s=s.lNext}while(s!==r.anEdge)}if(t<0)for(var n=e.mesh.vHead,o=n.next;o!==n;o=o.next)o.t=-o.t},e.render={},e.render.renderMesh=function(t,i,r){for(var s=!1,n=-1,o=i.fHead.prev;o!==i.fHead;o=o.prev)if(o.inside){s||(t.callBeginCallback(e.primitiveType.GL_TRIANGLES),s=!0);var l=o.anEdge;e.assert(l.lNext.lNext.lNext===l,"renderMesh called with non-triangulated mesh");do{if(r){var a=l.rFace().inside?0:1;n!==a&&(n=a,t.callEdgeFlagCallback(!!n))}t.callVertexCallback(l.org.data),l=l.lNext}while(l!==o.anEdge)}s&&t.callEndCallback()},e.render.renderBoundary=function(t,i){for(var r=i.fHead.next;r!==i.fHead;r=r.next)if(r.inside){t.callBeginCallback(e.primitiveType.GL_LINE_LOOP);var s=r.anEdge;do{t.callVertexCallback(s.org.data),s=s.lNext}while(s!==r.anEdge);t.callEndCallback()}},e.sweep={},e.sweep.SENTINEL_COORD_=4*e.GLU_TESS_MAX_COORD,e.sweep.TOLERANCE_NONZERO_=!1,e.sweep.computeInterior=function(t){var i;for(t.fatalError=!1,e.sweep.removeDegenerateEdges_(t),e.sweep.initPriorityQ_(t),e.sweep.initEdgeDict_(t);null!==(i=t.pq.extractMin());){for(;;){var r=t.pq.minimum();if(null===r||!e.geom.vertEq(r,i))break;r=t.pq.extractMin(),e.sweep.spliceMergeVertices_(t,i.anEdge,r.anEdge)}e.sweep.sweepEvent_(t,i)}var s=t.dict.getMin().getKey();t.event=s.eUp.org,e.sweep.doneEdgeDict_(t),e.sweep.donePriorityQ_(t),e.sweep.removeDegenerateFaces_(t.mesh),t.mesh.checkMesh()},e.sweep.addWinding_=function(e,t){e.winding+=t.winding,e.sym.winding+=t.sym.winding},e.sweep.edgeLeq_=function(t,i,r){var s=t.event,n=i.eUp,o=r.eUp;return n.dst()===s?o.dst()===s?e.geom.vertLeq(n.org,o.org)?e.geom.edgeSign(o.dst(),n.org,o.org)<=0:e.geom.edgeSign(n.dst(),o.org,n.org)>=0:e.geom.edgeSign(o.dst(),s,o.org)<=0:o.dst()===s?e.geom.edgeSign(n.dst(),s,n.org)>=0:e.geom.edgeEval(n.dst(),s,n.org)>=e.geom.edgeEval(o.dst(),s,o.org)},e.sweep.deleteRegion_=function(t,i){i.fixUpperEdge&&e.assert(0===i.eUp.winding),i.eUp.activeRegion=null,t.dict.deleteNode(i.nodeUp),i.nodeUp=null},e.sweep.fixUpperEdge_=function(t,i){e.assert(t.fixUpperEdge),e.mesh.deleteEdge(t.eUp),t.fixUpperEdge=!1,t.eUp=i,i.activeRegion=t},e.sweep.topLeftRegion_=function(t){var i=t.eUp.org;do{t=t.regionAbove()}while(t.eUp.org===i);if(t.fixUpperEdge){var r=e.mesh.connect(t.regionBelow().eUp.sym,t.eUp.lNext);e.sweep.fixUpperEdge_(t,r),t=t.regionAbove()}return t},e.sweep.topRightRegion_=function(e){var t=e.eUp.dst();do{e=e.regionAbove()}while(e.eUp.dst()===t);return e},e.sweep.addRegionBelow_=function(t,i,r){var s=new e.ActiveRegion;return s.eUp=r,s.nodeUp=t.dict.insertBefore(i.nodeUp,s),r.activeRegion=s,s},e.sweep.isWindingInside_=function(t,i){switch(t.windingRule){case e.windingRule.GLU_TESS_WINDING_ODD:return 0!=(1&i);case e.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==i;case e.windingRule.GLU_TESS_WINDING_POSITIVE:return i>0;case e.windingRule.GLU_TESS_WINDING_NEGATIVE:return i<0;case e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return i>=2||i<=-2}return e.assert(!1),!1},e.sweep.computeWinding_=function(t,i){i.windingNumber=i.regionAbove().windingNumber+i.eUp.winding,i.inside=e.sweep.isWindingInside_(t,i.windingNumber)},e.sweep.finishRegion_=function(t,i){var r=i.eUp,s=r.lFace;s.inside=i.inside,s.anEdge=r,e.sweep.deleteRegion_(t,i)},e.sweep.finishLeftRegions_=function(t,i,r){for(var s=i,n=i.eUp;s!==r;){s.fixUpperEdge=!1;var o=s.regionBelow(),l=o.eUp;if(l.org!==n.org){if(!o.fixUpperEdge){e.sweep.finishRegion_(t,s);break}l=e.mesh.connect(n.lPrev(),l.sym),e.sweep.fixUpperEdge_(o,l)}n.oNext!==l&&(e.mesh.meshSplice(l.oPrev(),l),e.mesh.meshSplice(n,l)),e.sweep.finishRegion_(t,s),n=o.eUp,s=o}return n},e.sweep.addRightEdges_=function(t,i,r,s,n,o){var l=!0,a=r;do{e.assert(e.geom.vertLeq(a.org,a.dst())),e.sweep.addRegionBelow_(t,i,a.sym),a=a.oNext}while(a!==s);null===n&&(n=i.regionBelow().eUp.rPrev());for(var h,u=i,c=n;(a=(h=u.regionBelow()).eUp.sym).org===c.org;)a.oNext!==c&&(e.mesh.meshSplice(a.oPrev(),a),e.mesh.meshSplice(c.oPrev(),a)),h.windingNumber=u.windingNumber-a.winding,h.inside=e.sweep.isWindingInside_(t,h.windingNumber),u.dirty=!0,!l&&e.sweep.checkForRightSplice_(t,u)&&(e.sweep.addWinding_(a,c),e.sweep.deleteRegion_(t,u),e.mesh.deleteEdge(c)),l=!1,u=h,c=a;u.dirty=!0,e.assert(u.windingNumber-a.winding===h.windingNumber),o&&e.sweep.walkDirtyRegions_(t,u)},e.sweep.callCombine_=function(t,i,r,s,n){var o=[i.coords[0],i.coords[1],i.coords[2]];i.data=null,i.data=t.callCombineCallback(o,r,s),null===i.data&&(n?t.fatalError||(t.callErrorCallback(e.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),t.fatalError=!0):i.data=r[0])},e.sweep.spliceMergeVertices_=function(t,i,r){var s=[null,null,null,null];s[0]=i.org.data,s[1]=r.org.data,e.sweep.callCombine_(t,i.org,s,[.5,.5,0,0],!1),e.mesh.meshSplice(i,r)},e.sweep.vertexWeights_=function(t,i,r,s,n){var o=e.geom.vertL1dist(i,t),l=e.geom.vertL1dist(r,t),a=n,h=n+1;s[a]=.5*l/(o+l),s[h]=.5*o/(o+l),t.coords[0]+=s[a]*i.coords[0]+s[h]*r.coords[0],t.coords[1]+=s[a]*i.coords[1]+s[h]*r.coords[1],t.coords[2]+=s[a]*i.coords[2]+s[h]*r.coords[2]},e.sweep.getIntersectData_=function(t,i,r,s,n,o){var l=[0,0,0,0],a=[r.data,s.data,n.data,o.data];i.coords[0]=i.coords[1]=i.coords[2]=0,e.sweep.vertexWeights_(i,r,s,l,0),e.sweep.vertexWeights_(i,n,o,l,2),e.sweep.callCombine_(t,i,a,l,!0)},e.sweep.checkForRightSplice_=function(t,i){var r=i.regionBelow(),s=i.eUp,n=r.eUp;if(e.geom.vertLeq(s.org,n.org)){if(e.geom.edgeSign(n.dst(),s.org,n.org)>0)return!1;e.geom.vertEq(s.org,n.org)?s.org!==n.org&&(t.pq.remove(s.org.pqHandle),e.sweep.spliceMergeVertices_(t,n.oPrev(),s)):(e.mesh.splitEdge(n.sym),e.mesh.meshSplice(s,n.oPrev()),i.dirty=r.dirty=!0)}else{if(e.geom.edgeSign(s.dst(),n.org,s.org)<0)return!1;i.regionAbove().dirty=i.dirty=!0,e.mesh.splitEdge(s.sym),e.mesh.meshSplice(n.oPrev(),s)}return!0},e.sweep.checkForLeftSplice_=function(t,i){var r,s=i.regionBelow(),n=i.eUp,o=s.eUp;if(e.assert(!e.geom.vertEq(n.dst(),o.dst())),e.geom.vertLeq(n.dst(),o.dst())){if(e.geom.edgeSign(n.dst(),o.dst(),n.org)<0)return!1;i.regionAbove().dirty=i.dirty=!0,r=e.mesh.splitEdge(n),e.mesh.meshSplice(o.sym,r),r.lFace.inside=i.inside}else{if(e.geom.edgeSign(o.dst(),n.dst(),o.org)>0)return!1;i.dirty=s.dirty=!0,r=e.mesh.splitEdge(o),e.mesh.meshSplice(n.lNext,o.sym),r.rFace().inside=i.inside}return!0},e.sweep.checkForIntersect_=function(t,i){var r=i.regionBelow(),s=i.eUp,n=r.eUp,o=s.org,l=n.org,a=s.dst(),h=n.dst(),u=new e.GluVertex;if(e.assert(!e.geom.vertEq(h,a)),e.assert(e.geom.edgeSign(a,t.event,o)<=0),e.assert(e.geom.edgeSign(h,t.event,l)>=0),e.assert(o!==t.event&&l!==t.event),e.assert(!i.fixUpperEdge&&!r.fixUpperEdge),o===l)return!1;if(Math.min(o.t,a.t)>Math.max(l.t,h.t))return!1;if(e.geom.vertLeq(o,l)){if(e.geom.edgeSign(h,o,l)>0)return!1}else if(e.geom.edgeSign(a,l,o)<0)return!1;e.geom.edgeIntersect(a,o,h,l,u),e.assert(Math.min(o.t,a.t)<=u.t),e.assert(u.t<=Math.max(l.t,h.t)),e.assert(Math.min(h.s,a.s)<=u.s),e.assert(u.s<=Math.max(l.s,o.s)),e.geom.vertLeq(u,t.event)&&(u.s=t.event.s,u.t=t.event.t);var c=e.geom.vertLeq(o,l)?o:l;if(e.geom.vertLeq(c,u)&&(u.s=c.s,u.t=c.t),e.geom.vertEq(u,o)||e.geom.vertEq(u,l))return e.sweep.checkForRightSplice_(t,i),!1;if(!e.geom.vertEq(a,t.event)&&e.geom.edgeSign(a,t.event,u)>=0||!e.geom.vertEq(h,t.event)&&e.geom.edgeSign(h,t.event,u)<=0){if(h===t.event)return e.mesh.splitEdge(s.sym),e.mesh.meshSplice(n.sym,s),s=(i=e.sweep.topLeftRegion_(i)).regionBelow().eUp,e.sweep.finishLeftRegions_(t,i.regionBelow(),r),e.sweep.addRightEdges_(t,i,s.oPrev(),s,s,!0),!0;if(a===t.event){e.mesh.splitEdge(n.sym),e.mesh.meshSplice(s.lNext,n.oPrev()),r=i;var d=(i=e.sweep.topRightRegion_(i)).regionBelow().eUp.rPrev();return r.eUp=n.oPrev(),n=e.sweep.finishLeftRegions_(t,r,null),e.sweep.addRightEdges_(t,i,n.oNext,s.rPrev(),d,!0),!0}return e.geom.edgeSign(a,t.event,u)>=0&&(i.regionAbove().dirty=i.dirty=!0,e.mesh.splitEdge(s.sym),s.org.s=t.event.s,s.org.t=t.event.t),e.geom.edgeSign(h,t.event,u)<=0&&(i.dirty=r.dirty=!0,e.mesh.splitEdge(n.sym),n.org.s=t.event.s,n.org.t=t.event.t),!1}return e.mesh.splitEdge(s.sym),e.mesh.splitEdge(n.sym),e.mesh.meshSplice(n.oPrev(),s),s.org.s=u.s,s.org.t=u.t,s.org.pqHandle=t.pq.insert(s.org),e.sweep.getIntersectData_(t,s.org,o,a,l,h),i.regionAbove().dirty=i.dirty=r.dirty=!0,!1},e.sweep.walkDirtyRegions_=function(t,i){for(var r=i.regionBelow();;){for(;r.dirty;)i=r,r=r.regionBelow();if(!i.dirty&&(r=i,null===(i=i.regionAbove())||!i.dirty))return;i.dirty=!1;var s=i.eUp,n=r.eUp;if(s.dst()!==n.dst()&&e.sweep.checkForLeftSplice_(t,i)&&(r.fixUpperEdge?(e.sweep.deleteRegion_(t,r),e.mesh.deleteEdge(n),n=(r=i.regionBelow()).eUp):i.fixUpperEdge&&(e.sweep.deleteRegion_(t,i),e.mesh.deleteEdge(s),s=(i=r.regionAbove()).eUp)),s.org!==n.org)if(s.dst()===n.dst()||i.fixUpperEdge||r.fixUpperEdge||s.dst()!==t.event&&n.dst()!==t.event)e.sweep.checkForRightSplice_(t,i);else if(e.sweep.checkForIntersect_(t,i))return;s.org===n.org&&s.dst()===n.dst()&&(e.sweep.addWinding_(n,s),e.sweep.deleteRegion_(t,i),e.mesh.deleteEdge(s),i=r.regionAbove())}},e.sweep.connectRightVertex_=function(t,i,r){var s,n=r.oNext,o=i.regionBelow(),l=i.eUp,a=o.eUp,h=!1;l.dst()!==a.dst()&&e.sweep.checkForIntersect_(t,i),e.geom.vertEq(l.org,t.event)&&(e.mesh.meshSplice(n.oPrev(),l),n=(i=e.sweep.topLeftRegion_(i)).regionBelow().eUp,e.sweep.finishLeftRegions_(t,i.regionBelow(),o),h=!0),e.geom.vertEq(a.org,t.event)&&(e.mesh.meshSplice(r,a.oPrev()),r=e.sweep.finishLeftRegions_(t,o,null),h=!0),h?e.sweep.addRightEdges_(t,i,r.oNext,n,n,!0):(s=e.geom.vertLeq(a.org,l.org)?a.oPrev():l,s=e.mesh.connect(r.lPrev(),s),e.sweep.addRightEdges_(t,i,s,s.oNext,s.oNext,!1),s.sym.activeRegion.fixUpperEdge=!0,e.sweep.walkDirtyRegions_(t,i))},e.sweep.connectLeftDegenerate_=function(t,i,r){var s=i.eUp;if(e.geom.vertEq(s.org,r))return e.assert(e.sweep.TOLERANCE_NONZERO_),void(e.sweep.TOLERANCE_NONZERO_&&e.sweep.spliceMergeVertices_(t,s,r.anEdge));if(!e.geom.vertEq(s.dst(),r))return e.mesh.splitEdge(s.sym),i.fixUpperEdge&&(e.mesh.deleteEdge(s.oNext),i.fixUpperEdge=!1),e.mesh.meshSplice(r.anEdge,s),void e.sweep.sweepEvent_(t,r);if(e.assert(e.sweep.TOLERANCE_NONZERO_),e.sweep.TOLERANCE_NONZERO_){var n=(i=e.sweep.topRightRegion_(i)).regionBelow(),o=n.eUp.sym,l=o.oNext,a=l;n.fixUpperEdge&&(e.assert(l!==o),e.sweep.deleteRegion_(t,n),e.mesh.deleteEdge(o),o=l.oPrev()),e.mesh.meshSplice(r.anEdge,o),e.geom.edgeGoesLeft(l)||(l=null),e.sweep.addRightEdges_(t,i,o.oNext,a,l,!0)}},e.sweep.connectLeftVertex_=function(t,i){var r=new e.ActiveRegion;r.eUp=i.anEdge.sym;var s=t.dict.search(r).getKey(),n=s.regionBelow(),o=s.eUp,l=n.eUp;if(0!==e.geom.edgeSign(o.dst(),i,o.org)){var a,h=e.geom.vertLeq(l.dst(),o.dst())?s:n;s.inside||h.fixUpperEdge?(a=h===s?e.mesh.connect(i.anEdge.sym,o.lNext):e.mesh.connect(l.dNext(),i.anEdge).sym,h.fixUpperEdge?e.sweep.fixUpperEdge_(h,a):e.sweep.computeWinding_(t,e.sweep.addRegionBelow_(t,s,a)),e.sweep.sweepEvent_(t,i)):e.sweep.addRightEdges_(t,s,i.anEdge,i.anEdge,null,!0)}else e.sweep.connectLeftDegenerate_(t,s,i)},e.sweep.sweepEvent_=function(t,i){t.event=i;for(var r=i.anEdge;null===r.activeRegion;)if((r=r.oNext)===i.anEdge)return void e.sweep.connectLeftVertex_(t,i);var s=e.sweep.topLeftRegion_(r.activeRegion),n=s.regionBelow(),o=n.eUp,l=e.sweep.finishLeftRegions_(t,n,null);l.oNext===o?e.sweep.connectRightVertex_(t,s,l):e.sweep.addRightEdges_(t,s,l.oNext,o,o,!0)},e.sweep.addSentinel_=function(t,i){var r=new e.ActiveRegion,s=e.mesh.makeEdge(t.mesh);s.org.s=e.sweep.SENTINEL_COORD_,s.org.t=i,s.dst().s=-e.sweep.SENTINEL_COORD_,s.dst().t=i,t.event=s.dst(),r.eUp=s,r.windingNumber=0,r.inside=!1,r.fixUpperEdge=!1,r.sentinel=!0,r.dirty=!1,r.nodeUp=t.dict.insert(r)},e.sweep.initEdgeDict_=function(t){t.dict=new e.Dict(t,e.sweep.edgeLeq_),e.sweep.addSentinel_(t,-e.sweep.SENTINEL_COORD_),e.sweep.addSentinel_(t,e.sweep.SENTINEL_COORD_)},e.sweep.doneEdgeDict_=function(t){for(var i,r=0;null!==(i=t.dict.getMin().getKey());)i.sentinel||(e.assert(i.fixUpperEdge),e.assert(1==++r)),e.assert(0===i.windingNumber),e.sweep.deleteRegion_(t,i);t.dict=null},e.sweep.removeDegenerateEdges_=function(t){for(var i,r=t.mesh.eHead,s=r.next;s!==r;s=i){i=s.next;var n=s.lNext;e.geom.vertEq(s.org,s.dst())&&s.lNext.lNext!==s&&(e.sweep.spliceMergeVertices_(t,n,s),e.mesh.deleteEdge(s),n=(s=n).lNext),n.lNext===s&&(n!==s&&(n!==i&&n!==i.sym||(i=i.next),e.mesh.deleteEdge(n)),s!==i&&s!==i.sym||(i=i.next),e.mesh.deleteEdge(s))}},e.sweep.initPriorityQ_=function(t){var i=new e.PriorityQ;t.pq=i;var r,s=t.mesh.vHead;for(r=s.next;r!==s;r=r.next)r.pqHandle=i.insert(r);i.init()},e.sweep.donePriorityQ_=function(e){e.pq.deleteQ(),e.pq=null},e.sweep.removeDegenerateFaces_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i){i=r.next;var s=r.anEdge;e.assert(s.lNext!==s),s.lNext.lNext===s&&(e.sweep.addWinding_(s.oNext,s),e.mesh.deleteEdge(s))}},e.tessmono={},e.tessmono.tessellateMonoRegion_=function(t){var i=t.anEdge;for(e.assert(i.lNext!==i&&i.lNext.lNext!==i);e.geom.vertLeq(i.dst(),i.org);i=i.lPrev());for(;e.geom.vertLeq(i.org,i.dst());i=i.lNext);for(var r,s=i.lPrev();i.lNext!==s;)if(e.geom.vertLeq(i.dst(),s.org)){for(;s.lNext!==i&&(e.geom.edgeGoesLeft(s.lNext)||e.geom.edgeSign(s.org,s.dst(),s.lNext.dst())<=0);)s=(r=e.mesh.connect(s.lNext,s)).sym;s=s.lPrev()}else{for(;s.lNext!==i&&(e.geom.edgeGoesRight(i.lPrev())||e.geom.edgeSign(i.dst(),i.org,i.lPrev().org)>=0);)r=e.mesh.connect(i,i.lPrev()),i=r.sym;i=i.lNext}for(e.assert(s.lNext!==i);s.lNext.lNext!==i;)s=(r=e.mesh.connect(s.lNext,s)).sym},e.tessmono.tessellateInterior=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside&&e.tessmono.tessellateMonoRegion_(r)},e.tessmono.discardExterior=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside||e.mesh.zapFace(r)},e.tessmono.setWindingNumber=function(t,i,r){for(var s,n=t.eHead.next;n!==t.eHead;n=s)s=n.next,n.rFace().inside!==n.lFace.inside?n.winding=n.lFace.inside?i:-i:r?e.mesh.deleteEdge(n):n.winding=0},e.Dict=function(t,i){this.head_=new e.DictNode,this.frame_=t,this.leq_=i},e.Dict.prototype.deleteDict_=function(){},e.Dict.prototype.insertBefore=function(t,i){do{t=t.prev}while(null!==t.key&&!this.leq_(this.frame_,t.key,i));var r=new e.DictNode(i,t.next,t);return t.next.prev=r,t.next=r,r},e.Dict.prototype.insert=function(e){return this.insertBefore(this.head_,e)},e.Dict.prototype.deleteNode=function(e){e.next.prev=e.prev,e.prev.next=e.next},e.Dict.prototype.search=function(e){var t=this.head_;do{t=t.next}while(null!==t.key&&!this.leq_(this.frame_,e,t.key));return t},e.Dict.prototype.getMin=function(){return this.head_.next},e.Dict.prototype.getMax=function(){return this.head_.prev},e.DictNode=function(e,t,i){this.key=e||null,this.next=t||this,this.prev=i||this},e.DictNode.prototype.getKey=function(){return this.key},e.DictNode.prototype.getSuccessor=function(){return this.next},e.DictNode.prototype.getPredecessor=function(){return this.prev},e.GluTesselator=function(){this.state_=e.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.errorCallback_=null,this.normal_=[0,0,0],this.windingRule=e.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.combineCallback_=null,this.boundaryOnly_=!1,this.beginCallback_=null,this.edgeFlagCallback_=null,this.vertexCallback_=null,this.endCallback_=null,this.meshCallback_=null,this.polygonData_=null},e.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},e.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(e.GluTesselator.tessState_.T_DORMANT)},e.GluTesselator.prototype.gluTessProperty=function(t,i){switch(t){case e.gluEnum.GLU_TESS_TOLERANCE:return;case e.gluEnum.GLU_TESS_WINDING_RULE:var r=i;switch(r){case e.windingRule.GLU_TESS_WINDING_ODD:case e.windingRule.GLU_TESS_WINDING_NONZERO:case e.windingRule.GLU_TESS_WINDING_POSITIVE:case e.windingRule.GLU_TESS_WINDING_NEGATIVE:case e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=r)}break;case e.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly_=!!i);default:return void this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}this.callErrorCallback(e.gluEnum.GLU_INVALID_VALUE)},e.GluTesselator.prototype.gluGetTessProperty=function(t){switch(t){case e.gluEnum.GLU_TESS_TOLERANCE:return 0;case e.gluEnum.GLU_TESS_WINDING_RULE:var i=this.windingRule;return e.assert(i===e.windingRule.GLU_TESS_WINDING_ODD||i===e.windingRule.GLU_TESS_WINDING_NONZERO||i===e.windingRule.GLU_TESS_WINDING_POSITIVE||i===e.windingRule.GLU_TESS_WINDING_NEGATIVE||i===e.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),i;case e.gluEnum.GLU_TESS_BOUNDARY_ONLY:return e.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}return!1},e.GluTesselator.prototype.gluTessNormal=function(e,t,i){this.normal_[0]=e,this.normal_[1]=t,this.normal_[2]=i},e.GluTesselator.prototype.gluTessCallback=function(t,i){var r=i||null;switch(t){case e.gluEnum.GLU_TESS_BEGIN:case e.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.beginCallback_=r);case e.gluEnum.GLU_TESS_EDGE_FLAG:case e.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.edgeFlagCallback_=r);case e.gluEnum.GLU_TESS_VERTEX:case e.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.vertexCallback_=r);case e.gluEnum.GLU_TESS_END:case e.gluEnum.GLU_TESS_END_DATA:return void(this.endCallback_=r);case e.gluEnum.GLU_TESS_ERROR:case e.gluEnum.GLU_TESS_ERROR_DATA:return void(this.errorCallback_=r);case e.gluEnum.GLU_TESS_COMBINE:case e.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.combineCallback_=r);case e.gluEnum.GLU_TESS_MESH:return void(this.meshCallback_=r);default:return void this.callErrorCallback(e.gluEnum.GLU_INVALID_ENUM)}},e.GluTesselator.prototype.gluTessVertex=function(t,i){var r=!1,s=[0,0,0];this.requireState_(e.GluTesselator.tessState_.T_IN_CONTOUR);for(var n=0;n<3;++n){var o=t[n];o<-e.GLU_TESS_MAX_COORD&&(o=-e.GLU_TESS_MAX_COORD,r=!0),o>e.GLU_TESS_MAX_COORD&&(o=e.GLU_TESS_MAX_COORD,r=!0),s[n]=o}r&&this.callErrorCallback(e.errorType.GLU_TESS_COORD_TOO_LARGE),this.addVertex_(s,i)},e.GluTesselator.prototype.gluTessBeginPolygon=function(t){this.requireState_(e.GluTesselator.tessState_.T_DORMANT),this.state_=e.GluTesselator.tessState_.T_IN_POLYGON,this.mesh=new e.GluMesh,this.polygonData_=t},e.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(e.GluTesselator.tessState_.T_IN_POLYGON),this.state_=e.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null},e.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(e.GluTesselator.tessState_.T_IN_CONTOUR),this.state_=e.GluTesselator.tessState_.T_IN_POLYGON},e.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(e.GluTesselator.tessState_.T_IN_POLYGON),this.state_=e.GluTesselator.tessState_.T_DORMANT,e.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]),e.sweep.computeInterior(this),!this.fatalError){var t=this.mesh;if(this.boundaryOnly_?e.tessmono.setWindingNumber(t,1,!0):e.tessmono.tessellateInterior(t),this.mesh.checkMesh(),this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)if(this.boundaryOnly_)e.render.renderBoundary(this,this.mesh);else{var i=!!this.edgeFlagCallback_;e.render.renderMesh(this,this.mesh,i)}if(this.meshCallback_)return e.tessmono.discardExterior(this.mesh),this.meshCallback_(this.mesh),this.mesh=null,void(this.polygonData_=null)}e.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},e.GluTesselator.prototype.requireState_=function(e){this.state_!==e&&this.gotoState_(e)},e.GluTesselator.prototype.gotoState_=function(t){for(;this.state_!==t;)if(this.state_<t)switch(this.state_){case e.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case e.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case e.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case e.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(e.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}},e.GluTesselator.prototype.addVertex_=function(t,i){var r=this.lastEdge_;null===r?(r=e.mesh.makeEdge(this.mesh),e.mesh.meshSplice(r,r.sym)):(e.mesh.splitEdge(r),r=r.lNext),r.org.data=i,r.org.coords[0]=t[0],r.org.coords[1]=t[1],r.org.coords[2]=t[2],r.winding=1,r.sym.winding=-1,this.lastEdge_=r},e.GluTesselator.prototype.callBeginCallback=function(e){this.beginCallback_&&this.beginCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callVertexCallback=function(e){this.vertexCallback_&&this.vertexCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callEdgeFlagCallback=function(e){this.edgeFlagCallback_&&this.edgeFlagCallback_(e,this.polygonData_)},e.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)},e.GluTesselator.prototype.callCombineCallback=function(e,t,i){return this.combineCallback_&&this.combineCallback_(e,t,i,this.polygonData_)||null},e.GluTesselator.prototype.callErrorCallback=function(e){this.errorCallback_&&this.errorCallback_(e,this.polygonData_)},e.GluFace=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.inside=!1},e.GluHalfEdge=function(e){this.next=e||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},e.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},e.GluHalfEdge.prototype.dst=function(){return this.sym.org},e.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},e.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},e.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},e.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},e.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},e.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},e.GluMesh=function(){this.vHead=new e.GluVertex,this.fHead=new e.GluFace,this.eHead=new e.GluHalfEdge,this.eHeadSym=new e.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},e.GluMesh.prototype.checkMesh=function(){if(e.DEBUG){var t,i,r,s=this.fHead,n=this.vHead,o=this.eHead,l=s;for(l=s;(i=l.next)!==s;l=i){e.assert(i.prev===l),t=i.anEdge;do{e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t),e.assert(t.lFace===i),t=t.lNext}while(t!==i.anEdge)}e.assert(i.prev===l&&null===i.anEdge);var a=n;for(a=n;(r=a.next)!==n;a=r){e.assert(r.prev===a),t=r.anEdge;do{e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t),e.assert(t.org===r),t=t.oNext}while(t!==r.anEdge)}e.assert(r.prev===a&&null===r.anEdge&&null===r.data);var h=o;for(h=o;(t=h.next)!==o;h=t)e.assert(t.sym.next===h.sym),e.assert(t.sym!==t),e.assert(t.sym.sym===t),e.assert(null!==t.org),e.assert(null!==t.dst()),e.assert(t.lNext.oNext.sym===t),e.assert(t.oNext.sym.lNext===t);e.assert(t.sym.next===h.sym&&t.sym===this.eHeadSym&&t.sym.sym===t&&null===t.org&&null===t.dst()&&null===t.lFace&&null===t.rFace())}},e.GluVertex=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0},e.PriorityQ=function(){this.verts_=[],this.order_=null,this.size_=0,this.initialized_=!1,this.heap_=new e.PriorityQHeap},e.PriorityQ.prototype.deleteQ=function(){this.heap_=null,this.order_=null,this.verts_=null},e.PriorityQ.prototype.init=function(){this.order_=[];for(var t=0;t<this.size_;t++)this.order_[t]=t;var i,r=(i=this.verts_,function(t,r){return e.geom.vertLeq(i[t],i[r])?1:-1});if(this.order_.sort(r),this.initialized_=!0,this.heap_.init(),e.DEBUG){var s=0+this.size_-1;for(t=0;t<s;++t)e.assert(e.geom.vertLeq(this.verts_[this.order_[t+1]],this.verts_[this.order_[t]]))}},e.PriorityQ.prototype.insert=function(e){if(this.initialized_)return this.heap_.insert(e);var t=this.size_++;return this.verts_[t]=e,-(t+1)},e.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var t=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var i=this.heap_.minimum();if(e.geom.vertLeq(i,t))return this.heap_.extractMin()}do{--this.size_}while(this.size_>0&&null===this.verts_[this.order_[this.size_-1]]);return t},e.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var t=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var i=this.heap_.minimum();if(e.geom.vertLeq(i,t))return i}return t},e.PriorityQ.prototype.remove=function(t){if(t>=0)this.heap_.remove(t);else for(t=-(t+1),e.assert(t<this.verts_.length&&null!==this.verts_[t]),this.verts_[t]=null;this.size_>0&&null===this.verts_[this.order_[this.size_-1]];)--this.size_},e.PriorityQHeap=function(){this.heap_=e.PriorityQHeap.reallocNumeric_([0],e.PriorityQHeap.INIT_SIZE_+1),this.verts_=[null,null],this.handles_=[0,0],this.size_=0,this.max_=e.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.heap_[1]=1},e.PriorityQHeap.INIT_SIZE_=32,e.PriorityQHeap.reallocNumeric_=function(e,t){for(var i=new Array(t),r=0;r<e.length;r++)i[r]=e[r];for(;r<t;r++)i[r]=0;return i},e.PriorityQHeap.prototype.init=function(){for(var e=this.size_;e>=1;--e)this.floatDown_(e);this.initialized_=!0},e.PriorityQHeap.prototype.insert=function(t){var i,r=++this.size_;return 2*r>this.max_&&(this.max_*=2,this.handles_=e.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1)),0===this.freeList_?i=r:(i=this.freeList_,this.freeList_=this.handles_[this.freeList_]),this.verts_[i]=t,this.handles_[i]=r,this.heap_[r]=i,this.initialized_&&this.floatUp_(r),i},e.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},e.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]},e.PriorityQHeap.prototype.extractMin=function(){var e=this.heap_,t=this.verts_,i=this.handles_,r=e[1],s=t[r];return this.size_>0&&(e[1]=e[this.size_],i[e[1]]=1,t[r]=null,i[r]=this.freeList_,this.freeList_=r,--this.size_>0&&this.floatDown_(1)),s},e.PriorityQHeap.prototype.remove=function(t){var i=this.heap_,r=this.verts_,s=this.handles_;e.assert(t>=1&&t<=this.max_&&null!==r[t]);var n=s[t];if(i[n]=i[this.size_],s[i[n]]=n,n<=--this.size_)if(n<=1)this.floatDown_(n);else{var o=r[i[n]],l=r[i[n>>1]];e.geom.vertLeq(l,o)?this.floatDown_(n):this.floatUp_(n)}r[t]=null,s[t]=this.freeList_,this.freeList_=t},e.PriorityQHeap.prototype.floatDown_=function(t){for(var i=this.heap_,r=this.verts_,s=this.handles_,n=t,o=i[n];;){var l=n<<1;l<this.size_&&e.geom.vertLeq(r[i[l+1]],r[i[l]])&&(l+=1),e.assert(l<=this.max_);var a=i[l];if(l>this.size_||e.geom.vertLeq(r[o],r[a]))return i[n]=o,void(s[o]=n);i[n]=a,s[a]=n,n=l}},e.PriorityQHeap.prototype.floatUp_=function(t){for(var i=this.heap_,r=this.verts_,s=this.handles_,n=t,o=i[n];;){var l=n>>1,a=i[l];if(0===l||e.geom.vertLeq(r[a],r[o]))return i[n]=o,void(s[o]=n);i[n]=a,s[a]=n,n=l}},e.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},e.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},e.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()},e},void 0!==(i=t())&&(e.exports=i)}));const f=s.S.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");class E{constructor(){this._currentVertexIndex=0,this._indexCounter=0,this._triangleIndices=[-1,-1,-1],this.glu=new y.GluTesselator,this.glu.gluTessCallback(y.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this)),this.glu.gluTessCallback(y.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this)),this.glu.gluTessCallback(y.gluEnum.GLU_TESS_END,this._endcallback.bind(this)),this.glu.gluTessCallback(y.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this)),this.glu.gluTessCallback(y.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this)),this.glu.gluTessCallback(y.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this)),this.glu.gluTessProperty(y.gluEnum.GLU_TESS_WINDING_RULE,y.windingRule.GLU_TESS_WINDING_ODD)}beginPolygon(e,t){this._triangleIndices[0]=-1,this._triangleIndices[1]=-1,this._triangleIndices[2]=-1,this._currentVertexIndex=0,this._indexCounter=0,this.glu.gluTessBeginPolygon(e),this._indices=t}endPolygon(){this.glu.gluTessEndPolygon()}beginContour(){this.glu.gluTessBeginContour()}endContour(){this.glu.gluTessEndContour()}addVertex(e,t){this.glu.gluTessVertex(e,t)}_vertexCallback(e,t){if(t[t.length]=e[0],t[t.length]=e[1],this._triangleIndices[this._currentVertexIndex]=-1,this._currentVertexIndex>=2){for(let e=0;e<3;e++)-1===this._triangleIndices[e]&&(this._triangleIndices[e]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[e];this._currentVertexIndex=0}else this._currentVertexIndex++}_begincallback(){this._triangleIndices[0]=-1,this._triangleIndices[1]=-1,this._triangleIndices[2]=-1,this._currentVertexIndex=0}_endcallback(){this._currentVertexIndex=0}_errorcallback(e){f.error(`Encountered error during tesselation: ${e}`)}_combinecallback(e){return[e[0],e[1],e[2]]}_edgeCallback(){}}function v(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function N(e,t){return Math.sqrt(e*e+t*t)}function T(e){const t=N(e[0],e[1]);e[0]/=t,e[1]/=t}function S(e,t){return N(e[0]-t[0],e[1]-t[1])}function b(e){return"function"==typeof e}function w(e){return 1/Math.max(e,1)}function L(e,t,i){I.trackDistance=null!=t.trackDistance&&t.trackDistance,I.wrapDistance=null!=t.wrapDistance?t.wrapDistance:65535,I.thin=null!=t.thin&&t.thin,I.initialDistance=null!=t.initialDistance?t.initialDistance:0,I.enableOuterBisectorSplit=null!=t.enableOuterBisectorSplit&&t.enableOuterBisectorSplit,I.outerBisectorAutoSplitThreshold=null!=t.outerBisectorAutoSplitThreshold?t.outerBisectorAutoSplitThreshold:0,I.enableInnerBisectorSplit=null!=t.enableOuterBisectorSplit&&t.enableOuterBisectorSplit,I.innerBisectorAutoSplitThreshold=null!=t.innerBisectorAutoSplitThreshold?t.innerBisectorAutoSplitThreshold:0,R=e,O=i,V=0,A=0,D=0,C=!1,k=null,F=null,B.currentVertex.x=null,B.currentVertex.y=null,B.distance=I.initialDistance;const r=R[0],s=R[R.length-1];B.canSplit=!1,B.closed=r.x===s.x&&r.y===s.y,R.length<2||2===R.length&&B.closed||(I.thin?I.trackDistance?function(){for(P(),M(),W(1);A-D>I.wrapDistance||V<R.length;)P(),M(),W(2),O.bridge(B),B.leftExit0=B.rightExit0,B.leftExit2=B.rightExit2}():function(){for(;V<R.length;){if(V>0&&(B.inbound.x=B.outbound.x,B.inbound.y=B.outbound.y),V<R.length-1){B.outbound.x=R[V+1].x-R[V].x,B.outbound.y=R[V+1].y-R[V].y;const e=Math.sqrt(B.outbound.x*B.outbound.x+B.outbound.y*B.outbound.y);B.distance+=e,B.outbound.x/=e,B.outbound.y/=e}else B.outbound.x=B.inbound.x,B.outbound.y=B.inbound.y;0===V&&(B.inbound.x=B.outbound.x,B.inbound.y=B.outbound.y),B.currentVertex.x=R[V].x,B.currentVertex.y=R[V].y,B.prevNormal.x=-B.inbound.y,B.prevNormal.y=B.inbound.x,B.nextNormal.x=-B.outbound.y,B.nextNormal.y=B.outbound.x,0===V?(O.vertex(B),B.leftEntry0=B.entry0,B.leftEntry2=B.entry2,B.leftExit0=B.exit0,B.leftExit2=B.exit2):(O.vertex(B),B.rightEntry0=B.entry0,B.rightEntry2=B.entry2,B.rightExit0=B.exit0,B.rightExit2=B.exit2,O.bridge(B),B.leftExit0=B.rightExit0,B.leftExit2=B.rightExit2),++V}}():I.enableOuterBisectorSplit||I.outerBisectorAutoSplitThreshold>0||I.enableInnerBisectorSplit||I.innerBisectorAutoSplitThreshold>0?(B.canSplit=!0,function(){for(P(),q(),B.splitInner=B.gapInner=B.splitOuter=B.gapOuter=!1,H(1),B.closure0=B.leftEntry0,B.closure1=B.leftEntry1,B.closure2=B.leftEntry2;A-D>I.wrapDistance||V<R.length-1||V<R.length&&(!B.closed||I.trackDistance);)P(),q(),B.splitInner=B.gapInner=B.splitOuter=B.gapOuter=!1,H(2),O.bridge(B),B.leftExit0=B.rightExit0,B.leftExit1=B.rightExit1,B.leftExit2=B.rightExit2;B.closed&&!I.trackDistance&&(B.rightEntry0=B.closure0,B.rightEntry1=B.closure1,B.rightEntry2=B.closure2,O.bridge(B),B.leftExit0=B.rightExit0,B.leftExit1=B.rightExit1,B.leftExit2=B.rightExit2)}()):function(){for(P(),q(),H(1),B.closure0=B.leftEntry0,B.closure1=B.leftEntry1,B.closure2=B.leftEntry2;A-D>I.wrapDistance||V<R.length-1||V<R.length&&(!B.closed||I.trackDistance);)P(),q(),H(2),O.bridge(B),B.leftExit0=B.rightExit0,B.leftExit1=B.rightExit1,B.leftExit2=B.rightExit2;B.closed&&!I.trackDistance&&(B.rightEntry0=B.closure0,B.rightEntry1=B.closure1,B.rightEntry2=B.closure2,O.bridge(B),B.leftExit0=B.rightExit0,B.leftExit1=B.rightExit1,B.leftExit2=B.rightExit2)}())}function U(){R=null,O=null}function G(){if(B.cosine<I.innerBisectorAutoSplitThreshold){B.splitInner=!0,B.gapInner=!0;const e=Math.max(I.innerBisectorAutoSplitThreshold,B.cosine),t=Math.sqrt(1-e*e)/e;B.leftInner.x=B.nextNormal.x+B.sign*t*B.outbound.x,B.leftInner.y=B.nextNormal.y+B.sign*t*B.outbound.y,B.rightInner.x=B.prevNormal.x-B.sign*t*B.inbound.x,B.rightInner.y=B.prevNormal.y-B.sign*t*B.inbound.y}else I.enableInnerBisectorSplit&&(B.splitInner=!0,B.gapInner=!1,B.leftInner.x=B.rightInner.x=B.bisector.x/B.cosine,B.leftInner.y=B.rightInner.y=B.bisector.y/B.cosine);if(B.cosine<I.outerBisectorAutoSplitThreshold){B.splitOuter=!0,B.gapOuter=!0;const e=Math.max(I.outerBisectorAutoSplitThreshold,B.cosine),t=Math.sqrt(1-e*e)/e;B.leftOuter.x=B.prevNormal.x-B.sign*t*B.inbound.x,B.leftOuter.y=B.prevNormal.y-B.sign*t*B.inbound.y,B.rightOuter.x=B.nextNormal.x+B.sign*t*B.outbound.x,B.rightOuter.y=B.nextNormal.y+B.sign*t*B.outbound.y}else I.enableOuterBisectorSplit&&(B.splitOuter=!0,B.gapOuter=!1,B.leftOuter.x=B.rightOuter.x=B.bisector.x/B.cosine,B.leftOuter.y=B.rightOuter.y=B.bisector.y/B.cosine)}let R;const I={};let O,V,A,D,C,k,F;const B=new class{constructor(){this.closed=void 0,this.isFirstVertex=void 0,this.isLastVertex=void 0,this.isCap=void 0,this.currentVertex={x:void 0,y:void 0},this.inbound={x:void 0,y:void 0},this.outbound={x:void 0,y:void 0},this.prevNormal={x:void 0,y:void 0},this.nextNormal={x:void 0,y:void 0},this.bisector={x:void 0,y:void 0},this.leftInner={x:void 0,y:void 0},this.rightInner={x:void 0,y:void 0},this.leftOuter={x:void 0,y:void 0},this.rightOuter={x:void 0,y:void 0}}};function P(){if(C)return B.distance=0,B.isCap=B.isFirstVertex=B.isLastVertex=!1,void(C=!1);if(0===A)if(B.isFirstVertex=0===V,F=R[V],0===V){if(A=0,B.closed){B.inbound.x=F.x-R[R.length-2].x,B.inbound.y=F.y-R[R.length-2].y;const e=Math.sqrt(B.inbound.x*B.inbound.x+B.inbound.y*B.inbound.y);B.inbound.x/=e,B.inbound.y/=e}}else B.inbound.x=F.x-k.x,B.inbound.y=F.y-k.y,A=Math.sqrt(B.inbound.x*B.inbound.x+B.inbound.y*B.inbound.y),B.inbound.x/=A,B.inbound.y/=A;if(B.distance+A-D<=I.wrapDistance){if(V<R.length-1){B.outbound.x=R[V+1].x-F.x,B.outbound.y=R[V+1].y-F.y;const e=Math.sqrt(B.outbound.x*B.outbound.x+B.outbound.y*B.outbound.y);B.outbound.x/=e,B.outbound.y/=e}else if(B.closed){B.outbound.x=R[1].x-F.x,B.outbound.y=R[1].y-F.y;const e=Math.sqrt(B.outbound.x*B.outbound.x+B.outbound.y*B.outbound.y);B.outbound.x/=e,B.outbound.y/=e}else B.outbound.x=B.inbound.x,B.outbound.y=B.inbound.y;return 0!==V||B.closed||(B.inbound.x=B.outbound.x,B.inbound.y=B.outbound.y),++V,B.isLastVertex=V===R.length,B.isCap=!B.closed&&(B.isFirstVertex||B.isLastVertex),B.distance+=A-D,A=0,D=0,C=B.distance+A-D===I.wrapDistance,B.currentVertex.x=F.x,B.currentVertex.y=F.y,k=F,void(F=null)}B.outbound.x=B.inbound.x,B.outbound.y=B.inbound.y,D+=I.wrapDistance-B.distance,B.distance=I.wrapDistance,C=!0;const e=D/A;B.currentVertex.x=(1-e)*k.x+e*F.x,B.currentVertex.y=(1-e)*k.y+e*F.y}function M(){B.prevNormal.x=-B.inbound.y,B.prevNormal.y=B.inbound.x,B.nextNormal.x=-B.outbound.y,B.nextNormal.y=B.outbound.x}function q(){M(),B.bisector.x=B.prevNormal.x+B.nextNormal.x,B.bisector.y=B.prevNormal.y+B.nextNormal.y;const e=Math.sqrt(B.bisector.x*B.bisector.x+B.bisector.y*B.bisector.y);if(e<.001)return B.bisector.x=void 0,B.bisector.y=void 0,B.cosine=0,void(B.sign=void 0);B.bisector.x/=e,B.bisector.y/=e,B.cosine=B.bisector.x*B.nextNormal.x+B.bisector.y*B.nextNormal.y,B.sign=B.prevNormal.x*B.nextNormal.y-B.prevNormal.y*B.nextNormal.x>=0?1:-1}function H(e){O.vertex(B),1===e?(B.leftEntry0=B.entry0,B.leftEntry1=B.entry1,B.leftEntry2=B.entry2,B.leftExit0=B.exit0,B.leftExit1=B.exit1,B.leftExit2=B.exit2):2===e&&(B.rightEntry0=B.entry0,B.rightEntry1=B.entry1,B.rightEntry2=B.entry2,B.rightExit0=B.exit0,B.rightExit1=B.exit1,B.rightExit2=B.exit2)}function W(e){O.vertex(B),1===e?(B.leftEntry0=B.entry0,B.leftEntry2=B.entry2,B.leftExit0=B.exit0,B.leftExit2=B.exit2):2===e&&(B.rightEntry0=B.entry0,B.rightEntry2=B.entry2,B.rightExit0=B.exit0,B.rightExit2=B.exit2)}class z{constructor(e,t){this.writeVertex=e,this.writeTriangle=t,this.capType=0,this.joinType=2,this.miterLimitCosine=w(2),this.roundLimitCosine=Math.cos(23*Math.PI/180),this.almostParallelCosine=.97,this.radsPerSlice=.8,this.textured=!1,this.joinOnUTurn=!1}vertex(e){const t=2===this.joinType?this.miterLimitCosine:this.roundLimitCosine,i=e.isCap&&0!==this.capType;let r=!1;e.cosine>this.almostParallelCosine?(e.exit0=e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.bisector.x/e.cosine,e.bisector.y/e.cosine,0,-1,e.distance),e.exit2=e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.bisector.x/e.cosine,-e.bisector.y/e.cosine,0,1,e.distance)):e.cosine<1-this.almostParallelCosine?(r=!e.isCap&&this.joinOnUTurn,e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.prevNormal.x,e.prevNormal.y,0,-1,e.distance),e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.prevNormal.x,-e.prevNormal.y,0,1,e.distance),e.exit0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.nextNormal.x,e.nextNormal.y,0,-1,e.distance),e.exit2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.nextNormal.x,-e.nextNormal.y,0,1,e.distance)):e.canSplit?(G(),e.sign>0?(e.splitInner?(e.exit0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.outbound.x,e.outbound.y,e.leftInner.x,e.leftInner.y,0,-1,e.distance),e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.inbound.x,e.inbound.y,e.rightInner.x,e.rightInner.y,0,-1,e.distance)):e.exit0=e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.inbound.x,e.inbound.y,e.bisector.x/e.cosine,e.bisector.y/e.cosine,0,-1,e.distance),e.cosine<t?(r=!e.isCap,e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.prevNormal.x,-e.prevNormal.y,0,1,e.distance),e.exit2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.nextNormal.x,-e.nextNormal.y,0,1,e.distance)):e.splitOuter?(r=r||e.gapOuter,e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.inbound.x,e.inbound.y,-e.leftOuter.x,-e.leftOuter.y,0,1,e.distance),e.exit2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.outbound.x,e.outbound.y,-e.rightOuter.x,-e.rightOuter.y,0,1,e.distance)):e.entry2=e.exit2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.bisector.x/e.cosine,-e.bisector.y/e.cosine,0,1,e.distance)):(e.splitInner?(e.exit2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.outbound.x,e.outbound.y,-e.leftInner.x,-e.leftInner.y,0,1,e.distance),e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.inbound.x,e.inbound.y,-e.rightInner.x,-e.rightInner.y,0,1,e.distance)):e.exit2=e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.bisector.x/e.cosine,-e.bisector.y/e.cosine,0,1,e.distance),e.cosine<t?(r=!e.isCap,e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.prevNormal.x,e.prevNormal.y,0,-1,e.distance),e.exit0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.nextNormal.x,e.nextNormal.y,0,-1,e.distance)):e.splitOuter?(r=r||e.gapOuter,e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.inbound.x,e.inbound.y,e.leftOuter.x,e.leftOuter.y,0,-1,e.distance),e.exit0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.outbound.x,e.outbound.y,e.rightOuter.x,e.rightOuter.y,0,-1,e.distance)):e.exit0=e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.bisector.x/e.cosine,e.bisector.y/e.cosine,0,-1,e.distance))):e.sign>0?(e.exit0=e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,e.inbound.x,e.inbound.y,e.bisector.x/e.cosine,e.bisector.y/e.cosine,0,-1,e.distance),e.cosine<t?(r=!e.isCap,e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.prevNormal.x,-e.prevNormal.y,0,1,e.distance),e.exit2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.nextNormal.x,-e.nextNormal.y,0,1,e.distance)):e.entry2=e.exit2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.bisector.x/e.cosine,-e.bisector.y/e.cosine,0,1,e.distance)):(e.exit2=e.entry2=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.bisector.x/e.cosine,-e.bisector.y/e.cosine,0,1,e.distance),e.cosine<t?(r=!e.isCap,e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.prevNormal.x,e.prevNormal.y,0,-1,e.distance),e.exit0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.nextNormal.x,e.nextNormal.y,0,-1,e.distance)):e.exit0=e.entry0=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.bisector.x/e.cosine,e.bisector.y/e.cosine,0,-1,e.distance));const s=e.canSplit&&(e.splitInner||e.splitOuter);let n;if(n=e.entry1=e.exit1=s||r||i?this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,0,0,0,0,e.distance):null,r&&1!==this.joinType)this.writeTriangle(n,e.sign>0?e.exit2:e.entry0,e.sign>0?e.entry2:e.exit0);else if(i&&1===this.capType||r&&1===this.joinType){let t,i,r,s,o,l;if(e.isCap){const n=Math.PI;o=Math.ceil(n/this.radsPerSlice),l=n/o,e.isFirstVertex?(t=e.prevNormal.x,i=e.prevNormal.y,r=e.entry0,s=e.entry2):e.isLastVertex&&(t=-e.nextNormal.x,i=-e.nextNormal.y,r=e.exit2,s=e.exit0)}else{const n=2*Math.acos(e.cosine);o=Math.ceil(n/this.radsPerSlice),l=n/o,t=e.sign>0?-e.prevNormal.x:e.nextNormal.x,i=e.sign>0?-e.prevNormal.y:e.nextNormal.y,r=e.sign>0?e.entry2:e.exit0,s=e.sign>0?e.exit2:e.entry0}const a=Math.cos(l),h=Math.sin(l),u=h*t+a*i;let c,d;t=a*t-h*i,i=u;for(let l=0;l<o;++l){if(c=d,l<o-1)if(e.isCap){const r=e.isFirstVertex?-1:1;d=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,t,i,r,0,e.distance)}else d=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,t,i,0,e.sign,e.distance);this.writeTriangle(0===l?r:c,n,l===o-1?s:d);const u=h*t+a*i;t=a*t-h*i,i=u}}else if(i&&2===this.capType){const t=e.isFirstVertex?1:-1;let i,r;this.textured?(i=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.prevNormal.x-t*e.inbound.x,e.prevNormal.y-t*e.inbound.y,-t,-1,e.distance),r=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.prevNormal.x-t*e.inbound.x,-e.prevNormal.y-t*e.inbound.y,-t,1,e.distance)):(i=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,e.prevNormal.x-t*e.inbound.x,e.prevNormal.y-t*e.inbound.y,0,-1,e.distance),r=this.writeVertex(e.currentVertex.x,e.currentVertex.y,0,0,-e.prevNormal.x-t*e.inbound.x,-e.prevNormal.y-t*e.inbound.y,0,1,e.distance)),t>0?(this.writeTriangle(n,e.entry2,r),this.writeTriangle(n,r,i),this.writeTriangle(n,i,e.entry0)):(this.writeTriangle(n,r,e.exit2),this.writeTriangle(n,i,r),this.writeTriangle(n,e.exit0,i))}}bridge(e){this.writeTriangle(e.leftExit0,e.rightEntry0,null!=e.leftExit1?e.leftExit1:e.leftExit2),this.writeTriangle(e.rightEntry0,null!=e.rightEntry1?e.rightEntry1:e.rightEntry2,null!=e.leftExit1?e.leftExit1:e.leftExit2),null!=e.leftExit1&&null!=e.rightEntry1?(this.writeTriangle(e.leftExit1,e.rightEntry1,e.leftExit2),this.writeTriangle(e.rightEntry1,e.rightEntry2,e.leftExit2)):null!=e.leftExit1?this.writeTriangle(e.leftExit1,e.rightEntry2,e.leftExit2):null!=e.rightEntry1&&this.writeTriangle(e.rightEntry1,e.rightEntry2,e.leftExit2)}}const Q=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],Y=["آ","أ","إ","ا"],X=["ﻵ","ﻷ","ﻹ","ﻻ"],j=["ﻶ","ﻸ","ﻺ","ﻼ"],Z=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],K=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],J=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],$=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],ee=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],te=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],ie=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],re=["ء","ف"],se=["غ","ي"],ne=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],oe=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],le=0,ae=1,he=2,ue=3,ce=4,de=5,ge=6,xe=7,_e=8,pe=10,me=11,ye=12,fe=18,Ee=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],ve=100,Ne=[ve+0,le,le,le,le,ve+1,ve+2,ve+3,ae,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ve+4,ce,ce,ce,le,ce,le,ce,le,ce,ce,ce,le,le,ce,ce,le,le,le,le,le,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,le,le,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,le,le,ce,ce,le,le,ce,ce,le,le,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,le,le,le,ve+5,xe,xe,ve+6,ve+7],Te=[[fe,fe,fe,fe,fe,fe,fe,fe,fe,ge,de,ge,_e,de,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,de,de,de,ge,_e,ce,ce,me,me,me,ce,ce,ce,ce,ce,pe,9,pe,9,9,he,he,he,he,he,he,he,he,he,he,9,ce,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,ce,fe,fe,fe,fe,fe,fe,de,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,9,ce,me,me,me,me,ce,ce,ce,ce,le,ce,ce,fe,ce,ce,me,me,he,he,ce,le,ce,ce,ce,he,le,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,le,le,le,le,le,le,le,le],[le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,ce,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,le,le,le,le,le,le,le,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,le,ce,ce,ce,ce,ce,ce,ce,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ae,ye,ae,ye,ye,ae,ye,ye,ae,ye,ce,ce,ce,ce,ce,ce,ce,ce,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ce,ce,ce,ce,ce,ae,ae,ae,ae,ae,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce],[ue,ue,ue,ue,ce,ce,ce,ce,xe,me,me,xe,9,xe,ce,ce,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,xe,ce,ce,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,me,ue,ue,xe,xe,xe,ye,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,ye,ye,ye,ye,ye,ye,ye,ue,ce,ye,ye,ye,ye,ye,ye,xe,xe,ye,ye,ce,ye,ye,ye,ye,xe,xe,he,he,he,he,he,he,he,he,he,he,xe,xe,xe,xe,xe,xe],[xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,ce,xe,xe,ye,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ce,ce,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,xe,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ye,ye,ye,ye,ye,ye,ye,ye,ye,ae,ae,ce,ce,ce,ce,ae,ce,ce,ce,ce,ce],[_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,fe,fe,fe,le,ae,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,_e,de,13,14,15,16,17,9,me,me,me,me,me,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,9,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,_e,fe,fe,fe,fe,fe,ce,ce,ce,ce,ce,fe,fe,fe,fe,fe,fe,he,le,ce,ce,he,he,he,he,he,he,pe,pe,ce,ce,ce,le,he,he,he,he,he,he,he,he,he,he,pe,pe,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce],[le,le,le,le,le,le,le,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,le,le,le,le,le,ce,ce,ce,ce,ce,ae,ye,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,pe,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ce,ae,ae,ae,ae,ae,ce,ae,ce,ae,ae,ce,ae,ae,ce,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe],[ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ye,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ye,ye,ye,ye,ye,ye,ye,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,9,ce,9,ce,ce,9,ce,ce,ce,ce,ce,ce,ce,ce,ce,me,ce,ce,pe,pe,ce,ce,ce,ce,ce,me,me,ce,ce,ce,ce,ce,xe,xe,xe,xe,xe,ce,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,xe,ce,ce,fe],[ce,ce,ce,me,me,me,ce,ce,ce,ce,ce,pe,9,pe,9,9,he,he,he,he,he,he,he,he,he,he,9,ce,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ce,ce,ce,le,le,le,le,le,le,ce,ce,le,le,le,le,le,le,ce,ce,le,le,le,le,le,le,ce,ce,le,le,le,ce,ce,ce,me,me,ce,ce,ce,me,me,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce]];class Se{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,t,i){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(function(e,t,i){Qe=[],Xe=[];for(let r=0;r<i;r++)e[r]=r,t[r]=r,Qe[r]=r}(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(t,i))return e;t=this.inputFormat,i=this.outputFormat;let r=e;const s=je,n=qe(t.charAt(1)),o=qe(i.charAt(1)),l=("I"===t.charAt(0)?"L":t.charAt(0))+n,a=("I"===i.charAt(0)?"L":i.charAt(0))+o,h=t.charAt(2)+i.charAt(2);s.defInFormat=l,s.defOutFormat=a,s.defSwap=h;const u=be(e,l,a,h,s);let c=!1;return"R"===i.charAt(1)?c=!0:"C"!==i.charAt(1)&&"D"!==i.charAt(1)||(c="rtl"===this.checkContextual(u)),this.sourceToTarget=Qe,this.targetToSource=function(e){const t=new Array(e.length);for(let i=0;i<e.length;i++)t[e[i]]=i;return t}(this.sourceToTarget),Ye=this.targetToSource,r=t.charAt(3)===i.charAt(3)?u:"S"===i.charAt(3)?function(e,t,i){if(0===t.length)return"";void 0===e&&(e=!0),void 0===i&&(i=!0);const r=(t=String(t)).split("");let s=0,n=1,o=r.length;e||(s=r.length-1,n=-1,o=1);const l=function(e,t,i,r,s){let n=0;const o=[];let l=0;for(let a=t;a*i<r;a+=i)if(Oe(e[a])||Me(e[a])){if("ل"===e[a]&&Ae(e,a+i,i,r)){e[a]=We(e[a+i],0===n?X:j),a+=i,He(e,a,i,r),s&&(o[l]=a,l++),n=0;continue}const t=e[a];1===n?e[a]=Ve(e,a+i,i,r)?Be(e[a]):Pe(e[a],J):!0===Ve(e,a+i,i,r)?e[a]=Pe(e[a],ee):e[a]=Pe(e[a],K),Me(t)||(n=1),!0===Fe(t)&&(n=0)}else n=0;return o}(r,s,n,o,i);let a="";for(let t=0;t<r.length;t++)i&&Ie(l,l.length,t)>-1?(ze(Ye,t,!e,-1),Qe.splice(t,1)):a+=r[t];return a}(c,u,!0):function(e,t,i){if(0===e.length)return"";void 0===i&&(i=!0),void 0===t&&(t=!0);let r="";const s=(e=String(e)).split("");for(let n=0;n<e.length;n++){let o=!1;if(s[n]>="ﹰ"&&s[n]<"\ufeff"){const l=e.charCodeAt(n);s[n]>="ﻵ"&&s[n]<="ﻼ"?(t?(n>0&&i&&" "===s[n-1]?r=r.substring(0,r.length-1)+"ل":(r+="ل",o=!0),r+=Y[(l-65269)/2]):(r+=Y[(l-65269)/2],r+="ل",n+1<e.length&&i&&" "===s[n+1]?n++:o=!0),o&&(ze(Ye,n,!0,1),Qe.splice(n,0,Qe[n]))):r+=ie[l-65136]}else r+=s[n]}return r}(u,c,!0),this.sourceToTarget=Qe,this.targetToSource=Ye,this.levels=Xe,r}_inputFormatSetter(e){if(!et.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!et.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,t){return e?this._inputFormatSetter(e):e=this.inputFormat,t?this._outputFormatSetter(t):t=this.outputFormat,e!==t}checkContextual(e){let t=we(e);if("ltr"!==t&&"rtl"!==t){try{t=document.dir.toLowerCase()}catch(e){}"ltr"!==t&&"rtl"!==t&&(t="ltr")}return t}hasBidiChar(e){return tt.test(e)}}function be(e,t,i,r,s){const n=function(e,t,i){if(void 0===t.inFormat&&(t.inFormat=i.defInFormat),void 0===t.outFormat&&(t.outFormat=i.defOutFormat),void 0===t.swap&&(t.swap=i.defSwap),t.inFormat===t.outFormat)return t;const r=t.inFormat.substring(0,1),s=t.outFormat.substring(0,1);let n,o=t.inFormat.substring(1,4),l=t.outFormat.substring(1,4);return"C"===o.charAt(0)&&(n=we(e),o="ltr"===n||"rtl"===n?n.toUpperCase():"L"===t.inFormat.charAt(2)?"LTR":"RTL",t.inFormat=r+o),"C"===l.charAt(0)&&(n=we(e),"rtl"===n?l="RTL":"ltr"===n?(n=function(e){const t=e.split("");return t.reverse(),we(t.join(""))}(e),l=n.toUpperCase()):l="L"===t.outFormat.charAt(2)?"LTR":"RTL",t.outFormat=s+l),t}(e,{inFormat:t,outFormat:i,swap:r},s);if(n.inFormat===n.outFormat)return e;t=n.inFormat,i=n.outFormat,r=n.swap;const o=t.substring(0,1),l=t.substring(1,4),a=i.substring(0,1),h=i.substring(1,4);if(s.inFormat=t,s.outFormat=i,s.swap=r,"L"===o&&"VLTR"===i){if("LTR"===l)return s.dir=Je,Le(e,s);if("RTL"===l)return s.dir=$e,Le(e,s)}if("V"===o&&"V"===a)return s.dir="RTL"===l?$e:Je,Re(e,s);if("L"===o&&"VRTL"===i)return"LTR"===l?(s.dir=Je,e=Le(e,s)):(s.dir=$e,e=Le(e,s)),Re(e);if("VLTR"===t&&"LLTR"===i)return s.dir=Je,Le(e,s);if("V"===o&&"L"===a&&l!==h)return e=Re(e),"RTL"===l?be(e,"LLTR","VLTR",r,s):be(e,"LRTL","VRTL",r,s);if("VRTL"===t&&"LRTL"===i)return be(e,"LRTL","VRTL",r,s);if("L"===o&&"L"===a){const t=s.swap;return s.swap=t.substr(0,1)+"N","RTL"===l?(s.dir=$e,e=Le(e,s),s.swap="N"+t.substr(1,2),s.dir=Je,e=Le(e,s)):(s.dir=Je,e=Le(e,s),s.swap="N"+t.substr(1,2),e=be(e,"VLTR","LRTL",s.swap,s)),e}return e}function we(e){const t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return t?t[0]<="z"?"ltr":"rtl":""}function Le(e,t){const i=e.split(""),r=[];return Ue(i,r,t),function(e,t,i){if(0!==i.hiLevel&&i.swap.substr(0,1)!==i.swap.substr(1,2))for(let i=0;i<e.length;i++)1===t[i]&&(e[i]=ke(e[i]))}(i,r,t),De(2,i,r,t),De(1,i,r,t),Xe=r,i.join("")}function Ue(e,t,i){const r=e.length,s=i.dir?oe:ne;let n=0,o=-1;const l=[],a=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let t=0;t<r;t++)l[t]=Ge(e[t]);for(let h=0;h<r;h++){const r=n,u=Ce(e,l,a,h,i);a[h]=u,n=s[r][u];const c=240&n;n&=15;const d=s[n][Ze];if(t[h]=d,c>0)if(16===c){for(let e=o;e<h;e++)t[e]=1;o=-1}else o=-1;if(s[n][Ke])-1===o&&(o=h);else if(o>-1){for(let e=o;e<h;e++)t[e]=d;o=-1}l[h]===de&&(t[h]=0),i.hiLevel|=d}i.hasUbatS&&function(e,t,i,r){for(let s=0;s<i;s++)if(e[s]===ge){t[s]=r.dir;for(let i=s-1;i>=0&&e[i]===_e;i--)t[i]=r.dir}}(l,t,r,i)}function Ge(e){const t=e.charCodeAt(0),i=Ne[t>>8];return i<ve?i:Te[i-ve][255&t]}function Re(e,t){const i=e.split("");if(t){const e=[];Ue(i,e,t),Xe=e}return i.reverse(),Qe.reverse(),i.join("")}function Ie(e,t,i){for(let r=0;r<t;r++)if(e[r]===i)return r;return-1}function Oe(e){for(let t=0;t<re.length;t++)if(e>=re[t]&&e<=se[t])return!0;return!1}function Ve(e,t,i,r){for(;t*i<r&&Me(e[t]);)t+=i;return!!(t*i<r&&Oe(e[t]))}function Ae(e,t,i,r){for(;t*i<r&&Me(e[t]);)t+=i;let s=" ";if(!(t*i<r))return!1;s=e[t];for(let e=0;e<Y.length;e++)if(Y[e]===s)return!0;return!1}function De(e,t,i,r){if(r.hiLevel<e)return;if(1===e&&r.dir===$e&&!r.hasUbatB)return t.reverse(),void Qe.reverse();const s=t.length;let n,o,l,a,h,u=0;for(;u<s;){if(i[u]>=e){for(n=u+1;n<s&&i[n]>=e;)n++;for(o=u,l=n-1;o<l;o++,l--)a=t[o],t[o]=t[l],t[l]=a,h=Qe[o],Qe[o]=Qe[l],Qe[l]=h;u=n}u++}}function Ce(e,t,i,r,s){const n=t[r];return{UBAT_L:()=>(s.lastArabic=!1,le),UBAT_R:()=>(s.lastArabic=!1,ae),UBAT_ON:()=>ce,UBAT_AN:()=>ue,UBAT_EN:()=>s.lastArabic?ue:he,UBAT_AL:()=>(s.lastArabic=!0,s.hasUbatAl=!0,ae),UBAT_WS:()=>ce,UBAT_CS:()=>{let e,n;return r<1||r+1>=t.length||(e=i[r-1])!==he&&e!==ue||(n=t[r+1])!==he&&n!==ue?ce:(s.lastArabic&&(n=ue),n===e?n:ce)},UBAT_ES:()=>(r>0?i[r-1]:de)===he&&r+1<t.length&&t[r+1]===he?he:ce,UBAT_ET:()=>{if(r>0&&i[r-1]===he)return he;if(s.lastArabic)return ce;let e=r+1;const n=t.length;for(;e<n&&t[e]===me;)e++;return e<n&&t[e]===he?he:ce},UBAT_NSM:()=>{if("VLTR"===s.inFormat){const i=t.length;let s=r+1;for(;s<i&&t[s]===ye;)s++;if(s<i){const i=e[r].charCodeAt[0],n=i>=1425&&i<=2303||64286===i,o=t[s];if(n&&(o===ae||o===xe))return ae}}return r<1||t[r-1]===de?ce:i[r-1]},UBAT_B:()=>(s.lastArabic=!0,s.hasUbatB=!0,s.dir),UBAT_S:()=>(s.hasUbatS=!0,ce),UBAT_LRE:()=>(s.lastArabic=!1,ce),UBAT_RLE:()=>(s.lastArabic=!1,ce),UBAT_LRO:()=>(s.lastArabic=!1,ce),UBAT_RLO:()=>(s.lastArabic=!1,ce),UBAT_PDF:()=>(s.lastArabic=!1,ce),UBAT_BN:()=>ce}[Ee[n]]()}function ke(e){let t,i=0,r=Q.length-1;for(;i<=r;)if(t=Math.floor((i+r)/2),e<Q[t][0])r=t-1;else{if(!(e>Q[t][0]))return Q[t][1];i=t+1}return e}function Fe(e){for(let t=0;t<te.length;t++)if(te[t]===e)return!0;return!1}function Be(e){for(let t=0;t<Z.length;t++)if(e===Z[t])return $[t];return e}function Pe(e,t){for(let i=0;i<Z.length;i++)if(e===Z[i])return t[i];return e}function Me(e){return e>="ً"&&e<="ٕ"}function qe(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":""}function He(e,t,i,r){for(;t*i<r&&Me(e[t]);)t+=i;return t*i<r&&(e[t]=" ",!0)}function We(e,t){for(let i=0;i<Y.length;i++)if(e===Y[i])return t[i];return e}function ze(e,t,i,r){for(let s=0;s<e.length;s++)(e[s]>t||!i&&e[s]===t)&&(e[s]+=r)}let Qe=[],Ye=[],Xe=[];const je={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},Ze=5,Ke=6,Je=0,$e=1,et=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,tt=/[\u0591-\u06ff\ufb1d-\ufefc]/}}]);